{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"權限 (Permissions)","mdn_url":"/zh-TW/docs/Web/API/Permissions_API","locale":"zh-TW","native":"正體中文 (繁體)","sidebarHTML":"<ol><li><strong><a href=\"/zh-TW/docs/Web/API/Permissions_API\">Permissions API</a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Guides</summary><ol><li><a href=\"/zh-TW/docs/Web/API/Permissions_API/Using_the_Permissions_API\">Using the Permissions API</a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Interfaces</summary><ol><li><a href=\"/zh-TW/docs/Web/API/Permissions\"><code>Permissions</code></a></li><li><a href=\"/zh-TW/docs/Web/API/PermissionStatus\"><code>PermissionStatus</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Properties</summary><ol><li><a href=\"/zh-TW/docs/Web/API/Navigator/permissions\"><code>Navigator.permissions</code></a></li><li><a href=\"/zh-TW/docs/Web/API/WorkerNavigator/permissions\"><code>WorkerNavigator.permissions</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":"摘要","title":"摘要","isH3":false,"content":"<p>Permissions API 可顯示 Apps 所要求的所有權限，以利使用者管理。Apps 可透過此 API 而讀取其他 Apps 的權限並進一步變更。</p>\n<p>透過 <a href=\"/zh-TW/docs/DOM/PermissionSettings\" class=\"page-not-created\" title=\"This is a link to an unwritten page\"><code>PermissionSettings</code></a> 介面的 <a href=\"/zh-TW/docs/DOM/window.navigator.mozPermissionSettings\" class=\"page-not-created\" title=\"This is a link to an unwritten page\"><code>navigator.mozPermissionSettings</code></a> 屬性，即可存取 Permission Manager。</p>"}},{"type":"prose","value":{"id":"已安裝_apps_的權限","title":"已安裝 Apps 的權限","isH3":false,"content":"<p>所有 Apps 均需透過自己的 manifest 檔案而要求權限。Apps 每次所使用的 API，均以「請求顯性權限 (Explicit Permission)」的 API 為主，並提示使用者是否通過權限。如果使用者選擇「不要再提示」，大概也就不太可能改變決定了。API 則能提供介面，以利使用者管理已發出的權限。</p>\n<p>透過 <a href=\"/zh-TW/docs/DOM/PermissionSettings.get\" class=\"page-not-created\" title=\"This is a link to an unwritten page\"><code>PermissionSettings.get()</code></a>、<a href=\"/zh-TW/docs/DOM/PermissionSettings.set\" class=\"page-not-created\" title=\"This is a link to an unwritten page\"><code>set()</code></a>、<a href=\"/zh-TW/docs/DOM/PermissionSettings.isExplicit\" class=\"page-not-created\" title=\"This is a link to an unwritten page\"><code>isExplicit()</code></a> 函式即可達到上述作業。</p>"}},{"type":"prose","value":{"id":"讀取權限","title":"讀取權限","isH3":true,"content":"<p>若要知道已發出權限的目前狀態，可使用 <a href=\"/zh-TW/docs/DOM/PermissionSettings.get\" class=\"page-not-created\" title=\"This is a link to an unwritten page\"><code>PermissionSettings.get()</code></a> 函式。此函式可回傳字串，以顯示特定 Apps 權限的目前狀態。可能的數值有：</p>\n<dl>\n  <dt id=\"allow\"><code>allow</code></dt>\n  <dd>\n    <p>已通過該權限，且不需使用者的進一步互動。</p>\n  </dd>\n  <dt id=\"denied\"><code>denied</code></dt>\n  <dd>\n    <p>已否決該權限；可能是系統或使用者所否決。</p>\n  </dd>\n  <dt id=\"prompt\"><code>prompt</code></dt>\n  <dd>\n    <p>代表該權限將以明顯的提示方法，詢問使用者是否給予權限。</p>\n  </dd>\n  <dt id=\"unknown\"><code>unknown</code></dt>\n  <dd>\n    <p>代表該 Apps 並未詢問此權限，也不會提示使用者是否給予權限。</p>\n  </dd>\n</dl>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// Let's check all installed apps</span>\n<span class=\"token keyword\">var</span> apps <span class=\"token operator\">=</span> navigator<span class=\"token punctuation\">.</span>mozApps<span class=\"token punctuation\">.</span>mgmt<span class=\"token punctuation\">.</span><span class=\"token function\">getAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napps<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onsuccess</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> permission <span class=\"token operator\">=</span> navigator<span class=\"token punctuation\">.</span>mozPermissionSettings<span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Let's check the permission of each app</span>\n  apps<span class=\"token punctuation\">.</span>result<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">app</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> request<span class=\"token punctuation\">,</span> appName <span class=\"token operator\">=</span> app<span class=\"token punctuation\">.</span>manifest<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>request <span class=\"token keyword\">in</span> app<span class=\"token punctuation\">.</span>manifest<span class=\"token punctuation\">.</span>permission<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Let's get the current permission for each permission request by the application</span>\n      <span class=\"token keyword\">var</span> p <span class=\"token operator\">=</span> permission<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> app<span class=\"token punctuation\">.</span>manifestUrl<span class=\"token punctuation\">,</span> app<span class=\"token punctuation\">.</span>origine<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>appName <span class=\"token operator\">+</span> <span class=\"token string\">' asked for \"'</span> <span class=\"token operator\">+</span> request <span class=\"token operator\">+</span> <span class=\"token string\">'\" permission, which is \"'</span> <span class=\"token operator\">+</span> p <span class=\"token operator\">+</span> <span class=\"token string\">'\"'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"設定權限","title":"設定權限","isH3":true,"content":"<p>只要使用 <a href=\"/zh-TW/docs/DOM/PermissionSettings.set\" class=\"page-not-created\" title=\"This is a link to an unwritten page\"><code>PermissionSettings.set()</code></a> 函式即可設定權限。可能的數值均與 <a href=\"/zh-TW/docs/DOM/PermissionSettings.get\" class=\"page-not-created\" title=\"This is a link to an unwritten page\"><code>get</code></a> 函式所存取的相同。</p>\n<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>備註：</strong> 根據 Apps 權限的不同，某些可能為隱性 (Implicit) 權限。若因為某種理由，Apps 嘗試將權限變更為隱性權限，就會產生錯誤。為了避免這種錯誤，可透過 <a href=\"/zh-TW/docs/DOM/PermissionSettings.isExplicit\" class=\"page-not-created\" title=\"This is a link to an unwritten page\"><code>PermissionSettings.isExplicit()</code></a> 函式而檢查是否為顯性權限。</p>\n</div>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// Let's check all installed apps</span>\n<span class=\"token keyword\">var</span> apps <span class=\"token operator\">=</span> navigator<span class=\"token punctuation\">.</span>mozApps<span class=\"token punctuation\">.</span>mgmt<span class=\"token punctuation\">.</span><span class=\"token function\">getAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\napps<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onsuccess</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> permission <span class=\"token operator\">=</span> navigator<span class=\"token punctuation\">.</span>mozPermissionSettings<span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Let's grant the permission of each app</span>\n  apps<span class=\"token punctuation\">.</span>result<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">app</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> request<span class=\"token punctuation\">,</span> appName <span class=\"token operator\">=</span> app<span class=\"token punctuation\">.</span>manifest<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>request <span class=\"token keyword\">in</span> app<span class=\"token punctuation\">.</span>manifest<span class=\"token punctuation\">.</span>permission<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// If the permission is not explicit</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>permission<span class=\"token punctuation\">.</span><span class=\"token function\">isExplicit</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">request<span class=\"token punctuation\">,</span> app<span class=\"token punctuation\">.</span>manifestUrl<span class=\"token punctuation\">,</span> app<span class=\"token punctuation\">.</span>origine<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Let's ask the user for all permissions requested by the application</span>\n        permission<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> app<span class=\"token punctuation\">.</span>manifestUrl<span class=\"token punctuation\">,</span> app<span class=\"token punctuation\">.</span>origine<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"規格","title":"規格","isH3":false,"content":"<p>不屬於任何規格。</p>"}},{"type":"prose","value":{"id":"另可參閱","title":"另可參閱","isH3":false,"content":"<ul>\n  <li><a class=\"page-not-created\" title=\"The documentation about this has not yet been written; please consider contributing!\"><code>navigator.mozPermissionSettings</code></a></li>\n  <li><a class=\"page-not-created\" title=\"The documentation about this has not yet been written; please consider contributing!\"><code>PermissionSettings</code></a></li>\n</ul>"}}],"toc":[{"text":"摘要","id":"摘要"},{"text":"已安裝 Apps 的權限","id":"已安裝_apps_的權限"},{"text":"規格","id":"規格"},{"text":"另可參閱","id":"另可參閱"}],"summary":"Permissions API 可顯示 Apps 所要求的所有權限，以利使用者管理。Apps 可透過此 API 而讀取其他 Apps 的權限並進一步變更。","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Permissions API","locale":"en-US","native":"English (US)"},{"title":"Permissions API","locale":"fr","native":"Français"},{"title":"Permissions API","locale":"ja","native":"日本語"},{"title":"Permissions API","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"zh-tw/web/api/permissions_api","github_url":"https://github.com/mdn/translated-content/blob/main/files/zh-tw/web/api/permissions_api/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/zh-TW/docs/Web","title":"給開發者的網頁技術文件"},{"uri":"/zh-TW/docs/Web/API","title":"Web APIs"},{"uri":"/zh-TW/docs/Web/API/Permissions_API","title":"權限 (Permissions)"}],"pageTitle":"權限 (Permissions) - Web APIs | MDN","noIndexing":false}}