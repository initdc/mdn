{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"使用 Web Notifications","mdn_url":"/zh-TW/docs/Web/API/Notifications_API/Using_the_Notifications_API","locale":"zh-TW","native":"正體中文 (繁體)","sidebarHTML":"","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<div class=\"notecard experimental\" id=\"sect1\"><p><strong>Experimental:</strong> <strong>這是一個實驗中的功能</strong><br>此功能在某些瀏覽器尚在開發中，請參考<a href=\"#browser_compatibility\">兼容表格</a>以得到不同瀏覽器用的前輟。</p></div>"}},{"type":"prose","value":{"id":"摘要","title":"摘要","isH3":false,"content":"<p>Web Notifications API 可將通知傳送至頁面以外的系統層級並顯示通知。因此即使 Web Apps 處於閒置狀態，亦可傳送資訊予使用者。絕佳範例之一，就是在使用其他 Apps 時，Web Mail App 同樣可通知使用者已接收到新郵件。</p>"}},{"type":"prose","value":{"id":"要求權限","title":"要求權限","isH3":false,"content":""}},{"type":"prose","value":{"id":"網頁內容","title":"網頁內容","isH3":true,"content":"<p>在 Apps 傳送通知之前，使用者必須先許可 Apps 的動作。只要 APIs 嘗試予網頁之外的東西互動，均必須先獲得使用者的授權。如此可避免濫發通知而影響使用經驗。</p>\n<p>透過 <a href=\"/en-US/docs/Web/API/Notification/permission\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">Notification.permission (en-US)</a> 唯讀屬性，要傳送通知的 Apps 將檢查目前的授權狀態。此屬性共有 3 組參數：</p>\n<ul>\n  <li><code>default</code>：使用者尚未給予任何權限 (因此不會顯示任何通知)</li>\n  <li><code>granted</code>：使用者允許接收到 Apps 的通知</li>\n  <li><code>denied</code>：使用者拒絕接收 Apps 的通知</li>\n</ul>\n<div class=\"notecard note\" id=\"sect2\">\n  <p><strong>備註：</strong> Chrome 與 Safari 尚未建構 <code>permission</code> 屬性。</p>\n</div>\n<p>若使用者尚未給予權限，則 Apps 必須透過 <a href=\"/en-US/docs/Web/API/Notification/requestPermission\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">Notification.requestPermission() (en-US)</a> 函式讓使用者選擇，接著由此函式接收 1 組回呼 (Callback) 函式作為參數；而該回呼函式則提供使用者是否授權的資訊。</p>\n<p>以下為啟動 Apps 時要求權限的常用範例：</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'load'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  Notification<span class=\"token punctuation\">.</span><span class=\"token function\">requestPermission</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">status</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// This allows to use Notification.permission with Chrome/Safari</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Notification<span class=\"token punctuation\">.</span>permission <span class=\"token operator\">!==</span> status<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      Notification<span class=\"token punctuation\">.</span>permission <span class=\"token operator\">=</span> status<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<div class=\"notecard note\" id=\"sect3\">\n  <p><strong>備註：</strong> Chrome 不允許於載入事件中呼叫 <a href=\"/en-US/docs/Web/API/Notification/requestPermission\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">Notification.requestPermission() (en-US)</a> (參閱 <a href=\"https://code.google.com/p/chromium/issues/detail?id=274284\" class=\"external\" rel=\" noopener\">issue 274284</a>)。</p>\n</div>"}},{"type":"prose","value":{"id":"已安裝的_apps","title":"已安裝的 Apps","isH3":true,"content":"<p>在安裝 Apps 之後，若於 <a href=\"/zh-TW/docs/%E6%87%89%E7%94%A8%E7%A8%8B%E5%BC%8F/Manifest-840092-dup\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">Apps 的 manifest 檔案</a>中直接添加權限，即可省去再次向使用者要求權限的動作。</p>\n<div class=\"code-example\"><pre class=\"brush: json notranslate\"><code>permissions<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"desktop-notification\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"description: \"</span>Allows to display notifications on the user's desktop.\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"建立通知","title":"建立通知","isH3":false,"content":"<p>透過 <a href=\"/zh-TW/docs/Web/API/notification\"><code>Notification</code></a> 建構子 (Constructor) 即可建立通知。此建構子包含 1 組標題，可於通知內顯示；另有如 <a href=\"/en-US/docs/Web/API/Notification/icon\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">icon (en-US)</a> 或文字 <a href=\"/en-US/docs/Web/API/Notification/body\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">body (en-US)</a> 等數個選項，可強化通知的內容。</p>\n<p>在建立實體 (Instantiated) 之後，就會儘快顯示通知。若要追蹤通知的目前狀態，必須在 <a href=\"/zh-TW/docs/Web/API/notification\"><code>Notification</code></a> 的實體階層觸發 4 個事件：</p>\n<ul>\n  <li><a href=\"/en-US/docs/Web/API/Element/show_event\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">show (en-US)</a>：對使用者顯示通知之後，隨即觸發</li>\n  <li><a href=\"/zh-TW/docs/Web/API/Element/click_event\">click</a>：使用者點擊通知之後，隨即觸發</li>\n  <li><a href=\"/zh-TW/docs/Web/Reference/Events/close\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">close</a>：關閉通知之後，隨即觸發</li>\n  <li><a href=\"/en-US/docs/Web/API/Element/error_event\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">error (en-US)</a>：通知發生任何錯誤 (大多數是因為某種情況而未顯示通知)，隨即觸發</li>\n</ul>\n<p>而透過 <a href=\"/en-US/docs/Web/API/Notification/show_event\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">onshow (en-US)</a>、<a href=\"/en-US/docs/Web/API/Notification/click_event\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">onclick (en-US)</a>、<a href=\"/en-US/docs/Web/API/Notification/close_event\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">onclose (en-US)</a>，或 <a href=\"/en-US/docs/Web/API/Notification/error_event\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">onerror (en-US)</a> 等事件處理器 (Event handler)，即可追蹤這些事件。由於 <a href=\"/zh-TW/docs/Web/API/notification\"><code>Notification</code></a> 是繼承 <a href=\"/zh-TW/docs/Web/API/EventTarget\"><code>EventTarget</code></a> 而來，因此亦可使用 <a href=\"/en-US/docs/Web/API/EventTarget/addEventListener\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">addEventListener() (en-US)</a> 函式。</p>\n<div class=\"notecard note\" id=\"sect4\">\n  <p><strong>備註：</strong> Firefox 與 Safari 並未遵守 close 事件的規格。此規格雖然規定「僅限使用者能關閉通知」，但 Firefox 與 Safari 卻可於數分鐘後自動關閉通知。因此不一定是由使用者關閉通知。此規格並明確規定「應透過 <a href=\"/en-US/docs/Web/API/Notification/close\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">Notification.close() (en-US)</a> 函式，於應用程式層級完成自動關閉通知」。範例程式碼如下：</p>\n  <div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> n <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Notification</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hi!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nn<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onshow</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">,</span> <span class=\"token number\">5000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n</div>"}},{"type":"prose","value":{"id":"簡易範例","title":"簡易範例","isH3":true,"content":"<p>先假設下列基本 HTML：</p>\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">&gt;</span></span>Notify me!<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<p>則能以這種方法處理通知：</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'load'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// At first, let's check if we have permission for notification</span>\n  <span class=\"token comment\">// If not, let's ask for it</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Notification <span class=\"token operator\">&amp;&amp;</span> Notification<span class=\"token punctuation\">.</span>permission <span class=\"token operator\">!==</span> <span class=\"token string\">\"granted\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    Notification<span class=\"token punctuation\">.</span><span class=\"token function\">requestPermission</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">status</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Notification<span class=\"token punctuation\">.</span>permission <span class=\"token operator\">!==</span> status<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        Notification<span class=\"token punctuation\">.</span>permission <span class=\"token operator\">=</span> status<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">var</span> button <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByTagName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  button<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// If the user agreed to get notified</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Notification <span class=\"token operator\">&amp;&amp;</span> Notification<span class=\"token punctuation\">.</span>permission <span class=\"token operator\">===</span> <span class=\"token string\">\"granted\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">var</span> n <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Notification</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hi!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">// If the user hasn't told if he wants to be notified or not</span>\n    <span class=\"token comment\">// Note: because of Chrome, we are not sure the permission property</span>\n    <span class=\"token comment\">// is set, therefore it's unsafe to check for the \"default\" value.</span>\n    <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Notification <span class=\"token operator\">&amp;&amp;</span> Notification<span class=\"token punctuation\">.</span>permission <span class=\"token operator\">!==</span> <span class=\"token string\">\"denied\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      Notification<span class=\"token punctuation\">.</span><span class=\"token function\">requestPermission</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">status</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Notification<span class=\"token punctuation\">.</span>permission <span class=\"token operator\">!==</span> status<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          Notification<span class=\"token punctuation\">.</span>permission <span class=\"token operator\">=</span> status<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token comment\">// If the user said okay</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>status <span class=\"token operator\">===</span> <span class=\"token string\">\"granted\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">var</span> n <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Notification</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hi!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token comment\">// Otherwise, we can fallback to a regular modal alert</span>\n        <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hi!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">// If the user refuses to get notified</span>\n    <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// We can fallback to a regular modal alert</span>\n      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hi!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"現場測試結果","title":"現場測試結果","isH3":true,"content":"<p>若無法顯示，可至本文右上角「Language」切換回英文原文觀看。</p><iframe class=\"sample-code-frame\" title=\"建立通知\" id=\"frame_simple_example\" width=\"100%\" height=\"60\" src=\"https://yari-demos.prod.mdn.mozit.cloud/zh-TW/docs/Web/API/Notifications_API/Using_the_Notifications_API/_sample_.simple_example.html\" loading=\"lazy\"></iframe>"}},{"type":"prose","value":{"id":"處理多筆通知","title":"處理多筆通知","isH3":false,"content":"<p>某些情況下 (如某個即時訊息 App 持續通知每一筆進來的訊息)，使用者可能會接收大量的通知。為了避免太多非必要訊息擠爆使用者的桌面，則應該讓等待中的通知進入佇列。</p>\n<p>將標籤添加至任何新的通知，即可達到佇列效果。若通知擁有相同的標籤且尚未顯示，則新通知就會取代先前的通知；反之，若已顯示了相同標籤的通知，就會關閉先前的通知而顯示新通知。</p>"}},{"type":"prose","value":{"id":"標籤範例","title":"標籤範例","isH3":true,"content":"<p>先假設下列基本 HTML：</p>\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">&gt;</span></span>Notify me!<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<p>則能以下列方式處理多筆通知：</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'load'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// At first, let's check if we have permission for notification</span>\n  <span class=\"token comment\">// If not, let's ask for it</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Notification <span class=\"token operator\">&amp;&amp;</span> Notification<span class=\"token punctuation\">.</span>permission <span class=\"token operator\">!==</span> <span class=\"token string\">\"granted\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    Notification<span class=\"token punctuation\">.</span><span class=\"token function\">requestPermission</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">status</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Notification<span class=\"token punctuation\">.</span>permission <span class=\"token operator\">!==</span> status<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        Notification<span class=\"token punctuation\">.</span>permission <span class=\"token operator\">=</span> status<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">var</span> button <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByTagName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  button<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// If the user agreed to get notified</span>\n    <span class=\"token comment\">// Let's try to send ten notifications</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Notification <span class=\"token operator\">&amp;&amp;</span> Notification<span class=\"token punctuation\">.</span>permission <span class=\"token operator\">===</span> <span class=\"token string\">\"granted\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Thanks to the tag, we should only see the \"Hi! 10\" notification</span>\n        <span class=\"token keyword\">var</span> n <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Notification</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hi! \"</span> <span class=\"token operator\">+</span> i<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">tag</span><span class=\"token operator\">:</span> <span class=\"token string\">'soManyNotification'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">// If the user hasn't told if he wants to be notified or not</span>\n    <span class=\"token comment\">// Note: because of Chrome, we are not sure the permission property</span>\n    <span class=\"token comment\">// is set, therefore it's unsafe to check for the \"default\" value.</span>\n    <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Notification <span class=\"token operator\">&amp;&amp;</span> Notification<span class=\"token punctuation\">.</span>permission <span class=\"token operator\">!==</span> <span class=\"token string\">\"denied\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      Notification<span class=\"token punctuation\">.</span><span class=\"token function\">requestPermission</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">status</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Notification<span class=\"token punctuation\">.</span>permission <span class=\"token operator\">!==</span> status<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          Notification<span class=\"token punctuation\">.</span>permission <span class=\"token operator\">=</span> status<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token comment\">// If the user said okay</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>status <span class=\"token operator\">===</span> <span class=\"token string\">\"granted\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token comment\">// Thanks to the tag, we should only see the \"Hi! 10\" notification</span>\n            <span class=\"token keyword\">var</span> n <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Notification</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hi! \"</span> <span class=\"token operator\">+</span> i<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">tag</span><span class=\"token operator\">:</span> <span class=\"token string\">'soManyNotification'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token comment\">// Otherwise, we can fallback to a regular modal alert</span>\n        <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>Hi<span class=\"token operator\">!</span>\"<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">// If the user refuses to get notified</span>\n    <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// We can fallback to a regular modal alert</span>\n      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>Hi<span class=\"token operator\">!</span>\"<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"現場測試結果_2","title":"現場測試結果","isH3":true,"content":"<p>若無法顯示，可至本文右上角「Language」切換回英文原文觀看。</p><iframe class=\"sample-code-frame\" title=\"處理多筆通知\" id=\"frame_tag_example\" width=\"100%\" height=\"60\" src=\"https://yari-demos.prod.mdn.mozit.cloud/zh-TW/docs/Web/API/Notifications_API/Using_the_Notifications_API/_sample_.tag_example.html\" loading=\"lazy\"></iframe>"}},{"type":"specifications","value":{"title":"規格","id":"規格","isH3":false,"specifications":[{"bcdSpecificationURL":"https://notifications.spec.whatwg.org/#api","title":"Notifications API Standard"}],"query":"api.Notification"}},{"type":"browser_compatibility","value":{"title":"瀏覽器相容性","id":"瀏覽器相容性","isH3":false,"query":"api.Notification","dataURL":"/zh-TW/docs/Web/API/Notifications_API/Using_the_Notifications_API/bcd.json"}},{"type":"prose","value":{"id":"另可參閱","title":"另可參閱","isH3":false,"content":"<ul>\n  <li><a href=\"/zh-TW/docs/Web/API/notification\"><code>Notification</code></a></li>\n</ul>"}}],"toc":[{"text":"摘要","id":"摘要"},{"text":"要求權限","id":"要求權限"},{"text":"建立通知","id":"建立通知"},{"text":"處理多筆通知","id":"處理多筆通知"},{"text":"規格","id":"規格"},{"text":"瀏覽器相容性","id":"瀏覽器相容性"},{"text":"另可參閱","id":"另可參閱"}],"summary":"Web Notifications API 可將通知傳送至頁面以外的系統層級並顯示通知。因此即使 Web Apps 處於閒置狀態，亦可傳送資訊予使用者。絕佳範例之一，就是在使用其他 Apps 時，Web Mail App 同樣可通知使用者已接收到新郵件。","popularity":0.0002,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Using the Notifications API","locale":"en-US","native":"English (US)"},{"title":"Usando la API de Notificaciones","locale":"es","native":"Español"},{"title":"Utilisation de l'API Notifications","locale":"fr","native":"Français"},{"title":"通知 API の使用","locale":"ja","native":"日本語"},{"title":"알림 API 사용하기","locale":"ko","native":"한국어"},{"title":"使用 Web Notifications","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"zh-tw/web/api/notifications_api/using_the_notifications_api","github_url":"https://github.com/mdn/translated-content/blob/main/files/zh-tw/web/api/notifications_api/using_the_notifications_api/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/zh-TW/docs/Web","title":"給開發者的網頁技術文件"},{"uri":"/zh-TW/docs/Web/API","title":"Web APIs"},{"uri":"/zh-TW/docs/Web/API/Notifications_API","title":"Notifications API"},{"uri":"/zh-TW/docs/Web/API/Notifications_API/Using_the_Notifications_API","title":"使用 Web Notifications"}],"pageTitle":"使用 Web Notifications - Web APIs | MDN","noIndexing":false}}