{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"HTML 拖放 API","mdn_url":"/zh-TW/docs/Web/API/HTML_Drag_and_Drop_API","locale":"zh-TW","native":"正體中文 (繁體)","sidebarHTML":"<ol><li><strong><a href=\"/zh-TW/docs/Web/API/HTML_Drag_and_Drop_API\">HTML Drag and Drop API</a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Guides</summary><ol><li><a href=\"/zh-TW/docs/Web/API/HTML_Drag_and_Drop_API/File_drag_and_drop\">File drag and drop</a></li><li><a href=\"/zh-TW/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations\">Drag operations</a></li><li><a href=\"/zh-TW/docs/Web/API/HTML_Drag_and_Drop_API/Multiple_items\">Dragging and Dropping Multiple Items</a></li><li><a href=\"/zh-TW/docs/Web/API/HTML_Drag_and_Drop_API/Recommended_drag_types\">Recommended Drag Types</a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Interfaces</summary><ol><li><a href=\"/zh-TW/docs/Web/API/DataTransfer\"><code>DataTransfer</code></a></li><li><a href=\"/zh-TW/docs/Web/API/DataTransferItem\"><code>DataTransferItem</code></a></li><li><a href=\"/zh-TW/docs/Web/API/DataTransferItemList\"><code>DataTransferItemList</code></a></li><li><a href=\"/zh-TW/docs/Web/API/DragEvent\"><code>DragEvent</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Events</summary><ol><li><a href=\"/zh-TW/docs/Web/API/Document/drag_event\"><code>Document</code>: <code>drag</code></a></li><li><a href=\"/zh-TW/docs/Web/API/Document/dragend_event\"><code>Document</code>: <code>dragend</code></a></li><li><a href=\"/zh-TW/docs/Web/API/Document/dragenter_event\"><code>Document</code>: <code>dragenter</code></a></li><li><a href=\"/zh-TW/docs/Web/API/Document/dragleave_event\"><code>Document</code>: <code>dragleave</code></a></li><li><a href=\"/zh-TW/docs/Web/API/Document/dragover_event\"><code>Document</code>: <code>dragover</code></a></li><li><a href=\"/zh-TW/docs/Web/API/Document/dragstart_event\"><code>Document</code>: <code>dragstart</code></a></li><li><a href=\"/zh-TW/docs/Web/API/Document/drop_event\"><code>Document</code>: <code>drop</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>HTML 拖放介面能讓網頁應用程式於 Firefox 及其他瀏覽器中使用拖放功能。舉例來說，使用者可以利用此功能以滑鼠選擇*可拖曳（draggable）<em>元素，拖曳至一個</em>可放置（droppable）<em>元素上，並放開滑鼠按鍵來放置此元素。在拖曳操作時，一個半透明的</em>可拖曳（draggable）*元素會跟隨著滑鼠游標。</p>\n<p>對於網站、擴充套件以及 XUL 應用程式來說，你可以自定義能成為*可拖曳（draggable）*的元素類型、*可拖曳（draggable）<em>元素產生的回鐀類型，以及</em>可放置（droppable）*的元素。</p>\n<p>此文件為 HTML 拖放的概述，包含了相關介面的說明、在應用程式中加入拖放支援的基本步驟，以及相關介面使用簡介。</p>"}},{"type":"prose","value":{"id":"拖曳事件","title":"拖曳事件","isH3":false,"content":"<p>HTML 拖放操作基於 <a href=\"/zh-TW/docs/Web/API/Event\" title=\"DOM 事件模型\"><code>DOM 事件模型</code></a>並且使用繼承自<a href=\"/zh-TW/docs/Web/API/MouseEvent\" title=\"滑鼠事件\"><code>滑鼠事件</code></a>的*<a href=\"/zh-TW/docs/Web/API/DragEvent\" title=\"拖曳事件\"><code>拖曳事件</code></a><em>介面。一個典型的拖曳操作開始於使用者利用滑鼠選取了一個</em>可拖曳（draggable）<em>元素、移動滑鼠至一個</em>可放置（droppable）*元素並放開滑鼠按鍵。在操作的過程中，會觸發多種類型的事件，且一些事件類型可能會被觸發多次（如 <code><a href=\"/en-US/docs/Web/API/HTMLElement/drag_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">drag (en-US)</a></code> 及 <code><a href=\"/en-US/docs/Web/API/HTMLElement/dragover_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragover (en-US)</a></code> 事件類型）。</p>\n<p>所有的<a href=\"/zh-TW/docs/Web/API/DragEvent#event_types\">拖曳事件類型</a>都有相關的<a href=\"/zh-TW/docs/Web/API/DragEvent#globaleventhandlers\">通用事件處理器</a>（global event handler）。每一種拖曳事件類型及拖曳通用事件處理器屬性都有說明此事件的參考文件。以下的表格提供了每一種事件的簡要說明，以及參考文件的連結。</p>\n<table>\n  <thead>\n    <tr>\n      <th>事件</th>\n      <th>事件處理器屬性</th>\n      <th>說明</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td><code><a href=\"/en-US/docs/Web/API/HTMLElement/drag_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">drag (en-US)</a></code></td>\n      <td><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/HTMLElement/drag_event\"><code>ondrag</code> <small>(en-US)</small></a></td>\n      <td>於一個元素或文字選取區塊被拖曳時觸發。</td>\n    </tr>\n    <tr>\n      <td><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragend_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragend (en-US)</a></code></td>\n      <td><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/HTMLElement/dragend_event\"><code>ondragend</code> <small>(en-US)</small></a></td>\n      <td>於拖曳操作結束時觸發（如放開滑鼠按鍵或按下鍵盤的 escape 鍵）。（請參考<a href=\"/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations#dragend\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">結束拖曳 (en-US)</a>。）</td>\n    </tr>\n    <tr>\n      <td><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragenter_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragenter (en-US)</a></code></td>\n      <td><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/HTMLElement/dragenter_event\"><code>ondragenter</code> <small>(en-US)</small></a></td>\n      <td>於一個元素或文字選取區塊被拖曳移動進入一個有效的放置目標時觸發。（請參考<a href=\"/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations#droptargets\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">指定拖曳目標 (en-US)</a>。）</td>\n    </tr>\n    <tr>\n      <td><code><a href=\"/zh-TW/docs/Web/Reference/Events/dragexit\" title=\"This is a link to an unwritten page\" class=\"page-not-created\">dragexit</a></code></td>\n      <td><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/HTMLElement/dragleave_event\"><code>ondragexit</code> <small>(en-US)</small></a></td>\n      <td>當一個元素不再是被選取中的拖曳元素時觸發。</td>\n    </tr>\n    <tr>\n      <td><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragleave_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragleave (en-US)</a></code></td>\n      <td><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/HTMLElement/dragleave_event\"><code>ondragleave</code> <small>(en-US)</small></a></td>\n      <td>於一個元素或文字選取區塊被拖曳移動離開一個有效的放置目標時觸發。</td>\n    </tr>\n    <tr>\n      <td><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragover_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragover (en-US)</a></code></td>\n      <td><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/HTMLElement/dragover_event\"><code>ondragover</code> <small>(en-US)</small></a></td>\n      <td>於一個元素或文字選取區塊被拖曳移動經過一個有效的放置目標時觸發（每幾百毫秒觸發一次）。</td>\n    </tr>\n    <tr>\n      <td><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragstart_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragstart (en-US)</a></code></td>\n      <td><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/HTMLElement/dragstart_event\"><code>ondragstart</code> <small>(en-US)</small></a></td>\n      <td>於使用者開始拖曳一個元素或文字選取區塊時觸發。（請參考<a href=\"/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations#dragstart\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">開始拖曳 (en-US)</a>。）</td>\n    </tr>\n    <tr>\n      <td><code><a href=\"/en-US/docs/Web/API/HTMLElement/drop_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">drop (en-US)</a></code></td>\n      <td><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/HTMLElement/drop_event\"><code>ondrop</code> <small>(en-US)</small></a></td>\n      <td>於一個元素或文字選取區塊被放置至一個有效的放置目標時觸發。（請參考<a href=\"/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations#drop\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">執行放置 (en-US)</a>。）</td>\n    </tr>\n  </tbody>\n</table>\n<p>注意：<code>dragstart</code> 與 <code>dragend</code> 事件，在把檔案從作業系統拖放到瀏覽器時，並不會觸發。</p>"}},{"type":"prose","value":{"id":"介面","title":"介面","isH3":false,"content":"<p>HTML 拖放介面有 <a href=\"/zh-TW/docs/Web/API/DragEvent\"><code>DragEvent</code></a>、<a href=\"/zh-TW/docs/Web/API/DataTransfer\"><code>DataTransfer</code></a>、<a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransferItem\"><code>DataTransferItem</code> <small>(en-US)</small></a> 以及 <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransferItemList\"><code>DataTransferItemList</code> <small>(en-US)</small></a>。</p>\n<p><a href=\"/zh-TW/docs/Web/API/DragEvent\"><code>DragEvent</code></a> 介面擁有一個建構式及一個屬性－<a href=\"/zh-TW/docs/Web/API/DragEvent/dataTransfer\" title=\"dataTransfer\"><code>dataTransfer</code></a> 屬性為一個 <a href=\"/zh-TW/docs/Web/API/DataTransfer\"><code>DataTransfer</code></a> 物件。<a href=\"/zh-TW/docs/Web/API/DataTransfer\"><code>DataTransfer</code></a> 物件包含了拖放事件的狀態，如正在進行的拖放事件類型（例如 <code>copy</code> 或 <code>move</code>）、拖放中的資料（一或多個項目）以及每一個*拖放項目（drag item）*的檔案類型（MIME type）。<a href=\"/zh-TW/docs/Web/API/DataTransfer\"><code>DataTransfer</code></a> 物件也擁有加入及移除拖放資料項目的方法。<a href=\"/zh-TW/docs/Web/API/DragEvent\"><code>DragEvent</code></a> 與 <a href=\"/zh-TW/docs/Web/API/DataTransfer\"><code>DataTransfer</code></a> 介面應該是唯一須要加至應用程式中的 HTML 拖放功能。另外，請留意 Firefox 支援了一些 <a href=\"#gecko-specific_interfaces\">Gecko-specific 擴充</a>予 <a href=\"/zh-TW/docs/Web/API/DataTransfer\"><code>DataTransfer</code></a> 物件使用，雖然這些擴充只能在 Firefox 上作用。</p>\n<p>每個 <a href=\"/zh-TW/docs/Web/API/DataTransfer\"><code>DataTransfer</code></a> 物件都包含了 <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/items\"><code>items</code> <small>(en-US)</small></a> 屬性。此屬性乃 <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransferItem\"><code>DataTransferItem</code> <small>(en-US)</small></a> 物件的 <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransferItemList\"><code>list</code> <small>(en-US)</small></a>。而每個 <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransferItem\"><code>DataTransferItem</code> <small>(en-US)</small></a> 物件，則代表著一個<em>拖放單元</em>，每個拖放單元則擁有代表該資料<em>種類</em>的 <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransferItem/kind\"><code>kind</code> <small>(en-US)</small></a> 屬性（<code>string</code> 或 <code>file</code>）、還有表示該單元檔案類型（如 MIME）的<a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransferItem/type\"><code>type</code> <small>(en-US)</small></a> 屬性。另外，<a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransferItem\"><code>DataTransferItem</code> <small>(en-US)</small></a> 物件能取得拖放單元的資料。</p>\n<p><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransferItemList\"><code>DataTransferItemList</code> <small>(en-US)</small></a> 物件為 <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransferItem\"><code>DataTransferItem</code> <small>(en-US)</small></a> 的列表。該物件列表擁有以下方法：給列表增加拖放單元、從列表刪除拖放單元、還有清除列表內所有的拖放單元。</p>\n<p><a href=\"/zh-TW/docs/Web/API/DataTransfer\"><code>DataTransfer</code></a> 與 <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransferItem\"><code>DataTransferItem</code> <small>(en-US)</small></a> 介面的最大不同，就是前者使用同步的 <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/getData\"><code>getData()</code> <small>(en-US)</small></a> 方法訪問拖放單元的資料；後者則使用非同步的 <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransferItem/getAsString\"><code>getAsString()</code> <small>(en-US)</small></a> 方法訪問。</p>\n<p>注意：<a href=\"/zh-TW/docs/Web/API/DragEvent\"><code>DragEvent</code></a> 與 <a href=\"/zh-TW/docs/Web/API/DataTransfer\"><code>DataTransfer</code></a> 介面受廣泛的桌面瀏覽器支援。但只有少數瀏覽器支援 <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransferItem\"><code>DataTransferItem</code> <small>(en-US)</small></a> 與 <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransferItemList\"><code>DataTransferItemList</code> <small>(en-US)</small></a> 介面。請參見 <a href=\"#interoperability\">Interoperability</a> 以取得有關拖放功能互通性的資訊。</p>"}},{"type":"prose","value":{"id":"gecko-specific_interfaces","title":"Gecko-specific interfaces","isH3":true,"content":"<p>Mozilla and Firefox support some features not in the standard drag and drop model. These are <em>convenience functions</em> to facilitate dragging multiple items and dragging non-string data (such as files). For more information, see <a href=\"/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Multiple_items\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">Dragging and Dropping Multiple Items (en-US)</a>. Additionally, see the <a href=\"/zh-TW/docs/Web/API/DataTransfer\"><code>DataTransfer</code></a> reference page for all of the <a href=\"/zh-TW/docs/Web/API/DataTransfer#gecko_properties\">Gecko-specific properties</a> and <a href=\"/zh-TW/docs/Web/API/DataTransfer#gecko_methods\">Gecko-specific methods</a>.</p>"}},{"type":"prose","value":{"id":"基本用法","title":"基本用法","isH3":false,"content":"<p>This section provides a summary of the basic steps to add drag and drop functionality to an application. Each section includes a description of the step, a short code example, and links to additional information.</p>"}},{"type":"prose","value":{"id":"identify_what_is_draggable","title":"Identify what is <em>draggable</em>","isH3":true,"content":"<p>To make an element <em>draggable</em> requires adding the <a href=\"/zh-TW/docs/Web/HTML/Global_attributes#attr-draggable\"><code>draggable</code></a> attribute plus the <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/HTMLElement/dragstart_event\"><code>ondragstart</code> <small>(en-US)</small></a> global event handler, as shown in the following code sample</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">dragstart_handler</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ev</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dragStart\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token comment\">// Add the target element's id to the data transfer object</span>\n ev<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span><span class=\"token function\">setData</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text/plain\"</span><span class=\"token punctuation\">,</span> ev<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token operator\">&lt;</span>body<span class=\"token operator\">&gt;</span>\n <span class=\"token operator\">&lt;</span>p id<span class=\"token operator\">=</span><span class=\"token string\">\"p1\"</span> draggable<span class=\"token operator\">=</span><span class=\"token string\">\"true\"</span> ondragstart<span class=\"token operator\">=</span><span class=\"token string\">\"dragstart_handler(event);\"</span><span class=\"token operator\">&gt;</span>This element is draggable<span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>body<span class=\"token operator\">&gt;</span>\n</code></pre></div>\n<p>See the <a href=\"/en-US/docs/Web/HTML/Global_attributes/draggable\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">draggable attribute reference (en-US)</a> and the <a href=\"/zh-TW/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations#draggableattribute\">Drag operations guide</a> for more information.</p>","titleAsText":"Identify what is draggable"}},{"type":"prose","value":{"id":"define_the_drags_data","title":"Define the drag's data","isH3":true,"content":"<p>The application is free to include any number of data items in a drag operation. Each data item is a <a href=\"/zh-TW/docs/Web/JavaScript/Reference/Global_Objects/String\" title=\"string\"><code>string</code></a> of a particular <code>type</code>, typically a MIME type such as <code>text/html</code>.</p>\n<p>Each <a href=\"/zh-TW/docs/Web/API/DragEvent\" title=\"drag event\"><code>drag event</code></a> has a <a href=\"/zh-TW/docs/Web/API/DragEvent/dataTransfer\" title=\"dataTransfer\"><code>dataTransfer</code></a> property that <em>holds</em> the event's data. This property (which is a <a href=\"/zh-TW/docs/Web/API/DataTransfer\"><code>DataTransfer</code></a> object) also has methods to <em>manage</em> drag data. The <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/setData\"><code>setData()</code> <small>(en-US)</small></a> method is used to add an item to the drag data, as shown in the following example.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">dragstart_handler</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ev</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Add the drag data</span>\n  ev<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span><span class=\"token function\">setData</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text/plain\"</span><span class=\"token punctuation\">,</span> ev<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  ev<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span><span class=\"token function\">setData</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text/html\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"&lt;p&gt;Example paragraph&lt;/p&gt;\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  ev<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span><span class=\"token function\">setData</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text/uri-list\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"http://developer.mozilla.org\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>For a list of common data types used for drag and drop (such as text, HTML, links, and files), see <a href=\"/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Recommended_drag_types\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">Recommended Drag Types (en-US)</a> and for more information about drag data, see <a href=\"/zh-TW/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations#dragdata\">Drag Data</a>.</p>"}},{"type":"prose","value":{"id":"define_the_drag_image","title":"Define the drag image","isH3":true,"content":"<p>By default, the browser supplies an image that appears beside the mouse pointer during a drag operation. However, an application may define a custom image by using the <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/setDragImage\"><code>setDragImage()</code> <small>(en-US)</small></a> method as shown in the following example.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">dragstart_handler</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ev</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Create an image and then use it for the drag image.</span>\n  <span class=\"token comment\">// NOTE: change \"example.gif\" to an existing image or the image</span>\n  <span class=\"token comment\">// will not be created and the default drag image will be used.</span>\n  <span class=\"token keyword\">var</span> img <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Image</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  img<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> <span class=\"token string\">'example.gif'</span><span class=\"token punctuation\">;</span>\n  ev<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span><span class=\"token function\">setDragImage</span><span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>To learn more about drag feedback images, see <a href=\"/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations#dragfeedback\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">Setting the Drag Feedback Image (en-US)</a>.</p>"}},{"type":"prose","value":{"id":"define_the_drag_effect","title":"Define the drag <em>effect</em>","isH3":true,"content":"<p>The <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/dropEffect\"><code>dropEffect</code> <small>(en-US)</small></a> property is used to control the feedback (typically visual) the user is given during a drag and drop operation. It affects which cursor the browser displays while dragging. For example, when the user hovers over a target drop element, the browser's cursor may indicate the type of operation that will occur.</p>\n<p>Three effects may be defined:</p>\n<p><code>copy</code> indicates that the data being dragged will be copied from its present location to the drop location.</p>\n<p><code>move</code> indicates that the data being dragged will be moved</p>\n<p><code>link</code> indicates that some form of relationship or connection will be created between the source and drop locations.</p>\n<p>During the drag operation, the drag effects may be modified to indicate that certain effects are allowed at certain locations. If allowed, a drop may occur at that location.</p>\n<p>The following example shows how to use this property.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">dragstart_handler</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ev</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Set the drag effect to copy</span>\n  ev<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span>dropEffect <span class=\"token operator\">=</span> <span class=\"token string\">\"copy\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>See <a href=\"/zh-TW/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations#drageffects\">Drag Effects</a> for more details.</p>","titleAsText":"Define the drag effect"}},{"type":"prose","value":{"id":"define_a_drop_zone","title":"Define a <em>drop zone</em>","isH3":true,"content":"<p>By default, the browser prevents anything from happening when dropping something onto the HTML element. To change that behavior so that an element becomes a <em>drop zone</em> or is <em>droppable</em>, the element must have both <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/HTMLElement/dragover_event\"><code>ondragover</code> <small>(en-US)</small></a> and <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/HTMLElement/drop_event\"><code>ondrop</code> <small>(en-US)</small></a> event handler attributes. The following example shows how to use those attributes and includes basic event handlers for each attribute.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">dragover_handler</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ev</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n ev<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token comment\">// Set the dropEffect to move</span>\n ev<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span>dropEffect <span class=\"token operator\">=</span> <span class=\"token string\">\"move\"</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">drop_handler</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ev</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n ev<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token comment\">// Get the id of the target and add the moved element to the target's DOM</span>\n <span class=\"token keyword\">var</span> data <span class=\"token operator\">=</span> ev<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span><span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n ev<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span>body<span class=\"token operator\">&gt;</span>\n <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">\"target\"</span> ondrop<span class=\"token operator\">=</span><span class=\"token string\">\"drop_handler(event);\"</span> ondragover<span class=\"token operator\">=</span><span class=\"token string\">\"dragover_handler(event);\"</span><span class=\"token operator\">&gt;</span>Drop Zone<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>body<span class=\"token operator\">&gt;</span>\n</code></pre></div>\n<p>Note each handler calls <a href=\"/zh-TW/docs/Web/API/Event/preventDefault\" title=\"preventDefault()\"><code>preventDefault()</code></a> to prevent additional event processing for this prevent (such as touch events or pointer events).</p>\n<p>For more information, see <a href=\"/zh-TW/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations#droptargets\">Specifying Drop Targets</a>.</p>","titleAsText":"Define a drop zone"}},{"type":"prose","value":{"id":"handle_the_drop_effect","title":"Handle the drop <em>effect</em>","isH3":true,"content":"<p>The handler for the <code><a href=\"/en-US/docs/Web/API/HTMLElement/drop_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">drop (en-US)</a></code> event is free to process the drag data in an application specific way. Typically, an application will use the <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/getData\"><code>getData()</code> <small>(en-US)</small></a> method to retrieve drag items and process them accordingly. Additionally, application semantics may differ depending on the value of the <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/dropEffect\"><code>dropEffect</code> <small>(en-US)</small></a> and/or the state of modifier keys.</p>\n<p>The following example shows a drop handler getting the source element's id from the drag data and then using the id to move the source element to the drop element.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">dragstart_handler</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ev</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n <span class=\"token comment\">// Add the target element's id to the data transfer object</span>\n ev<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span><span class=\"token function\">setData</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text/plain\"</span><span class=\"token punctuation\">,</span> ev<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n ev<span class=\"token punctuation\">.</span>dropEffect <span class=\"token operator\">=</span> <span class=\"token string\">\"move\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">dragover_handler</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ev</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n ev<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token comment\">// Set the dropEffect to move</span>\n ev<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span>dropEffect <span class=\"token operator\">=</span> <span class=\"token string\">\"move\"</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">drop_handler</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ev</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n ev<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token comment\">// Get the id of the target and add the moved element to the target's DOM</span>\n <span class=\"token keyword\">var</span> data <span class=\"token operator\">=</span> ev<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span><span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n ev<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">&lt;</span>body<span class=\"token operator\">&gt;</span>\n <span class=\"token operator\">&lt;</span>p id<span class=\"token operator\">=</span><span class=\"token string\">\"p1\"</span> draggable<span class=\"token operator\">=</span><span class=\"token string\">\"true\"</span> ondragstart<span class=\"token operator\">=</span><span class=\"token string\">\"dragstart_handler(event);\"</span><span class=\"token operator\">&gt;</span>This element is draggable<span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">&gt;</span>\n <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">\"target\"</span> ondrop<span class=\"token operator\">=</span><span class=\"token string\">\"drop_handler(event);\"</span> ondragover<span class=\"token operator\">=</span><span class=\"token string\">\"dragover_handler(event);\"</span><span class=\"token operator\">&gt;</span>Drop Zone<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>body<span class=\"token operator\">&gt;</span>\n</code></pre></div>\n<p>For more information, see <a href=\"/zh-TW/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations#drop\">Performing a Drop</a>.</p>","titleAsText":"Handle the drop effect"}},{"type":"prose","value":{"id":"drag_end","title":"Drag end","isH3":true,"content":"<p>At the end of a drag operation, the <code><a href=\"/en-US/docs/Web/API/HTMLElement/dragend_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragend (en-US)</a></code> event fires at the <em>source</em> element - the element that was the target of the drag start. This event fires whether the drag completed or was canceled. The <code><a href=\"/en-US/docs/Web/API/HTMLElement/dragend_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragend (en-US)</a></code> event handler can check the value of the <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/dropEffect\"><code>dropEffect</code> <small>(en-US)</small></a> property to determine if the drag operation succeeded or not.</p>\n<p>For more information about handling the end of a drag operation, see <a href=\"/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations#dragend\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">Finishing a Drag (en-US)</a>.</p>"}},{"type":"prose","value":{"id":"interoperability","title":"Interoperability","isH3":false,"content":"<p>As can be seen in the <a href=\"/en-US/docs/Web/API/DataTransferItem\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">DataTransferItem interface's Browser Compatibility table (en-US)</a>, drag-and-drop interoperability is relatively broad among desktop browsers (except the <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransferItem\"><code>DataTransferItem</code> <small>(en-US)</small></a> and <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransferItemList\"><code>DataTransferItemList</code> <small>(en-US)</small></a> interfaces have less support). This data also indicates drag and drop support among mobile browsers is very low.</p>"}},{"type":"prose","value":{"id":"examples_and_demos","title":"Examples and demos","isH3":false,"content":"<ul>\n  <li><a href=\"https://mdn.github.io/dom-examples/drag-and-drop/copy-move-DataTransfer.html\" class=\"external\" rel=\" noopener\">Copying and moving elements with the <code>DataTransfer</code> interface</a></li>\n  <li><a href=\"https://mdn.github.io/dom-examples/drag-and-drop/copy-move-DataTransferItemList.html\" class=\"external\" rel=\" noopener\">Copying and moving elements with the <code>DataTransferListItem</code> interface</a></li>\n  <li>Dragging and dropping files; Firefox only: <a href=\"http://jsfiddle.net/9C2EF/\" class=\"external\" rel=\" noopener\">http://jsfiddle.net/9C2EF/</a></li>\n  <li>Dragging and dropping files; All browsers: <a href=\"https://jsbin.com/hiqasek/edit?html,js,output\" class=\"external\" rel=\" noopener\">https://jsbin.com/hiqasek/</a></li>\n  <li>A parking project using the Drag and Drop API: <a href=\"https://park.glitch.me/\" class=\"external\" rel=\" noopener\">https://park.glitch.me/</a> (You can edit <a href=\"https://glitch.com/edit/#!/park\" class=\"external\" rel=\" noopener\">here</a>)</li>\n</ul>"}},{"type":"specifications","value":{"title":"規範","id":"規範","isH3":false,"specifications":[{"bcdSpecificationURL":"https://html.spec.whatwg.org/multipage/#dnd","title":"HTML Standard"}],"query":"undefined"}},{"type":"prose","value":{"id":"參見","title":"參見","isH3":false,"content":"<ul>\n  <li><a href=\"/zh-TW/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations\">Drag Operations</a></li>\n  <li><a href=\"/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Multiple_items\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">Dragging and Dropping Multiple Items (en-US)</a></li>\n  <li><a href=\"/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Recommended_drag_types\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">Recommended Drag Types (en-US)</a></li>\n  <li><a href=\"https://html.spec.whatwg.org/multipage/interaction.html#dnd\" class=\"external\" rel=\" noopener\">HTML5 Living Standard: Drag and Drop</a></li>\n  <li><a href=\"http://caniuse.com/#search=draganddrop\" class=\"external\" rel=\" noopener\">Drag and Drop interoperability data from CanIUse</a></li>\n</ul>"}}],"toc":[{"text":"拖曳事件","id":"拖曳事件"},{"text":"介面","id":"介面"},{"text":"基本用法","id":"基本用法"},{"text":"Interoperability","id":"interoperability"},{"text":"Examples and demos","id":"examples_and_demos"},{"text":"規範","id":"規範"},{"text":"參見","id":"參見"}],"summary":"HTML 拖放介面能讓網頁應用程式於 Firefox 及其他瀏覽器中使用拖放功能。舉例來說，使用者可以利用此功能以滑鼠選擇*可拖曳（draggable）元素，拖曳至一個可放置（droppable）元素上，並放開滑鼠按鍵來放置此元素。在拖曳操作時，一個半透明的可拖曳（draggable）*元素會跟隨著滑鼠游標。","popularity":0.0003,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"HTML Drag and Drop API","locale":"en-US","native":"English (US)"},{"title":"Arrastrar y soltar","locale":"es","native":"Español"},{"title":"Glisser et déposer","locale":"fr","native":"Français"},{"title":"HTML ドラッグ＆ドロップ API","locale":"ja","native":"日本語"},{"title":"HTML 드래그 앤 드롭 API","locale":"ko","native":"한국어"},{"title":"Arrastar e soltar","locale":"pt-BR","native":"Português (do Brasil)"},{"title":"HTML Drag and Drop API","locale":"ru","native":"Русский"},{"title":"HTML 拖放 API","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"zh-tw/web/api/html_drag_and_drop_api","github_url":"https://github.com/mdn/translated-content/blob/main/files/zh-tw/web/api/html_drag_and_drop_api/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/zh-TW/docs/Web","title":"給開發者的網頁技術文件"},{"uri":"/zh-TW/docs/Web/API","title":"Web APIs"},{"uri":"/zh-TW/docs/Web/API/HTML_Drag_and_Drop_API","title":"HTML 拖放 API"}],"pageTitle":"HTML 拖放 API - Web APIs | MDN","noIndexing":false}}