{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"Internationalization","mdn_url":"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/Internationalization","locale":"zh-TW","native":"正體中文 (繁體)","sidebarHTML":"\n  <ol>\n    <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions\"><strong>Browser extensions</strong></a></li>\n    <li class=\"toggle\">\n      <details>\n        <summary>Getting started</summary>\n        <ol>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/What_are_WebExtensions\">What are extensions?</a></li>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/Your_first_WebExtension\">Your first extension</a></li>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/Your_second_WebExtension\">Your second extension</a></li>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension\">Anatomy of an extension</a></li>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/Examples\">Example extensions</a></li>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/What_next_\">What next?</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary>Concepts</summary>\n        <ol>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/Using_the_JavaScript_APIs\">Using the JavaScript APIs</a></li>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/Content_scripts\">Content scripts</a></li>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/Match_patterns\">Match patterns</a></li>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/Working_with_files\">Working with files</a></li>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/Internationalization\">Internationalization</a></li>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/Content_Security_Policy\">Content Security Policy</a></li>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/Native_messaging\">Native messaging</a></li>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/Differences_between_API_implementations\">Differences between API implementations</a></li>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/Chrome_incompatibilities\">Chrome incompatibilities</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary>User interface</summary>\n        <ol>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/user_interface\">User Interface</a></li>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/user_interface/Browser_action\">Toolbar button</a></li>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/user_interface/Page_actions\">Address bar button</a></li>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/user_interface/Sidebars\">Sidebars</a></li>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/user_interface/Context_menu_items\">Context menu items</a></li>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/user_interface/Options_pages\">Options page</a></li>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/user_interface/Extension_pages\">Extension pages</a></li>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/user_interface/Notifications\">Notifications</a></li>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/user_interface/Omnibox\">Address bar suggestions</a></li>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/user_interface/devtools_panels\">Developer tools panels</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary>How to</summary>\n        <ol>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/Intercept_HTTP_requests\">Intercept HTTP requests</a></li>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/Modify_a_web_page\">Modify a web page</a></li>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/Safely_inserting_external_content_into_a_page\">Insert external content</a></li>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/Sharing_objects_with_page_scripts\">Share objects with page scripts</a></li>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/Add_a_button_to_the_toolbar\">Add a button to the toolbar</a></li>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/Implement_a_settings_page\">Implement a settings page</a></li>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API\">Work with the Tabs API</a></li>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Bookmarks_API\">Work with the Bookmarks API</a></li>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Cookies_API\">Work with the Cookies API</a></li>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/Work_with_contextual_identities\">Work with contextual identities</a></li>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/Interact_with_the_clipboard\">Interact with the clipboard</a></li>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/Build_a_cross_browser_extension\">Build a cross-browser extension</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/Firefox_differentiators\">Firefox differentiators</a></summary>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary>JavaScript APIs</summary>\n        <ol><li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/Browser_support_for_JavaScript_APIs\">Browser support for JavaScript APIs</a></li><li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/API/cookies\">cookies</a></li><li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/API/storage\">storage</a></li></ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n      <summary>Manifest keys</summary>\n        <ol>\n          <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/manifest.json\">Introduction</a></li>\n        </ol>\n      <ol><li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_specific_settings\">applications</a></li><li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/manifest.json/background\">background</a></li><li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/manifest.json/homepage_url\">homepage_url</a></li><li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/manifest.json/options_ui\">options_ui</a></li><li><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/manifest.json/author\">作者</a></li></ol>\n      </details>\n    </li>\n     <li class=\"toggle\">\n      <details>\n        <summary>Extension Workshop</summary>\n        <ol>\n          <li><a href=\"https://extensionworkshop.com/documentation/develop/\">Develop</a></li>\n          <li><a href=\"https://extensionworkshop.com/documentation/publish/\">Publish</a></li>\n          <li><a href=\"https://extensionworkshop.com/documentation/manage/\">Manage</a></li>\n          <li><a href=\"https://extensionworkshop.com/documentation/enterprise/\">Enterprise</a></li>\n        </ol>\n      </details>\n    </li>\n    <li><a href=\"/zh-TW/docs/Mozilla/Add-ons/Contact_us\"><strong>Contact us</strong></a></li>\n    <li class=\"toggle\">\n      <details>\n        <summary>Channels</summary>\n        <ol>\n          <li><a href=\"https://blog.mozilla.org/addons\">Add-ons blog</a></li>\n          <li><a href=\"https://discourse.mozilla.org/c/add-ons\">Add-ons forum</a></li>\n          <li><a href=\"https://chat.mozilla.org/#/room/%23addons:mozilla.org\">Add-ons chat</a></li>\n        </ol>\n      </details>\n    </li>\n  </ol>\n","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p><a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions\">WebExtension</a> API 有個相當方便、能用於國際化的模組：<a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/i18n\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">i18n (en-US)</a>。我們將在這篇文章內探索本功能，並提供實際做動的範例。專供 extensions 組建所使用的 i18n 系統 API，用法與坊間諸如 <a href=\"http://i18njs.com/\" class=\"external\" rel=\" noopener\">i18n.js</a> 的函式庫相似。</p>\n<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>備註：</strong> 本例所使用的套件：<a href=\"https://github.com/mdn/webextensions-examples/tree/master/notify-link-clicks-i18n\" class=\"external\" rel=\" noopener\">notify-link-clicks-i18n</a> 能在 GitHub 找到。看各章節時，請配著原始碼觀看。</p>\n</div>"}},{"type":"prose","value":{"id":"剖析國際化的套件","title":"剖析國際化的套件","isH3":false,"content":"<p>國際化套件能包含與其他套件相同的功能：<a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension#background_scripts\">background scripts</a>、<a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/Content_scripts\">content scripts</a>……等。但它也擁有一些能允許在語言間切換的部份。目錄樹大概是這樣：</p>\n<ul>\n  <li>extension-root-directory/\n    <ul>\n      <li>_locales\n        <ul>\n          <li>en\n            <ul>\n              <li>messages.json\n                <ul>\n                  <li>English messages (strings)</li>\n                </ul>\n              </li>\n            </ul>\n          </li>\n          <li>de\n            <ul>\n              <li>messages.json\n                <ul>\n                  <li>German messages (strings)</li>\n                </ul>\n              </li>\n            </ul>\n          </li>\n          <li>etc.</li>\n        </ul>\n      </li>\n      <li>manifest.json\n        <ul>\n          <li>locale-dependent metadata</li>\n        </ul>\n      </li>\n      <li>myJavascript.js\n        <ul>\n          <li>JavaScript for retrieving browser locale, locale-specific messages, etc.</li>\n        </ul>\n      </li>\n      <li>myStyles.css\n        <ul>\n          <li>locale-dependent CSS</li>\n        </ul>\n      </li>\n    </ul>\n  </li>\n</ul>\n<p>我們將逐一探索各大新特性：章節的每個部份，都是要國際化套件時，所需遵循的步驟。</p>"}},{"type":"prose","value":{"id":"在__locales_提供本地化的字串","title":"在 _locales 提供本地化的字串","isH3":false,"content":"<p>You can look up language subtags using the <em>Find</em> tool on the <a href=\"http://r12a.github.io/apps/subtags/\" class=\"external\" rel=\" noopener\">Language subtag lookup page</a>. Note that you need to search for the English name of the language.</p>\n<p>Every i18n system requires the provision of strings translated into all the different locales you want to support. In extensions, these are contained within a directory called <code>_locales</code>, placed inside the extension root. Each individual locale has its strings (referred to as messages) contained within a file called <code>messages.json</code>, which is placed inside a subdirectory of <code>_locales</code>, named using the language subtag for that locale's language.</p>\n<p>Note that if the subtag includes a basic language plus a regional variant, then the language and variant are conventionally separated using a hyphen: for example, \"en-US\". However, in the directories under <code>_locales</code>, <strong>the separator must be an underscore</strong>: \"en_US\".</p>\n<p>So <a href=\"https://github.com/mdn/webextensions-examples/tree/master/notify-link-clicks-i18n/_locales\" class=\"external\" rel=\" noopener\">for example, in our sample app</a> we have directories for \"en\" (English), \"de\" (German), \"nl\" (Dutch), and \"ja\" (Japanese). Each one of these has a <code>messages.json</code> file inside it.</p>\n<p>Let's now look at the structure of one of these files (<a href=\"https://github.com/mdn/webextensions-examples/blob/master/notify-link-clicks-i18n/_locales/en/messages.json\" class=\"external\" rel=\" noopener\">_locales/en/messages.json</a>):</p>\n<div class=\"code-example\"><pre class=\"brush: json notranslate\"><code><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"extensionName\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Notify link clicks i18n\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Name of the extension.\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token property\">\"extensionDescription\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Shows a notification when the user clicks on links.\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Description of the extension.\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token property\">\"notificationTitle\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Click notification\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Title of the click notification.\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token property\">\"notificationContent\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"You clicked $URL$.\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Tells the user which link they clicked.\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"placeholders\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"url\"</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"content\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"$1\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"example\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"https://developer.mozilla.org\"</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>This file is standard JSON — each one of its members is an object with a name, which contains a <code>message</code> and a <code>description</code>. All of these items are strings; <code>$URL$</code> is a placeholder, which is replaced with a substring at the time the <code>notificationContent</code> member is called by the extension. You'll learn how to do this in the <a href=\"#retrieving_message_strings_from_javascript\">Retrieving message strings from JavaScript</a> section.</p>\n<div class=\"notecard note\" id=\"sect2\">\n  <p><strong>備註：</strong> You can find much more information about the contents of <code>messages.json</code> files in our <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/i18n/Locale-Specific_Message_reference\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">Locale-Specific Message reference (en-US)</a>.</p>\n</div>"}},{"type":"prose","value":{"id":"internationalizing_manifest.json","title":"Internationalizing manifest.json","isH3":false,"content":"<p>There are a couple of different tasks to carry out to internationalize your manifest.json.</p>"}},{"type":"prose","value":{"id":"retrieving_localized_strings_in_manifests","title":"Retrieving localized strings in manifests","isH3":true,"content":"<p>Your <a href=\"https://github.com/mdn/webextensions-examples/blob/master/notify-link-clicks-i18n/manifest.json\" class=\"external\" rel=\" noopener\">manifest.json</a> includes strings that are displayed to the user, such as the extension's name and description. If you internationalize these strings and put the appropriate translations of them in messages.json, then the correct translation of the string will be displayed to the user, based on the current locale, like so.</p>\n<p>To internationalize strings, specify them like this:</p>\n<div class=\"code-example\"><pre class=\"brush: json notranslate\"><code><span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"__MSG_extensionName__\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"__MSG_extensionDescription__\"</span><span class=\"token punctuation\">,</span>\n</code></pre></div>\n<p>Here, we are retrieving message strings dependant on the browser's locale, rather than just including static strings.</p>\n<p>To call a message string like this, you need to specify it like this:</p>\n<ol>\n  <li>Two underscores, followed by</li>\n  <li>The string \"MSG\", followed by</li>\n  <li>One underscore, followed by</li>\n  <li>The name of the message you want to call as defined in <code>messages.json</code>, followed by</li>\n  <li>\n    Two underscores\n    _<em>MSG</em> + messageName + __\n  </li>\n</ol>"}},{"type":"prose","value":{"id":"specifying_a_default_locale","title":"Specifying a default locale","isH3":true,"content":"<p>Another field you should specify in your manifest.json is <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/default_locale\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">default_locale (en-US)</a>:</p>\n<div class=\"code-example\"><pre class=\"brush: json notranslate\"><code><span class=\"token property\">\"default_locale\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"en\"</span>\n</code></pre></div>\n<p>This specifies a default locale to use if the extension doesn't include a localized string for the browser's current locale. Any message strings that are not available in the browser locale are taken from the default locale instead. There are some more details to be aware of in terms of how the browser selects strings — see <a href=\"#localized_string_selection\">Localized string selection</a>.</p>"}},{"type":"prose","value":{"id":"locale-dependent_css","title":"Locale-dependent CSS","isH3":false,"content":"<p>Note that you can also retrieve localized strings from CSS files in the extension. For example, you might want to construct a locale-dependent CSS rule, like this:</p>\n<div class=\"code-example\"><pre class=\"brush: css notranslate\"><code><span class=\"token selector\">header</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background-image</span><span class=\"token punctuation\">:</span> <span class=\"token url\"><span class=\"token function\">url</span><span class=\"token punctuation\">(</span>../images/__MSG_extensionName__/header.png<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>This is useful, although you might be better off handling such a situation using <a href=\"#predefined_messages\">Predefined messages</a>.</p>"}},{"type":"prose","value":{"id":"retrieving_message_strings_from_javascript","title":"Retrieving message strings from JavaScript","isH3":false,"content":"<p>So, you've got your message strings set up, and your manifest. Now you just need to start calling your message strings from JavaScript so your extension can talk the right language as much as possible. The actual <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/i18n\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">i18n API (en-US)</a> is pretty simple, containing just four main methods:</p>\n<ul>\n  <li>You'll probably use <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/i18n/getMessage\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">i18n.getMessage() (en-US)</a> most often — this is the method you use to retrieve a specific language string, as mentioned above. We'll see specific usage examples of this below.</li>\n  <li>The <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/i18n/getAcceptLanguages\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">i18n.getAcceptLanguages() (en-US)</a> and <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/i18n/getUILanguage\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">i18n.getUILanguage() (en-US)</a> methods could be used if you needed to customize the UI depending on the locale — perhaps you might want to show preferences specific to the users' preferred languages higher up in a prefs list, or display cultural information relevant only to a certain language, or format displayed dates appropriately according to the browser locale.</li>\n  <li>The <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/i18n/detectLanguage\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">i18n.detectLanguage() (en-US)</a> method could be used to detect the language of user-submitted content, and format it appropriately.</li>\n</ul>\n<p>In our <a href=\"https://github.com/mdn/webextensions-examples/tree/master/notify-link-clicks-i18n\" class=\"external\" rel=\" noopener\">notify-link-clicks-i18n</a> example, the <a href=\"https://github.com/mdn/webextensions-examples/blob/master/notify-link-clicks-i18n/background-script.js\" class=\"external\" rel=\" noopener\">background script</a> contains the following lines:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> title <span class=\"token operator\">=</span> browser<span class=\"token punctuation\">.</span>i18n<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"notificationTitle\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> content <span class=\"token operator\">=</span> browser<span class=\"token punctuation\">.</span>i18n<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"notificationContent\"</span><span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>The first one just retrieves the <code>notificationTitle message</code> field from the available <code>messages.json</code> file most appropriate for the browser's current locale. The second one is similar, but it is being passed a URL as a second parameter. What gives? This is how you specify the content to replace the <code>$URL$</code> placeholder we see in the <code>notificationContent message</code> field:</p>\n<div class=\"code-example\"><pre class=\"brush: json notranslate\"><code><span class=\"token property\">\"notificationContent\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"You clicked $URL$.\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Tells the user which link they clicked.\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"placeholders\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"url\"</span> <span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"content\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"$1\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token property\">\"example\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"https://developer.mozilla.org\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>The <code>\"placeholders\"</code> member defines all the placeholders, and where they are retrieved from. The <code>\"url\"</code> placeholder specifies that its content is taken from $1, which is the first value given inside the second parameter of <code>getMessage()</code>. Since the placeholder is called <code>\"url\"</code>, we use <code>$URL$</code> to call it inside the actual message string (so for <code>\"name\"</code> you'd use <code>$NAME$</code>, etc.) If you have multiple placeholders, you can provide them inside an array that is given to <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/i18n/getMessage\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">i18n.getMessage() (en-US)</a> as the second parameter — <code>[a, b, c]</code>will be available as<code>$1</code>, <code>$2</code>, and <code>$3</code>, and so on, inside <code>messages.json</code>.</p>\n<p>Let's run through an example: the original <code>notificationContent</code> message string in the <code>en/messages.json</code> file is</p>\n<pre class=\"notranslate\">You clicked $URL$.\n</pre>\n<p>Let's say the link clicked on points to <code>https://developer.mozilla.org</code>. After the <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/i18n/getMessage\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">i18n.getMessage() (en-US)</a> call, the contents of the second parameter are made available in messages.json as <code>$1</code>, which replaces the <code>$URL$</code> placeholder as defined in the <code>\"url\"</code> placeholder. So the final message string is</p>\n<pre class=\"notranslate\">You clicked https://developer.mozilla.org.\n</pre>"}},{"type":"prose","value":{"id":"direct_placeholder_usage","title":"Direct placeholder usage","isH3":true,"content":"<p>It is possible to insert your variables (<code>$1</code>, <code>$2</code>, <code>$3</code>, etc.) directly into the message strings, for example we could rewrite the above <code>\"notificationContent\"</code> member like this:</p>\n<div class=\"code-example\"><pre class=\"brush: json notranslate\"><code><span class=\"token property\">\"notificationContent\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"You clicked $1.\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Tells the user which link they clicked.\"</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>This may seem quicker and less complex, but the other way (using <code>\"placeholders\"</code>) is seen as best practice. This is because having the placeholder name (e.g. <code>\"url\"</code>) and example helps you to remember what the placeholder is for — a week after you write your code, you'll probably forget what <code>$1</code>–<code>$8</code> refer to, but you'll be more likely to know what your placeholder names refer to.</p>"}},{"type":"prose","value":{"id":"hardcoded_substitution","title":"Hardcoded substitution","isH3":true,"content":"<p>It is also possible to include hardcoded strings in placeholders, so that the same value is used every time, instead of getting the value from a variable in your code. For example:</p>\n<div class=\"code-example\"><pre class=\"brush: json notranslate\"><code><span class=\"token property\">\"mdn_banner\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"For more information on web technologies, go to $MDN$.\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Tell the user about MDN\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"placeholders\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"mdn\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://developer.mozilla.org/\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>In this case we are just hardcoding the placeholder content, rather than getting it from a variable value like <code>$1</code>. This can sometimes be useful when your message file is very complex, and you want to split up different values to make the strings more readable in the file, plus then these values could be accessed programmatically.</p>\n<p>In addition, you can use such substitutions to specify parts of the string that you don't want to be translated, such as person or business names.</p>"}},{"type":"prose","value":{"id":"localized_string_selection","title":"Localized string selection","isH3":false,"content":"<p>Locales can be specified using only a language code, like <code>fr</code> or <code>en</code>, or they may be further qualified with a region code, like <code>en_US</code> or <code>en_GB</code>, which describes a regional variant of the same basic language. When you ask the i18n system for a string, it will select a string using the following algorithm:</p>\n<ol>\n  <li>if there is a <code>messages.json</code> file for the exact current locale, and it contains the string, return it.</li>\n  <li>Otherwise, if the current locale is qualified with a region (e.g. <code>en_US</code>) and there is a <code>messages.json</code> file for the regionless version of that locale (e.g. <code>en</code>), and that file contains the string, return it.</li>\n  <li>Otherwise, if there is a <code>messages.json</code> file for the <code>default_locale</code> defined in the <code>manifest.json</code>, and it contains the string, return it.</li>\n  <li>Otherwise return an empty string.</li>\n</ol>\n<p>Take the following example:</p>\n<ul>\n  <li>extension-root-directory/\n    <ul>\n      <li>_locales\n        <ul>\n          <li>en_GB\n            <ul>\n              <li>messages.json\n                <ul>\n                  <li><code>{ \"colorLocalised\": { \"message\": \"colour\", \"description\": \"Color.\" }, ... }</code></li>\n                </ul>\n              </li>\n            </ul>en\n            <ul>\n              <li>messages.json\n                <ul>\n                  <li><code>{ \"colorLocalised\": { \"message\": \"color\", \"description\": \"Color.\" }, ... }</code></li>\n                </ul>\n              </li>\n            </ul>\n          </li>\n          <li>fr\n            <ul>\n              <li>messages.json\n                <ul>\n                  <li><code>{ \"colorLocalised\": { \"message\": \"couleur\", \"description\": \"Color.\" }, ...}</code></li>\n                </ul>\n              </li>\n            </ul>\n          </li>\n        </ul>\n      </li>\n    </ul>\n  </li>\n</ul>\n<p>Suppose the <code>default_locale</code> is set to <code>fr</code>, and the browser's current locale is <code>en_GB</code>:</p>\n<ul>\n  <li>If the extension calls <code>getMessage(\"colorLocalised\")</code>, it will return \"colour\".</li>\n  <li>If \"colorLocalised\" were not present in <code>en_GB</code>, then <code>getMessage(\"colorLocalised\")</code>, would return \"color\", not \"couleur\".</li>\n</ul>"}},{"type":"prose","value":{"id":"predefined_messages","title":"Predefined messages","isH3":false,"content":"<p>The i18n module provides us with some predefined messages, which we can call in the same way as we saw earlier in <a href=\"#retrieving_localized_strings_in_manifests\">Calling message strings from manifests and extension CSS</a>. For example:</p>\n<pre class=\"notranslate\">__MSG_extensionName__\n</pre>\n<p>Predefined messages use exactly the same syntax, except with <code>@@</code> before the message name, for example</p>\n<pre class=\"notranslate\">__MSG_@@ui_locale__\n</pre>\n<p>The following table shows the different available predefined messages:</p>\n<table class=\"standard-table\">\n  <thead>\n    <tr>\n      <th scope=\"col\">Message name</th>\n      <th scope=\"col\">Description</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td><code>@@extension_id</code></td>\n      <td>\n        <p>\n          The extension's internally-generated UUID. You might use this string\n          to construct URLs for resources inside the extension. Even unlocalized\n          extensions can use this message.\n        </p>\n        <p>You can't use this message in a manifest file.</p>\n        <p>\n          Also note that this ID is <em>not</em> the add-on ID returned by\n          <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/runtime/id\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">runtime.id (en-US)</a>, and that can be set using\n          the\n          <a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_specific_settings\">applications</a>\n          key in manifest.json. It's the generated UUID that appears in the\n          add-on's URL. This means that you can't use this value as the\n          <code>extensionId</code> parameter to\n          <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/runtime/sendMessage\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">runtime.sendMessage() (en-US)</a>, and can't\n          use it to check against the <code>id</code> property of a\n          <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/runtime/MessageSender\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">runtime.MessageSender (en-US)</a> object.\n        </p>\n      </td>\n    </tr>\n    <tr>\n      <td><code>@@ui_locale</code></td>\n      <td>\n        The current locale; you might use this string to construct\n        locale-specific URLs.\n      </td>\n    </tr>\n    <tr>\n      <td><code>@@bidi_dir</code></td>\n      <td>\n        The text direction for the current locale, either \"ltr\" for\n        left-to-right languages such as English or \"rtl\" for right-to-left\n        languages such as Arabic.\n      </td>\n    </tr>\n    <tr>\n      <td><code>@@bidi_reversed_dir</code></td>\n      <td>\n        If the <code>@@bidi_dir</code> is \"ltr\", then this is \"rtl\"; otherwise,\n        it's \"ltr\".\n      </td>\n    </tr>\n    <tr>\n      <td><code>@@bidi_start_edge</code></td>\n      <td>\n        If the <code>@@bidi_dir</code> is \"ltr\", then this is \"left\"; otherwise,\n        it's \"right\".\n      </td>\n    </tr>\n    <tr>\n      <td><code>@@bidi_end_edge</code></td>\n      <td>\n        If the <code>@@bidi_dir</code> is \"ltr\", then this is \"right\";\n        otherwise, it's \"left\".\n      </td>\n    </tr>\n  </tbody>\n</table>\n<p>Going back to our earlier example, it would make more sense to write it like this:</p>\n<div class=\"code-example\"><pre class=\"brush: css notranslate\"><code><span class=\"token selector\">header</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background-image</span><span class=\"token punctuation\">:</span> <span class=\"token url\"><span class=\"token function\">url</span><span class=\"token punctuation\">(</span>../images/__MSG_@@ui_locale__/header.png<span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Now we can just store our local specific images in directories that match the different locales we are supporting — en, de, etc. — which makes a lot more sense.</p>\n<p>Let's look at an example of using <code>@@bidi_*</code> messages in a CSS file:</p>\n<div class=\"code-example\"><pre class=\"brush: css notranslate\"><code><span class=\"token selector\">body</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">direction</span><span class=\"token punctuation\">:</span> __MSG_@<span class=\"token atrule\"><span class=\"token rule\">@bidi_dir__</span><span class=\"token punctuation\">;</span></span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">div#header</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">margin-bottom</span><span class=\"token punctuation\">:</span> 1.05em<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">overflow</span><span class=\"token punctuation\">:</span> hidden<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">padding-bottom</span><span class=\"token punctuation\">:</span> 1.5em<span class=\"token punctuation\">;</span>\n  padding-__MSG_@<span class=\"token atrule\"><span class=\"token rule\">@bidi_start_edge__</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span></span>\n  padding-__MSG_@<span class=\"token atrule\"><span class=\"token rule\">@bidi_end_edge__</span><span class=\"token punctuation\">:</span> 1.5em<span class=\"token punctuation\">;</span></span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> relative<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>For left-to-right languages such as English, the CSS declarations involving the predefined messages above would translate to the following final code lines:</p>\n<div class=\"code-example\"><pre class=\"brush: css notranslate\"><code><span class=\"token property\">direction</span><span class=\"token punctuation\">:</span> ltr<span class=\"token punctuation\">;</span>\n<span class=\"token property\">padding-left</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n<span class=\"token property\">padding-right</span><span class=\"token punctuation\">:</span> 1.5em<span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>For a right-to-left language like Arabic, you'd get:</p>\n<div class=\"code-example\"><pre class=\"brush: css notranslate\"><code><span class=\"token property\">direction</span><span class=\"token punctuation\">:</span> rtl<span class=\"token punctuation\">;</span>\n<span class=\"token property\">padding-right</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n<span class=\"token property\">padding-left</span><span class=\"token punctuation\">:</span> 1.5em<span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"testing_out_your_extension","title":"Testing out your extension","isH3":false,"content":"<p>Starting in Firefox 45, you can install extensions temporarily from disk — see <a href=\"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/Packaging_and_installation#loading_from_disk\">Loading from disk</a>. Do this, and then try testing out our <a href=\"https://github.com/mdn/webextensions-examples/tree/master/notify-link-clicks-i18n\" class=\"external\" rel=\" noopener\">notify-link-clicks-i18n</a> extension. Go to one of your favourite websites and click a link to see if a notification appears reporting the URL of the clicked link.</p>\n<p>Next, change Firefox's locale to one supported in the extension that you want to test.</p>\n<ol>\n  <li>Open \"about:config\" in Firefox, and search for the <code>general.useragent.locale</code> preference.</li>\n  <li>Double click on the preference (or press Return/Enter) to select it, enter the language code for the locale you want to test, then click \"OK\" (or press Return/Enter). For example in our example extension, \"en\" (English), \"de\" (German), \"nl\" (Dutch), and \"ja\" (Japanese) are supported.</li>\n  <li>Search for <code>intl.locale.matchOS</code> and double click the preference so that it is set to <code>false</code>.</li>\n  <li>Restart your browser to complete the change.</li>\n</ol>\n<div class=\"notecard note\" id=\"sect3\">\n  <p><strong>備註：</strong> This works to change the browser's locale, even if you haven't got the <a href=\"https://addons.mozilla.org/en-US/firefox/language-tools/\" class=\"external\" rel=\" noopener\">language pack</a> installed for that language. You'll just get the browser UI in your default language if this is the case.</p>\n</div>\n<p>Load the extension temporarily from disk again, then test your new locale:</p>\n<ul>\n  <li>Visit \"about:addons\" again — you should now see the extension listed, with its icon, plus name and description in the chosen language.</li>\n  <li>Test your extension again. In our example, you'd go to another website and click a link, to see if the notification now appears in the chosen language.</li>\n</ul><iframe width=\"560\" height=\"315\" src=\"https://www.youtube-nocookie.com/embed/R7--fp5pPGg\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen=\"\" loading=\"lazy\"></iframe>"}}],"toc":[{"text":"剖析國際化的套件","id":"剖析國際化的套件"},{"text":"在 _locales 提供本地化的字串","id":"在__locales_提供本地化的字串"},{"text":"Internationalizing manifest.json","id":"internationalizing_manifest.json"},{"text":"Locale-dependent CSS","id":"locale-dependent_css"},{"text":"Retrieving message strings from JavaScript","id":"retrieving_message_strings_from_javascript"},{"text":"Localized string selection","id":"localized_string_selection"},{"text":"Predefined messages","id":"predefined_messages"},{"text":"Testing out your extension","id":"testing_out_your_extension"}],"summary":"WebExtension API 有個相當方便、能用於國際化的模組：i18n (en-US)。我們將在這篇文章內探索本功能，並提供實際做動的範例。專供 extensions 組建所使用的 i18n 系統 API，用法與坊間諸如 i18n.js 的函式庫相似。","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Internationalization","locale":"en-US","native":"English (US)"},{"title":"Internationalization","locale":"fr","native":"Français"},{"title":"国際化","locale":"ja","native":"日本語"},{"title":"Интернационализация","locale":"ru","native":"Русский"},{"title":"国际化","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"zh-tw/mozilla/add-ons/webextensions/internationalization","github_url":"https://github.com/mdn/translated-content/blob/main/files/zh-tw/mozilla/add-ons/webextensions/internationalization/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/zh-TW/docs/Mozilla","title":"Mozilla"},{"uri":"/zh-TW/docs/Mozilla/Add-ons","title":"附加元件"},{"uri":"/zh-TW/docs/Mozilla/Add-ons/WebExtensions","title":"瀏覽器擴充功能"},{"uri":"/zh-TW/docs/Mozilla/Add-ons/WebExtensions/Internationalization","title":"Internationalization"}],"pageTitle":"Internationalization - Mozilla | MDN","noIndexing":false}}