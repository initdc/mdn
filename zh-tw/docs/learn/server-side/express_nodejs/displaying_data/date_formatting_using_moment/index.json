{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"使用 moment 做日期格式化","mdn_url":"/zh-TW/docs/Learn/Server-side/Express_Nodejs/Displaying_data/Date_formatting_using_moment","locale":"zh-TW","native":"正體中文 (繁體)","sidebarHTML":"","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>我們模型的日期預設呈現很難看: <em>Tue Dec 06 2016 15:49:58 GMT+1100 (AUS Eastern Daylight Time)</em>。在本節中，我們將展示如何更新上一節中的 <em>書本實例 BookInstance 列表頁面</em>，以更友好的格式顯示<code>due_date</code>欄位字段：December 6th, 2016。</p>\n<p>我們將使用的方法，是在我們的<code>BookInstance</code>模型中，創建一個返回格式化日期的虛擬屬性。我們將使用 <a href=\"https://www.npmjs.com/package/moment\" class=\"external\" rel=\" noopener\">moment</a> 來做實際的格式化，這是一個輕量級 JavaScript 日期庫，用於解析，驗證，操作和格式化日期。</p>\n<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>備註：</strong> 我們可以直接在 Pug 模板中，使用 moment 格式化字符串，或者可以在許多其它地方格式化字符串。使用虛擬屬性，可以使我們獲得格式化的日期，這與我們當前獲取 <code>due_date</code> 的方式完全相同。</p>\n</div>"}},{"type":"prose","value":{"id":"安裝_moment","title":"安裝 moment","isH3":false,"content":"<p>在項目的根目錄，輸入下列命令</p>\n<div class=\"code-example\"><pre class=\"brush: bash notranslate\"><code><span class=\"token function\">npm</span> <span class=\"token function\">install</span> moment\n</code></pre></div>"}},{"type":"prose","value":{"id":"創建虛擬屬性","title":"創建虛擬屬性","isH3":false,"content":"<ol>\n  <li>打開 <strong>./models/bookinstance.js</strong>.</li>\n  <li>在此頁面最上方，引入 <em>moment</em>.\n    <div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> moment <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'moment'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n  </li>\n</ol>\n<p>在 url 屬性後面，加入虛擬屬性 <code>due_back_formatted</code> 。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>BookInstanceSchema\n<span class=\"token punctuation\">.</span><span class=\"token function\">virtual</span><span class=\"token punctuation\">(</span><span class=\"token string\">'due_back_formatted'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">moment</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>due_back<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">'MMMM Do, YYYY'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<div class=\"notecard note\" id=\"sect2\">\n  <p><strong>備註：</strong> 格式化方法可以使用幾乎任何模式顯示日期。<a href=\"http://momentjs.com/docs/#/displaying/\" class=\"external\" rel=\" noopener\">moment</a>文檔中，可以找到表示不同日期組件的語法。</p>\n</div>"}},{"type":"prose","value":{"id":"更新視圖","title":"更新視圖","isH3":false,"content":"<p>打開 <strong>/views/bookinstance_list.pug</strong> ，然後用 <code>due_back_formatted</code> 取代 <code>due_back</code> 。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>      <span class=\"token keyword\">if</span> val<span class=\"token punctuation\">.</span>status<span class=\"token operator\">!=</span><span class=\"token string\">'Available'</span>\n        <span class=\"token comment\">//span  (Due: #{val.due_back} )</span>\n        <span class=\"token function\">span</span>  <span class=\"token punctuation\">(</span>Due<span class=\"token operator\">:</span> #<span class=\"token punctuation\">{</span>val<span class=\"token punctuation\">.</span>due_back_formatted<span class=\"token punctuation\">}</span> <span class=\"token punctuation\">)</span>\n</code></pre></div>\n<p>這就是本章節的全部了。如果你訪問側邊欄的 <em>All book-instances</em> ，你應該會看到所有的歸還日期都更吸引人了！</p>"}},{"type":"prose","value":{"id":"下一步","title":"下一步","isH3":false,"content":"<ul>\n  <li>回到 <a href=\"/zh-TW/docs/Learn/Server-side/Express_Nodejs/Displaying_data\">Express 教學 5: 呈現圖書館資料</a></li>\n  <li>繼續教學 5 的下一個部分: <a href=\"/zh-TW/docs/Learn/Server-side/Express_Nodejs/Displaying_data/Author_list_page\">Author list page and Genre list page challenge</a>.</li>\n</ul>"}}],"toc":[{"text":"安裝 moment","id":"安裝_moment"},{"text":"創建虛擬屬性","id":"創建虛擬屬性"},{"text":"更新視圖","id":"更新視圖"},{"text":"下一步","id":"下一步"}],"summary":"我們模型的日期預設呈現很難看: Tue Dec 06 2016 15:49:58 GMT+1100 (AUS Eastern Daylight Time)。在本節中，我們將展示如何更新上一節中的 書本實例 BookInstance 列表頁面，以更友好的格式顯示due_date欄位字段：December 6th, 2016。","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Date formatting using luxon","locale":"en-US","native":"English (US)"},{"title":"moment を使用した日付のフォーマット","locale":"ja","native":"日本語"},{"title":"Форматирование даты при помощи moment","locale":"ru","native":"Русский"},{"title":"使用 moment 做日期格式化","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"zh-tw/learn/server-side/express_nodejs/displaying_data/date_formatting_using_moment","github_url":"https://github.com/mdn/translated-content/blob/main/files/zh-tw/learn/server-side/express_nodejs/displaying_data/date_formatting_using_moment/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/zh-TW/docs/Learn","title":"學習該如何開發 Web"},{"uri":"/zh-TW/docs/Learn/Server-side","title":"伺服端網站程式設計"},{"uri":"/zh-TW/docs/Learn/Server-side/Express_Nodejs","title":"Express web framework (Node.js/JavaScript)"},{"uri":"/zh-TW/docs/Learn/Server-side/Express_Nodejs/Displaying_data","title":"Express 教程 5: 呈現圖書館數據"},{"uri":"/zh-TW/docs/Learn/Server-side/Express_Nodejs/Displaying_data/Date_formatting_using_moment","title":"使用 moment 做日期格式化"}],"pageTitle":"使用 moment 做日期格式化 - 學習該如何開發 Web | MDN","noIndexing":false}}