{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"例","mdn_url":"/ja/docs/Web/SVG/Namespaces_Crash_Course/Example","locale":"ja","native":"日本語","sidebarHTML":"","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>この例で、私達は <a href=\"/ja/docs/Glossary/XHTML\">XHTML</a> 、 <a href=\"/ja/docs/Web/SVG\">SVG</a> 、 <a href=\"/ja/docs/Web/JavaScript\">JavaScript</a> と <a href=\"/ja/docs/Web/API/Document_Object_Model\">DOM</a> 2 を「ほこり」の群れを動かすのにつかっています。これらのほこりは 2 つの簡単な法則によって制御されています。1 つめは、それぞれのほこりがマウスカーソルの方向に向かって移動しようとします。2 つ目はそれぞれのほこりはほこりの位置の平均から遠ざかろうとします。組み合わせることで、このとても自然に見える動きができます。</p>\n<p>これは完全に Flash やその他のベンダ特有の拡張を用いずに、 W3C 標準- XHTML と SVG と JavaScript で実現されています。これは Firefox 1.5 以上で動作します。</p>\n<p><a href=\"http://developer.mozilla.org/samples/svg/swarm-of-motes.xhtml\" class=\"external\" rel=\" noopener\">実行例を表示</a></p>\n<div class=\"code-example\"><pre class=\"brush: xml notranslate\"><code><span class=\"token prolog\">&lt;?xml version='1.0'?&gt;</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/1999/xhtml<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>svg</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2000/svg<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">&gt;</span></span>ほこりの群<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>text/css<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token cdata\">&lt;![CDATA[\n    label, input\n    {\n      width: 150px;\n      display: block;\n      float: left;\n      margin-bottom: 10px;\n    }\n    label\n    {\n      text-align: right;\n      width: 75px;\n      padding-right: 20px;\n    }\n    br\n    {\n      clear: left;\n    }\n  ]]&gt;</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span> <span class=\"token attr-name\">onload</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>update()<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">svg:</span>svg</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>display<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>400<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>300<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">&gt;</span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">svg:</span>circle</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>cursor<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">cx</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>200<span class=\"token punctuation\">'</span></span>\n<span class=\"token attr-name\">cy</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>150<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">r</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>7<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">fill</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>#0000ff<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">fill-opacity</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>0.5<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">/&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">svg:</span>svg</span><span class=\"token punctuation\">&gt;</span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span>ほこりの群れは 2 つの簡単な法則によって制御されています。1 つめは、それぞれのほこりがカーソルの方向に向かって移動しようとします。2 つ目はそれぞれのほこりはほこりの位置の平均から遠ざかろうとします。組みあわせることで、このとても自然に見える動きができます。<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span>\n    これは完全に Flash やその他のベンダ特有の拡張を用いずに、 W3C 標準 – XHTML / SVG / JavaScript - によって実現されています。現在のところ、これは Mozilla Firefox 1.5 以上で動作するでしょう。<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    (C) 2006 <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>emailme<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>#<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">&gt;</span></span>Nick Johnson<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">&gt;</span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>text/javascript<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token cdata\">&lt;![CDATA[\n      // spam ボット撃退\n      var email = '@riovia.net';\n      email ='nick' + email;\n      document.getElementById('emailme').href = 'mailto:'+email;\n    ]]&gt;</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span>\n    This software is free for you to use in any way whatsoever,\n    and comes with no warranty at all.<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">action</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">onsubmit</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>return false;<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">&gt;</span></span>ほこりの数:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>num_motes<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>5<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">/&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">/&gt;</span></span>\n\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">&gt;</span></span>最大速度:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>max_velocity<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>15<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">/&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">/&gt;</span></span>\n\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">&gt;</span></span>カーソルへの引力:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>attract_cursor<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>6<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">/&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">/&gt;</span></span>\n\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">&gt;</span></span>仲間との反発力:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>repel_peer<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>5<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">/&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">/&gt;</span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">&gt;</span></span>\n\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>text/javascript<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token cdata\">&lt;![CDATA[\n\n    // ほこりの配列\n    var motes;\n\n    // 表示用の要素の取得。\n    function Display()\n    {\n      return document.getElementById('display');\n    }\n\n    // 表示用の要素の大きさを定義。\n    // これを配列の 2 組タプル(x,y)として返す\n    function Dimensions()\n    {\n      // 描画用の要素\n      var display = Display();\n      var width = parseInt( display.getAttributeNS(null,'width') );\n      var height = parseInt( display.getAttributeNS(null,'height') );\n\n      return [width,height];\n    }\n\n    // これはマウスの移動イベントで呼び出される\n    var mouse_x = 200, mouse_y = 150;\n    function OnMouseMove(evt)\n    {\n      mouse_x = evt.clientX;\n      mouse_y = evt.clientY;\n\n      var widget = document.getElementById('cursor');\n      widget.setAttributeNS(null,'cx',mouse_x);\n      widget.setAttributeNS(null,'cy',mouse_y);\n    }\n    document.onmousemove = OnMouseMove;\n\n    // カーソルの (x,y) を定義\n    function Cursor()\n    {\n      return [mouse_x, mouse_y];\n    }\n\n    // ほこりの平均 (x,y) を定義\n    function AverageMotePosition()\n    {\n      if( !motes )\n        return [0,0];\n\n      if( motes.length == 0 )\n        return [0,0];\n\n      var i;\n      var sum_x=0, sum_y=0;\n      for(i=0; i&lt;motes.length; i++)\n      {\n        sum_x += motes[i].x;\n        sum_y += motes[i].y;\n      }\n\n      return [sum_x/motes.length, sum_y/motes.length];\n    }\n\n    // よりよい、整数の乱数\n    function Rand(modulo)\n    {\n      return Math.round( Math.random() * (modulo-1));\n    }\n\n    // Mote クラス\n    function Mote()\n    {\n      // 描画領域の大きさ\n      var dims = Dimensions();\n      var width = dims[0], height = dims[1];\n\n      // 始めるときのランダムな座標を選ぶ。\n      this.x = Rand( width );\n      this.y = Rand( height );\n\n      // 速度の初期値はゼロ。\n      this.vx = this.vy = 0;\n\n      // 視覚的要素---初期状態ではなし\n      this.elt = null;\n    }\n\n    // これをクラスに。\n    new Mote();\n\n    // Mote::applyForce() -- 与えられた方向に\n    // 速度を調整。\n    // 警告: 疑似的な物理 -- なんらかの/実際の/物理法則によって\n    // 制御されているわけでありません\n    Mote.prototype.applyForce = function(pos, mag)\n    {\n      if( pos[0] &gt; this.x )\n        this.vx += mag;\n      else if( pos[0] &lt; this.x )\n        this.vx -= mag;\n\n      if( pos[1] &gt; this.y )\n        this.vy += mag;\n      else if( pos[1] &lt; this.y )\n        this.vy -= mag;\n    }\n\n    // Mote::capVelocity() -- ほこりの速度の\n    // 上限を設定。\n    Mote.prototype.capVelocity = function()\n    {\n      var max = parseInt( document.getElementById('max_velocity').value );\n\n      if( max &lt; this.vx )\n        this.vx = max;\n      else if( -max &gt; this.vx )\n        this.vx = -max;\n\n      if( max &lt; this.vy )\n        this.vy = max;\n      else if( -max &gt; this.vy )\n        this.vy = -max;\n    }\n\n    // Mote::capPosition() -- ほこりの位置の\n    // 上限下限を設定。\n    Mote.prototype.capPosition = function()\n    {\n      var dims = Dimensions();\n      if( this.x &lt; 0 )\n        this.x = 0;\n      else if( this.x &gt;= dims[0] )\n        this.x = dims[0]-1;\n\n      if( this.y &lt; 0 )\n        this.y = 0;\n      else if( this.y &gt;= dims[1] )\n        this.y = dims[1]-1;\n    }\n\n    // Mote::move() -- ほこりの移動、スクリーンの更新。\n    Mote.prototype.move = function()\n    {\n      // カーソルの引力を適応。\n      var attract = parseInt( document.getElementById('attract_cursor').value );\n      var cursor = Cursor();\n      this.applyForce(cursor, attract);\n\n      // ほこりの位置の平均からの反発を適用\n      var repel = parseInt( document.getElementById('repel_peer').value );\n      var average = AverageMotePosition();\n      this.applyForce(average, -repel);\n\n      // 速度にでたらめさを追加。\n      this.vx += Rand(3)-1;\n      this.vy += Rand(3)-1;\n\n      // 速度の上限を適応\n      this.capVelocity();\n\n      // 速度を適応。\n      var old_x = this.x, old_y = this.y;\n      this.x += this.vx;\n      this.y += this.vy;\n      this.capPosition();\n\n      // 描画。\n\n      if( this.elt === null )\n      {\n        var svg = 'http://www.w3.org/2000/svg';\n        this.elt = document.createElementNS(svg,'line');\n        this.elt.setAttributeNS(null,'stroke','green');\n        this.elt.setAttributeNS(null,'stroke-width','3');\n        this.elt.setAttributeNS(null,'stroke-opacity','0.5');\n        Display().appendChild( this.elt );\n      }\n\n      this.elt.setAttributeNS(null,'x1',old_x);\n      this.elt.setAttributeNS(null,'y1',old_y);\n\n      this.elt.setAttributeNS(null,'x2',this.x);\n      this.elt.setAttributeNS(null,'y2',this.y);\n    }\n\n\n    function update()\n    {\n      // 最初の呼び出し?\n      if( !motes )\n        motes = [];\n\n      // 幾つのほこりがあるべき ?\n      var num = parseInt( document.getElementById('num_motes').value );\n      if( num &lt; 0 )\n        num = 0;\n\n      // 量を厳密に確認。\n      // 少なすぎ ?\n      while( motes.length &lt; num )\n        motes.push( new Mote() );\n      // あるいは多すぎ ?\n      if( num == 0 )\n        motes = [];\n      else if( motes.length &gt; num )\n        motes = motes.slice(0,num-1);\n\n      // ほこりをランダムに移動\n      if( motes.length &gt; 0 )\n        motes[ Rand( motes.length ) ].move();\n\n      // これを 100 分の 1 秒ごとに再実行。\n      setTimeout('update()', 10);\n    }\n  ]]&gt;</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>"}}],"toc":[],"summary":"この例で、私達は XHTML 、 SVG 、 JavaScript と DOM 2 を「ほこり」の群れを動かすのにつかっています。これらのほこりは 2 つの簡単な法則によって制御されています。1 つめは、それぞれのほこりがマウスカーソルの方向に向かって移動しようとします。2 つ目はそれぞれのほこりはほこりの位置の平均から遠ざかろうとします。組み合わせることで、このとても自然に見える動きができます。","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Example","locale":"en-US","native":"English (US)"}],"source":{"folder":"ja/web/svg/namespaces_crash_course/example","github_url":"https://github.com/mdn/translated-content/blob/main/files/ja/web/svg/namespaces_crash_course/example/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/ja/docs/Web","title":"開発者向けのウェブ技術"},{"uri":"/ja/docs/Web/SVG","title":"SVG: スケーラブルベクターグラフィック"},{"uri":"/ja/docs/Web/SVG/Namespaces_Crash_Course","title":"名前空間の速修講座"},{"uri":"/ja/docs/Web/SVG/Namespaces_Crash_Course/Example","title":"例"}],"pageTitle":"例 - SVG: スケーラブルベクターグラフィック | MDN","noIndexing":false}}