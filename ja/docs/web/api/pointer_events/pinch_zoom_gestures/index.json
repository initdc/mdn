{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"ピンチズームのジェスチャー","mdn_url":"/ja/docs/Web/API/Pointer_events/Pinch_zoom_gestures","locale":"ja","native":"日本語","sidebarHTML":"<ol><li><strong><a href=\"/ja/docs/Web/API/Pointer_events\">Pointer events</a></strong></li><li class=\"toggle\"><details open=\"\"><summary>ガイド</summary><ol><li><a href=\"/ja/docs/Web/API/Pointer_events/Using_Pointer_Events\">Using Pointer Events</a></li><li><a href=\"/ja/docs/Web/API/Pointer_events/Multi-touch_interaction\">Multi-touch interaction</a></li><li><a href=\"/ja/docs/Web/API/Pointer_events/Pinch_zoom_gestures\">Pinch zoom gestures</a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>インターフェイス</summary><ol><li><a href=\"/ja/docs/Web/API/PointerEvent\"><code>PointerEvent</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>プロパティ</summary><ol><li><a href=\"/ja/docs/Web/API/Navigator/maxTouchPoints\"><code>Navigator.maxTouchPoints</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>メソッド</summary><ol><li><a href=\"/ja/docs/Web/API/Element/setPointerCapture\"><code>Element.setPointerCapture()</code></a></li><li><a href=\"/ja/docs/Web/API/Element/releasePointerCapture\"><code>Element.releasePointerCapture()</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>イベント</summary><ol><li><a href=\"/ja/docs/Web/API/HTMLElement/gotpointercapture_event\"><code>HTMLElement</code>: <code>gotpointercapture</code></a></li><li><a href=\"/ja/docs/Web/API/HTMLElement/lostpointercapture_event\"><code>HTMLElement</code>: <code>lostpointercapture</code></a></li><li><a href=\"/ja/docs/Web/API/HTMLElement/pointercancel_event\"><code>HTMLElement</code>: <code>pointercancel</code></a></li><li><a href=\"/ja/docs/Web/API/HTMLElement/pointerdown_event\"><code>HTMLElement</code>: <code>pointerdown</code></a></li><li><a href=\"/ja/docs/Web/API/HTMLElement/pointerenter_event\"><code>HTMLElement</code>: <code>pointerenter</code></a></li><li><a href=\"/ja/docs/Web/API/HTMLElement/pointerleave_event\"><code>HTMLElement</code>: <code>pointerleave</code></a></li><li><a href=\"/ja/docs/Web/API/HTMLElement/pointermove_event\"><code>HTMLElement</code>: <code>pointermove</code></a></li><li><a href=\"/ja/docs/Web/API/HTMLElement/pointerout_event\"><code>HTMLElement</code>: <code>pointerout</code></a></li><li><a href=\"/ja/docs/Web/API/HTMLElement/pointerover_event\"><code>HTMLElement</code>: <code>pointerover</code></a></li><li><a href=\"/ja/docs/Web/API/HTMLElement/pointerup_event\"><code>HTMLElement</code>: <code>pointerup</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>アプリに<em>ジェスチャー</em>を追加すると、使い勝手が大幅に向上します。単純なシングルタッチの<em>スワイプ</em>ジェスチャーから、タッチポイント（別名<em>ポインター</em>）が異なる方向に移動する、より複雑なマルチタッチの<em>ツイスト</em>ジェスチャーまで、さまざまな種類のジェスチャーがあります。</p>\n<p>この例では、<em>ピンチ/ズーム</em>ジェスチャーを検出する方法を示します。 これは、<a href=\"/ja/docs/Web/API/Pointer_events\" title=\"ポインターイベント\">ポインターイベント</a>を使用して、ユーザーが 2 つのポインターを互いに近づけるか遠ざけるかを検出します。</p>\n<p>このアプリの<em>ライブ</em>版は <a href=\"https://mdn.github.io/dom-examples/pointerevents/Pinch_zoom_gestures.html\" class=\"external\" rel=\" noopener\">GitHub</a> で利用できます。 <a href=\"https://github.com/mdn/dom-examples/blob/master/pointerevents/Pinch_zoom_gestures.html\" class=\"external\" rel=\" noopener\">ソースコードは GitHub で入手できます</a>。 プルリクエストや<a href=\"https://github.com/mdn/dom-examples/issues\" class=\"external\" rel=\" noopener\">バグレポート</a>は大歓迎です。</p>"}},{"type":"prose","value":{"id":"例","title":"例","isH3":false,"content":"<p>この例では、<a href=\"/ja/docs/Web/API/Pointer_events\" title=\"ポインターイベント\">ポインターイベント</a>を使用して、指、マウス、ペンなど、あらゆる種類の 2 つのポインティングデバイスを同時に検出します。 2 つのポインターを互いに近づけるピンチイン（ズームアウト、縮小）ジェスチャーでは、ターゲット要素の背景色が水色 (<code>lightblue</code>) に変わります。 2つのポインターを互いに遠ざけるピンチアウト（ズームイン、拡大）ジェスチャーでは、ターゲット要素の背景色がピンク (<code>pink</code>) に変わります。</p>"}},{"type":"prose","value":{"id":"タッチターゲットの定義","title":"タッチターゲットの定義","isH3":true,"content":"<p>アプリは <a href=\"/ja/docs/Web/HTML/Element/div\"><code>&lt;div&gt;</code></a> を使用してポインターのターゲット領域を定義します。</p>\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token style\"><span class=\"token language-css\">\n  <span class=\"token selector\">div</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> 0em<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 2em<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token selector\">#target</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> white<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 1px solid black<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"グローバルな状態","title":"グローバルな状態","isH3":true,"content":"<p>2 つのポインターのジェスチャーをサポートするには、さまざまなイベントフェーズでポインターのイベント状態を保存する必要があります。このアプリは、イベント状態をキャッシュするために 2 つのグローバル変数を使用します。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// イベント状態をキャッシュするグローバル変数</span>\n<span class=\"token keyword\">var</span> evCache <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> prevDiff <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"イベントハンドラーの登録","title":"イベントハンドラーの登録","isH3":true,"content":"<p>イベントハンドラーは <a href=\"/ja/docs/Web/API/Element/pointerdown_event\" title=\"pointerdown\"><code>pointerdown</code></a>, <a href=\"/ja/docs/Web/API/Element/pointermove_event\" title=\"pointermove\"><code>pointermove</code></a> and <a href=\"/ja/docs/Web/API/Element/pointerup_event\" title=\"pointerup\"><code>pointerup</code></a> のポインターイベントに登録します。 <a href=\"/ja/docs/Web/API/Element/pointerup_event\" title=\"pointerup\"><code>pointerup</code></a> ハンドラーは <a href=\"/ja/docs/Web/API/Element/pointercancel_event\" title=\"pointercancel\"><code>pointercancel</code></a>, <a href=\"/ja/docs/Web/API/Element/pointerout_event\" title=\"pointerout\"><code>pointerout</code></a>, <a href=\"/ja/docs/Web/API/Element/pointerleave_event\" title=\"pointerleave\"><code>pointerleave</code></a> のイベントにも使用します。 これら 4 つのイベントは、このアプリでは同じ意味を持っているからです。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n <span class=\"token comment\">// ポインターターゲット用のイベントハンドラーをインストールする</span>\n <span class=\"token keyword\">var</span> el<span class=\"token operator\">=</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"target\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n el<span class=\"token punctuation\">.</span>onpointerdown <span class=\"token operator\">=</span> pointerdown_handler<span class=\"token punctuation\">;</span>\n el<span class=\"token punctuation\">.</span>onpointermove <span class=\"token operator\">=</span> pointermove_handler<span class=\"token punctuation\">;</span>\n\n <span class=\"token comment\">// pointer{up,cancel,out,leave} イベントの意味は - このアプリでは -</span>\n <span class=\"token comment\">// 同じであるため、これらのイベントに同じハンドラーを使用する。</span>\n el<span class=\"token punctuation\">.</span>onpointerup <span class=\"token operator\">=</span> pointerup_handler<span class=\"token punctuation\">;</span>\n el<span class=\"token punctuation\">.</span>onpointercancel <span class=\"token operator\">=</span> pointerup_handler<span class=\"token punctuation\">;</span>\n el<span class=\"token punctuation\">.</span>onpointerout <span class=\"token operator\">=</span> pointerup_handler<span class=\"token punctuation\">;</span>\n el<span class=\"token punctuation\">.</span>onpointerleave <span class=\"token operator\">=</span> pointerup_handler<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"ポインターダウン","title":"ポインターダウン","isH3":true,"content":"<p><a href=\"/ja/docs/Web/API/Element/pointerdown_event\" title=\"pointerdown\"><code>pointerdown</code></a> イベントは、ポインター (マウス、ペン/スタイラス、タッチ画面上のタッチポイント) が<em>接触面</em>に接触したときに発生します。 このアプリでは、このダウンイベントが 2 つのポインターのピンチ/ズームジェスチャーの一部である場合に備えて、イベントの状態をキャッシュする必要があります。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">pointerdown_handler</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ev</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n <span class=\"token comment\">// pointerdown イベントは、タッチ操作の開始を知らせます。</span>\n <span class=\"token comment\">// このイベントは2本指ジェスチャーをサポートするためにキャッシュされます</span>\n evCache<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>ev<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"pointerDown\"</span><span class=\"token punctuation\">,</span> ev<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"ポインター移動","title":"ポインター移動","isH3":true,"content":"<p><a href=\"/ja/docs/Web/API/Element/pointermove_event\" title=\"pointermove\"><code>pointermove</code></a> イベントハンドラーは、ユーザーが2ポインターのピンチ/ズームジェスチャーを呼び出しているかどうかを検出します。 2つのポインターが下がっていてポインター間の距離が増加している場合（ピンチアウトまたはズームイン）、要素の背景色がピンク (<code>pink</code>) に変わり、ポインター間の距離が減少している場合（ピンチインまたはズームアウト） 背景色が水色 (<code>lightblue</code>) に変わります。 より洗練されたアプリでは、ピンチインまたはピンチアウトの決定を使用してアプリ固有の意味論を適用できます。</p>\n<p>このイベントが処理されると、ターゲットの境界線が破線 (<code>dashed</code>) に設定され、要素が移動イベントを受け取ったことを明確に視覚的に示します。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">pointermove_handler</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ev</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n <span class=\"token comment\">// この関数は、 2 つのポインターの水平ピンチ/ズームジェスチャーを実装しています。</span>\n <span class=\"token comment\">//</span>\n <span class=\"token comment\">// 2つのポインター間の距離が広がると（ズームイン）、</span>\n <span class=\"token comment\">// ターゲット要素の背景色は \"pink\" に変わり、</span>\n <span class=\"token comment\">// 縮まると（ズームアウト）、色は \"lightblue\" に変わります。</span>\n <span class=\"token comment\">//</span>\n <span class=\"token comment\">// この関数は、ポインターのターゲットが移動イベントを受け取ったことを</span>\n <span class=\"token comment\">// 視覚的に示すために、ターゲット要素の境界線を \"dashed\" に設定します。</span>\n <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"pointerMove\"</span><span class=\"token punctuation\">,</span> ev<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n ev<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>border <span class=\"token operator\">=</span> <span class=\"token string\">\"dashed\"</span><span class=\"token punctuation\">;</span>\n\n <span class=\"token comment\">// キャッシュ内でこのイベントを見つけ、このイベントの記録を更新します</span>\n <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> evCache<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ev<span class=\"token punctuation\">.</span>pointerId <span class=\"token operator\">==</span> evCache<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>pointerId<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      evCache<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> ev<span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n <span class=\"token punctuation\">}</span>\n\n <span class=\"token comment\">// ポインターが 2 つダウンしている場合は、ピンチジェスチャーを確認します</span>\n <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>evCache<span class=\"token punctuation\">.</span>length <span class=\"token operator\">==</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token comment\">// 2 つのポインター間の距離を計算</span>\n   <span class=\"token keyword\">var</span> curDiff <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">abs</span><span class=\"token punctuation\">(</span>evCache<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>clientX <span class=\"token operator\">-</span> evCache<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>clientX<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n   <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>prevDiff <span class=\"token operator\">&gt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>curDiff <span class=\"token operator\">&gt;</span> prevDiff<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token comment\">// 2 つのポインター間の距離が増えた</span>\n       <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Pinch moving OUT -&gt; Zoom in\"</span><span class=\"token punctuation\">,</span> ev<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       ev<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>background <span class=\"token operator\">=</span> <span class=\"token string\">\"pink\"</span><span class=\"token punctuation\">;</span>\n     <span class=\"token punctuation\">}</span>\n     <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>curDiff <span class=\"token operator\">&lt;</span> prevDiff<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token comment\">// 2 つのポインター間の距離が減った</span>\n       <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Pinch moving IN -&amp;gt; Zoom out\"</span><span class=\"token punctuation\">,</span>ev<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       ev<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>background <span class=\"token operator\">=</span> <span class=\"token string\">\"lightblue\"</span><span class=\"token punctuation\">;</span>\n     <span class=\"token punctuation\">}</span>\n   <span class=\"token punctuation\">}</span>\n\n   <span class=\"token comment\">// 次の移動イベントのために距離をキャッシュします</span>\n   prevDiff <span class=\"token operator\">=</span> curDiff<span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"ポインターアップ","title":"ポインターアップ","isH3":true,"content":"<p><a href=\"/ja/docs/Web/API/Element/pointerup_event\" title=\"pointerup\"><code>pointerup</code></a> イベントは、ポインターが<em>接触面</em>から上がると発生します。 これが発生すると、イベントはイベントキャッシュから削除され、ターゲット要素の背景色と境界線は元の値に戻ります。</p>\n<p>このアプリでは、このハンドラーは <a href=\"/ja/docs/Web/API/Element/pointercancel_event\" title=\"pointercancel\"><code>pointercancel</code></a>, <a href=\"/ja/docs/Web/API/Element/pointerleave_event\" title=\"pointerleave\"><code>pointerleave</code></a>, <a href=\"/ja/docs/Web/API/Element/pointerout_event\" title=\"pointerout\"><code>pointerout</code></a> のイベントにも使用します。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">pointerup_handler</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ev</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">log</span><span class=\"token punctuation\">(</span>ev<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">,</span> ev<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// このポインターをキャッシュから削除し、</span>\n  <span class=\"token comment\">// ターゲットの背景色と境界線をリセットします</span>\n  <span class=\"token function\">remove_event</span><span class=\"token punctuation\">(</span>ev<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  ev<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>background <span class=\"token operator\">=</span> <span class=\"token string\">\"white\"</span><span class=\"token punctuation\">;</span>\n  ev<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>border <span class=\"token operator\">=</span> <span class=\"token string\">\"1px solid black\"</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// ポインター数が2未満の場合は、以前の距離をリセットします</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>evCache<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&lt;</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    prevDiff <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"アプリの_ui","title":"アプリの UI","isH3":true,"content":"<p>アプリは、タッチ領域に <a href=\"/ja/docs/Web/HTML/Element/div\"><code>&lt;div&gt;</code></a> 要素を使用し、ログ記録を有効にするボタンとログを消去するためのボタンを提供します。</p>\n<p>ブラウザーの既定のタッチ動作が、このアプリのポインター処理をオーバーライドしないようにするために、 <a href=\"/ja/docs/Web/CSS/touch-action\"><code>touch-action</code></a> プロパティを <a href=\"/ja/docs/Web/HTML/Element/body\"><code>&lt;body&gt;</code></a> 要素に適用しています。</p>\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span> <span class=\"token special-attr\"><span class=\"token attr-name\">onload</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value javascript language-javascript\"><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span> <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value css language-css\"><span class=\"token property\">touch-action</span><span class=\"token punctuation\">:</span>none</span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">&gt;</span></span>\n <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>target<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>2 つの点に触れたままにして、ピンチインまたはピンチアウトしてください。<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">/&gt;</span></span>\n    ピンチが開いている場合（ズームイン）は背景色がピンクに変わり、\n    ピンチが閉じている場合（ズームアウト）は背景色が水色に変わります。<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n <span class=\"token comment\">&lt;!-- UI for logging/debugging --&gt;</span>\n <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>log<span class=\"token punctuation\">\"</span></span> <span class=\"token special-attr\"><span class=\"token attr-name\">onclick</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value javascript language-javascript\"><span class=\"token function\">enableLog</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">&gt;</span></span>Start/Stop event logging<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>clearlog<span class=\"token punctuation\">\"</span></span> <span class=\"token special-attr\"><span class=\"token attr-name\">onclick</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value javascript language-javascript\"><span class=\"token function\">clearLog</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">&gt;</span></span>Clear the log<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span>\n <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>output</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>output</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"その他の関数","title":"その他の関数","isH3":true,"content":"<p>これらの関数はアプリをサポートしますが、イベントの流れに直接は関係しません。</p>\n<h4 id=\"キャッシュ管理\">キャッシュ管理</h4>\n<p>この関数はグローバルイベントキャッシュの <code>evCache</code> の管理に役立ちます。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">remove_event</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ev</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n <span class=\"token comment\">// このイベントをターゲットのキャッシュから削除する</span>\n <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> evCache<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>evCache<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>pointerId <span class=\"token operator\">==</span> ev<span class=\"token punctuation\">.</span>pointerId<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n     evCache<span class=\"token punctuation\">.</span><span class=\"token function\">splice</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n     <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<h4 id=\"イベントログ\">イベントログ</h4>\n<p>これらの関数は、イベント活動をアプリのウィンドウに送信するために使用します（デバッグとイベントの流れに関する学習をサポートするため）。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// イベントをログ出力するフラグ</span>\n<span class=\"token keyword\">var</span> logEvents <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ログ/デバッグ関数</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">enableLog</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ev</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  logEvents <span class=\"token operator\">=</span> logEvents <span class=\"token operator\">?</span> <span class=\"token boolean\">false</span> <span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prefix<span class=\"token punctuation\">,</span> ev</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>logEvents<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> o <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByTagName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'output'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> s <span class=\"token operator\">=</span> prefix <span class=\"token operator\">+</span> <span class=\"token string\">\": pointerID = \"</span> <span class=\"token operator\">+</span> ev<span class=\"token punctuation\">.</span>pointerId <span class=\"token operator\">+</span>\n                <span class=\"token string\">\" ; pointerType = \"</span> <span class=\"token operator\">+</span> ev<span class=\"token punctuation\">.</span>pointerType <span class=\"token operator\">+</span>\n                <span class=\"token string\">\" ; isPrimary = \"</span> <span class=\"token operator\">+</span> ev<span class=\"token punctuation\">.</span>isPrimary<span class=\"token punctuation\">;</span>\n  o<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">+=</span> s <span class=\"token operator\">+</span> \"\n\"<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">clearLog</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n <span class=\"token keyword\">var</span> o <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByTagName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'output'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n o<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"関連情報","title":"関連情報","isH3":false,"content":"<ul>\n  <li><a href=\"https://hacks.mozilla.org/2015/08/pointer-events-now-in-firefox-nightly/\" class=\"external\" rel=\" noopener\">Firefox Nightly にポインターイベントが追加されました</a>。 Mozilla Hacks より、Matt Brubeck とJason Weathersby 著、 2015 年 8 月 4 日（英語）</li>\n  <li><a href=\"https://github.com/jquery-archive/PEP\" class=\"external\" rel=\" noopener\">jQuery によるポインターイベントのポリフィル</a>（英語）</li>\n  <li><a href=\"https://material.io/design/interaction/gestures.html\" class=\"external\" rel=\" noopener\">ジェスチャー</a> マテリアルデザイン（英語）</li>\n</ul>"}}],"toc":[{"text":"例","id":"例"},{"text":"関連情報","id":"関連情報"}],"summary":"アプリにジェスチャーを追加すると、使い勝手が大幅に向上します。単純なシングルタッチのスワイプジェスチャーから、タッチポイント（別名ポインター）が異なる方向に移動する、より複雑なマルチタッチのツイストジェスチャーまで、さまざまな種類のジェスチャーがあります。","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Pinch zoom gestures","locale":"en-US","native":"English (US)"},{"title":"Gestes pincer et zoomer","locale":"fr","native":"Français"}],"source":{"folder":"ja/web/api/pointer_events/pinch_zoom_gestures","github_url":"https://github.com/mdn/translated-content/blob/main/files/ja/web/api/pointer_events/pinch_zoom_gestures/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/ja/docs/Web","title":"開発者向けのウェブ技術"},{"uri":"/ja/docs/Web/API","title":"Web API"},{"uri":"/ja/docs/Web/API/Pointer_events","title":"ポインターイベント"},{"uri":"/ja/docs/Web/API/Pointer_events/Pinch_zoom_gestures","title":"ピンチズームのジェスチャー"}],"pageTitle":"ピンチズームのジェスチャー - Web API | MDN","noIndexing":false}}