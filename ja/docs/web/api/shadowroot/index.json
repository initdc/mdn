{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"ShadowRoot","mdn_url":"/ja/docs/Web/API/ShadowRoot","locale":"ja","native":"日本語","sidebarHTML":"<ol><li><strong><a href=\"/ja/docs/Web/API/ShadowRoot\"><code>ShadowRoot</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>プロパティ</summary><ol><li><a href=\"/ja/docs/Web/API/ShadowRoot/activeElement\"><code>activeElement</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/ShadowRoot/adoptedStyleSheets\"><code>adoptedStyleSheets</code> <small>(en-US)</small></a></li><li><a href=\"/ja/docs/Web/API/ShadowRoot/delegatesFocus\"><code>delegatesFocus</code></a></li><li><a href=\"/ja/docs/Web/API/ShadowRoot/fullscreenElement\"><code>fullscreenElement</code></a></li><li><a href=\"/ja/docs/Web/API/ShadowRoot/host\"><code>host</code></a></li><li><a href=\"/ja/docs/Web/API/ShadowRoot/innerHTML\"><code>innerHTML</code></a></li><li><a href=\"/ja/docs/Web/API/ShadowRoot/mode\"><code>mode</code></a></li><li><a href=\"/ja/docs/Web/API/ShadowRoot/pictureInPictureElement\"><code>pictureInPictureElement</code></a></li><li><a href=\"/ja/docs/Web/API/ShadowRoot/pointerLockElement\"><code>pointerLockElement</code></a></li><li><a href=\"/ja/docs/Web/API/ShadowRoot/styleSheets\"><code>styleSheets</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>メソッド</summary><ol><li><a href=\"/ja/docs/Web/API/ShadowRoot/getAnimations\"><code>getAnimations()</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>継承</summary><ol><li><a href=\"/ja/docs/Web/API/DocumentFragment\"><code>DocumentFragment</code></a></li><li><a href=\"/ja/docs/Web/API/Node\"><code>Node</code></a></li><li><a href=\"/ja/docs/Web/API/EventTarget\"><code>EventTarget</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p><strong><code>ShadowRoot</code></strong> は Shadow DOM API のインターフェイスで、文書の DOM ツリーから分離してレンダリングされた部分ツリーのルートノードを指します。</p>\n<p>要素のシャドウルートへの参照は <a href=\"/ja/docs/Web/API/Element/shadowRoot\"><code>Element.shadowRoot</code></a> プロパティで受け取ることができます。これは <a href=\"/ja/docs/Web/API/Element/attachShadow\"><code>Element.attachShadow()</code></a> で <code>mode</code> オプションが <code>open</code> に設定されて作成されたときに提供されます。</p>"}},{"type":"prose","value":{"id":"プロパティ","title":"プロパティ","isH3":false,"content":"<dl>\n  <dt id=\"shadowroot.activeelement\"><a href=\"/ja/docs/Web/API/ShadowRoot/activeElement\"><code>ShadowRoot.activeElement</code></a> <span title=\"This value may not be changed.\" class=\"badge inline readonly\">読取専用 </span></dt>\n  <dd>\n    <p>フォーカスを持っているシャドウツリー内の <a href=\"/ja/docs/Web/API/Element\"><code>Element</code></a> を返します。</p>\n  </dd>\n  <dt id=\"shadowroot.delegatesfocus\"><a href=\"/ja/docs/Web/API/ShadowRoot/delegatesFocus\"><code>ShadowRoot.delegatesFocus</code></a> <span title=\"This value may not be changed.\" class=\"badge inline readonly\">読取専用 </span> <svg class=\"icon icon-nonstandard\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-nonstandard\"></use>\n</svg> <svg class=\"icon icon-deprecated\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-deprecated\"></use>\n</svg></dt>\n  <dd>\n    <p>シャドウが取り付けられたときに <code>delegatesFocus</code> が設定されていたかどうかを示す論理値を返します (<a href=\"/ja/docs/Web/API/Element/attachShadow\"><code>Element.attachShadow()</code></a> を参照)。</p>\n  </dd>\n  <dt id=\"shadowroot.fullscreenelement\"><a href=\"/ja/docs/Web/API/ShadowRoot/fullscreenElement\"><code>ShadowRoot.fullscreenElement</code></a> <span title=\"This value may not be changed.\" class=\"badge inline readonly\">読取専用 </span></dt>\n  <dd>\n    <p>このシャドウツリーで現在全画面モードになっている要素です。</p>\n  </dd>\n  <dt id=\"shadowroot.host\"><a href=\"/ja/docs/Web/API/ShadowRoot/host\"><code>ShadowRoot.host</code></a> <span title=\"This value may not be changed.\" class=\"badge inline readonly\">読取専用 </span></dt>\n  <dd>\n    <p><code>ShadowRoot</code> が取り付けられた DOM 要素への参照を返します。</p>\n  </dd>\n  <dt id=\"shadowroot.innerhtml\"><a href=\"/ja/docs/Web/API/ShadowRoot/innerHTML\"><code>ShadowRoot.innerHTML</code></a> <svg class=\"icon icon-nonstandard\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-nonstandard\"></use>\n</svg></dt>\n  <dd>\n    <p><code>ShadowRoot</code> の内部の DOM ツリーへの参照を設定したり返却したりします。</p>\n  </dd>\n  <dt id=\"shadowroot.mode\"><a href=\"/ja/docs/Web/API/ShadowRoot/mode\"><code>ShadowRoot.mode</code></a> <span title=\"This value may not be changed.\" class=\"badge inline readonly\">読取専用 </span></dt>\n  <dd>\n    <p><code>ShadowRoot</code> のモードで <code>open</code> または <code>closed</code> の値を取ります。これはシャドウルートの内部の機能に JavaScript からアクセスできるかどうかを定義します。</p>\n  </dd>\n  <dt id=\"shadowroot.pictureinpictureelement\"><a href=\"/ja/docs/Web/API/ShadowRoot/pictureInPictureElement\"><code>ShadowRoot.pictureInPictureElement</code></a> <span title=\"This value may not be changed.\" class=\"badge inline readonly\">読取専用 </span></dt>\n  <dd>\n    <p>シャドウツリー内で現在ピクチャインピクチャモードで表示されている <a href=\"/ja/docs/Web/API/Element\"><code>Element</code></a> を返します。</p>\n  </dd>\n  <dt id=\"shadowroot.pointerlockelement\"><a href=\"/ja/docs/Web/API/ShadowRoot/pointerLockElement\"><code>ShadowRoot.pointerLockElement</code></a> <span title=\"This value may not be changed.\" class=\"badge inline readonly\">読取専用 </span></dt>\n  <dd>\n    <p>\n      ポインターがロックされている間、マウスイベントのターゲットとして設定されている <a href=\"/ja/docs/Web/API/Element\"><code>Element</code></a> を返します。\n      ロックが保留中か、ポインターがロックされていないか、ターゲットがほかのツリーにある場合は <code>null</code> を返します。\n    </p>\n  </dd>\n  <dt id=\"shadowroot.stylesheets\"><a href=\"/ja/docs/Web/API/ShadowRoot/styleSheets\"><code>ShadowRoot.styleSheets</code></a> <span title=\"This value may not be changed.\" class=\"badge inline readonly\">読取専用 </span></dt>\n  <dd>\n    <p>シャドウツリーに明示的にリンクされている、または埋め込まれている <a href=\"/ja/docs/Web/API/CSSStyleSheet\"><code>CSSStyleSheet</code></a> オブジェクトの <a href=\"/ja/docs/Web/API/StyleSheetList\"><code>StyleSheetList</code></a> を返します。</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"イベントハンドラー","title":"イベントハンドラー","isH3":true,"content":"<dl>\n  <dt id=\"shadowroot.onslotchange\"><a href=\"/ja/docs/conflicting/Web/API/HTMLSlotElement/slotchange_event\"><code>ShadowRoot.onslotchange</code></a></dt>\n  <dd>\n    <p><a href=\"/en-US/docs/Web/Events/Event_handlers\">イベントハンドラー</a>で、 <a href=\"/ja/docs/Web/API/HTMLSlotElement/slotchange_event\" title=\"slotchange\"><code>slotchange</code></a> イベントが発行されたときに呼び出されるコードを表します。</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"メソッド","title":"メソッド","isH3":false,"content":"<dl>\n  <dt id=\"shadowroot.getanimations\"><a href=\"/ja/docs/Web/API/ShadowRoot/getAnimations\"><code>ShadowRoot.getAnimations()</code></a></dt>\n  <dd>\n    <p>現在有効なすべての <a href=\"/ja/docs/Web/API/Animation\"><code>Animation</code></a> オブジェクトのうち、ターゲット要素がシャドウツリーの子孫であるものの配列を返します。</p>\n  </dd>\n  <dt id=\"shadowroot.getselection\"><a class=\"page-not-created\" title=\"この項目についての文書はまだ書かれていません。書いてみませんか？\"><code>ShadowRoot.getSelection()</code></a></dt>\n  <dd>\n    <p>ユーザーによって選択されたテキストの範囲または現在のキャレットの位置を表現する <a href=\"/ja/docs/Web/API/Selection\"><code>Selection</code></a> オブジェクトを返します。</p>\n  </dd>\n  <dt id=\"shadowroot.elementfrompoint\"><a class=\"page-not-created\" title=\"この項目についての文書はまだ書かれていません。書いてみませんか？\"><code>ShadowRoot.elementFromPoint()</code></a></dt>\n  <dd>\n    <p>指定された座標における最上位の要素を返します。</p>\n  </dd>\n  <dt id=\"shadowroot.elementsfrompoint\"><a class=\"page-not-created\" title=\"この項目についての文書はまだ書かれていません。書いてみませんか？\"><code>ShadowRoot.elementsFromPoint()</code></a></dt>\n  <dd>\n    <p>指定された座標における全要素からなる配列を返します。</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"例","title":"例","isH3":false,"content":"<p>以下のコードは、サイズと色の属性が指定された四角形の要素を作る <a href=\"https://github.com/mdn/web-components-examples/tree/master/life-cycle-callbacks\" class=\"external\" rel=\" noopener\">life-cycle-callbacks</a> の例です。 (<a href=\"https://mdn.github.io/web-components-examples/life-cycle-callbacks\" class=\"external\" rel=\" noopener\">ライブでも確認</a>)</p>\n<p><code>&lt;custom-square&gt;</code> 要素のクラス定義の中に、外部関数である <code>updateStyle()</code> を呼び出すライフサイクルコールバックが含まれています。<code>updateStyle()</code> は要素のサイズと色を適用します。<code>this</code> (カスタム要素自身) を引数として関数に渡していることが分かるでしょう。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token function\">connectedCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'四角形のカスタム要素がページに追加されました。'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">updateStyle</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">attributeChangedCallback</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">name<span class=\"token punctuation\">,</span> oldValue<span class=\"token punctuation\">,</span> newValue</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'四角形のカスタム要素の属性が変更されました。'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">updateStyle</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p><code>updateStyle()</code> 関数の中では、<a href=\"/ja/docs/Web/API/Element/shadowRoot\"><code>Element.shadowRoot</code></a> を利用してシャドウ DOM への参照を取得しています。シャドウ DOM 内では、標準的な DOM の探索手法を用いて <a href=\"/ja/docs/Web/HTML/Element/style\"><code>&lt;style&gt;</code></a> を探し、CSS を更新しています。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">updateStyle</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">elem</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> shadow <span class=\"token operator\">=</span> elem<span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> childNodes <span class=\"token operator\">=</span> shadow<span class=\"token punctuation\">.</span>childNodes<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> childNodes<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>childNodes<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>nodeName <span class=\"token operator\">===</span> <span class=\"token string\">'STYLE'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      childNodes<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span>\n        <span class=\"token string\">'div {'</span> <span class=\"token operator\">+</span>\n          <span class=\"token string\">'width: '</span> <span class=\"token operator\">+</span> elem<span class=\"token punctuation\">.</span><span class=\"token function\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'l'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">'px;'</span> <span class=\"token operator\">+</span>\n          <span class=\"token string\">'height: '</span> <span class=\"token operator\">+</span> elem<span class=\"token punctuation\">.</span><span class=\"token function\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'l'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">'px;'</span> <span class=\"token operator\">+</span>\n          <span class=\"token string\">'background-color: '</span> <span class=\"token operator\">+</span> elem<span class=\"token punctuation\">.</span><span class=\"token function\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'c'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">';'</span> <span class=\"token operator\">+</span>\n        <span class=\"token string\">'}'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"specifications","value":{"title":"仕様書","id":"仕様書","isH3":false,"specifications":[{"bcdSpecificationURL":"https://dom.spec.whatwg.org/#interface-shadowroot","title":"DOM Standard"}],"query":"api.ShadowRoot"}},{"type":"browser_compatibility","value":{"title":"ブラウザーの互換性","id":"ブラウザーの互換性","isH3":false,"query":"api.ShadowRoot","dataURL":"/ja/docs/Web/API/ShadowRoot/bcd.json"}}],"toc":[{"text":"プロパティ","id":"プロパティ"},{"text":"メソッド","id":"メソッド"},{"text":"例","id":"例"},{"text":"仕様書","id":"仕様書"},{"text":"ブラウザーの互換性","id":"ブラウザーの互換性"}],"summary":"ShadowRoot は Shadow DOM API のインターフェイスで、文書の DOM ツリーから分離してレンダリングされた部分ツリーのルートノードを指します。","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"ShadowRoot","locale":"en-US","native":"English (US)"},{"title":"ShadowRoot","locale":"fr","native":"Français"},{"title":"ShadowRoot","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"ja/web/api/shadowroot","github_url":"https://github.com/mdn/translated-content/blob/main/files/ja/web/api/shadowroot/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/ja/docs/Web","title":"開発者向けのウェブ技術"},{"uri":"/ja/docs/Web/API","title":"Web API"},{"uri":"/ja/docs/Web/API/ShadowRoot","title":"ShadowRoot"}],"pageTitle":"ShadowRoot - Web API | MDN","noIndexing":false}}