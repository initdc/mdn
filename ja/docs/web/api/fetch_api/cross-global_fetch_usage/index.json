{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"グローバル間フェッチの使用","mdn_url":"/ja/docs/Web/API/Fetch_API/Cross-global_fetch_usage","locale":"ja","native":"日本語","sidebarHTML":"<ol><li><strong><a href=\"/ja/docs/Web/API/Fetch_API\">Fetch API</a></strong></li><li class=\"toggle\"><details open=\"\"><summary>ガイド</summary><ol><li><a href=\"/ja/docs/Web/API/Fetch_API/Using_Fetch\">Using the Fetch API</a></li><li><a href=\"/ja/docs/Web/API/Fetch_API/Basic_concepts\">Fetch basic concepts</a></li><li><a href=\"/ja/docs/Web/API/Fetch_API/Cross-global_fetch_usage\">Cross-global fetch usage</a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>インターフェイス</summary><ol><li><a href=\"/ja/docs/Web/API/Headers\"><code>Headers</code></a></li><li><a href=\"/ja/docs/Web/API/Request\"><code>Request</code></a></li><li><a href=\"/ja/docs/Web/API/Response\"><code>Response</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>メソッド</summary><ol><li><a href=\"/ja/docs/Web/API/fetch\"><code>fetch()</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>この記事では、フェッチ（および潜在的に同種のリソース取得の振る舞いを示す他の API）で発生するエッジケースについて説明します。 相対 URL を含む オリジン間フェッチ（cross-origin fetch）が <a href=\"/ja/docs/Web/HTML/Element/iframe\"><code>&lt;iframe&gt;</code></a> から開始される場合、相対 URL は iframe の位置ではなく現在のグローバルな位置に対して解決していました。</p>"}},{"type":"prose","value":{"id":"エッジケース","title":"エッジケース","isH3":false,"content":"<p>多くのサイトは、このエッジケースに出くわすことはないでしょう。条件は以下の通りです。</p>\n<ul>\n  <li>同一オリジン (same-origin) の iframe が必要です。</li>\n  <li>その同一オリジンの iframe には、異なるベース URL を持つ位置が必要です。</li>\n  <li>フェッチ関数をグローバル間 (cross-global) で使用する必要があります。 例えば、 <code>frame.contentWindow.fetch()</code> のようにします。</li>\n  <li>フェッチするために渡す URL は相対である必要があります。</li>\n</ul>"}},{"type":"prose","value":{"id":"問題","title":"問題","isH3":false,"content":"<p>以前は、例えば次のように、現在のグローバルに対して相対 URL を解決していました。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">let</span> absolute <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">URL</span><span class=\"token punctuation\">(</span>relative<span class=\"token punctuation\">,</span> window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>href<span class=\"token punctuation\">)</span>\n</code></pre></div>\n<p>これ自体は問題ではありません。 この種の振る舞いを示すさまざまな API が仕様で定義されている振る舞いと矛盾してそれを実行しているだけであり、それがさらに問題を引き起こす可能性があります。</p>"}},{"type":"prose","value":{"id":"解決策","title":"解決策","isH3":false,"content":"<p>Firefox 60 以降では、 Mozilla は、使用している <code>fetch()</code> 関数を所有するグローバルに対して相対 URL を解決するようになりました（<a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=1432272\" class=\"external\" rel=\" noopener\">バグ&nbsp;1432272</a> を参照）。 したがって、上記の場合、次のように、 iframe の位置に対して解決します。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">let</span> absolute <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">URL</span><span class=\"token punctuation\">(</span>relative<span class=\"token punctuation\">,</span> frame<span class=\"token punctuation\">.</span>contentWindow<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>href<span class=\"token punctuation\">)</span>\n</code></pre></div>\n<p>今後の潜在的な問題を軽減するために、この振る舞いの変更に合わせた新しい仕様を取得することについて、多くの議論が進行中です。</p>"}}],"toc":[{"text":"エッジケース","id":"エッジケース"},{"text":"問題","id":"問題"},{"text":"解決策","id":"解決策"}],"summary":"この記事では、フェッチ（および潜在的に同種のリソース取得の振る舞いを示す他の API）で発生するエッジケースについて説明します。 相対 URL を含む オリジン間フェッチ（cross-origin fetch）が <iframe> から開始される場合、相対 URL は iframe の位置ではなく現在のグローバルな位置に対して解決していました。","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Cross-global fetch usage","locale":"en-US","native":"English (US)"},{"title":"Uso de busca Cross-global","locale":"pt-BR","native":"Português (do Brasil)"},{"title":"Cross-global fetch usage","locale":"ru","native":"Русский"},{"title":"Cross-global fetch usage","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"ja/web/api/fetch_api/cross-global_fetch_usage","github_url":"https://github.com/mdn/translated-content/blob/main/files/ja/web/api/fetch_api/cross-global_fetch_usage/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/ja/docs/Web","title":"開発者向けのウェブ技術"},{"uri":"/ja/docs/Web/API","title":"Web API"},{"uri":"/ja/docs/Web/API/Fetch_API","title":"Fetch API"},{"uri":"/ja/docs/Web/API/Fetch_API/Cross-global_fetch_usage","title":"グローバル間フェッチの使用"}],"pageTitle":"グローバル間フェッチの使用 - Web API | MDN","noIndexing":false}}