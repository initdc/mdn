{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"チャンネルメッセージング API","mdn_url":"/ja/docs/Web/API/Channel_Messaging_API","locale":"ja","native":"日本語","sidebarHTML":"<ol><li><strong><a href=\"/ja/docs/Web/API/Channel_Messaging_API\">Channel Messaging API</a></strong></li><li class=\"toggle\"><details open=\"\"><summary>ガイド</summary><ol><li><a href=\"/ja/docs/Web/API/Channel_Messaging_API/Using_channel_messaging\">Using channel messaging</a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>インターフェイス</summary><ol><li><a href=\"/ja/docs/Web/API/MessageChannel\"><code>MessageChannel</code></a></li><li><a href=\"/ja/docs/Web/API/MessagePort\"><code>MessagePort</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p><strong>チャンネルメッセージング API</strong> (Channel Messaging API) を使用すると、同じ文書に添付された異なる閲覧コンテキストで実行される 2 つの別々のスクリプト（2 つの IFrame、メイン文書と IFrame、<a href=\"/ja/docs/Web/API/SharedWorker\"><code>SharedWorker</code></a> を介した 2 つの文書、 2 つのワーカーなど）で直接通信し、両端にポートを持つ双方向チャンネル（またはパイプ）を介して相互にメッセージをやり取りできます。</p><div class=\"notecard note\" id=\"sect1\">\n  <p><strong>注:</strong> この機能は <a href=\"/ja/docs/Web/API/Web_Workers_API\">Web Worker</a> 内で利用可能です</p>\n</div>"}},{"type":"prose","value":{"id":"チャンネルメッセージングの概念と使用方法","title":"チャンネルメッセージングの概念と使用方法","isH3":false,"content":"<p>メッセージチャンネルは <a href=\"/ja/docs/Web/API/MessageChannel/MessageChannel\" title=\"MessageChannel()\"><code>MessageChannel()</code></a> コンストラクターを使用して作成します。 作成すると、チャンネルの 2 つのポートは <a href=\"/ja/docs/Web/API/MessageChannel/port1\"><code>MessageChannel.port1</code></a> プロパティおよび <a href=\"/ja/docs/Web/API/MessageChannel/port2\"><code>MessageChannel.port2</code></a> プロパティを介してアクセスできます（どちらのプロパティも <a href=\"/ja/docs/Web/API/MessagePort\"><code>MessagePort</code></a> オブジェクトを返します）。 チャンネルを作成したアプリは <code>port1</code> を使用し、ポートの反対側のアプリは <code>port2</code> を使用します — <code>port2</code> にメッセージを送信し、<a href=\"/ja/docs/Web/API/Window/postMessage\"><code>window.postMessage</code></a> を使用して 2 つの引数（送信するメッセージと所有権を移管するオブジェクト、この場合はポート自体）でポートを他の閲覧コンテキストに移管します。</p>\n<p>これらの移譲可能オブジェクトが転送されると、それまで属していたコンテキストでは使えなくなります。ポートは、送信された後、元のコンテキストでは使用することができなくなります。</p>\n<p>もう一方の閲覧コンテキストは、 <a href=\"/ja/docs/Web/API/MessagePort/message_event\" title=\"onmessage\"><code>onmessage</code></a> を使用してメッセージを待ち受けし、イベントの <code>data</code> 属性を使用してメッセージの内容を取得することができます。 <a href=\"/ja/docs/Web/API/MessagePort/postMessage\"><code>MessagePort.postMessage</code></a> を使用して元の文書にメッセージを送り返すことで応答できます。</p>\n<p>チャンネルへのメッセージ送信を停止したい場合は、<a href=\"/ja/docs/Web/API/MessagePort/close\"><code>MessagePort.close</code></a> を呼び出してポートを閉じることができます。</p>\n<p>この API の使用方法の詳細については、<a href=\"/ja/docs/Web/API/Channel_Messaging_API/Using_channel_messaging\">チャンネルメッセージングの使用</a>を参照してください。</p>"}},{"type":"prose","value":{"id":"チャンネルメッセージングのインターフェイス","title":"チャンネルメッセージングのインターフェイス","isH3":false,"content":"<dl>\n  <dt id=\"messagechannel\"><a href=\"/ja/docs/Web/API/MessageChannel\"><code>MessageChannel</code></a></dt>\n  <dd>\n    <p>メッセージを送信するための新しいメッセージチャンネルを作成します。</p>\n  </dd>\n  <dt id=\"messageport\"><a href=\"/ja/docs/Web/API/MessagePort\"><code>MessagePort</code></a></dt>\n  <dd>\n    <p>メッセージチャンネルのポートを制御して、一方のポートからメッセージを送信し、もう一方のポートで到着するのを待ち受けします。</p>\n  </dd>\n  <dt id=\"portcollection\"><a class=\"page-not-created\" title=\"この項目についての文書はまだ書かれていません。書いてみませんか？\"><code>PortCollection</code></a></dt>\n  <dd>\n    <p><code>MessagePort</code> の配列。 同時に複数のポートにメッセージをブロードキャストできるようにするための実験的な解決策。</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"例","title":"例","isH3":false,"content":"<ul>\n  <li>Github で<a href=\"https://github.com/mdn/dom-examples/tree/master/channel-messaging-basic\" class=\"external\" rel=\" noopener\">チャンネルメッセージングの基本的なデモ</a>（<a href=\"https://mdn.github.io/dom-examples/channel-messaging-basic/\" class=\"external\" rel=\" noopener\">ライブで実行</a>）を公開しました。 これはページと埋め込まれた <a href=\"/ja/docs/Web/HTML/Element/iframe\"><code>&lt;iframe&gt;</code></a> の間の本当に簡単な単一メッセージ転送を示します。</li>\n  <li>また、メインページと IFrame の間で複数のメッセージを送信することができる、もう少し複雑な設定を示す<a href=\"https://github.com/mdn/dom-examples/tree/master/channel-messaging-multimessage\" class=\"external\" rel=\" noopener\">マルチメッセージデモ</a>（<a href=\"https://mdn.github.io/dom-examples/channel-messaging-multimessage/\" class=\"external\" rel=\" noopener\">ライブで実行</a>）を見ることもできます。</li>\n</ul>"}},{"type":"specifications","value":{"title":"仕様書","id":"仕様書","isH3":true,"specifications":[{"bcdSpecificationURL":"https://html.spec.whatwg.org/multipage/web-messaging.html#message-channels","title":"HTML Standard"}],"query":"api.MessageChannel"}},{"type":"prose","value":{"id":"ブラウザーの互換性","title":"ブラウザーの互換性","isH3":false,"content":""}},{"type":"browser_compatibility","value":{"title":"MessageChannel","id":"messagechannel_2","isH3":true,"query":"api.MessageChannel","dataURL":"/ja/docs/Web/API/Channel_Messaging_API/bcd.json"}},{"type":"browser_compatibility","value":{"title":"MessagePort","id":"messageport_2","isH3":true,"query":"api.MessagePort","dataURL":"/ja/docs/Web/API/Channel_Messaging_API/bcd-2.json"}},{"type":"prose","value":{"id":"関連情報","title":"関連情報","isH3":false,"content":"<ul>\n  <li><a href=\"/ja/docs/Web/API/Channel_Messaging_API/Using_channel_messaging\">チャンネルメッセージングの使用</a></li>\n  <li><a href=\"/ja/docs/Web/API/Web_Workers_API\">ウェブワーカー API</a></li>\n  <li><a href=\"/ja/docs/Web/API/Broadcast_Channel_API\">ブロードキャストチャンネル API</a></li>\n</ul>"}}],"toc":[{"text":"チャンネルメッセージングの概念と使用方法","id":"チャンネルメッセージングの概念と使用方法"},{"text":"チャンネルメッセージングのインターフェイス","id":"チャンネルメッセージングのインターフェイス"},{"text":"例","id":"例"},{"text":"ブラウザーの互換性","id":"ブラウザーの互換性"},{"text":"関連情報","id":"関連情報"}],"summary":"チャンネルメッセージング API (Channel Messaging API) を使用すると、同じ文書に添付された異なる閲覧コンテキストで実行される 2 つの別々のスクリプト（2 つの IFrame、メイン文書と IFrame、SharedWorker を介した 2 つの文書、 2 つのワーカーなど）で直接通信し、両端にポートを持つ双方向チャンネル（またはパイプ）を介して相互にメッセージをやり取りできます。","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Channel Messaging API","locale":"en-US","native":"English (US)"},{"title":"Channel Messaging API","locale":"ko","native":"한국어"},{"title":"Channel Messaging API","locale":"zh-CN","native":"中文 (简体)"},{"title":"Channel Messaging API","locale":"zh-TW","native":"正體中文 (繁體)"}],"source":{"folder":"ja/web/api/channel_messaging_api","github_url":"https://github.com/mdn/translated-content/blob/main/files/ja/web/api/channel_messaging_api/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/ja/docs/Web","title":"開発者向けのウェブ技術"},{"uri":"/ja/docs/Web/API","title":"Web API"},{"uri":"/ja/docs/Web/API/Channel_Messaging_API","title":"チャンネルメッセージング API"}],"pageTitle":"チャンネルメッセージング API - Web API | MDN","noIndexing":false}}