{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"XRReferenceSpace.getOffsetReferenceSpace()","mdn_url":"/ja/docs/Web/API/XRReferenceSpace/getOffsetReferenceSpace","locale":"ja","native":"日本語","sidebarHTML":"<ol><li><strong><a href=\"/ja/docs/Web/API/WebXR_Device_API\">WebXR Device API</a></strong></li><li><strong><a href=\"/ja/docs/Web/API/XRReferenceSpace\"><code>XRReferenceSpace</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>メソッド</summary><ol><li><em><code>getOffsetReferenceSpace()</code></em></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>イベント</summary><ol><li><a href=\"/ja/docs/Web/API/XRReferenceSpace/reset_event\"><code>reset</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>継承</summary><ol><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/XRSpace\"><code>XRSpace</code> <small>(en-US)</small></a></li><li><a href=\"/ja/docs/Web/API/EventTarget\"><code>EventTarget</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>WebXR Device API に関連するページ</summary><ol><li><a href=\"/ja/docs/Web/API/Navigator/xr\"><code>Navigator.xr</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/WebGLRenderingContext/makeXRCompatible\"><code>WebGLRenderingContext.makeXRCompatible()</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/XRAnchor\"><code>XRAnchor</code> <small>(en-US)</small></a></li><li><a href=\"/ja/docs/Web/API/XRBoundedReferenceSpace\"><code>XRBoundedReferenceSpace</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/XRCPUDepthInformation\"><code>XRCPUDepthInformation</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/XRDepthInformation\"><code>XRDepthInformation</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/XRFrame\"><code>XRFrame</code> <small>(en-US)</small></a></li><li><a href=\"/ja/docs/Web/API/XRInputSource\"><code>XRInputSource</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/XRInputSourceArray\"><code>XRInputSourceArray</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/XRInputSourceEvent\"><code>XRInputSourceEvent</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/XRInputSourcesChangeEvent\"><code>XRInputSourcesChangeEvent</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/XRPose\"><code>XRPose</code> <small>(en-US)</small></a></li><li><a href=\"/ja/docs/Web/API/XRReferenceSpaceEvent\"><code>XRReferenceSpaceEvent</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/XRRenderState\"><code>XRRenderState</code> <small>(en-US)</small></a></li><li><a href=\"/ja/docs/Web/API/XRRigidTransform\"><code>XRRigidTransform</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/XRSession\"><code>XRSession</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/XRSessionEvent\"><code>XRSessionEvent</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/XRSpace\"><code>XRSpace</code> <small>(en-US)</small></a></li><li><a href=\"/ja/docs/Web/API/XRSystem\"><code>XRSystem</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/XRView\"><code>XRView</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/XRViewerPose\"><code>XRViewerPose</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/XRViewport\"><code>XRViewport</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/XRWebGLBinding\"><code>XRWebGLBinding</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/XRWebGLDepthInformation\"><code>XRWebGLDepthInformation</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/XRWebGLLayer\"><code>XRWebGLLayer</code> <small>(en-US)</small></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<div class=\"notecard secure\" id=\"sect1\"><p><strong>安全なコンテキスト用:</strong> この機能は一部またはすべての<a href=\"#browser_compatibility\">対応しているブラウザー</a>において、<a href=\"/ja/docs/Web/Security/Secure_Contexts\">安全なコンテキスト</a> (HTTPS) でのみ利用できます。</p></div>\n<p><a href=\"/ja/docs/Web/API/XRReferenceSpace\"><code>XRReferenceSpace</code></a> インターフェイスの <strong><code>getOffsetReferenceSpace()</code></strong> メソッドは、メソッドが呼び出されたオブジェクトと 3D 空間内の特定の点との間の位置の相対的な違いを表す新しい参照空間オブジェクトを返します。 <code>getOffsetReferenceSpace()</code> によって返されるオブジェクトは、<a href=\"/ja/docs/Web/API/XRReferenceSpace\"><code>XRReferenceSpace</code></a> で呼び出された場合は <code>XRReferenceSpace</code> であり、<a href=\"/ja/docs/Web/API/XRBoundedReferenceSpace\"><code>XRBoundedReferenceSpace</code></a> で呼び出された場合は <code>XRBoundedReferenceSpace</code> です。</p>\n<p>つまり、3D 空間にオブジェクトがあり、それに対して別のオブジェクトを相対的に配置する必要がある場合は、<code>getOffsetReferenceSpace()</code> を呼び出して、<em><code>getOffsetReferenceSpace()</code> を呼び出すオブジェクトの位置と向きを基準</em>にして、2 番目のオブジェクトに持たせる位置と向きを渡します。</p>\n<p>次に、シーンを描画するときに、オフセット参照空間を使用して、オブジェクトを相互に相対的に配置するだけでなく、必要な変換を適用して、ビューアーの位置に基づいてオブジェクトを適切にレンダリングできます。 これは、<a href=\"#implementing_rotation_based_on_non-xr_inputs\">非 XR 入力に基づく回転の実装</a>の例で示されています。 この例では、この方法を使用して、ユーザーがマウスを使用して視野角をピッチおよびヨーできるようにする方法を示しています。</p>"}},{"type":"prose","value":{"id":"構文","title":"構文","isH3":false,"content":"<pre class=\"notranslate\">offsetReferenceSpace = xrReferenceSpace.getOffsetReferenceSpace(originOffset);\n</pre>"}},{"type":"prose","value":{"id":"パラメーター","title":"パラメーター","isH3":true,"content":"<dl>\n  <dt id=\"originoffset\"><code>originOffset</code></dt>\n  <dd>\n    <p>新しい参照空間の原点へのオフセットを指定する <a href=\"/ja/docs/Web/API/XRRigidTransform\"><code>XRRigidTransform</code></a>。 これらの値は、現在の参照空間の位置と向きに追加され、その結果は、新しく作成された <a href=\"/ja/docs/Web/API/XRReferenceSpace\"><code>XRReferenceSpace</code></a> の位置と向きとして使用されます。</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"返り値","title":"返り値","isH3":true,"content":"<p>メソッドが呼び出された参照空間と同じネイティブの原点を持つが、オブジェクトから <code>originOffset</code> で指定された点までの隔たりを示す原点オフセットを持つ参照空間を記述する新しい <a href=\"/ja/docs/Web/API/XRReferenceSpace\"><code>XRReferenceSpace</code></a> オブジェクト。</p>\n<p>このメソッドを呼び出すオブジェクトが <a href=\"/ja/docs/Web/API/XRBoundedReferenceSpace\"><code>XRBoundedReferenceSpace</code></a> の場合、返されるオブジェクトも <code>XRBoundedReferenceSpace</code> です。 新しい参照空間の <a href=\"/ja/docs/Web/API/XRBoundedReferenceSpace/boundsGeometry\" title=\"boundsGeometry\"><code>boundsGeometry</code></a> には、元のオブジェクトの <code>boundsGeometry</code> が設定され、それぞれの点に <code>originOffset</code> の逆行列（inverse）が乗算されます。</p>"}},{"type":"prose","value":{"id":"例","title":"例","isH3":false,"content":"<p>以下は、<code>getOffsetReferenceSpace()</code> の使用方法を示すいくつかの例です。</p>"}},{"type":"prose","value":{"id":"ビューアーのテレポートまたは位置の設定","title":"ビューアーのテレポートまたは位置の設定","isH3":true,"content":"<p>シーンを最初に作成するときに、3D 世界内でのユーザーの位置を設定する必要がある場合があります。 <code>getOffsetReferenceSpace()</code> を使用してこれを行うことができます。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>xrSession<span class=\"token punctuation\">.</span><span class=\"token function\">requestReferenceSpace</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"local\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">refSpace</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  xrReferenceSpace <span class=\"token operator\">=</span> refSpace<span class=\"token punctuation\">;</span>\n  xrReferenceSpace <span class=\"token operator\">=</span> xrReferenceSpace<span class=\"token punctuation\">.</span><span class=\"token function\">getOffsetReferenceSpace</span><span class=\"token punctuation\">(</span>\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">XRRigidTransform</span><span class=\"token punctuation\">(</span>startPosition<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">z</span><span class=\"token operator\">:</span><span class=\"token number\">1.0</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">w</span><span class=\"token operator\">:</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  xrSession<span class=\"token punctuation\">.</span><span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>drawFrame<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>このコードでは、ローカル参照空間を取得し、<code>getOffsetReferenceSpace()</code> を使用して、原点を <code>startPosition</code> で指定された位置に調整し、向きが Z 軸に直に沿った新しい空間を作成します。 次に、<a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/XRSession\"><code>XRSession</code> <small>(en-US)</small></a> の <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/XRSession/requestAnimationFrame\"><code>requestAnimationFrame()</code> <small>(en-US)</small></a> を使用して最初のアニメーションフレームを要求します。</p>"}},{"type":"prose","value":{"id":"非_xr_入力に基づく回転の実装","title":"非 XR 入力に基づく回転の実装","isH3":true,"content":"<p>WebXR が直接サポートしている入力コントロールは、すべて専用の VR または AR の入力デバイスです。 マウス、キーボード、またはその他の入力デバイスを使用して 3D 空間内のオブジェクトを移動または変換したり、ユーザーが空間内を移動できるようにするには、入力を読み取って移動するためのコードを記述する必要があります。</p>\n<p>これは、<code>getOffsetReferenceSpace()</code> のもう 1 つの良いユースケースです。 この例では、ユーザーがマウスを右クリックしながら動かすことで、視野角の変更により周囲を見回せるコードを示します。</p>\n<p>まず、<a href=\"/ja/docs/Web/API/Element/mousemove_event\" title=\"mousemove\"><code>mousemove</code></a> イベントのイベントハンドラーを追加します。 これは、マウスの右ボタンが押されている場合に回転を実行するコードを呼び出します。 <a class=\"page-not-created\" title=\"この項目についての文書はまだ書かれていません。書いてみませんか？\"><code>oncontextmenu</code></a> イベントで <a href=\"/ja/docs/Web/API/Event/preventDefault\" title=\"preventDefault()\"><code>preventDefault()</code></a> を呼び出すことにより、このイベントが無視されるように設定していることにも注意してください。 これにより、右クリックによってコンテキストメニューがブラウザーに表示されなくなります。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>canvas<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">oncontextmenu</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span> event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\ncanvas<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"mousemove\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>buttons <span class=\"token operator\">&amp;</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">rotateViewBy</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>movementX<span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">.</span>movementY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>次に、<code>rotateViewBy()</code> 関数は、<code>mousemove</code> イベントからのマウスデルタ値に基づいて、マウスルック（mouse look）方向のヨーとピッチを更新します。 ピッチを制限しているため、真上と真下を超えて見ることはできません。 これが呼び出されるたびに、新しいオフセットを使用して、<code>mousePitch</code> と <code>mouseYaw</code> の現在の値が更新されます。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">let</span> mouseYaw <span class=\"token operator\">=</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> mousePitch <span class=\"token operator\">=</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> inverseOrientation <span class=\"token operator\">=</span> quat<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">MOUSE_SPEED</span> <span class=\"token operator\">=</span> <span class=\"token number\">0.003</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">rotateViewBy</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">dx<span class=\"token punctuation\">,</span> dy</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  mouseYaw <span class=\"token operator\">+=</span> dx <span class=\"token operator\">*</span> <span class=\"token constant\">MOUSE_SPEED</span><span class=\"token punctuation\">;</span>\n  mousePitch <span class=\"token operator\">+=</span> dy <span class=\"token operator\">*</span> <span class=\"token constant\">MOUSE_SPEED</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>mousePitch <span class=\"token operator\">&lt;</span> <span class=\"token operator\">-</span>Math<span class=\"token punctuation\">.</span><span class=\"token constant\">PI</span> <span class=\"token operator\">*</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    mousePitch <span class=\"token operator\">=</span> <span class=\"token operator\">-</span>Math<span class=\"token punctuation\">.</span><span class=\"token constant\">PI</span> <span class=\"token operator\">*</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>mousePitch <span class=\"token operator\">&gt;</span> Math<span class=\"token punctuation\">.</span><span class=\"token constant\">PI</span> <span class=\"token operator\">*</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    mousePitch <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token constant\">PI</span> <span class=\"token operator\">*</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>最後に、計算したヨーとピッチをビューアーの向きに実際に適用するコードが必要です。 この関数 <code>applyMouseMovement()</code> は、次のことを処理します。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">applyMouseMovement</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">refSpace</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>mouseYaw <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>mousePitch<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> refSpace<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  quat<span class=\"token punctuation\">.</span><span class=\"token function\">identity</span><span class=\"token punctuation\">(</span>inverseOrientation<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  quat<span class=\"token punctuation\">.</span><span class=\"token function\">rotateX</span><span class=\"token punctuation\">(</span>inverseOrientation<span class=\"token punctuation\">,</span> inverseOrientation<span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span>mousePitch<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  quat<span class=\"token punctuation\">.</span><span class=\"token function\">rotateY</span><span class=\"token punctuation\">(</span>inverseOrientation<span class=\"token punctuation\">,</span> inverseOrientation<span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span>mouseYaw<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">let</span> newTransform <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XRRigidTransform</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span>  <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">z</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n                         <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> inverseOrientation<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> inverseOrientation<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                          <span class=\"token literal-property property\">z</span><span class=\"token operator\">:</span> inverseOrientation<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">w</span><span class=\"token operator\">:</span> inverseOrientation<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> refSpace<span class=\"token punctuation\">.</span><span class=\"token function\">getOffsetReferenceSpace</span><span class=\"token punctuation\">(</span>newTransform<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>この関数は、現在のピッチ値とヨー値からビューアーの向きを決めるために使用する逆向き行列を作成し、<a href=\"/ja/docs/Web/API/XRRigidTransform/XRRigidTransform\" title=\"new XRRigidTransform()\"><code>new XRRigidTransform()</code></a> を呼び出すときにその行列を向きのソースとして使用します。 次に、新しい <a href=\"/ja/docs/Web/API/XRRigidTransform\"><code>XRRigidTransform</code></a> の参照空間がフェッチされ、呼び出し元に返されます。</p>\n<p>この新しい参照空間は、ビューアーの位置は変更しませんが、蓄積されたマウス入力から生成されたピッチとヨーの値に基づいて向きを変更します。 <code>applyMouseMovement()</code> は、フレームを描画するときに、<a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/XRFrame/getViewerPose\"><code>getViewerPose()</code> <small>(en-US)</small></a> を使用してビューアーのポーズをフェッチする直前に呼び出す必要があり、レンダリングはこの参照空間で実行する必要があります。</p>\n<p>これに似たコードが、<a href=\"/ja/docs/Web/API/WebXR_Device_API/Movement_and_motion\">移動、向き、モーション</a>という WebXR チュートリアルの幅広い記事で使用されているのを見ることができます。 特に、<a href=\"/ja/docs/Web/API/WebXR_Device_API/Movement_and_motion#starting_up_the_webxr_session\">WebXR セッションの開始</a>というセクションを確認してください。</p>"}},{"type":"prose","value":{"id":"仕様","title":"仕様","isH3":false,"content":"<table>\n  <thead>\n    <tr>\n      <th>仕様</th>\n      <th>状態</th>\n      <th>コメント</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td><a href=\"https://immersive-web.github.io/webxr/#dom-xrreferencespace-getoffsetreferencespace\" hreflang=\"en\" lang=\"en\" class=\"external\" rel=\" noopener\">WebXR Device API<br><small lang=\"ja\">getOffsetReferenceSpace() の定義</small></a></td>\n      <td><span class=\"spec-wd\">草案</span></td>\n      <td>初期定義</td>\n    </tr>\n  </tbody>\n</table>"}},{"type":"browser_compatibility","value":{"title":"ブラウザーの互換性","id":"ブラウザーの互換性","isH3":false,"query":"api.XRReferenceSpace.getOffsetReferenceSpace","dataURL":"/ja/docs/Web/API/XRReferenceSpace/getOffsetReferenceSpace/bcd.json"}}],"toc":[{"text":"構文","id":"構文"},{"text":"例","id":"例"},{"text":"仕様","id":"仕様"},{"text":"ブラウザーの互換性","id":"ブラウザーの互換性"}],"summary":"XRReferenceSpace インターフェイスの getOffsetReferenceSpace() メソッドは、メソッドが呼び出されたオブジェクトと 3D 空間内の特定の点との間の位置の相対的な違いを表す新しい参照空間オブジェクトを返します。 getOffsetReferenceSpace() によって返されるオブジェクトは、XRReferenceSpace で呼び出された場合は XRReferenceSpace であり、XRBoundedReferenceSpace で呼び出された場合は XRBoundedReferenceSpace です。","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"XRReferenceSpace.getOffsetReferenceSpace()","locale":"en-US","native":"English (US)"}],"source":{"folder":"ja/web/api/xrreferencespace/getoffsetreferencespace","github_url":"https://github.com/mdn/translated-content/blob/main/files/ja/web/api/xrreferencespace/getoffsetreferencespace/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/ja/docs/Web","title":"開発者向けのウェブ技術"},{"uri":"/ja/docs/Web/API","title":"Web API"},{"uri":"/ja/docs/Web/API/XRReferenceSpace","title":"XRReferenceSpace"},{"uri":"/ja/docs/Web/API/XRReferenceSpace/getOffsetReferenceSpace","title":"XRReferenceSpace.getOffsetReferenceSpace()"}],"pageTitle":"XRReferenceSpace.getOffsetReferenceSpace() - Web API | MDN","noIndexing":false}}