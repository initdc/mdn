{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"HTML ドラッグ＆ドロップ API","mdn_url":"/ja/docs/Web/API/HTML_Drag_and_Drop_API","locale":"ja","native":"日本語","sidebarHTML":"<ol><li><strong><a href=\"/ja/docs/Web/API/HTML_Drag_and_Drop_API\">HTML Drag and Drop API</a></strong></li><li class=\"toggle\"><details open=\"\"><summary>ガイド</summary><ol><li><a href=\"/ja/docs/Web/API/HTML_Drag_and_Drop_API/File_drag_and_drop\">File drag and drop</a></li><li><a href=\"/ja/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations\">Drag operations</a></li><li><a href=\"/ja/docs/Web/API/HTML_Drag_and_Drop_API/Multiple_items\">Dragging and Dropping Multiple Items</a></li><li><a href=\"/ja/docs/Web/API/HTML_Drag_and_Drop_API/Recommended_drag_types\">Recommended Drag Types</a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>インターフェイス</summary><ol><li><a href=\"/ja/docs/Web/API/DataTransfer\"><code>DataTransfer</code></a></li><li><a href=\"/ja/docs/Web/API/DataTransferItem\"><code>DataTransferItem</code></a></li><li><a href=\"/ja/docs/Web/API/DataTransferItemList\"><code>DataTransferItemList</code></a></li><li><a href=\"/ja/docs/Web/API/DragEvent\"><code>DragEvent</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>イベント</summary><ol><li><a href=\"/ja/docs/Web/API/Document/drag_event\"><code>Document</code>: <code>drag</code></a></li><li><a href=\"/ja/docs/Web/API/Document/dragend_event\"><code>Document</code>: <code>dragend</code></a></li><li><a href=\"/ja/docs/Web/API/Document/dragenter_event\"><code>Document</code>: <code>dragenter</code></a></li><li><a href=\"/ja/docs/Web/API/Document/dragleave_event\"><code>Document</code>: <code>dragleave</code></a></li><li><a href=\"/ja/docs/Web/API/Document/dragover_event\"><code>Document</code>: <code>dragover</code></a></li><li><a href=\"/ja/docs/Web/API/Document/dragstart_event\"><code>Document</code>: <code>dragstart</code></a></li><li><a href=\"/ja/docs/Web/API/Document/drop_event\"><code>Document</code>: <code>drop</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p><strong>HTML ドラッグ &amp; ドロップ</strong>インターフェイスにより、アプリケーションはブラウザーでドラッグ＆ドロップ機能を使用することができます。ユーザーはマウスで<em>ドラッグ可能</em>な要素を選択し、その要素を<em>ドロップ可能</em>な要素へドラッグし、マウスボタンを離すことでドロップすることができます。ドラッグ操作の間、<em>ドラッグ可能な</em>要素の半透明の表示がマウスポインターに続きます。</p>\n<p>ウェブサイト、拡張機能、XUL アプリケーションでは、<em>ドラッグ可能</em>にできる要素の種類、<em>ドラッグ可能な</em>要素が生成するフィードバックの種類、および<em>ドロップ可能な</em>要素をカスタマイズできます。</p>\n<p>この HTML ドラッグ＆ドロップの概要では、インターフェイスの説明、アプリケーションにドラッグ＆ドロップのサポートを追加するための基本的なステップ、およびインターフェイスの相互運用性の要約が含まれています。</p>"}},{"type":"prose","value":{"id":"ドラッグイベント","title":"ドラッグイベント","isH3":false,"content":"<p>HTML ドラッグ &amp; ドロップ では <a href=\"/ja/docs/Web/API/Event\" title=\"DOM イベントモデル\"><code>DOM イベントモデル</code></a> と <a href=\"/ja/docs/Web/API/MouseEvent\" title=\"マウスイベント\"><code>マウスイベント</code></a> を継承した <em><a href=\"/ja/docs/Web/API/DragEvent\" title=\"ドラッグイベント\"><code>ドラッグイベント</code></a></em> を使います。典型的な<em>ドラッグ操作は</em> ユーザーが<em>ドラッグ可能な</em>要素を選択したときと、<em>ドロップ可能な</em>要素に要素をドラッグしたとき、ドラッグ可能な要素を離したときに開始します。</p>\n<p>ドラッグ操作のあいだ、いくつかのイベント種類が発生し、そのうちいくつかは <a href=\"/ja/docs/conflicting/Web/API/HTMLElement/drag_event_b6e067958f5eb7e5b6c19e73c98fc256\" title=\"drag\"><code>drag</code></a> や <a href=\"/ja/docs/conflicting/Web/API/HTMLElement/dragover_event_6ef4663f0003f0c263a08969c008baf7\" title=\"dragover\"><code>dragover</code></a> イベントのように、複数発生することもあります。</p>\n<p>おのおのの <a href=\"/ja/docs/Web/API/DragEvent#event_types\">ドラッグイベントタイプ</a>には関連した<a href=\"/ja/docs/Web/API/DragEvent#globaleventhandlers\">グローバルイベントハンドラー</a>があります。</p>\n<table>\n  <thead>\n    <tr>\n      <th>イベント</th>\n      <th>On イベントハンドラー</th>\n      <th>発生する条件…</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td><a href=\"/ja/docs/conflicting/Web/API/HTMLElement/drag_event_b6e067958f5eb7e5b6c19e73c98fc256\" title=\"drag\"><code>drag</code></a></td>\n      <td><a href=\"/ja/docs/Web/API/HTMLElement/drag_event\" title=\"ondrag\"><code>ondrag</code></a></td>\n      <td>…ドラッグ項目 (要素や選択テキスト) がドラッグされた場合</td>\n    </tr>\n    <tr>\n      <td><a href=\"/ja/docs/conflicting/Web/API/HTMLElement/dragend_event_2823bae8fed3efe03a09d01597d1cde8\" title=\"dragend\"><code>dragend</code></a></td>\n      <td><a href=\"/ja/docs/Web/API/HTMLElement/dragend_event\" title=\"ondragend\"><code>ondragend</code></a></td>\n      <td>…ドラッグ操作の終了 (マウスボタンを離したり、Esc キーを押したりした場合。詳しくは<a href=\"/ja/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations#dragend\">ドラッグの終了</a>を参照してください。)</td>\n    </tr>\n    <tr>\n      <td><a href=\"/ja/docs/conflicting/Web/API/HTMLElement/dragenter_event_2dcc7160dcc0241687dce4442238bbf3\" title=\"dragenter\"><code>dragenter</code></a></td>\n      <td><a href=\"/ja/docs/Web/API/HTMLElement/dragenter_event\" title=\"ondragenter\"><code>ondragenter</code></a></td>\n      <td>…ドラッグ項目が有効なドロップ対象に入った場合(<a href=\"/ja/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations#droptargets\">Specifying Drop Targets</a> を見てください)</td>\n    </tr>\n    <tr>\n      <td><a class=\"page-not-created\" title=\"この項目についての文書はまだ書かれていません。書いてみませんか？\"><code>dragexit</code></a></td>\n      <td><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/HTMLElement/dragleave_event\"><code>ondragexit</code> <small>(en-US)</small></a></td>\n      <td>…要素がドラッグ操作の選択対象でなくなった場合</td>\n    </tr>\n    <tr>\n      <td><a href=\"/ja/docs/conflicting/Web/API/HTMLElement/dragleave_event_0d933fa977f195f1bf9fd28b1f8051ee\" title=\"dragleave\"><code>dragleave</code></a></td>\n      <td><a href=\"/ja/docs/Web/API/HTMLElement/dragleave_event\" title=\"ondragleave\"><code>ondragleave</code></a></td>\n      <td>…ドラッグ項目が有効なドロップ対象を離れた場合</td>\n    </tr>\n    <tr>\n      <td><a href=\"/ja/docs/conflicting/Web/API/HTMLElement/dragover_event_6ef4663f0003f0c263a08969c008baf7\" title=\"dragover\"><code>dragover</code></a></td>\n      <td><a href=\"/ja/docs/Web/API/HTMLElement/dragover_event\" title=\"ondragover\"><code>ondragover</code></a></td>\n      <td>…ドラッグ項目が有効なドロップ対象にドラッグされた場合、数百ミリ秒ごとに</td>\n    </tr>\n    <tr>\n      <td><a href=\"/ja/docs/conflicting/Web/API/HTMLElement/dragstart_event_be9da5ef68a2920309b168752ea03d20\" title=\"dragstart\"><code>dragstart</code></a></td>\n      <td><a href=\"/ja/docs/Web/API/HTMLElement/dragstart_event\" title=\"ondragstart\"><code>ondragstart</code></a></td>\n      <td>…ユーザーが項目をドラッグ開始した場合(<a href=\"/ja/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations#dragstart\">ドラッグ操作の開始</a> を見てください)</td>\n    </tr>\n    <tr>\n      <td><a href=\"/ja/docs/conflicting/Web/API/HTMLElement/drop_event_21b7ebf04561093fe90276329e9bddff\" title=\"drop\"><code>drop</code></a></td>\n      <td><a href=\"/ja/docs/Web/API/HTMLElement/drop_event\" title=\"ondrop\"><code>ondrop</code></a></td>\n      <td>…項目が有効なドロップ対象にドロップされた場合(<a href=\"/ja/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations#drop\">ドロップの実行</a> を見てください)</td>\n    </tr>\n  </tbody>\n</table>\n<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>Note:</strong> <strong>メモ:</strong> <code>dragstart</code> と <code>dragend</code> イベントは、どちらも OS からブラウザーにファイルをドラッグしたときには発生しません。</p>\n</div>"}},{"type":"prose","value":{"id":"インターフェイス","title":"インターフェイス","isH3":false,"content":"<p>HTML ドラッグとドロップのインターフェイスは <a href=\"/ja/docs/Web/API/DragEvent\"><code>DragEvent</code></a>, <a href=\"/ja/docs/Web/API/DataTransfer\"><code>DataTransfer</code></a>, <a href=\"/ja/docs/Web/API/DataTransferItem\"><code>DataTransferItem</code></a> <a href=\"/ja/docs/Web/API/DataTransferItemList\"><code>DataTransferItemList</code></a> です。</p>\n<p><a href=\"/ja/docs/Web/API/DragEvent\"><code>DragEvent</code></a> インターフェイスには、コンストラクターと <a href=\"/ja/docs/Web/API/DragEvent/dataTransfer\" title=\"dataTransfer\"><code>dataTransfer</code></a> プロパティ一つがあり、これは <a href=\"/ja/docs/Web/API/DataTransfer\"><code>DataTransfer</code></a> オブジェクトです。</p>\n<p><a href=\"/ja/docs/Web/API/DataTransfer\"><code>DataTransfer</code></a> オブジェクトはドラッグイベントの状態、例えば (<code>copy</code> や <code>move</code> のような) ドラッグの種類や、ドラッグのデータ (1 つ以上の項目)や、各<em>ドラッグ項目</em>の MIME タイプのようなものを含んでいます。<a href=\"/ja/docs/Web/API/DataTransfer\"><code>DataTransfer</code></a> オブジェクトにはドラッグデータを追加・削除するメソッドもあります。</p>\n<p><a href=\"/ja/docs/Web/API/DragEvent\"><code>DragEvent</code></a> と <a href=\"/ja/docs/Web/API/DataTransfer\"><code>DataTransfer</code></a> インターフェイスは、アプリケーションに HTML ドラッグ &amp; ドロップ機能を追加するために必要な唯一のものです。 (Firefox では <a href=\"#gecko_specific_interfaces\">Gecko 独自拡張</a> を <a href=\"/ja/docs/Web/API/DataTransfer\"><code>DataTransfer</code></a> オブジェクトへ施していますが、この拡張機能は Firefox でのみ動作します。)</p>\n<p>それぞれの <a href=\"/ja/docs/Web/API/DataTransfer\"><code>DataTransfer</code></a> オブジェクトには <a href=\"/ja/docs/Web/API/DataTransfer/items\" title=\"items\"><code>items</code></a> プロパティがあり、これは <a href=\"/ja/docs/Web/API/DataTransferItem\"><code>DataTransferItem</code></a> オブジェクトの <a href=\"/ja/docs/Web/API/DataTransferItemList\" title=\"list\"><code>list</code></a> です。 <a href=\"/ja/docs/Web/API/DataTransferItem\"><code>DataTransferItem</code></a> オブジェクトは単一の<em>ドラッグ項目</em>を表し、それぞれが <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransferItem/kind\"><code>kind</code> <small>(en-US)</small></a> プロパティ (<code>string</code> か <code>file</code> の値を取る) と項目の MIME タイプを表す <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransferItem/type\"><code>type</code> <small>(en-US)</small></a> プロパティを持ちます。<a href=\"/ja/docs/Web/API/DataTransferItem\"><code>DataTransferItem</code></a> オブジェクトにはドラッグ項目のデータを取得するメソッドもあります。</p>\n<p><a href=\"/ja/docs/Web/API/DataTransferItemList\"><code>DataTransferItemList</code></a> オブジェクトは <a href=\"/ja/docs/Web/API/DataTransferItem\"><code>DataTransferItem</code></a> オブジェクトのリストです。このリストオブジェクトはリストにドラッグ項目を追加したり、リストからドラッグ項目を削除したり、ドラッグ項目のリストをクリアするメソッドを持ちます。</p>\n<p><a href=\"/ja/docs/Web/API/DataTransfer\"><code>DataTransfer</code></a> と<a href=\"/ja/docs/Web/API/DataTransferItem\"><code>DataTransferItem</code></a> インターフェイスの主な違いは、前者が同期の <a href=\"/ja/docs/Web/API/DataTransfer/getData\" title=\"getData()\"><code>getData()</code></a> メソッドを使ってドラッグ項目のデータにアクセスするのに対し、後者は代わりに非同期の<a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransferItem/getAsString\"><code>getAsString()</code> <small>(en-US)</small></a> メソッドを使うことです。.</p>\n<div class=\"notecard note\" id=\"sect2\">\n  <p><strong>Note:</strong> <strong>メモ:</strong> <a href=\"/ja/docs/Web/API/DragEvent\"><code>DragEvent</code></a> と <a href=\"/ja/docs/Web/API/DataTransfer\"><code>DataTransfer</code></a> はデスクトップブラウザーでは広く対応していますが、 <a href=\"/ja/docs/Web/API/DataTransferItem\"><code>DataTransferItem</code></a> と <a href=\"/ja/docs/Web/API/DataTransferItemList\"><code>DataTransferItemList</code></a> インターフェイスのブラウザーの対応は限られています。相互運用性について、より詳しくは<a href=\"#interoperability\">相互運用性</a>を見てください。</p>\n</div>"}},{"type":"prose","value":{"id":"gecko-特有のインターフェイス","title":"Gecko-特有のインターフェイス","isH3":true,"content":"<p>Mozilla と Firefox は、標準のドラッグ＆ドロップのモデルに含まれていないいくつかの機能に対応しています。複数の項目や、文字列以外のデータ (ファイルなど) をドラッグしたりする補助になる<em>便利な関数</em>があります。詳しくは<a href=\"/ja/docs/Web/API/HTML_Drag_and_Drop_API/Multiple_items\">複数の項目のドラッグ＆ドロップ</a>を参照してください。加えて、<a href=\"/ja/docs/Web/API/DataTransfer\"><code>DataTransfer</code></a> リファレンスページを見るとすべての <a href=\"/ja/docs/Web/API/DataTransfer#gecko_properties\">Gecko 固有プロパティ</a>と <a href=\"/ja/docs/Web/API/DataTransfer#gecko_methods\">Gecko 固有メソッド</a>がわかります。</p>"}},{"type":"prose","value":{"id":"基本","title":"基本","isH3":false,"content":"<p>この節は、アプリにドラッグ&amp;ドロップ機能を追加する基本手順のまとめです。</p>"}},{"type":"prose","value":{"id":"ドラッグ可能なものを特定する","title":"<em>ドラッグ可能なものを</em>特定する","isH3":true,"content":"<p>要素を<em>ドラッグ可能</em>とするには、以下のコードのように <a href=\"/ja/docs/Web/HTML/Global_attributes#attr-draggable\"><code>draggable</code></a> 属性と <a href=\"/ja/docs/Web/API/HTMLElement/dragstart_event\" title=\"ondragstart\"><code>ondragstart</code></a> のグローバルイベントハンドラを追加することが求められます:</p>\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token script\"><span class=\"token language-javascript\">\n  <span class=\"token keyword\">function</span> <span class=\"token function\">dragstart_handler</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ev</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Add the target element's id to the data transfer object</span>\n    ev<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span><span class=\"token function\">setData</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text/plain\"</span><span class=\"token punctuation\">,</span> ev<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'DOMContentLoaded'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Get the element by id</span>\n    <span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"p1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// Add the ondragstart event listener</span>\n    element<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dragstart\"</span><span class=\"token punctuation\">,</span> dragstart_handler<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>p1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">draggable</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>この要素はドラッグできます。<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<p>詳しくは、以下の記事を参照してください。</p>\n<ul>\n  <li><a href=\"/ja/docs/Web/HTML/Global_attributes/draggable\">draggable 属性リファレンス</a></li>\n  <li><a href=\"/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations#draggableattribute\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">ドラッグ操作ガイド (en-US)</a></li>\n</ul>","titleAsText":"ドラッグ可能なものを特定する"}},{"type":"prose","value":{"id":"ドラッグするデータの定義","title":"ドラッグするデータの定義","isH3":true,"content":"<p>アプリケーションは、ドラッグ操作にいくつでもデータ項目を含めることが自由にできます。各データ項目は特定 <code>type</code> の <a href=\"/ja/docs/Glossary/String\" title=\"string\"><code>string</code></a> —よくあるのは <code>text/html</code> のような MIME タイプです。</p>\n<p>各<a href=\"/ja/docs/Web/API/DragEvent\" title=\"ドラッグイベント\"><code>ドラッグイベント</code></a>はイベントのデータを格納する<a href=\"/ja/docs/Web/API/DragEvent/dataTransfer\" title=\"dataTransfer\"><code>dataTransfer</code></a> プロパティを持ちます。このプロパティ (これは <a href=\"/ja/docs/Web/API/DataTransfer\"><code>DataTransfer</code></a> オブジェクトです) にはドラッグデータを管理するメソッドもあります。<a href=\"/ja/docs/Web/API/DataTransfer/setData\" title=\"setData()\"><code>setData()</code></a> メソッドはドラッグデータに項目を追加するのに使用され、その例は下記の通りです。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">dragstart_handler</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ev</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 異なる種類のドラッグデータを追加する</span>\n  ev<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span><span class=\"token function\">setData</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text/plain\"</span><span class=\"token punctuation\">,</span> ev<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>innerText<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  ev<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span><span class=\"token function\">setData</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text/html\"</span><span class=\"token punctuation\">,</span> ev<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>outerHTML<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  ev<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span><span class=\"token function\">setData</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text/uri-list\"</span><span class=\"token punctuation\">,</span> ev<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>ownerDocument<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>href<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<ul>\n  <li>ドラッグ＆ドロップで使用される一般的なデータ型の一覧 (テキスト、HTML、リンク、ファイルなど) については、<a href=\"/ja/docs/Web/API/HTML_Drag_and_Drop_API/Recommended_drag_types\">推奨されるドラッグ型</a>をご覧ください。</li>\n  <li>ドラッグデータについて詳しくは、<a href=\"/ja/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations#dragdata\">ドラッグデータ</a>をご覧ください。</li>\n</ul>"}},{"type":"prose","value":{"id":"ドラッグ画像の定義","title":"ドラッグ画像の定義","isH3":true,"content":"<p>既定では、ブラウザーはドラッグ操作中にポインターの横に現れる画像を提供します。しかし以下の例のように、アプリケーションは <a href=\"/ja/docs/Web/API/DataTransfer/setDragImage\" title=\"setDragImage()\"><code>setDragImage()</code></a> メソッドでカスタム画像を定義できます。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">dragstart_handler</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ev</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 画像を作成し、ドラッグ画像として使う。</span>\n  <span class=\"token comment\">// 注: \"example.gif\" は実際の画像の URL に変更してください。</span>\n  <span class=\"token comment\">// でないと、既定ののドラッグ画像が使用されます。</span>\n  <span class=\"token keyword\">let</span> img <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Image</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  img<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> <span class=\"token string\">'example.gif'</span><span class=\"token punctuation\">;</span>\n  ev<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span><span class=\"token function\">setDragImage</span><span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>ドラッグフィードバック画像について詳しくは、下記を参照してください。</p>\n<ul>\n  <li><a href=\"/ja/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations#dragfeedback\">ドラッグフィードバック画像の設定</a></li>\n</ul>"}},{"type":"prose","value":{"id":"ドラッグ効果の定義","title":"ドラッグ<em>効果</em>の定義","isH3":true,"content":"<p><a href=\"/ja/docs/Web/API/DataTransfer/dropEffect\" title=\"dropEffect\"><code>dropEffect</code></a> プロパティはドラッグ&amp;ドロップ操作中のユーザーへのフィードバックを管理するのに使います。よくあるのはドラッグ中にどのカーソルをブラウザーが表示するかに影響します。例えば、ユーザーがドロップターゲット上に持ってきたとき、ブラウザーのカーソルは起こる動作の種類を示すことがあります。</p>\n<p>3 通りの効果が発生する可能性があります。</p>\n<ol>\n  <li><strong><code>copy</code></strong> はドラッグしたデータが現在の場所からドロップされる場所にコピーされることを示します。</li>\n  <li><strong><code>move</code></strong> はドラッグデータが現在の場所からドロップされる場所に移動されることを示します。</li>\n  <li><strong><code>link</code></strong> はドラッグデータが元からドロップ先にある種の関連や接続が作成されることを示します。</li>\n</ol>\n<p>ドラッグ操作の間、ある効果はある場所にだけ許可されることを示すために、ドラッグ効果は変更される場合があります。</p>\n<p>下記の例はこのプロパティの使い方を示します。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">dragstart_handler</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ev</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  ev<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span>dropEffect <span class=\"token operator\">=</span> <span class=\"token string\">\"copy\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>詳しくは以下を参照してください。</p>\n<ul>\n  <li><a href=\"/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations#drageffects\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">Drag の効果 (en-US)</a></li>\n</ul>","titleAsText":"ドラッグ効果の定義"}},{"type":"prose","value":{"id":"ドロップゾーンの定義","title":"<em>ドロップゾーン</em>の定義","isH3":true,"content":"<p>既定では、ブラウザーはほとんどの HTML 要素に何かがドロップされたとき、あらゆることが発生するのを防いでいます。この動作を変更して要素を<em>ドロップゾーン</em>や<em>ドロップ可能</em>にするには、要素は<a href=\"/ja/docs/Web/API/HTMLElement/dragover_event\" title=\"ondragover\"><code>ondragover</code></a> と <a href=\"/ja/docs/Web/API/HTMLElement/drop_event\" title=\"ondrop\"><code>ondrop</code></a> イベントハンドラー属性を持たねばなりません。</p>\n<p>以下の例は、この属性の使い方と、各属性の基本的なイベントハンドラーを示しています。</p>\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token script\"><span class=\"token language-javascript\">\n<span class=\"token keyword\">function</span> <span class=\"token function\">dragover_handler</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ev</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n ev<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n ev<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span>dropEffect <span class=\"token operator\">=</span> <span class=\"token string\">\"move\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">drop_handler</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ev</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n ev<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token comment\">// 移動された要素のidを取得して、その要素をtargetのDOMに追加する</span>\n <span class=\"token keyword\">var</span> data <span class=\"token operator\">=</span> ev<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span><span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text/plain\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n ev<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>target<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ondrop</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>drop_handler(event)<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ondragover</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dragover_handler(event)<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Drop Zone<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<p>各ハンドラーが <a href=\"/ja/docs/Web/API/Event/preventDefault\" title=\"preventDefault()\"><code>preventDefault()</code></a> を呼んで、このイベントが (<a href=\"/ja/docs/Web/API/Touch_events\">タッチイベント</a>や<a href=\"/ja/docs/Web/API/Pointer_events\">ポインターイベント</a>などに) 追加で処理されることを防いでいるのに注意してください</p>\n<p>詳しくは、以下を参照してください。</p>\n<ul>\n  <li><a href=\"/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations#droptargets\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">ドロップ先の指定 (en-US)</a></li>\n</ul>","titleAsText":"ドロップゾーンの定義"}},{"type":"prose","value":{"id":"ドロップ効果を扱う","title":"ドロップ<em>効果</em>を扱う","isH3":true,"content":"<p><a href=\"/ja/docs/conflicting/Web/API/HTMLElement/drop_event_21b7ebf04561093fe90276329e9bddff\" title=\"drop\"><code>drop</code></a> イベントのハンドラーでは、アプリケーション固有の方法でドラッグデータを自由に処理できます。</p>\n<p>ふつう、アプリケーションは<a href=\"/ja/docs/Web/API/DataTransfer/getData\" title=\"getData()\"><code>getData()</code></a> メソッドでドラッグ項目を取得して、そのようよ処理します。加えて、アプリケーションのセマンティクスは <a href=\"/ja/docs/Web/API/DataTransfer/dropEffect\" title=\"dropEffect\"><code>dropEffect</code></a> の値や修飾キーの状態により異なります。</p>\n<p>下記の例では、ドラッグデータからソース要素の <code>id</code> を取得し、 <code>id</code> を使ってソース要素をドロップ要素に移動するドロップハンドラのを示しています。</p>\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token script\"><span class=\"token language-javascript\">\n<span class=\"token keyword\">function</span> <span class=\"token function\">dragstart_handler</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ev</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n <span class=\"token comment\">// 対象となる要素の id を DataTransfer オブジェクトに追加する</span>\n ev<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span><span class=\"token function\">setData</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"application/my-app\"</span><span class=\"token punctuation\">,</span> ev<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n ev<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span>dropEffect <span class=\"token operator\">=</span> <span class=\"token string\">\"move\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">dragover_handler</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ev</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n ev<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n ev<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span>dropEffect <span class=\"token operator\">=</span> <span class=\"token string\">\"move\"</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">drop_handler</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ev</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n ev<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token comment\">// 移動された要素の id を取得して、その要素を target の DOM に追加する</span>\n <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> ev<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span><span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"application/my-app\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n ev<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>p1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">draggable</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ondragstart</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dragstart_handler(event)<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>This element is draggable.<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>target<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ondrop</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>drop_handler(event)<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ondragover</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dragover_handler(event)<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Drop Zone<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<p>詳しくは、以下を参照してください。</p>\n<ul>\n  <li><a href=\"/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations#drop\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">ドロップの実行 (en-US)</a></li>\n</ul>","titleAsText":"ドロップ効果を扱う"}},{"type":"prose","value":{"id":"ドラッグの終了","title":"ドラッグの終了","isH3":true,"content":"<p>ドラッグ操作の終わりに、 <a class=\"page-not-created\" title=\"この項目についての文書はまだ書かれていません。書いてみませんか？\"><code>dragend</code></a> イベントが<em>ドラッグ元の</em>要素で発生します。 — ドラッグが開始された対象の要素です。</p>\n<p>このイベントはドラッグの完了とキャンセルのどちらでも発生します。 <a class=\"page-not-created\" title=\"この項目についての文書はまだ書かれていません。書いてみませんか？\"><code>dragend</code></a> イベントハンドラーは <a href=\"/ja/docs/Web/API/DataTransfer/dropEffect\" title=\"dropEffect\"><code>dropEffect</code></a> プロパティの値をチェックしてドラッグ操作が成功したか否かを決定できます。</p>\n<p>ドラッグ操作の終了を扱うことの詳細は、以下を参照してください。</p>\n<ul>\n  <li><a href=\"/ja/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations#dragend\">ドラッグの終了</a></li>\n</ul>"}},{"type":"prose","value":{"id":"相互運用性","title":"相互運用性","isH3":false,"content":"<p><a href=\"/ja/docs/Web/API/DataTransferItem#browser_compatibility\">DataTransferItem インターフェイスのブラウザー互換性テーブル</a>に見られるように、ドラッグ&amp;ドロップの相互接続性はデスクトップブラウザーでは相対的に広いです(サポートの少ない<a href=\"/ja/docs/Web/API/DataTransferItem\"><code>DataTransferItem</code></a> と<a href=\"/ja/docs/Web/API/DataTransferItemList\"><code>DataTransferItemList</code></a> インターフェイスを除いて)。このデータはモバイルブラウザーでのドラッグ&amp;ドロップサポートはとても低いことも示しています。</p>"}},{"type":"prose","value":{"id":"例とデモ","title":"例とデモ","isH3":false,"content":"<ul>\n  <li><a href=\"https://mdn.github.io/dom-examples/drag-and-drop/copy-move-DataTransfer.html\" class=\"external\" rel=\" noopener\">Copying and moving elements with the <code>DataTransfer</code> interface</a></li>\n  <li><a href=\"https://mdn.github.io/dom-examples/drag-and-drop/copy-move-DataTransferItemList.html\" class=\"external\" rel=\" noopener\">Copying and moving elements with the <code>DataTransferListItem</code> interface</a></li>\n  <li>ファイルのドラッグ&amp;ドロップ (Firefox のみ): <a href=\"http://jsfiddle.net/9C2EF/\" class=\"external\" rel=\" noopener\">http://jsfiddle.net/9C2EF/</a></li>\n  <li>ファイルのドラッグ&amp;ドロップ (全ブラウザー): <a href=\"https://jsbin.com/hiqasek/edit?html,js,output\" class=\"external\" rel=\" noopener\">https://jsbin.com/hiqasek/</a></li>\n  <li>Drag and Drop API を使った駐車場プロジェクト: <a href=\"https://park.glitch.me/\" class=\"external\" rel=\" noopener\">https://park.glitch.me/</a> (<a href=\"https://glitch.com/edit/#!/park\" class=\"external\" rel=\" noopener\">ここで</a>編集できます)</li>\n</ul>"}},{"type":"prose","value":{"id":"関連情報","title":"関連情報","isH3":false,"content":"<ul>\n  <li><a href=\"/ja/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations\">ドラッグ操作</a></li>\n  <li><a href=\"/ja/docs/Web/API/HTML_Drag_and_Drop_API/Multiple_items\">複数アイテムのドラッグとドロップ</a></li>\n  <li><a href=\"/ja/docs/Web/API/HTML_Drag_and_Drop_API/Recommended_drag_types\">推奨されるドラッグ型</a></li>\n  <li><a href=\"https://html.spec.whatwg.org/multipage/interaction.html#dnd\" class=\"external\" rel=\" noopener\">HTML5 Living Standard: Drag and Drop</a></li>\n  <li><a href=\"http://caniuse.com/#search=draganddrop\" class=\"external\" rel=\" noopener\">Drag and Drop interoperability data from CanIUse</a></li>\n</ul>"}}],"toc":[{"text":"ドラッグイベント","id":"ドラッグイベント"},{"text":"インターフェイス","id":"インターフェイス"},{"text":"基本","id":"基本"},{"text":"相互運用性","id":"相互運用性"},{"text":"例とデモ","id":"例とデモ"},{"text":"関連情報","id":"関連情報"}],"summary":"HTML ドラッグ & ドロップインターフェイスにより、アプリケーションはブラウザーでドラッグ＆ドロップ機能を使用することができます。ユーザーはマウスでドラッグ可能な要素を選択し、その要素をドロップ可能な要素へドラッグし、マウスボタンを離すことでドロップすることができます。ドラッグ操作の間、ドラッグ可能な要素の半透明の表示がマウスポインターに続きます。","popularity":0.0008,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"HTML Drag and Drop API","locale":"en-US","native":"English (US)"},{"title":"Arrastrar y soltar","locale":"es","native":"Español"},{"title":"Glisser et déposer","locale":"fr","native":"Français"},{"title":"HTML 드래그 앤 드롭 API","locale":"ko","native":"한국어"},{"title":"Arrastar e soltar","locale":"pt-BR","native":"Português (do Brasil)"},{"title":"HTML Drag and Drop API","locale":"ru","native":"Русский"},{"title":"HTML 拖放 API","locale":"zh-CN","native":"中文 (简体)"},{"title":"HTML 拖放 API","locale":"zh-TW","native":"正體中文 (繁體)"}],"source":{"folder":"ja/web/api/html_drag_and_drop_api","github_url":"https://github.com/mdn/translated-content/blob/main/files/ja/web/api/html_drag_and_drop_api/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/ja/docs/Web","title":"開発者向けのウェブ技術"},{"uri":"/ja/docs/Web/API","title":"Web API"},{"uri":"/ja/docs/Web/API/HTML_Drag_and_Drop_API","title":"HTML ドラッグ＆ドロップ API"}],"pageTitle":"HTML ドラッグ＆ドロップ API - Web API | MDN","noIndexing":false}}