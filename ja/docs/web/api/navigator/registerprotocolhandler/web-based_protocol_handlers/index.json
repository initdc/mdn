{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"ウェブベースのプロトコルハンドラー","mdn_url":"/ja/docs/Web/API/Navigator/registerProtocolHandler/Web-based_protocol_handlers","locale":"ja","native":"日本語","sidebarHTML":"","body":[{"type":"prose","value":{"id":"背景","title":"背景","isH3":false,"content":"<p>ウェブページで <code>http</code> ではないプロトコルを使用したリソースへのリンクを見つけることがよくあります。例えば、 <code>mailto:</code> プロトコルです。</p>\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>mailto:webmaster@example.com<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>ウェブマスター<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<p>ウェブ制作者は、ユーザーがウェブページから直接 E メールを送るのに便利な方法を提供したいときに、 <code>mailto:</code> リンクを用いることができます。リンクがアクティブ化されたとき、ブラウザーは、E メールを扱うための標準のデスクトップアプリケーションを起動させるはずです。これは、<em>デスクトップベース</em> プロトコルハンドラーと考えることができます。</p>\n<p>ウェブベースプロトコルハンドラーは、ウェブベースアプリーケーションもその処理に追加することを可能にします。これはアプリケーションをウェブに移行させるうえでますます重要になってきています。実際、 <code>mailto</code> リンクを処理できる可能性がある多くのウェブベースの E メールを扱うアプリケーションが存在しています。</p>"}},{"type":"prose","value":{"id":"登録","title":"登録","isH3":false,"content":"<p>ウェブアプリケーションをプロトコルハンドラーとして設定するのは、難しい処理ではありません。基本的に、ウェブアプリケーションは自身を指定したプロトコルのための可能なハンドラーとしてブラウザーに登録するために <a href=\"/ja/docs/Web/API/Navigator/registerProtocolHandler\"><code>registerProtocolHandler()</code></a> を使用します。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>navigator<span class=\"token punctuation\">.</span><span class=\"token function\">registerProtocolHandler</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"web+burger\"</span><span class=\"token punctuation\">,</span>\n                                  <span class=\"token string\">\"http://www.google.co.uk/?uri=%s\"</span><span class=\"token punctuation\">,</span>\n                                  <span class=\"token string\">\"Burger handler\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>ここでの引数は次の通りです。</p>\n<ul>\n  <li>プロトコル。</li>\n  <li>URL のテンプレート。 \"%s\" は、リンクの <code>href</code> 属性の値に置換され、 GET が置換後の URL に対して実行されます。</li>\n  <li>プロトコルハンドラーのためのユーザーにわかりやすい名前。</li>\n</ul>\n<p>ブラウザーがこのコードを実行するとき、ユーザーにプロンプトを表示し、そのプロトコルのためのハンドラーとしてそのウェブアプリケーションを登録して良いかどうかの許可を求めるはずです。 Firefox は、情報バー領域に以下のプロンプトを表示します。</p>\n<p>\n  <img src=\"/en-US/docs/Web/API/Navigator/registerProtocolHandler/Web-based_protocol_handlers/protocolregister.png\" alt=\"\" width=\"700\" height=\"401\" loading=\"lazy\">\n</p>\n<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>Note:</strong> URL テンプレートが提供されるとき、登録する URL は登録が行われようとするウェブページと同じドメインである<strong>必要があります</strong>。異なるドメインであった場合は、登録は失敗します。 例えば <code>http://example.com/homepage.html</code> では <code>http://example.com/handle_mailto/%s</code> はプロトコルハンドラーとして登録可能ですが、 <code>http://example.org/handle_mailto/%s</code> はプロトコルハンドラーとして登録することはできません。</p>\n</div>\n<p>同じプロトコルハンドラーを 2 回以上登録すると、そのプロトコルハンドラーが既に登録済みであることを示す別のポップアップが表示されます。従って、プロトコルハンドラーの登録を呼び出すのを防ぐために、以下のように既に登録済みであるかどうかを確認するのが良いでしょう。</p>"}},{"type":"prose","value":{"id":"例","title":"例","isH3":true,"content":"<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token constant\">DOCTYPE</span> <span class=\"token constant\">HTML</span> <span class=\"token constant\">PUBLIC</span> <span class=\"token string\">\"-//W3C//DTD HTML 4.01//EN\"</span><span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span>html lang<span class=\"token operator\">=</span><span class=\"token string\">\"en\"</span><span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span>head<span class=\"token operator\">&gt;</span>\n  <span class=\"token operator\">&lt;</span>title<span class=\"token operator\">&gt;</span>ウェブプロトコルハンドラーサンプル <span class=\"token operator\">-</span> 登録<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>title<span class=\"token operator\">&gt;</span>\n  <span class=\"token operator\">&lt;</span>script type<span class=\"token operator\">=</span><span class=\"token string\">\"text/javascript\"</span><span class=\"token operator\">&gt;</span>\n    navigator<span class=\"token punctuation\">.</span><span class=\"token function\">registerProtocolHandler</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"web+burger\"</span><span class=\"token punctuation\">,</span>\n                                  <span class=\"token string\">\"http://www.google.co.uk/?uri=%s\"</span><span class=\"token punctuation\">,</span>\n                                  <span class=\"token string\">\"Burger handler\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>head<span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span>body<span class=\"token operator\">&gt;</span>\n  <span class=\"token operator\">&lt;</span>h1<span class=\"token operator\">&gt;</span>ウェブプロトコルハンドラーサンプル<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h1<span class=\"token operator\">&gt;</span>\n  <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">&gt;</span>このウェブページは、 <span class=\"token operator\">&lt;</span>code<span class=\"token operator\">&gt;</span>web<span class=\"token operator\">+</span>burger<span class=\"token operator\">:</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>code<span class=\"token operator\">&gt;</span> プロトコルのためのウェブプロトコルハンドラーをインストールします。<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>body<span class=\"token operator\">&gt;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>html<span class=\"token operator\">&gt;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"有効化","title":"有効化","isH3":false,"content":"<p>登録すると、ユーザーが登録されたプロトコルを用いたリンクを有効化したときに、ブラウザーはウェブアプリケーションが登録されたときに提供された URL へアクションを送るようになります。Firefox は、既定では、アクションを実行する前にユーザーにプロンプトを表示します。</p>"}},{"type":"prose","value":{"id":"例_2","title":"例","isH3":true,"content":"<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">HTML</span> <span class=\"token name\">PUBLIC</span> <span class=\"token string\">\"-//W3C//DTD HTML 4.01//EN\"</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>en<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">&gt;</span></span>ウェブプロトコルハンドラーサンプル - テスト<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span>前に<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>web+burger:cheeseburger<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>これ<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">&gt;</span></span>を見たことがありますか？<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"処理","title":"処理","isH3":false,"content":"<p>次の段階は、アクションを処理することです。ブラウザーはアクティブ化されたリンクから <code>href</code> 属性の値を展開し、ハンドラー登録時に提供された URL テンプレートと結合し、その URL 上で HTTP GET を行います。ですから、上記の例では、ブラウザーは、次の URL 上で GET を行います。</p>\n<pre class=\"notranslate\">http://www.google.co.uk/?uri=web+burger:cheeseburger\n</pre>\n<p>サーバー側コードは、クエリー文字列の引数を展開し、要求されたアクションを行います。</p>\n<div class=\"notecard note\" id=\"sect2\">\n  <p><strong>Note:</strong> サーバー側コードには <code>href</code> 属性の値の<strong>全体</strong>が渡されます。つまり、サーバー側コードは、そのデータからプロトコルを解釈しなければならないということです。</p>\n</div>"}},{"type":"prose","value":{"id":"例_3","title":"例","isH3":true,"content":"<div class=\"code-example\"><pre class=\"brush: php notranslate\"><code><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token variable\">$value</span> <span class=\"token operator\">=</span> <span class=\"token string double-quoted-string\">\"\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> <span class=\"token keyword\">isset</span> <span class=\"token punctuation\">(</span> <span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"value\"</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token variable\">$value</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"value\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token delimiter important\">?&gt;</span></span>\n\n<span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">HTML</span> <span class=\"token name\">PUBLIC</span> <span class=\"token string\">\"-//W3C//DTD HTML 4.01//EN\"</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>en<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">&gt;</span></span>ウェブプロトコルハンドラーサンプル<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span>ウェブプロトコルハンドラーサンプル - ハンドラー<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span>このウェブページは、 <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>code</span><span class=\"token punctuation\">&gt;</span></span>web+burger:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>code</span><span class=\"token punctuation\">&gt;</span></span> プロトコルアクションを処理したときに呼び出されます。送られたデータは次の通りです。<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>textarea</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span><span class=\"token punctuation\">(</span><span class=\"token function\">htmlspecialchars</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$value</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">ENT_QUOTES</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'UTF-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>textarea</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"参考文献","title":"参考文献","isH3":false,"content":"<ul>\n  <li><a href=\"https://www.w3.org/TR/2011/WD-html5-20110525/timers.html#custom-handlers\" class=\"external\" rel=\" noopener\">http://www.w3.org/TR/2011/WD-html5-20110525/timers.html#custom-handlers</a></li>\n</ul>"}},{"type":"prose","value":{"id":"関連情報","title":"関連情報","isH3":false,"content":"<ul>\n  <li><code>nsIProtocolHandler</code> (XUL のみ)</li>\n  <li><a href=\"https://blog.mozilla.org/webdev/2010/07/26/registerprotocolhandler-enhancing-the-federated-web/\" class=\"external\" rel=\" noopener\">RegisterProtocolHandler Enhancing the Federated Web</a> at Mozilla Webdev</li>\n  <li><a href=\"https://web.dev/registering-a-custom-protocol-handler/\" class=\"external\" rel=\" noopener\">Register a custom protocolHandler</a> at web.dev.</li>\n</ul>"}}],"toc":[{"text":"背景","id":"背景"},{"text":"登録","id":"登録"},{"text":"有効化","id":"有効化"},{"text":"処理","id":"処理"},{"text":"参考文献","id":"参考文献"},{"text":"関連情報","id":"関連情報"}],"summary":"ウェブページで http ではないプロトコルを使用したリソースへのリンクを見つけることがよくあります。例えば、 mailto: プロトコルです。","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Web-based protocol handlers","locale":"en-US","native":"English (US)"},{"title":"Controladores de protocolos basados en web","locale":"es","native":"Español"},{"title":"Gestionnaires de protocoles web","locale":"fr","native":"Français"},{"title":"Web-based protocol handlers","locale":"zh-CN","native":"中文 (简体)"},{"title":"Firefox 3 Web-based protocol handler","locale":"zh-TW","native":"正體中文 (繁體)"}],"source":{"folder":"ja/web/api/navigator/registerprotocolhandler/web-based_protocol_handlers","github_url":"https://github.com/mdn/translated-content/blob/main/files/ja/web/api/navigator/registerprotocolhandler/web-based_protocol_handlers/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/ja/docs/Web","title":"開発者向けのウェブ技術"},{"uri":"/ja/docs/Web/API","title":"Web API"},{"uri":"/ja/docs/Web/API/Navigator","title":"Navigator"},{"uri":"/ja/docs/Web/API/Navigator/registerProtocolHandler","title":"Navigator.registerProtocolHandler()"},{"uri":"/ja/docs/Web/API/Navigator/registerProtocolHandler/Web-based_protocol_handlers","title":"ウェブベースのプロトコルハンドラー"}],"pageTitle":"ウェブベースのプロトコルハンドラー - Web API | MDN","noIndexing":false}}