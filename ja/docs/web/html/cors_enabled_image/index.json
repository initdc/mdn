{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"画像とキャンバスをオリジン間で利用できるようにする","mdn_url":"/ja/docs/Web/HTML/CORS_enabled_image","locale":"ja","native":"日本語","sidebarHTML":"\n<ol><li><a href=\"/ja/docs/Web/HTML/Date_and_time_formats\">HTML で使われる日付や時刻の形式</a></li><li><a href=\"/ja/docs/Web/HTML/Reference\">HTML リファレンス</a></li><li><a href=\"/ja/docs/Web/HTML/Attributes\">HTML 属性リファレンス</a><ol><li><a href=\"/ja/docs/Web/HTML/Attributes\">HTML 属性リファレンス</a></li><li><a href=\"/ja/docs/Web/HTML/Attributes/accept\">HTML 属性: accept</a></li><li><a href=\"/ja/docs/Web/HTML/Attributes/autocomplete\">HTML 属性: autocomplete</a></li><li><a href=\"/ja/docs/Web/HTML/Attributes/capture\">HTML 属性: capture</a></li><li><a href=\"/ja/docs/Web/HTML/Attributes/crossorigin\">HTML 属性: crossorigin</a></li><li><a href=\"/ja/docs/Web/HTML/Attributes/disabled\">HTML 属性: disabled</a></li><li><a href=\"/ja/docs/Web/HTML/Attributes/max\">HTML 属性: max</a></li><li><a href=\"/ja/docs/Web/HTML/Attributes/maxlength\">HTML 属性: maxlength</a></li><li><a href=\"/ja/docs/Web/HTML/Attributes/min\">HTML 属性: min</a></li><li><a href=\"/ja/docs/Web/HTML/Attributes/minlength\">HTML 属性: minlength</a></li><li><a href=\"/ja/docs/Web/HTML/Attributes/multiple\">HTML 属性: multiple</a></li><li><a href=\"/ja/docs/Web/HTML/Attributes/pattern\">HTML attribute: pattern</a></li><li><a href=\"/ja/docs/Web/HTML/Attributes/readonly\">HTML 属性: readonly</a></li><li><a href=\"/ja/docs/Web/HTML/Attributes/rel\">HTML attribute: rel</a></li><li><a href=\"/ja/docs/Web/HTML/Attributes/required\">HTML 属性: required</a></li><li><a href=\"/ja/docs/Web/HTML/Attributes/size\">HTML 属性: size</a></li><li><a href=\"/ja/docs/Web/HTML/Attributes/step\">HTML attribute: step</a></li></ol></li><li><a href=\"/ja/docs/Web/HTML/Element\">HTML 要素リファレンス</a><ol><li><a href=\"/ja/docs/Web/HTML/Element\">HTML 要素リファレンス</a></li><li><a href=\"/ja/docs/Web/HTML/Element/a\">&lt;a&gt;: アンカー要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/abbr\">&lt;abbr&gt;: 略語要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/acronym\">&lt;acronym&gt;</a></li><li><a href=\"/ja/docs/Web/HTML/Element/address\">&lt;address&gt;: 連絡先要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/applet\">&lt;applet&gt;: 埋め込み Java アプレット要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/area\">&lt;area&gt;</a></li><li><a href=\"/ja/docs/Web/HTML/Element/article\">&lt;article&gt;: 記事コンテンツ要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/aside\">&lt;aside&gt;: 余談要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/audio\">&lt;audio&gt;: 埋め込み音声要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/b\">&lt;b&gt;: 注目付け要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/base\">&lt;base&gt;: 文書の基底 URL 要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/bdi\">&lt;bdi&gt;: 書字方向分離要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/bdo\">&lt;bdo&gt;: 双方向文字列上書き要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/bgsound\">&lt;bgsound&gt;: 背景音要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/big\">&lt;big&gt;: 大きめの文字列要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/blink\">&lt;blink&gt;: 点滅文字列要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/blockquote\">&lt;blockquote&gt;: ブロック引用要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/body\">&lt;body&gt;: 文書の本文要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/br\">&lt;br&gt;: 改行要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/button\">&lt;button&gt;: ボタン要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/canvas\">&lt;canvas&gt;: グラフィックキャンバス要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/caption\">&lt;caption&gt;: 表キャプション要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/center\">&lt;center&gt;: 文字列の中央揃え要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/cite\">&lt;cite&gt;: 引用元要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/code\">&lt;code&gt;: 行内コード要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/col\">&lt;col&gt;</a></li><li><a href=\"/ja/docs/Web/HTML/Element/colgroup\">&lt;colgroup&gt;</a></li><li><a href=\"/ja/docs/Web/HTML/Element/content\">&lt;content&gt;: シャドウ DOM のコンテンツのプレイスホルダー要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/data\">&lt;data&gt;</a></li><li><a href=\"/ja/docs/Web/HTML/Element/datalist\">&lt;datalist&gt;</a></li><li><a href=\"/ja/docs/Web/HTML/Element/dd\">&lt;dd&gt;: 詳細説明要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/del\">&lt;del&gt;: 削除済み文字列要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/details\">&lt;details&gt;: 詳細折りたたみ要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/dfn\">&lt;dfn&gt;: 定義要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/dialog\">&lt;dialog&gt;: ダイアログ要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/dir\">&lt;dir&gt;: ディレクトリー要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/div\">&lt;div&gt;: コンテンツ区分要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/dl\">&lt;dl&gt;: 説明リスト要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/dt\">&lt;dt&gt;: 説明用語要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/em\">&lt;em&gt;: 強調要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/embed\">&lt;embed&gt;: 埋め込み外部コンテンツ要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/fieldset\">&lt;fieldset&gt;: フィールドセット要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/figcaption\">&lt;figcaption&gt;: 図キャプション要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/figure\">&lt;figure&gt;: キャプションが付けられる図要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/font\">&lt;font&gt;</a></li><li><a href=\"/ja/docs/Web/HTML/Element/footer\">&lt;footer&gt;</a></li><li><a href=\"/ja/docs/Web/HTML/Element/form\">&lt;form&gt;: フォーム要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/frame\">&lt;frame&gt;</a></li><li><a href=\"/ja/docs/Web/HTML/Element/frameset\">&lt;frameset&gt;</a></li><li><a href=\"/ja/docs/Web/HTML/Element/head\">&lt;head&gt;: 文書メタデータ (ヘッダー) 要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/header\">&lt;header&gt;</a></li><li><a href=\"/ja/docs/Web/HTML/Element/Heading_Elements\">&lt;h1&gt;–&lt;h6&gt;: HTML の見出し要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/hgroup\">&lt;hgroup&gt;</a></li><li><a href=\"/ja/docs/Web/HTML/Element/hr\">&lt;hr&gt;: 主題区切り (水平線) 要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/html\">&lt;html&gt;: HTML 文書 / ルート要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/i\">&lt;i&gt;: 慣用的なテキスト要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/iframe\">&lt;iframe&gt;: インラインフレーム要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/image\">&lt;image&gt;: 画像要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/img\">&lt;img&gt;: 画像埋め込み要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/input\">&lt;input&gt;: 入力欄 (フォーム入力) 要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/ins\">&lt;ins&gt;</a></li><li><a href=\"/ja/docs/Web/HTML/Element/kbd\">&lt;kbd&gt;: キーボード入力要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/keygen\">&lt;keygen&gt;</a></li><li><a href=\"/ja/docs/Web/HTML/Element/label\">&lt;label&gt;: 入力欄ラベル要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/legend\">&lt;legend&gt;</a></li><li><a href=\"/ja/docs/Web/HTML/Element/li\">&lt;li&gt;</a></li><li><a href=\"/ja/docs/Web/HTML/Element/link\">&lt;link&gt;: 外部リソースへのリンク要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/main\">&lt;main&gt;</a></li><li><a href=\"/ja/docs/Web/HTML/Element/map\">&lt;map&gt;: イメージマップ要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/mark\">&lt;mark&gt;: 文字列マーク要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/marquee\">&lt;marquee&gt;: マーキー要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/menu\">&lt;menu&gt;</a></li><li><a href=\"/ja/docs/Web/HTML/Element/menuitem\">&lt;menuitem&gt;</a></li><li><a href=\"/ja/docs/Web/HTML/Element/meta\">&lt;meta&gt;: メタデータ要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/meter\">&lt;meter&gt;: HTML メーター要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/nav\">&lt;nav&gt;: ナビゲーションセクション要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/nobr\">&lt;nobr&gt;: 無改行文字列要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/noembed\">&lt;noembed&gt;: 埋め込みフォールバック要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/noframes\">&lt;noframes&gt;: フレームフォールバック要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/noscript\">&lt;noscript&gt;</a></li><li><a href=\"/ja/docs/Web/HTML/Element/object\">&lt;object&gt;: 外部オブジェクト要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/ol\">&lt;ol&gt;: 順序付きリスト要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/optgroup\">&lt;optgroup&gt;: 選択肢グループ要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/option\">&lt;option&gt;: HTML 選択肢要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/output\">&lt;output&gt;: 出力要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/p\">&lt;p&gt;: 段落要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/param\">&lt;param&gt;: オブジェクト引数要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/picture\">&lt;picture&gt;: 画像要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/plaintext\">&lt;plaintext&gt;: プレーンテキスト要素 (非推奨)</a></li><li><a href=\"/ja/docs/Web/HTML/Element/portal\">&lt;portal&gt;: ポータル要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/pre\">&lt;pre&gt;: 整形済みテキスト要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/progress\">&lt;progress&gt;: 進捗表示要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/q\">&lt;q&gt;: 行内引用要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/rb\">&lt;rb&gt;: ルビベース要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/rp\">&lt;rp&gt;: ルビのフォールバック用括弧要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/rt\">&lt;rt&gt;: ルビ文字列要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/rtc\">&lt;rtc&gt;: ルビ文字列コンテナー要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/ruby\">&lt;ruby&gt;</a></li><li><a href=\"/ja/docs/Web/HTML/Element/s\">&lt;s&gt;</a></li><li><a href=\"/ja/docs/Web/HTML/Element/samp\">&lt;samp&gt;: サンプル出力要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/script\">&lt;script&gt;: スクリプト要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/section\">&lt;section&gt;: 汎用セクション要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/select\">&lt;select&gt;: HTML 選択要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/Shadow\">&lt;shadow&gt;: 廃止されたシャドウルート要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/slot\">&lt;slot&gt;: ウェブコンポーネントのスロット要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/small\">&lt;small&gt;: 附随コメント要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/source\">&lt;source&gt;: メディアまたは画像のソース要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/spacer\">&lt;spacer&gt;</a></li><li><a href=\"/ja/docs/Web/HTML/Element/span\">&lt;span&gt;</a></li><li><a href=\"/ja/docs/Web/HTML/Element/strike\">&lt;strike&gt;</a></li><li><a href=\"/ja/docs/Web/HTML/Element/strong\">&lt;strong&gt;: 強い重要性要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/style\">&lt;style&gt;: スタイル情報要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/sub\">&lt;sub&gt;: 下付き文字要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/summary\">&lt;summary&gt;: 概要明示要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/sup\">&lt;sup&gt;: 上付き文字要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/table\">&lt;table&gt;: 表要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/tbody\">&lt;tbody&gt;: テーブル本体要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/td\">&lt;td&gt;: 表データセル要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/template\">&lt;template&gt;: コンテンツテンプレート要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/textarea\">&lt;textarea&gt;</a></li><li><a href=\"/ja/docs/Web/HTML/Element/tfoot\">&lt;tfoot&gt;: 表フッター要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/th\">&lt;th&gt;: 表見出し要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/thead\">&lt;thead&gt;: 表ヘッダー要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/time\">&lt;time&gt;</a></li><li><a href=\"/ja/docs/Web/HTML/Element/title\">&lt;title&gt;: 文書題名要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/tr\">&lt;tr&gt;: 表の行要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/track\">&lt;track&gt;: 埋め込みテキストトラック要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/tt\">&lt;tt&gt;: テレタイプテキスト要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/u\">&lt;u&gt;: 非言語的注釈 (下線) 要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/ul\">&lt;ul&gt;: 順序なしリスト要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/var\">&lt;var&gt;: 変数要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/video\">&lt;video&gt;: 動画埋め込み要素</a></li><li><a href=\"/ja/docs/Web/HTML/Element/wbr\">&lt;wbr&gt;</a></li><li><a href=\"/ja/docs/Web/HTML/Element/xmp\">&lt;xmp&gt;</a></li></ol></li><li><a href=\"/ja/docs/Web/HTML/Inline_elements\">インライン要素</a></li><li><a href=\"/ja/docs/Web/HTML/Global_attributes\">グローバル属性</a><ol><li><a href=\"/ja/docs/Web/HTML/Global_attributes\">グローバル属性</a></li><li><a href=\"/ja/docs/Web/HTML/Global_attributes/accesskey\">accesskey</a></li><li><a href=\"/ja/docs/Web/HTML/Global_attributes/autocapitalize\">autocapitalize</a></li><li><a href=\"/ja/docs/Web/HTML/Global_attributes/class\">class</a></li><li><a href=\"/ja/docs/Web/HTML/Global_attributes/contenteditable\">contenteditable</a></li><li><a href=\"/ja/docs/Web/HTML/Global_attributes/contextmenu\">contextmenu</a></li><li><a href=\"/ja/docs/Web/HTML/Global_attributes/data-*\">data-*</a></li><li><a href=\"/ja/docs/Web/HTML/Global_attributes/dir\">dir</a></li><li><a href=\"/ja/docs/Web/HTML/Global_attributes/draggable\">draggable</a></li><li><a href=\"/ja/docs/Web/HTML/Global_attributes/hidden\">hidden</a></li><li><a href=\"/ja/docs/Web/HTML/Global_attributes/id\">id</a></li><li><a href=\"/ja/docs/Web/HTML/Global_attributes/inputmode\">inputmode</a></li><li><a href=\"/ja/docs/Web/HTML/Global_attributes/is\">is</a></li><li><a href=\"/ja/docs/Web/HTML/Global_attributes/itemid\">itemid</a></li><li><a href=\"/ja/docs/Web/HTML/Global_attributes/itemprop\">itemprop</a></li><li><a href=\"/ja/docs/Web/HTML/Global_attributes/itemref\">itemref</a></li><li><a href=\"/ja/docs/Web/HTML/Global_attributes/itemscope\">itemscope</a></li><li><a href=\"/ja/docs/Web/HTML/Global_attributes/itemtype\">itemtype</a></li><li><a href=\"/ja/docs/Web/HTML/Global_attributes/lang\">lang</a></li><li><a href=\"/ja/docs/Web/HTML/Global_attributes/part\">part</a></li><li><a href=\"/ja/docs/Web/HTML/Global_attributes/slot\">slot</a></li><li><a href=\"/ja/docs/Web/HTML/Global_attributes/spellcheck\">spellcheck</a></li><li><a href=\"/ja/docs/Web/HTML/Global_attributes/style\">style</a></li><li><a href=\"/ja/docs/Web/HTML/Global_attributes/tabindex\">tabindex</a></li><li><a href=\"/ja/docs/Web/HTML/Global_attributes/title\">title</a></li><li><a href=\"/ja/docs/Web/HTML/Global_attributes/translate\">translate</a></li><li><a href=\"/ja/docs/Web/HTML/Global_attributes/x-ms-format-detection\">x-ms-format-detection</a></li></ol></li><li><a href=\"/ja/docs/Web/HTML/Block-level_elements\">ブロックレベル要素</a></li><li><a href=\"/ja/docs/Web/HTML/Microdata\">マイクロデータ</a></li><li><a href=\"/ja/docs/Web/HTML/microformats\">マイクロフォーマット</a></li><li><a href=\"/ja/docs/Web/HTML/Link_types\">リンク種別</a><ol><li><a href=\"/ja/docs/Web/HTML/Link_types\">リンク種別</a></li><li><a href=\"/ja/docs/Web/HTML/Link_types/dns-prefetch\">リンク種別: dns-prefetch</a></li><li><a href=\"/ja/docs/Web/HTML/Link_types/manifest\">リンク種別: manifest</a></li><li><a href=\"/ja/docs/Web/HTML/Link_types/modulepreload\">リンク種別: modulepreload</a></li><li><a href=\"/ja/docs/Web/HTML/Link_types/noopener\">リンク種別: noopener</a></li><li><a href=\"/ja/docs/Web/HTML/Link_types/noreferrer\">リンク種別: noreferrer</a></li><li><a href=\"/ja/docs/Web/HTML/Link_types/preconnect\">リンク種別: preconnect</a></li><li><a href=\"/ja/docs/Web/HTML/Link_types/prefetch\">リンク種別: prefetch</a></li><li><a href=\"/ja/docs/Web/HTML/Link_types/preload\">リンク種別: preload</a></li><li><a href=\"/ja/docs/Web/HTML/Link_types/prerender\">リンク種別: prerender</a></li></ol></li><li><a href=\"/ja/docs/Web/HTML/Quirks_Mode_and_Standards_Mode\">後方互換モードと標準準拠モード</a></li><li><a href=\"/ja/docs/Web/HTML/CORS_enabled_image\">画像とキャンバスをオリジン間で利用できるようにする</a></li></ol>\n","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>HTML では画像に <a href=\"/ja/docs/Web/HTML/Element/img#attr-crossorigin\"><code>crossorigin</code></a> 属性を提供し、適切な <a href=\"/ja/docs/Glossary/CORS\">CORS</a> ヘッダーと組み合わせることで、 <a href=\"/ja/docs/Web/HTML/Element/img\"><code>&lt;img&gt;</code></a> 要素で定義されている他のオリジンから読み込まれた画像を、 <a href=\"/ja/docs/Web/HTML/Element/canvas\"><code>&lt;canvas&gt;</code></a> の中で現在のオリジンから読み込まれた画像であるかのように扱うことができます。</p>\n<p><code>crossorigin</code> 属性の使い方については <a href=\"/ja/docs/Web/HTML/Attributes/crossorigin\">CORS 設定属性</a>をご覧ください。</p>"}},{"type":"prose","value":{"id":"セキュリティと汚染されたキャンバス","title":"セキュリティと汚染されたキャンバス","isH3":false,"content":"<p>キャンバスのビットマップ内のピクセルは様々なソース、例えば他のホストから受け取った画像や動画などから来ることもありますが、セキュリティの問題が発生することが避けられません。</p>\n<p>CORS による許可なしに他のオリジンから読み込んだ何らかのデータをキャンバスに描画すると、キャンバスは<strong>汚染</strong> (taint) されてしまいます。汚染されたキャンバスは安全とみなされなくなり、そのキャンバスから画像データを取得しようとすると、例外が発生するでしょう。</p>\n<p>外部コンテンツの元が HTML の <a href=\"/ja/docs/Web/HTML/Element/img\"><code>&lt;img&gt;</code></a> または SVG の <a href=\"/ja/docs/Web/SVG/Element/svg\"><code>&lt;svg&gt;</code></a> 要素であった場合、キャンバスの内容を取得しようとすることは許可されていません。</p>\n<p><a href=\"/ja/docs/Web/API/HTMLCanvasElement\"><code>HTMLCanvasElement</code></a> または <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/ImageBitmap\"><code>ImageBitMap</code> <small>(en-US)</small></a> のどちらかとして取得した、元が同一オリジン規則に合わない画像から取得した外部のコンテンツは、キャンバスの内容を読み取ろうとするとブロックされます。</p>\n<p>汚染されたキャンバスで以下の呼び出しを行うと、エラーが発生します。</p>\n<ul>\n  <li>キャンバスのコンテキストに対する <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/CanvasRenderingContext2D/getImageData\"><code>getImageData()</code> <small>(en-US)</small></a> の呼び出し</li>\n  <li><a href=\"/ja/docs/Web/HTML/Element/canvas\"><code>&lt;canvas&gt;</code></a> 要素自身に対する <a href=\"/ja/docs/Web/API/HTMLCanvasElement/toBlob\" title=\"toBlob()\"><code>toBlob()</code></a> の呼び出し</li>\n  <li>キャンバスに対する <a href=\"/ja/docs/Web/API/HTMLCanvasElement/toDataURL\" title=\"toDataURL()\"><code>toDataURL()</code></a> の呼び出し</li>\n</ul>\n<p>キャンバスが汚染されていた場合にこれらの何れかを行うと、 <code>SecurityError</code> が発生します。これによって、外部のウェブサイトが許可なしに情報を引き出すために、画像を使用して個人的なデータを暴露することからユーザーを守ります。</p>"}},{"type":"prose","value":{"id":"異なるオリジンからの画像の保存","title":"異なるオリジンからの画像の保存","isH3":false,"content":"<p>この例では、外部のオリジンから画像を受け取り、ローカルストレージに保存することを許可します。これを実装するには、コードを書くだけでなくそのウェブサイトのサーバーを構成する必要があります。</p>"}},{"type":"prose","value":{"id":"ウェブサーバーの構成","title":"ウェブサーバーの構成","isH3":true,"content":"<p>最初に必要なものは、画像をホスティングし、画像ファイルに対するオリジン間のアクセスを許可するために、 <a href=\"/ja/docs/Web/HTTP/Headers/Access-Control-Allow-Origin\"><code>Access-Control-Allow-Origin</code></a> ヘッダーが構成されたサーバーが必要です。</p>\n<p><a href=\"https://httpd.apache.org/\" class=\"external\" rel=\" noopener\">Apache</a> を使用してサイトを提供してみましょう。 HTML5 Boilerplate の <a href=\"https://github.com/h5bp/server-configs-apache/blob/master/h5bp/cross-origin/images.conf\" class=\"external\" rel=\" noopener\">CORS 画像のための Apache サーバー構成ファイル</a>を考えてみましょう。</p>\n<div class=\"code-example\"><pre class=\"brush: xml notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>IfModule</span> <span class=\"token attr-name\">mod_setenvif.c</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>IfModule</span> <span class=\"token attr-name\">mod_headers.c</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>FilesMatch</span> <span class=\"token attr-name\">\"\\.(bmp|cur|gif|ico|jpe?g|png|svgz?|webp)$\"</span><span class=\"token punctuation\">&gt;</span></span>\n      SetEnvIf Origin \":\" IS_CORS\n      Header set Access-Control-Allow-Origin \"*\" env=IS_CORS\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>FilesMatch</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>IfModule</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>IfModule</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<p>つまり、この構成はサーバーにグラフィックのファイル (拡張子が \".bmp\", \".cur\", \".gif\", \".ico\", \".jpg\", \".jpeg\", \".png\", \".svg\", \".svgz\", \".webp\" であるもの) を、インターネットのどこからでもオリジン間のアクセスができるようにします。</p>"}},{"type":"prose","value":{"id":"保存機能の実装","title":"保存機能の実装","isH3":true,"content":"<p>サーバーをオリジン間の画像の取得ができるように構成したので、画像がコードを実行しているところと同じドメインから提供されたものであるかのように、ユーザーが画像を<a href=\"/ja/docs/Web/API/Web_Storage_API\">ローカルストレージ</a>に保存することができるようにするコードを書くことができます。</p>\n<p>鍵となるのは、 <a href=\"/ja/docs/Web/API/HTMLImageElement/crossOrigin\" title=\"crossOrigin\"><code>crossOrigin</code></a> を画像が読み込まれる <a href=\"/ja/docs/Web/API/HTMLImageElement\"><code>HTMLImageElement</code></a> に設定することで、 <a href=\"/ja/docs/Web/HTML/Global_attributes#attr-crossorigin\"><code>crossorigin</code></a> 属性を使用することです。これでブラウザーに画像データをダウンロードしようとするときにオリジン間のリクエストを命じます。</p>\n<h4 id=\"ダウンロードの開始\">ダウンロードの開始</h4>\n<p>ダウンロードを始める (つまり、ユーザーが「ダウンロード」ボタンをクリックした時の) コードは次にようになります。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">startDownload</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> imageURL <span class=\"token operator\">=</span> <span class=\"token string\">\"https://cdn.glitch.com/4c9ebeb9-8b9a-4adc-ad0a-238d9ae00bb5%2Fmdn_logo-only_color.svg?1535749917189\"</span><span class=\"token punctuation\">;</span>\n\n  downloadedImg <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Image</span><span class=\"token punctuation\">;</span>\n  downloadedImg<span class=\"token punctuation\">.</span>crossOrigin <span class=\"token operator\">=</span> <span class=\"token string\">\"Anonymous\"</span><span class=\"token punctuation\">;</span>\n  downloadedImg<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"load\"</span><span class=\"token punctuation\">,</span> imageReceived<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  downloadedImg<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> imageURL<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>ここではハードコーディングされた URL (<code>imageURL</code>) を使用していますが、どこからでも持ってくるのは簡単でしょう。画像のダウンロードを始めるために、 <a href=\"/ja/docs/Web/API/HTMLImageElement/Image\" title=\"Image()\"><code>Image()</code></a> コンストラクターを使用することで新しい <a href=\"/ja/docs/Web/API/HTMLImageElement\"><code>HTMLImageElement</code></a> を生成します。それから画像は <code>crossOrigin</code> 属性を <code>\"Anonymous\"</code> (つまり、認証のないオリジン間の画像のダウンロード) に設定することで、オリジン間のダウンロードができるように構成します。 image 要素で <code><a href=\"/ja/docs/Web/API/Window/load_event\" title=\"/ja/docs/Web/Reference/Events/load\">load</a></code> イベントが発火した場合、つまり画像データが受信された場合のイベントリスナーを追加します。</p>\n<p>最後に、画像の <a href=\"/ja/docs/Web/API/HTMLImageElement/src\" title=\"src\"><code>src</code></a> 属性をダウンロードする画像に設定します。これがダウンロードを始める引き金になります。</p>\n<h4 id=\"画像の受信と保存\">画像の受信と保存</h4>\n<p>新規の画像のダウンロードを扱うコードは、 <code>imageReceived()</code> メソッドに見られます。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">imageReceived</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> canvas <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"canvas\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> context <span class=\"token operator\">=</span> canvas<span class=\"token punctuation\">.</span><span class=\"token function\">getContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"2d\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  canvas<span class=\"token punctuation\">.</span>width <span class=\"token operator\">=</span> downloadedImg<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">;</span>\n  canvas<span class=\"token punctuation\">.</span>height <span class=\"token operator\">=</span> downloadedImg<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">;</span>\n\n  context<span class=\"token punctuation\">.</span><span class=\"token function\">drawImage</span><span class=\"token punctuation\">(</span>downloadedImg<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  imageBox<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>canvas<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"saved-image-example\"</span><span class=\"token punctuation\">,</span> canvas<span class=\"token punctuation\">.</span><span class=\"token function\">toDataURL</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"image/png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">catch</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Error: \"</span> <span class=\"token operator\">+</span> err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p><code>imageReceived()</code> は <code>HTMLImageElement</code> 上でダウンロードした画像を受け取ったことを表す <code>\"load\"</code> イベントを扱うために呼び出されます。このイベントは、ダウンロードしたデータがすべて利用可能になったら一度呼び出されます。新しい <a href=\"/ja/docs/Web/HTML/Element/canvas\"><code>&lt;canvas&gt;</code></a> 要素を作成することから始まり、画像をデータ URL に変換して、キャンバスの二次元描画コンテキスト (<a href=\"/ja/docs/Web/API/CanvasRenderingContext2D\"><code>CanvasRenderingContext2D</code></a>) がある変数 <code>context</code> へのアクセスを取得します。</p>\n<p>キャンバスの寸法は受信した画像に合うよう調整され、それから <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/CanvasRenderingContext2D/drawImage\"><code>drawImage()</code> <small>(en-US)</small></a> を使って画像をキャンバスに描画します。それからキャンバスが文書に挿入され、画像が見えるようになります。</p>\n<p>実際に画像をローカルに保存する時になりました。このためにはウェブストレージ API のローカルストレージの仕組みを使用し、 <a href=\"/ja/docs/Web/API/Window/localStorage\" title=\"localStorage\"><code>localStorage</code></a> グローバル変数を通してアクセスします。キャンバスのメソッド <a href=\"/ja/docs/Web/API/HTMLCanvasElement/toDataURL\" title=\"toDataURL()\"><code>toDataURL()</code></a> を使用して画像を data:// URL が表す PNG 画像に変換し、それから <a href=\"/ja/docs/Web/API/Storage/setItem\" title=\"setItem()\"><code>setItem()</code></a> を用いてローカルストレージに保存します。</p>\n<p>この例は Glitch で<a href=\"https://cors-image-example.glitch.me/\" class=\"external\" rel=\" noopener\">試用</a>または<a href=\"https://glitch.com/edit/#!/remix/cors-image-example\" class=\"external\" rel=\" noopener\">リミックス</a>することができます。</p>"}},{"type":"prose","value":{"id":"関連情報","title":"関連情報","isH3":false,"content":"<ul>\n  <li><a href=\"https://blog.chromium.org/2011/07/using-cross-domain-images-in-webgl-and.html\" class=\"external\" rel=\" noopener\">Using Cross-domain images in WebGL and Chrome 13</a></li>\n  <li><a href=\"http://whatwg.org/html#attr-img-crossorigin\" class=\"external\" rel=\" noopener\">HTML Specification - the <code>crossorigin</code> attribute</a></li>\n  <li><a href=\"/ja/docs/Web/API/Web_Storage_API\">Web Storage API</a></li>\n</ul>"}}],"toc":[{"text":"セキュリティと汚染されたキャンバス","id":"セキュリティと汚染されたキャンバス"},{"text":"異なるオリジンからの画像の保存","id":"異なるオリジンからの画像の保存"},{"text":"関連情報","id":"関連情報"}],"summary":"HTML では画像に crossorigin 属性を提供し、適切な CORS ヘッダーと組み合わせることで、 <img> 要素で定義されている他のオリジンから読み込まれた画像を、 <canvas> の中で現在のオリジンから読み込まれた画像であるかのように扱うことができます。","popularity":0.0004,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Allowing cross-origin use of images and canvas","locale":"en-US","native":"English (US)"},{"title":"Imagen con CORS habilitado","locale":"es","native":"Español"},{"title":"Autoriser les images et canevas provenant d'autres origines","locale":"fr","native":"Français"},{"title":"교차 출처 이미지와 캔버스 허용하기","locale":"ko","native":"한국어"},{"title":"CORS_habilitar_imagens","locale":"pt-BR","native":"Português (do Brasil)"},{"title":"Разрешение использования изображений из разных источников и canvas","locale":"ru","native":"Русский"},{"title":"启用了 CORS 的图片","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"ja/web/html/cors_enabled_image","github_url":"https://github.com/mdn/translated-content/blob/main/files/ja/web/html/cors_enabled_image/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/ja/docs/Web","title":"開発者向けのウェブ技術"},{"uri":"/ja/docs/Web/HTML","title":"HTML: HyperText Markup Language"},{"uri":"/ja/docs/Web/HTML/CORS_enabled_image","title":"画像とキャンバスをオリジン間で利用できるようにする"}],"pageTitle":"画像とキャンバスをオリジン間で利用できるようにする - HTML: HyperText Markup Language | MDN","noIndexing":false}}