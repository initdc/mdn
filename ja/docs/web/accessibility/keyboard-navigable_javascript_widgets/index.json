{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"キーボードでナビゲート可能な JavaScript ウィジェット","mdn_url":"/ja/docs/Web/Accessibility/Keyboard-navigable_JavaScript_widgets","locale":"ja","native":"日本語","sidebarHTML":"","body":[{"type":"prose","value":{"id":"概要","title":"概要","isH3":true,"content":"<p>ウェブアプリケーションは、メニュー、ツリービュー、リッチテキストフィールド、タブパネルなどのデスクトップウィジェットを模倣するために JavaScript を使用することがよくあります。 これらのウィジェットは通常、<a href=\"/ja/docs/Web/HTML/Element/div\"><code>&lt;div&gt;</code></a> 要素と <a href=\"/ja/docs/Web/HTML/Element/span\"><code>&lt;span&gt;</code></a> 要素で構成されています。これらの要素は本来、デスクトップのものと同じキーボード機能を提供しません。 このドキュメントは JavaScript ウィジェットをキーボードでアクセス可能にするためのテクニックを説明します。</p>"}},{"type":"prose","value":{"id":"tabindex_を使う","title":"tabindex を使う","isH3":true,"content":"<p>デフォルトでは、人々がウェブページを閲覧するために <kbd>Tab</kbd> キーを使うとき、（リンクやフォームコントロールのような）インタラクティブ要素だけがフォーカスされます。 <a href=\"/ja/docs/Web/HTML/Global_attributes#attr-tabindex\"><code>tabindex</code></a> <a href=\"/ja/docs/Web/HTML/Global_attributes\">グローバル属性</a>を使うと、作成者は他の要素もフォーカス可能にできます。 <code>0</code> に設定すると、要素はキーボードとスクリプトによってフォーカス可能になります。 <code>-1</code> に設定すると、要素はスクリプトによってフォーカス可能になりますが、キーボードによるフォーカスの順序の一部にはなりません。</p>\n<p>キーボードを使用したときに要素がフォーカスを得る順序は、デフォルトではソースの順序です。 例外的な状況では、作成者は順序を再定義したいと思うかもしれません。 これを行うために、作成者は <code>tabindex</code> を任意の正数に設定することができます。</p>\n<div class=\"notecard warning\" id=\"sect1\">\n  <p><strong>Warning:</strong> <code>tabindex</code> に正の値を使わないでください。 <code>tabindex</code> に正の値を持つ要素は、ページ上のデフォルトのインタラクティブ要素の前に配置されます。 つまり、ページ作成者は、<code>tabindex</code> に 1 以上の正の値を使用する時は必ず、ページ上の全てのフォーカス可能要素に対して <code>tabindex</code> の値を設定（および維持）する必要があります。</p>\n</div>\n<p>次の表は、最新のブラウザーにおける <code>tabindex</code> の動作を説明しています。</p>\n<table>\n  <thead>\n    <tr>\n      <th><code>tabindex</code> 属性</th>\n      <th><code>element.focus()</code> を介してマウスや JavaScript でフォーカス可能</th>\n      <th>タブでナビゲート可能</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>存在しない</td>\n      <td>要素のプラットフォーム規約に従います（フォームコントロール、リンクなどでは、可）。</td>\n      <td>要素のプラットフォーム規約に従います。</td>\n    </tr>\n    <tr>\n      <td>負（つまり、<code>tabindex=\"-1\"</code>）</td>\n      <td>可</td>\n      <td>不可。 作成者は、矢印キーなどの押下に応答して、<a href=\"/ja/docs/Web/API/HTMLElement/focus\"><code>focus()</code></a> で要素をフォーカスしなければなりません。</td>\n    </tr>\n    <tr>\n      <td>ゼロ（つまり、<code>tabindex=\"0\"</code>）</td>\n      <td>可</td>\n      <td>ドキュメント内の要素の位置を基準としたタブ順序（<a href=\"/ja/docs/Web/HTML/Element/a\"><code>&lt;a&gt;</code></a> のようなインタラクティブ要素は、デフォルトでこの振る舞いをすることに注意してください。 それらにこの属性は不要です）。</td>\n    </tr>\n    <tr>\n      <td>正（例えば、<code>tabindex=\"33\"</code>）</td>\n      <td>可</td>\n      <td><code>tabindex</code> の値は、この要素がタブ順序のどこに配置されるかを決定します。 小さい値は、大きい値よりもタブ順序の早い位置に要素を配置します（例えば、<code>tabindex=\"7\"</code> は <code>tabindex=\"11\"</code> の前に配置されます）。</td>\n    </tr>\n  </tbody>\n</table>\n<h4 id=\"ネイティブでないコントロール\">ネイティブでないコントロール</h4>\n<p><a href=\"/ja/docs/Web/HTML/Element/a\"><code>&lt;a&gt;</code></a>、<a href=\"/ja/docs/Web/HTML/Element/input\"><code>&lt;input&gt;</code></a>、<a href=\"/ja/docs/Web/HTML/Element/select\"><code>&lt;select&gt;</code></a> のようなインタラクティブなネイティブ HTML 要素はすでにキーボードによりアクセス可能であるため、これらのいずれかを使用することが、コンポーネントをキーボードで使えるようにするための最速の方法です。</p>\n<p>作成者は、<code>0</code> の <code>tabindex</code> を追加することによって、<a href=\"/ja/docs/Web/HTML/Element/div\"><code>&lt;div&gt;</code></a> や <a href=\"/ja/docs/Web/HTML/Element/span\"><code>&lt;span&gt;</code></a> をキーボードでアクセス可能にすることもできます。 これは、HTML には存在しないインタラクティブ要素を使用するコンポーネントに特に役立ちます。</p>\n<h4 id=\"コントロールのグループ化\">コントロールのグループ化</h4>\n<p>メニュー、タブリスト、グリッド、ツリービューなどのウィジェットをグループ化するには、親要素をタブ順序に入れて（<code>tabindex=\"0\"</code>）、各子孫の選択項目/タブ/セル/行をタブ順序から除く（<code>tabindex=\"-1\"</code>）必要があります。 ユーザーは矢印キーを使って子孫要素をナビゲートできるべきです。 （典型的なウィジェットに通常期待されるキーボードサポートの詳細な説明については、<a href=\"https://www.w3.org/TR/wai-aria-practices-1.1/\" class=\"external\" rel=\" noopener\">WAI-ARIA のオーサリングプラクティス</a>（英語）を参照してください。）</p>\n<p>以下の例は、入れ子になったメニューコントロールで使用されるこのテクニックを示しています。 キーボードフォーカスが含まれている <a href=\"/ja/docs/Web/HTML/Element/ul\"><code>&lt;ul&gt;</code></a> 要素に到達したら、JavaScript 開発者はプログラム的にフォーカスを管理し、矢印キーに応答する必要があります。 ウィジェット内でフォーカスを管理するためのテクニックについては、以下の「グループ内のフォーカス管理」を参照してください。</p>\n<p>例 2: tabindex を使用してキーボードアクセスを制御するメニューコントロール</p>\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>mb1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">tabindex</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>mb1_menu1<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">tabindex</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>-1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span> フォント\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>fontMenu<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">title</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>フォント<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">tabindex</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>-1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>sans-serif<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">tabindex</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>-1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>サンセリフ<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>serif<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">tabindex</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>-1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>セリフ<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>monospace<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">tabindex</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>-1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>モノスペース<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>fantasy<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">tabindex</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>-1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>ファンタジー<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>mb1_menu2<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">tabindex</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>-1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span> スタイル\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>styleMenu<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">title</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>スタイル<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">tabindex</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>-1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>italic<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">tabindex</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>-1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>斜体<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>bold<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">tabindex</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>-1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>太字<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>underline<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">tabindex</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>-1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>下線<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>mb1_menu3<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">tabindex</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>-1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span> 位置揃え\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>ul</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>justificationMenu<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">title</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>位置揃え<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">tabindex</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>-1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>left<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">tabindex</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>-1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>左<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>center<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">tabindex</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>-1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>中央<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>right<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">tabindex</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>-1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>右<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>li</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>justify<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">tabindex</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>-1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>両端<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>li</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>ul</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<h4 id=\"無効なコントロール\">無効なコントロール</h4>\n<p>カスタムコントロールが無効になったら、<code>tabindex=\"-1\"</code> を設定して、タブ順序から除きます。 グループ化されたウィジェット内の無効な項目（メニュー内のメニュー項目など）は、矢印キーを使用してナビゲート可能なままにするべきであることに注意してください。</p>"}},{"type":"prose","value":{"id":"グループ内のフォーカス管理","title":"グループ内のフォーカス管理","isH3":true,"content":"<p>ユーザーがウィジェットからタブで離れてから戻ると、フォーカスはフォーカスを持っていた特定の要素、例えば、ツリーアイテムやグリッドセルに戻るべきです。 これを実現するには次の 2 つのテクニックがあります。</p>\n<ol>\n  <li>動き回る <code>tabindex</code>: プログラム的にフォーカスを移動</li>\n  <li><code>aria-activedescendant</code>: 「仮想」フォーカスの管理</li>\n</ol>\n<h4 id=\"テクニック_1_動き回る_tabindex\">テクニック 1: 動き回る tabindex</h4>\n<p>フォーカスされた要素の <code>tabindex</code> を <code>\"0\"</code> に設定すると、ユーザーがウィジェットからタブで離れてから戻ってきた場合でも、グループ内の選択された項目にフォーカスが保持されます。 <code>tabindex</code> を <code>\"0\"</code> に更新したら、以前に選択した項目を <code>tabindex=\"-1\"</code> に更新する必要もあることに注意してください。 このテクニックでは、キーイベントに応答してプログラムでフォーカスを移動し、現在フォーカスされた項目を反映するように <code>tabindex</code> を更新します。 次を行います。</p>\n<p>キーダウンハンドラをグループ内の各要素にバインドし、矢印キーを使用して別の要素に移動した場合、</p>\n<ol>\n  <li>プログラム的に新しい要素にフォーカスを適用します。</li>\n  <li>フォーカスされた要素の <code>tabindex</code> を <code>\"0\"</code> に更新します。</li>\n  <li>以前にフォーカスされた要素の <code>tabindex</code> を <code>\"-1\"</code> に更新します。</li>\n</ol>\n<p>これはこのテクニックを使った <a href=\"https://files.paciellogroup.com/training/WWW2012/samples/Samples/aria/tree/index.html\" class=\"external\" rel=\" noopener\">WAI-ARIA ツリービュー</a>の例です。</p>\n<h5 id=\"ヒント\">ヒント</h5>\n<h6 id=\"element.focus_を使ってフォーカスを設定する\">element.focus() を使ってフォーカスを設定する</h6>\n<p>要素にフォーカスを移すために <code>createEvent()</code>、<code>initEvent()</code>、および <code>dispatchEvent()</code> を使用しないでください。 DOM フォーカスイベントは情報提供のみを目的としています。 何かがフォーカスされた後にシステムによって生成されますが、実際にはフォーカスの設定には使用されません。 代わりに <code>element.focus()</code> を使用してください。</p>\n<h6 id=\"onfocus_を使って現在のフォーカスを追跡する\">onfocus を使って現在のフォーカスを追跡する</h6>\n<p>全てのフォーカスの変更がキーイベントやマウスイベントを介して行われるとは限りません。 スクリーンリーダーなどの支援技術では、フォーカスを任意のフォーカス可能な要素に設定できます。 代わりに <code>onfocus</code> と <code>onblur</code> を使ってフォーカスを追跡します。</p>\n<p><code>onfocus</code> と <code>onblur</code> は全ての要素で使用できるようになりました。 現在のドキュメントのフォーカスを取得するための標準的な DOM インターフェースはありません。 フォーカスの状態を追跡したい場合は、<a href=\"/ja/docs/Web/API/Document/activeElement\"><code>document.activeElement</code></a> を使ってアクティブな要素を取得できます。 <a href=\"/ja/docs/Web/API/Document/hasFocus\"><code>document.hasFocus</code></a> を使って、現在のドキュメントのフォーカスかどうかを確認することもできます。</p>\n<h4 id=\"テクニック_2_aria-activedescendant\">テクニック 2: aria-activedescendant</h4>\n<p>このテクニックでは、単一のイベントハンドラをコンテナウィジェットにバインドし、<code>aria-activedescendant</code> を使用して「仮想」フォーカスを追跡します。 （ARIA に関する詳細は、<a href=\"/ja/docs/Web/Accessibility/An_overview_of_accessible_web_applications_and_widgets\">アクセス可能なウェブアプリケーションとウィジェットの概要</a>を参照してください。）</p>\n<p><code>aria-activedescendant</code> プロパティは、現在仮想フォーカスを持っている子孫要素の ID を識別します。 コンテナのイベントハンドラーは、<code>aria-activedescendant</code> の値を更新し、（例えば、境界線や背景色で）現在の項目が適切にスタイル設定されていることを確実にすることで、キーイベントおよびマウスイベントに応答する必要があります。</p>"}},{"type":"prose","value":{"id":"一般的なガイドライン","title":"一般的なガイドライン","isH3":true,"content":"<h4 id=\"onkeypress_ではなく_onkeydown_を使ってキーイベントをトラップする\">onkeypress ではなく onkeydown を使ってキーイベントをトラップする</h4>\n<p>IE は、英数字以外のキーに対する <code>keypress</code> イベントを発生させません。 代わりに <code>onkeydown</code> を使用してください。</p>\n<h4 id=\"キーボードとマウスが同じエクスペリエンスを生み出すことを確実にする\">キーボードとマウスが同じエクスペリエンスを生み出すことを確実にする</h4>\n<p>ユーザーエクスペリエンスが入力デバイスに関係なく一貫していることを保証するために、キーボードとマウスのイベントハンドラは適切な場所でコードを共有するべきです。 例えば、ユーザーが矢印キーを使用して移動したときに <code>tabindex</code> やスタイルを更新するコードは、マウスクリックハンドラでも同じ変化を生み出すために使用するべきです。</p>\n<h4 id=\"キーボードを使用して要素をアクティブにできることを確実にする\">キーボードを使用して要素をアクティブにできることを確実にする</h4>\n<p>キーボードを使用して要素をアクティブにできることを確実にするには、マウスイベントにバインドされているハンドラもキーボードイベントにバインドするべきです。 例えば、<code>onclick=\"doSomething()\"</code> がある場合、<kbd>Enter</kbd> キーで要素がアクティブにできることを確実にするには、<code>onkeydown=\"return event.keyCode != 13 || doSomething();\"</code> で <code>doSomething()</code> をキーダウンイベントにもバインドするべきです。</p>\n<h4 id=\"tabindex-1_項目およびプログラムでフォーカスを受け取る要素に常にフォーカスを描画する\">tabindex=\"-1\" 項目およびプログラムでフォーカスを受け取る要素に常にフォーカスを描画する</h4>\n<p>プログラム的にフォーカスを受け取る項目には、IE は自動的にフォーカスの輪郭を描画しません。 背景色を <code>this.style.backgroundColor = \"gray\";</code> のようなもので変更するか、または <code>this.style.border = \"1px dotted invert\"</code> で点線の境界線を追加することの中から選らんでください。 点線の境界線の場合は、最初から見えない 1px の境界線があるようにして、境界線スタイルを適用しても要素が大きくならないようにする必要があります（境界線はスペースを取り、IE は CSS アウトラインを実装しません）。</p>\n<h4 id=\"使用したキーイベントがブラウザー機能を実行しないようにする\">使用したキーイベントがブラウザー機能を実行しないようにする</h4>\n<p>ウィジェットがキーイベントを処理する場合は、イベントハンドラのリターンコードを使用して、ブラウザーもそれを処理しないようにします（例えば、矢印キーに応答してスクロールするなど）。 イベントハンドラが <code>false</code> を返した場合、そのイベントはハンドラを超えて伝播しません。</p>\n<p>例えば、次で、</p>\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">tabindex</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>-1<span class=\"token punctuation\">\"</span></span> <span class=\"token special-attr\"><span class=\"token attr-name\">onkeydown</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value javascript language-javascript\"><span class=\"token keyword\">return</span> <span class=\"token function\">handleKeyDown</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<p><code>handleKeyDown()</code> が <code>false</code> を返すと、イベントは消費され、ブラウザーはキーストロークに基づいたアクションを実行できなくなります。</p>\n<h4 id=\"現時点では、キーリピートに一貫した動作を当てにしないこと\">現時点では、キーリピートに一貫した動作を当てにしないこと</h4>\n<p>残念ながら <code>onkeydown</code> は、使用しているブラウザーや OS によってはリピートするかもしれないし、しないかもしれません。</p>"}}],"toc":[],"summary":"ウェブアプリケーションは、メニュー、ツリービュー、リッチテキストフィールド、タブパネルなどのデスクトップウィジェットを模倣するために JavaScript を使用することがよくあります。 これらのウィジェットは通常、<div> 要素と <span> 要素で構成されています。これらの要素は本来、デスクトップのものと同じキーボード機能を提供しません。 このドキュメントは JavaScript ウィジェットをキーボードでアクセス可能にするためのテクニックを説明します。","popularity":0.0003,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Keyboard-navigable JavaScript widgets","locale":"en-US","native":"English (US)"},{"title":"Contrôles DHTML personnalisés navigables au clavier","locale":"fr","native":"Français"},{"title":"Навигация с клавиатуры в JavaScript","locale":"ru","native":"Русский"},{"title":"键盘导航的 JavaScript 组件","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"ja/web/accessibility/keyboard-navigable_javascript_widgets","github_url":"https://github.com/mdn/translated-content/blob/main/files/ja/web/accessibility/keyboard-navigable_javascript_widgets/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/ja/docs/Web","title":"開発者向けのウェブ技術"},{"uri":"/ja/docs/Web/Accessibility","title":"アクセシビリティ"},{"uri":"/ja/docs/Web/Accessibility/Keyboard-navigable_JavaScript_widgets","title":"キーボードでナビゲート可能な JavaScript ウィジェット"}],"pageTitle":"キーボードでナビゲート可能な JavaScript ウィジェット - アクセシビリティ | MDN","noIndexing":false}}