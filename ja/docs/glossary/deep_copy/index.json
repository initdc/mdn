{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"Deep copy (ディープコピー)","mdn_url":"/ja/docs/Glossary/Deep_copy","locale":"ja","native":"日本語","sidebarHTML":"\n  <ol>\n    <li><a href=\"/ja/docs/MDN/About\">MDN について</a></li>\n    <li class=\"toggle\">\n        <details>\n            <summary>MDN の改善に貢献する</summary>\n            <ol>\n                <li><a href=\"/ja/docs/MDN/Contribute/Getting_started\">MDN を始めよう</a></li>\n                <li><a href=\"/ja/docs/MDN/Contribute\">MDN の改善に貢献する</a></li>\n                <li><a href=\"/ja/docs/MDN/Contribute/Howto\">あなたにできること</a></li>\n                <li><a href=\"/ja/docs/MDN/Contribute/Localize\">MDN でのローカライズ</a></li>\n                <li><a href=\"/ja/docs/MDN/Guidelines\">Guidelines</a></li>\n                <li><a href=\"/ja/docs/MDN/Structures\">文書の構造</a></li>\n             </ol>\n        </details>\n    </li>\n  </ol>\n","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>オブジェクトの <strong>ディープコピー</strong> とは、コピー先のオブジェクトのプロパティがコピー元のオブジェクトのプロパティと同一の参照（同じ値を指す）を共有しないコピーのことです。</p>\n<p>結果として、コピー元かコピー先のどちらかを変更しても、そのほかのオブジェクトにも変更を及ぼしていないことを保証できます。すなわち、コピー元かコピー先に意図せずに予期しない変更が加えられるこはありません。</p>\n<p>この振る舞いは <a href=\"/ja/docs/Glossary/Shallow_copy\">shallow copy</a> とは対照的で、コピー元かコピー先のどちらかを変更すると他のオブジェクトも変更される可能性があります。（なぜならば、それら2つのオブジェクトは参照を共有しているためです）</p>\n<p>Javascript では、オブジェクトを操作する標準の組み込み構文や関数（<a href=\"/ja/docs/Web/JavaScript/Reference/Operators/Spread_syntax\">スプレッド構文</a>, <a href=\"/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/concat\"><code>Array.prototype.concat()</code></a>, <a href=\"/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/slice\"><code>Array.prototype.slice()</code></a>, <a href=\"/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/from\"><code>Array.from()</code></a>, <a href=\"/ja/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\"><code>Object.assign()</code></a>, <a href=\"/ja/docs/Web/JavaScript/Reference/Global_Objects/Object/create\"><code>Object.create()</code></a>）はディープコピーを作成しません。（代わりにシャローコピーで作成されます）。</p>\n<p>Javascript のオブジェクトのディープコピーを作成する一つの方法は、そのオブジェクトが <a href=\"/ja/docs/Glossary/Serialization\">シリアライズ</a> 可能であれば <a href=\"/ja/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify\"><code>JSON.stringify()</code></a> でオブジェクトを JSON 文字列に変換し、 <a href=\"/ja/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse\"><code>JSON.parse()</code></a> で文字列から（完全に新しい） Javascript のオブジェクトに変換することです。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">let</span> ingredients_list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"noodles\"</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">{</span><span class=\"token string-property property\">\"list\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"eggs\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"flour\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"water\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> ingredients_list_deepcopy <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>ingredients_list<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ingredients_list_deepcopy の 'list' プロパティの値を変更します</span>\ningredients_list_deepcopy<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"rice flour\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"water\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\">// ingredients_list の 'list' プロパティは変更されません</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>ingredients_list<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>list<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Array(3) [ \"eggs\", \"flour\", \"water\" ]</span>\n</code></pre></div>\n<p>上記のコードの通り、ディープコピーは元のオブジェクトと参照を共有しないため、ディープコピーにいかなる変更を加えたとしても、元のオブジェクトには影響を及ぼしません。</p>\n<p>しかしながら、上記のコードはシンプルで <a href=\"/ja/docs/Glossary/Serialization\">シリアライズ</a> で十分ですが、多くの Javascript のオブジェクトはシリアライズ可能とは全く言えません。例えば、<a href=\"/ja/docs/Web/JavaScript/Guide/Functions\">関数</a>（クロージャ）、<a href=\"/ja/docs/Web/JavaScript/Reference/Global_Objects/Symbol\">Symbols</a>、<a href=\"/ja/docs/Web/API/HTML_DOM_API\">HTML DOM API</a> においてHTML要素を表すオブジェクト、再帰データ、その他の多くのケース。これらのケースにおいて <code>JSON.stringify()</code> を使用したオブジェクトのシリアライズは失敗します。つまり、それらのオブジェクトのディープコピーを作成する方法はありません。</p>\n<p><em>シリアライズ可能</em> なオブジェクトであれば、代わりに <a href=\"/ja/docs/Web/API/structuredClone\"><code>structuredClone()</code></a> 関数を使用してディープコピーを作成することも可能です。 <code>structuredClone()</code> の利点は、ただ複製するだけでなく、 <a href=\"/ja/docs/Glossary/Transferable_objects\">transferable objects</a> を元のオブジェクトから新しいコピーに <em>転送</em> できることです。ただし、 <code>structuredClone()</code> は Javascript そのものの言語機能ではなく、代わりにブラウザや <a href=\"/ja/docs/Web/API/Window\"><code>window</code></a> のようなグローバルオブジェクトを実装している他の Javascript ランタイムによる機能であるということに留意してください。また、シリアライズ不可なオブジェクトを複製するために <code>structuredClone()</code> を呼び出すのは <code>JSON.stringify()</code> が失敗するのと同様に失敗します。</p>"}},{"type":"prose","value":{"id":"関連情報","title":"関連情報","isH3":false,"content":"<ul>\n  <li><a href=\"/ja/docs/Glossary/Shallow_copy\">Shallow copy</a></li>\n  <li><a href=\"/ja/docs/Web/API/structuredClone\"><code>window.structuredClone()</code></a></li>\n</ul>"}}],"toc":[{"text":"関連情報","id":"関連情報"}],"summary":"オブジェクトの ディープコピー とは、コピー先のオブジェクトのプロパティがコピー元のオブジェクトのプロパティと同一の参照（同じ値を指す）を共有しないコピーのことです。","popularity":0.0004,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Deep copy","locale":"en-US","native":"English (US)"},{"title":"Copie profonde","locale":"fr","native":"Français"}],"source":{"folder":"ja/glossary/deep_copy","github_url":"https://github.com/mdn/translated-content/blob/main/files/ja/glossary/deep_copy/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/ja/docs/Glossary","title":"MDN Web Docs 用語集: ウェブ関連用語の定義"},{"uri":"/ja/docs/Glossary/Deep_copy","title":"Deep copy (ディープコピー)"}],"pageTitle":"Deep copy (ディープコピー) - MDN Web Docs 用語集: ウェブ関連用語の定義 | MDN","noIndexing":false}}