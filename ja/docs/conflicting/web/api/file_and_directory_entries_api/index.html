<!DOCTYPE html><html lang="en-US" prefix="og: https://ogp.me/ns#"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="/favicon-48x48.97046865.png"><link rel="apple-touch-icon" href="/apple-touch-icon.0ea0fa02.png"><meta name="theme-color" content="#ffffff"><link rel="manifest" href="/manifest.56b1cedc.json"><link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="MDN Web Docs"><script>Array.prototype.flat&&Array.prototype.includes||document.write('<script src="https://polyfill.io/v3/polyfill.min.js?features=Array.prototype.flat%2Ces6"><\/script>')</script><title>FileHandle API | MDN</title><link rel="preload" as="font" type="font/woff2" crossorigin="" href="/static/media/ZillaSlab-Bold.subset.0beac26b.woff2"><meta name="description" content="FileHandle API ã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆã‚„å†…å®¹ã®å¤‰æ›´ãªã©ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ“ä½œã™ã‚‹ãŸã‚ã® API ã§ã™ (File API (en-US) ã¨ã¯ç•°ãªã‚Šã¾ã™)ã€‚ã“ã® API ã‚’é€šã˜ãŸãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œã¯ã€ãƒ‡ãƒã‚¤ã‚¹ä¸Šã«ç‰©ç†çš„ã«æ ¼ç´ã§ãã€éƒ¨åˆ†çš„ãªç·¨é›†ã«ã¯ã€ç«¶åˆå•é¡Œã‚’é¿ã‘ã‚‹ãŸã‚ã«ã‚¿ãƒ¼ãƒ³ãƒ™ãƒ¼ã‚¹ã®ãƒ­ãƒƒã‚¯æ©Ÿæ§‹ãŒä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚"><meta property="og:url" content="https://developer.mozilla.org/ja/docs/conflicting/Web/API/File_and_Directory_Entries_API"><meta property="og:title" content="FileHandle API | MDN"><meta property="og:description" content="FileHandle API ã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆã‚„å†…å®¹ã®å¤‰æ›´ãªã©ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ“ä½œã™ã‚‹ãŸã‚ã® API ã§ã™ (File API (en-US) ã¨ã¯ç•°ãªã‚Šã¾ã™)ã€‚ã“ã® API ã‚’é€šã˜ãŸãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œã¯ã€ãƒ‡ãƒã‚¤ã‚¹ä¸Šã«ç‰©ç†çš„ã«æ ¼ç´ã§ãã€éƒ¨åˆ†çš„ãªç·¨é›†ã«ã¯ã€ç«¶åˆå•é¡Œã‚’é¿ã‘ã‚‹ãŸã‚ã«ã‚¿ãƒ¼ãƒ³ãƒ™ãƒ¼ã‚¹ã®ãƒ­ãƒƒã‚¯æ©Ÿæ§‹ãŒä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚"><meta property="og:locale" content="ja"><meta property="og:image" content="https://developer.mozilla.org/mdn-social-share.0ca9dbda.png"><meta property="twitter:card" content="summary_large_image"><meta name="robots" content="noindex, nofollow"><link rel="canonical" href="https://developer.mozilla.org/ja/docs/conflicting/Web/API/File_and_Directory_Entries_API"><style media="print">.breadcrumbs-container,.document-toc-container,.language-menu,.language-toggle,.on-github,.page-footer,.page-header-main,nav.sidebar,ul.prev-next{display:none!important}.main-page-content,.main-page-content pre{padding:2px}.main-page-content pre{border-left-width:2px}</style><link href="/static/css/main.55b68e13.chunk.css" rel="stylesheet"><script src="/static/js/runtime-main.4bb4c356.js" defer=""></script><script src="/static/js/4.a756dea3.chunk.js" defer=""></script><script src="/static/js/main.d4d565e0.chunk.js" defer=""></script></head><body><div id="root"><ul id="nav-access" class="a11y-nav"><li><a id="skip-main" href="#content">Skip to main content</a></li><li><a id="skip-search" href="#main-q">Skip to search</a></li><li><a id="skip-select-language" href="#select-language">Skip to select language</a></li></ul><div class="page-wrapper document-page"><header class="page-header"><a href="/ja/" class="logo" aria-label="MDN Web Docs"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 451.74 135"><path d="M7.14 8.35v111.06h111.05V8.35zm103.71 56c-.48.92-1 1.79-1.46 2.71a3.44 3.44 0 01-3.54 2 2.4 2.4 0 00-1.55.5c-1.37.9-2.76 1.79-4.18 2.63a7.33 7.33 0 01-6.35.34 29.71 29.71 0 00-10.63-2 11.7 11.7 0 00-9.46 4.31 14.84 14.84 0 00-2.13 4.29c-1.24 3.07-2.3 21.38-2.3 26.05 0 0-17.62-3.42-34.15-20.34l4.31-11.32h-13.5l9.76-10.35h-16.8l9.77-10.34H12.69L30.45 34a40.9 40.9 0 0119.77-10.83c7.1-1.22 8.93-.53 13.31.77l2.43.73.85.25 3.1.95a12.56 12.56 0 006.21.09 11.37 11.37 0 018.25 1 8.24 8.24 0 014.1 6.22 7.29 7.29 0 003.61 5.49 59.45 59.45 0 009.32 4.11c2.27.86 4.54 1.84 6.79 2.72a6.81 6.81 0 012.86 2.06 4.81 4.81 0 011.1 2.73c.14 2 .37 4 .47 6a15.24 15.24 0 01-1.77 8.03zM320.12 39.62a5.42 5.42 0 00-4.53 2.13 7.36 7.36 0 00-1.7 4.43v2.36a6.28 6.28 0 001.7 4.46 5.63 5.63 0 004.3 1.82 5.12 5.12 0 004.57-2.27A9.7 9.7 0 00326 47a8.11 8.11 0 00-1.67-5.52 5.36 5.36 0 00-4.21-1.86zM387.38 39.53a5.52 5.52 0 00-4.7 2.15 8.8 8.8 0 00-1.63 5.49 9.23 9.23 0 001.58 5.45 5.38 5.38 0 004.7 2.25 5.61 5.61 0 004.74-2.2 8.91 8.91 0 001.68-5.59 8.24 8.24 0 00-1.75-5.52 5.76 5.76 0 00-4.62-2.03zM299.47 41.35a4.34 4.34 0 00-4-1.92 4.55 4.55 0 00-3.89 1.73 8.37 8.37 0 00-1.58 4.17h10.48a6.3 6.3 0 00-1.01-3.98zM357.74 30.75H352v23.31h5.72q5.47 0 8.35-3t2.93-8.65q0-5.43-2.88-8.55t-8.38-3.11z"></path><path d="M121.55 8.35v70.8h323V8.35zm42.21 22.45h-4V54h3.68v3.73h-11.25V54h3.31V36.79h-.19l-9.63 19.12h-2.12l-10-19.4h-.19V54h3.45v3.73h-11.15V54h3.68V30.8h-4v-3.73H133l11.66 22.56h.19l11.18-22.56h7.7zm29.12 22.67q-4.11 4.28-11.38 4.28h-14.06v-3.69h3.73V30.75h-3.73v-3.68h13.83q7.59 0 11.66 4.29a15.4 15.4 0 014 11 15.33 15.33 0 01-4.05 11.11zm38.89-22.67h-3.68v27h-2.6L208.08 35h-.19v19h4.67v3.73h-12.22V54h3.49V30.8h-4v-3.73h7.08l16.9 22.09h.19V30.8h-4.58v-3.73h12.32zm43.8 27h-3.31l-7.83-23.18h-.19l-7.55 23.18h-3.35l-8.78-27h-2.65v-3.73H253v3.73h-3.87L255 50.71h.23l6.61-19.91H259v-3.73h11v3.73h-2.78l6.61 20.1h.23l5.43-20.1h-4.15v-3.73h11v3.73h-2.54zm26.71-1.51a9.66 9.66 0 01-6.42 2 10.2 10.2 0 01-7.41-2.74c-1.89-1.82-2.83-4.47-2.83-7.93a12.37 12.37 0 012.64-8.12 9 9 0 017.32-3.21 8.62 8.62 0 016.75 2.69 9.65 9.65 0 012.45 6.52 13.67 13.67 0 01-.28 2.69H290q.29 6.71 6.18 6.7a5.2 5.2 0 003.71-1.18 5.82 5.82 0 001.67-2.83l3.45.71a7.21 7.21 0 01-2.73 4.65zm25.77-1.63c-1.51 2.4-3.92 3.61-7.22 3.61s-5.84-1.29-7.22-3.87c0 .25-.1.82-.21 1.7s-.19 1.44-.22 1.7H309c.16-1 .31-2 .47-3.07a21.42 21.42 0 00.24-3.16v-23h-3.4v-3.3h7.55V40.9a9.76 9.76 0 012.67-3.28 7.33 7.33 0 014.74-1.4 8.48 8.48 0 016.5 2.78q2.55 2.74 2.55 7.74a14.6 14.6 0 01-2.27 7.87zm41.39-1.14q-4.11 4.28-11.37 4.28H344v-3.74h3.73V30.75H344v-3.68h13.83q7.59 0 11.66 4.29a15.41 15.41 0 014.06 11 15.34 15.34 0 01-4.11 11.11zm25.65 1.68a10.53 10.53 0 01-7.9 3.07 10 10 0 01-7.63-3 10.93 10.93 0 01-2.8-7.83 12.13 12.13 0 012.69-7.93q2.69-3.3 8-3.3t8 3.28a12 12 0 012.64 7.76 10.86 10.86 0 01-3 7.9zm22.61.57c-1.4 1.66-3.63 2.5-6.68 2.5a9.58 9.58 0 01-7.15-2.76q-2.72-2.76-2.71-7.91a12.25 12.25 0 012.69-8 9.17 9.17 0 017.5-3.28 15 15 0 013.82.48 10.37 10.37 0 013.5 1.65l.85 5.47-3.35.38-.76-3.54a8.07 8.07 0 00-4.11-1 4.9 4.9 0 00-4.39 2.15 9.93 9.93 0 00-1.41 5.55 8.9 8.9 0 001.5 5.38 5.23 5.23 0 004.44 2c2.92 0 4.67-1.7 5.23-5.1l3.5.71a10.34 10.34 0 01-2.47 5.27zm20.48.75a11.68 11.68 0 01-6.63 1.75 15.52 15.52 0 01-8.26-2.08L424 51l3.26.33-.1 2.74a7 7 0 002.06.66 12.63 12.63 0 002.19.19 8.68 8.68 0 003.66-.75 2.5 2.5 0 001.63-2.36 2.25 2.25 0 00-1.32-2.2 12.65 12.65 0 00-3.28-1 47.39 47.39 0 01-3.9-.82 7.5 7.5 0 01-3.25-1.7 4.67 4.67 0 01-1.33-3.66c0-2.36.88-4 2.62-4.91a12 12 0 015.6-1.37 15 15 0 014.08.55 16.65 16.65 0 013.47 1.39l.47 5.1-3.3.37-.48-3.3a9.5 9.5 0 00-4.06-.9 5.62 5.62 0 00-2.87.66 2.33 2.33 0 00-1.15 2.25 2.13 2.13 0 001.3 2.07 11.91 11.91 0 003.21.92 36.69 36.69 0 013.82.83 7.46 7.46 0 013.21 1.74 4.9 4.9 0 011.3 3.73 5.56 5.56 0 01-2.66 4.91z"></path><path d="M181.17 30.75h-5.71v23.31h5.71q5.47 0 8.36-3t2.88-8.61q0-5.43-2.88-8.55t-8.36-3.15zM121.63 119.32V81.74h114.91v37.58zM153.22 109h-2v-6.85a4.8 4.8 0 00-1.58-4 5.57 5.57 0 00-3.55-1.26 5 5 0 00-4.92 3.26 4.19 4.19 0 00-1.88-2.46 5.82 5.82 0 00-3-.8 4.89 4.89 0 00-4.56 2.56v-2.21h-6.28v3.26h2v8.5h-2v3.23h9.11V109h-2.86v-5.25a4.4 4.4 0 01.69-2.56 2.47 2.47 0 012.21-1q2.57 0 2.56 3.63v8.41h6.29V109h-2v-5.25a4.47 4.47 0 01.67-2.56 2.42 2.42 0 012.19-1q2.63 0 2.63 3.63v8.41h6.28zm9.88-12.07q-4 0-6 2.36a8.41 8.41 0 00-2 5.66 7.25 7.25 0 002.17 5.62 8 8 0 005.65 2 8.54 8.54 0 005.94-2.11 7.27 7.27 0 002.34-5.67 8.21 8.21 0 00-2-5.51q-2.07-2.34-6.1-2.34zm-.1 12.35a3 3 0 01-2.63-1.33 5.68 5.68 0 01-.9-3.26 5 5 0 011-3.28 3.23 3.23 0 012.61-1.18 3.5 3.5 0 012.59 1.08 4.56 4.56 0 011.07 3.31 5.21 5.21 0 01-1 3.41 3.33 3.33 0 01-2.74 1.25zm25-2.3l-3.39-.29-.7 2.32H179l8.32-9.54-.32-2.23h-13.19l-.53 5.25 3.16.34.67-2.36h4.65l-8.25 9.53.44 2.26h13.13zm7.62-9.74h-4.46v5.39h4.46zm0 9.61h-4.46v5.39h4.46zm13.54-17.49h-4.23l-6.48 22.88h4.22zm8.68 0h-4.23l-6.45 22.88h4.19zm15 22.51l-.07-2.26a1.22 1.22 0 01-.56.1c-.69 0-1-.39-1-1.16v-6.49a4.39 4.39 0 00-1.8-3.84 7 7 0 00-4.16-1.28 14.55 14.55 0 00-3.16.3 24.14 24.14 0 00-3.29 1.06l-.56 3.46 3.39.4.5-1.69a2.78 2.78 0 011.08-.37 11.3 11.3 0 011.25-.07c1.19 0 1.89.37 2.09 1.1a8.55 8.55 0 01.3 2.26v.5a8.91 8.91 0 00-1.18-.11h-1.21a12.64 12.64 0 00-4.81.88 3.53 3.53 0 00-2.18 3.64 3.66 3.66 0 001.48 3.33 5.63 5.63 0 003.11 1 4.67 4.67 0 003-.91 6.78 6.78 0 001.8-2 3 3 0 003.33 3 5.54 5.54 0 002.66-.85zm-9.25-2.32a1.69 1.69 0 01-1.36-.52 1.81 1.81 0 01-.43-1.21 1.67 1.67 0 01.86-1.68 4.63 4.63 0 012-.42 7.69 7.69 0 011.07.07l1.06.13a3.58 3.58 0 01-1.08 2.74 3.24 3.24 0 01-2.11.89z"></path></svg></a><button type="button" class="ghost main-menu-toggle" aria-haspopup="true" aria-label="Show Menu"></button><div class="page-header-main "><nav class="main-nav" aria-label="Main menu"><ul class="main-menu nojs"><li class="top-level-entry-container"><button id="technologies-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">Technologies</button><ul class="technologies " role="menu" aria-labelledby="technologies-button"><li role="none"><a tabindex="-1" href="/ja/docs/Web" role="menuitem">Technologies Overview</a></li><li role="none"><a tabindex="-1" href="/ja/docs/Web/HTML" role="menuitem">HTML</a></li><li role="none"><a tabindex="-1" href="/ja/docs/Web/CSS" role="menuitem">CSS</a></li><li role="none"><a tabindex="-1" href="/ja/docs/Web/JavaScript" role="menuitem">JavaScript</a></li><li role="none"><a tabindex="-1" href="/ja/docs/Web/Guide/Graphics" role="menuitem">Graphics</a></li><li role="none"><a tabindex="-1" href="/ja/docs/Web/HTTP" role="menuitem">HTTP</a></li><li role="none"><a tabindex="-1" href="/ja/docs/Web/API" role="menuitem">APIs</a></li><li role="none"><a tabindex="-1" href="/ja/docs/Mozilla/Add-ons/WebExtensions" role="menuitem">Browser Extensions</a></li><li role="none"><a tabindex="-1" href="/ja/docs/Web/MathML" role="menuitem">MathML</a></li></ul></li><li class="top-level-entry-container"><button id="references-guides-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">References &amp; Guides</button><ul class="references-guides " role="menu" aria-labelledby="references-guides-button"><li role="none"><a tabindex="-1" href="/ja/docs/Learn" role="menuitem">Learn web development</a></li><li role="none"><a tabindex="-1" href="/ja/docs/Web/Tutorials" role="menuitem">Tutorials</a></li><li role="none"><a tabindex="-1" href="/ja/docs/Web/Reference" role="menuitem">References</a></li><li role="none"><a tabindex="-1" href="/ja/docs/Web/Guide" role="menuitem">Developer Guides</a></li><li role="none"><a tabindex="-1" href="/ja/docs/Web/Accessibility" role="menuitem">Accessibility</a></li><li role="none"><a tabindex="-1" href="/ja/docs/Games" role="menuitem">Game development</a></li><li role="none"><a tabindex="-1" href="/ja/docs/Web" role="menuitem">...more docs</a></li></ul></li><li class="top-level-entry-container"><button id="feedback-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">Feedback</button><ul class="feedback " role="menu" aria-labelledby="feedback-button"><li role="none"><a tabindex="-1" href="/ja/docs/MDN/Contribute/Feedback" role="menuitem">Send Feedback</a></li><li role="none"><a tabindex="-1" href="/ja/docs/MDN/Contribute" role="menuitem">Contribute to MDN</a></li><li role="none"><a tabindex="-1" target="_blank" rel="noopener noreferrer" href="https://github.com/mdn/content/issues/new" role="menuitem">Report a content issue<!-- --> ğŸŒ</a></li><li role="none"><a tabindex="-1" target="_blank" rel="noopener noreferrer" href="https://github.com/mdn/yari/issues/new" role="menuitem">Report a platform issue<!-- --> ğŸŒ</a></li></ul></li></ul></nav><div class="header-search"><form action="/ja/search" class="search-form search-widget" role="search"><label for="main-q" class="visually-hidden">Search MDN</label><input type="search" name="q" id="main-q" class="search-input-field" placeholder="Site search... (Press &quot;/&quot; to focus)" pattern="(.|\s)*\S(.|\s)*" required="" value=""><input type="submit" class="ghost search-button" value="" aria-label="Search"></form></div><div class="auth-container"></div></div></header><div class="localized-content-note notecard inline neutral"><a href="/en-US/docs/MDN/Contribute/Localize#active_locales">ã“ã®ãƒšãƒ¼ã‚¸ã¯ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ¼ã®å°½åŠ›ã§è‹±èªã‹ã‚‰ç¿»è¨³ã•ã‚Œã¾ã—ãŸã€‚MDN Web Docs ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãƒ¼ã«ã¤ã„ã¦ã‚‚ã£ã¨çŸ¥ã‚Šã€ä»²é–“ã«ãªã‚‹ã«ã¯ã“ã¡ã‚‰ã‹ã‚‰ã€‚</a></div><aside class="document-toc-container"><section class="document-toc"><header><h2>Table of contents</h2><button type="button" class="ghost toc-trigger-mobile" aria-controls="toc-entries" aria-expanded="false">Table of contents</button></header><ul id="toc-entries"><li><a href="#api_æ¦‚è¦³">API æ¦‚è¦³</a></li><li><a href="#åŸºæœ¬çš„ãªæ“ä½œ">åŸºæœ¬çš„ãªæ“ä½œ</a></li><li><a href="#file_ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸">File ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸</a></li><li><a href="#api_ã®äº’æ›æ€§">API ã®äº’æ›æ€§</a></li></ul></section></aside><main id="content" class="main-content" role="main"><article class="main-page-content" lang="ja"><h1>FileHandle API</h1><div><div class="notecard warning" id="sect1"><p><strong>éæ¨™æº–:</strong> ã“ã®æ©Ÿèƒ½ã¯æ¨™æº–ã§ã¯ãªãã€æ¨™æº–åŒ–ã®äºˆå®šã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã«ã¯ä½¿ç”¨ã—ãªã„ã§ãã ã•ã„ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚ˆã£ã¦ã¯ä½¿ç”¨ã§ããªã„ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚å®Ÿè£…ã”ã¨ã«å¤§ããªå·®ãŒã‚ã‚‹ã“ã¨ã‚‚ã‚ã‚Šã€å°†æ¥ã¯æŒ¯ã‚‹èˆã„ãŒå¤‰ã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p></div>
<p>FileHandle API ã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆã‚„å†…å®¹ã®å¤‰æ›´ãªã©ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ“ä½œã™ã‚‹ãŸã‚ã® API ã§ã™ (<a href="/en-US/docs/Web/API/File" class="only-in-en-us" title="Currently only available in English (US)">File API (en-US)</a> ã¨ã¯ç•°ãªã‚Šã¾ã™)ã€‚ã“ã® API ã‚’é€šã˜ãŸãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œã¯ã€ãƒ‡ãƒã‚¤ã‚¹ä¸Šã«ç‰©ç†çš„ã«æ ¼ç´ã§ãã€éƒ¨åˆ†çš„ãªç·¨é›†ã«ã¯ã€ç«¶åˆå•é¡Œã‚’é¿ã‘ã‚‹ãŸã‚ã«ã‚¿ãƒ¼ãƒ³ãƒ™ãƒ¼ã‚¹ã®ãƒ­ãƒƒã‚¯æ©Ÿæ§‹ãŒä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚</p></div><h2 id="api_æ¦‚è¦³"><a href="#api_æ¦‚è¦³" title="Permalink to API æ¦‚è¦³">API æ¦‚è¦³</a></h2><div><p>ã“ã® API ã¯ã€æ¬¡ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’åŸºã«ã—ã¦ã„ã¾ã™:</p>
<ul>
  <li><a class="page-not-created" title="ã“ã®é …ç›®ã«ã¤ã„ã¦ã®æ–‡æ›¸ã¯ã¾ã æ›¸ã‹ã‚Œã¦ã„ã¾ã›ã‚“ã€‚æ›¸ã„ã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿ"><code>IDBDatabase.mozCreateFileHandle</code></a></li>
  <li><a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/IDBMutableFile"><code>FileHandle</code> <small>(en-US)</small></a></li>
  <li><a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/IDBFileHandle"><code>LockedFile</code> <small>(en-US)</small></a></li>
  <li><a class="page-not-created" title="ã“ã®é …ç›®ã«ã¤ã„ã¦ã®æ–‡æ›¸ã¯ã¾ã æ›¸ã‹ã‚Œã¦ã„ã¾ã›ã‚“ã€‚æ›¸ã„ã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿ"><code>FileRequest</code></a></li>
</ul>
<p>ã“ã‚Œã¯ã€File API ã® <a href="/ja/docs/Web/API/File"><code>File</code></a> ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãŠã‚ˆã³ <a href="/ja/docs/Web/API/Blob"><code>Blob</code></a> ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¨ã‚‚æ¥ç¶šã—ã¦ã„ã¾ã™ã€‚</p></div><h2 id="åŸºæœ¬çš„ãªæ“ä½œ"><a href="#åŸºæœ¬çš„ãªæ“ä½œ" title="Permalink to åŸºæœ¬çš„ãªæ“ä½œ">åŸºæœ¬çš„ãªæ“ä½œ</a></h2><div></div><h3 id="filehandle_ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ä½œæˆ"><a href="#filehandle_ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ä½œæˆ" title="Permalink to FileHandle ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ä½œæˆ">FileHandle ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ä½œæˆ</a></h3><div><p>ã“ã®ã‚¤ãƒ³ãƒ†ãƒ³ãƒˆã¯ IndexedDB ã‚’é€šã˜ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜ã—ã¦ã„ã‚‹ãŸã‚ã€<a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/IDBMutableFile"><code>FileHandle</code> <small>(en-US)</small></a> ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã™ã‚‹ã®ã« <a href="/en-US/docs/Web/API/IDBFactory#open" class="only-in-en-us" title="Currently only available in English (US)">IndexedDB Database (en-US)</a> ãŒå¿…è¦ã§ã™ã€‚</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">var</span> IDBReq <span class="token operator">=</span> indexedDB<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"myFileStorageDataBase"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

IDBReq<span class="token punctuation">.</span><span class="token function-variable function">onsuccess</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> <span class="token constant">DB</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>result<span class="token punctuation">;</span>
  <span class="token keyword">var</span> buildHandle <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">.</span><span class="token function">mozCreateFileHandle</span><span class="token punctuation">(</span><span class="token string">"test.txt"</span><span class="token punctuation">,</span> <span class="token string">"plain/text"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  buildHandle<span class="token punctuation">.</span><span class="token function-variable function">onsuccess</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> myFileHandle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>result<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'handle'</span><span class="token punctuation">,</span> myFileHandle<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div>
<p><a class="page-not-created" title="ã“ã®é …ç›®ã«ã¤ã„ã¦ã®æ–‡æ›¸ã¯ã¾ã æ›¸ã‹ã‚Œã¦ã„ã¾ã›ã‚“ã€‚æ›¸ã„ã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿ"><code>mozCreateFileHandle()</code></a> ã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«åã¨ä»»æ„ã®å½¢å¼ã® 2 å€‹ã®å¼•æ•°ã‚’å–ã‚Šã¾ã™ã€‚ã“ã‚Œã‚‰ã¯èª¬æ˜ã®ãŸã‚ã®ã‚‚ã®ã§ã‚ã‚Šã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ã¯ä½¿ç”¨ã•ã‚Œã¾ã›ã‚“ã€‚ã—ã‹ã—ã€ã“ã‚Œã‚‰ã®å€¤ã‹ã‚‰ <a href="/ja/docs/Web/API/File"><code>File</code></a> ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã® <a href="/ja/docs/Web/API/File/name" title="name"><code>name</code></a> ã¨ <a href="/ja/docs/Web/API/File/type" title="type"><code>type</code></a> ã«ç¶™æ‰¿ã—ã¦ç”Ÿæˆã™ã‚‹ãŸã‚ã€<a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/IDBMutableFile"><code>FileHandle</code> <small>(en-US)</small></a> ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã¨ã£ã¦é‡è¦ã§ã™ã€‚ã¤ã¾ã‚Šã€ä¾‹ãˆã°ç©ºæ–‡å­—ã«ã™ã‚‹ã¨å®Ÿéš›ã«å­˜åœ¨ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã¨ä¸€è‡´ã—ãªã„ãŸã‚ã€ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªåå‰ã«ã—ãªãã¦ã‚‚ã‚ˆã„ã§ã™ã€‚</p>
<div class="notecard note" id="sect2">
  <p><strong>Note:</strong> <strong>è£œè¶³:</strong> ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã¯ã€<a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/IDBMutableFile"><code>FileHandle</code> <small>(en-US)</small></a> ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä¿æŒã—ã¦ã„ã‚‹é–“ã®ã¿å­˜åœ¨ã™ã‚‹ã€Œä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã€ã‚’ä½œæˆã™ã‚‹ã ã‘ã§ã™ã€‚ãƒšãƒ¼ã‚¸æ›´æ–°ã‚„ã‚¢ãƒ—ãƒªå†èµ·å‹•ã«é­é‡ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ‰±ã„ãŸã„å ´åˆã¯ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è‡ªèº«ãªã©ã€ãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒ³ãƒ‰ãƒ«ã‚’æ°¸ç¶šçš„ãªå ´æ‰€ã«æ ¼ç´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚è©³ã—ãã¯ã€å¾Œè¿°ã® <a href="#file_storage">File storage</a> ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>
</div></div><h3 id="ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿æ›¸ãæ“ä½œ"><a href="#ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿æ›¸ãæ“ä½œ" title="Permalink to ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿æ›¸ãæ“ä½œ">ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿æ›¸ãæ“ä½œ</a></h3><div><p>ãƒãƒ³ãƒ‰ãƒ«ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã‚“ã ã‚Šæ›¸ã„ãŸã‚Šã™ã‚‹ã«ã¯ã€<a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/IDBFileHandle"><code>LockedFile</code> <small>(en-US)</small></a> ã‚’å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚<a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/IDBMutableFile/open"><code>FileHandle.open()</code> <small>(en-US)</small></a> ãƒ¡ã‚½ãƒƒãƒ‰ãŒã“ã®æ“ä½œã®ãŸã‚ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æä¾›ã—ã¦ãŠã‚Šã€<code>readonly</code> ã¾ãŸã¯ <code>readwrite</code> ãŒå¯èƒ½ã§ã™ã€‚<code>readonly</code> ã® <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/IDBFileHandle"><code>LockedFile</code> <small>(en-US)</small></a> ã«æ›¸ãè¾¼ã¿ã‚’è¡ŒãŠã†ã¨ã™ã‚‹ã¨å¤±æ•—ã—ã¾ã™ã€‚</p>
<h4 id="æ›¸ãè¾¼ã¿">æ›¸ãè¾¼ã¿</h4>
<p>locked ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ 3 é€šã‚Šã®æ›¸è¾¼ã¿æ“ä½œãŒã‚ã‚Šã¾ã™:</p>
<ul>
  <li><a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/IDBFileHandle/write"><code>write</code> <small>(en-US)</small></a> : ã“ã‚Œã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«å†…ã® <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/IDBFileHandle/location"><code>LockedFile.location</code> <small>(en-US)</small></a> byte ã®ä½ç½®ã‹ã‚‰æ›¸ãè¾¼ã¿ã‚’é–‹å§‹ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã§ã™ã€‚</li>
  <li><a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/IDBFileHandle/append"><code>append</code> <small>(en-US)</small></a> : ã“ã‚Œã¯ã€å¸¸ã«ãƒ•ã‚¡ã‚¤ãƒ«æœ«å°¾ã«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¿½åŠ ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã§ã™ã€‚</li>
  <li><a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/IDBFileHandle/truncate"><code>truncate</code> <small>(en-US)</small></a> : ã“ã‚Œã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®æœ€åˆã® nth-first byte ã¾ã§ã‚’ç¶­æŒã—ã¦ãã‚Œä»¥é™ã‚’å‰Šé™¤ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã§ã™ã€‚</li>
</ul>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token comment">// Get a LockedFile object from the handle</span>
<span class="token keyword">var</span> myFile <span class="token operator">=</span> myFileHandle<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'readwrite'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Start a writing operation</span>
<span class="token keyword">var</span> writing <span class="token operator">=</span> myFile<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'Some content'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

writing<span class="token punctuation">.</span><span class="token function-variable function">onsuccess</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Writing operation successful'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

writing<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Something goes wrong in the writing process: '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<h4 id="èª­ã¿è¾¼ã¿">èª­ã¿è¾¼ã¿</h4>
<p>ä¸­é–“ã® <a href="/ja/docs/Web/API/File"><code>File</code></a> ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚„ <a href="/ja/docs/Web/API/FileReader"><code>FileReader</code></a> ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ç”¨ã›ãšã«ã€<a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/IDBFileHandle"><code>LockedFile</code> <small>(en-US)</small></a> ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ç›´æ¥èª­ã¿è¾¼ã‚€ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚<a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/IDBFileHandle"><code>LockedFile</code> <small>(en-US)</small></a> ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¯ã€<a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/IDBFileHandle/readAsText"><code>readAsText</code> <small>(en-US)</small></a> ãƒ¡ã‚½ãƒƒãƒ‰ã¨ <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/IDBFileHandle/readAsArrayBuffer"><code>readAsArrayBuffer</code> <small>(en-US)</small></a> ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚</p>
<p>ã“ã‚Œã‚‰ 2 å€‹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«é–‹å§‹ä½ç½®ã‹ã‚‰ã®èª­ã¿è¾¼ã‚€ã‚µã‚¤ã‚ºã‚’ <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/IDBFileHandle/location"><code>LockedFile.location</code> <small>(en-US)</small></a> byte ã§æŒ‡å®šã—ã¦èª­ã¿è¾¼ã¿ã¾ã™ã€‚ç¤ºã™ã‚µã‚¤ã‚ºã‚’æŒ‡å®šã—ã¾ã™ã€‚</p>
<p>ãƒ•ã‚¡ã‚¤ãƒ«å…¨ä½“ã‚’èª­ã¿è¾¼ã‚€ã«ã¯ã€ãã®ã‚µã‚¤ã‚ºã‚’çŸ¥ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®æƒ…å ± (ãŠã‚ˆã³æœ€çµ‚å¤‰æ›´æ—¥ã®æ—¥ä»˜) ã¯ã€<a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/IDBFileHandle/getMetaData"><code>LockedFile.getMetadata()</code> <small>(en-US)</small></a> ãƒ¡ã‚½ãƒƒãƒ‰ã‚’é€šã—ã¦å–å¾—ã§ãã¾ã™ã€‚</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token comment">// Get a LockedFile object from the handle</span>
<span class="token keyword">var</span> myFile <span class="token operator">=</span> myFileHandle<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'readwrite'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Retrieve the size of the file</span>
<span class="token keyword">var</span> getmeta <span class="token operator">=</span> myFile<span class="token punctuation">.</span><span class="token function">getMetadata</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

getmeta<span class="token punctuation">.</span><span class="token function-variable function">onsuccess</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> size <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>result<span class="token punctuation">.</span>size<span class="token punctuation">;</span>

  <span class="token comment">// The reading operation will start with the byte at index 0 in the file</span>
  myFile<span class="token punctuation">.</span>location <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

  <span class="token comment">// Start a reading operation for the whole file content</span>
  <span class="token keyword">var</span> reading <span class="token operator">=</span> myFile<span class="token punctuation">.</span><span class="token function">readAsText</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>

  reading<span class="token punctuation">.</span><span class="token function-variable function">onsuccess</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'The content of the file is:'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  reading<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Something goes wrong in the reading process: '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div><h3 id="file_ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ"><a href="#file_ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ" title="Permalink to File ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ">File ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ</a></h3><div><p>In many cases it can be handy to get a snapshot of the file. For example, there are many APIs that expect <a href="/ja/docs/Web/API/Blob"><code>Blob</code></a> or <a href="/ja/docs/Web/API/File"><code>File</code></a> objects such as domxref("FileReader")}} (which can be easier to use to read the whole file) or <a href="/ja/docs/Web/API/XMLHttpRequest"><code>XMLHttpRequest</code></a>.</p>
<p>It's possible to get a <a href="/ja/docs/Web/API/File"><code>File</code></a> object representing the current state of the file handled by the <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/IDBMutableFile"><code>FileHandle</code> <small>(en-US)</small></a> object by using the <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/IDBMutableFile"><code>getFile</code> <small>(en-US)</small></a> method. Such a <a href="/ja/docs/Web/API/File"><code>File</code></a> object is completely desynchronized from the original file, which means any change made to that object will never be reflected to the handled file as well as any change made to the handled file will never be pushed to the <a href="/ja/docs/Web/API/File"><code>File</code></a> object.</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">var</span> mySnapshot <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> request <span class="token operator">=</span> myFileHandle<span class="token punctuation">.</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

request<span class="token punctuation">.</span><span class="token function-variable function">onsuccess</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  mySnapshot <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div><h3 id="é€²æ—ã®ç®¡ç†"><a href="#é€²æ—ã®ç®¡ç†" title="Permalink to é€²æ—ã®ç®¡ç†">é€²æ—ã®ç®¡ç†</a></h3><div><p>All the methods from the <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/IDBFileHandle"><code>LockedFile</code> <small>(en-US)</small></a> interface return a <a class="page-not-created" title="ã“ã®é …ç›®ã«ã¤ã„ã¦ã®æ–‡æ›¸ã¯ã¾ã æ›¸ã‹ã‚Œã¦ã„ã¾ã›ã‚“ã€‚æ›¸ã„ã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿ"><code>FileRequest</code></a> object. Such an object is basically a <a class="page-not-created" title="ã“ã®é …ç›®ã«ã¤ã„ã¦ã®æ–‡æ›¸ã¯ã¾ã æ›¸ã‹ã‚Œã¦ã„ã¾ã›ã‚“ã€‚æ›¸ã„ã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿ"><code>DOMRequest</code></a> with an extra power: it allows to monitor the progress of an operation. Sometimes writing and reading operations can be very long, therefore it is a good idea to monitor the operation to provide feedback to the user. Such monitoring can be done using the <a class="page-not-created" title="ã“ã®é …ç›®ã«ã¤ã„ã¦ã®æ–‡æ›¸ã¯ã¾ã æ›¸ã‹ã‚Œã¦ã„ã¾ã›ã‚“ã€‚æ›¸ã„ã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿ"><code>FileRequest.onprogress</code></a> event handler.</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">var</span> progress <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'progress'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myFile   <span class="token operator">=</span> myFileHandle<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'readonly'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Let's read a 1GB file</span>
<span class="token keyword">var</span> action   <span class="token operator">=</span> myFile<span class="token punctuation">.</span><span class="token function">readAsArrayBuffer</span><span class="token punctuation">(</span><span class="token number">1000000000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

action<span class="token punctuation">.</span><span class="token function-variable function">onprogress</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>progress<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    progress<span class="token punctuation">.</span>value <span class="token operator">=</span> event<span class="token punctuation">.</span>loaded<span class="token punctuation">;</span>
    progress<span class="token punctuation">.</span>max   <span class="token operator">=</span> event<span class="token punctuation">.</span>total<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

action<span class="token punctuation">.</span><span class="token function-variable function">onsuccess</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Yeah \o/ Just read a 1GB file'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

action<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Oups :( Unable to read a 1GB file'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></div><h2 id="file_ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸"><a href="#file_ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸" title="Permalink to File ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸">File ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸</a></h2><div><p>When a file handle is created, the associated file only exists as a "temporary file" as long as you hold the <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/IDBMutableFile"><code>FileHandle</code> <small>(en-US)</small></a> instance. If you want a file to survive a page refresh/app relaunch, you need to store the handle in a database (not necessarily the one used to create the <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/IDBMutableFile"><code>FileHandle</code> <small>(en-US)</small></a> object).</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">var</span> IDBReq <span class="token operator">=</span> window<span class="token punctuation">.</span>indexedDB<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'myFileStorageDataBase'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// If necessary, let's create a datastore for the files</span>
IDBReq<span class="token punctuation">.</span><span class="token function-variable function">onupgradeneeded</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>result<span class="token punctuation">.</span><span class="token function">createObjectStore</span><span class="token punctuation">(</span><span class="token string">'files'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

IDBReq<span class="token punctuation">.</span><span class="token function-variable function">onsuccess</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> <span class="token constant">DB</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>result<span class="token punctuation">;</span>

  <span class="token comment">// Let's create a new file</span>
  <span class="token keyword">var</span> handleReq <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">.</span><span class="token function">mozCreateFileHandle</span><span class="token punctuation">(</span><span class="token string">"test.txt"</span><span class="token punctuation">,</span> <span class="token string">"plain/text"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  handleReq<span class="token punctuation">.</span><span class="token function-variable function">onsuccess</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> myFileHandle <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>result<span class="token punctuation">;</span>
    <span class="token keyword">var</span> store <span class="token operator">=</span> <span class="token constant">DB</span><span class="token punctuation">.</span><span class="token function">transaction</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'files'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'readwrite'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">objectStore</span><span class="token punctuation">(</span><span class="token string">'files'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Let's store the file permanently</span>
    <span class="token comment">// HINT: it could be handy to use the file name as the storage key</span>
    <span class="token keyword">var</span> storeReq <span class="token operator">=</span> store<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>myFileHandle<span class="token punctuation">,</span> myFileHandle<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>

    storeReq<span class="token punctuation">.</span><span class="token function-variable function">onsuccess</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'The file has been successfully stored and can be retrieved anytime.'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>A file stored that way is physically put on the device. The database itself only stores a pointer to that file. It means that if the <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/IDBMutableFile"><code>FileHandle</code> <small>(en-US)</small></a> object is stored several times in several DBs or several data stores, all those objects will reference the same unique file. This is not a problem because to access the file, a <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/IDBFileHandle"><code>LockedFile</code> <small>(en-US)</small></a> object is required and operations on such object are performed in <a href="http://en.wikipedia.org/wiki/Isolation_%28database_systems%29" class="external" rel=" noopener">isolation</a>, meaning that once a <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/IDBFileHandle"><code>LockedFile</code> <small>(en-US)</small></a> is active, all operations of this <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/IDBFileHandle"><code>LockedFile</code> <small>(en-US)</small></a> are guaranteed to happen sequentially on the underlying file without being interleaved with operations from other <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/IDBFileHandle"><code>LockedFile</code> <small>(en-US)</small></a>.</p></div><h3 id="å®‰å…¨ãªæ›¸è¾¼ã¿æ“ä½œ"><a href="#å®‰å…¨ãªæ›¸è¾¼ã¿æ“ä½œ" title="Permalink to å®‰å…¨ãªæ›¸è¾¼ã¿æ“ä½œ">å®‰å…¨ãªæ›¸è¾¼ã¿æ“ä½œ</a></h3><div><p>For performance reasons, write (and read) operations are done in memory. Periodically, the results of those operation are asynchronously flushed to the device storage area. If for some reason a problem occurs before that, you can lose the results of some operations. To avoid that problem, you can force the data to be flushed by using the <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/IDBFileHandle/flush"><code>LockedFile.flush()</code> <small>(en-US)</small></a> method. Once this method has been successfully called, you can be sure your change on the file will be safe.</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token comment">// Get a LockedFile object from the handle</span>
<span class="token keyword">var</span> myFile <span class="token operator">=</span> myFileHandle<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'readwrite'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Start a writing operation</span>
<span class="token keyword">var</span> writing <span class="token operator">=</span> myFile<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'Some content'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

writing<span class="token punctuation">.</span><span class="token function-variable function">onsuccess</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Writing operation successful'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">var</span> saving <span class="token operator">=</span> myFile<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  saving<span class="token punctuation">.</span><span class="token function-variable function">onsuccess</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'The file has been successfully stored'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

writing<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Something goes wrong in the writing process: '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div><h2 id="api_ã®äº’æ›æ€§"><a href="#api_ã®äº’æ›æ€§" title="Permalink to API ã®äº’æ›æ€§">API ã®äº’æ›æ€§</a></h2><div></div><h3 id="filewriter_ã¨_api_ãŒç•°ãªã‚‹ã®ã¯ãªãœã§ã™ã‹ï¼Ÿ"><a href="#filewriter_ã¨_api_ãŒç•°ãªã‚‹ã®ã¯ãªãœã§ã™ã‹ï¼Ÿ" title="Permalink to FileWriter ã¨ API ãŒç•°ãªã‚‹ã®ã¯ãªãœã§ã™ã‹ï¼Ÿ">FileWriter ã¨ API ãŒç•°ãªã‚‹ã®ã¯ãªãœã§ã™ã‹ï¼Ÿ</a></h3><div><p>The <a href="https://dev.w3.org/2009/dap/file-system/file-writer.html" class="external" rel=" noopener">FileWriter specification</a> defines FileWriters, objects aiming at representing editable files. <a href="https://lists.w3.org/Archives/Public/public-webapps/2012JanMar/0886.html" class="external" rel=" noopener">Discussions on public-webapps</a> led to the conclusion that the API would behave poorly in the case of different entities writing concurrently to the same file. The outcome of this discussion is the FileHandle API with its LockedFile and transaction mechanism.</p></div><h3 id="ä»•æ§˜æ›¸"><a href="#ä»•æ§˜æ›¸" title="Permalink to ä»•æ§˜æ›¸">ä»•æ§˜æ›¸</a></h3><div><p>A formal specification draft is being written. As it does not fully match the current implementation, be warned that the implementation and/or the specification will be subject to changes.</p>
<table>
  <thead>
    <tr>
      <th>ä»•æ§˜</th>
      <th>å®Ÿè£…çŠ¶æ³</th>
      <th>ã‚³ãƒ¡ãƒ³ãƒˆ</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="https://w3c.github.io/filesystem-api/" hreflang="en" lang="en" class="external" title="FileSystem APIã®ä»•æ§˜æ›¸" rel=" noopener">FileSystem API</a></td>
      <td><span class="spec-ed">ç·¨é›†è€…è‰æ¡ˆ</span></td>
      <td>Draft proposal.</td>
    </tr>
  </tbody>
</table></div><h3 id="ãƒ–ãƒ©ã‚¦ã‚¶ã®äº’æ›æ€§"><a href="#ãƒ–ãƒ©ã‚¦ã‚¶ã®äº’æ›æ€§" title="Permalink to ãƒ–ãƒ©ã‚¦ã‚¶ã®äº’æ›æ€§">ãƒ–ãƒ©ã‚¦ã‚¶ã®äº’æ›æ€§</a></h3><div><p>Supported in Firefox 15.</p></div></article><aside class="metadata"><div class="metadata-content-container"><div id="on-github" class="on-github"><h3>Found a problem with this page?</h3><ul><li><a href="https://github.com/mdn/translated-content/edit/main/files/ja/conflicting/web/api/file_and_directory_entries_api/index.md" title="You're going to need to sign in to GitHub first (Opens in a new tab)" target="_blank" rel="noopener noreferrer">Edit on <b>GitHub</b></a></li><li><a href="https://github.com/mdn/translated-content/blob/main/files/ja/conflicting/web/api/file_and_directory_entries_api/index.md" title="Folder: ja/conflicting/web/api/file_and_directory_entries_api (Opens in a new tab)" target="_blank" rel="noopener noreferrer">Source on <b>GitHub</b></a></li><li><a href="https://github.com/mdn/translated-content/issues/new?body=MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fja%2Fdocs%2Fconflicting%2FWeb%2FAPI%2FFile_and_Directory_Entries_API%0A%0A%23%23%23%23+What+information+was+incorrect%2C+unhelpful%2C+or+incomplete%3F%0A%0A%0A%23%23%23%23+Specific+section+or+headline%3F%0A%0A%0A%23%23%23%23+What+did+you+expect+to+see%3F%0A%0A%0A%23%23%23%23+Did+you+test+this%3F+If+so%2C+how%3F%0A%0A%0A%3C%21--+Do+not+make+changes+below+this+line+--%3E%0A%3Cdetails%3E%0A%3Csummary%3EMDN+Content+page+report+details%3C%2Fsummary%3E%0A%0A*+Folder%3A+%60ja%2Fconflicting%2Fweb%2Fapi%2Ffile_and_directory_entries_api%60%0A*+MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fja%2Fdocs%2Fconflicting%2FWeb%2FAPI%2FFile_and_Directory_Entries_API%0A*+GitHub+URL%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Ftranslated-content%2Fblob%2Fmain%2Ffiles%2Fja%2Fconflicting%2Fweb%2Fapi%2Ffile_and_directory_entries_api%2Findex.md%0A*+Last+commit%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Ftranslated-content%2Fcommit%2F921c46a374ab0a9f4cc809af0370f8c412e54701%0A*+Document+last+modified%3A+2022-10-01T03%3A41%3A16.000Z%0A%0A%3C%2Fdetails%3E&amp;title=Issue+with+%22FileHandle+API%22%3A+%28short+summary+here+please%29&amp;labels=needs-triage%2Cl10n-ja" title="This will take you to https://github.com/mdn/content to file a new issue" target="_blank" rel="noopener noreferrer">Report a problem with this content on <b>GitHub</b></a></li><li>Want to fix the problem yourself? See<!-- --> <a href="https://github.com/mdn/content/blob/main/README.md" target="_blank" rel="noopener noreferrer">our Contribution guide</a>.</li></ul></div><p class="last-modified-date"><b>Last modified:</b> <time datetime="2022-10-01T03:41:16.000Z">Oct 1, 2022</time>,<!-- --> <a href="/ja/docs/conflicting/Web/API/File_and_Directory_Entries_API/contributors.txt">by MDN contributors</a></p></div></aside></main></div><footer id="nav-footer" class="page-footer"><div class="content-container"><div class="page-footer-logo"><a href="/ja/" class="logo" aria-label="MDN Web Docs"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 451.74 135" fill="#fff"><path d="M7.14 8.35v111.06h111.05V8.35zm103.71 56c-.48.92-1 1.79-1.46 2.71a3.44 3.44 0 01-3.54 2 2.4 2.4 0 00-1.55.5c-1.37.9-2.76 1.79-4.18 2.63a7.33 7.33 0 01-6.35.34 29.71 29.71 0 00-10.63-2 11.7 11.7 0 00-9.46 4.31 14.84 14.84 0 00-2.13 4.29c-1.24 3.07-2.3 21.38-2.3 26.05 0 0-17.62-3.42-34.15-20.34l4.31-11.32h-13.5l9.76-10.35h-16.8l9.77-10.34H12.69L30.45 34a40.9 40.9 0 0119.77-10.83c7.1-1.22 8.93-.53 13.31.77l2.43.73.85.25 3.1.95a12.56 12.56 0 006.21.09 11.37 11.37 0 018.25 1 8.24 8.24 0 014.1 6.22 7.29 7.29 0 003.61 5.49 59.45 59.45 0 009.32 4.11c2.27.86 4.54 1.84 6.79 2.72a6.81 6.81 0 012.86 2.06 4.81 4.81 0 011.1 2.73c.14 2 .37 4 .47 6a15.24 15.24 0 01-1.77 8.03zM320.12 39.62a5.42 5.42 0 00-4.53 2.13 7.36 7.36 0 00-1.7 4.43v2.36a6.28 6.28 0 001.7 4.46 5.63 5.63 0 004.3 1.82 5.12 5.12 0 004.57-2.27A9.7 9.7 0 00326 47a8.11 8.11 0 00-1.67-5.52 5.36 5.36 0 00-4.21-1.86zM387.38 39.53a5.52 5.52 0 00-4.7 2.15 8.8 8.8 0 00-1.63 5.49 9.23 9.23 0 001.58 5.45 5.38 5.38 0 004.7 2.25 5.61 5.61 0 004.74-2.2 8.91 8.91 0 001.68-5.59 8.24 8.24 0 00-1.75-5.52 5.76 5.76 0 00-4.62-2.03zM299.47 41.35a4.34 4.34 0 00-4-1.92 4.55 4.55 0 00-3.89 1.73 8.37 8.37 0 00-1.58 4.17h10.48a6.3 6.3 0 00-1.01-3.98zM357.74 30.75H352v23.31h5.72q5.47 0 8.35-3t2.93-8.65q0-5.43-2.88-8.55t-8.38-3.11z"></path><path d="M121.55 8.35v70.8h323V8.35zm42.21 22.45h-4V54h3.68v3.73h-11.25V54h3.31V36.79h-.19l-9.63 19.12h-2.12l-10-19.4h-.19V54h3.45v3.73h-11.15V54h3.68V30.8h-4v-3.73H133l11.66 22.56h.19l11.18-22.56h7.7zm29.12 22.67q-4.11 4.28-11.38 4.28h-14.06v-3.69h3.73V30.75h-3.73v-3.68h13.83q7.59 0 11.66 4.29a15.4 15.4 0 014 11 15.33 15.33 0 01-4.05 11.11zm38.89-22.67h-3.68v27h-2.6L208.08 35h-.19v19h4.67v3.73h-12.22V54h3.49V30.8h-4v-3.73h7.08l16.9 22.09h.19V30.8h-4.58v-3.73h12.32zm43.8 27h-3.31l-7.83-23.18h-.19l-7.55 23.18h-3.35l-8.78-27h-2.65v-3.73H253v3.73h-3.87L255 50.71h.23l6.61-19.91H259v-3.73h11v3.73h-2.78l6.61 20.1h.23l5.43-20.1h-4.15v-3.73h11v3.73h-2.54zm26.71-1.51a9.66 9.66 0 01-6.42 2 10.2 10.2 0 01-7.41-2.74c-1.89-1.82-2.83-4.47-2.83-7.93a12.37 12.37 0 012.64-8.12 9 9 0 017.32-3.21 8.62 8.62 0 016.75 2.69 9.65 9.65 0 012.45 6.52 13.67 13.67 0 01-.28 2.69H290q.29 6.71 6.18 6.7a5.2 5.2 0 003.71-1.18 5.82 5.82 0 001.67-2.83l3.45.71a7.21 7.21 0 01-2.73 4.65zm25.77-1.63c-1.51 2.4-3.92 3.61-7.22 3.61s-5.84-1.29-7.22-3.87c0 .25-.1.82-.21 1.7s-.19 1.44-.22 1.7H309c.16-1 .31-2 .47-3.07a21.42 21.42 0 00.24-3.16v-23h-3.4v-3.3h7.55V40.9a9.76 9.76 0 012.67-3.28 7.33 7.33 0 014.74-1.4 8.48 8.48 0 016.5 2.78q2.55 2.74 2.55 7.74a14.6 14.6 0 01-2.27 7.87zm41.39-1.14q-4.11 4.28-11.37 4.28H344v-3.74h3.73V30.75H344v-3.68h13.83q7.59 0 11.66 4.29a15.41 15.41 0 014.06 11 15.34 15.34 0 01-4.11 11.11zm25.65 1.68a10.53 10.53 0 01-7.9 3.07 10 10 0 01-7.63-3 10.93 10.93 0 01-2.8-7.83 12.13 12.13 0 012.69-7.93q2.69-3.3 8-3.3t8 3.28a12 12 0 012.64 7.76 10.86 10.86 0 01-3 7.9zm22.61.57c-1.4 1.66-3.63 2.5-6.68 2.5a9.58 9.58 0 01-7.15-2.76q-2.72-2.76-2.71-7.91a12.25 12.25 0 012.69-8 9.17 9.17 0 017.5-3.28 15 15 0 013.82.48 10.37 10.37 0 013.5 1.65l.85 5.47-3.35.38-.76-3.54a8.07 8.07 0 00-4.11-1 4.9 4.9 0 00-4.39 2.15 9.93 9.93 0 00-1.41 5.55 8.9 8.9 0 001.5 5.38 5.23 5.23 0 004.44 2c2.92 0 4.67-1.7 5.23-5.1l3.5.71a10.34 10.34 0 01-2.47 5.27zm20.48.75a11.68 11.68 0 01-6.63 1.75 15.52 15.52 0 01-8.26-2.08L424 51l3.26.33-.1 2.74a7 7 0 002.06.66 12.63 12.63 0 002.19.19 8.68 8.68 0 003.66-.75 2.5 2.5 0 001.63-2.36 2.25 2.25 0 00-1.32-2.2 12.65 12.65 0 00-3.28-1 47.39 47.39 0 01-3.9-.82 7.5 7.5 0 01-3.25-1.7 4.67 4.67 0 01-1.33-3.66c0-2.36.88-4 2.62-4.91a12 12 0 015.6-1.37 15 15 0 014.08.55 16.65 16.65 0 013.47 1.39l.47 5.1-3.3.37-.48-3.3a9.5 9.5 0 00-4.06-.9 5.62 5.62 0 00-2.87.66 2.33 2.33 0 00-1.15 2.25 2.13 2.13 0 001.3 2.07 11.91 11.91 0 003.21.92 36.69 36.69 0 013.82.83 7.46 7.46 0 013.21 1.74 4.9 4.9 0 011.3 3.73 5.56 5.56 0 01-2.66 4.91z"></path><path d="M181.17 30.75h-5.71v23.31h5.71q5.47 0 8.36-3t2.88-8.61q0-5.43-2.88-8.55t-8.36-3.15zM121.63 119.32V81.74h114.91v37.58zM153.22 109h-2v-6.85a4.8 4.8 0 00-1.58-4 5.57 5.57 0 00-3.55-1.26 5 5 0 00-4.92 3.26 4.19 4.19 0 00-1.88-2.46 5.82 5.82 0 00-3-.8 4.89 4.89 0 00-4.56 2.56v-2.21h-6.28v3.26h2v8.5h-2v3.23h9.11V109h-2.86v-5.25a4.4 4.4 0 01.69-2.56 2.47 2.47 0 012.21-1q2.57 0 2.56 3.63v8.41h6.29V109h-2v-5.25a4.47 4.47 0 01.67-2.56 2.42 2.42 0 012.19-1q2.63 0 2.63 3.63v8.41h6.28zm9.88-12.07q-4 0-6 2.36a8.41 8.41 0 00-2 5.66 7.25 7.25 0 002.17 5.62 8 8 0 005.65 2 8.54 8.54 0 005.94-2.11 7.27 7.27 0 002.34-5.67 8.21 8.21 0 00-2-5.51q-2.07-2.34-6.1-2.34zm-.1 12.35a3 3 0 01-2.63-1.33 5.68 5.68 0 01-.9-3.26 5 5 0 011-3.28 3.23 3.23 0 012.61-1.18 3.5 3.5 0 012.59 1.08 4.56 4.56 0 011.07 3.31 5.21 5.21 0 01-1 3.41 3.33 3.33 0 01-2.74 1.25zm25-2.3l-3.39-.29-.7 2.32H179l8.32-9.54-.32-2.23h-13.19l-.53 5.25 3.16.34.67-2.36h4.65l-8.25 9.53.44 2.26h13.13zm7.62-9.74h-4.46v5.39h4.46zm0 9.61h-4.46v5.39h4.46zm13.54-17.49h-4.23l-6.48 22.88h4.22zm8.68 0h-4.23l-6.45 22.88h4.19zm15 22.51l-.07-2.26a1.22 1.22 0 01-.56.1c-.69 0-1-.39-1-1.16v-6.49a4.39 4.39 0 00-1.8-3.84 7 7 0 00-4.16-1.28 14.55 14.55 0 00-3.16.3 24.14 24.14 0 00-3.29 1.06l-.56 3.46 3.39.4.5-1.69a2.78 2.78 0 011.08-.37 11.3 11.3 0 011.25-.07c1.19 0 1.89.37 2.09 1.1a8.55 8.55 0 01.3 2.26v.5a8.91 8.91 0 00-1.18-.11h-1.21a12.64 12.64 0 00-4.81.88 3.53 3.53 0 00-2.18 3.64 3.66 3.66 0 001.48 3.33 5.63 5.63 0 003.11 1 4.67 4.67 0 003-.91 6.78 6.78 0 001.8-2 3 3 0 003.33 3 5.54 5.54 0 002.66-.85zm-9.25-2.32a1.69 1.69 0 01-1.36-.52 1.81 1.81 0 01-.43-1.21 1.67 1.67 0 01.86-1.68 4.63 4.63 0 012-.42 7.69 7.69 0 011.07.07l1.06.13a3.58 3.58 0 01-1.08 2.74 3.24 3.24 0 01-2.11.89z"></path></svg></a></div><ul class="link-list-mdn"><li><a href="/ja/docs/Web">Web Technologies</a></li><li><a href="/ja/docs/Learn">Learn Web Development</a></li><li><a href="/ja/docs/MDN/About">About MDN</a></li><li><a href="/ja/docs/MDN/Feedback">Feedback</a></li></ul><ul class="link-list-moz"><li><a href="https://www.mozilla.org/about/" target="_blank" rel="noopener noreferrer">About</a></li><li><a href="https://shop.spreadshirt.com/mdn-store/" target="_blank" rel="noopener noreferrer">MDN Web Docs Store</a></li><li><a href="https://www.mozilla.org/contact/" target="_blank" rel="noopener noreferrer">Contact Us</a></li><li><a href="https://www.mozilla.org/firefox/?utm_source=developer.mozilla.org&amp;utm_campaign=footer&amp;utm_medium=referral" target="_blank" rel="noopener noreferrer">Firefox</a></li></ul><div class="social social-mdn"><h4>MDN</h4><ul><li><a class="social-icon twitter" href="https://twitter.com/mozdevnet" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">MDN on Twitter</span></a></li><li><a class="social-icon github" href="https://github.com/mdn/" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">MDN on Github</span></a></li></ul></div><div class="social social-moz"><h4>Mozilla</h4><ul><li><a class="social-icon twitter" href="https://twitter.com/mozilla" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">Mozilla on Twitter</span></a></li><li><a class="social-icon instagram" href="https://www.instagram.com/mozillagram/" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">Mozilla on Instagram</span></a></li></ul></div><p id="license" class="footer-license">Â© 2005-<!-- -->2022<!-- --> Mozilla and individual contributors. Content is available under<!-- --> <a href="/docs/MDN/About#Copyrights_and_licenses">these licenses</a>.</p><ul class="footer-legal"><li><a href="https://www.mozilla.org/about/legal/terms/mozilla" target="_blank" rel="noopener noreferrer">Terms</a></li><li><a href="https://www.mozilla.org/privacy/websites/" target="_blank" rel="noopener noreferrer">Privacy</a></li><li><a href="https://www.mozilla.org/privacy/websites/#cookies" target="_blank" rel="noopener noreferrer">Cookies</a></li></ul></div></footer><div class="page-overlay hidden"></div></div><script type="application/json" id="hydration">{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"FileHandle API","mdn_url":"/ja/docs/conflicting/Web/API/File_and_Directory_Entries_API","locale":"ja","native":"æ—¥æœ¬èª","sidebarHTML":"","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<div class=\"notecard warning\" id=\"sect1\"><p><strong>éæ¨™æº–:</strong> ã“ã®æ©Ÿèƒ½ã¯æ¨™æº–ã§ã¯ãªãã€æ¨™æº–åŒ–ã®äºˆå®šã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã«ã¯ä½¿ç”¨ã—ãªã„ã§ãã ã•ã„ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚ˆã£ã¦ã¯ä½¿ç”¨ã§ããªã„ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚å®Ÿè£…ã”ã¨ã«å¤§ããªå·®ãŒã‚ã‚‹ã“ã¨ã‚‚ã‚ã‚Šã€å°†æ¥ã¯æŒ¯ã‚‹èˆã„ãŒå¤‰ã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p></div>\n<p>FileHandle API ã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆã‚„å†…å®¹ã®å¤‰æ›´ãªã©ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ“ä½œã™ã‚‹ãŸã‚ã® API ã§ã™ (<a href=\"/en-US/docs/Web/API/File\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">File API (en-US)</a> ã¨ã¯ç•°ãªã‚Šã¾ã™)ã€‚ã“ã® API ã‚’é€šã˜ãŸãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œã¯ã€ãƒ‡ãƒã‚¤ã‚¹ä¸Šã«ç‰©ç†çš„ã«æ ¼ç´ã§ãã€éƒ¨åˆ†çš„ãªç·¨é›†ã«ã¯ã€ç«¶åˆå•é¡Œã‚’é¿ã‘ã‚‹ãŸã‚ã«ã‚¿ãƒ¼ãƒ³ãƒ™ãƒ¼ã‚¹ã®ãƒ­ãƒƒã‚¯æ©Ÿæ§‹ãŒä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>"}},{"type":"prose","value":{"id":"api_æ¦‚è¦³","title":"API æ¦‚è¦³","isH3":false,"content":"<p>ã“ã® API ã¯ã€æ¬¡ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’åŸºã«ã—ã¦ã„ã¾ã™:</p>\n<ul>\n  <li><a class=\"page-not-created\" title=\"ã“ã®é …ç›®ã«ã¤ã„ã¦ã®æ–‡æ›¸ã¯ã¾ã æ›¸ã‹ã‚Œã¦ã„ã¾ã›ã‚“ã€‚æ›¸ã„ã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿ\"><code>IDBDatabase.mozCreateFileHandle</code></a></li>\n  <li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBMutableFile\"><code>FileHandle</code> <small>(en-US)</small></a></li>\n  <li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBFileHandle\"><code>LockedFile</code> <small>(en-US)</small></a></li>\n  <li><a class=\"page-not-created\" title=\"ã“ã®é …ç›®ã«ã¤ã„ã¦ã®æ–‡æ›¸ã¯ã¾ã æ›¸ã‹ã‚Œã¦ã„ã¾ã›ã‚“ã€‚æ›¸ã„ã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿ\"><code>FileRequest</code></a></li>\n</ul>\n<p>ã“ã‚Œã¯ã€File API ã® <a href=\"/ja/docs/Web/API/File\"><code>File</code></a> ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãŠã‚ˆã³ <a href=\"/ja/docs/Web/API/Blob\"><code>Blob</code></a> ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¨ã‚‚æ¥ç¶šã—ã¦ã„ã¾ã™ã€‚</p>"}},{"type":"prose","value":{"id":"åŸºæœ¬çš„ãªæ“ä½œ","title":"åŸºæœ¬çš„ãªæ“ä½œ","isH3":false,"content":""}},{"type":"prose","value":{"id":"filehandle_ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ä½œæˆ","title":"FileHandle ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ä½œæˆ","isH3":true,"content":"<p>ã“ã®ã‚¤ãƒ³ãƒ†ãƒ³ãƒˆã¯ IndexedDB ã‚’é€šã˜ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿å­˜ã—ã¦ã„ã‚‹ãŸã‚ã€<a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBMutableFile\"><code>FileHandle</code> <small>(en-US)</small></a> ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã™ã‚‹ã®ã« <a href=\"/en-US/docs/Web/API/IDBFactory#open\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">IndexedDB Database (en-US)</a> ãŒå¿…è¦ã§ã™ã€‚</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> IDBReq <span class=\"token operator\">=</span> indexedDB<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"myFileStorageDataBase\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nIDBReq<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onsuccess</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> <span class=\"token constant\">DB</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>result<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> buildHandle <span class=\"token operator\">=</span> <span class=\"token constant\">DB</span><span class=\"token punctuation\">.</span><span class=\"token function\">mozCreateFileHandle</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test.txt\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"plain/text\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  buildHandle<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onsuccess</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> myFileHandle <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>result<span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'handle'</span><span class=\"token punctuation\">,</span> myFileHandle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p><a class=\"page-not-created\" title=\"ã“ã®é …ç›®ã«ã¤ã„ã¦ã®æ–‡æ›¸ã¯ã¾ã æ›¸ã‹ã‚Œã¦ã„ã¾ã›ã‚“ã€‚æ›¸ã„ã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿ\"><code>mozCreateFileHandle()</code></a> ã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«åã¨ä»»æ„ã®å½¢å¼ã® 2 å€‹ã®å¼•æ•°ã‚’å–ã‚Šã¾ã™ã€‚ã“ã‚Œã‚‰ã¯èª¬æ˜ã®ãŸã‚ã®ã‚‚ã®ã§ã‚ã‚Šã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ã¯ä½¿ç”¨ã•ã‚Œã¾ã›ã‚“ã€‚ã—ã‹ã—ã€ã“ã‚Œã‚‰ã®å€¤ã‹ã‚‰ <a href=\"/ja/docs/Web/API/File\"><code>File</code></a> ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã® <a href=\"/ja/docs/Web/API/File/name\" title=\"name\"><code>name</code></a> ã¨ <a href=\"/ja/docs/Web/API/File/type\" title=\"type\"><code>type</code></a> ã«ç¶™æ‰¿ã—ã¦ç”Ÿæˆã™ã‚‹ãŸã‚ã€<a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBMutableFile\"><code>FileHandle</code> <small>(en-US)</small></a> ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã¨ã£ã¦é‡è¦ã§ã™ã€‚ã¤ã¾ã‚Šã€ä¾‹ãˆã°ç©ºæ–‡å­—ã«ã™ã‚‹ã¨å®Ÿéš›ã«å­˜åœ¨ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã¨ä¸€è‡´ã—ãªã„ãŸã‚ã€ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªåå‰ã«ã—ãªãã¦ã‚‚ã‚ˆã„ã§ã™ã€‚</p>\n<div class=\"notecard note\" id=\"sect2\">\n  <p><strong>Note:</strong> <strong>è£œè¶³:</strong> ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã¯ã€<a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBMutableFile\"><code>FileHandle</code> <small>(en-US)</small></a> ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä¿æŒã—ã¦ã„ã‚‹é–“ã®ã¿å­˜åœ¨ã™ã‚‹ã€Œä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã€ã‚’ä½œæˆã™ã‚‹ã ã‘ã§ã™ã€‚ãƒšãƒ¼ã‚¸æ›´æ–°ã‚„ã‚¢ãƒ—ãƒªå†èµ·å‹•ã«é­é‡ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ‰±ã„ãŸã„å ´åˆã¯ã€ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è‡ªèº«ãªã©ã€ãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒ³ãƒ‰ãƒ«ã‚’æ°¸ç¶šçš„ãªå ´æ‰€ã«æ ¼ç´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚è©³ã—ãã¯ã€å¾Œè¿°ã® <a href=\"#file_storage\">File storage</a> ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚</p>\n</div>"}},{"type":"prose","value":{"id":"ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿æ›¸ãæ“ä½œ","title":"ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿æ›¸ãæ“ä½œ","isH3":true,"content":"<p>ãƒãƒ³ãƒ‰ãƒ«ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã‚“ã ã‚Šæ›¸ã„ãŸã‚Šã™ã‚‹ã«ã¯ã€<a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBFileHandle\"><code>LockedFile</code> <small>(en-US)</small></a> ã‚’å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚<a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBMutableFile/open\"><code>FileHandle.open()</code> <small>(en-US)</small></a> ãƒ¡ã‚½ãƒƒãƒ‰ãŒã“ã®æ“ä½œã®ãŸã‚ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æä¾›ã—ã¦ãŠã‚Šã€<code>readonly</code> ã¾ãŸã¯ <code>readwrite</code> ãŒå¯èƒ½ã§ã™ã€‚<code>readonly</code> ã® <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBFileHandle\"><code>LockedFile</code> <small>(en-US)</small></a> ã«æ›¸ãè¾¼ã¿ã‚’è¡ŒãŠã†ã¨ã™ã‚‹ã¨å¤±æ•—ã—ã¾ã™ã€‚</p>\n<h4 id=\"æ›¸ãè¾¼ã¿\">æ›¸ãè¾¼ã¿</h4>\n<p>locked ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ 3 é€šã‚Šã®æ›¸è¾¼ã¿æ“ä½œãŒã‚ã‚Šã¾ã™:</p>\n<ul>\n  <li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBFileHandle/write\"><code>write</code> <small>(en-US)</small></a> : ã“ã‚Œã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«å†…ã® <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBFileHandle/location\"><code>LockedFile.location</code> <small>(en-US)</small></a> byte ã®ä½ç½®ã‹ã‚‰æ›¸ãè¾¼ã¿ã‚’é–‹å§‹ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã§ã™ã€‚</li>\n  <li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBFileHandle/append\"><code>append</code> <small>(en-US)</small></a> : ã“ã‚Œã¯ã€å¸¸ã«ãƒ•ã‚¡ã‚¤ãƒ«æœ«å°¾ã«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¿½åŠ ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã§ã™ã€‚</li>\n  <li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBFileHandle/truncate\"><code>truncate</code> <small>(en-US)</small></a> : ã“ã‚Œã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®æœ€åˆã® nth-first byte ã¾ã§ã‚’ç¶­æŒã—ã¦ãã‚Œä»¥é™ã‚’å‰Šé™¤ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã§ã™ã€‚</li>\n</ul>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// Get a LockedFile object from the handle</span>\n<span class=\"token keyword\">var</span> myFile <span class=\"token operator\">=</span> myFileHandle<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'readwrite'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Start a writing operation</span>\n<span class=\"token keyword\">var</span> writing <span class=\"token operator\">=</span> myFile<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Some content'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nwriting<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onsuccess</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Writing operation successful'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nwriting<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onerror</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Something goes wrong in the writing process: '</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<h4 id=\"èª­ã¿è¾¼ã¿\">èª­ã¿è¾¼ã¿</h4>\n<p>ä¸­é–“ã® <a href=\"/ja/docs/Web/API/File\"><code>File</code></a> ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚„ <a href=\"/ja/docs/Web/API/FileReader\"><code>FileReader</code></a> ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ç”¨ã›ãšã«ã€<a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBFileHandle\"><code>LockedFile</code> <small>(en-US)</small></a> ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ç›´æ¥èª­ã¿è¾¼ã‚€ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚<a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBFileHandle\"><code>LockedFile</code> <small>(en-US)</small></a> ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¯ã€<a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBFileHandle/readAsText\"><code>readAsText</code> <small>(en-US)</small></a> ãƒ¡ã‚½ãƒƒãƒ‰ã¨ <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBFileHandle/readAsArrayBuffer\"><code>readAsArrayBuffer</code> <small>(en-US)</small></a> ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚</p>\n<p>ã“ã‚Œã‚‰ 2 å€‹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«é–‹å§‹ä½ç½®ã‹ã‚‰ã®èª­ã¿è¾¼ã‚€ã‚µã‚¤ã‚ºã‚’ <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBFileHandle/location\"><code>LockedFile.location</code> <small>(en-US)</small></a> byte ã§æŒ‡å®šã—ã¦èª­ã¿è¾¼ã¿ã¾ã™ã€‚ç¤ºã™ã‚µã‚¤ã‚ºã‚’æŒ‡å®šã—ã¾ã™ã€‚</p>\n<p>ãƒ•ã‚¡ã‚¤ãƒ«å…¨ä½“ã‚’èª­ã¿è¾¼ã‚€ã«ã¯ã€ãã®ã‚µã‚¤ã‚ºã‚’çŸ¥ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®æƒ…å ± (ãŠã‚ˆã³æœ€çµ‚å¤‰æ›´æ—¥ã®æ—¥ä»˜) ã¯ã€<a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBFileHandle/getMetaData\"><code>LockedFile.getMetadata()</code> <small>(en-US)</small></a> ãƒ¡ã‚½ãƒƒãƒ‰ã‚’é€šã—ã¦å–å¾—ã§ãã¾ã™ã€‚</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// Get a LockedFile object from the handle</span>\n<span class=\"token keyword\">var</span> myFile <span class=\"token operator\">=</span> myFileHandle<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'readwrite'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Retrieve the size of the file</span>\n<span class=\"token keyword\">var</span> getmeta <span class=\"token operator\">=</span> myFile<span class=\"token punctuation\">.</span><span class=\"token function\">getMetadata</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ngetmeta<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onsuccess</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> size <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>result<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// The reading operation will start with the byte at index 0 in the file</span>\n  myFile<span class=\"token punctuation\">.</span>location <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Start a reading operation for the whole file content</span>\n  <span class=\"token keyword\">var</span> reading <span class=\"token operator\">=</span> myFile<span class=\"token punctuation\">.</span><span class=\"token function\">readAsText</span><span class=\"token punctuation\">(</span>size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  reading<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onsuccess</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'The content of the file is:'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  reading<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onerror</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Something goes wrong in the reading process: '</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"file_ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ","title":"File ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆ","isH3":true,"content":"<p>In many cases it can be handy to get a snapshot of the file. For example, there are many APIs that expect <a href=\"/ja/docs/Web/API/Blob\"><code>Blob</code></a> or <a href=\"/ja/docs/Web/API/File\"><code>File</code></a> objects such as domxref(\"FileReader\")}} (which can be easier to use to read the whole file) or <a href=\"/ja/docs/Web/API/XMLHttpRequest\"><code>XMLHttpRequest</code></a>.</p>\n<p>It's possible to get a <a href=\"/ja/docs/Web/API/File\"><code>File</code></a> object representing the current state of the file handled by the <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBMutableFile\"><code>FileHandle</code> <small>(en-US)</small></a> object by using the <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBMutableFile\"><code>getFile</code> <small>(en-US)</small></a> method. Such a <a href=\"/ja/docs/Web/API/File\"><code>File</code></a> object is completely desynchronized from the original file, which means any change made to that object will never be reflected to the handled file as well as any change made to the handled file will never be pushed to the <a href=\"/ja/docs/Web/API/File\"><code>File</code></a> object.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> mySnapshot <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> request <span class=\"token operator\">=</span> myFileHandle<span class=\"token punctuation\">.</span><span class=\"token function\">getFile</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nrequest<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onsuccess</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  mySnapshot <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"é€²æ—ã®ç®¡ç†","title":"é€²æ—ã®ç®¡ç†","isH3":true,"content":"<p>All the methods from the <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBFileHandle\"><code>LockedFile</code> <small>(en-US)</small></a> interface return a <a class=\"page-not-created\" title=\"ã“ã®é …ç›®ã«ã¤ã„ã¦ã®æ–‡æ›¸ã¯ã¾ã æ›¸ã‹ã‚Œã¦ã„ã¾ã›ã‚“ã€‚æ›¸ã„ã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿ\"><code>FileRequest</code></a> object. Such an object is basically a <a class=\"page-not-created\" title=\"ã“ã®é …ç›®ã«ã¤ã„ã¦ã®æ–‡æ›¸ã¯ã¾ã æ›¸ã‹ã‚Œã¦ã„ã¾ã›ã‚“ã€‚æ›¸ã„ã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿ\"><code>DOMRequest</code></a> with an extra power: it allows to monitor the progress of an operation. Sometimes writing and reading operations can be very long, therefore it is a good idea to monitor the operation to provide feedback to the user. Such monitoring can be done using the <a class=\"page-not-created\" title=\"ã“ã®é …ç›®ã«ã¤ã„ã¦ã®æ–‡æ›¸ã¯ã¾ã æ›¸ã‹ã‚Œã¦ã„ã¾ã›ã‚“ã€‚æ›¸ã„ã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿ\"><code>FileRequest.onprogress</code></a> event handler.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> progress <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'progress'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> myFile   <span class=\"token operator\">=</span> myFileHandle<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'readonly'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Let's read a 1GB file</span>\n<span class=\"token keyword\">var</span> action   <span class=\"token operator\">=</span> myFile<span class=\"token punctuation\">.</span><span class=\"token function\">readAsArrayBuffer</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000000000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\naction<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onprogress</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>progress<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    progress<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>loaded<span class=\"token punctuation\">;</span>\n    progress<span class=\"token punctuation\">.</span>max   <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>total<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\naction<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onsuccess</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Yeah \\o/ Just read a 1GB file'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\naction<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onerror</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Oups :( Unable to read a 1GB file'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"file_ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸","title":"File ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸","isH3":false,"content":"<p>When a file handle is created, the associated file only exists as a \"temporary file\" as long as you hold the <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBMutableFile\"><code>FileHandle</code> <small>(en-US)</small></a> instance. If you want a file to survive a page refresh/app relaunch, you need to store the handle in a database (not necessarily the one used to create the <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBMutableFile\"><code>FileHandle</code> <small>(en-US)</small></a> object).</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> IDBReq <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>indexedDB<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'myFileStorageDataBase'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// If necessary, let's create a datastore for the files</span>\nIDBReq<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onupgradeneeded</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>result<span class=\"token punctuation\">.</span><span class=\"token function\">createObjectStore</span><span class=\"token punctuation\">(</span><span class=\"token string\">'files'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nIDBReq<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onsuccess</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> <span class=\"token constant\">DB</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>result<span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Let's create a new file</span>\n  <span class=\"token keyword\">var</span> handleReq <span class=\"token operator\">=</span> <span class=\"token constant\">DB</span><span class=\"token punctuation\">.</span><span class=\"token function\">mozCreateFileHandle</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"test.txt\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"plain/text\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  handleReq<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onsuccess</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> myFileHandle <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>result<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> store <span class=\"token operator\">=</span> <span class=\"token constant\">DB</span><span class=\"token punctuation\">.</span><span class=\"token function\">transaction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'files'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'readwrite'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">objectStore</span><span class=\"token punctuation\">(</span><span class=\"token string\">'files'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Let's store the file permanently</span>\n    <span class=\"token comment\">// HINT: it could be handy to use the file name as the storage key</span>\n    <span class=\"token keyword\">var</span> storeReq <span class=\"token operator\">=</span> store<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>myFileHandle<span class=\"token punctuation\">,</span> myFileHandle<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    storeReq<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onsuccess</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'The file has been successfully stored and can be retrieved anytime.'</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>A file stored that way is physically put on the device. The database itself only stores a pointer to that file. It means that if the <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBMutableFile\"><code>FileHandle</code> <small>(en-US)</small></a> object is stored several times in several DBs or several data stores, all those objects will reference the same unique file. This is not a problem because to access the file, a <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBFileHandle\"><code>LockedFile</code> <small>(en-US)</small></a> object is required and operations on such object are performed in <a href=\"http://en.wikipedia.org/wiki/Isolation_%28database_systems%29\" class=\"external\" rel=\" noopener\">isolation</a>, meaning that once a <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBFileHandle\"><code>LockedFile</code> <small>(en-US)</small></a> is active, all operations of this <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBFileHandle\"><code>LockedFile</code> <small>(en-US)</small></a> are guaranteed to happen sequentially on the underlying file without being interleaved with operations from other <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBFileHandle\"><code>LockedFile</code> <small>(en-US)</small></a>.</p>"}},{"type":"prose","value":{"id":"å®‰å…¨ãªæ›¸è¾¼ã¿æ“ä½œ","title":"å®‰å…¨ãªæ›¸è¾¼ã¿æ“ä½œ","isH3":true,"content":"<p>For performance reasons, write (and read) operations are done in memory. Periodically, the results of those operation are asynchronously flushed to the device storage area. If for some reason a problem occurs before that, you can lose the results of some operations. To avoid that problem, you can force the data to be flushed by using the <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBFileHandle/flush\"><code>LockedFile.flush()</code> <small>(en-US)</small></a> method. Once this method has been successfully called, you can be sure your change on the file will be safe.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// Get a LockedFile object from the handle</span>\n<span class=\"token keyword\">var</span> myFile <span class=\"token operator\">=</span> myFileHandle<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'readwrite'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Start a writing operation</span>\n<span class=\"token keyword\">var</span> writing <span class=\"token operator\">=</span> myFile<span class=\"token punctuation\">.</span><span class=\"token function\">append</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Some content'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nwriting<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onsuccess</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Writing operation successful'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">var</span> saving <span class=\"token operator\">=</span> myFile<span class=\"token punctuation\">.</span><span class=\"token function\">flush</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  saving<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onsuccess</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'The file has been successfully stored'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nwriting<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onerror</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Something goes wrong in the writing process: '</span> <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"api_ã®äº’æ›æ€§","title":"API ã®äº’æ›æ€§","isH3":false,"content":""}},{"type":"prose","value":{"id":"filewriter_ã¨_api_ãŒç•°ãªã‚‹ã®ã¯ãªãœã§ã™ã‹ï¼Ÿ","title":"FileWriter ã¨ API ãŒç•°ãªã‚‹ã®ã¯ãªãœã§ã™ã‹ï¼Ÿ","isH3":true,"content":"<p>The <a href=\"https://dev.w3.org/2009/dap/file-system/file-writer.html\" class=\"external\" rel=\" noopener\">FileWriter specification</a> defines FileWriters, objects aiming at representing editable files. <a href=\"https://lists.w3.org/Archives/Public/public-webapps/2012JanMar/0886.html\" class=\"external\" rel=\" noopener\">Discussions on public-webapps</a> led to the conclusion that the API would behave poorly in the case of different entities writing concurrently to the same file. The outcome of this discussion is the FileHandle API with its LockedFile and transaction mechanism.</p>"}},{"type":"prose","value":{"id":"ä»•æ§˜æ›¸","title":"ä»•æ§˜æ›¸","isH3":true,"content":"<p>A formal specification draft is being written. As it does not fully match the current implementation, be warned that the implementation and/or the specification will be subject to changes.</p>\n<table>\n  <thead>\n    <tr>\n      <th>ä»•æ§˜</th>\n      <th>å®Ÿè£…çŠ¶æ³</th>\n      <th>ã‚³ãƒ¡ãƒ³ãƒˆ</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td><a href=\"https://w3c.github.io/filesystem-api/\" hreflang=\"en\" lang=\"en\" class=\"external\" title=\"FileSystem APIã®ä»•æ§˜æ›¸\" rel=\" noopener\">FileSystem API</a></td>\n      <td><span class=\"spec-ed\">ç·¨é›†è€…è‰æ¡ˆ</span></td>\n      <td>Draft proposal.</td>\n    </tr>\n  </tbody>\n</table>"}},{"type":"prose","value":{"id":"ãƒ–ãƒ©ã‚¦ã‚¶ã®äº’æ›æ€§","title":"ãƒ–ãƒ©ã‚¦ã‚¶ã®äº’æ›æ€§","isH3":true,"content":"<p>Supported in Firefox 15.</p>"}}],"toc":[{"text":"API æ¦‚è¦³","id":"api_æ¦‚è¦³"},{"text":"åŸºæœ¬çš„ãªæ“ä½œ","id":"åŸºæœ¬çš„ãªæ“ä½œ"},{"text":"File ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸","id":"file_ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸"},{"text":"API ã®äº’æ›æ€§","id":"api_ã®äº’æ›æ€§"}],"summary":"FileHandle API ã¯ã€ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆã‚„å†…å®¹ã®å¤‰æ›´ãªã©ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ“ä½œã™ã‚‹ãŸã‚ã® API ã§ã™ (File API (en-US) ã¨ã¯ç•°ãªã‚Šã¾ã™)ã€‚ã“ã® API ã‚’é€šã˜ãŸãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œã¯ã€ãƒ‡ãƒã‚¤ã‚¹ä¸Šã«ç‰©ç†çš„ã«æ ¼ç´ã§ãã€éƒ¨åˆ†çš„ãªç·¨é›†ã«ã¯ã€ç«¶åˆå•é¡Œã‚’é¿ã‘ã‚‹ãŸã‚ã«ã‚¿ãƒ¼ãƒ³ãƒ™ãƒ¼ã‚¹ã®ãƒ­ãƒƒã‚¯æ©Ÿæ§‹ãŒä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚","popularity":0,"modified":"2022-10-01T03:41:16.000Z","source":{"folder":"ja/conflicting/web/api/file_and_directory_entries_api","github_url":"https://github.com/mdn/translated-content/blob/main/files/ja/conflicting/web/api/file_and_directory_entries_api/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"pageTitle":"FileHandle API | MDN","noIndexing":true}}</script></body></html>