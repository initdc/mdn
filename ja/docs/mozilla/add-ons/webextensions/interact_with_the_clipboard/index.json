{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"クリップボードとのやりとり","mdn_url":"/ja/docs/Mozilla/Add-ons/WebExtensions/Interact_with_the_clipboard","locale":"ja","native":"日本語","sidebarHTML":"\n  <ol>\n    <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions\"><strong>ブラウザー拡張機能</strong></a></li>\n    <li class=\"toggle\">\n      <details>\n        <summary>始めましょう</summary>\n        <ol>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/What_are_WebExtensions\">拡張機能とは何か?</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Your_first_WebExtension\">初めての拡張機能</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Your_second_WebExtension\">2つめの拡張機能</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension\">拡張機能の中身</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Examples\">拡張機能の例</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/What_next_\">次にどうするのか？</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary>概念</summary>\n        <ol>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Using_the_JavaScript_APIs\">JavaScript API 群の利用</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Content_scripts\">コンテンツスクリプト</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Match_patterns\">マッチパターン</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Working_with_files\">ファイルの操作</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Internationalization\">多言語対応</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Content_Security_Policy\">Content Security Policy</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Native_messaging\">Native messaging</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Differences_between_API_implementations\">Differences between API implementations</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Chrome_incompatibilities\">Chrome との非互換性</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary>ユーザーインターフェイス</summary>\n        <ol>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/user_interface\">ユーザーインターフェイス</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/user_interface/Browser_action\">ブラウザーツールバーボタン</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/user_interface/Page_actions\">アドレスバーボタン</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/user_interface/Sidebars\">サイドバー</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/user_interface/Context_menu_items\">コンテキストメニュー項目</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/user_interface/Options_pages\">オプションページ</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/user_interface/Extension_pages\">ページ拡張</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/user_interface/Notifications\">通知</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/user_interface/Omnibox\">Address bar suggestions</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/user_interface/devtools_panels\">開発ツールパネル</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary>逆引きリファレンス</summary>\n        <ol>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Intercept_HTTP_requests\">HTTP リクエストへの介入</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Modify_a_web_page\">web ページの変更</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Safely_inserting_external_content_into_a_page\">外部コンテンツの挿入</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Sharing_objects_with_page_scripts\">Share objects with page scripts</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Add_a_button_to_the_toolbar\">ツールバーボタンの追加</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Implement_a_settings_page\">設定画面の実装</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API\">Tabs API 群の使い方</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Bookmarks_API\">Bookmark API 群の使い方</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Cookies_API\">Cookie API 群の使い方</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Work_with_contextual_identities\">contextual identities の使い方</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Interact_with_the_clipboard\">クリップボードとのやりとり</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Build_a_cross_browser_extension\">Build a cross-browser extension</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Firefox_differentiators\">Firefox differentiators</a></summary>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary>JavaScript API 群</summary>\n        <ol><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Browser_support_for_JavaScript_APIs\">Browser support for JavaScript APIs</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/alarms\">alarms</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/bookmarks\">bookmarks</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/browserAction\">browserAction</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/browserSettings\">browserSettings</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/browsingData\">browsingData</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/clipboard\">clipboard</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/commands\">commands</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/contentScripts\">contentScripts</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/contextualIdentities\">contextualIdentities</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/cookies\">cookies</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/downloads\">downloads</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/events\">events</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/extension\">extension</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/extensionTypes\">extensionTypes</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/find\">find</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/history\">history</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/i18n\">i18n</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/identity\">identity</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/idle\">idle</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/management\">management</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/menus\">menus</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/notifications\">notifications</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/omnibox\">omnibox</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/pageAction\">pageAction</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/permissions\">permissions</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/pkcs11\">pkcs11</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/privacy\">privacy</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/proxy\">proxy</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/runtime\">runtime</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/sessions\">sessions</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/sidebarAction\">sidebarAction</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/storage\">storage</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/tabs\">tabs</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/theme\">theme</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/topSites\">topSites</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/types\">types</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/webNavigation\">webNavigation</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/webRequest\">webRequest</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/windows\">windows</a></li></ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n      <summary>Manifest keys</summary>\n        <ol>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json\">序章</a></li>\n        </ol>\n      <ol><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/author\">author</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/background\">background</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_action\">browser_action</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_specific_settings\">browser_specific_settings</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/chrome_settings_overrides\">chrome_settings_overrides</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/chrome_url_overrides\">chrome_url_overrides</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/commands\">commands</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_scripts\">content_scripts</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_security_policy\">content_security_policy</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/default_locale\">default_locale</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/description\">description</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/developer\">developer</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/devtools_page\">devtools_page</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/homepage_url\">homepage_url</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/icons\">icons</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/incognito\">incognito</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/manifest_version\">manifest_version</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/name\">name</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/omnibox\">omnibox</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/optional_permissions\">optional_permissions</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/options_ui\">options_ui</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/page_action\">page_action</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions\">permissions</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/protocol_handlers\">protocol_handlers</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/short_name\">short_name</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/sidebar_action\">sidebar_action</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/theme\">theme</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/version\">version</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/version_name\">version_name</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/web_accessible_resources\">web_accessible_resources</a></li></ol>\n      </details>\n    </li>\n     <li class=\"toggle\">\n      <details>\n        <summary>Extension Workshop</summary>\n        <ol>\n          <li><a href=\"https://extensionworkshop.com/documentation/develop/\">Develop</a></li>\n          <li><a href=\"https://extensionworkshop.com/documentation/publish/\">Publish</a></li>\n          <li><a href=\"https://extensionworkshop.com/documentation/manage/\">Manage</a></li>\n          <li><a href=\"https://extensionworkshop.com/documentation/enterprise/\">Enterprise</a></li>\n        </ol>\n      </details>\n    </li>\n    <li><a href=\"/ja/docs/Mozilla/Add-ons/Contact_us\"><strong>コンタクト</strong></a></li>\n    <li class=\"toggle\">\n      <details>\n        <summary>チャンネル</summary>\n        <ol>\n          <li><a href=\"https://blog.mozilla.org/addons\">ブログ</a></li>\n          <li><a href=\"https://discourse.mozilla.org/c/add-ons\">フォーラム</a></li>\n          <li><a href=\"https://chat.mozilla.org/#/room/%23addons:mozilla.org\">Add-ons chat</a></li>\n        </ol>\n      </details>\n    </li>\n  </ol>\n","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>拡張機能でクリップボードを扱うのは、Web API の <a href=\"/ja/docs/Web/API/Document/execCommand\" title=\"document.execCommand\"><code>document.execCommand</code></a> メソッド（非推奨）から <a href=\"/ja/docs/Web/API/Clipboard\" title=\"navigator.clipboard\"><code>navigator.clipboard</code></a> メソッドに移行しています。</p>\n<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>Note:</strong> <a href=\"/ja/docs/Web/API/Clipboard\" title=\"navigator.clipboard\"><code>navigator.clipboard</code></a> API は最近追加された仕様であり、すべてのブラウザーで完全に実装されているとは限りません。この記事ではいくつかの制限事項を説明しますが、API があなたのニーズをサポートしていることを確認するために、使用する前に必ず各メソッドの互換性テーブルを確認するようにしてください。</p>\n</div>\n<p>2 つの API の違いは、<a href=\"/ja/docs/Web/API/Document/execCommand\" title=\"document.execCommand\"><code>document.execCommand</code></a> がキーボードのコピー、カット、ペーストの操作に似ていて、ウェブページとクリップボード間でデータを交換するのに対し、<a href=\"/ja/docs/Web/API/Clipboard\" title=\"navigator.clipboard\"><code>navigator.clipboard</code></a> はクリップボードとの間で任意のデータの書き込みと読み出しを行うことです。</p>\n<p><a href=\"/ja/docs/Web/API/Clipboard\" title=\"navigator.clipboard\"><code>navigator.clipboard</code></a> は、読み書きのためのメソッドを個別に提供しています。</p>\n<ul>\n  <li>テキストを扱う場合は <a href=\"/ja/docs/Web/API/Clipboard/readText\" title=\"navigator.clipboard.readText()\"><code>navigator.clipboard.readText()</code></a> と <a href=\"/ja/docs/Web/API/Clipboard/writeText\" title=\"navigator.clipboard.writeText()\"><code>navigator.clipboard.writeText()</code></a> が使えます。</li>\n  <li>画像、リッチテキスト、HTML、その他のリッチコンテンツを扱う場合は <a href=\"/ja/docs/Web/API/Clipboard/read\" title=\"navigator.clipboard.read()\"><code>navigator.clipboard.read()</code></a> と <a href=\"/ja/docs/Web/API/Clipboard/write\" title=\"navigator.clipboard.write()\"><code>navigator.clipboard.write()</code></a> が使えます。</li>\n</ul>\n<p>しかし、<a href=\"/ja/docs/Web/API/Clipboard/readText\" title=\"navigator.clipboard.readText()\"><code>navigator.clipboard.readText()</code></a> と <a href=\"/ja/docs/Web/API/Clipboard/writeText\" title=\"navigator.clipboard.writeText()\"><code>navigator.clipboard.writeText()</code></a> はすべてのブラウザーで動作しますが、<a href=\"/ja/docs/Web/API/Clipboard/read\" title=\"navigator.clipboard.read()\"><code>navigator.clipboard.read()</code></a> と <a href=\"/ja/docs/Web/API/Clipboard/write\" title=\"navigator.clipboard.write()\"><code>navigator.clipboard.write()</code></a> は動作するとは限りません。例えば、執筆時点の Firefox では、<a href=\"/ja/docs/Web/API/Clipboard/read\" title=\"navigator.clipboard.read()\"><code>navigator.clipboard.read()</code></a> と <a href=\"/ja/docs/Web/API/Clipboard/write\" title=\"navigator.clipboard.write()\"><code>navigator.clipboard.write()</code></a> は完全に実装されていないため、次のことを留意する必要があります。</p>\n<ul>\n  <li>画像を扱う場合は、クリップボードに画像を書き込むために <a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/clipboard/setImageData\"><code>browser.clipboard.setImageData()</code></a> を使い、ウェブページに画像を貼り付けるために <a href=\"/ja/docs/Web/API/Document/execCommand\" title=\"document.execCommand(&quot;paste&quot;)\"><code>document.execCommand(\"paste\")</code></a> を使います。</li>\n  <li>リッチコンテンツ（HTML、画像を含むリッチテキストなど）をクリップボードに書き込むには、<a href=\"/ja/docs/Web/API/Document/execCommand\" title=\"document.execCommand(&quot;copy&quot;)\"><code>document.execCommand(\"copy\")</code></a> か <a href=\"/ja/docs/Web/API/Document/execCommand\" title=\"document.execCommand(&quot;cut&quot;)\"><code>document.execCommand(\"cut\")</code></a> を使います。その後、<a href=\"/ja/docs/Web/API/Clipboard/read\" title=\"navigator.clipboard.read()\"><code>navigator.clipboard.read()</code></a> （推奨）または <a href=\"/ja/docs/Web/API/Document/execCommand\" title=\"document.execCommand(&quot;paste&quot;)\"><code>document.execCommand(\"paste\")</code></a> を使ってクリップボードからコンテンツを読み取ります。</li>\n</ul>"}},{"type":"prose","value":{"id":"クリップボードへの書き込み","title":"クリップボードへの書き込み","isH3":false,"content":"<p>ここでは、クリップボードにデータを書き込むためのオプションについて説明します。</p>"}},{"type":"prose","value":{"id":"clipboard_api_を使用する","title":"Clipboard API を使用する","isH3":true,"content":"<p>Clipboard API は、拡張機能から任意のデータをクリップボードに書き込むものです。この API を使用するには、<code>manifest.json</code> ファイルに <code>\"clipboardRead\"</code> または <code>\"clipboardWrite\"</code> というパーミッションを設定する必要があります。この API は<a href=\"/ja/docs/Web/Security/Secure_Contexts\">安全なコンテキスト</a>でのみ利用可能であるため、<code>http:</code> ページで動作するコンテンツスクリプトからは使用できず、<code>https:</code> ページでのみ使用できます。</p>\n<p>ページスクリプトの場合、Web API の <a href=\"/ja/docs/Web/API/Permissions\" title=\"navigator.permissions\"><code>navigator.permissions</code></a> を使用して <code>\"clipboard-write\"</code> パーミッションを要求する必要があります。そのパーミッションは、<a href=\"/ja/docs/Web/API/Permissions/query\" title=\"navigator.permissions.query()\"><code>navigator.permissions.query()</code></a> を使って確認することができます。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>navigator<span class=\"token punctuation\">.</span>permissions<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"clipboard-write\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">result</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">.</span>state <span class=\"token operator\">===</span> <span class=\"token string\">\"granted\"</span> <span class=\"token operator\">||</span> result<span class=\"token punctuation\">.</span>state <span class=\"token operator\">===</span> <span class=\"token string\">\"prompt\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/* write to the clipboard now */</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<div class=\"notecard note\" id=\"sect2\">\n  <p><strong>Note:</strong> <code>clipboard-write</code> のパーミッション名は Firefox ではサポートされておらず、Chromium ブラウザーでのみサポートされています。</p>\n</div>\n<p>この関数は、文字列を受け取り、それをクリップボードに書き込みます。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">updateClipboard</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">newClip</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  navigator<span class=\"token punctuation\">.</span>clipboard<span class=\"token punctuation\">.</span><span class=\"token function\">writeText</span><span class=\"token punctuation\">(</span>newClip<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/* clipboard successfully set */</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/* clipboard write failed */</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"execcommand_を使用する","title":"execCommand() を使用する","isH3":true,"content":"<p><a href=\"/ja/docs/Web/API/Document/execCommand\" title=\"document.execCommand()\"><code>document.execCommand()</code></a> メソッドの <code>\"cut\"</code> と <code>\"copy\"</code> コマンドは、クリップボードの内容を選択した素材に置き換えるために使用されます。これらのコマンドは、ユーザーアクションに対する短時間のイベントハンドラー（例えば、クリックハンドラー）で特別な許可なしに使用することができます。</p>\n<p>例えば、以下のような HTML を含むポップアップがあったとします。</p>\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>input<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>copy<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Copy<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<p><code>\"copy\"</code> ボタンで <a href=\"/ja/docs/Web/HTML/Element/input\"><code>&lt;input&gt;</code></a> 要素の内容をコピーさせるには、次のようなコードを使用します。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">copy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> copyText <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#input\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  copyText<span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">execCommand</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"copy\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\ndocument<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#copy\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> copy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p><code>execCommand()</code> の呼び出しはクリックイベントハンドラーの中にあるので、特別な権限は必要ありません。</p>\n<p>しかし、その代わりに、アラームからコピーを起動させたとしましょう。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">copy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> copyText <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#input\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  copyText<span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">execCommand</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"copy\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nbrowser<span class=\"token punctuation\">.</span>alarms<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">delayInMinutes</span><span class=\"token operator\">:</span> <span class=\"token number\">0.1</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nbrowser<span class=\"token punctuation\">.</span>alarms<span class=\"token punctuation\">.</span>onAlarm<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span>copy<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>ブラウザーによっては、うまく動作しないことがあります。Firefox では動作せず、コンソールに次のようなメッセージが表示されます。</p>\n<p><code>document.execCommand('cut'/'copy') was denied because it was not called from inside a short running user-generated event handler.</code></p>\n<p>このユースケースを有効にするには、<code>\"clipboardWrite\"</code> <a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions\">パーミッション</a>を要求する必要があります。つまり <code>\"clipboardWrite\"</code> は、ユーザーアクションのための短時間のイベントハンドラーの外側でクリップボードに書き込むことを可能にします。</p>\n<div class=\"notecard note\" id=\"sect3\">\n  <p><strong>Note:</strong> <a href=\"/ja/docs/Web/API/Document/execCommand\" title=\"document.execCommand()\"><code>document.execCommand()</code></a> は、<code>type=\"hidden\"</code> の入力フィールド、HTML5 属性の <code>\"hidden\"</code>、または <code>\"display: none;\"</code> を使った CSS ルールにマッチするものでは機能しません。したがって、<code>span</code>, <code>div</code>, <code>p</code> タグに「クリップボードにコピー」ボタンを追加するには、入力の位置を絶対座標に設定し、ビューポートの外に移動させるなどの回避策をとる必要があります。</p>\n</div>"}},{"type":"prose","value":{"id":"特定のブラウザーにおける留意事項","title":"特定のブラウザーにおける留意事項","isH3":true,"content":"<p>クリップボードなどの API は日進月歩で進化しているため、ブラウザーによって動作にばらつきがあります。</p>\n<p>Chrome の場合:</p>\n<ul>\n  <li>ユーザーが作成したイベントハンドラーの外でクリップボードに書き込む場合でも、<code>\"clipboardWrite\"</code> は必要ありません。</li>\n</ul>\n<p>Firefox の場合:</p>\n<ul>\n  <li><a href=\"/ja/docs/Web/API/Clipboard/write\" title=\"navigator.clipboard.write()\"><code>navigator.clipboard.write()</code></a> はサポートされていません。</li>\n</ul>\n<p>詳細は<a href=\"#%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E3%83%BC%E3%81%AE%E4%BA%92%E6%8F%9B%E6%80%A7\">ブラウザーの互換性</a>を参照してください。</p>"}},{"type":"prose","value":{"id":"クリップボードからの読み込み","title":"クリップボードからの読み込み","isH3":false,"content":"<p>ここでは、クリップボードからデータを読み込んだり、貼り付けたりするためのオプションについて説明します。</p>"}},{"type":"prose","value":{"id":"clipboard_api_を使用する_2","title":"Clipboard API を使用する","isH3":true,"content":"<p>Clipboard API の <a href=\"/ja/docs/Web/API/Clipboard/readText\" title=\"navigator.clipboard.readText()\"><code>navigator.clipboard.readText()</code></a> と <a href=\"/ja/docs/Web/API/Clipboard/read\" title=\"navigator.clipboard.read()\"><code>navigator.clipboard.read()</code></a> メソッドを使うと、<a href=\"/ja/docs/Web/Security/Secure_Contexts\">安全なコンテキスト</a>でクリップボードから任意のテキストまたはバイナリデータを読み取ることができます。これにより、編集可能な要素に貼り付けることなく、クリップボードのデータにアクセスすることができます。</p>\n<p>一度 <a href=\"/ja/docs/Web/API/Permissions_API\">Permissions API</a> から <code>\"clipboard-read\"</code> パーミッションを取得すると、クリップボードから簡単に読み取ることができるようになります。例えば、このコードのスニペットはクリップボードからテキストを取得し、ID が <code>\"outbox\"</code> の要素の内容をそのテキストで置き換えます。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>navigator<span class=\"token punctuation\">.</span>clipboard<span class=\"token punctuation\">.</span><span class=\"token function\">readText</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">clipText</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"outbox\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>innerText <span class=\"token operator\">=</span> clipText<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"execcommand_を使用する_2","title":"execCommand() を使用する","isH3":true,"content":"<p><a href=\"/ja/docs/Web/API/Document/execCommand\" title=\"document.execCommand(&quot;paste&quot;)\"><code>document.execCommand(\"paste\")</code></a> を使用するには、拡張機能には <code>\"clipboardRead\"</code> <a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions\">パーミッション</a>が必要です。これは、<a href=\"/ja/docs/Web/API/Element/click_event\" title=\"click\"><code>click</code></a> や <a href=\"/ja/docs/Web/API/Element/keypress_event\" title=\"keypress\"><code>keypress</code></a> などのユーザーが生成したイベントハンドラーから <code>\"paste\"</code> コマンドを使用する場合でも同様です。</p>\n<p>このような内容を含む HTML を考えてみましょう。</p>\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>textarea</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>output<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>textarea</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>paste<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Paste<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<p>ユーザーが <code>\"paste\"</code> の <a href=\"/ja/docs/Web/HTML/Element/button\"><code>&lt;button&gt;</code></a> をクリックしたときに、クリップボードから ID が <code>\"output\"</code> の <a href=\"/ja/docs/Web/HTML/Element/textarea\"><code>&lt;textarea&gt;</code></a> 要素の内容を設定するには、次のようなコードを使用します。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">paste</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> pasteText <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#output\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  pasteText<span class=\"token punctuation\">.</span><span class=\"token function\">focus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">execCommand</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"paste\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>pasteText<span class=\"token punctuation\">.</span>textContent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\ndocument<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#paste\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> paste<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"特定のブラウザーにおける留意事項_2","title":"特定のブラウザーにおける留意事項","isH3":true,"content":"<p>Firefox はバージョン 54 から <code>\"clipboardRead\"</code> <a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions\">パーミッション</a>をサポートしていますが、<a href=\"/ja/docs/Web/Guide/HTML/Editable_content\">コンテンツ編集可能モード</a>の要素への貼り付けのみをサポートしており、コンテンツスクリプトの場合は <a href=\"/ja/docs/Web/HTML/Element/textarea\"><code>&lt;textarea&gt;</code></a> でのみ機能します。バックグラウンドスクリプトでは、どの要素もコンテンツ編集可能モードに設定できます。</p>"}},{"type":"browser_compatibility","value":{"title":"ブラウザーの互換性","id":"ブラウザーの互換性","isH3":false,"data":null,"query":"api.Clipboard,webextensions.api.clipboard","browsers":null}},{"type":"prose","value":{"id":"関連情報","title":"関連情報","isH3":false,"content":"<ul>\n  <li><a href=\"/ja/docs/Web/API/Clipboard_API\">Clipboard API</a></li>\n  <li><a href=\"/ja/docs/Web/API/Permissions_API\">Permissions API</a></li>\n  <li><a href=\"/ja/docs/Web/Guide/HTML/Editable_content\">コンテンツを編集可能にする</a></li>\n  <li><a href=\"/ja/docs/Web/HTML/Global_attributes#attr-contenteditable\"><code>contenteditable</code></a></li>\n</ul>"}}],"toc":[{"text":"クリップボードへの書き込み","id":"クリップボードへの書き込み"},{"text":"クリップボードからの読み込み","id":"クリップボードからの読み込み"},{"text":"ブラウザーの互換性","id":"ブラウザーの互換性"},{"text":"関連情報","id":"関連情報"}],"summary":"拡張機能でクリップボードを扱うのは、Web API の document.execCommand メソッド（非推奨）から navigator.clipboard メソッドに移行しています。","popularity":0.0007,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Interact with the clipboard","locale":"en-US","native":"English (US)"},{"title":"Interagir avec le presse-papier","locale":"fr","native":"Français"},{"title":"Interact with the clipboard","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"ja/mozilla/add-ons/webextensions/interact_with_the_clipboard","github_url":"https://github.com/mdn/translated-content/blob/main/files/ja/mozilla/add-ons/webextensions/interact_with_the_clipboard/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/ja/docs/Mozilla","title":"Mozilla"},{"uri":"/ja/docs/Mozilla/Add-ons","title":"アドオン"},{"uri":"/ja/docs/Mozilla/Add-ons/WebExtensions","title":"ブラウザー拡張機能"},{"uri":"/ja/docs/Mozilla/Add-ons/WebExtensions/Interact_with_the_clipboard","title":"クリップボードとのやりとり"}],"pageTitle":"クリップボードとのやりとり - Mozilla | MDN","noIndexing":false}}