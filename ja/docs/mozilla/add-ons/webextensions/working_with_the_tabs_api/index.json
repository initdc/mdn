{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"Tabs API を使う","mdn_url":"/ja/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API","locale":"ja","native":"日本語","sidebarHTML":"\n  <ol>\n    <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions\"><strong>ブラウザー拡張機能</strong></a></li>\n    <li class=\"toggle\">\n      <details>\n        <summary>始めましょう</summary>\n        <ol>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/What_are_WebExtensions\">拡張機能とは何か?</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Your_first_WebExtension\">初めての拡張機能</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Your_second_WebExtension\">2つめの拡張機能</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension\">拡張機能の中身</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Examples\">拡張機能の例</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/What_next_\">次にどうするのか？</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary>概念</summary>\n        <ol>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Using_the_JavaScript_APIs\">JavaScript API 群の利用</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Content_scripts\">コンテンツスクリプト</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Match_patterns\">マッチパターン</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Working_with_files\">ファイルの操作</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Internationalization\">多言語対応</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Content_Security_Policy\">Content Security Policy</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Native_messaging\">Native messaging</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Differences_between_API_implementations\">Differences between API implementations</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Chrome_incompatibilities\">Chrome との非互換性</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary>ユーザーインターフェイス</summary>\n        <ol>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/user_interface\">ユーザーインターフェイス</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/user_interface/Browser_action\">ブラウザーツールバーボタン</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/user_interface/Page_actions\">アドレスバーボタン</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/user_interface/Sidebars\">サイドバー</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/user_interface/Context_menu_items\">コンテキストメニュー項目</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/user_interface/Options_pages\">オプションページ</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/user_interface/Extension_pages\">ページ拡張</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/user_interface/Notifications\">通知</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/user_interface/Omnibox\">Address bar suggestions</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/user_interface/devtools_panels\">開発ツールパネル</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary>逆引きリファレンス</summary>\n        <ol>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Intercept_HTTP_requests\">HTTP リクエストへの介入</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Modify_a_web_page\">web ページの変更</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Safely_inserting_external_content_into_a_page\">外部コンテンツの挿入</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Sharing_objects_with_page_scripts\">Share objects with page scripts</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Add_a_button_to_the_toolbar\">ツールバーボタンの追加</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Implement_a_settings_page\">設定画面の実装</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API\">Tabs API 群の使い方</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Bookmarks_API\">Bookmark API 群の使い方</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Cookies_API\">Cookie API 群の使い方</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Work_with_contextual_identities\">contextual identities の使い方</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Interact_with_the_clipboard\">クリップボードとのやりとり</a></li>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Build_a_cross_browser_extension\">Build a cross-browser extension</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Firefox_differentiators\">Firefox differentiators</a></summary>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary>JavaScript API 群</summary>\n        <ol><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Browser_support_for_JavaScript_APIs\">Browser support for JavaScript APIs</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/alarms\">alarms</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/bookmarks\">bookmarks</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/browserAction\">browserAction</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/browserSettings\">browserSettings</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/browsingData\">browsingData</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/clipboard\">clipboard</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/commands\">commands</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/contentScripts\">contentScripts</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/contextualIdentities\">contextualIdentities</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/cookies\">cookies</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/downloads\">downloads</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/events\">events</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/extension\">extension</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/extensionTypes\">extensionTypes</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/find\">find</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/history\">history</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/i18n\">i18n</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/identity\">identity</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/idle\">idle</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/management\">management</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/menus\">menus</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/notifications\">notifications</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/omnibox\">omnibox</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/pageAction\">pageAction</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/permissions\">permissions</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/pkcs11\">pkcs11</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/privacy\">privacy</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/proxy\">proxy</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/runtime\">runtime</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/sessions\">sessions</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/sidebarAction\">sidebarAction</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/storage\">storage</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/tabs\">tabs</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/theme\">theme</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/topSites\">topSites</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/types\">types</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/webNavigation\">webNavigation</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/webRequest\">webRequest</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/windows\">windows</a></li></ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n      <summary>Manifest keys</summary>\n        <ol>\n          <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json\">序章</a></li>\n        </ol>\n      <ol><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/author\">author</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/background\">background</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_action\">browser_action</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_specific_settings\">browser_specific_settings</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/chrome_settings_overrides\">chrome_settings_overrides</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/chrome_url_overrides\">chrome_url_overrides</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/commands\">commands</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_scripts\">content_scripts</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_security_policy\">content_security_policy</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/default_locale\">default_locale</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/description\">description</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/developer\">developer</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/devtools_page\">devtools_page</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/homepage_url\">homepage_url</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/icons\">icons</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/incognito\">incognito</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/manifest_version\">manifest_version</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/name\">name</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/omnibox\">omnibox</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/optional_permissions\">optional_permissions</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/options_ui\">options_ui</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/page_action\">page_action</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions\">permissions</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/protocol_handlers\">protocol_handlers</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/short_name\">short_name</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/sidebar_action\">sidebar_action</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/theme\">theme</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/version\">version</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/version_name\">version_name</a></li><li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/web_accessible_resources\">web_accessible_resources</a></li></ol>\n      </details>\n    </li>\n     <li class=\"toggle\">\n      <details>\n        <summary>Extension Workshop</summary>\n        <ol>\n          <li><a href=\"https://extensionworkshop.com/documentation/develop/\">Develop</a></li>\n          <li><a href=\"https://extensionworkshop.com/documentation/publish/\">Publish</a></li>\n          <li><a href=\"https://extensionworkshop.com/documentation/manage/\">Manage</a></li>\n          <li><a href=\"https://extensionworkshop.com/documentation/enterprise/\">Enterprise</a></li>\n        </ol>\n      </details>\n    </li>\n    <li><a href=\"/ja/docs/Mozilla/Add-ons/Contact_us\"><strong>コンタクト</strong></a></li>\n    <li class=\"toggle\">\n      <details>\n        <summary>チャンネル</summary>\n        <ol>\n          <li><a href=\"https://blog.mozilla.org/addons\">ブログ</a></li>\n          <li><a href=\"https://discourse.mozilla.org/c/add-ons\">フォーラム</a></li>\n          <li><a href=\"https://chat.mozilla.org/#/room/%23addons:mozilla.org\">Add-ons chat</a></li>\n        </ol>\n      </details>\n    </li>\n  </ol>\n","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>タブを使うとユーザーはブラウザーウィンドウに複数のウェブページを開いてウェブページ間をスイッチできるようになります。Tabs API により、タブを操作して、新しい方法でタブを使ったり拡張機能の機能として配布できます。</p>\n<p>このハウツー記事では次のようなことを見ていきます:</p>\n<ul>\n  <li>Tabs API を使うのに必要な権限</li>\n  <li>タブについての詳しい探検と<a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/tabs/query\"><code>tabs.query</code></a>を使ったプロパティ</li>\n  <li>タブの作成、複製、移動、更新、読み込み、と削除</li>\n  <li>タブのズームレベル操作</li>\n  <li>タブの CSS 操作</li>\n</ul>\n<p>その次には、API で提供されるその他のいろいろな機能を見て終わります。</p>\n<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>Note:</strong> There are some Tab API features covered elsewhere. These are the methods you can use to manipulate tab content with scripts (<a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/connect\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">tabs.connect (en-US)</a>, <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/sendMessage\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">tabs.sendMessage (en-US)</a>, and <a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/tabs/executeScript\"><code>tabs.executeScript</code></a>). If you want more information on these methods, see the Concepts article <a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Content_scripts\">Content scripts</a> and the how-to guide <a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Modify_a_web_page\">Modify a web page</a>.</p>\n</div>"}},{"type":"prose","value":{"id":"権限と_tabs_api","title":"権限と Tabs API","isH3":false,"content":"<p>Tabs API 機能の大半では権限は不要ですが、次の例外はあります:</p>\n<ul>\n  <li>Tab オブジェクトの <code>Tab.url</code>, <code>Tab.title</code>, <code>Tab.favIconUrl</code> プロパティにアクセスするには<code>\"tabs</code>\" 権限が必要です。Firefox では、URL の <a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/tabs/query\">query</a> を実行するのに<code>\"tabs</code>\"が要ります。</li>\n  <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/tabs/executeScript\"><code>tabs.executeScript</code></a> や <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/insertCSS\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">tabs.insertCSS (en-US)</a> には <a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions#host_permissions\">Host 権限</a>が必要です。</li>\n</ul>\n<p>下記は、拡張機能の manifest.json ファイルで <code>\"tabs\"</code> 権限を要求する方法です:</p>\n<div class=\"code-example\"><pre class=\"brush: json notranslate\"><code><span class=\"token property\">\"permissions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token string\">\"&lt;all_urls&gt;\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"tabs\"</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n</code></pre></div>\n<p>この要求により、訪問するすべてのウェブサイトですべての Tabs API 機能を使うことができます。また、host 権限不要の <a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/tabs/executeScript\"><code>tabs.executeScript</code></a> や <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/insertCSS\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">tabs.insertCSS (en-US)</a> を使うのに、<a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions#activetab_permission\"><code>\"activeTab\"</code></a>の形で権限を要求する別のこの権限は <code>\"tabs\"</code> に <code>&lt;all_urls&gt;</code> つきのものと同じですが、次の 2 つの制限があります:</p>\n<ul>\n  <li>ユーザーは拡張機能のページアクション、コンテキストメニュー、ショートカットキーいずれかでやりとりせねばならない。</li>\n  <li>アクティブなタブ内の権限のみ許可される。</li>\n</ul>\n<p>このアプローチの利点は、拡張機能が “Access your data for all websites” という警告をユーザーに表示しないことです。これは <code>&lt;all_urls&gt;</code> 権限により、拡張機能がいつでもどんなタブでも実行できるのに対し、<a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions#activetab_permission\"><code>\"activeTab\"</code></a> では、現在のタブでのユーザーが要求したアクションのみ実行するためです。</p>"}},{"type":"prose","value":{"id":"タブとそのプロパティの探検","title":"タブとそのプロパティの探検","isH3":false,"content":"<p>すべてのブラウザーウィンドウのすべてのタブのリストを取得したいときもあるでしょう。ある条件にマッチするタブ、例えば特定のタブから開かれた、あるいはあるドメインのページを表示したもの、のサブセットを発見したいこともあるでしょう。タブのリストを持っていれば、そのプロパティを詳しく知りたくなるでしょう。</p>\n<p>これが <a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/tabs/query\"><code>tabs.query</code></a> の出てくる場所です。単独で使ってすべてのタブを取得したり、<code>queryInfo</code> オブジェクト—これでタブがアクティブかとか、現在のウィンドウ内かとかといった、17 の条件のいくつかを指定する条件—をつけて、<a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/tabs/query\"><code>tabs.query</code></a> はタブの情報を含んだ <a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/tabs/Tab\"><code>tabs.Tab</code></a> オブジェクトの配列を返します。</p>\n<p>現在のタブだけの情報が欲しいときは、そのタブの <a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/tabs/Tab\"><code>tabs.Tab</code></a> オブジェクトを <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/getCurrent\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">tabs.getCurrent (en-US)</a> を使って取得できます。タブの ID がある場合、<a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/tabs/Tab\"><code>tabs.Tab</code></a> オブジェクトを <a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/tabs/get\"><code>tabs.get</code></a> を使って取得できます。</p>"}},{"type":"prose","value":{"id":"方法の実例","title":"方法の実例","isH3":true,"content":"<p><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/tabs/query\"><code>tabs.query</code></a> と <a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/tabs/Tab\"><code>tabs.Tab</code></a> の使われ方を見るために、<a href=\"https://github.com/mdn/webextensions-examples/tree/master/tabs-tabs-tabs\" class=\"external\" rel=\" noopener\">tabs-tabs-tabs</a> の例で “switch to tabs” のリストをツールバーボタンのポップアップに追加するのを見てみましょう。</p>\n<p>\n  <img src=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API/Switch_to_tab.png\" alt=\"The tabs tabs tabs toolbar menu showing the switch to tap area\" width=\"369\" height=\"645\" loading=\"lazy\">\n</p>"}},{"type":"prose","value":{"id":"manifest.json","title":"manifest.json","isH3":true,"content":"<p>これが <a href=\"https://github.com/mdn/webextensions-examples/blob/master/tabs-tabs-tabs/manifest.json\" class=\"external\" rel=\" noopener\">manifest.json</a> です:</p>\n<div class=\"code-example\"><pre class=\"brush: json notranslate\"><code><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"browser_action\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"browser_style\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"default_title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Tabs, tabs, tabs\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"default_popup\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"tabs.html\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"A list of methods you can perform on a tab.\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"homepage_url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://github.com/mdn/webextensions-examples/tree/master/tabs-tabs-tabs\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"manifest_version\"</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Tabs, tabs, tabs\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"permissions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"tabs\"</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.0\"</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<div class=\"notecard note\" id=\"sect2\">\n  <p><strong>Note:</strong> 次のことに注意します:</p>\n  <ul>\n    <li>**tabs.html は <code>browser_action</code> の <code>default_popup</code> で定義されていること。**これはユーザーが拡張機能のツールバーアイコンをクリックするといつでも表示されます。</li>\n    <li>**権限にタブが入っていること。**これはタブリスト機能をサポートするのに必要であり、なぜなら拡張機能がポップアップに表示するためにタブのタイトルを読み取るためです。</li>\n  </ul>\n</div>"}},{"type":"prose","value":{"id":"tabs.html","title":"tabs.html","isH3":true,"content":"<p>tabs.html では拡張機能のポップアップのコンテンツを定義します。</p>\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">&gt;</span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">&gt;</span></span>\n\n <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>utf-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tabs.css<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/&gt;</span></span>\n <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">&gt;</span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">&gt;</span></span>\n\n <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>panel<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>panel-section panel-section-header<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n     <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text-section-header<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Tabs-tabs-tabs<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tabs-move-beginning<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Move active tab to the beginning of the window<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">&gt;</span></span>\n\n\n…\n\nDefine the other menu items\n…\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>switch-tabs<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n\n     <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span>Switch to tab<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span>\n\n     <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tabs-list<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n\n <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tabs.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">&gt;</span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<p>上記のまとめとして:</p>\n<ol>\n  <li>メニュー項目が定義されます。</li>\n  <li>タブのリストを入れるため、ID が <code>tabs-list</code> の空の <code>div</code> が定義されます。</li>\n  <li>tabs.js が呼ばれます。</li>\n</ol>"}},{"type":"prose","value":{"id":"tabs.js","title":"tabs.js","isH3":true,"content":"<p><a href=\"https://github.com/mdn/webextensions-examples/blob/master/tabs-tabs-tabs/tabs.js\" class=\"external\" rel=\" noopener\">tabs.js</a> では、タブのリストが作られて、ポップアップに追加される方法を見ていきましょう。</p>\n<h4 id=\"ポップアップの作成\">ポップアップの作成</h4>\n<p>まず、tabs.html が読み込まれたとき、<code>listTabs()</code> を実行するイベントハンドラを追加します。:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>document<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"DOMContentLoaded\"</span><span class=\"token punctuation\">,</span> listTabs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p><code>listTabs()</code> は最初に <code>getCurrentWindowTabs()</code> を呼び出します。ここで現在のウィンドウ内のタブの <a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/tabs/Tab\"><code>tabs.Tab</code></a> オブジェクトを取得するのに<a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/tabs/query\"><code>tabs.query</code></a> が使われます:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">getCurrentWindowTabs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> browser<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">currentWindow</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>今度は、ポップアップのコンテンツを作成するために <code>ListTabs()</code> が準備できています。</p>\n<p>開始するには:</p>\n<ol>\n  <li><code>tabs-list</code> <code>div</code> を取得。</li>\n  <li>文書のフラグメントを作成 (ここにリストが作成される)。</li>\n  <li>カウンターをセット。</li>\n  <li><code>tabs-list</code> <code>div</code> のコンテンツをクリアする。</li>\n</ol>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">listTabs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n <span class=\"token function\">getCurrentWindowTabs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tabs</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> tabsList <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'tabs-list'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> currentTabs <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createDocumentFragment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> limit <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> counter <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n    tabsList<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>次に、それぞれのタブのリンクを作ります:</p>\n<ol>\n  <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/tabs/Tab\"><code>tabs.Tab</code></a> オブジェクトからの最初の 5 項目でループする。</li>\n  <li>各項目ごとに、文書のフラグメントのハイパーリンクを追加する。\n    <ul>\n      <li>リンクのラベル—つまり、そのテキスト—が、タブのタイトル (ない場合はその ID)を使って、セットされる</li>\n      <li>タブの ID を使ってリンクのアドレスがセットされる。</li>\n    </ul>\n  </li>\n</ol>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> tab <span class=\"token keyword\">of</span> tabs<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>tab<span class=\"token punctuation\">.</span>active <span class=\"token operator\">&amp;&amp;</span> counter <span class=\"token operator\">&lt;=</span> limit<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> tabLink <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        tabLink<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> tab<span class=\"token punctuation\">.</span>title <span class=\"token operator\">||</span> tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">;</span>\n\n       tabLink<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'href'</span><span class=\"token punctuation\">,</span> tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        tabLink<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'switch-tabs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        currentTabs<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>tabLink<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n     <span class=\"token punctuation\">}</span>\n\n     counter <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>最後に、<code>tabs-list</code> div に文書のフラグメントが書き込まれる:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>    tabsList<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>currentTabs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<h4 id=\"アクティブタブを操作する\">アクティブタブを操作する</h4>\n<p>関連するもう 1 つの例として、“Alert active tab” インフォオプションがあり、これはアクティブなタブのすべての <a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/tabs/Tab\"><code>tabs.Tab</code></a> オブジェクトのプロパティをアラートにダンプするものです:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> <span class=\"token string\">\"tabs-alertinfo\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token function\">callOnActiveTab</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tab</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token keyword\">let</span> props <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n     <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> item <span class=\"token keyword\">in</span> tab<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       props <span class=\"token operator\">+=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span> item <span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> = </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span> tab<span class=\"token punctuation\">[</span>item<span class=\"token punctuation\">]</span> <span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> \\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n     <span class=\"token punctuation\">}</span>\n     <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p><code>callOnActiveTab()</code> では、アクティブなセットを求めて <a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/tabs/Tab\"><code>tabs.Tab</code></a> オブジェクトをループすることで、アクティブなタブを探します:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>document<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n <span class=\"token keyword\">function</span> <span class=\"token function\">callOnActiveTab</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">callback</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token function\">getCurrentWindowTabs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tabs</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> tab <span class=\"token keyword\">of</span> tabs<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">.</span>active<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n         <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">,</span> tabs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       <span class=\"token punctuation\">}</span>\n     <span class=\"token punctuation\">}</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"タブを作成、複製、移動、更新、読み込み、削除する","title":"タブを作成、複製、移動、更新、読み込み、削除する","isH3":false,"content":"<p>Having gathered information about the tabs you’ll most likely want to do something with them—either to offer users features for manipulating and managing tabs or to implement functionality in your extension.</p>\n<p>The following functions are available:</p>\n<ul>\n  <li>create a new tab (<a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/tabs/create\"><code>tabs.create</code></a>).</li>\n  <li>duplicate a tab (<a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/tabs/duplicate\"><code>tabs.duplicate</code></a>).</li>\n  <li>remove a tab (<a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/tabs/remove\"><code>tabs.remove</code></a>).</li>\n  <li>move a tab (<a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/move\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">tabs.move (en-US)</a>).</li>\n  <li>update the tab’s URL—effectively browse to a new page—(<a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/update\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">tabs.update (en-US)</a>).</li>\n  <li>reload the tab’s page (<a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/reload\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">tabs.reload (en-US)</a>).</li>\n</ul>\n<div class=\"notecard note\" id=\"sect3\">\n  <p><strong>Note:</strong> <strong>NOTE:</strong></p>\n  <p>These functions all require the ID (or IDs) of the tab they are manipulating:</p>\n  <ul>\n    <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/tabs/duplicate\"><code>tabs.duplicate</code></a></li>\n    <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/tabs/remove\"><code>tabs.remove</code></a></li>\n    <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/move\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">tabs.move (en-US)</a></li>\n  </ul>\n  <p>Whereas the following functions will act on the active tab (if no tab ID is provided):</p>\n  <ul>\n    <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/update\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">tabs.update (en-US)</a></li>\n    <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/reload\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">tabs.reload (en-US)</a></li>\n  </ul>\n</div>"}},{"type":"prose","value":{"id":"方法の実例_2","title":"方法の実例","isH3":true,"content":"<p>The <a href=\"https://github.com/mdn/webextensions-examples/tree/master/tabs-tabs-tabs\" class=\"external\" rel=\" noopener\">tabs-tabs-tabs</a> example exercises all of these features except for updating a tab’s URL The way in which these APIs are used is similar, so we’ll look at one of the more involved implementations, that of the “Move active tab to the beginning of the window list” option.</p>\n<p>But first, here is a demonstration of the feature in action:</p><iframe width=\"560\" height=\"315\" src=\"https://www.youtube-nocookie.com/embed/-lJRzTIvhxo\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen=\"\" loading=\"lazy\"></iframe>\n<h4 id=\"manifest.json_2\"><a href=\"https://github.com/mdn/webextensions-examples/blob/master/tabs-tabs-tabs/manifest.json\" class=\"external\" rel=\" noopener\">manifest.json</a></h4>\n<p>None of the functions require a permission to operate, so there are no features in the manifest.json file that need to be highlighted.</p>\n<h4 id=\"tabs.html_2\"><a href=\"https://github.com/mdn/webextensions-examples/blob/master/tabs-tabs-tabs/tabs.html\" class=\"external\" rel=\" noopener\">tabs.html</a></h4>\n<p>tabs.html defines the “menu” displayed in the popup, which includes the “Move active tab to the beginning of the window list” option, with a series of <code>&lt;a&gt;</code> tags grouped by a visual separator. Each menu item is given an ID, which is used in tabs.js to determine which menu item is being requested.</p>\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tabs-move-beginning<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Move active tab to the beginning of the window<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tabs-move-end<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Move active tab to the end of the window<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">&gt;</span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>panel-section-separator<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tabs-duplicate<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Duplicate active tab<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">&gt;</span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tabs-reload<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Reload active tab<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tabs-alertinfo<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Alert active tab info<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<h4 id=\"tabs.js_2\"><a href=\"https://github.com/mdn/webextensions-examples/blob/master/tabs-tabs-tabs/tabs.js\" class=\"external\" rel=\" noopener\">tabs.js</a></h4>\n<p>To implement the “menu” defined in tabs.html, tabs.js includes a listener for clicks in tabs.html:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>document<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n <span class=\"token keyword\">function</span> <span class=\"token function\">callOnActiveTab</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">callback</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n   <span class=\"token function\">getCurrentWindowTabs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tabs</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> tab <span class=\"token keyword\">of</span> tabs<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">.</span>active<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n         <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">,</span> tabs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       <span class=\"token punctuation\">}</span>\n     <span class=\"token punctuation\">}</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>A series of <code>if</code> statements then look to match the ID of the item clicked.</p>\n<p>This code snippet is for the “Move active tab to the beginning of the window list” option:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> <span class=\"token string\">\"tabs-move-beginning\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token function\">callOnActiveTab</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tab<span class=\"token punctuation\">,</span> tabs</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token keyword\">var</span> index <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n     <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>tab<span class=\"token punctuation\">.</span>pinned<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       index <span class=\"token operator\">=</span> <span class=\"token function\">firstUnpinnedTab</span><span class=\"token punctuation\">(</span>tabs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n     <span class=\"token punctuation\">}</span>\n     console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">moving </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>tab<span class=\"token punctuation\">.</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> to </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>index<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n     browser<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>index<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>It's worth noting the use of <code>console.log()</code>. This enables you to output information to the <a href=\"https://extensionworkshop.com/documentation/develop/debugging/\" class=\"external\" rel=\" noopener\">debugger</a> console, which can be useful when resolving issues found during development.</p>\n<p>\n  <img src=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API/console.png\" alt=\"Example of the console.log output, from the move tabs feature, in the debugging console\" width=\"911\" height=\"329\" loading=\"lazy\">\n</p>\n<p>The move code first calls <code>callOnActiveTab()</code> which in turn calls <code>getCurrentWindowTabs()</code> to get a <a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/tabs/Tab\"><code>tabs.Tab</code></a> object containing the active window’s tabs. It then loops through the object to find and return the active tab object:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code> <span class=\"token keyword\">function</span> <span class=\"token function\">callOnActiveTab</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">callback</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token function\">getCurrentWindowTabs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tabs</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> tab <span class=\"token keyword\">of</span> tabs<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">.</span>active<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n         <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">,</span> tabs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       <span class=\"token punctuation\">}</span>\n     <span class=\"token punctuation\">}</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span>\n</code></pre></div>\n<h5 id=\"ピン止めされたタブ\">ピン止めされたタブ</h5>\n<p>A feature of tabs is that the user can <em>pin</em> tabs in a window. Pinned tabs are placed at the start of the tab list and cannot be moved. This means that the earliest position a tab can move to is the first position after any pinned tabs. So, <code>firstUnpinnedTab()</code> is called to find the position of the first unpinned tab by looping through the <code>tabs</code> object:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">firstUnpinnedTab</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tabs</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> tab <span class=\"token keyword\">of</span> tabs<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>tab<span class=\"token punctuation\">.</span>pinned<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token keyword\">return</span> tab<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>We now have everything needed to move the tab: the active tab object from which we can get the tab ID and the position the tab is to be moved to. So, we can implement the move:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>     browser<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>index<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>The remaining functions to duplicate, reload, create, and remove tabs are implemented similarly.</p>"}},{"type":"prose","value":{"id":"タブのズームレベルを操作する","title":"タブのズームレベルを操作する","isH3":false,"content":"<p>The next set of functions enable you to get (<a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/getZoom\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">tabs.getZoom (en-US)</a>) and set (<a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/setZoom\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">tabs.setZoom (en-US)</a>) the zoom level within a tab. You can also retrieve the zoom settings (<a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/getZoomSettings\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">tabs.getZoomSettings (en-US)</a>) but, at the time of writing, the ability to set the settings (<a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/setZoomSettings\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">tabs.setZoomSettings (en-US)</a>) wasn’t available in Firefox.</p>\n<p>The level of zoom can be between 30% and 300% (represented as decimals <code>0.3</code> to <code>3</code>).</p>\n<p>In Firefox the default zoom settings are:</p>\n<ul>\n  <li><strong>default zoom level:</strong> 100%.</li>\n  <li><strong>zoom mode:</strong> automatic (so the browser manages how zoom levels are set).</li>\n  <li><strong>scope of zoom changes:</strong> <code>\"per-origin\"</code>, meaning that when you visit a site again, it takes the zoom level set in your last visit.</li>\n</ul>"}},{"type":"prose","value":{"id":"方法の実例_3","title":"方法の実例","isH3":true,"content":"<p>The <a href=\"https://github.com/mdn/webextensions-examples/tree/master/tabs-tabs-tabs\" class=\"external\" rel=\" noopener\">tabs-tabs-tabs</a> example includes three demonstrations of the zoom feature: zoom in, zoom out, and reset zoom. Here is the feature in action:</p><iframe width=\"560\" height=\"315\" src=\"https://www.youtube-nocookie.com/embed/RFr3oYBCg28\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen=\"\" loading=\"lazy\"></iframe>\n<p>Let’s take a look at how the zoom in is implemented.</p>\n<h4 id=\"manifest.json_3\"><a href=\"https://github.com/mdn/webextensions-examples/blob/master/tabs-tabs-tabs/manifest.json\" class=\"external\" rel=\" noopener\">manifest.json</a></h4>\n<p>None of the zoom functions require permissions, so there are no features in the manifest.json file that need to be highlighted.</p>\n<h4 id=\"tabs.html_3\"><a href=\"https://github.com/mdn/webextensions-examples/blob/master/tabs-tabs-tabs/tabs.html\" class=\"external\" rel=\" noopener\">tabs.html</a></h4>\n<p>We have already discussed how the tabs.html defines the options for this extension, nothing new or unique is done to provide the zoom options.</p>\n<h4 id=\"tabs.js_3\"><a href=\"https://github.com/mdn/webextensions-examples/blob/master/tabs-tabs-tabs/tabs.js\" class=\"external\" rel=\" noopener\">tabs.js</a></h4>\n<p>tabs.js starts by defining several constants used in the zoom code:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> <span class=\"token constant\">ZOOM_INCREMENT</span> <span class=\"token operator\">=</span> <span class=\"token number\">0.2</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">MAX_ZOOM</span> <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">MIN_ZOOM</span> <span class=\"token operator\">=</span> <span class=\"token number\">0.3</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">DEFAULT_ZOOM</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>It then uses the same listener we discussed earlier so it can act on clicks in tabs.html.</p>\n<p>For the zoom in feature, this runs:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> <span class=\"token string\">\"tabs-add-zoom\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token function\">callOnActiveTab</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tab</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token keyword\">var</span> gettingZoom <span class=\"token operator\">=</span> browser<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">getZoom</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n     gettingZoom<span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">zoomFactor</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token comment\">//the maximum zoomFactor is 3, it can't go higher</span>\n       <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>zoomFactor <span class=\"token operator\">&gt;=</span> <span class=\"token constant\">MAX_ZOOM</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n         <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Tab zoom factor is already at max!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n         <span class=\"token keyword\">var</span> newZoomFactor <span class=\"token operator\">=</span> zoomFactor <span class=\"token operator\">+</span> <span class=\"token constant\">ZOOM_INCREMENT</span><span class=\"token punctuation\">;</span>\n         <span class=\"token comment\">//if the newZoomFactor is set to higher than the max accepted</span>\n         <span class=\"token comment\">//it won't change, and will never alert that it's at maximum</span>\n         newZoomFactor <span class=\"token operator\">=</span> newZoomFactor <span class=\"token operator\">&gt;</span> <span class=\"token constant\">MAX_ZOOM</span> <span class=\"token operator\">?</span> <span class=\"token constant\">MAX_ZOOM</span> <span class=\"token operator\">:</span> newZoomFactor<span class=\"token punctuation\">;</span>\n         browser<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">setZoom</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> newZoomFactor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       <span class=\"token punctuation\">}</span>\n     <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>This code uses <code>callOnActiveTab()</code> to get the details of the active tab, then <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/getZoom\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">tabs.getZoom (en-US)</a> gets the tab’s current zoom factor. The current zoom is compared to the defined maximum (<code>MAX_ZOOM</code>) and an alert issued if the tab is already at the maximum zoom. Otherwise, the zoom level is incremented but limited to the maximum zoom, then the zoom is set with <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/getZoom\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">tabs.getZoom (en-US)</a>.</p>"}},{"type":"prose","value":{"id":"タブの_css_を操作する","title":"タブの CSS を操作する","isH3":false,"content":"<p>Another significant capability offered by the Tabs API is the ability to manipulate the CSS within a tab—add new CSS to a tab (<a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/insertCSS\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">tabs.insertCSS (en-US)</a>) or remove CSS from a tab (<a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/removeCSS\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">tabs.removeCSS (en-US)</a>).</p>\n<p>This can be useful, 例えば、 if you want to highlight certain page elements or change the default layout of the page.</p>"}},{"type":"prose","value":{"id":"方法の実例_4","title":"方法の実例","isH3":true,"content":"<p>The <a href=\"https://github.com/mdn/webextensions-examples/tree/master/apply-css\" class=\"external\" rel=\" noopener\">apply-css</a> example uses these features to add a red border to the web page in the active tab. Here is the feature in action:</p><iframe width=\"560\" height=\"315\" src=\"https://www.youtube-nocookie.com/embed/bcK-GT2Dyhs\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen=\"\" loading=\"lazy\"></iframe>\n<p>Let’s walk through how it’s set up.</p>\n<h4 id=\"manifest.json_4\"><a href=\"https://github.com/mdn/webextensions-examples/blob/master/apply-css/manifest.json\" class=\"external\" rel=\" noopener\">manifest.json</a></h4>\n<p>To use the CSS features you need either:</p>\n<ul>\n  <li><code>\"tabs\"</code> permission and <a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions#host_permissions\">host permission</a> or</li>\n  <li><code>\"activeTab\"</code> permission.</li>\n</ul>\n<p>The latter is the most useful, as it allows an extension to use <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/insertCSS\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">tabs.insertCSS (en-US)</a> and <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/removeCSS\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">tabs.removeCSS (en-US)</a> in the active tab when run from the extension’s browser or page action, context menu, or a shortcut.</p>\n<div class=\"code-example\"><pre class=\"brush: json notranslate\"><code><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Adds a page action to toggle applying CSS to pages.\"</span><span class=\"token punctuation\">,</span>\n\n <span class=\"token property\">\"manifest_version\"</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"apply-css\"</span><span class=\"token punctuation\">,</span>\n <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.0\"</span><span class=\"token punctuation\">,</span>\n <span class=\"token property\">\"homepage_url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://github.com/mdn/webextensions-examples/tree/master/apply-css\"</span><span class=\"token punctuation\">,</span>\n\n <span class=\"token property\">\"background\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"background.js\"</span><span class=\"token punctuation\">]</span>\n <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n <span class=\"token property\">\"page_action\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token property\">\"default_icon\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"icons/off.svg\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"browser_style\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n <span class=\"token property\">\"permissions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"activeTab\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"tabs\"</span>\n <span class=\"token punctuation\">]</span>\n\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>You will note that <code>\"tabs\"</code> permission is requested in addition to <code>\"activeTab\"</code>. This additional permission is needed to enable the extension’s script to access the tab’s URL, the importance of which we’ll see in a moment.</p>\n<p>The other main features in the manifest.json file are the definition of:</p>\n<ul>\n  <li><strong>a background script</strong>, which starts running as soon as the extension is loaded.</li>\n  <li><strong>a “page action”</strong>, which defines an icon to be added to the browser’s address bar.</li>\n</ul>\n<h4 id=\"background.js\"><a href=\"https://github.com/mdn/webextensions-examples/blob/master/apply-css/background.js\" class=\"external\" rel=\" noopener\">background.js</a></h4>\n<p>On startup, background.js sets some constants to define the CSS to be applied, titles for the “page action”, and a list of protocols the extension will work in:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> <span class=\"token constant\">CSS</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"body { border: 20px solid red; }\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">TITLE_APPLY</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"Apply CSS\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">TITLE_REMOVE</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"Remove CSS\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">APPLICABLE_PROTOCOLS</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"http:\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"https:\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>When first loaded, the extension uses <a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/tabs/query\"><code>tabs.query</code></a> to get a list of all the tabs in the current browser window. It then loops through the tabs calling <code>initializePageAction()</code>.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> gettingAllTabs <span class=\"token operator\">=</span> browser<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ngettingAllTabs<span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tabs</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> tab <span class=\"token keyword\">of</span> tabs<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token function\">initializePageAction</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p><code>initializePageAction</code> uses <code>protocolIsApplicable()</code> to determine whether the active tab’s URL is one the CSS can be applied to:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">protocolIsApplicable</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">url</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n <span class=\"token keyword\">var</span> anchor <span class=\"token operator\">=</span>  document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n anchor<span class=\"token punctuation\">.</span>href <span class=\"token operator\">=</span> url<span class=\"token punctuation\">;</span>\n <span class=\"token keyword\">return</span> <span class=\"token constant\">APPLICABLE_PROTOCOLS</span><span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>anchor<span class=\"token punctuation\">.</span>protocol<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Then, if the example can act on the tab, <code>initializePageAction()</code> sets the tab’s <code>pageAction</code> (navigation bar) icon and title to use the “off” versions before making the <code>pageAction</code> visible:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">initializePageAction</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tab</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">protocolIsApplicable</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   browser<span class=\"token punctuation\">.</span>pageAction<span class=\"token punctuation\">.</span><span class=\"token function\">setIcon</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">tabId</span><span class=\"token operator\">:</span> tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">\"icons/off.svg\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   browser<span class=\"token punctuation\">.</span>pageAction<span class=\"token punctuation\">.</span><span class=\"token function\">setTitle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">tabId</span><span class=\"token operator\">:</span> tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token constant\">TITLE_APPLY</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   browser<span class=\"token punctuation\">.</span>pageAction<span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Next, a listener on <code>pageAction.onClicked</code> waits for the <code>pageAction</code> icon to be clicked, and calls <code>toggleCSS</code> when it is.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>browser<span class=\"token punctuation\">.</span>pageAction<span class=\"token punctuation\">.</span>onClicked<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span>toggleCSS<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p><code>toggleCSS()</code> gets the title of the <code>pageAction</code> and then takes the action described:</p>\n<ul>\n  <li><strong>For \"Apply CSS”:</strong>\n    <ul>\n      <li>toggles the <code>pageAction</code> icon and title to the “remove” versions.</li>\n      <li>applies the CSS using <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/insertCSS\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">tabs.insertCSS (en-US)</a>.</li>\n    </ul>\n  </li>\n  <li><strong>For “Remove CSS”:</strong>\n    <ul>\n      <li>toggles the <code>pageAction</code> icon and title to the “apply” versions.</li>\n      <li>removes the CSS using <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/removeCSS\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">tabs.removeCSS (en-US)</a>.</li>\n    </ul>\n  </li>\n</ul>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">toggleCSS</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tab</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\n <span class=\"token keyword\">function</span> <span class=\"token function\">gotTitle</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">title</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>title <span class=\"token operator\">===</span> <span class=\"token constant\">TITLE_APPLY</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n     browser<span class=\"token punctuation\">.</span>pageAction<span class=\"token punctuation\">.</span><span class=\"token function\">setIcon</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">tabId</span><span class=\"token operator\">:</span> tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">\"icons/on.svg\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n     browser<span class=\"token punctuation\">.</span>pageAction<span class=\"token punctuation\">.</span><span class=\"token function\">setTitle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">tabId</span><span class=\"token operator\">:</span> tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token constant\">TITLE_REMOVE</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n     browser<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">insertCSS</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">code</span><span class=\"token operator\">:</span> <span class=\"token constant\">CSS</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n     browser<span class=\"token punctuation\">.</span>pageAction<span class=\"token punctuation\">.</span><span class=\"token function\">setIcon</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">tabId</span><span class=\"token operator\">:</span> tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">\"icons/off.svg\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n     browser<span class=\"token punctuation\">.</span>pageAction<span class=\"token punctuation\">.</span><span class=\"token function\">setTitle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">tabId</span><span class=\"token operator\">:</span> tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token constant\">TITLE_APPLY</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n     browser<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">removeCSS</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">code</span><span class=\"token operator\">:</span> <span class=\"token constant\">CSS</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n <span class=\"token punctuation\">}</span>\n\n <span class=\"token keyword\">var</span> gettingTitle <span class=\"token operator\">=</span> browser<span class=\"token punctuation\">.</span>pageAction<span class=\"token punctuation\">.</span><span class=\"token function\">getTitle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">tabId</span><span class=\"token operator\">:</span> tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n gettingTitle<span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>gotTitle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Finally, to ensure that the <code>pageAction</code> is valid after each update to the tab, a listener on <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/onUpdated\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">tabs.onUpdated (en-US)</a> calls <code>initializePageAction()</code> each time the tab is updated to check that the tab is still using a protocol to which the CSS can be applied.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>browser<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span>onUpdated<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">id<span class=\"token punctuation\">,</span> changeInfo<span class=\"token punctuation\">,</span> tab</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n <span class=\"token function\">initializePageAction</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"その他の興味深い機能","title":"その他の興味深い機能","isH3":false,"content":"<p>There are a couple of other Tabs API features that don’t fit into one of the earlier sections:</p>\n<ul>\n  <li>Capture the visible tab content with <a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/tabs/captureVisibleTab\"><code>tabs.captureVisibleTab</code></a>.</li>\n  <li>Detect the primary language of the content in a tab using <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/detectLanguage\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">tabs.detectLanguage (en-US)</a>. This could be used, 例えば、to match the language in your extension’s UI with that of the page it’s running in.</li>\n</ul>"}},{"type":"prose","value":{"id":"関連項目","title":"関連項目","isH3":false,"content":"<p>If you want to learn more about the Tabs API, check out:</p>\n<ul>\n  <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/API/tabs\">Tabs API reference</a></li>\n  <li><a href=\"/ja/docs/Mozilla/Add-ons/WebExtensions/Examples\">Example extensions</a> (many of which use the Tabs API)</li>\n</ul>"}}],"toc":[{"text":"権限と Tabs API","id":"権限と_tabs_api"},{"text":"タブとそのプロパティの探検","id":"タブとそのプロパティの探検"},{"text":"タブを作成、複製、移動、更新、読み込み、削除する","id":"タブを作成、複製、移動、更新、読み込み、削除する"},{"text":"タブのズームレベルを操作する","id":"タブのズームレベルを操作する"},{"text":"タブの CSS を操作する","id":"タブの_css_を操作する"},{"text":"その他の興味深い機能","id":"その他の興味深い機能"},{"text":"関連項目","id":"関連項目"}],"summary":"タブを使うとユーザーはブラウザーウィンドウに複数のウェブページを開いてウェブページ間をスイッチできるようになります。Tabs API により、タブを操作して、新しい方法でタブを使ったり拡張機能の機能として配布できます。","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Working with the Tabs API","locale":"en-US","native":"English (US)"},{"title":"Travailler avec l'API Tabs","locale":"fr","native":"Français"},{"title":"Working with the Tabs API","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"ja/mozilla/add-ons/webextensions/working_with_the_tabs_api","github_url":"https://github.com/mdn/translated-content/blob/main/files/ja/mozilla/add-ons/webextensions/working_with_the_tabs_api/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/ja/docs/Mozilla","title":"Mozilla"},{"uri":"/ja/docs/Mozilla/Add-ons","title":"アドオン"},{"uri":"/ja/docs/Mozilla/Add-ons/WebExtensions","title":"ブラウザー拡張機能"},{"uri":"/ja/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API","title":"Tabs API を使う"}],"pageTitle":"Tabs API を使う - Mozilla | MDN","noIndexing":false}}