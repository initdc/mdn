{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"アドオンバー","mdn_url":"/ja/docs/Mozilla/Firefox/Releases/4/The_add-on_bar","locale":"ja","native":"日本語","sidebarHTML":"","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>Firefox 4 よりウィンドウの下部に新しいツールバーを実装する為、ブラウザウィンドウの下部からステータスバーが削除されます。この新しいツールバーは ID \"addon-bar\" を持った、標準の XUL <code>&lt;toolbar&gt;</code> です。アドオンはこのバーにコンテンツを挿入することが可能であり、また、ユーザーはツールバーのカスタマイズ中にボタンをアドオンバーにドラッグすることができます。これがアドオンバーと旧ステータスバーの間の主な相違点です。標準のツールバーであるため、どの XUL 要素でもアドオンバーに配置することができます。</p>\n<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>Note:</strong> 当面は、Firefox にはステータスバーが存在することを期待するアドオンがうまく動作するようにするためのシムが噛ませてあります。但しこれは一時的な措置であり、じきに削除されます。アドオンをアップデートしてください。</p>\n</div>"}},{"type":"prose","value":{"id":"アドオンバーに要素を加える","title":"アドオンバーに要素を加える","isH3":false,"content":"<p>アドオンバーは ID \"addon-bar\" を持つ XUL ツールバーです。次のコードは、一番最近使われたウィンドウを探し出し、XUL <code>&lt;label&gt;</code> 要素を用いて単に \"Hello world!\" のテキストを表示する新しいアイテムをアドオンバーに加えます。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// 一番最近使われたウィンドウを探す</span>\n\n<span class=\"token keyword\">var</span> mediator <span class=\"token operator\">=</span> Components<span class=\"token punctuation\">.</span>classes<span class=\"token punctuation\">[</span><span class=\"token string\">'@mozilla.org/appshell/window-mediator;1'</span><span class=\"token punctuation\">]</span>\n                  <span class=\"token punctuation\">.</span><span class=\"token function\">getService</span><span class=\"token punctuation\">(</span>Components<span class=\"token punctuation\">.</span>interfaces<span class=\"token punctuation\">.</span>nsIWindowMediator<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> doc <span class=\"token operator\">=</span> mediator<span class=\"token punctuation\">.</span><span class=\"token function\">getMostRecentWindow</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"navigator:browser\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>document<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// そのウィンドウのアドオンバーを取得する</span>\n<span class=\"token keyword\">var</span> addonBar <span class=\"token operator\">=</span> doc<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"addon-bar\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 新しいツールバーアイテムを構築する</span>\n<span class=\"token keyword\">var</span> newItem <span class=\"token operator\">=</span> doc<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"toolbaritem\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> itemLabel <span class=\"token operator\">=</span> doc<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"label\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// アイテムをツールバーに追加しテキストラベルをセットする</span>\nnewItem<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>itemLabel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\naddonBar<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>newItem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nitemLabel<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"Hello world!\"</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>To add the button only once create a bool pref to check if it is the first run. <a href=\"https://stackoverflow.com/questions/4978188/how-do-i-detect-a-first-run-in-firefox-a-addon/4978512#4978512\" class=\"external\" rel=\" noopener\">For example</a>:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> firstrun <span class=\"token operator\">=</span> Services<span class=\"token punctuation\">.</span>prefs<span class=\"token punctuation\">.</span><span class=\"token function\">getBoolPref</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"extensions.YOUREXT.firstrun\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> curVersion <span class=\"token operator\">=</span> <span class=\"token string\">\"0.0.0\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>firstrun<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  Services<span class=\"token punctuation\">.</span>prefs<span class=\"token punctuation\">.</span><span class=\"token function\">setBoolPref</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"extensions.YOUREXT.firstrun\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  Services<span class=\"token punctuation\">.</span>prefs<span class=\"token punctuation\">.</span><span class=\"token function\">setCharPref</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"extensions.YOUREXT.installedVersion\"</span><span class=\"token punctuation\">,</span> curVersion<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">/* Code related to firstrun */</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> installedVersion <span class=\"token operator\">=</span> Services<span class=\"token punctuation\">.</span>prefs<span class=\"token punctuation\">.</span><span class=\"token function\">getCharPref</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"extensions.YOUREXT.installedVersion\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>curVersion <span class=\"token operator\">&gt;</span> installedVersion<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      Services<span class=\"token punctuation\">.</span>prefs<span class=\"token punctuation\">.</span><span class=\"token function\">setCharPref</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"extensions.YOUREXT.installedVersion\"</span><span class=\"token punctuation\">,</span> curVersion<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token comment\">/* Code related to upgrade */</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>ex<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/* Code related to a reinstall */</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"firefox_の各バージョンでのオーバーレイの使用方法","title":"Firefox の各バージョンでのオーバーレイの使用方法","isH3":false,"content":"<p>\n  Firefox 3.6 とそれ以前のバージョンとの互換性を保持したままアドオンバーのサポートを追加するには、2 つのオーバーレイを使用する必要があります。\n  The <a href=\"/ja/docs/Chrome_Registration\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">chrome.manifest</a> file can specify which file is used by which Firefox version by using <a href=\"/ja/docs/Chrome_Registration#Manifest_flags\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">manifest flags</a>:\n</p>\n<pre class=\"notranslate\">overlay chrome://browser/content/browser.xul chrome://myaddon/content/myaddon/overlayold.xul application={ec8030f7-c20a-464f-9b0e-13a3a9e97384} appversion&lt;4.0\noverlay chrome://browser/content/browser.xul chrome://myaddon/content/myaddon/overlay.xul application={ec8030f7-c20a-464f-9b0e-13a3a9e97384} appversion&gt;=4.0\n</pre>\n<p>注記: the appversion has to be at least 2 digits long or it won't work with versions of Gecko before 1.8.0.13 and 1.8.1.5.</p>"}},{"type":"prose","value":{"id":"デフォルトでボタンを追加","title":"デフォルトでボタンを追加","isH3":true,"content":"<p>参照 : <a href=\"/ja/docs/orphaned/Code_snippets/Toolbar#adding_button_by_default\">Adding a button by default</a></p>"}},{"type":"prose","value":{"id":"見た目の違い","title":"見た目の違い","isH3":false,"content":"<ul>\n  <li>ブラウザーがステータス情報によりバー領域の大半を占拠することがなくなるので、すべての領域をアドオンが使えるようになります。</li>\n  <li>既定ではアドオンバーは空 (empty) であり、隠されています (hidden) 。ユーザーがこれを可視状態にするには、明示的にそうしなければなりません。</li>\n  <li>再起動不要のアドオンがアドオンバーに直接インストールされたとき、アドオンバーが可視でなければアドオンバーは自動的に可視になります。</li>\n  <li>再起動不要のアドオンがアンインストールされてアドオンバー内のアイテムの数がゼロになったときには、アドオンバーは自動的に隠されます。</li>\n</ul>"}},{"type":"prose","value":{"id":"関連情報","title":"関連情報","isH3":false,"content":"<ul>\n  <li><a href=\"http://mike.kaply.com/2011/01/25/the-firefox-4-add-on-bar-for-developers\" class=\"external\" rel=\" noopener\">Firefox 4 add-on bar for developers</a> by Mike Kaply</li>\n</ul>"}}],"toc":[{"text":"アドオンバーに要素を加える","id":"アドオンバーに要素を加える"},{"text":"Firefox の各バージョンでのオーバーレイの使用方法","id":"firefox_の各バージョンでのオーバーレイの使用方法"},{"text":"見た目の違い","id":"見た目の違い"},{"text":"関連情報","id":"関連情報"}],"summary":"Firefox 4 よりウィンドウの下部に新しいツールバーを実装する為、ブラウザウィンドウの下部からステータスバーが削除されます。この新しいツールバーは ID \"addon-bar\" を持った、標準の XUL <toolbar> です。アドオンはこのバーにコンテンツを挿入することが可能であり、また、ユーザーはツールバーのカスタマイズ中にボタンをアドオンバーにドラッグすることができます。これがアドオンバーと旧ステータスバーの間の主な相違点です。標準のツールバーであるため、どの XUL 要素でもアドオンバーに配置することができます。","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"The add-on bar","locale":"en-US","native":"English (US)"}],"source":{"folder":"ja/mozilla/firefox/releases/4/the_add-on_bar","github_url":"https://github.com/mdn/translated-content/blob/main/files/ja/mozilla/firefox/releases/4/the_add-on_bar/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/ja/docs/Mozilla","title":"Mozilla"},{"uri":"/ja/docs/Mozilla/Firefox","title":"Firefox"},{"uri":"/ja/docs/Mozilla/Firefox/Releases","title":"Firefox 開発者向けリリースノート"},{"uri":"/ja/docs/Mozilla/Firefox/Releases/4","title":"Firefox 4 for developers"},{"uri":"/ja/docs/Mozilla/Firefox/Releases/4/The_add-on_bar","title":"アドオンバー"}],"pageTitle":"アドオンバー - Mozilla | MDN","noIndexing":false}}