{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"HTTPリクエストの優先順位の変更","mdn_url":"/ja/docs/Mozilla/Firefox/Releases/1.5/Changing_the_priority_of_HTTP_requests","locale":"ja","native":"日本語","sidebarHTML":"\n  <ol>\n    <li class=\"toggle\">\n        <details>\n            <summary>Firefox developer release notes</summary>\n            <ol>\n              <li><a href=\"/ja/docs/Mozilla/Firefox/Releases\">Firefox developer release notes</a></li>\n            </ol>\n        </details>\n    </li>\n    <li class=\"toggle\">\n        <details>\n            <summary>Add-ons</summary>\n            <ol>\n              <li><a href=\"/ja/Add-ons/WebExtensions\">Browser extensions</a></li>\n              <li><a href=\"/ja/Add-ons/Themes\">Themes</a></li>\n            </ol>\n        </details>\n    </li>\n    <li class=\"toggle\">\n        <details>\n            <summary>Firefox internals</summary>\n            <ol>\n              <li><a href=\"/ja/docs/Mozilla/\">Mozilla project</a></li>\n              <li><a href=\"/ja/docs/Mozilla/Gecko\">Gecko</a></li>\n              <li><a href=\"/ja/docs/Mozilla/Firefox/Headless_mode\">Headless mode</a></li>\n              <li><a href=\"/ja/docs/Mozilla/JavaScript_code_modules\">JavaScript code modules</a></li>\n              <li><a href=\"/ja/docs/Mozilla/js-ctypes\">JS-ctypes</a></li>\n              <li><a href=\"/ja/docs/Mozilla/MathML_Project\">MathML project</a></li>\n              <li><a href=\"/ja/docs/Mozilla/MFBT\">MFBT</a></li>\n              <li><a href=\"/ja/docs/Mozilla/Projects\">Mozilla projects</a></li>\n              <li><a href=\"/ja/docs/Mozilla/Preferences\">Preference system</a></li>\n              <li><a href=\"/ja/docs/Mozilla/WebIDL_bindings\">WebIDL bindings</a></li>\n              <li><a href=\"/ja/docs/Mozilla/Tech/XPCOM\">XPCOM</a></li>\n              <li><a href=\"/ja/docs/Mozilla/Tech/XUL\">XUL</a></li>\n            </ol>\n        </details>\n    </li>\n    <li class=\"toggle\">\n        <details>\n            <summary>Building and contributing</summary>\n            <ol>\n              <li><a href=\"/ja/docs/Mozilla/Developer_guide/Build_Instructions\">Build instructions</a></li>\n              <li><a href=\"/ja/docs/Mozilla/Developer_guide/Build_Instructions/Configuring_Build_Options\">Configuring build options</a></li>\n              <li><a href=\"/ja/docs/Mozilla/Developer_guide/Build_Instructions/How_Mozilla_s_build_system_works\">How the build system works</a></li>\n              <li><a href=\"/ja/docs/Mozilla/Developer_guide/Source_Code/Mercurial\">Mozilla source code</a></li>\n              <li><a href=\"/ja/docs/Mozilla/Localization\">Localization</a></li>\n              <li><a href=\"/ja/docs/Mozilla/Mercurial\">Mercurial</a></li>\n              <li><a href=\"/ja/docs/Mozilla/QA\">Quality assurance</a></li>\n              <li><a href=\"/ja/docs/Mozilla/Using_Mozilla_code_in_other_projects\">Using Mozilla code in other projects</a></li>\n            </ol>\n        </details>\n    </li>\n  </ol>\n","body":[{"type":"prose","value":{"id":"イントロダクション","title":"イントロダクション","isH3":true,"content":"<p>In <a href=\"/ja/Firefox_1.5_for_developers\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">Firefox 1.5</a> (Gecko 1.8), an API was added to support changing the priority of <a href=\"/ja/HTTP\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">HTTP</a> requests. Prior to this, there was no way to directly indicate that a request was of a different priority. The API is defined in <a href=\"/ja/nsISupportsPriority\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">nsISupportsPriority</a>, but is defined in very generic terms so that any object can implement this interface to enable the concept of priority. This article deals specifically with using that interface to change the priority of HTTP requests.</p>\n<p>At the time of this writing, changing the priority of an HTTP request only affects the order in which connection attempts are made. This means that the priority only has an effect when there are more connections (to a server) than are allowed.</p>\n<p>The examples in this document are all written in <a href=\"/ja/docs/Web/JavaScript\">JavaScript</a> using <a href=\"/ja/XPCOM\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">XPCOM</a>.</p>"}},{"type":"prose","value":{"id":"api_の使用","title":"API の使用","isH3":true,"content":"<p>It should be noted that the value of the <code>priority</code> attribute follows UNIX conventions, with smaller numbers (including negative numbers) having higher priority.</p>\n<h4 id=\"accessing_priority_from_an_nsichannel\">Accessing priority from an nsIChannel</h4>\n<p>To change the priority of an HTTP request, you need access to the <a href=\"/ja/XPCOM_Interface_Reference/nsIChannel\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">nsIChannel</a> that the request is being made on. If you do not have an existing channel, then you can create one as follows:</p>\n<pre class=\"notranslate\">var ios = Components.classes[\"@mozilla.org/network/io-service;1\"]\n                    .getService(Components.interfaces.nsIIOService);\nvar ch = ios.newChannel(\"http://www.example.com/\", null, null);\n</pre>\n<p>Once you have an <a href=\"/ja/XPCOM_Interface_Reference/nsIChannel\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">nsIChannel</a>, you can access the priority as follows:</p>\n<pre class=\"notranslate\">if (ch instanceof Components.interfaces.nsISupportsPriority) {\n  ch.priority = Components.interfaces.nsISupportsPriority.PRIORITY_LOWEST;\n}\n</pre>\n<p>For convenience, the interface defines several standard priority values that you can use, ranging from <code>PRIORITY_HIGHEST</code> to <code>PRIORITY_LOWEST</code>.</p>\n<h4 id=\"getting_an_nsichannel_from_xmlhttprequest\">Getting an nsIChannel from XMLHttpRequest</h4>\n<p>If you are programming in <a href=\"/ja/docs/Web/JavaScript\">JavaScript</a>, you will probably want to use <a href=\"/ja/docs/Web/API/XMLHttpRequest\">XMLHttpRequest</a>, a much higher level abstraction of an HTTP request. You can access the <code>channel</code> member of an <a href=\"/ja/docs/Web/API/XMLHttpRequest\">XMLHttpRequest</a> once you have called the <code>open</code> method on it, as follows:</p>\n<pre class=\"notranslate\">var req = new XMLHttpRequest();\nreq.open(\"GET\", \"http://www.example.com\", false);\nif (req.channel instanceof Components.interfaces.nsISupportsPriority) {\n  req.channel.priority = Components.interfaces.nsISupportsPriority.PRIORITY_LOWEST;\n}\nreq.send(null);\n</pre>\n<p>Note that this example uses a synchronous <a href=\"/ja/docs/Web/API/XMLHttpRequest\">XMLHttpRequest</a>, which you should not use in practice.</p>\n<h4 id=\"優先順位の調整\">優先順位の調整</h4>\n<p><a href=\"/ja/nsISupportsPriority#adjustPriority\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">nsISupportsPriority</a> includes a convenience method named <code>adjustPriority</code>. You should use this if you want to alter the priority of a request by a certain amount. For example, if you would like to make a request have slightly higher priority than it currently has, you could do the following:</p>\n<pre class=\"notranslate\">// assuming we already have a nsIChannel from above\nif (ch instanceof Components.interfaces.nsISupportsPriority) {\n  ch.adjustPriority(-1);\n}\n</pre>\n<p>Remember that lower numbers mean higher priority, so adjusting by a negative number will serve to increase the request's priority.</p>"}}],"toc":[],"summary":"In Firefox 1.5 (Gecko 1.8), an API was added to support changing the priority of HTTP requests. Prior to this, there was no way to directly indicate that a request was of a different priority. The API is defined in nsISupportsPriority, but is defined in very generic terms so that any object can implement this interface to enable the concept of priority. This article deals specifically with using that interface to change the priority of HTTP requests.","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Changing the Priority of HTTP Requests (Non-Standard)","locale":"en-US","native":"English (US)"}],"source":{"folder":"ja/mozilla/firefox/releases/1.5/changing_the_priority_of_http_requests","github_url":"https://github.com/mdn/translated-content/blob/main/files/ja/mozilla/firefox/releases/1.5/changing_the_priority_of_http_requests/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/ja/docs/Mozilla","title":"Mozilla"},{"uri":"/ja/docs/Mozilla/Firefox","title":"Firefox"},{"uri":"/ja/docs/Mozilla/Firefox/Releases","title":"Firefox 開発者向けリリースノート"},{"uri":"/ja/docs/Mozilla/Firefox/Releases/1.5","title":"Firefox 1.5 for developers"},{"uri":"/ja/docs/Mozilla/Firefox/Releases/1.5/Changing_the_priority_of_HTTP_requests","title":"HTTPリクエストの優先順位の変更"}],"pageTitle":"HTTPリクエストの優先順位の変更 - Mozilla | MDN","noIndexing":false}}