{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"moment を使用した日付のフォーマット","mdn_url":"/ja/docs/Learn/Server-side/Express_Nodejs/Displaying_data/Date_formatting_using_moment","locale":"ja","native":"日本語","sidebarHTML":"","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>The default rendering of dates from our models is very ugly: <em>Tue Dec 06 2016 15:49:58 GMT+1100 (AUS Eastern Daylight Time)</em>. In this section we'll show how you can update the <em>BookInstance List</em> page from the previous section to present the <code>due_date</code> field in a more friendly format: December 6th, 2016.</p>\n<p>The approach we will use is to create a virtual property in our <code>BookInstance</code> model that returns the formatted date. We'll do the actual formatting using <a href=\"https://www.npmjs.com/package/moment\" class=\"external\" rel=\" noopener\">moment</a>, a lightweight JavaScript date library for parsing, validating, manipulating, and formatting dates.</p>\n<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>Note:</strong> It is possible to use <em>moment</em> to format the strings directly in our Pug templates, or we could format the string in a number of other places. Using a virtual property allows us to get the formatted date in exactly the same way as we get the <code>due_date</code> currently.</p>\n</div>"}},{"type":"prose","value":{"id":"install_moment","title":"Install moment","isH3":false,"content":"<p>Enter the following command in the root of the project:</p>\n<div class=\"code-example\"><pre class=\"brush: bash notranslate\"><code><span class=\"token function\">npm</span> <span class=\"token function\">install</span> moment\n</code></pre></div>"}},{"type":"prose","value":{"id":"create_the_virtual_property","title":"Create the virtual property","isH3":false,"content":"<ol>\n  <li>Open <strong>./models/bookinstance.js</strong>.</li>\n  <li>At the top of the page, import <em>moment</em>.\n    <div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> moment <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'moment'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n  </li>\n</ol>\n<p>Add the virtual property <code>due_back_formatted</code> just after the url property.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>BookInstanceSchema\n<span class=\"token punctuation\">.</span><span class=\"token function\">virtual</span><span class=\"token punctuation\">(</span><span class=\"token string\">'due_back_formatted'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">moment</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>due_back<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">'MMMM Do, YYYY'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<div class=\"notecard note\" id=\"sect2\">\n  <p><strong>Note:</strong> The format method can display a date using almost any pattern. The syntax for representing different date components can be found in the <a href=\"http://momentjs.com/docs/#/displaying/\" class=\"external\" rel=\" noopener\">moment documentation</a>.</p>\n</div>"}},{"type":"prose","value":{"id":"update_the_view","title":"Update the view","isH3":false,"content":"<p>Open <strong>/views/bookinstance_list.pug</strong> and replace <code>due_back</code> with <code>due_back_formatted</code>.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>      <span class=\"token keyword\">if</span> val<span class=\"token punctuation\">.</span>status<span class=\"token operator\">!=</span><span class=\"token string\">'Available'</span>\n        <span class=\"token comment\">//span  (Due: #{val.due_back} )</span>\n        <span class=\"token function\">span</span>  <span class=\"token punctuation\">(</span>Due<span class=\"token operator\">:</span> #<span class=\"token punctuation\">{</span>val<span class=\"token punctuation\">.</span>due_back_formatted<span class=\"token punctuation\">}</span> <span class=\"token punctuation\">)</span>\n</code></pre></div>\n<p>That's it. If you go to <em>All book-instances</em> in the sidebar, you should now see all the due dates are far more attractive!</p>"}},{"type":"prose","value":{"id":"next_steps","title":"Next steps","isH3":false,"content":"<ul>\n  <li>Return to <a href=\"/ja/docs/Learn/Server-side/Express_Nodejs/Displaying_data\">Express Tutorial Part 5: Displaying library data</a>.</li>\n  <li>Proceed to the next subarticle of part 5: <a href=\"/ja/docs/Learn/Server-side/Express_Nodejs/Displaying_data/Author_list_page\">Author list page and Genre list page challenge</a>.</li>\n</ul>"}}],"toc":[{"text":"Install moment","id":"install_moment"},{"text":"Create the virtual property","id":"create_the_virtual_property"},{"text":"Update the view","id":"update_the_view"},{"text":"Next steps","id":"next_steps"}],"summary":"The default rendering of dates from our models is very ugly: Tue Dec 06 2016 15:49:58 GMT+1100 (AUS Eastern Daylight Time). In this section we'll show how you can update the BookInstance List page from the previous section to present the due_date field in a more friendly format: December 6th, 2016.","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Date formatting using luxon","locale":"en-US","native":"English (US)"},{"title":"Форматирование даты при помощи moment","locale":"ru","native":"Русский"},{"title":"使用 moment 做日期格式化","locale":"zh-CN","native":"中文 (简体)"},{"title":"使用 moment 做日期格式化","locale":"zh-TW","native":"正體中文 (繁體)"}],"source":{"folder":"ja/learn/server-side/express_nodejs/displaying_data/date_formatting_using_moment","github_url":"https://github.com/mdn/translated-content/blob/main/files/ja/learn/server-side/express_nodejs/displaying_data/date_formatting_using_moment/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/ja/docs/Learn","title":"ウェブ開発を学ぶ"},{"uri":"/ja/docs/Learn/Server-side","title":"サーバサイド Web サイトプログラミング"},{"uri":"/ja/docs/Learn/Server-side/Express_Nodejs","title":"Express Web フレームワーク (Node.js/JavaScript)"},{"uri":"/ja/docs/Learn/Server-side/Express_Nodejs/Displaying_data","title":"Express チュートリアル Part 5: ライブラリデータの表示"},{"uri":"/ja/docs/Learn/Server-side/Express_Nodejs/Displaying_data/Date_formatting_using_moment","title":"moment を使用した日付のフォーマット"}],"pageTitle":"moment を使用した日付のフォーマット - ウェブ開発を学ぶ | MDN","noIndexing":false}}