{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"Utiliser des contrôleurs de réalité virtuelle pour du WebVR","mdn_url":"/fr/docs/Web/API/WebVR_API/Using_VR_controllers_with_WebVR","locale":"fr","native":"Français","sidebarHTML":"<ol><li><strong><a href=\"/fr/docs/Web/API/WebVR_API\">WebVR API</a></strong></li><li><strong><a href=\"/fr/docs/Web/API/WebVR_API\"><code>WebVR_API</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Pages liées à WebVR API</summary><ol><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Gamepad/displayId\"><code>Gamepad.displayId</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Navigator/activeVRDisplays\"><code>Navigator.activeVRDisplays</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Navigator/getVRDisplays\"><code>Navigator.getVRDisplays()</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/VRDisplay\"><code>VRDisplay</code> <small>(en-US)</small></a></li><li><a href=\"/fr/docs/Web/API/VRDisplayCapabilities\"><code>VRDisplayCapabilities</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/VRDisplayEvent\"><code>VRDisplayEvent</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/VREyeParameters\"><code>VREyeParameters</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/VRFieldOfView\"><code>VRFieldOfView</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/VRFrameData\"><code>VRFrameData</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/VRLayerInit\"><code>VRLayerInit</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/VRPose\"><code>VRPose</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/VRStageParameters\"><code>VRStageParameters</code> <small>(en-US)</small></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>La plupart des matériels de WebVR possède des contrôleurs qui viennent avec le casque de réalité virtuelle. Ceux-ci peuvent être utilisés dans les application WebVR grâce à l'<a href=\"/fr/docs/Web/API/Gamepad_API\">API Gamepad</a>, et plus spécifiquement avec l'<a href=\"/fr/docs/Web/API/Gamepad_API#experimental_gamepad_extensions\">API Gamepad Extensions</a> qui ajoute des API pour accéder, entre autres, à la <a href=\"/en-US/docs/Web/API/GamepadPose\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">position du controller (en-US)</a>, au <a href=\"/en-US/docs/Web/API/GamepadHapticActuator\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">retour haptique (en-US)</a>, etc.. Cet article fournit les bases pour utiliser ces API.</p>"}},{"type":"prose","value":{"id":"lapi_webvr","title":"L'API WebVR","isH3":false,"content":"<p>L'<a href=\"/fr/docs/Web/API/WebVR_API\">API WebVR</a> est jeune mais possède déjà des fonctionnalités très interressantes pour le web et pour que les développeur·euse·s puisse créer des expériences de réalité virtuelle sur le web. Cela est possible grâce à un accès aux données des casques de réalité virtuelle connectés à votre ordinateur. Ceux-ci seront indentifié comme des objets <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/VRDisplay\"><code>VRDisplay</code> <small>(en-US)</small></a>,que vous pourrez manipuler pour commencer et arrêter l'affichage dans le casque, récupérer des données de mouvement (orientation, position...) qui pourront être utilisés pour mettre à jour l'affichage d'une animation, par exemple.</p>\n<p>Avant de commencer, vous devriez être déjà avoir des bases de l'API WebVR. Si ce n'est pas le cas, allez lire l'article <a href=\"/en-US/docs/Web/API/WebVR_API/Using_the_WebVR_API\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">Utiliser l'API WebVR (en-US)</a>, vous aurez également des détails sur la compatibilité des navigateurs web ou du matériel nécessaire.</p>"}},{"type":"prose","value":{"id":"lapi_gamepad","title":"L'API Gamepad","isH3":false,"content":"<p>L'<a href=\"/fr/docs/Web/API/Gamepad_API\">API Gamepad</a> est une API assez bien compatible, qui donne aux développeur·euse·s l'accès aux manettes de jeu, connectés à leur ordinateur et de les utilisé dans dans applications web. Les contrôleurs peuvent basiquement être accessible comme des objets <a href=\"/fr/docs/Web/API/Gamepad\"><code>Gamepad</code></a>, avec lesquels nous pouvons faire des requêtes pour savoir quels boutons sont appuyés ou quels joystick sont actionnés, etc..</p>\n<p>Vous pouvez avoir plus d'information sur l'usage de API de base des Gamepad avec l'article <a href=\"/fr/docs/Web/API/Gamepad_API/Using_the_Gamepad_API\">Utilisez l'API Gamepad</a>, et <a href=\"/en-US/docs/Games/Techniques/Controls_Gamepad_API\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">Implementer des contrôles en utilisant l'API Gamepad (en-US)</a>.</p>\n<p>Dans cet article, nous allons nous attardez sur les nouvelles fonctionnalités offertes dans l'API <code>GamepadExtensions</code>, laquelle donne accès à des informations avancés comme des données de position ou d'orientation, ou encore contrôler les retours haptiques (vibrations), et bien plus. Cette API est toute nouvelle et, pour l'instant, seulement disponible dans les versions Beta ou Nightly de Firefox 55 (et suppérieur).</p>"}},{"type":"prose","value":{"id":"types_de_contrôlleurs","title":"Types de contrôlleurs","isH3":false,"content":"<p>Il y a deux principaux types de contrôleurs utilisés pour la réalité virtuelle :</p>\n<ul>\n  <li>les \"6DoF\" (six degrés de liberté) sont des contrôleurs qui donne accès aux informations de position et d'orientation. Un exemple notable serait les manettes du HTC Vive.</li>\n  <li>les \"3DoF\" (trois degrés de liberté) sont des contrôleurs qui donne uniquement accès aux informations d'orientation. Un exemple notable serait la manette du Google Daydream, qui peut être tourné pour sélectionner des objets 3D comme un pointeur laser, mais ne peux être bougé dans la scène 3D.</li>\n</ul>"}},{"type":"prose","value":{"id":"basic_controller_access","title":"Basic controller access","isH3":false,"content":"<p>Now onto some code. Let's look first at the basics of how we get access to VR controllers with the Gamepad API. There are a few strange nuances to bear in mind here, so it is worth taking a look.</p>\n<p>We've written up a simple example to demonstrate — see our <a href=\"https://github.com/mdn/webvr-tests/blob/master/vr-controller-basic-info/index.html\" class=\"external\" rel=\" noopener\">vr-controller-basic-info</a> source code (<a href=\"https://mdn.github.io/webvr-tests/vr-controller-basic-info/\" class=\"external\" rel=\" noopener\">see it running live here also</a>). This demo simply outputs information on the VR displays and gamepads connected to your computer.</p>"}},{"type":"prose","value":{"id":"getting_the_display_information","title":"Getting the display information","isH3":true,"content":"<p>The first notable code is as follows:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> initialRun <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>navigator<span class=\"token punctuation\">.</span>getVRDisplays <span class=\"token operator\">&amp;&amp;</span> navigator<span class=\"token punctuation\">.</span>getGamepads<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  info<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token string\">'WebVR API and Gamepad API supported.'</span>\n  <span class=\"token function\">reportDisplays</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n  info<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token string\">'WebVR API and/or Gamepad API not supported by this browser.'</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Here we first use a tracking variable, <code>initialRun</code>, to note that this is the first time we have loaded the page. You'll find out more about this later on. Next, we detect to see if the WebVR and Gamepad APIs are supported by cheking for the existence of the <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Navigator/getVRDisplays\"><code>Navigator.getVRDisplays()</code> <small>(en-US)</small></a> and <a href=\"/fr/docs/Web/API/Navigator/getGamepads\"><code>Navigator.getGamepads()</code></a> methods. If so, we run our <code>reportDisplays()</code> custom function to start the process off. This function looks like so:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">reportDisplays</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  navigator<span class=\"token punctuation\">.</span><span class=\"token function\">getVRDisplays</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">displays</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>displays<span class=\"token punctuation\">.</span>length <span class=\"token operator\">+</span> <span class=\"token string\">' displays'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> displays<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">var</span> cap <span class=\"token operator\">=</span> displays<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>capabilities<span class=\"token punctuation\">;</span>\n      <span class=\"token comment\">// cap is a VRDisplayCapabilities object</span>\n      <span class=\"token keyword\">var</span> listItem <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'li'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      listItem<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token string\">'&lt;strong&gt;Display '</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>i<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">'&lt;/strong&gt;'</span>\n                   <span class=\"token operator\">+</span> <span class=\"token string\">'&lt;br&gt;VR Display ID: '</span> <span class=\"token operator\">+</span> displays<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>displayId\n                   <span class=\"token operator\">+</span> <span class=\"token string\">'&lt;br&gt;VR Display Name: '</span> <span class=\"token operator\">+</span> displays<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>displayName\n                   <span class=\"token operator\">+</span> <span class=\"token string\">'&lt;br&gt;Display can present content: '</span> <span class=\"token operator\">+</span> cap<span class=\"token punctuation\">.</span>canPresent\n                   <span class=\"token operator\">+</span> <span class=\"token string\">'&lt;br&gt;Display is separate from the computer\\'s main display: '</span> <span class=\"token operator\">+</span> cap<span class=\"token punctuation\">.</span>hasExternalDisplay\n                   <span class=\"token operator\">+</span> <span class=\"token string\">'&lt;br&gt;Display can return position info: '</span> <span class=\"token operator\">+</span> cap<span class=\"token punctuation\">.</span>hasPosition\n                   <span class=\"token operator\">+</span> <span class=\"token string\">'&lt;br&gt;Display can return orientation info: '</span> <span class=\"token operator\">+</span> cap<span class=\"token punctuation\">.</span>hasOrientation\n                   <span class=\"token operator\">+</span> <span class=\"token string\">'&lt;br&gt;Display max layers: '</span> <span class=\"token operator\">+</span> cap<span class=\"token punctuation\">.</span>maxLayers<span class=\"token punctuation\">;</span>\n      list<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>listItem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>reportGamepads<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// For VR, controllers will only be active after their corresponding headset is active</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>This function first uses the promise-based <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Navigator/getVRDisplays\"><code>Navigator.getVRDisplays()</code> <small>(en-US)</small></a> method, which resolves with an array containing <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/VRDisplay\"><code>VRDisplay</code> <small>(en-US)</small></a> objects representing the connected displays. Next, it prints out each display's <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/VRDisplay/displayId\"><code>VRDisplay.displayId</code> <small>(en-US)</small></a> and <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/VRDisplay/displayName\"><code>VRDisplay.displayName</code> <small>(en-US)</small></a> values, and a number of useful values contained in the display's associated <a class=\"page-not-created\" title=\"Cette documentation n'a pas encore été rédigée, vous pouvez aider en contribuant&nbsp;!\"><code>VRCapabilities</code></a> object. The most useful of these are <a class=\"page-not-created\" title=\"Cette documentation n'a pas encore été rédigée, vous pouvez aider en contribuant&nbsp;!\"><code>hasOrientation</code></a> and <a class=\"page-not-created\" title=\"Cette documentation n'a pas encore été rédigée, vous pouvez aider en contribuant&nbsp;!\"><code>hasPosition</code></a>, which allow you to detect whether the device can return orientation and position data and set up your app accordingly.</p>\n<p>The last line contained in this function is a <a href=\"/fr/docs/Web/API/setTimeout\"><code>setTimeout()</code></a> call, which runs the <code>reportGamepads()</code> function after a 1 second delay. Why do we need to do this? First of all, VR controllers will only be ready after their associated VR headset is active, so we need to invoke this after <code>getVRDisplays()</code> has been called and returned the display information. Second, the Gamepad API is much older than the WebVR API, and not promise-based. As you'll see later, the <code>getGamepads()</code> method is synchronous, and just returns the <code>Gamepad</code> objects immediately — it doesn't wait for the controller to be ready to report information. Unless you wait for a little while, returned information may not be accurate (at least, this is what we found in our tests).</p>"}},{"type":"prose","value":{"id":"getting_the_gamepad_information","title":"Getting the Gamepad information","isH3":true,"content":"<p>The <code>reportGamepads()</code> function looks like this:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">reportGamepads</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> gamepads <span class=\"token operator\">=</span> navigator<span class=\"token punctuation\">.</span><span class=\"token function\">getGamepads</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>gamepads<span class=\"token punctuation\">.</span>length <span class=\"token operator\">+</span> <span class=\"token string\">' controllers'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> gamepads<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> <span class=\"token operator\">++</span>i<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">var</span> gp <span class=\"token operator\">=</span> gamepads<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> listItem <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'li'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    listItem<span class=\"token punctuation\">.</span>classList <span class=\"token operator\">=</span> <span class=\"token string\">'gamepad'</span><span class=\"token punctuation\">;</span>\n    listItem<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token string\">'&lt;strong&gt;Gamepad '</span> <span class=\"token operator\">+</span> gp<span class=\"token punctuation\">.</span>index <span class=\"token operator\">+</span> <span class=\"token string\">'&lt;/strong&gt; ('</span> <span class=\"token operator\">+</span> gp<span class=\"token punctuation\">.</span>id <span class=\"token operator\">+</span> <span class=\"token string\">')'</span>\n                 <span class=\"token operator\">+</span> <span class=\"token string\">'&lt;br&gt;Associated with VR Display ID: '</span> <span class=\"token operator\">+</span> gp<span class=\"token punctuation\">.</span>displayId\n                 <span class=\"token operator\">+</span> <span class=\"token string\">'&lt;br&gt;Gamepad associated with which hand: '</span> <span class=\"token operator\">+</span> gp<span class=\"token punctuation\">.</span>hand\n                 <span class=\"token operator\">+</span> <span class=\"token string\">'&lt;br&gt;Available haptic actuators: '</span> <span class=\"token operator\">+</span> gp<span class=\"token punctuation\">.</span>hapticActuators<span class=\"token punctuation\">.</span>length\n                 <span class=\"token operator\">+</span> <span class=\"token string\">'&lt;br&gt;Gamepad can return position info: '</span> <span class=\"token operator\">+</span> gp<span class=\"token punctuation\">.</span>pose<span class=\"token punctuation\">.</span>hasPosition\n                 <span class=\"token operator\">+</span> <span class=\"token string\">'&lt;br&gt;Gamepad can return orientation info: '</span> <span class=\"token operator\">+</span> gp<span class=\"token punctuation\">.</span>pose<span class=\"token punctuation\">.</span>hasOrientation<span class=\"token punctuation\">;</span>\n    list<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>listItem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  initialRun <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>This works in a similar manner to <code>reportDisplays()</code> — we get an array of <a href=\"/fr/docs/Web/API/Gamepad\"><code>Gamepad</code></a> objects using the non-promise-based <code>getGamepads()</code> method, then cycle through each one and print out information on each:</p>\n<ul>\n  <li>The <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Gamepad/displayId\"><code>Gamepad.displayId</code> <small>(en-US)</small></a> property is the same as the <code>displayId</code> of the headet the controller is associated with, and therefore useful for tying controller and headset information together.</li>\n  <li>The <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Gamepad/index\"><code>Gamepad.index</code> <small>(en-US)</small></a> property is unique numerical index that identifies each connected controller.</li>\n  <li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Gamepad/hand\"><code>Gamepad.hand</code> <small>(en-US)</small></a> returns which hand the controller is expected to be held in.</li>\n  <li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Gamepad/hapticActuators\"><code>Gamepad.hapticActuators</code> <small>(en-US)</small></a> returns an array of the haptic actuators available in the controller. Here we are returning its length so we can see how many each has available.</li>\n  <li>Finally, we return <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/GamepadPose/hasPosition\"><code>GamepadPose.hasPosition</code> <small>(en-US)</small></a> and <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/GamepadPose/hasOrientation\"><code>GamepadPose.hasOrientation</code> <small>(en-US)</small></a> to show whether the controller can return position and orientation data. This works just the same as for the displays, except that in the case of gamepads these values are available on the pose object, not the capabilities object.</li>\n</ul>\n<p>Note that we also gave each list item containing controller information a class name of <code>gamepad</code>. We'll explain what this is for later.</p>\n<p>The last thing to do here is set the <code>initialRun</code> variable to <code>false</code>, as the initial run is now over.</p>"}},{"type":"prose","value":{"id":"gamepad_events","title":"Gamepad events","isH3":true,"content":"<p>To finish off this section, we'll look at the gamepad-associated events. There are two we need concern ourselves with — <code><a href=\"/en-US/docs/Web/API/Window/gamepadconnected_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">gamepadconnected (en-US)</a></code> and <code><a href=\"/en-US/docs/Web/API/Window/gamepaddisconnected_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">gamepaddisconnected (en-US)</a></code> — and it is fairly obvious what they do.</p>\n<p>At the end of our example we first include the <code>removeGamepads()</code> function:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">removeGamepads</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> gpLi <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.gamepad'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> gpLi<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    list<span class=\"token punctuation\">.</span><span class=\"token function\">removeChild</span><span class=\"token punctuation\">(</span>gpLi<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token function\">reportGamepads</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>This function simply grabs references to all list items with a class name of <code>gamepad</code>, and removes them from the DOM. Then it re-runs <code>reportGamepads()</code> to populate the list with the updated list of connected controllers.</p>\n<p><code>removeGamepads()</code> will be run each time a gamepad is connected or disconnected, via the following event handlers:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'gamepadconnected'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  info<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token string\">'Gamepad '</span> <span class=\"token operator\">+</span> e<span class=\"token punctuation\">.</span>gamepad<span class=\"token punctuation\">.</span>index <span class=\"token operator\">+</span> <span class=\"token string\">' connected.'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>initialRun<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>removeGamepads<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nwindow<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'gamepaddisconnected'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  info<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token string\">'Gamepad '</span> <span class=\"token operator\">+</span> e<span class=\"token punctuation\">.</span>gamepad<span class=\"token punctuation\">.</span>index <span class=\"token operator\">+</span> <span class=\"token string\">' disconnected.'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>removeGamepads<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>We have <code>setTimeout()</code> calls in place here — like we did with the initialization code at the top of the script — to make sure that the gamepads are ready to report their information when <code>reportGamepads()</code> is called in each case.</p>\n<p>But there's one more thing to note — you'll see that inside the <code>gamepadconnected</code> handler, the timeout is only run if <code>initialRun</code> is <code>false</code>. This is because if your gamepads are connected when the document first loads, <code>gamepadconnected</code> is fired once for each gamepad, therefore <code>removeGamepads()</code>/<code>reportGamepads()</code> will be run several times. This could lead to inaccurate results, therefore we only want to run <code>removeGamepads()</code> inside the <code>gamepadconnected</code> handler after the initial run, not during it. This is what <code>initialRun</code> is for.</p>"}},{"type":"prose","value":{"id":"introducing_a_real_demo","title":"Introducing a real demo","isH3":false,"content":"<p>Now let's look at the Gamepad API being used inside a real WebVR demo. You can find this demo at <a href=\"https://github.com/mdn/webvr-tests/tree/master/raw-webgl-controller-example\" class=\"external\" rel=\" noopener\">raw-webgl-controller-example</a> (<a href=\"https://mdn.github.io/webvr-tests/raw-webgl-controller-example/\" class=\"external\" rel=\" noopener\">see it live here also</a>).</p>\n<p>In exactly the same way as our <a href=\"https://github.com/mdn/webvr-tests/tree/master/raw-webgl-example\" class=\"external\" rel=\" noopener\">raw-webgl-example</a> (see <a href=\"/en-US/docs/Web/API/WebVR_API/Using_the_WebVR_API\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">Using the WebVR API (en-US)</a> for details), this renders a spinning 3D cube, which you can choose to present in a VR display. The only difference is that, while in VR presenting mode, this demo allows you to move the cube by moving a VR controller (the original demo moves the cube as you move your VR headset).</p>\n<p>We'll explore the code differences in this version below — see <a href=\"https://github.com/mdn/webvr-tests/blob/master/raw-webgl-controller-example/webgl-demo.js\" class=\"external\" rel=\" noopener\">webgl-demo.js</a>.</p>"}},{"type":"prose","value":{"id":"accessing_the_gamepad_data","title":"Accessing the gamepad data","isH3":true,"content":"<p>Inside the <code>drawVRScene()</code> function, you'll find this bit of code:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> gamepads <span class=\"token operator\">=</span> navigator<span class=\"token punctuation\">.</span><span class=\"token function\">getGamepads</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> gp <span class=\"token operator\">=</span> gamepads<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>gp<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> gpPose <span class=\"token operator\">=</span> gp<span class=\"token punctuation\">.</span>pose<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> curPos <span class=\"token operator\">=</span> gpPose<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> curOrient <span class=\"token operator\">=</span> gpPose<span class=\"token punctuation\">.</span>orientation<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>poseStatsDisplayed<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">displayPoseStats</span><span class=\"token punctuation\">(</span>gpPose<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Here we get the connected gamepads with <a href=\"/fr/docs/Web/API/Navigator/getGamepads\"><code>Navigator.getGamepads</code></a>, then store the first gamepad detected in the <code>gp</code> variable. As we only need one gamepad for this demo, we'll just ignore the others.</p>\n<p>The next thing we do is to get the <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/GamepadPose\"><code>GamepadPose</code> <small>(en-US)</small></a> object for the controller stored in gpPose (by querying <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Gamepad/pose\"><code>Gamepad.pose</code> <small>(en-US)</small></a>), and also store the current gamepad position and orientation for this frame in variables so they are easuy to access later. We also display the post stats for this frame in the DOM using the <code>displayPoseStats()</code> function. All of this is only done if <code>gp</code> actually has a value (if a gamepad is connected), which stops the demo erroring if we don't have our gamepad connected.</p>\n<p>Slightly later in the code, you can find this block:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>gp <span class=\"token operator\">&amp;&amp;</span> gpPose<span class=\"token punctuation\">.</span>hasPosition<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">mvTranslate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n                <span class=\"token number\">0.0</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>curPos<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token number\">15</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token punctuation\">(</span>curOrient<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token number\">15</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                <span class=\"token number\">0.0</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>curPos<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token number\">15</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>curOrient<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token number\">15</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                <span class=\"token operator\">-</span><span class=\"token number\">15.0</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>curPos<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token number\">25</span><span class=\"token punctuation\">)</span>\n             <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>gp<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">mvTranslate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n                <span class=\"token number\">0.0</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>curOrient<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token number\">15</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                <span class=\"token number\">0.0</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>curOrient<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">*</span> <span class=\"token number\">15</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                <span class=\"token operator\">-</span><span class=\"token number\">15.0</span>\n             <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">mvTranslate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n                <span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span>\n                <span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span>\n                <span class=\"token operator\">-</span><span class=\"token number\">15.0</span>\n             <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Here we alter the position of the cube on the screen according to the <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/GamepadPose/position\"><code>position</code> <small>(en-US)</small></a> and <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/GamepadPose/orientation\"><code>orientation</code> <small>(en-US)</small></a> data received from the connected controller. These values (stored in <code>curPos</code> and <code>curOrient</code>) are <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array\"><code>Float32Array</code> <small>(en-US)</small></a>s containing the X, Y, and Z values (here we are just using [0] which is X, and [1] which is Y).</p>\n<p>If the <code>gp</code> variable has a <code>Gamepad</code> object inside it and it can return position values (<code>gpPose.hasPosition</code>), indicating a 6DoF controller, we modify the cube position using position and orientation values. If only the former is true, indicating a 3DoF controller, we modify the cube position using the orientation values only. If there is no gamepad connected, we don't modify the cube position at all.</p>"}},{"type":"prose","value":{"id":"displaying_the_gamepad_pose_data","title":"Displaying the gamepad pose data","isH3":true,"content":"<p>In the <code>displayPoseStats()</code> function, we grab all of the data we want to display out of the <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/GamepadPose\"><code>GamepadPose</code> <small>(en-US)</small></a> object passed into it, then print them into the UI panel that exists in the demo for displaying such data:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">displayPoseStats</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">pose</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> pos <span class=\"token operator\">=</span> pose<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> orient <span class=\"token operator\">=</span> pose<span class=\"token punctuation\">.</span>orientation<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> linVel <span class=\"token operator\">=</span> pose<span class=\"token punctuation\">.</span>linearVelocity<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> linAcc <span class=\"token operator\">=</span> pose<span class=\"token punctuation\">.</span>linearAcceleration<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> angVel <span class=\"token operator\">=</span> pose<span class=\"token punctuation\">.</span>angularVelocity<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> angAcc <span class=\"token operator\">=</span> pose<span class=\"token punctuation\">.</span>angularAcceleration<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>pose<span class=\"token punctuation\">.</span>hasPosition<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    posStats<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token string\">'Position: x '</span> <span class=\"token operator\">+</span> pos<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">', y '</span> <span class=\"token operator\">+</span> pos<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">', z '</span> <span class=\"token operator\">+</span> pos<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    posStats<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token string\">'Position not reported'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>pose<span class=\"token punctuation\">.</span>hasOrientation<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    orientStats<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token string\">'Orientation: x '</span> <span class=\"token operator\">+</span> orient<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">', y '</span> <span class=\"token operator\">+</span> orient<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">', z '</span> <span class=\"token operator\">+</span> orient<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    orientStats<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token string\">'Orientation not reported'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  linVelStats<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token string\">'Linear velocity: x '</span> <span class=\"token operator\">+</span> linVel<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">', y '</span> <span class=\"token operator\">+</span> linVel<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">', z '</span> <span class=\"token operator\">+</span> linVel<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  angVelStats<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token string\">'Angular velocity: x '</span> <span class=\"token operator\">+</span> angVel<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">', y '</span> <span class=\"token operator\">+</span> angVel<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">', z '</span> <span class=\"token operator\">+</span> angVel<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>linAcc<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    linAccStats<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token string\">'Linear acceleration: x '</span> <span class=\"token operator\">+</span> linAcc<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">', y '</span> <span class=\"token operator\">+</span> linAcc<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">', z '</span> <span class=\"token operator\">+</span> linAcc<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    linAccStats<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token string\">'Linear acceleration not reported'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>angAcc<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    angAccStats<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token string\">'Angular acceleration: x '</span> <span class=\"token operator\">+</span> angAcc<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">', y '</span> <span class=\"token operator\">+</span> angAcc<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">', z '</span> <span class=\"token operator\">+</span> angAcc<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    angAccStats<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token string\">'Angular acceleration not reported'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>This article has given you a very basic idea of how to use the Gamepad Extensions to use VR controllers inside WebVR apps. In a real app you'd probably have a much more complex control system in effect, with controls assigned to the buttons on the VR controllers, and the display being affected by both the display pose and the controller poses simultaneously. Here however, we just wanted to isolate the pure Gamepad Extensions parts of that.</p>"}},{"type":"prose","value":{"id":"voir_aussi","title":"Voir aussi","isH3":false,"content":"<ul>\n  <li><a href=\"/fr/docs/Web/API/WebVR_API\">WebVR API</a></li>\n  <li><a href=\"/fr/docs/Web/API/Gamepad_API\">Gamepad API</a></li>\n  <li><a href=\"/en-US/docs/Web/API/WebVR_API/Using_the_WebVR_API\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">Using the WebVR API (en-US)</a></li>\n  <li><a href=\"/en-US/docs/Games/Techniques/Controls_Gamepad_API\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">Implementing controls using the Gamepad API (en-US)</a></li>\n</ul>"}}],"toc":[{"text":"L'API WebVR","id":"lapi_webvr"},{"text":"L'API Gamepad","id":"lapi_gamepad"},{"text":"Types de contrôlleurs","id":"types_de_contrôlleurs"},{"text":"Basic controller access","id":"basic_controller_access"},{"text":"Introducing a real demo","id":"introducing_a_real_demo"},{"text":"Voir aussi","id":"voir_aussi"}],"summary":"La plupart des matériels de WebVR possède des contrôleurs qui viennent avec le casque de réalité virtuelle. Ceux-ci peuvent être utilisés dans les application WebVR grâce à l'API Gamepad, et plus spécifiquement avec l'API Gamepad Extensions qui ajoute des API pour accéder, entre autres, à la position du controller (en-US), au retour haptique (en-US), etc.. Cet article fournit les bases pour utiliser ces API.","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Using VR controllers with WebVR","locale":"en-US","native":"English (US)"},{"title":"WebVRでの VRコントローラーの使用","locale":"ja","native":"日本語"},{"title":"Using VR controllers with WebVR","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"fr/web/api/webvr_api/using_vr_controllers_with_webvr","github_url":"https://github.com/mdn/translated-content/blob/main/files/fr/web/api/webvr_api/using_vr_controllers_with_webvr/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/fr/docs/Web","title":"Technologies web pour développeurs"},{"uri":"/fr/docs/Web/API","title":"Référence Web API"},{"uri":"/fr/docs/Web/API/WebVR_API","title":"WebVR API"},{"uri":"/fr/docs/Web/API/WebVR_API/Using_VR_controllers_with_WebVR","title":"Utiliser des contrôleurs de réalité virtuelle pour du WebVR"}],"pageTitle":"Utiliser des contrôleurs de réalité virtuelle pour du WebVR - Référence Web API | MDN","noIndexing":false}}