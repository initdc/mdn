{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"Cache.put()","mdn_url":"/fr/docs/Web/API/Cache/put","locale":"fr","native":"Français","sidebarHTML":"<ol><li><strong><a href=\"/fr/docs/Web/API/Service_Worker_API\">Service Worker API</a></strong></li><li><strong><a href=\"/fr/docs/Web/API/Cache\"><code>Cache</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Méthodes</summary><ol><li><a href=\"/fr/docs/Web/API/Cache/add\"><code>add()</code></a></li><li><a href=\"/fr/docs/Web/API/Cache/addAll\"><code>addAll()</code></a></li><li><a href=\"/fr/docs/Web/API/Cache/delete\"><code>delete()</code></a></li><li><a href=\"/fr/docs/Web/API/Cache/keys\"><code>keys()</code></a></li><li><a href=\"/fr/docs/Web/API/Cache/match\"><code>match()</code></a></li><li><a href=\"/fr/docs/Web/API/Cache/matchAll\"><code>matchAll()</code></a></li><li><em><code>put()</code></em></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Pages liées à Service Workers API</summary><ol><li><a href=\"/fr/docs/Web/API/CacheStorage\"><code>CacheStorage</code></a></li><li><a href=\"/fr/docs/Web/API/Client\"><code>Client</code></a></li><li><a href=\"/fr/docs/Web/API/Clients\"><code>Clients</code></a></li><li><a href=\"/fr/docs/Web/API/ExtendableEvent\"><code>ExtendableEvent</code></a></li><li><a href=\"/fr/docs/Web/API/FetchEvent\"><code>FetchEvent</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/InstallEvent\"><code>InstallEvent</code> <small>(en-US)</small></a></li><li><a href=\"/fr/docs/Web/API/Navigator/serviceWorker\"><code>Navigator.serviceWorker</code></a></li><li><a href=\"/fr/docs/Web/API/NotificationEvent\"><code>NotificationEvent</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PeriodicSyncEvent\"><code>PeriodicSyncEvent</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PeriodicSyncManager\"><code>PeriodicSyncManager</code> <small>(en-US)</small></a></li><li><a href=\"/fr/docs/Web/API/ServiceWorker\"><code>ServiceWorker</code></a></li><li><a href=\"/fr/docs/Web/API/ServiceWorkerContainer\"><code>ServiceWorkerContainer</code></a></li><li><a href=\"/fr/docs/Web/API/ServiceWorkerGlobalScope\"><code>ServiceWorkerGlobalScope</code></a></li><li><a href=\"/fr/docs/Web/API/ServiceWorkerRegistration\"><code>ServiceWorkerRegistration</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/SyncEvent\"><code>SyncEvent</code> <small>(en-US)</small></a></li><li><a href=\"/fr/docs/Web/API/SyncManager\"><code>SyncManager</code></a></li><li><a href=\"/fr/docs/Web/API/WindowClient\"><code>WindowClient</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<div class=\"notecard experimental\" id=\"sect1\"><p><strong>Experimental:</strong> <strong>Cette fonction est expérimentale</strong><br>Puisque cette fonction est toujours en développement dans certains navigateurs, veuillez consulter le <a href=\"#browser_compatibility\">tableau de compatibilité</a> pour les préfixes à utiliser selon les navigateurs.<br>Il convient de noter qu'une fonctionnalité expérimentale peut voir sa syntaxe ou son comportement modifié dans le futur en fonction des évolutions de la spécification.</p></div>\n<p>La méthode <strong><code>put()</code></strong> de l'interface <a href=\"/fr/docs/Web/API/Cache\"><code>Cache</code></a> permet d'ajouter des paires clé/valeur à l'objet <a href=\"/fr/docs/Web/API/Cache\"><code>Cache</code></a> en cours.</p>\n<p>Souvent, le comportement voulu est juste de <a href=\"/fr/docs/Web/API/fetch\"><code>fetch()</code></a> une ou plusieurs requête, et d'ajouter les résultats directement dans le cache. Dans ce type de cas, il est plus judicieux d'utiliser <a href=\"/fr/docs/Web/API/Cache/add\" title=\"Cache.add()\"><code>Cache.add()</code></a>/<a href=\"/fr/docs/Web/API/Cache/addAll\" title=\"Cache.addAll()\"><code>Cache.addAll()</code></a> , étant donné que ces méthodes sont des raccourcis pour une ou plusieurs de ces opérations&nbsp;:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>response<span class=\"token punctuation\">.</span>ok<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TypeError</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Bad response status'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> cache<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n</code></pre></div>\n<div class=\"notecard note\" id=\"sect2\">\n  <p><strong>Note :</strong> <code>put()</code> écrasera toute paire clé/valeur précedemment stockée en cache et qui correspond à la requête.</p>\n</div>\n<div class=\"notecard note\" id=\"sect3\">\n  <p><strong>Note :</strong> Les implémentations initiales de Cache (à la fois dans Blink et Gecko) résolvent les promesses <a href=\"/fr/docs/Web/API/Cache/add\"><code>Cache.add</code></a>, <a href=\"/fr/docs/Web/API/Cache/addAll\"><code>Cache.addAll</code></a>, et <a href=\"/fr/docs/Web/API/Cache/put\" aria-current=\"page\"><code>Cache.put</code></a> quand le corps de la réponse est entièrement écrit en stockage. Les versions plus récentes des spécifications sont plus précises en déclarant que le navigateur peut résoudre ces promesses dès que l'entrée est enregistrée en base de donnée, même si le reste de la requête est encore en train d'arriver.</p>\n</div>\n<div class=\"notecard note\" id=\"sect4\">\n  <p><strong>Note :</strong> Depuis Chrome 46, l'API Cache ne stocke que les requêtes depuis des origines sécurisées, à savoir celles servies en HTTPS.</p>\n</div>"}},{"type":"prose","value":{"id":"syntaxe","title":"Syntaxe","isH3":false,"content":"<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>cache<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// la paire requête/réponse a été ajoutée au cache</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"paramètres","title":"Paramètres","isH3":true,"content":"<dl>\n  <dt id=\"request\">request</dt>\n  <dd>\n    <p>La <a href=\"/fr/docs/Web/API/Request\" title=\"Requête\"><code>Requête</code></a> à ajouter au cache.</p>\n  </dd>\n  <dt id=\"response\">response</dt>\n  <dd>\n    <p>La <a href=\"/fr/docs/Web/API/Response\" title=\"Réponse\"><code>Réponse</code></a> à associer à la requête.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"retour","title":"Retour","isH3":true,"content":"<p>Une <a href=\"/fr/docs/Web/JavaScript/Reference/Global_Objects/Promise\"><code>Promesse</code></a> est retournée avec void.</p>\n<div class=\"notecard note\" id=\"sect5\">\n  <p><strong>Note :</strong> La promesse sera rompue avec un <code>TypeError</code> si le schéma d'URL n'est pas <code>http</code> ou <code>https</code>.</p>\n</div>"}},{"type":"prose","value":{"id":"exemples","title":"Exemples","isH3":false,"content":"<p>Cet extrait de code est tiré du MDN <a href=\"https://github.com/mdn/sw-test/\" class=\"external\" rel=\" noopener\">sw-test example</a> (lancez <a href=\"https://mdn.github.io/sw-test/\" class=\"external\" rel=\" noopener\">sw-test dans votre navigateur</a>). On attend le déclenchement d'un <a href=\"/fr/docs/Web/API/FetchEvent\"><code>FetchEvent</code></a>, puis l'on va retourner une réponse spéciale d'après la procédure suivante&nbsp;:</p>\n<ol>\n  <li>Vérifier si un match pour la requête a été trouvé dans le <a href=\"/fr/docs/Web/API/CacheStorage\"><code>CacheStorage</code></a> grâce à <a href=\"/fr/docs/Web/API/CacheStorage/match\" title=\"CacheStorage.match()\"><code>CacheStorage.match()</code></a> . Si oui, servir cette réponse.</li>\n  <li>Sinon, ouvrir le cache <code>v1</code> avec <code>open()</code>, insérer la requête réseau par défaut dans le cache via <a href=\"/fr/docs/Web/API/Cache/put\" title=\"Cache.put()\" aria-current=\"page\"><code>Cache.put()</code></a> , et retourner un clone de cette requête avec <code>return response.clone()</code> — nécessaire car <code>put()</code> détruit le corps de la réponse.</li>\n  <li>En cas d'échec (e.g., car le réseau est inaccessible), retourner une réponse de secours.</li>\n</ol>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> response<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> cachedResponse <span class=\"token operator\">=</span> caches<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">r</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  response <span class=\"token operator\">=</span> r<span class=\"token punctuation\">;</span>\n  caches<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'v1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">cache</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    cache<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> caches<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/sw-test/gallery/myLittleVader.jpg'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"specifications","value":{"title":"Spécifications","id":"spécifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://w3c.github.io/ServiceWorker/#cache-put","title":"Service Workers 1"}],"query":"api.Cache.put"}},{"type":"browser_compatibility","value":{"title":"Compatibilité des navigateurs","id":"compatibilité_des_navigateurs","isH3":false,"query":"api.Cache.put","dataURL":"/fr/docs/Web/API/Cache/put/bcd.json"}},{"type":"prose","value":{"id":"voir_aussi","title":"Voir aussi","isH3":false,"content":"<ul>\n  <li><a href=\"/fr/docs/Web/API/Service_Worker_API/Using_Service_Workers\">Utiliser les Service Workers</a></li>\n  <li><a href=\"/fr/docs/Web/API/Cache\"><code>Cache</code></a></li>\n  <li><a href=\"/fr/docs/Web/API/caches\"><code>caches</code></a></li>\n</ul>"}}],"toc":[{"text":"Syntaxe","id":"syntaxe"},{"text":"Exemples","id":"exemples"},{"text":"Spécifications","id":"spécifications"},{"text":"Compatibilité des navigateurs","id":"compatibilité_des_navigateurs"},{"text":"Voir aussi","id":"voir_aussi"}],"summary":"La méthode put() de l'interface Cache permet d'ajouter des paires clé/valeur à l'objet Cache en cours.","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Cache.put()","locale":"en-US","native":"English (US)"},{"title":"Cache.put()","locale":"ja","native":"日本語"},{"title":"Cache.put()","locale":"ko","native":"한국어"},{"title":"Cache.put()","locale":"ru","native":"Русский"},{"title":"Cache.put()","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"fr/web/api/cache/put","github_url":"https://github.com/mdn/translated-content/blob/main/files/fr/web/api/cache/put/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/fr/docs/Web","title":"Technologies web pour développeurs"},{"uri":"/fr/docs/Web/API","title":"Référence Web API"},{"uri":"/fr/docs/Web/API/Cache","title":"Cache"},{"uri":"/fr/docs/Web/API/Cache/put","title":"Cache.put()"}],"pageTitle":"Cache.put() - Référence Web API | MDN","noIndexing":false}}