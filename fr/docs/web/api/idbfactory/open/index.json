{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"IDBFactory.open()","mdn_url":"/fr/docs/Web/API/IDBFactory/open","locale":"fr","native":"Français","sidebarHTML":"<ol><li><strong><a href=\"/fr/docs/Web/API/IndexedDB_API\">IndexedDB API</a></strong></li><li><strong><a href=\"/fr/docs/Web/API/IDBFactory\"><code>IDBFactory</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Méthodes</summary><ol><li><a href=\"/fr/docs/Web/API/IDBFactory/cmp\"><code>cmp()</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBFactory/databases\"><code>databases()</code> <small>(en-US)</small></a></li><li><a href=\"/fr/docs/Web/API/IDBFactory/deleteDatabase\"><code>deleteDatabase()</code></a></li><li><em><code>open()</code></em></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Pages liées à IndexedDB</summary><ol><li><a href=\"/fr/docs/Web/API/IDBCursor\"><code>IDBCursor</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBCursorWithValue\"><code>IDBCursorWithValue</code> <small>(en-US)</small></a></li><li><a href=\"/fr/docs/Web/API/IDBDatabase\"><code>IDBDatabase</code></a></li><li><a href=\"/fr/docs/Web/API/IDBIndex\"><code>IDBIndex</code></a></li><li><a href=\"/fr/docs/Web/API/IDBKeyRange\"><code>IDBKeyRange</code></a></li><li><a href=\"/fr/docs/Web/API/IDBObjectStore\"><code>IDBObjectStore</code></a></li><li><a href=\"/fr/docs/Web/API/IDBOpenDBRequest\"><code>IDBOpenDBRequest</code></a></li><li><a href=\"/fr/docs/Web/API/IDBRequest\"><code>IDBRequest</code></a></li><li><a href=\"/fr/docs/Web/API/IDBTransaction\"><code>IDBTransaction</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBVersionChangeEvent\"><code>IDBVersionChangeEvent</code> <small>(en-US)</small></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>La méthode <strong><code>open()</code></strong> de l'interface <a href=\"/fr/docs/Web/API/IDBFactory\"><code>IDBFactory</code></a> lance une requête pour ouvrir une <a href=\"/fr/docs/Web/API/IndexedDB_API#se_connecter_%c3%a0_la_base_de_donn%c3%a9es\">connexion à une base de données</a>.</p>\n<p>La méthode renvoie immédiatement un objet <a href=\"/fr/docs/Web/API/IDBOpenDBRequest\"><code>IDBOpenDBRequest</code></a> puis effectue l'opération d'ouverture de façon asynchrone. Si l'opération réussit, un évènement <code>success</code> sera éms sur l'objet <code>IDBOpenDBRequest</code> renvoyé par la méthode, et la propriété <code>result</code> de l'évènement aura la valeur de l'objet <a href=\"/fr/docs/Web/API/IDBDatabase\"><code>IDBDatabase</code></a> associé à la connexion.</p>\n<p>Si une erreur se produit lors de la connexion, un évènement <code>error</code> sera émis sur l'objet <code>IDBOpenDBRequest</code> renvoyé par la méthode.</p>\n<p>Cette méthode peut également émettre les évènements <code>upgradeneeded</code>, <code>blocked</code> ou <code>versionchange</code>.</p><div class=\"notecard note\" id=\"sect1\">\n  <p><strong>Note:</strong> Cette fonctionnalité est disponible via les <a href=\"/fr/docs/Web/API/Web_Workers_API\">Web Workers</a></p>\n</div>"}},{"type":"prose","value":{"id":"syntaxe","title":"Syntaxe","isH3":false,"content":"<p>La syntaxe standard est la suivante&nbsp;:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> IDBOpenDBRequest <span class=\"token operator\">=</span> indexedDB<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span>nom<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> IDBOpenDBRequest <span class=\"token operator\">=</span> indexedDB<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span>nom<span class=\"token punctuation\">,</span> version<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"paramètres","title":"Paramètres","isH3":true,"content":"<dl>\n  <dt id=\"nom\"><code>nom</code></dt>\n  <dd>\n    <p>Le nom de la base de données qu'on souhaite ouvrir.</p>\n  </dd>\n  <dt id=\"version\"><code>version</code> <span class=\"badge inline optional\">Facultatif</span></dt>\n  <dd>\n    <p>Paramètre optionnel qui représente la version de la base de données qu'on veut ouvrir. Si ce paramètre n'est pas fourni et que la base de données existe, une connexion sera ouverte sans changer la version de la base de données. Si ce paramètre n'est pas fourni est que la base de données n'existe pas, elle sera créée avec une version <code>1</code>.</p>\n  </dd>\n</dl>\n<h4 id=\"objet_options_expérimental_de_gecko\">Objet options expérimental de Gecko</h4>\n<dl>\n  <dt id=\"options\"><code>options</code> (<code>version</code> et <code>storage</code>) <span class=\"badge inline optional\">Facultatif</span> <svg class=\"icon icon-deprecated\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-deprecated\"></use>\n</svg></dt>\n  <dd>\n    <p>Dans Gecko, à partir de <a href=\"/fr/docs/Mozilla/Firefox/Releases/26\">la version 26</a>, il est possible de passer en paramètre un objet <code>options</code> non standard, qui contienne le numéro de version de la base de données (équivalent donc au paramètre <code>version</code> définit ci-avant), et également une valeur <code>storage</code> qui décrit si on souhaite utiliser un stockage permanent (avec la valeur <code>persistent</code>) ou un stockage temporaire (avec la valeur <code>temporary</code>).</p>\n    <div class=\"notecard warning\" id=\"sect2\">\n      <p><strong>Attention :</strong> l’attribut <code>storage</code> est déprécié et sera prochainement retiré de Gecko. Vous devriez utiliser <a href=\"/fr/docs/Web/API/StorageManager/persist\"><code>StorageManager.persist()</code></a> à la place pour obtenir un stockage persistant.</p>\n    </div>\n  </dd>\n</dl>\n<div class=\"notecard note\" id=\"sect3\">\n  <p><strong>Note :</strong> Vous pouvez consulter l'article <a href=\"/fr/docs/Web/API/IndexedDB_API/Browser_storage_limits_and_eviction_criteria\">les limites de stockage du navigateur et les critères d'éviction</a> pour en savoir plus sur les différents types de stockage disponibles et la façon dont Firefox gère les données côté client.</p>\n</div>"}},{"type":"prose","value":{"id":"valeur_de_retour","title":"Valeur de retour","isH3":true,"content":"<p>Un objet <a href=\"/fr/docs/Web/API/IDBOpenDBRequest\"><code>IDBOpenDBRequest</code></a> sur lequel sont déclenchés les différents évènements liés à cette requête.</p>"}},{"type":"prose","value":{"id":"exceptions","title":"Exceptions","isH3":true,"content":"<p>Cette méthode peut lever une <a href=\"/fr/docs/Web/API/DOMException\"><code>DOMException</code></a> de type suivant&nbsp;:</p>\n<table>\n  <thead>\n    <tr>\n      <th>Exception</th>\n      <th>Description</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td><code>TypeError</code></td>\n      <td>La valeur de version est zéro ou un nombre négatif ou n’est pas un nombre.</td>\n    </tr>\n  </tbody>\n</table>"}},{"type":"prose","value":{"id":"exemples","title":"Exemples","isH3":false,"content":"<p>Voici un exemple d'ouverture de la base de données <code>toDoList</code> en utilisant la syntaxe standard et le paramètre <code>version</code>&nbsp;:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> request <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>indexedDB<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"toDoList\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Dans le fragment de code qui suit, on effectue une requête pour ouvrir une base de données et on inclut des gestionnaires d'évènements pour gérer la réussite ou l'échec de l'ouverture. Pour consulter un exemple fonctionnel complet, vous pouvez étudier notre application <a href=\"https://github.com/mdn/to-do-notifications/tree/gh-pages\" class=\"external\" rel=\" noopener\">To-do Notifications</a> (<a href=\"https://mdn.github.io/to-do-notifications/\" class=\"external\" rel=\" noopener\">cf. l'exemple <em>live</em></a>).</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> note <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ul\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nwindow<span class=\"token punctuation\">.</span>indexedDB <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>indexedDB <span class=\"token operator\">||</span> window<span class=\"token punctuation\">.</span>mozIndexedDB <span class=\"token operator\">||</span> window<span class=\"token punctuation\">.</span>webkitIndexedDB <span class=\"token operator\">||</span> window<span class=\"token punctuation\">.</span>msIndexedDB<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// NE PAS utiliser \"var indexedDB = ...\" si on n’est pas dans une fonction.</span>\n<span class=\"token comment\">// On pourrait avoir besoin de références vers quelques objets window.IDB* :</span>\nwindow<span class=\"token punctuation\">.</span>IDBTransaction <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>IDBTransaction <span class=\"token operator\">||</span> window<span class=\"token punctuation\">.</span>webkitIDBTransaction <span class=\"token operator\">||</span> window<span class=\"token punctuation\">.</span>msIDBTransaction<span class=\"token punctuation\">;</span>\nwindow<span class=\"token punctuation\">.</span>IDBKeyRange <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>IDBKeyRange <span class=\"token operator\">||</span> window<span class=\"token punctuation\">.</span>webkitIDBKeyRange <span class=\"token operator\">||</span> window<span class=\"token punctuation\">.</span>msIDBKeyRange<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Mozilla n’a jamais préfixé ces objets, donc on n’a pas besoin de window.mozIDB*</span>\n\n<span class=\"token comment\">// On ouvre la version 4 de la base de données</span>\n<span class=\"token keyword\">var</span> DBOpenRequest <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>indexedDB<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"toDoList\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// On ajoute deux gestionnaires d'évènements</span>\n<span class=\"token comment\">// Le premier utilisé en cas d'échec</span>\nDBOpenRequest<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onerror</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  note<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">+=</span> <span class=\"token string\">'&lt;li&gt;Erreur lors du chargement de la base.&lt;/li&gt;'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Et le second en cas de réussite</span>\nDBOpenRequest<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onsuccess</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  note<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">+=</span> <span class=\"token string\">'&lt;li&gt;Base de données initialisée.&lt;/li&gt;'</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// On stocke le résultat de l'ouverture dans la</span>\n  <span class=\"token comment\">// variable db qui sera utilisée par la suite</span>\n  <span class=\"token comment\">// pour d'autres opérations</span>\n  db <span class=\"token operator\">=</span> DBOpenRequest<span class=\"token punctuation\">.</span>result<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"specifications","value":{"title":"Spécifications","id":"spécifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://w3c.github.io/IndexedDB/#ref-for-dom-idbfactory-open②","title":"Indexed Database API 3.0"}],"query":"api.IDBFactory.open"}},{"type":"browser_compatibility","value":{"title":"Compatibilité des navigateurs","id":"compatibilité_des_navigateurs","isH3":false,"query":"api.IDBFactory.open","dataURL":"/fr/docs/Web/API/IDBFactory/open/bcd.json"}},{"type":"prose","value":{"id":"voir_aussi","title":"Voir aussi","isH3":false,"content":"<ul>\n  <li><a href=\"/fr/docs/Web/API/IndexedDB_API/Using_IndexedDB\">Utiliser IndexedDB</a></li>\n  <li>Démarrer des transactions&nbsp;: <a href=\"/fr/docs/Web/API/IDBDatabase\"><code>IDBDatabase</code></a></li>\n  <li>Manipuler des transactions&nbsp;: <a href=\"/fr/docs/Web/API/IDBTransaction\"><code>IDBTransaction</code></a></li>\n  <li>Définir un intervalle de clés&nbsp;: <a href=\"/fr/docs/Web/API/IDBKeyRange\"><code>IDBKeyRange</code></a></li>\n  <li>Récupérer des données et les modifier&nbsp;: <a href=\"/fr/docs/Web/API/IDBObjectStore\"><code>IDBObjectStore</code></a></li>\n  <li>Manipuler des curseurs&nbsp;: <a href=\"/fr/docs/Web/API/IDBCursor\"><code>IDBCursor</code></a></li>\n  <li>Exemple de référence pour IndexedDB&nbsp;: <a href=\"https://github.com/mdn/to-do-notifications/tree/gh-pages\" class=\"external\" rel=\" noopener\">To-do Notifications</a></li>\n</ul>"}}],"toc":[{"text":"Syntaxe","id":"syntaxe"},{"text":"Exemples","id":"exemples"},{"text":"Spécifications","id":"spécifications"},{"text":"Compatibilité des navigateurs","id":"compatibilité_des_navigateurs"},{"text":"Voir aussi","id":"voir_aussi"}],"summary":"La méthode open() de l'interface IDBFactory lance une requête pour ouvrir une connexion à une base de données.","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"IDBFactory.open()","locale":"en-US","native":"English (US)"},{"title":"IDBFactory.open","locale":"ja","native":"日本語"},{"title":"IDBFactory.open","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"fr/web/api/idbfactory/open","github_url":"https://github.com/mdn/translated-content/blob/main/files/fr/web/api/idbfactory/open/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/fr/docs/Web","title":"Technologies web pour développeurs"},{"uri":"/fr/docs/Web/API","title":"Référence Web API"},{"uri":"/fr/docs/Web/API/IDBFactory","title":"IDBFactory"},{"uri":"/fr/docs/Web/API/IDBFactory/open","title":"IDBFactory.open()"}],"pageTitle":"IDBFactory.open() - Référence Web API | MDN","noIndexing":false}}