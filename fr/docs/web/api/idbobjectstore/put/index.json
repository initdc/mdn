{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"IDBObjectStore.put()","mdn_url":"/fr/docs/Web/API/IDBObjectStore/put","locale":"fr","native":"Français","sidebarHTML":"<ol><li><strong><a href=\"/fr/docs/Web/API/IndexedDB_API\">IndexedDB API</a></strong></li><li><strong><a href=\"/fr/docs/Web/API/IDBObjectStore\"><code>IDBObjectStore</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Propriétés</summary><ol><li><a href=\"/fr/docs/Web/API/IDBObjectStore/autoIncrement\"><code>autoIncrement</code></a></li><li><a href=\"/fr/docs/Web/API/IDBObjectStore/indexNames\"><code>indexNames</code></a></li><li><a href=\"/fr/docs/Web/API/IDBObjectStore/keyPath\"><code>keyPath</code></a></li><li><a href=\"/fr/docs/Web/API/IDBObjectStore/name\"><code>name</code></a></li><li><a href=\"/fr/docs/Web/API/IDBObjectStore/transaction\"><code>transaction</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Méthodes</summary><ol><li><a href=\"/fr/docs/Web/API/IDBObjectStore/add\"><code>add()</code></a></li><li><a href=\"/fr/docs/Web/API/IDBObjectStore/clear\"><code>clear()</code></a></li><li><a href=\"/fr/docs/Web/API/IDBObjectStore/count\"><code>count()</code></a></li><li><a href=\"/fr/docs/Web/API/IDBObjectStore/createIndex\"><code>createIndex()</code></a></li><li><a href=\"/fr/docs/Web/API/IDBObjectStore/delete\"><code>delete()</code></a></li><li><a href=\"/fr/docs/Web/API/IDBObjectStore/deleteIndex\"><code>deleteIndex()</code></a></li><li><a href=\"/fr/docs/Web/API/IDBObjectStore/get\"><code>get()</code></a></li><li><a href=\"/fr/docs/Web/API/IDBObjectStore/getAll\"><code>getAll()</code></a></li><li><a href=\"/fr/docs/Web/API/IDBObjectStore/getAllKeys\"><code>getAllKeys()</code></a></li><li><a href=\"/fr/docs/Web/API/IDBObjectStore/getKey\"><code>getKey()</code></a></li><li><a href=\"/fr/docs/Web/API/IDBObjectStore/index\"><code>index()</code></a></li><li><a href=\"/fr/docs/Web/API/IDBObjectStore/openCursor\"><code>openCursor()</code></a></li><li><a href=\"/fr/docs/Web/API/IDBObjectStore/openKeyCursor\"><code>openKeyCursor()</code></a></li><li><em><code>put()</code></em></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Pages liées à IndexedDB</summary><ol><li><a href=\"/fr/docs/Web/API/IDBCursor\"><code>IDBCursor</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBCursorWithValue\"><code>IDBCursorWithValue</code> <small>(en-US)</small></a></li><li><a href=\"/fr/docs/Web/API/IDBDatabase\"><code>IDBDatabase</code></a></li><li><a href=\"/fr/docs/Web/API/IDBFactory\"><code>IDBFactory</code></a></li><li><a href=\"/fr/docs/Web/API/IDBIndex\"><code>IDBIndex</code></a></li><li><a href=\"/fr/docs/Web/API/IDBKeyRange\"><code>IDBKeyRange</code></a></li><li><a href=\"/fr/docs/Web/API/IDBOpenDBRequest\"><code>IDBOpenDBRequest</code></a></li><li><a href=\"/fr/docs/Web/API/IDBRequest\"><code>IDBRequest</code></a></li><li><a href=\"/fr/docs/Web/API/IDBTransaction\"><code>IDBTransaction</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBVersionChangeEvent\"><code>IDBVersionChangeEvent</code> <small>(en-US)</small></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>La méthode <strong><code>put()</code></strong>, rattachée à l'interface <a href=\"/fr/docs/Web/API/IDBObjectStore\"><code>IDBObjectStore</code></a>, renvoie un objet <a href=\"/fr/docs/Web/API/IDBRequest\"><code>IDBRequest</code></a> et, dans un autre <em>thread</em>, crée <a href=\"https://www.whatwg.org/specs/web-apps/current-work/multipage/common-dom-interfaces.html#structured-clone\" class=\"external\" rel=\" noopener\">un clone structuré</a> de la valeur puis enregistre ce clone dans le magasin d'objet. Cette méthode permet ainsi d'ajouter de nouveaux enregistrements ou de mettre à jour des enregistrements existants dans un magasin d'objet lorsque la transaction est en mode <code>readwrite</code> (lecture-écriture)</p>\n<p>Si l'enregistrement est stocké avec succès, un évènement de succès sera déclenché sur la requête renvoyée par la méthode. La propriété <code>result</code> de cette requête contiendra la clé de l'enregistrement créé ou mis à jour. La propriété <code>transaction</code> de cette requête sera la transaction dans laquelle le magasin d'objet est ouvert.</p>\n<p>La méthode <code>put()</code> permet d'ajouter ou de mettre à jour. Si on souhaite uniquement insérer, on utilisera plutôt <a href=\"/fr/docs/Web/API/IDBObjectStore/add\"><code>IDBObjectStore.add</code></a>.</p><div class=\"notecard note\" id=\"sect1\">\n  <p><strong>Note:</strong> Cette fonctionnalité est disponible via les <a href=\"/fr/docs/Web/API/Web_Workers_API\">Web Workers</a></p>\n</div>"}},{"type":"prose","value":{"id":"syntaxe","title":"Syntaxe","isH3":false,"content":"<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> request <span class=\"token operator\">=</span> objectStore<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>monElement<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> request <span class=\"token operator\">=</span> objectStore<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>monElement<span class=\"token punctuation\">,</span> cleOptionnelle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"paramètres","title":"Paramètres","isH3":true,"content":"<dl>\n  <dt id=\"monelement\"><code>monElement</code></dt>\n  <dd>\n    <p>La valeur qu'on souhaite enregistrer.</p>\n  </dd>\n  <dt id=\"cleoptionnelle\"><code>cleOptionnelle</code> <span class=\"badge inline optional\">Facultatif</span></dt>\n  <dd>\n    <p>La clé qu'on souhaite utiliser pour identifier l'enregistrement. Si cet argument est absent, la valeur par défaut sera <a href=\"/fr/docs/Web/JavaScript/Reference/Operators/null\"><code>null</code></a>.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"valeur_de_retour","title":"Valeur de retour","isH3":true,"content":"<p>Un objet <a href=\"/fr/docs/Web/API/IDBRequest\"><code>IDBRequest</code></a> qui recevra les évènements qui seront déclenchés suite à cette opération.</p>"}},{"type":"prose","value":{"id":"exceptions","title":"Exceptions","isH3":true,"content":"<p>Cette méthode peut lever une de ces exceptions <a href=\"/fr/docs/Web/API/DOMException\"><code>DOMException</code></a> :</p>\n<table class=\"standard-table\">\n  <thead>\n    <tr>\n      <th scope=\"col\">Exception</th>\n      <th scope=\"col\">Description</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td><code>ReadOnlyError</code></td>\n      <td>\n        La transaction associée à l'opération est uniquement\n        <a href=\"/fr/docs/Web/API/IDBTransaction#constantes\">dans un mode de lecture seule</a>.\n      </td>\n    </tr>\n    <tr>\n      <td><code>TransactionInactiveError</code></td>\n      <td>\n        La transaction rattachée à l'objet\n        <a href=\"/fr/docs/Web/API/IDBObjectStore\"><code>IDBObjectStore</code></a> est inactive.\n      </td>\n    </tr>\n    <tr>\n      <td><code>DataError</code></td>\n      <td>\n        <p>L'une de ces conditions est vérifiée :</p>\n        <ul>\n          <li>\n            Le magasin d'objet utilise des clés en ligne (<em>in-line keys</em>)\n            ou dispose d'un générateur de clés et le paramètre pour la clé a été\n            utilisé.\n          </li>\n          <li>\n            Le magasin d'objet utilise des clés en ligne (<em>in-line keys</em>), ne dispose pas d'un générateur de clés et le paramètre pour la\n            clé n'a pas été utilisé.\n          </li>\n          <li>\n            Le magasin d'objet utilise des clés en ligne (<em>in-line keys</em>), ne dispose pas d'un générateur de clés et le chemin de clé du\n            magasin d'objet ne déclenche pas une clé valide.\n          </li>\n          <li>\n            Le paramètre pour la clé a été fourni mais la valeur n'est pas une\n            clé valide.\n          </li>\n        </ul>\n      </td>\n    </tr>\n    <tr>\n      <td><code>InvalidStateError</code></td>\n      <td>\n        L'objet <a href=\"/fr/docs/Web/API/IDBObjectStore\"><code>IDBObjectStore</code></a> a été supprimé ou\n        déplacé.\n      </td>\n    </tr>\n    <tr>\n      <td><code>DataCloneError</code></td>\n      <td>\n        Les données à enregistrer n'ont pas pu être clonées par l'algorithme\n        interne.\n      </td>\n    </tr>\n  </tbody>\n</table>"}},{"type":"prose","value":{"id":"exemples","title":"Exemples","isH3":false,"content":"<p>Dans l'exemple suivant, on effectue une requête pour obtenir l'enregistrement correspondant à un titre donné. Lorsque cette requête est réussie, on récupère l'enregistrement via la fonction <code>onsuccess</code>. Ensuite, on met à jour une des propriétés de l'enregistrement et on enregistre la valeur mise à jour dans le magasin d'objet avec une autre requête et <code>put()</code>.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> title <span class=\"token operator\">=</span> <span class=\"token string\">\"Walk dog\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// On ouvre une transaction</span>\n<span class=\"token keyword\">var</span> objectStore <span class=\"token operator\">=</span> db<span class=\"token punctuation\">.</span><span class=\"token function\">transaction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'toDoList'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"readwrite\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">objectStore</span><span class=\"token punctuation\">(</span><span class=\"token string\">'toDoList'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// On obtient la liste to-do dont le titre correspond</span>\n<span class=\"token keyword\">var</span> objectStoreTitleRequest <span class=\"token operator\">=</span> objectStore<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>title<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nobjectStoreTitleRequest<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onsuccess</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// On récupère les données de l'objet associé</span>\n  <span class=\"token comment\">// à l'enregistrement</span>\n  <span class=\"token keyword\">var</span> data <span class=\"token operator\">=</span> objectStoreTitleRequest<span class=\"token punctuation\">.</span>result<span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// On met à jour la valeur de notified avec \"yes\"</span>\n  data<span class=\"token punctuation\">.</span>notified <span class=\"token operator\">=</span> <span class=\"token string\">\"yes\"</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// On crée une autre requête pour appliquer cette</span>\n  <span class=\"token comment\">// mise à jour en base de données</span>\n  <span class=\"token keyword\">var</span> updateTitleRequest <span class=\"token operator\">=</span> objectStore<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// On imprime la transaction à l'origine</span>\n  <span class=\"token comment\">// de la requête</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"La transaction originelle est \"</span> <span class=\"token operator\">+</span> updateTitleRequest<span class=\"token punctuation\">.</span>transaction<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Lorsque cette nouvelle requête a réussi. On affiche</span>\n  <span class=\"token comment\">// les données grâce à la fonction displayData()</span>\n  updateTitleRequest<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onsuccess</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">displayData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"specifications","value":{"title":"Spécifications","id":"spécifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://w3c.github.io/IndexedDB/#ref-for-dom-idbobjectstore-put①","title":"Indexed Database API 3.0"}],"query":"api.IDBObjectStore.put"}},{"type":"browser_compatibility","value":{"title":"Compatibilité des navigateurs","id":"compatibilité_des_navigateurs","isH3":false,"query":"api.IDBObjectStore.put","dataURL":"/fr/docs/Web/API/IDBObjectStore/put/bcd.json"}},{"type":"prose","value":{"id":"voir_aussi","title":"Voir aussi","isH3":false,"content":"<ul>\n  <li><a href=\"/fr/docs/Web/API/IndexedDB_API/Using_IndexedDB\">Utiliser IndexedDB</a></li>\n  <li>Initier une connexion : <a href=\"/fr/docs/Web/API/IDBDatabase\"><code>IDBDatabase</code></a></li>\n  <li>Utiliser les transactions : <a href=\"/fr/docs/Web/API/IDBTransaction\"><code>IDBTransaction</code></a></li>\n  <li>Définir un intervalle de clés : <a href=\"/fr/docs/Web/API/IDBKeyRange\"><code>IDBKeyRange</code></a></li>\n  <li>Récupérer et modifier les données : <a href=\"/fr/docs/Web/API/IDBObjectStore\"><code>IDBObjectStore</code></a></li>\n  <li>Utiliser les curseurs <a href=\"/fr/docs/Web/API/IDBCursor\"><code>IDBCursor</code></a></li>\n  <li>Exemple de référence : <a href=\"https://github.com/mdn/to-do-notifications/tree/gh-pages\" class=\"external\" rel=\" noopener\">To-do Notifications</a> (<a href=\"https://mdn.github.io/to-do-notifications/\" class=\"external\" rel=\" noopener\">exemple <em>live</em></a>).</li>\n</ul>"}}],"toc":[{"text":"Syntaxe","id":"syntaxe"},{"text":"Exemples","id":"exemples"},{"text":"Spécifications","id":"spécifications"},{"text":"Compatibilité des navigateurs","id":"compatibilité_des_navigateurs"},{"text":"Voir aussi","id":"voir_aussi"}],"summary":"La méthode put(), rattachée à l'interface IDBObjectStore, renvoie un objet IDBRequest et, dans un autre thread, crée un clone structuré de la valeur puis enregistre ce clone dans le magasin d'objet. Cette méthode permet ainsi d'ajouter de nouveaux enregistrements ou de mettre à jour des enregistrements existants dans un magasin d'objet lorsque la transaction est en mode readwrite (lecture-écriture)","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"IDBObjectStore.put()","locale":"en-US","native":"English (US)"},{"title":"IDBObjectStore.put()","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"fr/web/api/idbobjectstore/put","github_url":"https://github.com/mdn/translated-content/blob/main/files/fr/web/api/idbobjectstore/put/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/fr/docs/Web","title":"Technologies web pour développeurs"},{"uri":"/fr/docs/Web/API","title":"Référence Web API"},{"uri":"/fr/docs/Web/API/IDBObjectStore","title":"IDBObjectStore"},{"uri":"/fr/docs/Web/API/IDBObjectStore/put","title":"IDBObjectStore.put()"}],"pageTitle":"IDBObjectStore.put() - Référence Web API | MDN","noIndexing":false}}