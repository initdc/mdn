{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"IDBObjectStore.createIndex()","mdn_url":"/fr/docs/Web/API/IDBObjectStore/createIndex","locale":"fr","native":"Français","sidebarHTML":"<ol><li><strong><a href=\"/fr/docs/Web/API/IndexedDB_API\">IndexedDB API</a></strong></li><li><strong><a href=\"/fr/docs/Web/API/IDBObjectStore\"><code>IDBObjectStore</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Propriétés</summary><ol><li><a href=\"/fr/docs/Web/API/IDBObjectStore/autoIncrement\"><code>autoIncrement</code></a></li><li><a href=\"/fr/docs/Web/API/IDBObjectStore/indexNames\"><code>indexNames</code></a></li><li><a href=\"/fr/docs/Web/API/IDBObjectStore/keyPath\"><code>keyPath</code></a></li><li><a href=\"/fr/docs/Web/API/IDBObjectStore/name\"><code>name</code></a></li><li><a href=\"/fr/docs/Web/API/IDBObjectStore/transaction\"><code>transaction</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Méthodes</summary><ol><li><a href=\"/fr/docs/Web/API/IDBObjectStore/add\"><code>add()</code></a></li><li><a href=\"/fr/docs/Web/API/IDBObjectStore/clear\"><code>clear()</code></a></li><li><a href=\"/fr/docs/Web/API/IDBObjectStore/count\"><code>count()</code></a></li><li><em><code>createIndex()</code></em></li><li><a href=\"/fr/docs/Web/API/IDBObjectStore/delete\"><code>delete()</code></a></li><li><a href=\"/fr/docs/Web/API/IDBObjectStore/deleteIndex\"><code>deleteIndex()</code></a></li><li><a href=\"/fr/docs/Web/API/IDBObjectStore/get\"><code>get()</code></a></li><li><a href=\"/fr/docs/Web/API/IDBObjectStore/getAll\"><code>getAll()</code></a></li><li><a href=\"/fr/docs/Web/API/IDBObjectStore/getAllKeys\"><code>getAllKeys()</code></a></li><li><a href=\"/fr/docs/Web/API/IDBObjectStore/getKey\"><code>getKey()</code></a></li><li><a href=\"/fr/docs/Web/API/IDBObjectStore/index\"><code>index()</code></a></li><li><a href=\"/fr/docs/Web/API/IDBObjectStore/openCursor\"><code>openCursor()</code></a></li><li><a href=\"/fr/docs/Web/API/IDBObjectStore/openKeyCursor\"><code>openKeyCursor()</code></a></li><li><a href=\"/fr/docs/Web/API/IDBObjectStore/put\"><code>put()</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Pages liées à IndexedDB</summary><ol><li><a href=\"/fr/docs/Web/API/IDBCursor\"><code>IDBCursor</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBCursorWithValue\"><code>IDBCursorWithValue</code> <small>(en-US)</small></a></li><li><a href=\"/fr/docs/Web/API/IDBDatabase\"><code>IDBDatabase</code></a></li><li><a href=\"/fr/docs/Web/API/IDBFactory\"><code>IDBFactory</code></a></li><li><a href=\"/fr/docs/Web/API/IDBIndex\"><code>IDBIndex</code></a></li><li><a href=\"/fr/docs/Web/API/IDBKeyRange\"><code>IDBKeyRange</code></a></li><li><a href=\"/fr/docs/Web/API/IDBOpenDBRequest\"><code>IDBOpenDBRequest</code></a></li><li><a href=\"/fr/docs/Web/API/IDBRequest\"><code>IDBRequest</code></a></li><li><a href=\"/fr/docs/Web/API/IDBTransaction\"><code>IDBTransaction</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBVersionChangeEvent\"><code>IDBVersionChangeEvent</code> <small>(en-US)</small></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>La méthode <strong><code>createIndex()</code></strong> de l'interface <a href=\"/fr/docs/Web/API/IDBObjectStore\"><code>IDBObjectStore</code></a> met en place sur le magasin d'objet <a href=\"/fr/docs/Web/API/IDBObjectStore\" title=\"relié\"><code>relié</code></a> un nouvel index et en renvoie l'<a href=\"/fr/docs/Web/API/IDBIndex\" title=\"accès\"><code>accès</code></a>.</p>\n<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>Note :</strong> Cette méthode ne peut être appelé que si la transaction de l'accès au magasin d'objet est en mode VersionChange.</p>\n</div><div class=\"notecard note\" id=\"sect2\">\n  <p><strong>Note:</strong> Cette fonctionnalité est disponible via les <a href=\"/fr/docs/Web/API/Web_Workers_API\">Web Workers</a></p>\n</div>"}},{"type":"prose","value":{"id":"syntaxe","title":"Syntaxe","isH3":false,"content":"<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>objectStore<span class=\"token punctuation\">.</span><span class=\"token function\">createIndex</span><span class=\"token punctuation\">(</span>nomIndex<span class=\"token punctuation\">,</span> nomCle<span class=\"token punctuation\">,</span> parametresIndexOptionnel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"paramètres","title":"Paramètres","isH3":false,"content":"<dl>\n  <dt id=\"nomindex\">nomIndex</dt>\n  <dd>\n    <p>Le nom de l'index que l'on veut ajouter. Il est possible d'ajouter un index avec un nom vide.</p>\n  </dd>\n  <dt id=\"nomcle\">nomCle</dt>\n  <dd>\n    <p>Le nom de clé qu'utilise l'index. Il est possible d'ajouter un index sans nom de clé.</p>\n  </dd>\n  <dt id=\"parametresindexoptionnel\">parametresIndexOptionnel <span class=\"badge inline optional\">Facultatif</span></dt>\n  <dd>\n    <p>Un objet optionnel pouvant inclure une ou plusieurs des propriétés suivantes:</p>\n    <table class=\"standard-table\">\n      <thead>\n        <tr>\n          <th scope=\"col\">Propriété</th>\n          <th scope=\"col\">Description</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td><code>unique</code></td>\n          <td>Si true, l'index empêcheras la duplication d'une clé.</td>\n        </tr>\n        <tr>\n          <td><code>multiEntry</code></td>\n          <td>\n            Si true, l'index ajoutera une entrée pour chaque élément de tableau\n            quand le nom de clé de clé est résolue. Si false, il ajoutera un seule\n            entrée contenant le tableau.\n          </td>\n        </tr>\n        <tr>\n          <td><code>locale</code></td>\n          <td>\n            <p>\n              Actuellement uniquement dans Firefox 43+ , cela vous permet de\n              spécifier des paramètres de localisation pour l'index. Toutes les\n              opérations de tri effectuées sur les données via des intervalle de clé\n              obéirons aux règles locales de tri (voir\n              <a href=\"/en-US/docs/Web/API/IndexedDB_API/Using_IndexedDB#locale-aware_sorting\">trie dans localisation courante</a>, en). Vous pouvez spécifier sa valeur de trois façons différentes:\n            </p>\n            <ul>\n              <li>\n                <code>string</code>: une chaîne de caractère contenant le code de la\n                localisation , par exemple 'fr' ou <code>'en-US'</code>.\n              </li>\n              <li>\n                <code>auto</code>: La localisation par défaut est utilisé (peut être\n                régler par l'utilisateur).\n              </li>\n              <li>\n                <code>null or undefined</code>: Les règles de tri par défaut de\n                javaScript seront utilisées.\n              </li>\n            </ul>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"renvoie","title":"Renvoie","isH3":false,"content":"<p>L'<a href=\"/fr/docs/Web/API/IDBIndex\" title=\"accès\"><code>accès</code></a> au nouvel index.</p>"}},{"type":"prose","value":{"id":"exceptions","title":"Exceptions","isH3":false,"content":"<dl>\n  <dt id=\"invalidstateerror\"><code>InvalidStateError</code></dt>\n  <dd>\n    <p>Cette <a href=\"/fr/docs/Web/API/DOMException\" title=\"exeption\"><code>exeption</code></a> si la <a href=\"/fr/docs/Web/API/IDBTransaction\" title=\"transaction\"><code>transaction</code></a> dont dépend cet <a href=\"/fr/docs/Web/API/IDBObjectStore\" title=\"accès\"><code>accès</code></a> au magasin d'objet n'est pas en <a href=\"/fr/docs/Web/API/IDBTransaction/mode\" title=\"mode\"><code>mode</code></a> <code>versionchange</code>.</p>\n  </dd>\n  <dt id=\"transactioninactiveerror\"><code>TransactionInactiveError</code></dt>\n  <dd>\n    <p>\n      Cette <a href=\"/fr/docs/Web/API/DOMException\" title=\"exeption\"><code>exeption</code></a> si la <a href=\"/fr/docs/Web/API/IDBTransaction\" title=\"transaction\"><code>transaction</code></a> de l'<a href=\"/fr/docs/Web/API/IDBObjectStore\" title=\"accès\"><code>accès</code></a> au magasin d’objet est inactive.\n      <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=1176165\" class=\"external\" rel=\" noopener\">bug 1176165</a> ).\n    </p>\n  </dd>\n  <dt id=\"constrainterror\"><code>ConstraintError</code></dt>\n  <dd>\n    <p>Cette <a href=\"/fr/docs/Web/API/DOMException\" title=\"exeption\"><code>exeption</code></a> si un index avec le même nom (case sensible) existe déjà sur le magasin d'objet.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"exemple","title":"Exemple","isH3":false,"content":"<p>Dans l'exemple suivant on peut voir le gestionnaire d'événement <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBOpenDBRequest/upgradeneeded_event\"><code><code>onupgradeneeded</code></code> <small>(en-US)</small></a> être utilisé pour mètre à jour la structure de la base de donnée quand un numéro de version supérieur est chargé.</p>\n<p>Des méthode <strong><code>createIndex()</code></strong> sont utilisées pour mètre en place différents index sur le magasin d'objet <code>toDoList</code>.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> db<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Requête d'ouverture de la base de données \"toDoList\"</span>\n<span class=\"token keyword\">var</span> DBOpenRequest <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>indexedDB<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"toDoList\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Gère l'échec de l'ouverture de la base</span>\nDBOpenRequest<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onerror</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  note<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">+=</span> <span class=\"token string\">'&lt;li&gt;La base de donnée n\\'as pas peut être ouverte.&lt;/li&gt;'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Gère le succès de l'ouverture de la base</span>\nDBOpenRequest<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onsuccess</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  note<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">+=</span> <span class=\"token string\">'&lt;li&gt;La base de données est ouverte.&lt;/li&gt;'</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">//La connexion est affcté à la variable db.</span>\n  db <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>result<span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Exécute une fonction d'affichage displayData()</span>\n  <span class=\"token function\">displayData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Ce gestionnaire d'événement nécessite un nouveau numéro de version de la basse de données.</span>\n<span class=\"token comment\">// Si la base n'existe pas un nouveau numéro de version est généré par la méthode d'ouverture de connexion window.indexDB.open .</span>\n\nDBOpenRequest<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onupgradeneeded</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> db <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>result<span class=\"token punctuation\">;</span>\n\n  db<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onerror</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    note<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">+=</span> <span class=\"token string\">'&lt;li&gt;Erreur de chargement de la base de données.&lt;/li&gt;'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// L'Accès au magasin d'objet \"toDoList\" de la base de donnée</span>\n  <span class=\"token keyword\">var</span> objectStore <span class=\"token operator\">=</span> db<span class=\"token punctuation\">.</span><span class=\"token function\">createObjectStore</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"toDoList\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">keyPath</span><span class=\"token operator\">:</span> <span class=\"token string\">\"taskTitle\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Met en place les index du magasin d'objet</span>\n  objectStore<span class=\"token punctuation\">.</span><span class=\"token function\">createIndex</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"heures\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"hours\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">unique</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  objectStore<span class=\"token punctuation\">.</span><span class=\"token function\">createIndex</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"minutes\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"minutes\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">unique</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  objectStore<span class=\"token punctuation\">.</span><span class=\"token function\">createIndex</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"jour\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"day\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">unique</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  objectStore<span class=\"token punctuation\">.</span><span class=\"token function\">createIndex</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"mois\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"month\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">unique</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  objectStore<span class=\"token punctuation\">.</span><span class=\"token function\">createIndex</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"annee\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"year\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">unique</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  objectStore<span class=\"token punctuation\">.</span><span class=\"token function\">createIndex</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"notifiee\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"notified\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">unique</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<div class=\"notecard note\" id=\"sect3\">\n  <p><strong>Note :</strong> Pour un exemple de travail complet, voir notre <a href=\"https://github.com/mdn/to-do-notifications/\" class=\"external\" rel=\" noopener\">To-do Notifications</a> app (<a href=\"https://mdn.github.io/to-do-notifications/\" class=\"external\" rel=\" noopener\">view example live</a>).</p>\n</div>"}},{"type":"specifications","value":{"title":"Spécifications","id":"spécifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://w3c.github.io/IndexedDB/#ref-for-dom-idbobjectstore-createindex①","title":"Indexed Database API 3.0"}],"query":"api.IDBObjectStore.createIndex"}},{"type":"browser_compatibility","value":{"title":"Compatibilité des navigateurs","id":"compatibilité_des_navigateurs","isH3":false,"query":"api.IDBObjectStore.createIndex","dataURL":"/fr/docs/Web/API/IDBObjectStore/createIndex/bcd.json"}},{"type":"prose","value":{"id":"voir_aussi","title":"Voir aussi","isH3":false,"content":"<ul>\n  <li><a href=\"/fr/docs/Web/API/IndexedDB_API/Using_IndexedDB\" title=\"Utiliser IndexedDB\"><code>Utiliser IndexedDB</code></a></li>\n  <li><a href=\"/fr/docs/Web/API/IDBDatabase\" title=\"Débuter une connexion\"><code>Débuter une connexion</code></a></li>\n  <li><a href=\"/fr/docs/Web/API/IDBTransaction\" title=\"Utilisé les transactions\"><code>Utilisé les transactions</code></a></li>\n  <li><a href=\"/fr/docs/Web/API/IDBKeyRange\" title=\"Définir l'intervalle des clés\"><code>Définir l'intervalle des clés</code></a></li>\n  <li><a href=\"/fr/docs/Web/API/IDBObjectStore\" title=\"Accès aux magasins d'objets\"><code>Accès aux magasins d'objets</code></a></li>\n  <li><a href=\"/fr/docs/Web/API/IDBCursor\" title=\"Utiliser les curseur\"><code>Utiliser les curseur</code></a></li>\n  <li>Exemple de référence: <a href=\"https://github.com/mdn/to-do-notifications/tree/gh-pages\" class=\"external\" rel=\" noopener\">To-do Notifications</a> (<a href=\"https://mdn.github.io/to-do-notifications/\" class=\"external\" rel=\" noopener\">view example live</a>.)</li>\n</ul>"}}],"toc":[{"text":"Syntaxe","id":"syntaxe"},{"text":"Paramètres","id":"paramètres"},{"text":"Renvoie","id":"renvoie"},{"text":"Exceptions","id":"exceptions"},{"text":"Exemple","id":"exemple"},{"text":"Spécifications","id":"spécifications"},{"text":"Compatibilité des navigateurs","id":"compatibilité_des_navigateurs"},{"text":"Voir aussi","id":"voir_aussi"}],"summary":"La méthode createIndex() de l'interface IDBObjectStore met en place sur le magasin d'objet relié un nouvel index et en renvoie l'accès.","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"IDBObjectStore.createIndex()","locale":"en-US","native":"English (US)"}],"source":{"folder":"fr/web/api/idbobjectstore/createindex","github_url":"https://github.com/mdn/translated-content/blob/main/files/fr/web/api/idbobjectstore/createindex/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/fr/docs/Web","title":"Technologies web pour développeurs"},{"uri":"/fr/docs/Web/API","title":"Référence Web API"},{"uri":"/fr/docs/Web/API/IDBObjectStore","title":"IDBObjectStore"},{"uri":"/fr/docs/Web/API/IDBObjectStore/createIndex","title":"IDBObjectStore.createIndex()"}],"pageTitle":"IDBObjectStore.createIndex() - Référence Web API | MDN","noIndexing":false}}