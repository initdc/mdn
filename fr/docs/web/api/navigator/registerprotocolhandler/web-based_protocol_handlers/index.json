{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"Gestionnaires de protocoles web","mdn_url":"/fr/docs/Web/API/Navigator/registerProtocolHandler/Web-based_protocol_handlers","locale":"fr","native":"Français","sidebarHTML":"","body":[{"type":"prose","value":{"id":"contexte","title":"Contexte","isH3":true,"content":"<p>Il est relativement courant de voir des pages web lier des ressources utilisant des protocoles qui ne sont pas HTTP. Prenons par exemple le protocole <code>mailto:</code>&nbsp;:</p>\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>mailto:webmaster@example.com<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Webmestre<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<p>Les autrices et auteurs web peuvent utiliser un lien <code>mailto:</code> pour fournir aux utilisateurs une manière pratique d'envoyer un courrier électronique, directement depuis la page web. Lorsque le lien est activé, le navigateur est supposé lancer l'application par défaut du bureau pour le courrier électronique. On pourrait appeler cela un gestionnaire de protocole <em>du bureau</em>.</p>\n<p>Les gestionnaires de protocoles web permettent à des applications web de participer également à ce processus. Leur importance va grandissant au fur et à mesure que différents types d'applications migrent vers le web. De fait, un grand nombre d'applications de courrier déjà basées sur le Web pourraient traiter un lien <code>mailto</code>.</p>"}},{"type":"prose","value":{"id":"enregistrement","title":"Enregistrement","isH3":true,"content":"<p>La définition d'une application web comme gestionnaire de protocole n'est pas un processus difficile. Dans les grandes lignes, l'application web utilise <a href=\"/fr/docs/Web/API/Navigator/registerProtocolHandler\"><code>registerProtocolHandler()</code></a> pour s'enregistrer auprès du navigateur comme gestionnaire potentiel pour un protocole donné. Par exemple&nbsp;:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>navigator<span class=\"token punctuation\">.</span><span class=\"token function\">registerProtocolHandler</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"web+burger\"</span><span class=\"token punctuation\">,</span>\n                                  <span class=\"token string\">\"https://www.google.com/?uri=%s\"</span><span class=\"token punctuation\">,</span>\n                                  <span class=\"token string\">\"Gestionnaire de burger\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Où les paramètres sont&nbsp;:</p>\n<ul>\n  <li>Le protocole.</li>\n  <li>Le modèle d'URL, utilisé comme gestionnaire. Le «&nbsp;%s&nbsp;» sera remplacé par le <code>href</code> du lien et une requête GET sera exécutée sur l'URL résultante.</li>\n  <li>Le nom du gestionnaire de protocole tel que présenté à l'utilisateur.</li>\n</ul>\n<p>Lorsqu'un navigateur exécutera ce code, il devra demander la permission d'autoriser l'application web à s'enregistrer comme gestionnaire du protocole. Firefox affichera une question dans une barre de notification&nbsp;:</p>\n<p>\n  <img src=\"/en-US/docs/Web/API/Navigator/registerProtocolHandler/Web-based_protocol_handlers/protocolregister.png\" alt=\"\" width=\"700\" height=\"401\" loading=\"lazy\">\n</p>\n<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>Note :</strong> Le modèle d'URL fourni lors de l'enregistrement <strong>doit</strong> provenir de la même origine que la page web qui demande l'enregistrement, sinon celle-ci échouera. Ainsi, <code>http://example.com/homepage.html</code> pourra enregistrer un gestionnaire de protocole pour <code>http://example.com/handle_mailto/%s</code>, mais pas pour <code>http://example.org/handle_mailto/%s</code>.</p>\n</div>\n<p>Enregistrer plus d'une fois le même gestionnaire de protocole déclenchera l'apparition d'une notification différente, indiquant que le gestionnaire de protocole est déjà enregistré. Aussi, mieux vaut effectuer une vérification préalable dans le code pour voir si le gestionnaire n'est pas déjà enregistré, comme illustré dans l'exemple qui suit.</p>\n<h4 id=\"exemple\">Exemple</h4>\n<h5 id=\"javascript\">JavaScript</h5>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>navigator<span class=\"token punctuation\">.</span><span class=\"token function\">registerProtocolHandler</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"web+burger\"</span><span class=\"token punctuation\">,</span>\n                                  <span class=\"token string\">\"https://www.google.com/?uri=%s\"</span><span class=\"token punctuation\">,</span>\n                                  <span class=\"token string\">\"Gestionnaire de burger\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<h5 id=\"html\">HTML</h5>\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span>Cette page web installera un gestionnaire de protocole pour le protocole <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>code</span><span class=\"token punctuation\">&gt;</span></span>web+burger:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>code</span><span class=\"token punctuation\">&gt;</span></span>.<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"activation","title":"Activation","isH3":true,"content":"<p>À présent, chaque fois qu'on activera un lien utilisant le protocole enregistré, le navigateur dirigera l'action vers l'URL spécifiée lors de l'enregistrement de l'application web. Firefox, par défaut, demandera à la personne avant d'effectuer cette action.</p>\n<h4 id=\"exemple_2\">Exemple</h4>\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span>Avez-vous déjà vu <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>web+burger:cheeseburger<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>ceci<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">&gt;</span></span> auparavant ?<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"traitement","title":"Traitement","isH3":true,"content":"<p>La phase suivante est le traitement de l'action. Le navigateur extrait le <code>href</code> du lien activé, le combine avec le modèle d'URL fourni lors de l'enregistrement et effectue une requête HTTP GET sur l'URL. Ainsi, avec les exemples précédents, le navigateur effectuerait une requête GET sur cette URL&nbsp;:</p>\n<pre class=\"notranslate\">http://www.google.com/?uri=web+burger:cheeseburger\n</pre>\n<p>Un code côté serveur peut extraire les paramètres de la chaîne de requête et effectuer l'action désirée.</p>\n<div class=\"notecard note\" id=\"sect2\">\n  <p><strong>Note :</strong> Le code côté serveur reçoit le contenu <strong>entier</strong> de l'attribut <code>href</code>. Cela signifie que le serveur doit traiter la chaîne pour retirer le protocole des données.</p>\n</div>\n<h4 id=\"exemple_3\">Exemple</h4>\n<div class=\"code-example\"><pre class=\"brush: php notranslate\"><code><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span>\n<span class=\"token variable\">$value</span> <span class=\"token operator\">=</span> <span class=\"token string double-quoted-string\">\"\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> <span class=\"token keyword\">isset</span> <span class=\"token punctuation\">(</span> <span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"value\"</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token variable\">$value</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$_GET</span><span class=\"token punctuation\">[</span><span class=\"token string double-quoted-string\">\"value\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token delimiter important\">?&gt;</span></span>\n\n<span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>fr<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">&gt;</span></span>Exemple de gestionnaire de protocole web<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">&gt;</span></span>Exemple de gestionnaire de protocole web - Gestionnaire<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span>Cette page est appelée lors de la gestion du protocole <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>code</span><span class=\"token punctuation\">&gt;</span></span>web+burger:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>code</span><span class=\"token punctuation\">&gt;</span></span>. Les données envoyées sont :<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>textarea</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span><span class=\"token punctuation\">(</span><span class=\"token function\">htmlspecialchars</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$value</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">ENT_QUOTES</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'UTF-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>textarea</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"spécifications","title":"Spécifications","isH3":false,"content":"<ul>\n  <li><a href=\"https://www.w3.org/TR/2011/WD-html5-20110525/timers.html#custom-handlers\" class=\"external\" rel=\" noopener\">La spécification HTML5 sur les gestionnaires de protocole tiers</a></li>\n</ul>"}},{"type":"prose","value":{"id":"voir_aussi","title":"Voir aussi","isH3":false,"content":"<ul>\n  <li><a href=\"https://web.dev/registering-a-custom-protocol-handler/\" class=\"external\" rel=\" noopener\">Enregistrer un gestionnaire de protocole spécifique (en anglais)</a> sur le blog Google web.dev</li>\n</ul>"}}],"toc":[{"text":"Spécifications","id":"spécifications"},{"text":"Voir aussi","id":"voir_aussi"}],"summary":"Il est relativement courant de voir des pages web lier des ressources utilisant des protocoles qui ne sont pas HTTP. Prenons par exemple le protocole mailto: :","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Web-based protocol handlers","locale":"en-US","native":"English (US)"},{"title":"Controladores de protocolos basados en web","locale":"es","native":"Español"},{"title":"ウェブベースのプロトコルハンドラー","locale":"ja","native":"日本語"},{"title":"Web-based protocol handlers","locale":"zh-CN","native":"中文 (简体)"},{"title":"Firefox 3 Web-based protocol handler","locale":"zh-TW","native":"正體中文 (繁體)"}],"source":{"folder":"fr/web/api/navigator/registerprotocolhandler/web-based_protocol_handlers","github_url":"https://github.com/mdn/translated-content/blob/main/files/fr/web/api/navigator/registerprotocolhandler/web-based_protocol_handlers/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/fr/docs/Web","title":"Technologies web pour développeurs"},{"uri":"/fr/docs/Web/API","title":"Référence Web API"},{"uri":"/fr/docs/Web/API/Navigator","title":"Navigator"},{"uri":"/fr/docs/Web/API/Navigator/registerProtocolHandler","title":"Navigator.registerProtocolHandler()"},{"uri":"/fr/docs/Web/API/Navigator/registerProtocolHandler/Web-based_protocol_handlers","title":"Gestionnaires de protocoles web"}],"pageTitle":"Gestionnaires de protocoles web - Référence Web API | MDN","noIndexing":false}}