{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"Gestes pincer et zoomer","mdn_url":"/fr/docs/Web/API/Pointer_events/Pinch_zoom_gestures","locale":"fr","native":"Français","sidebarHTML":"<ol><li><strong><a href=\"/fr/docs/Web/API/Pointer_events\">Pointer events</a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Guides</summary><ol><li><a href=\"/fr/docs/Web/API/Pointer_events/Using_Pointer_Events\">Using Pointer Events</a></li><li><a href=\"/fr/docs/Web/API/Pointer_events/Multi-touch_interaction\">Multi-touch interaction</a></li><li><a href=\"/fr/docs/Web/API/Pointer_events/Pinch_zoom_gestures\">Pinch zoom gestures</a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Interfaces</summary><ol><li><a href=\"/fr/docs/Web/API/PointerEvent\"><code>PointerEvent</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Propriétés</summary><ol><li><a href=\"/fr/docs/Web/API/Navigator/maxTouchPoints\"><code>Navigator.maxTouchPoints</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Méthodes</summary><ol><li><a href=\"/fr/docs/Web/API/Element/setPointerCapture\"><code>Element.setPointerCapture()</code></a></li><li><a href=\"/fr/docs/Web/API/Element/releasePointerCapture\"><code>Element.releasePointerCapture()</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Événements</summary><ol><li><a href=\"/fr/docs/Web/API/HTMLElement/gotpointercapture_event\"><code>HTMLElement</code>: <code>gotpointercapture</code></a></li><li><a href=\"/fr/docs/Web/API/HTMLElement/lostpointercapture_event\"><code>HTMLElement</code>: <code>lostpointercapture</code></a></li><li><a href=\"/fr/docs/Web/API/HTMLElement/pointercancel_event\"><code>HTMLElement</code>: <code>pointercancel</code></a></li><li><a href=\"/fr/docs/Web/API/HTMLElement/pointerdown_event\"><code>HTMLElement</code>: <code>pointerdown</code></a></li><li><a href=\"/fr/docs/Web/API/HTMLElement/pointerenter_event\"><code>HTMLElement</code>: <code>pointerenter</code></a></li><li><a href=\"/fr/docs/Web/API/HTMLElement/pointerleave_event\"><code>HTMLElement</code>: <code>pointerleave</code></a></li><li><a href=\"/fr/docs/Web/API/HTMLElement/pointermove_event\"><code>HTMLElement</code>: <code>pointermove</code></a></li><li><a href=\"/fr/docs/Web/API/HTMLElement/pointerout_event\"><code>HTMLElement</code>: <code>pointerout</code></a></li><li><a href=\"/fr/docs/Web/API/HTMLElement/pointerover_event\"><code>HTMLElement</code>: <code>pointerover</code></a></li><li><a href=\"/fr/docs/Web/API/HTMLElement/pointerup_event\"><code>HTMLElement</code>: <code>pointerup</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>Ajouter la gestion des <em>gestes</em> à une application peut améliorer de manière significative l'expérience utilisateur. Il existe de nombreux types de gestes, du simple geste <em>swipe</em> (balayage de l'écran) aux gestes plus complexes avec plusieurs doigts comme le <em>twist</em> (rotation), où les points de contact (dits <em>pointeurs</em>) bougent dans des directions différentes.</p>\n<p>Cet exemple montre comment détecter les gestes de <em>pinch/zoom</em> (pincer/zoomer), en utilisant les <a href=\"/fr/docs/Web/API/Pointer_events\" title=\"événements de pointeur\"><code>événements de pointeur</code></a> pour détecter si l'utilisateur bouge deux pointeurs plus proches ou plus loin l'un de l'autre.</p>\n<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>Note :</strong> Une version <em>en direct</em> de cette application est disponible sur <a href=\"https://mdn.github.io/dom-examples/pointerevents/Pinch_zoom_gestures.html\" class=\"external\" rel=\" noopener\">Github</a>. Le <a href=\"https://github.com/mdn/dom-examples/blob/master/pointerevents/Pinch_zoom_gestures.html\" class=\"external\" rel=\" noopener\">code source est également disponible sur Github</a>; les pull requests et <a href=\"https://github.com/mdn/dom-examples/issues\" class=\"external\" rel=\" noopener\">bug reports</a> sont les bienvenus.</p>\n</div>"}},{"type":"prose","value":{"id":"exemple","title":"Exemple","isH3":false,"content":"<p>Dans cet exemple, on utilise les <a href=\"/fr/docs/Web/API/Pointer_events\" title=\"événement de pointeur\"><code>événement de pointeur</code></a> pour détecter simultanément plusieurs appareils de pointage quel qu'en soit le type, comme les doigts, la souris, et le stylet. Le geste de pincer (zoomer), qui consiste à déplacer deux pointeurs plus près l'un vers l'autre, change la couleur d'arrière-plan de l'élément cible en <code>lightblue</code>. Le geste d'étirer (dézoomer), qui consiste à déplacer deux pointeur plus loin l'un de l'autre, change la couleur d'arrière-plan de l'élément cible en <code>pink</code>.</p>"}},{"type":"prose","value":{"id":"définir_la_cible_du_toucher","title":"Définir la cible du toucher","isH3":true,"content":"<p>L'application utilise un <a href=\"/fr/docs/Web/HTML/Element/div\"><code>&lt;div&gt;</code></a> pour définir la zone cible du pointeur.</p>\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token style\"><span class=\"token language-css\">\n  <span class=\"token selector\">div</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> 0em<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 2em<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token selector\">#target</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> white<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 1px solid black<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"état_global","title":"État global","isH3":true,"content":"<p>Prendre en charge un mouvement à deux pointeurs nécessite de conserver un état des événements du pointeur durant les différentes phases de l'événement. Cette application utilise deux variables globales pour mettre en cache l'état de l'événement.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// Variables globales pour mettre en cache l'état de l'événement</span>\n<span class=\"token keyword\">var</span> evCache <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> prevDiff <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"enregistrer_les_gestionnaires_dévénement","title":"Enregistrer les gestionnaires d'événement","isH3":true,"content":"<p>Les gestionnaires d'événement sont enregistrés pour les événements de pointeur suivants: <code><a href=\"/fr/docs/Web/Reference/Events/pointerdown\" title=\"This is a link to an unwritten page\" class=\"page-not-created\">pointerdown</a></code>, <code><a href=\"/fr/docs/Web/Reference/Events/pointermove\" title=\"This is a link to an unwritten page\" class=\"page-not-created\">pointermove</a></code> et <code><a href=\"/fr/docs/Web/Reference/Events/pointerup\" title=\"This is a link to an unwritten page\" class=\"page-not-created\">pointerup</a></code>. Le gestionnaire pour <code><a href=\"/fr/docs/Web/Reference/Events/pointerup\" title=\"This is a link to an unwritten page\" class=\"page-not-created\">pointerup</a></code> est utilisé pour les événements <code><a href=\"/fr/docs/Web/Reference/Events/pointercancel\" title=\"This is a link to an unwritten page\" class=\"page-not-created\">pointercancel</a></code>, <code><a href=\"/fr/docs/Web/Reference/Events/pointerout\" title=\"This is a link to an unwritten page\" class=\"page-not-created\">pointerout</a></code> et <code><a href=\"/fr/docs/Web/Reference/Events/pointerleave\" title=\"This is a link to an unwritten page\" class=\"page-not-created\">pointerleave</a></code> puisque ces quatre événements ont la même sémantique dans cette application.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n <span class=\"token comment\">// Ajoute les gestionnaires d'événements pour la cible du pointeur</span>\n <span class=\"token keyword\">var</span> el<span class=\"token operator\">=</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"target\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n el<span class=\"token punctuation\">.</span>onpointerdown <span class=\"token operator\">=</span> pointerdown_handler<span class=\"token punctuation\">;</span>\n el<span class=\"token punctuation\">.</span>onpointermove <span class=\"token operator\">=</span> pointermove_handler<span class=\"token punctuation\">;</span>\n\n <span class=\"token comment\">// Même chose pour les événements pointer{up,cancel,out,leave} puisque</span>\n <span class=\"token comment\">// la sémantique pour ces événements - dans cette appli - est identique.</span>\n el<span class=\"token punctuation\">.</span>onpointerup <span class=\"token operator\">=</span> pointerup_handler<span class=\"token punctuation\">;</span>\n el<span class=\"token punctuation\">.</span>onpointercancel <span class=\"token operator\">=</span> pointerup_handler<span class=\"token punctuation\">;</span>\n el<span class=\"token punctuation\">.</span>onpointerout <span class=\"token operator\">=</span> pointerup_handler<span class=\"token punctuation\">;</span>\n el<span class=\"token punctuation\">.</span>onpointerleave <span class=\"token operator\">=</span> pointerup_handler<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"pointer_down","title":"Pointer down","isH3":true,"content":"<p>L'événement <code><a href=\"/fr/docs/Web/Reference/Events/pointerdown\" title=\"This is a link to an unwritten page\" class=\"page-not-created\">pointerdown</a></code> est déclenché quand un pointeur (souris, stylo/stylet ou point de contact sur un écran tactile) entre en contact avec la <em>surface de contact</em>. Dans cette application, l'état de l'événement doit être mis en cache dans le cas où il fait partie d'un geste à deux pointeurs pour pincer/zoomer.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">pointerdown_handler</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ev</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n <span class=\"token comment\">// L'événement pointerdown signale le début d'une interraction de toucher.</span>\n <span class=\"token comment\">// L'événement est mis en cache pour prendre en charge les gestes à 2 doigts</span>\n evCache<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>ev<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"pointerDown\"</span><span class=\"token punctuation\">,</span> ev<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"pointer_move","title":"Pointer move","isH3":true,"content":"<p>Le gestionnaire d'événement <code><a href=\"/fr/docs/Web/Reference/Events/pointermove\" title=\"This is a link to an unwritten page\" class=\"page-not-created\">pointermove</a></code> détecte si un utilisateur est en train d'effectuer le geste de pincer/zoomer. Si deux pointeurs sont utilisés, et que la distance entre les pointeurs augmente (ce qui signifie qu'on étire ou dézoome), la couleur d'arrière-plan est changée en <code>pink</code>, et si la distance entre les pointeurs diminue (ce qui signifie qu'on pince ou dézoome), la couleur d'arrière-plan est changée en <code>lightblue</code>. Dans une application plus sophistiquée, le pincement ou l'étirement pourrait être utilisé pour appliquer une sémantique spécifique à l'application.</p>\n<p>Quand cet événement est traité, la bordure de la cible est définie à <code>dashed</code> pour fournir une indication visuelle claire que l'élément a reçu un événement de déplacement.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">pointermove_handler</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ev</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n <span class=\"token comment\">// Cette fonction implémente la détection du mouvement horizontal pincer/zoomer.</span>\n <span class=\"token comment\">//</span>\n <span class=\"token comment\">// Si la distance entre les deux pointeurs augmente (zoomer),</span>\n <span class=\"token comment\">// l'arrière-plan de l'élément cible est changé en \"pink\" et si la</span>\n <span class=\"token comment\">// distance diminue (dezoomer), la couleur est changée en \"lightblue\".</span>\n <span class=\"token comment\">//</span>\n <span class=\"token comment\">// Cette fonctionne définie la bordure de l'élément cible à \"dashed\" pour indiquer</span>\n <span class=\"token comment\">// visuellement que la cible du pointeur a reçu un événement de déplacement.</span>\n <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"pointerMove\"</span><span class=\"token punctuation\">,</span> ev<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n ev<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>border <span class=\"token operator\">=</span> <span class=\"token string\">\"dashed\"</span><span class=\"token punctuation\">;</span>\n\n <span class=\"token comment\">// Trouve le pointeur en cours dans le cache et le met à jour avec cet événement</span>\n <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> evCache<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>ev<span class=\"token punctuation\">.</span>pointerId <span class=\"token operator\">==</span> evCache<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>pointerId<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      evCache<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> ev<span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n <span class=\"token punctuation\">}</span>\n\n <span class=\"token comment\">// Si deux pointeurs sont utilisés, vérifie le geste de pincement</span>\n <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>evCache<span class=\"token punctuation\">.</span>length <span class=\"token operator\">==</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token comment\">// Calcule la distance entre les deux pointeurs</span>\n   <span class=\"token keyword\">var</span> curDiff <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">abs</span><span class=\"token punctuation\">(</span>evCache<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>clientX <span class=\"token operator\">-</span> evCache<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>clientX<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n   <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>prevDiff <span class=\"token operator\">&gt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>curDiff <span class=\"token operator\">&gt;</span> prevDiff<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token comment\">// La distance entre les deux pointeurs a augmenté</span>\n       <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Pinch moving OUT -&gt; Zoom in\"</span><span class=\"token punctuation\">,</span> ev<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       ev<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>background <span class=\"token operator\">=</span> <span class=\"token string\">\"pink\"</span><span class=\"token punctuation\">;</span>\n     <span class=\"token punctuation\">}</span>\n     <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>curDiff <span class=\"token operator\">&lt;</span> prevDiff<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token comment\">// La distance entre les deux pointeurs a diminué</span>\n       <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Pinch moving IN -&gt; Zoom out\"</span><span class=\"token punctuation\">,</span>ev<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       ev<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>background <span class=\"token operator\">=</span> <span class=\"token string\">\"lightblue\"</span><span class=\"token punctuation\">;</span>\n     <span class=\"token punctuation\">}</span>\n   <span class=\"token punctuation\">}</span>\n\n   <span class=\"token comment\">// Met en cache la distance pour les événements suivants</span>\n   prevDiff <span class=\"token operator\">=</span> curDiff<span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"pointer_up","title":"Pointer up","isH3":true,"content":"<p>L'événement <code><a href=\"/fr/docs/Web/Reference/Events/pointerup\" title=\"This is a link to an unwritten page\" class=\"page-not-created\">pointerup</a></code> est déclenché quand le pointeur est levé de la <em>surface de contact</em>. Quand cela arrive, l'événement est retiré du cache et la couleur d'arrière-plan et bordure de la cible sont rétablies à leur valeur d'origine.</p>\n<p>Dans cette application, ce gestionnaire est également utilisé pour les événements <code><a href=\"/fr/docs/Web/Reference/Events/pointercancel\" title=\"This is a link to an unwritten page\" class=\"page-not-created\">pointercancel</a></code>, <code><a href=\"/fr/docs/Web/Reference/Events/pointerleave\" title=\"This is a link to an unwritten page\" class=\"page-not-created\">pointerleave</a></code> et <code><a href=\"/fr/docs/Web/Reference/Events/pointerout\" title=\"This is a link to an unwritten page\" class=\"page-not-created\">pointerout</a></code>.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">pointerup_handler</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ev</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">log</span><span class=\"token punctuation\">(</span>ev<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">,</span> ev<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// Retire ce pointeur du cache et rétablit l'arrière-plan et</span>\n  <span class=\"token comment\">// et bordure de la cible</span>\n  <span class=\"token function\">remove_event</span><span class=\"token punctuation\">(</span>ev<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  ev<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>background <span class=\"token operator\">=</span> <span class=\"token string\">\"white\"</span><span class=\"token punctuation\">;</span>\n  ev<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>border <span class=\"token operator\">=</span> <span class=\"token string\">\"1px solid black\"</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Si le nombre de pointeurs restant est inférieur à deux, remet à zéro la différence</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>evCache<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&lt;</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> prevDiff <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"application_ui","title":"Application UI","isH3":true,"content":"<p>Cette application utilise un élément <a href=\"/fr/docs/Web/HTML/Element/div\"><code>&lt;div&gt;</code></a> comme zone de toucher et fournit des boutons pour activer et nettoyer les logs.</p>\n<div class=\"notecard note\" id=\"sect2\">\n  <p><strong>Note :</strong> Pour empêcher que le comportement par défaut du navigateur au toucher surcharge le gestionnaire de l'application, la propriété <a href=\"/fr/docs/Web/CSS/touch-action\"><code>touch-action</code></a> est appliquée à l'élément <a href=\"/fr/docs/Web/HTML/Element/body\"><code>&lt;body&gt;</code></a>.</p>\n</div>\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span> <span class=\"token special-attr\"><span class=\"token attr-name\">onload</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value javascript language-javascript\"><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span> <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value css language-css\"><span class=\"token property\">touch-action</span><span class=\"token punctuation\">:</span>none</span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">&gt;</span></span>\n <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>target<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Touchez l'écran avec deux pointeurs, puis pincez ou étirez.<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">/&gt;</span></span>\n    La couleur d'arrière-plan changera en rose au pincement (Zoomer)\n    ou en bleu clair à l'étirement (Dézoomer).<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n <span class=\"token comment\">&lt;!-- UI pour log/debug --&gt;</span>\n <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>log<span class=\"token punctuation\">\"</span></span> <span class=\"token special-attr\"><span class=\"token attr-name\">onclick</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value javascript language-javascript\"><span class=\"token function\">enableLog</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">&gt;</span></span>Démarrer/Stopper les logs<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>clearlog<span class=\"token punctuation\">\"</span></span> <span class=\"token special-attr\"><span class=\"token attr-name\">onclick</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value javascript language-javascript\"><span class=\"token function\">clearLog</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">&gt;</span></span>Nettoyer les logs<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span>\n <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>output</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>output</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"fonctions_diverses","title":"Fonctions diverses","isH3":true,"content":"<p>Ces fonctions prennent en charge l'application mais ne sont pas directement impliquées dans le flux des événements.</p>\n<h4 id=\"gestion_du_cache\">Gestion du Cache</h4>\n<p>Cette fonction aide à gérer le cache global des événements, <code>evCache</code>.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">remove_event</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ev</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n <span class=\"token comment\">// Supprime l'événement du cache</span>\n <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> evCache<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>evCache<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>pointerId <span class=\"token operator\">==</span> ev<span class=\"token punctuation\">.</span>pointerId<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n     evCache<span class=\"token punctuation\">.</span><span class=\"token function\">splice</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n     <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<h4 id=\"log_des_événements\">Log des événements</h4>\n<p>Ces fonctions sont utilisées pour afficher l'activité du pointeur dans la fenêtre de l'application (pour aider à debugger et à apprendre le flux des événements).</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// Flag log</span>\n<span class=\"token keyword\">var</span> logEvents <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Fonctions Log/debug</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">enableLog</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ev</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  logEvents <span class=\"token operator\">=</span> logEvents <span class=\"token operator\">?</span> <span class=\"token boolean\">false</span> <span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prefix<span class=\"token punctuation\">,</span> ev</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>logEvents<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> o <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByTagName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'output'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> s <span class=\"token operator\">=</span> prefix <span class=\"token operator\">+</span> <span class=\"token string\">\": pointerID = \"</span> <span class=\"token operator\">+</span> ev<span class=\"token punctuation\">.</span>pointerId <span class=\"token operator\">+</span>\n                <span class=\"token string\">\" ; pointerType = \"</span> <span class=\"token operator\">+</span> ev<span class=\"token punctuation\">.</span>pointerType <span class=\"token operator\">+</span>\n                <span class=\"token string\">\" ; isPrimary = \"</span> <span class=\"token operator\">+</span> ev<span class=\"token punctuation\">.</span>isPrimary<span class=\"token punctuation\">;</span>\n  o<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">+=</span> s <span class=\"token operator\">+</span> \"\n\"<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">clearLog</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n <span class=\"token keyword\">var</span> o <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByTagName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'output'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n o<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"voir_aussi","title":"Voir aussi","isH3":false,"content":"<ul>\n  <li><a href=\"https://hacks.mozilla.org/2015/08/pointer-events-now-in-firefox-nightly/\" class=\"external\" rel=\" noopener\">Pointer Events now in Firefox Nightly</a>; Mozilla Hacks; by Matt Brubeck and Jason Weathersby; 2015-Aug-04</li>\n  <li><a href=\"https://github.com/jquery/PEP\" class=\"external\" rel=\" noopener\">jQuery Pointer Events Polyfill</a></li>\n  <li><a href=\"https://www.google.com/design/spec/patterns/gestures.html\" class=\"external\" rel=\" noopener\">Gestures</a>; Google Design Patterns</li>\n</ul>"}}],"toc":[{"text":"Exemple","id":"exemple"},{"text":"Voir aussi","id":"voir_aussi"}],"summary":"Ajouter la gestion des gestes à une application peut améliorer de manière significative l'expérience utilisateur. Il existe de nombreux types de gestes, du simple geste swipe (balayage de l'écran) aux gestes plus complexes avec plusieurs doigts comme le twist (rotation), où les points de contact (dits pointeurs) bougent dans des directions différentes.","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Pinch zoom gestures","locale":"en-US","native":"English (US)"},{"title":"ピンチズームのジェスチャー","locale":"ja","native":"日本語"}],"source":{"folder":"fr/web/api/pointer_events/pinch_zoom_gestures","github_url":"https://github.com/mdn/translated-content/blob/main/files/fr/web/api/pointer_events/pinch_zoom_gestures/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/fr/docs/Web","title":"Technologies web pour développeurs"},{"uri":"/fr/docs/Web/API","title":"Référence Web API"},{"uri":"/fr/docs/Web/API/Pointer_events","title":"Événements de pointeur"},{"uri":"/fr/docs/Web/API/Pointer_events/Pinch_zoom_gestures","title":"Gestes pincer et zoomer"}],"pageTitle":"Gestes pincer et zoomer - Référence Web API | MDN","noIndexing":false}}