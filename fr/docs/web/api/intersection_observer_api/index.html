<!DOCTYPE html><html lang="en-US" prefix="og: https://ogp.me/ns#"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="/favicon-48x48.97046865.png"><link rel="apple-touch-icon" href="/apple-touch-icon.0ea0fa02.png"><meta name="theme-color" content="#ffffff"><link rel="manifest" href="/manifest.56b1cedc.json"><link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="MDN Web Docs"><script>Array.prototype.flat&&Array.prototype.includes||document.write('<script src="https://polyfill.io/v3/polyfill.min.js?features=Array.prototype.flat%2Ces6"><\/script>')</script><title>Intersection Observer API - R√©f√©rence Web API | MDN</title><link rel="preload" as="font" type="font/woff2" crossorigin="" href="/static/media/ZillaSlab-Bold.subset.0beac26b.woff2"><link rel="alternate" title="Intersection Observer API" href="https://developer.mozilla.org/fr/docs/Web/API/Intersection_Observer_API" hreflang="fr"><link rel="alternate" title="Intersection Observer API" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Intersection_Observer_API" hreflang="zh"><link rel="alternate" title="Intersection Observer API" href="https://developer.mozilla.org/ru/docs/Web/API/Intersection_Observer_API" hreflang="ru"><link rel="alternate" title="Intersection Observer API" href="https://developer.mozilla.org/ko/docs/Web/API/Intersection_Observer_API" hreflang="ko"><link rel="alternate" title="‰∫§Â∑Æ„Ç™„Éñ„Ç∂„Éº„Éê„Éº API" href="https://developer.mozilla.org/ja/docs/Web/API/Intersection_Observer_API" hreflang="ja"><link rel="alternate" title="Intersection Observer API" href="https://developer.mozilla.org/es/docs/Web/API/Intersection_Observer_API" hreflang="es"><link rel="alternate" title="Intersection Observer API" href="https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API" hreflang="en"><meta name="description" content="L'API Intersection Observer permet d'observer de mani√®re asynchrone l'√©volution de l'intersection d'un √©l√©ment cible avec un √©l√©ment anc√™tre ou avec la zone d'affichage d'un document de niveau sup√©rieur."><meta property="og:url" content="https://developer.mozilla.org/fr/docs/Web/API/Intersection_Observer_API"><meta property="og:title" content="Intersection Observer API - R√©f√©rence Web API | MDN"><meta property="og:description" content="L'API Intersection Observer permet d'observer de mani√®re asynchrone l'√©volution de l'intersection d'un √©l√©ment cible avec un √©l√©ment anc√™tre ou avec la zone d'affichage d'un document de niveau sup√©rieur."><meta property="og:locale" content="fr"><meta property="og:image" content="https://developer.mozilla.org/mdn-social-share.0ca9dbda.png"><meta property="twitter:card" content="summary_large_image"><meta name="robots" content="index, follow"><link rel="canonical" href="https://developer.mozilla.org/fr/docs/Web/API/Intersection_Observer_API"><style media="print">.breadcrumbs-container,.document-toc-container,.language-menu,.language-toggle,.on-github,.page-footer,.page-header-main,nav.sidebar,ul.prev-next{display:none!important}.main-page-content,.main-page-content pre{padding:2px}.main-page-content pre{border-left-width:2px}</style><link href="/static/css/main.55b68e13.chunk.css" rel="stylesheet"><script src="/static/js/runtime-main.4bb4c356.js" defer=""></script><script src="/static/js/4.a756dea3.chunk.js" defer=""></script><script src="/static/js/main.d4d565e0.chunk.js" defer=""></script></head><body><div id="root"><ul id="nav-access" class="a11y-nav"><li><a id="skip-main" href="#content">Skip to main content</a></li><li><a id="skip-search" href="#main-q">Skip to search</a></li><li><a id="skip-select-language" href="#select-language">Skip to select language</a></li></ul><div class="page-wrapper document-page"><header class="page-header"><a href="/fr/" class="logo" aria-label="MDN Web Docs"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 451.74 135"><path d="M7.14 8.35v111.06h111.05V8.35zm103.71 56c-.48.92-1 1.79-1.46 2.71a3.44 3.44 0 01-3.54 2 2.4 2.4 0 00-1.55.5c-1.37.9-2.76 1.79-4.18 2.63a7.33 7.33 0 01-6.35.34 29.71 29.71 0 00-10.63-2 11.7 11.7 0 00-9.46 4.31 14.84 14.84 0 00-2.13 4.29c-1.24 3.07-2.3 21.38-2.3 26.05 0 0-17.62-3.42-34.15-20.34l4.31-11.32h-13.5l9.76-10.35h-16.8l9.77-10.34H12.69L30.45 34a40.9 40.9 0 0119.77-10.83c7.1-1.22 8.93-.53 13.31.77l2.43.73.85.25 3.1.95a12.56 12.56 0 006.21.09 11.37 11.37 0 018.25 1 8.24 8.24 0 014.1 6.22 7.29 7.29 0 003.61 5.49 59.45 59.45 0 009.32 4.11c2.27.86 4.54 1.84 6.79 2.72a6.81 6.81 0 012.86 2.06 4.81 4.81 0 011.1 2.73c.14 2 .37 4 .47 6a15.24 15.24 0 01-1.77 8.03zM320.12 39.62a5.42 5.42 0 00-4.53 2.13 7.36 7.36 0 00-1.7 4.43v2.36a6.28 6.28 0 001.7 4.46 5.63 5.63 0 004.3 1.82 5.12 5.12 0 004.57-2.27A9.7 9.7 0 00326 47a8.11 8.11 0 00-1.67-5.52 5.36 5.36 0 00-4.21-1.86zM387.38 39.53a5.52 5.52 0 00-4.7 2.15 8.8 8.8 0 00-1.63 5.49 9.23 9.23 0 001.58 5.45 5.38 5.38 0 004.7 2.25 5.61 5.61 0 004.74-2.2 8.91 8.91 0 001.68-5.59 8.24 8.24 0 00-1.75-5.52 5.76 5.76 0 00-4.62-2.03zM299.47 41.35a4.34 4.34 0 00-4-1.92 4.55 4.55 0 00-3.89 1.73 8.37 8.37 0 00-1.58 4.17h10.48a6.3 6.3 0 00-1.01-3.98zM357.74 30.75H352v23.31h5.72q5.47 0 8.35-3t2.93-8.65q0-5.43-2.88-8.55t-8.38-3.11z"></path><path d="M121.55 8.35v70.8h323V8.35zm42.21 22.45h-4V54h3.68v3.73h-11.25V54h3.31V36.79h-.19l-9.63 19.12h-2.12l-10-19.4h-.19V54h3.45v3.73h-11.15V54h3.68V30.8h-4v-3.73H133l11.66 22.56h.19l11.18-22.56h7.7zm29.12 22.67q-4.11 4.28-11.38 4.28h-14.06v-3.69h3.73V30.75h-3.73v-3.68h13.83q7.59 0 11.66 4.29a15.4 15.4 0 014 11 15.33 15.33 0 01-4.05 11.11zm38.89-22.67h-3.68v27h-2.6L208.08 35h-.19v19h4.67v3.73h-12.22V54h3.49V30.8h-4v-3.73h7.08l16.9 22.09h.19V30.8h-4.58v-3.73h12.32zm43.8 27h-3.31l-7.83-23.18h-.19l-7.55 23.18h-3.35l-8.78-27h-2.65v-3.73H253v3.73h-3.87L255 50.71h.23l6.61-19.91H259v-3.73h11v3.73h-2.78l6.61 20.1h.23l5.43-20.1h-4.15v-3.73h11v3.73h-2.54zm26.71-1.51a9.66 9.66 0 01-6.42 2 10.2 10.2 0 01-7.41-2.74c-1.89-1.82-2.83-4.47-2.83-7.93a12.37 12.37 0 012.64-8.12 9 9 0 017.32-3.21 8.62 8.62 0 016.75 2.69 9.65 9.65 0 012.45 6.52 13.67 13.67 0 01-.28 2.69H290q.29 6.71 6.18 6.7a5.2 5.2 0 003.71-1.18 5.82 5.82 0 001.67-2.83l3.45.71a7.21 7.21 0 01-2.73 4.65zm25.77-1.63c-1.51 2.4-3.92 3.61-7.22 3.61s-5.84-1.29-7.22-3.87c0 .25-.1.82-.21 1.7s-.19 1.44-.22 1.7H309c.16-1 .31-2 .47-3.07a21.42 21.42 0 00.24-3.16v-23h-3.4v-3.3h7.55V40.9a9.76 9.76 0 012.67-3.28 7.33 7.33 0 014.74-1.4 8.48 8.48 0 016.5 2.78q2.55 2.74 2.55 7.74a14.6 14.6 0 01-2.27 7.87zm41.39-1.14q-4.11 4.28-11.37 4.28H344v-3.74h3.73V30.75H344v-3.68h13.83q7.59 0 11.66 4.29a15.41 15.41 0 014.06 11 15.34 15.34 0 01-4.11 11.11zm25.65 1.68a10.53 10.53 0 01-7.9 3.07 10 10 0 01-7.63-3 10.93 10.93 0 01-2.8-7.83 12.13 12.13 0 012.69-7.93q2.69-3.3 8-3.3t8 3.28a12 12 0 012.64 7.76 10.86 10.86 0 01-3 7.9zm22.61.57c-1.4 1.66-3.63 2.5-6.68 2.5a9.58 9.58 0 01-7.15-2.76q-2.72-2.76-2.71-7.91a12.25 12.25 0 012.69-8 9.17 9.17 0 017.5-3.28 15 15 0 013.82.48 10.37 10.37 0 013.5 1.65l.85 5.47-3.35.38-.76-3.54a8.07 8.07 0 00-4.11-1 4.9 4.9 0 00-4.39 2.15 9.93 9.93 0 00-1.41 5.55 8.9 8.9 0 001.5 5.38 5.23 5.23 0 004.44 2c2.92 0 4.67-1.7 5.23-5.1l3.5.71a10.34 10.34 0 01-2.47 5.27zm20.48.75a11.68 11.68 0 01-6.63 1.75 15.52 15.52 0 01-8.26-2.08L424 51l3.26.33-.1 2.74a7 7 0 002.06.66 12.63 12.63 0 002.19.19 8.68 8.68 0 003.66-.75 2.5 2.5 0 001.63-2.36 2.25 2.25 0 00-1.32-2.2 12.65 12.65 0 00-3.28-1 47.39 47.39 0 01-3.9-.82 7.5 7.5 0 01-3.25-1.7 4.67 4.67 0 01-1.33-3.66c0-2.36.88-4 2.62-4.91a12 12 0 015.6-1.37 15 15 0 014.08.55 16.65 16.65 0 013.47 1.39l.47 5.1-3.3.37-.48-3.3a9.5 9.5 0 00-4.06-.9 5.62 5.62 0 00-2.87.66 2.33 2.33 0 00-1.15 2.25 2.13 2.13 0 001.3 2.07 11.91 11.91 0 003.21.92 36.69 36.69 0 013.82.83 7.46 7.46 0 013.21 1.74 4.9 4.9 0 011.3 3.73 5.56 5.56 0 01-2.66 4.91z"></path><path d="M181.17 30.75h-5.71v23.31h5.71q5.47 0 8.36-3t2.88-8.61q0-5.43-2.88-8.55t-8.36-3.15zM121.63 119.32V81.74h114.91v37.58zM153.22 109h-2v-6.85a4.8 4.8 0 00-1.58-4 5.57 5.57 0 00-3.55-1.26 5 5 0 00-4.92 3.26 4.19 4.19 0 00-1.88-2.46 5.82 5.82 0 00-3-.8 4.89 4.89 0 00-4.56 2.56v-2.21h-6.28v3.26h2v8.5h-2v3.23h9.11V109h-2.86v-5.25a4.4 4.4 0 01.69-2.56 2.47 2.47 0 012.21-1q2.57 0 2.56 3.63v8.41h6.29V109h-2v-5.25a4.47 4.47 0 01.67-2.56 2.42 2.42 0 012.19-1q2.63 0 2.63 3.63v8.41h6.28zm9.88-12.07q-4 0-6 2.36a8.41 8.41 0 00-2 5.66 7.25 7.25 0 002.17 5.62 8 8 0 005.65 2 8.54 8.54 0 005.94-2.11 7.27 7.27 0 002.34-5.67 8.21 8.21 0 00-2-5.51q-2.07-2.34-6.1-2.34zm-.1 12.35a3 3 0 01-2.63-1.33 5.68 5.68 0 01-.9-3.26 5 5 0 011-3.28 3.23 3.23 0 012.61-1.18 3.5 3.5 0 012.59 1.08 4.56 4.56 0 011.07 3.31 5.21 5.21 0 01-1 3.41 3.33 3.33 0 01-2.74 1.25zm25-2.3l-3.39-.29-.7 2.32H179l8.32-9.54-.32-2.23h-13.19l-.53 5.25 3.16.34.67-2.36h4.65l-8.25 9.53.44 2.26h13.13zm7.62-9.74h-4.46v5.39h4.46zm0 9.61h-4.46v5.39h4.46zm13.54-17.49h-4.23l-6.48 22.88h4.22zm8.68 0h-4.23l-6.45 22.88h4.19zm15 22.51l-.07-2.26a1.22 1.22 0 01-.56.1c-.69 0-1-.39-1-1.16v-6.49a4.39 4.39 0 00-1.8-3.84 7 7 0 00-4.16-1.28 14.55 14.55 0 00-3.16.3 24.14 24.14 0 00-3.29 1.06l-.56 3.46 3.39.4.5-1.69a2.78 2.78 0 011.08-.37 11.3 11.3 0 011.25-.07c1.19 0 1.89.37 2.09 1.1a8.55 8.55 0 01.3 2.26v.5a8.91 8.91 0 00-1.18-.11h-1.21a12.64 12.64 0 00-4.81.88 3.53 3.53 0 00-2.18 3.64 3.66 3.66 0 001.48 3.33 5.63 5.63 0 003.11 1 4.67 4.67 0 003-.91 6.78 6.78 0 001.8-2 3 3 0 003.33 3 5.54 5.54 0 002.66-.85zm-9.25-2.32a1.69 1.69 0 01-1.36-.52 1.81 1.81 0 01-.43-1.21 1.67 1.67 0 01.86-1.68 4.63 4.63 0 012-.42 7.69 7.69 0 011.07.07l1.06.13a3.58 3.58 0 01-1.08 2.74 3.24 3.24 0 01-2.11.89z"></path></svg></a><button type="button" class="ghost main-menu-toggle" aria-haspopup="true" aria-label="Show Menu"></button><div class="page-header-main "><nav class="main-nav" aria-label="Main menu"><ul class="main-menu nojs"><li class="top-level-entry-container"><button id="technologies-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">Technologies</button><ul class="technologies " role="menu" aria-labelledby="technologies-button"><li role="none"><a tabindex="-1" href="/fr/docs/Web" role="menuitem">Technologies Overview</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web/HTML" role="menuitem">HTML</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web/CSS" role="menuitem">CSS</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web/JavaScript" role="menuitem">JavaScript</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web/Guide/Graphics" role="menuitem">Graphics</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web/HTTP" role="menuitem">HTTP</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web/API" role="menuitem">APIs</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Mozilla/Add-ons/WebExtensions" role="menuitem">Browser Extensions</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web/MathML" role="menuitem">MathML</a></li></ul></li><li class="top-level-entry-container"><button id="references-guides-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">References &amp; Guides</button><ul class="references-guides " role="menu" aria-labelledby="references-guides-button"><li role="none"><a tabindex="-1" href="/fr/docs/Learn" role="menuitem">Learn web development</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web/Tutorials" role="menuitem">Tutorials</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web/Reference" role="menuitem">References</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web/Guide" role="menuitem">Developer Guides</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web/Accessibility" role="menuitem">Accessibility</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Games" role="menuitem">Game development</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web" role="menuitem">...more docs</a></li></ul></li><li class="top-level-entry-container"><button id="feedback-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">Feedback</button><ul class="feedback " role="menu" aria-labelledby="feedback-button"><li role="none"><a tabindex="-1" href="/fr/docs/MDN/Contribute/Feedback" role="menuitem">Send Feedback</a></li><li role="none"><a tabindex="-1" href="/fr/docs/MDN/Contribute" role="menuitem">Contribute to MDN</a></li><li role="none"><a tabindex="-1" target="_blank" rel="noopener noreferrer" href="https://github.com/mdn/content/issues/new" role="menuitem">Report a content issue<!-- --> üåê</a></li><li role="none"><a tabindex="-1" target="_blank" rel="noopener noreferrer" href="https://github.com/mdn/yari/issues/new" role="menuitem">Report a platform issue<!-- --> üåê</a></li></ul></li></ul></nav><div class="header-search"><form action="/fr/search" class="search-form search-widget" role="search"><label for="main-q" class="visually-hidden">Search MDN</label><input type="search" name="q" id="main-q" class="search-input-field" placeholder="Site search... (Press &quot;/&quot; to focus)" pattern="(.|\s)*\S(.|\s)*" required="" value=""><input type="submit" class="ghost search-button" value="" aria-label="Search"></form></div><div class="auth-container"></div></div></header><div class="breadcrumb-locale-container"><nav class="breadcrumbs-container" aria-label="Breadcrumb navigation"><ol typeof="BreadcrumbList" vocab="https://schema.org/" aria-label="breadcrumbs"><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="/fr/docs/Web"><span property="name">Technologies web pour d√©veloppeurs</span></a><meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb-penultimate" property="item" typeof="WebPage" href="/fr/docs/Web/API"><span property="name">R√©f√©rence Web API</span></a><meta property="position" content="2"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb-current-page" property="item" typeof="WebPage" href="/fr/docs/Web/API/Intersection_Observer_API"><span property="name">Intersection Observer API</span></a><meta property="position" content="3"></li></ol></nav><ul class="language-toggle"><li><a href="#select-language" class="language-icon"><span class="show-desktop">Change language</span></a></li><li><a class="view-in-english" href="/en-US/docs/Web/API/Intersection_Observer_API"><span class="show-desktop">View in</span> English</a></li></ul></div><div class="localized-content-note notecard inline neutral"><a href="/en-US/docs/MDN/Contribute/Localize#active_locales">Cette page a √©t√© traduite √† partir de l'anglais par la communaut√©. Vous pouvez √©galement contribuer en rejoignant la communaut√© francophone sur MDN Web Docs.</a></div><aside class="document-toc-container"><section class="document-toc"><header><h2>Table of contents</h2><button type="button" class="ghost toc-trigger-mobile" aria-controls="toc-entries" aria-expanded="false">Table of contents</button></header><ul id="toc-entries"><li><a href="#concepts_et_utilisation_de_lobservateur_dintersections">Concepts et utilisation de l'observateur d'intersections</a></li><li><a href="#interfaces">Interfaces</a></li><li><a href="#un_exemple_simple">Un exemple simple</a></li><li><a href="#sp√©cifications">Sp√©cifications</a></li><li><a href="#compatibilit√©_des_navigateurs">Compatibilit√© des navigateurs</a></li><li><a href="#voir_aussi">Voir aussi</a></li></ul></section></aside><main id="content" class="main-content" role="main"><article class="main-page-content" lang="fr"><h1>Intersection Observer API</h1><div><div class="notecard experimental" id="sect1"><p><strong>Experimental:</strong> <strong>Cette fonction est exp√©rimentale</strong><br>Puisque cette fonction est toujours en d√©veloppement dans certains navigateurs, veuillez consulter le <a href="#browser_compatibility">tableau de compatibilit√©</a> pour les pr√©fixes √† utiliser selon les navigateurs.<br>Il convient de noter qu'une fonctionnalit√© exp√©rimentale peut voir sa syntaxe ou son comportement modifi√© dans le futur en fonction des √©volutions de la sp√©cification.</p></div>
<p>L'API <em>Intersection Observer</em> permet d'observer de mani√®re asynchrone l'√©volution de l'intersection d'un √©l√©ment cible avec un √©l√©ment anc√™tre ou avec la zone d'affichage d'un document de niveau sup√©rieur.</p>
<p>Historiquement, d√©tecter la visibilit√© d'un √©l√©ment, ou la visibilit√© relative de deux √©l√©ments l'un par rapport √† l'autre, a √©t√© une tache difficile, r√©solue de mani√®re peu rigoureuse et pouvant nuire √† la fluidit√© de la page consult√©e. Malheureusement, avec la maturation de la toile, ce genre d'information se r√©v√®le de plus en plus n√©cessaire. La donn√©e de l'intersection est requise pour de nombreuses raisons, telles que:</p>
<ul>
  <li>Le chargement paresseux d'images ou d'autres types de contenus au fur et √† mesure que la page d√©file.</li>
  <li>L'implantation de ¬´ d√©filement infini ¬ª, o√π de plus en plus de contenu est charg√© tandis que l'utilisateur d√©file, afin qu'il n'ait pas √† changer de page.</li>
  <li>Le signalement de la visibilit√© pour les publicit√©s afin de calculer les revenus publicitaires.</li>
  <li>La d√©cision d'ex√©cuter ou non une t√¢che ou une animation selon que l'utilisateur va en voir le r√©sultat ou non.</li>
</ul>
<p>De par le pass√©, l'implantation de la d√©tection d'intersection impliquait des gestionnaires d'√©v√®nements et des boucles appelant des m√©thodes telles que <a href="/fr/docs/Web/API/Element/getBoundingClientRect"><code>Element.getBoundingClientRect()</code></a> afin de g√©n√©rer les informations n√©cessaires pour chaque √©l√©ment concern√©. Comme la totalit√© du code est ex√©cut√© dans le <em>thread</em> principal, m√™me une seule de ces boucles peut causer des probl√®mes de performance. Si un site est rempli de ces tests, les choses peuvent vite devenir tr√®s moches.</p>
<p>Prenons une page qui utilise un d√©filement infini. Mettons qu'elle utilise une biblioth√®que fournie par un √©diteur afin de g√©rer les publicit√©s plac√©es p√©riodiquement le long de la page, qu'elle a des graphiques anim√©s ici et l√†, et qu'elle utilise une biblioth√®que personnalis√©e pour dessiner des cases de notifications et ce genre de choses. Chacune de ces choses a ses propres proc√©dures de d√©tection d'intersection, toutes ex√©cut√©es dans le <em>thread</em> principal. L'auteur du site ne le r√©alise peut-√™tre m√™me pas, puisqu'il utilise deux biblioth√®ques dont il ne conna√Æt pas forc√©ment les d√©tails de fonctionnement. Quand l'utilisateur navigue sur la page, ces proc√©dures de d√©tection d'intersection r√©agissent constamment pendant l'ex√©cution du code de d√©filement, rendant l'exp√©rience frustrante pour l'utilisateur vis-√†-vis de son navigateur, du site Internet et de son ordinateur.</p>
<p>L'API <em>Intersection Observer</em> permet d'int√©grer une fonction <em>callback</em> qui est ex√©cut√©e quand un √©l√©ment qu'on souhaite surveiller entre ou sort d'un autre √©l√©ment (ou du <em>viewport</em> (zone d'affichage)), ou quand la taille de leur intersection varie d'une quantit√© pr√©d√©termin√©e. Ainsi, les sites n'ont plus besoin de faire quoi que ce soit sur le <em>thread</em> principal pour surveiller ce genre d'intersection d'√©l√©ments, et le navigateur est libre de g√©rer la d√©tection d'intersection comme bon lui semble.</p>
<p>Il y a une chose sur laquelle l'API <em>Intersection Observer</em> ne peut pas vous renseigner : le nombre de pixels qui intersectent, ou bien desquels il s'agit pr√©cis√©ment; par contre elle permet d'ordonner des actions souvent utiles telles que ¬´ si ils s'intersectent de plus de N%, alors faire ceci ¬ª.</p></div><h2 id="concepts_et_utilisation_de_lobservateur_dintersections"><a href="#concepts_et_utilisation_de_lobservateur_dintersections" title="Permalink to Concepts et utilisation de l'observateur d'intersections">Concepts et utilisation de l'observateur d'intersections</a></h2><div><p>L'API <em>Intersection Observer</em> permet de mettre en place une fonction <em>callback</em> qui est appel√©e quand un √©l√©ment, appel√© la <strong>cible</strong>, intersecte ou bien le <em>viewport</em> (la zone d'affichage) ou bien un √©l√©ment pr√©d√©fini ; dans le cadre de cette API, nous l‚Äôappellerons <strong>l'√©l√©ment racine</strong> ou <strong>la racine</strong>. Typiquement, on voudra observer les variations de l'intersection par rapport √† la zone d'affichage du document (ce qui est fait en passant l'argument <code>null</code> au moment de d√©signer l'√©l√©ment racine). Que vous utilisiez la zone d'affichage ou un autre √©l√©ment comme racine, l'API fonctionne de la m√™me fa√ßon, en ex√©cutant une fonction <em>callback</em>, fournie au pr√©alable, lorsque la visibilit√© de l'√©l√©ment cible change de telle sorte qu'il atteint la quantit√© voulue d'intersection avec l'√©l√©ment racine.</p>
<p>Le degr√© d'intersection entre l'√©l√©ment cible et sa racine est le <strong>ratio d'intersection</strong>. C'est une repr√©sentation du pourcentage de l'√©l√©ment cible qui est visible, exprim√©e sous la forme d'un nombre compris entre 0.0 et 1.0.</p></div><h3 id="cr√©ation_dun_observateur_dintersection"><a href="#cr√©ation_dun_observateur_dintersection" title="Permalink to Cr√©ation d'un observateur d'intersection">Cr√©ation d'un observateur d'intersection</a></h3><div><p>Cr√©ez l'observateur d'intersection en appelant son constructeur et en lui passant la r√©f√©rence d'une fonction <em>callback</em>. Cette fonction sera ex√©cut√©e quand un palier est franchi dans un sens ou dans un autre :</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">var</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">root</span><span class="token operator">:</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#scrollArea'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token literal-property property">rootMargin</span><span class="token operator">:</span> <span class="token string">'0px'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">threshold</span><span class="token operator">:</span> <span class="token number">1.0</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntersectionObserver</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Un palier de 1.0 signifie que lorsque 100% de la cible est visible dans l'√©l√©ment d√©sign√© par l'option <code>root</code> (l'√©l√©ment racine), la fonction <em>callback</em> est invoqu√©e.</p>
<h4 id="options_de_lobservateur_dintersection">Options de l'observateur d'intersection</h4>
<p>L'objet <code>options</code> qui est pass√© dans le constructeur <a href="/fr/docs/Web/API/IntersectionObserver/IntersectionObserver" title="IntersectionObserver()"><code>IntersectionObserver()</code></a> permet de contr√¥ler les circonstances selon lesquelles la fonction <em>callback</em> de l'observateur est invoqu√©e. Il poss√®de les champs suivants :</p>
<dl>
  <dt id="root"><code>root</code></dt>
  <dd>
    <p>L'√©l√©ment qui est utilis√© comme zone d'affichage au moment d'√©valuer la visibilit√© de la cible. Il doit √™tre un anc√™tre de la cible. S'il n'est pas sp√©cifi√© ou s'il prend la valeur <code>null</code>, sa valeur par d√©faut est la zone d'affichage (le <em>viewport</em>) du navigateur.</p>
  </dd>
  <dt id="rootmargin"><code>rootMargin</code></dt>
  <dd>
    <p>La marge autour de la racine. Peut prendre des valeurs similaires √† la propri√©t√© CSS <a href="/fr/docs/Web/CSS/margin"><code>margin</code></a> par exemple "<code>10px 20px 30px 40px"</code> (top, right, bottom, left). Si l'√©l√©ment <code>root</code> a √©t√© sp√©cifi√©, les valeurs peuvent √™tre exprim√©es en pourcentages. Cet ensemble de valeur sert √† agrandir ou √† r√©duire chaque cot√© du cadre d√©limitant l'√©l√©ment racine avant d'√©valuer les intersections. Par d√©faut, toutes les valeurs prennent la valeur z√©ro.</p>
  </dd>
  <dt id="threshold"><code>threshold</code></dt>
  <dd>
    <p>Soit un nombre, soit un tableau de nombre qui indique √† quel pourcentage de la visibilit√© de la cible la fonction <em>callback</em> de la cible doit √™tre ex√©cut√©. Si vous souhaitez seulement d√©tecter quand la visibilit√© franchit la barre des 50%, vous pouvez entrer la valeur 0.5. Si vous voulez que le <em>callback</em> soit ex√©cut√© chaque fois que la visibilit√© varie de 25% de plus, il faudra sp√©cifier le tableau [0, 0.25, 0.5, 0.75, 1]. La valeur par d√©faut est 0 (ce qui signifie que d√©s qu'un seul pixel sera visible, la fonction <em>callback</em> sera ex√©cut√©e). Une valeur de 1.0 signifie que le palier n'est consid√©r√© comme franchi qu'une fois que tous les pixels sont visibles.</p>
  </dd>
</dl>
<h4 id="choisir_un_√©l√©ment_√†_observer">Choisir un √©l√©ment √† observer</h4>
<p>Une fois l'observateur cr√©√©, il faut lui donner un √©l√©ment cible √† observer :</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">var</span> target <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#listItem'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Lorsque la cible franchit un palier sp√©cifi√© indiqu√© dans l'objet <code>IntersectionObserver</code>, la fonction <em>callback</em> est appel√©e. Le <em>callback</em> re√ßoit une liste d'objets <a href="/fr/docs/Web/API/IntersectionObserverEntry"><code>IntersectionObserverEntry</code></a> ainsi que l'observateur :</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">var</span> <span class="token function-variable function">callback</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">entries<span class="token punctuation">,</span> observer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  entries<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">entry</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// chaque √©l√©ment de entries correspond √† une variation</span>
    <span class="token comment">// d'intersection pour un des √©l√©ments cible:</span>
    <span class="token comment">//   entry.boundingClientRect</span>
    <span class="token comment">//   entry.intersectionRatio</span>
    <span class="token comment">//   entry.intersectionRect</span>
    <span class="token comment">//   entry.isIntersecting</span>
    <span class="token comment">//   entry.rootBounds</span>
    <span class="token comment">//   entry.target</span>
    <span class="token comment">//   entry.time</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Soyez attentif au fait que la fonction <em>callback</em> est ex√©cut√©e dans le <em>thread</em> principal. Elle devrait √™tre ex√©cut√©e aussi rapidement que possible ; si une op√©ration prenant du temps a besoin d'√™tre effectu√©e, utilisez <a href="/fr/docs/Web/API/Window/requestIdleCallback"><code>Window.requestIdleCallback()</code></a>.</p>
<p>De plus, remarquez que si vous avez sp√©cifi√© l'option <code>root</code>, la cible doit √™tre un descendant de l'√©l√©ment <code>root</code>.</p></div><h3 id="comment_est_calcul√©e_lintersection"><a href="#comment_est_calcul√©e_lintersection" title="Permalink to Comment est calcul√©e l'intersection">Comment est calcul√©e l'intersection</a></h3><div><p>Toutes les r√©gions envisag√©es par l'API <em>Intersection Observer</em> sont des rectangles; les √©l√©ments de forme irr√©guli√®re sont assimil√©es au plus petit rectangle qui contient l'√©l√©ment en question tout entier. De m√™me, si la partie visible d'un √©l√©ment n'est pas rectangulaire, le rectangle d'intersection de l'√©l√©ment sera le plus petit rectangle qui contient toute la partie visible de l'√©l√©ment.</p>
<p>Il est utile de comprendre comment les diff√©rentes propri√©t√©s fournies par <a href="/fr/docs/Web/API/IntersectionObserverEntry"><code>IntersectionObserverEntry</code></a> d√©crivent une intersection.</p>
<h4 id="la_racine_de_lintersection_et_la_marge_de_la_racine">La racine de l'intersection et la marge de la racine</h4>
<p>Avant de pouvoir √©tudier l'intersection d'un √©l√©ment avec un conteneur, nous devons savoir quel est ce conteneur. Ce conteneur est <strong>la racine de l'intersection</strong>, ou <strong>√©l√©ment racine</strong>. Ce peut √™tre soit un √©l√©ment du document qui est un anc√™tre de l'√©l√©ment √† observer, ou <code>null</code> si l'on souhaite utiliser la zone d'affichage (<em>viewport</em>) du document comme conteneur.</p>
<p>Le rectangle utilis√© pour d√©limiter la racine de l'intersection peut √™tre ajust√© en ajustant la <strong>marge de la racine</strong>, c'est-√†-dire le champ <code>rootMargin</code>, lors de la cr√©ation de <a href="/fr/docs/Web/API/IntersectionObserver"><code>IntersectionObserver</code></a>. La valeur de <code>rootMargin</code> d√©finit le d√©calage ajout√© √† chaque cot√© du cadre d√©limitant la racine de l'intersection pour cr√©er le cadre final de la racine de l'intersection (accessible via <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/IntersectionObserverEntry/rootBounds"><code>IntersectionObserverEntry.rootBounds</code> <small>(en-US)</small></a> quand la fonction <em>callback</em> est ex√©cut√©e).</p>
<h4 id="paliers">Paliers</h4>
<p>Plut√¥t que de rapporter le moindre changement de variation de la visibilit√© d'un √©l√©ment, l'API Intersection Observer utilise des <strong>paliers</strong>. Lors de la cr√©ation d'un observateur, vous pouvez fournir une ou plusieurs valeurs num√©riques qui repr√©sentent des pourcentages de visibilit√© de l'√©l√©ment cible. Dans ce cas, l'API ne rapportent que les changements de visibilit√© qui franchissent ces paliers.</p>
<p>Par exemple, si vous voulez √™tre inform√© √† chaque fois que la visibilit√© d'une cible passe au dessus ou en dessous de chaque multiple de 25%, il faudra fournir le tableau [0, 0.25, 0.5, 0.75, 1] comme liste de paliers lors de la cr√©ation de l'observateur. Vous pouvez pr√©ciser dans quelle direction a chang√© la visibilit√© (c'est-√†-dire, si l'√©l√©ment est devenu plus ou moins visible) en lisant la valeur de la propri√©t√© <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/IntersectionObserverEntry/isIntersecting"><code>isIntersecting</code> <small>(en-US)</small></a> du <a href="/fr/docs/Web/API/IntersectionObserverEntry"><code>IntersectionObserverEntry</code></a> pass√© dans la fonction <code>callback</code> lors du changement de visibilit√©. Si <code>isIntersecting</code> est <code>true</code>, l'√©l√©ment cible est devenu au moins aussi visible quand le palier a √©t√© franchi. Si elle vaut <code>false</code>, la cible n'est plus aussi visible que le palier sp√©cifi√©.</p>
<p>Pour mieux comprendre comment fonctionnent les paliers, faites d√©filer la bo√Æte ci-dessous. A l'int√©rieur, chacune des bo√Ætes color√©es affiche son pourcentage de visibilit√© sur chacun de ses quatre coins, de telle sorte que l'on peut voir ces ratios changer tandis que le conteneur d√©file. Chaque bo√Æte a un ensemble diff√©rent de paliers :</p>
<ul>
  <li>La premi√®re bo√Æte a un palier pour chaque point de pourcentage de visibilit√©; c'est √† dire que le tableau <a href="/fr/docs/Web/API/IntersectionObserver/thresholds"><code>IntersectionObserver.thresholds</code></a> est <code>[0.00, 0.01, 0.02, ..., 0.99, 1.00]</code>.</li>
  <li>La deuxi√®me bo√Æte a un unique palier, √† 50%.</li>
  <li>La troisi√®me bo√Æte a des paliers tous les 10% de visibilit√© (0%, 10%, 20%, etc.).</li>
  <li>La derni√®re bo√Æte a des paliers tous les 25%.</li>
</ul>
<h5 id="exemple_de_seuil">Exemple de seuil</h5>
<div class="code-example"><pre class="brush: html hidden notranslate"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>boxTemplate<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sampleBox<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>label topLeft<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>label topRight<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>label bottomLeft<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>label bottomRight<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>contents<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrapper<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
</code></pre></div>
<div class="code-example"><pre class="brush: css hidden notranslate"><code><span class="token selector">.contents</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 700px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 1725px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.wrapper</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 600px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.sampleBox</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 175px<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>245<span class="token punctuation">,</span> 170<span class="token punctuation">,</span> 140<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 2px solid <span class="token function">rgb</span><span class="token punctuation">(</span>201<span class="token punctuation">,</span> 126<span class="token punctuation">,</span> 17<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>
  <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 6px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#box1</span> <span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#box2</span> <span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 75px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#box3</span> <span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">#box4</span> <span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.label</span> <span class="token punctuation">{</span>
  <span class="token property">font</span><span class="token punctuation">:</span> 14px <span class="token string">"Open Sans"</span><span class="token punctuation">,</span> <span class="token string">"Arial"</span><span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 0.7<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.7<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 3em<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.topLeft</span> <span class="token punctuation">{</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.topRight</span> <span class="token punctuation">{</span>
  <span class="token property">right</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.bottomLeft</span> <span class="token punctuation">{</span>
  <span class="token property">bottom</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.bottomRight</span> <span class="token punctuation">{</span>
  <span class="token property">bottom</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>
  <span class="token property">right</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<div class="code-example"><pre class="brush: js hidden notranslate"><code><span class="token keyword">let</span> observers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token function">startup</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">startup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> wrapper <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".wrapper"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Options for the observers</span>

  <span class="token keyword">let</span> observerOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token literal-property property">rootMargin</span><span class="token operator">:</span> <span class="token string">"0px"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">threshold</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// An array of threshold sets for each of the boxes. The</span>
  <span class="token comment">// first box's thresholds are set programmatically</span>
  <span class="token comment">// since there will be so many of them (for each percentage</span>
  <span class="token comment">// point).</span>

  <span class="token keyword">let</span> thresholdSets <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">0.5</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token number">0.4</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.6</span><span class="token punctuation">,</span> <span class="token number">0.7</span><span class="token punctuation">,</span> <span class="token number">0.8</span><span class="token punctuation">,</span> <span class="token number">0.9</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.25</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.75</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">]</span>
  <span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span><span class="token number">1.0</span><span class="token punctuation">;</span> i<span class="token operator">+=</span> <span class="token number">0.1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    thresholdSets<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Add each box, creating a new observer for each</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> template <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#boxTemplate"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>content<span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> boxID <span class="token operator">=</span> <span class="token string">"box"</span> <span class="token operator">+</span> <span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    template<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".sampleBox"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>id <span class="token operator">=</span> boxID<span class="token punctuation">;</span>
    wrapper<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">importNode</span><span class="token punctuation">(</span>template<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Set up the observer for this box</span>

    observerOptions<span class="token punctuation">.</span>threshold <span class="token operator">=</span> thresholdSets<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    observers<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntersectionObserver</span><span class="token punctuation">(</span>intersectionCallback<span class="token punctuation">,</span> observerOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>
    observers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#"</span> <span class="token operator">+</span> boxID<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Scroll to the starting position</span>

  <span class="token comment">//wrapper.scrollIntoView({</span>
  <span class="token comment">//  block: "start",</span>
  <span class="token comment">//});</span>
  document<span class="token punctuation">.</span>scrollingElement<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> wrapper<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>top <span class="token operator">+</span> window<span class="token punctuation">.</span>scrollY<span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>scrollingElement<span class="token punctuation">.</span>scrollLeft <span class="token operator">=</span> <span class="token number">750</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">intersectionCallback</span><span class="token punctuation">(</span><span class="token parameter">entries</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  entries<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">entry</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> box <span class="token operator">=</span> entry<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
    <span class="token keyword">let</span> visiblePct <span class="token operator">=</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span>intersectionRatio <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"%"</span><span class="token punctuation">;</span>

    box<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".topLeft"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> visiblePct<span class="token punctuation">;</span>
    box<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".topRight"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> visiblePct<span class="token punctuation">;</span>
    box<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".bottomLeft"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> visiblePct<span class="token punctuation">;</span>
    box<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".bottomRight"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> visiblePct<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><iframe class="sample-code-frame" title="Exemple de seuil sample" id="frame_exemple_de_seuil" width="500" height="500" src="https://yari-demos.prod.mdn.mozit.cloud/fr/docs/Web/API/Intersection_Observer_API/_sample_.exemple_de_seuil.html" loading="lazy"></iframe></div><h2 id="interfaces"><a href="#interfaces" title="Permalink to Interfaces">Interfaces</a></h2><div><dl>
  <dt id="intersectionobserver"><a href="/fr/docs/Web/API/IntersectionObserver"><code>IntersectionObserver</code></a></dt>
  <dd>
    <p>L'interface principale pour l'API Intersection Observer. Elle fournit des m√©thodes pour cr√©er et manipuler un observateur qui peut observer n'importe quel nombre d'√©l√©ments cibles pour une m√™me configuration d'intersection. Chaque observateur peut observer de mani√®re asynchrone les √©volutions de l'intersection entre un ou plusieurs √©l√©ments cibles et un √©l√©ment anc√™tre partag√©, ou avec le <a href="/fr/docs/Glossary/Viewport">viewport</a> de leur <a href="/fr/docs/Web/API/Document"><code>Document</code></a> de niveau sup√©rieur. L'anc√™tre ou le <em>viewport</em> est d√©sign√© par le terme <strong>racine</strong>.</p>
  </dd>
  <dt id="intersectionobserverentry"><a href="/fr/docs/Web/API/IntersectionObserverEntry"><code>IntersectionObserverEntry</code></a></dt>
  <dd>
    <p>Cette interface d√©crit l'intersection d'un √©l√©ment cible sp√©cifique avec la racine de l'observateur √† un moment donn√©. Les objets de ce type ne peuvent √™tre obtenus que de deux fa√ßons : comme entr√©e du callback de votre <code>IntersectionObserver</code>, ou en appelant <a href="/fr/docs/Web/API/IntersectionObserver/takeRecords"><code>IntersectionObserver.takeRecords()</code></a>.</p>
  </dd>
</dl></div><h2 id="un_exemple_simple"><a href="#un_exemple_simple" title="Permalink to Un exemple simple">Un exemple simple</a></h2><div><p>Cet exemple simple va faire changer la couleur et la transparence d'un √©l√©ment cible √† mesure qu'il devient plus ou moins visible. Sur la page <em><a href="/en-US/docs/Web/API/Intersection_Observer_API/Timing_element_visibility" class="only-in-en-us" title="Currently only available in English (US)">Timing element visibility with the Intersection Observer API (en-US)</a></em>, vous pourrez trouver un exemple plus d√©velopp√© montrant comment chronom√©trer le temps durant lequel un √©l√©ment (par exemple, une publicit√©) a √©t√© visible √† l'√©cran, et comment r√©agir √† cette information en enregistrant des statistiques ou en mettant √† jour des √©l√©ments.</p></div><h3 id="html"><a href="#html" title="Permalink to HTML">HTML</a></h3><div><p>Le code HTML de cet exemple est tr√®s court. L'√©l√©ment principal est la bo√Æte que nous allons cibler (avec l'ing√©nieuse d√©nomination <code>"box"</code>) et certains contenus dans la bo√Æte.</p>
<div class="code-example"><pre class="brush: html notranslate"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    Bienvenue dans <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">&gt;</span></span>La Bo√Æte !<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></div><h3 id="css"><a href="#css" title="Permalink to CSS">CSS</a></h3><div><p>Le CSS n'est pas extr√™mement important dans le cadre de cet exemple ; il met en place l'√©l√©ment et √©tablit que les attributs <a href="/fr/docs/Web/CSS/background-color"><code>background-color</code></a> et <a href="/fr/docs/Web/CSS/border"><code>border</code></a> peuvent participer √† des <a href="/fr/docs/Web/CSS/CSS_Transitions">transitions CSS</a>. Nous utiliserons ces transitions pour faire √©voluer l'√©l√©ment de telle sorte qu'il devienne plus ou moins obscur.</p>
<div class="code-example"><pre class="brush: css notranslate"><code><span class="token selector">#box</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>40<span class="token punctuation">,</span> 40<span class="token punctuation">,</span> 190<span class="token punctuation">,</span> 255<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 4px solid <span class="token function">rgb</span><span class="token punctuation">(</span>20<span class="token punctuation">,</span> 20<span class="token punctuation">,</span> 120<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> background-color 1s<span class="token punctuation">,</span> border 1s<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 350px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 350px<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.vertical</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
  <span class="token property">font</span><span class="token punctuation">:</span> 32px <span class="token string">"Arial"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.extra</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 350px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 350px<span class="token punctuation">;</span>
  <span class="token property">margin-top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 4px solid <span class="token function">rgb</span><span class="token punctuation">(</span>20<span class="token punctuation">,</span> 20<span class="token punctuation">,</span> 120<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div><h3 id="javascript"><a href="#javascript" title="Permalink to JavaScript">JavaScript</a></h3><div><p>Enfin, jetons un ≈ìil au code JavaScript qui utilise l'API <em>Intersection Observer</em>.</p>
<h4 id="pr√©paration">Pr√©paration</h4>
<p>Premi√®rement, nous devons pr√©parer des variables et installer l'observateur.</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">var</span> numSteps <span class="token operator">=</span> <span class="token number">20.0</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> boxElement<span class="token punctuation">;</span>
<span class="token keyword">var</span> prevRatio <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> increasingColor <span class="token operator">=</span> <span class="token string">"rgba(40, 40, 190, ratio)"</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> decreasingColor <span class="token operator">=</span> <span class="token string">"rgba(190, 40, 40, ratio)"</span><span class="token punctuation">;</span>

<span class="token comment">// On met l'ensemble en place.</span>

window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"load"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  boxElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#box"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">createObserver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Les constantes et variables que nous pr√©parons sont :</p>
<dl>
  <dt id="numsteps"><code>numSteps</code></dt>
  <dd>
    <p>Une constante qui indique combien de paliers nous voulons avoir entre les ratios de visibilit√© de 0.0 et de 1.0.</p>
  </dd>
  <dt id="prevratio"><code>prevRatio</code></dt>
  <dd>
    <p>Cette variable sera utilis√©e pour m√©moriser quel √©tait le ratio de visibilit√© la derni√®re fois qu'un palier a √©t√© franchi ; ce qui nous permettra de savoir si l'√©l√©ment est en train de devenir plus ou moins visible.</p>
  </dd>
  <dt id="increasingcolor"><code>increasingColor</code></dt>
  <dd>
    <p>Une cha√Æne de caract√®res d√©finissant une couleur que nous appliquerons √† l'√©l√©ment cible quand le ratio de visibilit√© augmente. Le mot "ratio" dans cette cha√Æne de caract√®res sera remplac√© par la ratio de visibilit√© de la cible actuelle, de telle sorte que l'√©l√©ment, en plus de changer de couleur, deviendra de plus en plus opaque √† mesure qu'il deviendra obscur.</p>
  </dd>
  <dt id="decreasingcolor"><code>decreasingColor</code></dt>
  <dd>
    <p>De m√™me, il s'agit d'une cha√Æne de caract√®res qui d√©finit une couleur que nous appliquerons lorsque le ratio de visibilit√© diminue.</p>
  </dd>
</dl>
<p>On appelle <a href="/fr/docs/Web/API/EventTarget/addEventListener" title="Window.addEventListener()"><code>Window.addEventListener()</code></a> pour commencer √† √©couter l'√©v√®nement <a href="/fr_docs/Web/API/Window/load_event"><code>load</code></a> ; une fois que la page a finit de charger, on obtient une r√©f√©rence de l'√©l√©ment avec l'identifiant <code>"box"</code> gr√¢ce √† <a href="/fr/docs/Web/API/Document/querySelector" title="querySelector()"><code>querySelector()</code></a>, puis on appelle la m√©thode <code>createObserver()</code> que l'on va d√©finir un peu plus tard pour g√©rer la cr√©ation et l'installation de l'observateur d'intersection.</p>
<h4 id="cr√©ation_de_lobservateur_dintersection">Cr√©ation de l'observateur d'intersection</h4>
<p>La m√©thode <code>createObserver()</code> est appel√©e une fois que le chargement de la page est termin√© afin de g√©rer la cr√©ation du nouveau <a href="/fr/docs/Web/API/IntersectionObserver"><code>IntersectionObserver</code></a> et de commencer le processus d'observation de l'√©l√©ment cible.</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">function</span> <span class="token function">createObserver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> observer<span class="token punctuation">;</span>

  <span class="token keyword">var</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token literal-property property">rootMargin</span><span class="token operator">:</span> <span class="token string">"0px"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">threshold</span><span class="token operator">:</span> <span class="token function">buildThresholdList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntersectionObserver</span><span class="token punctuation">(</span>handleIntersect<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
  observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>boxElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>On commence par d√©finir un objet <code>options</code> contenant les param√®tres pour l'observateur. On voudra observer les √©volutions de la visibilit√© de l'√©l√©ment cible relativement au <em>viewport</em>, on initialise donc <code>root</code> avec <code>null</code>. Nous n'avons pas besoin de marge, donc l'espace de marge, <code>rootMargin</code>, est initialis√© √† <code>"0px"</code>. Ainsi, l'observateur surveillera les variations de l'intersection entre les fronti√®res de l'√©l√©ment cible et ceux du <em>viewport</em>, sans aucun espace ajout√© ou √¥t√©.</p>
<p>La liste de paliers de ratio de visibilit√©, <code>threshold</code>, est construite par la fonction <code>buildThresholdList()</code>. La liste de paliers est construite m√©caniquement dans cet exemple car il y en a un certain nombre, et que ce nombre a vocation √† √™tre ajustable.</p>
<p>Une fois que <code>options</code> est pr√™t, nous pouvons cr√©er le nouvel observateur, en appelant le constructeur <a href="/fr/docs/Web/API/IntersectionObserver/IntersectionObserver" title="IntersectionObserver()"><code>IntersectionObserver()</code></a> , en pr√©cisant une fonction <em>callback</em> √† appeler quand l'intersection franchit l'un de nos paliers, <code>handleIntersect()</code>, et notre ensemble d'options. On appelle alors <a href="/fr/docs/Web/API/IntersectionObserver/observe" title="observe()"><code>observe()</code></a> sur l'observateur retourn√©, afin de le passer √† l'√©l√©ment qui sera notre cible</p>
<p>On pourrait √©galement choisir de surveiller l'√©volution de la visibilit√© de l'intersection de plusieurs √©l√©ments par rapport au <em>viewport</em> en appelant <code>observer.observe()</code>pour chacun de ces √©l√©ments.</p>
<h4 id="construction_du_tableau_de_paliers_de_ratios">Construction du tableau de paliers de ratios</h4>
<p>La fonction<code>buildThresholdList()</code>, qui construit la liste de paliers, ressemble √† ceci :</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">function</span> <span class="token function">buildThresholdList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> thresholds <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">1.0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;=</span>numSteps<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> ratio <span class="token operator">=</span> i<span class="token operator">/</span>numSteps<span class="token punctuation">;</span>
    thresholds<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>ratio<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  thresholds<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> thresholds<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>Cela construit la tableau de paliers (chacun de ces paliers √©tant un ratio compris entre 0.0 et 1.0, ajout√© en poussant la valeur<code>i/numSteps</code>dans le tableau <code>thresholds</code> pour chaque entier <code>i</code> entre 1 et <code>numSteps</code>). On pousse √©galement 0 pour inclure cette valeur. Le r√©sultat, dans le cas o√π<code>numSteps</code>a sa valeur par d√©faut, est la liste de paliers suivante :</p>
<table class="standard-table">
  <tbody>
    <tr>
      <th>#</th>
      <th>Ratio</th>
      <th>#</th>
      <th>Ratio</th>
    </tr>
    <tr>
      <th>1</th>
      <td>0.05</td>
      <th>11</th>
      <td>0.55</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.1</td>
      <th>12</th>
      <td>0.6</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.15</td>
      <th>13</th>
      <td>0.65</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.2</td>
      <th>14</th>
      <td>0.7</td>
    </tr>
    <tr>
      <th>5</th>
      <td>0.25</td>
      <th>15</th>
      <td>0.75</td>
    </tr>
    <tr>
      <th>6</th>
      <td>0.3</td>
      <th>16</th>
      <td>0.8</td>
    </tr>
    <tr>
      <th>7</th>
      <td>0.35</td>
      <th>17</th>
      <td>0.85</td>
    </tr>
    <tr>
      <th>8</th>
      <td>0.4</td>
      <th>18</th>
      <td>0.9</td>
    </tr>
    <tr>
      <th>9</th>
      <td>0.45</td>
      <th>19</th>
      <td>0.95</td>
    </tr>
    <tr>
      <th>10</th>
      <td>0.5</td>
      <th>20</th>
      <td>1.0</td>
    </tr>
  </tbody>
</table>
<p>Bien sur, on pourrait coder en dur le tableau de paliers dans notre code, et c'est souvent ce que vous ferez. Cependant, cet exemple laisse un peu de place pour plus de configuration afin d'ajuster la granularit√©, par exemple.</p>
<h4 id="g√©rer_les_√©volutions_de_lintersection">G√©rer les √©volutions de l'intersection</h4>
<p>Quand le navigateur d√©tecte que l'√©l√©ment cible (dans notre cas, celui avec l'identifiant <code>"box"</code>) a √©t√© r√©v√©l√© ou cach√© de tel sorte que son ratio de visibilit√© franchit l'un des paliers de notre liste, il appelle la fonction <code>handleIntersect()</code>:</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">function</span> <span class="token function">handleIntersect</span><span class="token punctuation">(</span><span class="token parameter">entries<span class="token punctuation">,</span> observer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  entries<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">entry</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>entry<span class="token punctuation">.</span>intersectionRatio <span class="token operator">&gt;</span> prevRatio<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      entry<span class="token punctuation">.</span>target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> increasingColor<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"ratio"</span><span class="token punctuation">,</span> entry<span class="token punctuation">.</span>intersectionRatio<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      entry<span class="token punctuation">.</span>target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> decreasingColor<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">"ratio"</span><span class="token punctuation">,</span> entry<span class="token punctuation">.</span>intersectionRatio<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    prevRatio <span class="token operator">=</span> entry<span class="token punctuation">.</span>intersectionRatio<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>Pour chaque <a href="/fr/docs/Web/API/IntersectionObserverEntry"><code>IntersectionObserverEntry</code></a> dans la liste <code>entries</code>, on cherche si le <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/IntersectionObserverEntry/intersectionRatio"><code>intersectionRatio</code> <small>(en-US)</small></a> de l'entr√©e augmente; si c'est le cas, on donne √† la propri√©t√© CSS <a href="/fr/docs/Web/CSS/background-color"><code>background-color</code></a> de la cible la valeur <code>increasingColor</code> (pour rappel, c'est la cha√Æne de caract√®res <code>"rgba(40, 40, 190, ratio)"</code>), et on remplace le mot "ratio" avec le <code>intersectionRatio</code> de l'entr√©e. Le r√©sultat : non seulement la couleur change, mais la transparence de l'√©l√©ment change aussi. Quand le ratio d'intersection diminue, l'alpha de la couleur de fond diminue de m√™me, et l'√©l√©ment devient plus transparent.</p>
<p>De m√™me, si le <code>intersectionRatio</code> augmente, on utilise la cha√Æne de caract√®res <code>decreasingColor</code> et on y remplace le mot "ratio" avec <code>intersectionRatio</code> avant d'assigner le <code>background-color</code> de l'√©l√©ment cible.</p>
<p>Enfin, afin de surveiller si le ratio d'intersection augmente ou diminue, on garde en m√©moire le ratio actuel dans la variable <code>prevRatio</code>.</p></div><h3 id="r√©sultat"><a href="#r√©sultat" title="Permalink to R√©sultat">R√©sultat</a></h3><div><p>Vous pouvez retrouver le r√©sultat ci-dessous. D√©roulez cette page vers le haut ou vers le bas et observez comment l'apparence de la bo√Æte change au fur et √† mesure.</p><iframe class="sample-code-frame" title="Un exemple simple sample" id="frame_un_exemple_simple" width="400" height="400" src="https://yari-demos.prod.mdn.mozit.cloud/fr/docs/Web/API/Intersection_Observer_API/_sample_.un_exemple_simple.html" loading="lazy"></iframe>
<p>Vous pouvez consulter un exemple encore plus d√©taill√© sur l'article <em><a href="/en-US/docs/Web/API/Intersection_Observer_API/Timing_element_visibility" class="only-in-en-us" title="Currently only available in English (US)">Timing element visibility with the Intersection Observer API (en-US)</a></em>.</p></div><h2 id="sp√©cifications"><a href="#sp√©cifications" title="Permalink to Sp√©cifications">Sp√©cifications</a></h2><table class="standard-table"><thead><tr><th scope="col">Specification</th></tr></thead><tbody><tr><td><a href="https://w3c.github.io/IntersectionObserver/#intersection-observer-interface">Intersection Observer<!-- --> <br><small># <!-- -->intersection-observer-interface</small></a></td></tr></tbody></table><h2 id="compatibilit√©_des_navigateurs"><a href="#compatibilit√©_des_navigateurs" title="Permalink to Compatibilit√© des navigateurs">Compatibilit√© des navigateurs</a></h2><p>BCD tables only load in the browser</p><h2 id="voir_aussi"><a href="#voir_aussi" title="Permalink to Voir aussi">Voir aussi</a></h2><div><ul>
  <li><a href="https://github.com/WICG/IntersectionObserver/tree/gh-pages/polyfill" class="external" rel=" noopener">Une proth√®se (<em>polyfill</em>) pour l'API <em>Intersection Observer</em></a></li>
  <li><em><a href="/en-US/docs/Web/API/Intersection_Observer_API/Timing_element_visibility" class="only-in-en-us" title="Currently only available in English (US)">Timing element visibility with the Intersection Observer API (en-US)</a></em></li>
  <li><a href="/fr/docs/Web/API/IntersectionObserver"><code>IntersectionObserver</code></a> et <a href="/fr/docs/Web/API/IntersectionObserverEntry"><code>IntersectionObserverEntry</code></a></li>
</ul></div></article><aside class="metadata"><div class="metadata-content-container"><div id="on-github" class="on-github"><h3>Found a problem with this page?</h3><ul><li><a href="https://github.com/mdn/translated-content/edit/main/files/fr/web/api/intersection_observer_api/index.md" title="You're going to need to sign in to GitHub first (Opens in a new tab)" target="_blank" rel="noopener noreferrer">Edit on <b>GitHub</b></a></li><li><a href="https://github.com/mdn/translated-content/blob/main/files/fr/web/api/intersection_observer_api/index.md" title="Folder: fr/web/api/intersection_observer_api (Opens in a new tab)" target="_blank" rel="noopener noreferrer">Source on <b>GitHub</b></a></li><li><a href="https://github.com/mdn/translated-content/issues/new?body=MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Ffr%2Fdocs%2FWeb%2FAPI%2FIntersection_Observer_API%0A%0A%23%23%23%23+What+information+was+incorrect%2C+unhelpful%2C+or+incomplete%3F%0A%0A%0A%23%23%23%23+Specific+section+or+headline%3F%0A%0A%0A%23%23%23%23+What+did+you+expect+to+see%3F%0A%0A%0A%23%23%23%23+Did+you+test+this%3F+If+so%2C+how%3F%0A%0A%0A%3C%21--+Do+not+make+changes+below+this+line+--%3E%0A%3Cdetails%3E%0A%3Csummary%3EMDN+Content+page+report+details%3C%2Fsummary%3E%0A%0A*+Folder%3A+%60fr%2Fweb%2Fapi%2Fintersection_observer_api%60%0A*+MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Ffr%2Fdocs%2FWeb%2FAPI%2FIntersection_Observer_API%0A*+GitHub+URL%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Ftranslated-content%2Fblob%2Fmain%2Ffiles%2Ffr%2Fweb%2Fapi%2Fintersection_observer_api%2Findex.md%0A*+Last+commit%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Ftranslated-content%2Fcommit%2F921c46a374ab0a9f4cc809af0370f8c412e54701%0A*+Document+last+modified%3A+2022-10-01T03%3A41%3A16.000Z%0A%0A%3C%2Fdetails%3E&amp;title=Issue+with+%22Intersection+Observer+API%22%3A+%28short+summary+here+please%29&amp;labels=needs-triage%2Cl10n-fr" title="This will take you to https://github.com/mdn/content to file a new issue" target="_blank" rel="noopener noreferrer">Report a problem with this content on <b>GitHub</b></a></li><li>Want to fix the problem yourself? See<!-- --> <a href="https://github.com/mdn/content/blob/main/README.md" target="_blank" rel="noopener noreferrer">our Contribution guide</a>.</li></ul></div><p class="last-modified-date"><b>Last modified:</b> <time datetime="2022-10-01T03:41:16.000Z">Oct 1, 2022</time>,<!-- --> <a href="/fr/docs/Web/API/Intersection_Observer_API/contributors.txt">by MDN contributors</a></p><form class="language-menu"><fieldset id="select-language"><legend>Change your language</legend><label for="language-selector" class="visually-hidden">Select your preferred language</label> <select id="language-selector" name="language"><option selected="" value="fr">Fran√ßais</option><option value="en-US">English (US)</option><option value="es">Espa√±ol</option><option value="ja">Êó•Êú¨Ë™û</option><option value="ko">ÌïúÍµ≠Ïñ¥</option><option value="ru">–†—É—Å—Å–∫–∏–π</option><option value="zh-CN">‰∏≠Êñá (ÁÆÄ‰Ωì)</option></select> <button type="submit" class="button minimal">Change language</button></fieldset></form></div></aside></main><nav id="sidebar-quicklinks" class="sidebar"><h4>Related Topics</h4><div><ol><li><strong><a href="/fr/docs/Web/API/Intersection_Observer_API">Intersection Observer API</a></strong></li><li class="toggle"><details open=""><summary>Guides</summary><ol><li><a href="/fr/docs/Web/API/Intersection_Observer_API/Timing_element_visibility">Timing element visibility with the Intersection Observer API</a></li></ol></details></li><li class="toggle"><details open=""><summary>Interfaces</summary><ol><li><a href="/fr/docs/Web/API/IntersectionObserver"><code>IntersectionObserver</code></a></li><li><a href="/fr/docs/Web/API/IntersectionObserverEntry"><code>IntersectionObserverEntry</code></a></li></ol></details></li><li class="toggle"><details open=""><summary>Propri√©t√©s</summary><ol><li><a href="/fr/docs/Web/API/indexedDB"><code>indexedDB</code></a></li></ol></details></li></ol></div></nav></div><footer id="nav-footer" class="page-footer"><div class="content-container"><div class="page-footer-logo"><a href="/fr/" class="logo" aria-label="MDN Web Docs"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 451.74 135" fill="#fff"><path d="M7.14 8.35v111.06h111.05V8.35zm103.71 56c-.48.92-1 1.79-1.46 2.71a3.44 3.44 0 01-3.54 2 2.4 2.4 0 00-1.55.5c-1.37.9-2.76 1.79-4.18 2.63a7.33 7.33 0 01-6.35.34 29.71 29.71 0 00-10.63-2 11.7 11.7 0 00-9.46 4.31 14.84 14.84 0 00-2.13 4.29c-1.24 3.07-2.3 21.38-2.3 26.05 0 0-17.62-3.42-34.15-20.34l4.31-11.32h-13.5l9.76-10.35h-16.8l9.77-10.34H12.69L30.45 34a40.9 40.9 0 0119.77-10.83c7.1-1.22 8.93-.53 13.31.77l2.43.73.85.25 3.1.95a12.56 12.56 0 006.21.09 11.37 11.37 0 018.25 1 8.24 8.24 0 014.1 6.22 7.29 7.29 0 003.61 5.49 59.45 59.45 0 009.32 4.11c2.27.86 4.54 1.84 6.79 2.72a6.81 6.81 0 012.86 2.06 4.81 4.81 0 011.1 2.73c.14 2 .37 4 .47 6a15.24 15.24 0 01-1.77 8.03zM320.12 39.62a5.42 5.42 0 00-4.53 2.13 7.36 7.36 0 00-1.7 4.43v2.36a6.28 6.28 0 001.7 4.46 5.63 5.63 0 004.3 1.82 5.12 5.12 0 004.57-2.27A9.7 9.7 0 00326 47a8.11 8.11 0 00-1.67-5.52 5.36 5.36 0 00-4.21-1.86zM387.38 39.53a5.52 5.52 0 00-4.7 2.15 8.8 8.8 0 00-1.63 5.49 9.23 9.23 0 001.58 5.45 5.38 5.38 0 004.7 2.25 5.61 5.61 0 004.74-2.2 8.91 8.91 0 001.68-5.59 8.24 8.24 0 00-1.75-5.52 5.76 5.76 0 00-4.62-2.03zM299.47 41.35a4.34 4.34 0 00-4-1.92 4.55 4.55 0 00-3.89 1.73 8.37 8.37 0 00-1.58 4.17h10.48a6.3 6.3 0 00-1.01-3.98zM357.74 30.75H352v23.31h5.72q5.47 0 8.35-3t2.93-8.65q0-5.43-2.88-8.55t-8.38-3.11z"></path><path d="M121.55 8.35v70.8h323V8.35zm42.21 22.45h-4V54h3.68v3.73h-11.25V54h3.31V36.79h-.19l-9.63 19.12h-2.12l-10-19.4h-.19V54h3.45v3.73h-11.15V54h3.68V30.8h-4v-3.73H133l11.66 22.56h.19l11.18-22.56h7.7zm29.12 22.67q-4.11 4.28-11.38 4.28h-14.06v-3.69h3.73V30.75h-3.73v-3.68h13.83q7.59 0 11.66 4.29a15.4 15.4 0 014 11 15.33 15.33 0 01-4.05 11.11zm38.89-22.67h-3.68v27h-2.6L208.08 35h-.19v19h4.67v3.73h-12.22V54h3.49V30.8h-4v-3.73h7.08l16.9 22.09h.19V30.8h-4.58v-3.73h12.32zm43.8 27h-3.31l-7.83-23.18h-.19l-7.55 23.18h-3.35l-8.78-27h-2.65v-3.73H253v3.73h-3.87L255 50.71h.23l6.61-19.91H259v-3.73h11v3.73h-2.78l6.61 20.1h.23l5.43-20.1h-4.15v-3.73h11v3.73h-2.54zm26.71-1.51a9.66 9.66 0 01-6.42 2 10.2 10.2 0 01-7.41-2.74c-1.89-1.82-2.83-4.47-2.83-7.93a12.37 12.37 0 012.64-8.12 9 9 0 017.32-3.21 8.62 8.62 0 016.75 2.69 9.65 9.65 0 012.45 6.52 13.67 13.67 0 01-.28 2.69H290q.29 6.71 6.18 6.7a5.2 5.2 0 003.71-1.18 5.82 5.82 0 001.67-2.83l3.45.71a7.21 7.21 0 01-2.73 4.65zm25.77-1.63c-1.51 2.4-3.92 3.61-7.22 3.61s-5.84-1.29-7.22-3.87c0 .25-.1.82-.21 1.7s-.19 1.44-.22 1.7H309c.16-1 .31-2 .47-3.07a21.42 21.42 0 00.24-3.16v-23h-3.4v-3.3h7.55V40.9a9.76 9.76 0 012.67-3.28 7.33 7.33 0 014.74-1.4 8.48 8.48 0 016.5 2.78q2.55 2.74 2.55 7.74a14.6 14.6 0 01-2.27 7.87zm41.39-1.14q-4.11 4.28-11.37 4.28H344v-3.74h3.73V30.75H344v-3.68h13.83q7.59 0 11.66 4.29a15.41 15.41 0 014.06 11 15.34 15.34 0 01-4.11 11.11zm25.65 1.68a10.53 10.53 0 01-7.9 3.07 10 10 0 01-7.63-3 10.93 10.93 0 01-2.8-7.83 12.13 12.13 0 012.69-7.93q2.69-3.3 8-3.3t8 3.28a12 12 0 012.64 7.76 10.86 10.86 0 01-3 7.9zm22.61.57c-1.4 1.66-3.63 2.5-6.68 2.5a9.58 9.58 0 01-7.15-2.76q-2.72-2.76-2.71-7.91a12.25 12.25 0 012.69-8 9.17 9.17 0 017.5-3.28 15 15 0 013.82.48 10.37 10.37 0 013.5 1.65l.85 5.47-3.35.38-.76-3.54a8.07 8.07 0 00-4.11-1 4.9 4.9 0 00-4.39 2.15 9.93 9.93 0 00-1.41 5.55 8.9 8.9 0 001.5 5.38 5.23 5.23 0 004.44 2c2.92 0 4.67-1.7 5.23-5.1l3.5.71a10.34 10.34 0 01-2.47 5.27zm20.48.75a11.68 11.68 0 01-6.63 1.75 15.52 15.52 0 01-8.26-2.08L424 51l3.26.33-.1 2.74a7 7 0 002.06.66 12.63 12.63 0 002.19.19 8.68 8.68 0 003.66-.75 2.5 2.5 0 001.63-2.36 2.25 2.25 0 00-1.32-2.2 12.65 12.65 0 00-3.28-1 47.39 47.39 0 01-3.9-.82 7.5 7.5 0 01-3.25-1.7 4.67 4.67 0 01-1.33-3.66c0-2.36.88-4 2.62-4.91a12 12 0 015.6-1.37 15 15 0 014.08.55 16.65 16.65 0 013.47 1.39l.47 5.1-3.3.37-.48-3.3a9.5 9.5 0 00-4.06-.9 5.62 5.62 0 00-2.87.66 2.33 2.33 0 00-1.15 2.25 2.13 2.13 0 001.3 2.07 11.91 11.91 0 003.21.92 36.69 36.69 0 013.82.83 7.46 7.46 0 013.21 1.74 4.9 4.9 0 011.3 3.73 5.56 5.56 0 01-2.66 4.91z"></path><path d="M181.17 30.75h-5.71v23.31h5.71q5.47 0 8.36-3t2.88-8.61q0-5.43-2.88-8.55t-8.36-3.15zM121.63 119.32V81.74h114.91v37.58zM153.22 109h-2v-6.85a4.8 4.8 0 00-1.58-4 5.57 5.57 0 00-3.55-1.26 5 5 0 00-4.92 3.26 4.19 4.19 0 00-1.88-2.46 5.82 5.82 0 00-3-.8 4.89 4.89 0 00-4.56 2.56v-2.21h-6.28v3.26h2v8.5h-2v3.23h9.11V109h-2.86v-5.25a4.4 4.4 0 01.69-2.56 2.47 2.47 0 012.21-1q2.57 0 2.56 3.63v8.41h6.29V109h-2v-5.25a4.47 4.47 0 01.67-2.56 2.42 2.42 0 012.19-1q2.63 0 2.63 3.63v8.41h6.28zm9.88-12.07q-4 0-6 2.36a8.41 8.41 0 00-2 5.66 7.25 7.25 0 002.17 5.62 8 8 0 005.65 2 8.54 8.54 0 005.94-2.11 7.27 7.27 0 002.34-5.67 8.21 8.21 0 00-2-5.51q-2.07-2.34-6.1-2.34zm-.1 12.35a3 3 0 01-2.63-1.33 5.68 5.68 0 01-.9-3.26 5 5 0 011-3.28 3.23 3.23 0 012.61-1.18 3.5 3.5 0 012.59 1.08 4.56 4.56 0 011.07 3.31 5.21 5.21 0 01-1 3.41 3.33 3.33 0 01-2.74 1.25zm25-2.3l-3.39-.29-.7 2.32H179l8.32-9.54-.32-2.23h-13.19l-.53 5.25 3.16.34.67-2.36h4.65l-8.25 9.53.44 2.26h13.13zm7.62-9.74h-4.46v5.39h4.46zm0 9.61h-4.46v5.39h4.46zm13.54-17.49h-4.23l-6.48 22.88h4.22zm8.68 0h-4.23l-6.45 22.88h4.19zm15 22.51l-.07-2.26a1.22 1.22 0 01-.56.1c-.69 0-1-.39-1-1.16v-6.49a4.39 4.39 0 00-1.8-3.84 7 7 0 00-4.16-1.28 14.55 14.55 0 00-3.16.3 24.14 24.14 0 00-3.29 1.06l-.56 3.46 3.39.4.5-1.69a2.78 2.78 0 011.08-.37 11.3 11.3 0 011.25-.07c1.19 0 1.89.37 2.09 1.1a8.55 8.55 0 01.3 2.26v.5a8.91 8.91 0 00-1.18-.11h-1.21a12.64 12.64 0 00-4.81.88 3.53 3.53 0 00-2.18 3.64 3.66 3.66 0 001.48 3.33 5.63 5.63 0 003.11 1 4.67 4.67 0 003-.91 6.78 6.78 0 001.8-2 3 3 0 003.33 3 5.54 5.54 0 002.66-.85zm-9.25-2.32a1.69 1.69 0 01-1.36-.52 1.81 1.81 0 01-.43-1.21 1.67 1.67 0 01.86-1.68 4.63 4.63 0 012-.42 7.69 7.69 0 011.07.07l1.06.13a3.58 3.58 0 01-1.08 2.74 3.24 3.24 0 01-2.11.89z"></path></svg></a></div><ul class="link-list-mdn"><li><a href="/fr/docs/Web">Web Technologies</a></li><li><a href="/fr/docs/Learn">Learn Web Development</a></li><li><a href="/fr/docs/MDN/About">About MDN</a></li><li><a href="/fr/docs/MDN/Feedback">Feedback</a></li></ul><ul class="link-list-moz"><li><a href="https://www.mozilla.org/about/" target="_blank" rel="noopener noreferrer">About</a></li><li><a href="https://shop.spreadshirt.com/mdn-store/" target="_blank" rel="noopener noreferrer">MDN Web Docs Store</a></li><li><a href="https://www.mozilla.org/contact/" target="_blank" rel="noopener noreferrer">Contact Us</a></li><li><a href="https://www.mozilla.org/firefox/?utm_source=developer.mozilla.org&amp;utm_campaign=footer&amp;utm_medium=referral" target="_blank" rel="noopener noreferrer">Firefox</a></li></ul><div class="social social-mdn"><h4>MDN</h4><ul><li><a class="social-icon twitter" href="https://twitter.com/mozdevnet" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">MDN on Twitter</span></a></li><li><a class="social-icon github" href="https://github.com/mdn/" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">MDN on Github</span></a></li></ul></div><div class="social social-moz"><h4>Mozilla</h4><ul><li><a class="social-icon twitter" href="https://twitter.com/mozilla" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">Mozilla on Twitter</span></a></li><li><a class="social-icon instagram" href="https://www.instagram.com/mozillagram/" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">Mozilla on Instagram</span></a></li></ul></div><p id="license" class="footer-license">¬© 2005-<!-- -->2022<!-- --> Mozilla and individual contributors. Content is available under<!-- --> <a href="/docs/MDN/About#Copyrights_and_licenses">these licenses</a>.</p><ul class="footer-legal"><li><a href="https://www.mozilla.org/about/legal/terms/mozilla" target="_blank" rel="noopener noreferrer">Terms</a></li><li><a href="https://www.mozilla.org/privacy/websites/" target="_blank" rel="noopener noreferrer">Privacy</a></li><li><a href="https://www.mozilla.org/privacy/websites/#cookies" target="_blank" rel="noopener noreferrer">Cookies</a></li></ul></div></footer><div class="page-overlay hidden"></div></div><script type="application/json" id="hydration">{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"Intersection Observer API","mdn_url":"/fr/docs/Web/API/Intersection_Observer_API","locale":"fr","native":"Fran√ßais","sidebarHTML":"<ol><li><strong><a href=\"/fr/docs/Web/API/Intersection_Observer_API\">Intersection Observer API</a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Guides</summary><ol><li><a href=\"/fr/docs/Web/API/Intersection_Observer_API/Timing_element_visibility\">Timing element visibility with the Intersection Observer API</a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Interfaces</summary><ol><li><a href=\"/fr/docs/Web/API/IntersectionObserver\"><code>IntersectionObserver</code></a></li><li><a href=\"/fr/docs/Web/API/IntersectionObserverEntry\"><code>IntersectionObserverEntry</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Propri√©t√©s</summary><ol><li><a href=\"/fr/docs/Web/API/indexedDB\"><code>indexedDB</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<div class=\"notecard experimental\" id=\"sect1\"><p><strong>Experimental:</strong> <strong>Cette fonction est exp√©rimentale</strong><br>Puisque cette fonction est toujours en d√©veloppement dans certains navigateurs, veuillez consulter le <a href=\"#browser_compatibility\">tableau de compatibilit√©</a> pour les pr√©fixes √† utiliser selon les navigateurs.<br>Il convient de noter qu'une fonctionnalit√© exp√©rimentale peut voir sa syntaxe ou son comportement modifi√© dans le futur en fonction des √©volutions de la sp√©cification.</p></div>\n<p>L'API <em>Intersection Observer</em> permet d'observer de mani√®re asynchrone l'√©volution de l'intersection d'un √©l√©ment cible avec un √©l√©ment anc√™tre ou avec la zone d'affichage d'un document de niveau sup√©rieur.</p>\n<p>Historiquement, d√©tecter la visibilit√© d'un √©l√©ment, ou la visibilit√© relative de deux √©l√©ments l'un par rapport √† l'autre, a √©t√© une tache difficile, r√©solue de mani√®re peu rigoureuse et pouvant nuire √† la fluidit√© de la page consult√©e. Malheureusement, avec la maturation de la toile, ce genre d'information se r√©v√®le de plus en plus n√©cessaire. La donn√©e de l'intersection est requise pour de nombreuses raisons, telles que:</p>\n<ul>\n  <li>Le chargement paresseux d'images ou d'autres types de contenus au fur et √† mesure que la page d√©file.</li>\n  <li>L'implantation de ¬´ d√©filement infini ¬ª, o√π de plus en plus de contenu est charg√© tandis que l'utilisateur d√©file, afin qu'il n'ait pas √† changer de page.</li>\n  <li>Le signalement de la visibilit√© pour les publicit√©s afin de calculer les revenus publicitaires.</li>\n  <li>La d√©cision d'ex√©cuter ou non une t√¢che ou une animation selon que l'utilisateur va en voir le r√©sultat ou non.</li>\n</ul>\n<p>De par le pass√©, l'implantation de la d√©tection d'intersection impliquait des gestionnaires d'√©v√®nements et des boucles appelant des m√©thodes telles que <a href=\"/fr/docs/Web/API/Element/getBoundingClientRect\"><code>Element.getBoundingClientRect()</code></a> afin de g√©n√©rer les informations n√©cessaires pour chaque √©l√©ment concern√©. Comme la totalit√© du code est ex√©cut√© dans le <em>thread</em> principal, m√™me une seule de ces boucles peut causer des probl√®mes de performance. Si un site est rempli de ces tests, les choses peuvent vite devenir tr√®s moches.</p>\n<p>Prenons une page qui utilise un d√©filement infini. Mettons qu'elle utilise une biblioth√®que fournie par un √©diteur afin de g√©rer les publicit√©s plac√©es p√©riodiquement le long de la page, qu'elle a des graphiques anim√©s ici et l√†, et qu'elle utilise une biblioth√®que personnalis√©e pour dessiner des cases de notifications et ce genre de choses. Chacune de ces choses a ses propres proc√©dures de d√©tection d'intersection, toutes ex√©cut√©es dans le <em>thread</em> principal. L'auteur du site ne le r√©alise peut-√™tre m√™me pas, puisqu'il utilise deux biblioth√®ques dont il ne conna√Æt pas forc√©ment les d√©tails de fonctionnement. Quand l'utilisateur navigue sur la page, ces proc√©dures de d√©tection d'intersection r√©agissent constamment pendant l'ex√©cution du code de d√©filement, rendant l'exp√©rience frustrante pour l'utilisateur vis-√†-vis de son navigateur, du site Internet et de son ordinateur.</p>\n<p>L'API <em>Intersection Observer</em> permet d'int√©grer une fonction <em>callback</em> qui est ex√©cut√©e quand un √©l√©ment qu'on souhaite surveiller entre ou sort d'un autre √©l√©ment (ou du <em>viewport</em> (zone d'affichage)), ou quand la taille de leur intersection varie d'une quantit√© pr√©d√©termin√©e. Ainsi, les sites n'ont plus besoin de faire quoi que ce soit sur le <em>thread</em> principal pour surveiller ce genre d'intersection d'√©l√©ments, et le navigateur est libre de g√©rer la d√©tection d'intersection comme bon lui semble.</p>\n<p>Il y a une chose sur laquelle l'API <em>Intersection Observer</em> ne peut pas vous renseigner : le nombre de pixels qui intersectent, ou bien desquels il s'agit pr√©cis√©ment; par contre elle permet d'ordonner des actions souvent utiles telles que ¬´ si ils s'intersectent de plus de N%, alors faire ceci ¬ª.</p>"}},{"type":"prose","value":{"id":"concepts_et_utilisation_de_lobservateur_dintersections","title":"Concepts et utilisation de l'observateur d'intersections","isH3":false,"content":"<p>L'API <em>Intersection Observer</em> permet de mettre en place une fonction <em>callback</em> qui est appel√©e quand un √©l√©ment, appel√© la <strong>cible</strong>, intersecte ou bien le <em>viewport</em> (la zone d'affichage) ou bien un √©l√©ment pr√©d√©fini ; dans le cadre de cette API, nous l‚Äôappellerons <strong>l'√©l√©ment racine</strong> ou <strong>la racine</strong>. Typiquement, on voudra observer les variations de l'intersection par rapport √† la zone d'affichage du document (ce qui est fait en passant l'argument <code>null</code> au moment de d√©signer l'√©l√©ment racine). Que vous utilisiez la zone d'affichage ou un autre √©l√©ment comme racine, l'API fonctionne de la m√™me fa√ßon, en ex√©cutant une fonction <em>callback</em>, fournie au pr√©alable, lorsque la visibilit√© de l'√©l√©ment cible change de telle sorte qu'il atteint la quantit√© voulue d'intersection avec l'√©l√©ment racine.</p>\n<p>Le degr√© d'intersection entre l'√©l√©ment cible et sa racine est le <strong>ratio d'intersection</strong>. C'est une repr√©sentation du pourcentage de l'√©l√©ment cible qui est visible, exprim√©e sous la forme d'un nombre compris entre 0.0 et 1.0.</p>"}},{"type":"prose","value":{"id":"cr√©ation_dun_observateur_dintersection","title":"Cr√©ation d'un observateur d'intersection","isH3":true,"content":"<p>Cr√©ez l'observateur d'intersection en appelant son constructeur et en lui passant la r√©f√©rence d'une fonction <em>callback</em>. Cette fonction sera ex√©cut√©e quand un palier est franchi dans un sens ou dans un autre :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> options <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">root</span><span class=\"token operator\">:</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#scrollArea'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">rootMargin</span><span class=\"token operator\">:</span> <span class=\"token string\">'0px'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">threshold</span><span class=\"token operator\">:</span> <span class=\"token number\">1.0</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> observer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IntersectionObserver</span><span class=\"token punctuation\">(</span>callback<span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Un palier de 1.0 signifie que lorsque 100% de la cible est visible dans l'√©l√©ment d√©sign√© par l'option <code>root</code> (l'√©l√©ment racine), la fonction <em>callback</em> est invoqu√©e.</p>\n<h4 id=\"options_de_lobservateur_dintersection\">Options de l'observateur d'intersection</h4>\n<p>L'objet <code>options</code> qui est pass√© dans le constructeur <a href=\"/fr/docs/Web/API/IntersectionObserver/IntersectionObserver\" title=\"IntersectionObserver()\"><code>IntersectionObserver()</code></a> permet de contr√¥ler les circonstances selon lesquelles la fonction <em>callback</em> de l'observateur est invoqu√©e. Il poss√®de les champs suivants :</p>\n<dl>\n  <dt id=\"root\"><code>root</code></dt>\n  <dd>\n    <p>L'√©l√©ment qui est utilis√© comme zone d'affichage au moment d'√©valuer la visibilit√© de la cible. Il doit √™tre un anc√™tre de la cible. S'il n'est pas sp√©cifi√© ou s'il prend la valeur <code>null</code>, sa valeur par d√©faut est la zone d'affichage (le <em>viewport</em>) du navigateur.</p>\n  </dd>\n  <dt id=\"rootmargin\"><code>rootMargin</code></dt>\n  <dd>\n    <p>La marge autour de la racine. Peut prendre des valeurs similaires √† la propri√©t√© CSS <a href=\"/fr/docs/Web/CSS/margin\"><code>margin</code></a> par exemple \"<code>10px 20px 30px 40px\"</code> (top, right, bottom, left). Si l'√©l√©ment <code>root</code> a √©t√© sp√©cifi√©, les valeurs peuvent √™tre exprim√©es en pourcentages. Cet ensemble de valeur sert √† agrandir ou √† r√©duire chaque cot√© du cadre d√©limitant l'√©l√©ment racine avant d'√©valuer les intersections. Par d√©faut, toutes les valeurs prennent la valeur z√©ro.</p>\n  </dd>\n  <dt id=\"threshold\"><code>threshold</code></dt>\n  <dd>\n    <p>Soit un nombre, soit un tableau de nombre qui indique √† quel pourcentage de la visibilit√© de la cible la fonction <em>callback</em> de la cible doit √™tre ex√©cut√©. Si vous souhaitez seulement d√©tecter quand la visibilit√© franchit la barre des 50%, vous pouvez entrer la valeur 0.5. Si vous voulez que le <em>callback</em> soit ex√©cut√© chaque fois que la visibilit√© varie de 25% de plus, il faudra sp√©cifier le tableau [0, 0.25, 0.5, 0.75, 1]. La valeur par d√©faut est 0 (ce qui signifie que d√©s qu'un seul pixel sera visible, la fonction <em>callback</em> sera ex√©cut√©e). Une valeur de 1.0 signifie que le palier n'est consid√©r√© comme franchi qu'une fois que tous les pixels sont visibles.</p>\n  </dd>\n</dl>\n<h4 id=\"choisir_un_√©l√©ment_√†_observer\">Choisir un √©l√©ment √† observer</h4>\n<p>Une fois l'observateur cr√©√©, il faut lui donner un √©l√©ment cible √† observer :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> target <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#listItem'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nobserver<span class=\"token punctuation\">.</span><span class=\"token function\">observe</span><span class=\"token punctuation\">(</span>target<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Lorsque la cible franchit un palier sp√©cifi√© indiqu√© dans l'objet <code>IntersectionObserver</code>, la fonction <em>callback</em> est appel√©e. Le <em>callback</em> re√ßoit une liste d'objets <a href=\"/fr/docs/Web/API/IntersectionObserverEntry\"><code>IntersectionObserverEntry</code></a> ainsi que l'observateur :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> <span class=\"token function-variable function\">callback</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">entries<span class=\"token punctuation\">,</span> observer</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  entries<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">entry</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// chaque √©l√©ment de entries correspond √† une variation</span>\n    <span class=\"token comment\">// d'intersection pour un des √©l√©ments cible:</span>\n    <span class=\"token comment\">//   entry.boundingClientRect</span>\n    <span class=\"token comment\">//   entry.intersectionRatio</span>\n    <span class=\"token comment\">//   entry.intersectionRect</span>\n    <span class=\"token comment\">//   entry.isIntersecting</span>\n    <span class=\"token comment\">//   entry.rootBounds</span>\n    <span class=\"token comment\">//   entry.target</span>\n    <span class=\"token comment\">//   entry.time</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Soyez attentif au fait que la fonction <em>callback</em> est ex√©cut√©e dans le <em>thread</em> principal. Elle devrait √™tre ex√©cut√©e aussi rapidement que possible ; si une op√©ration prenant du temps a besoin d'√™tre effectu√©e, utilisez <a href=\"/fr/docs/Web/API/Window/requestIdleCallback\"><code>Window.requestIdleCallback()</code></a>.</p>\n<p>De plus, remarquez que si vous avez sp√©cifi√© l'option <code>root</code>, la cible doit √™tre un descendant de l'√©l√©ment <code>root</code>.</p>"}},{"type":"prose","value":{"id":"comment_est_calcul√©e_lintersection","title":"Comment est calcul√©e l'intersection","isH3":true,"content":"<p>Toutes les r√©gions envisag√©es par l'API <em>Intersection Observer</em> sont des rectangles; les √©l√©ments de forme irr√©guli√®re sont assimil√©es au plus petit rectangle qui contient l'√©l√©ment en question tout entier. De m√™me, si la partie visible d'un √©l√©ment n'est pas rectangulaire, le rectangle d'intersection de l'√©l√©ment sera le plus petit rectangle qui contient toute la partie visible de l'√©l√©ment.</p>\n<p>Il est utile de comprendre comment les diff√©rentes propri√©t√©s fournies par <a href=\"/fr/docs/Web/API/IntersectionObserverEntry\"><code>IntersectionObserverEntry</code></a> d√©crivent une intersection.</p>\n<h4 id=\"la_racine_de_lintersection_et_la_marge_de_la_racine\">La racine de l'intersection et la marge de la racine</h4>\n<p>Avant de pouvoir √©tudier l'intersection d'un √©l√©ment avec un conteneur, nous devons savoir quel est ce conteneur. Ce conteneur est <strong>la racine de l'intersection</strong>, ou <strong>√©l√©ment racine</strong>. Ce peut √™tre soit un √©l√©ment du document qui est un anc√™tre de l'√©l√©ment √† observer, ou <code>null</code> si l'on souhaite utiliser la zone d'affichage (<em>viewport</em>) du document comme conteneur.</p>\n<p>Le rectangle utilis√© pour d√©limiter la racine de l'intersection peut √™tre ajust√© en ajustant la <strong>marge de la racine</strong>, c'est-√†-dire le champ <code>rootMargin</code>, lors de la cr√©ation de <a href=\"/fr/docs/Web/API/IntersectionObserver\"><code>IntersectionObserver</code></a>. La valeur de <code>rootMargin</code> d√©finit le d√©calage ajout√© √† chaque cot√© du cadre d√©limitant la racine de l'intersection pour cr√©er le cadre final de la racine de l'intersection (accessible via <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IntersectionObserverEntry/rootBounds\"><code>IntersectionObserverEntry.rootBounds</code> <small>(en-US)</small></a> quand la fonction <em>callback</em> est ex√©cut√©e).</p>\n<h4 id=\"paliers\">Paliers</h4>\n<p>Plut√¥t que de rapporter le moindre changement de variation de la visibilit√© d'un √©l√©ment, l'API Intersection Observer utilise des <strong>paliers</strong>. Lors de la cr√©ation d'un observateur, vous pouvez fournir une ou plusieurs valeurs num√©riques qui repr√©sentent des pourcentages de visibilit√© de l'√©l√©ment cible. Dans ce cas, l'API ne rapportent que les changements de visibilit√© qui franchissent ces paliers.</p>\n<p>Par exemple, si vous voulez √™tre inform√© √† chaque fois que la visibilit√© d'une cible passe au dessus ou en dessous de chaque multiple de 25%, il faudra fournir le tableau [0, 0.25, 0.5, 0.75, 1] comme liste de paliers lors de la cr√©ation de l'observateur. Vous pouvez pr√©ciser dans quelle direction a chang√© la visibilit√© (c'est-√†-dire, si l'√©l√©ment est devenu plus ou moins visible) en lisant la valeur de la propri√©t√© <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IntersectionObserverEntry/isIntersecting\"><code>isIntersecting</code> <small>(en-US)</small></a> du <a href=\"/fr/docs/Web/API/IntersectionObserverEntry\"><code>IntersectionObserverEntry</code></a> pass√© dans la fonction <code>callback</code> lors du changement de visibilit√©. Si <code>isIntersecting</code> est <code>true</code>, l'√©l√©ment cible est devenu au moins aussi visible quand le palier a √©t√© franchi. Si elle vaut <code>false</code>, la cible n'est plus aussi visible que le palier sp√©cifi√©.</p>\n<p>Pour mieux comprendre comment fonctionnent les paliers, faites d√©filer la bo√Æte ci-dessous. A l'int√©rieur, chacune des bo√Ætes color√©es affiche son pourcentage de visibilit√© sur chacun de ses quatre coins, de telle sorte que l'on peut voir ces ratios changer tandis que le conteneur d√©file. Chaque bo√Æte a un ensemble diff√©rent de paliers :</p>\n<ul>\n  <li>La premi√®re bo√Æte a un palier pour chaque point de pourcentage de visibilit√©; c'est √† dire que le tableau <a href=\"/fr/docs/Web/API/IntersectionObserver/thresholds\"><code>IntersectionObserver.thresholds</code></a> est <code>[0.00, 0.01, 0.02, ..., 0.99, 1.00]</code>.</li>\n  <li>La deuxi√®me bo√Æte a un unique palier, √† 50%.</li>\n  <li>La troisi√®me bo√Æte a des paliers tous les 10% de visibilit√© (0%, 10%, 20%, etc.).</li>\n  <li>La derni√®re bo√Æte a des paliers tous les 25%.</li>\n</ul>\n<h5 id=\"exemple_de_seuil\">Exemple de seuil</h5>\n<div class=\"code-example\"><pre class=\"brush: html hidden notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>boxTemplate<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>sampleBox<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>label topLeft<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>label topRight<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>label bottomLeft<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>label bottomRight<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">&gt;</span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>main</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>contents<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrapper<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>main</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<div class=\"code-example\"><pre class=\"brush: css hidden notranslate\"><code><span class=\"token selector\">.contents</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> absolute<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 700px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 1725px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.wrapper</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> relative<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">top</span><span class=\"token punctuation\">:</span> 600px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.sampleBox</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> relative<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">left</span><span class=\"token punctuation\">:</span> 175px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 150px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rgb</span><span class=\"token punctuation\">(</span>245<span class=\"token punctuation\">,</span> 170<span class=\"token punctuation\">,</span> 140<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 2px solid <span class=\"token function\">rgb</span><span class=\"token punctuation\">(</span>201<span class=\"token punctuation\">,</span> 126<span class=\"token punctuation\">,</span> 17<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 4px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin-bottom</span><span class=\"token punctuation\">:</span> 6px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">#box1</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 200px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">#box2</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 75px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">#box3</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 150px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">#box4</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 100px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.label</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">font</span><span class=\"token punctuation\">:</span> 14px <span class=\"token string\">\"Open Sans\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Arial\"</span><span class=\"token punctuation\">,</span> sans-serif<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> absolute<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rgba</span><span class=\"token punctuation\">(</span>255<span class=\"token punctuation\">,</span> 255<span class=\"token punctuation\">,</span> 255<span class=\"token punctuation\">,</span> 0.7<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 1px solid <span class=\"token function\">rgba</span><span class=\"token punctuation\">(</span>0<span class=\"token punctuation\">,</span> 0<span class=\"token punctuation\">,</span> 0<span class=\"token punctuation\">,</span> 0.7<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 3em<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 18px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 2px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">text-align</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.topLeft</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">left</span><span class=\"token punctuation\">:</span> 2px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">top</span><span class=\"token punctuation\">:</span> 2px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.topRight</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">right</span><span class=\"token punctuation\">:</span> 2px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">top</span><span class=\"token punctuation\">:</span> 2px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.bottomLeft</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">bottom</span><span class=\"token punctuation\">:</span> 2px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">left</span><span class=\"token punctuation\">:</span> 2px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.bottomRight</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">bottom</span><span class=\"token punctuation\">:</span> 2px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">right</span><span class=\"token punctuation\">:</span> 2px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<div class=\"code-example\"><pre class=\"brush: js hidden notranslate\"><code><span class=\"token keyword\">let</span> observers <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">startup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">startup</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> wrapper <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".wrapper\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Options for the observers</span>\n\n  <span class=\"token keyword\">let</span> observerOptions <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">root</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">rootMargin</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0px\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">threshold</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// An array of threshold sets for each of the boxes. The</span>\n  <span class=\"token comment\">// first box's thresholds are set programmatically</span>\n  <span class=\"token comment\">// since there will be so many of them (for each percentage</span>\n  <span class=\"token comment\">// point).</span>\n\n  <span class=\"token keyword\">let</span> thresholdSets <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.7</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.8</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.9</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.25</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.75</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">&lt;=</span><span class=\"token number\">1.0</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">+=</span> <span class=\"token number\">0.1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    thresholdSets<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// Add each box, creating a new observer for each</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">&lt;</span><span class=\"token number\">4</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> template <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#boxTemplate\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">.</span><span class=\"token function\">cloneNode</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> boxID <span class=\"token operator\">=</span> <span class=\"token string\">\"box\"</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>i<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    template<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".sampleBox\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>id <span class=\"token operator\">=</span> boxID<span class=\"token punctuation\">;</span>\n    wrapper<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">importNode</span><span class=\"token punctuation\">(</span>template<span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Set up the observer for this box</span>\n\n    observerOptions<span class=\"token punctuation\">.</span>threshold <span class=\"token operator\">=</span> thresholdSets<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    observers<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IntersectionObserver</span><span class=\"token punctuation\">(</span>intersectionCallback<span class=\"token punctuation\">,</span> observerOptions<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    observers<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">observe</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#\"</span> <span class=\"token operator\">+</span> boxID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">// Scroll to the starting position</span>\n\n  <span class=\"token comment\">//wrapper.scrollIntoView({</span>\n  <span class=\"token comment\">//  block: \"start\",</span>\n  <span class=\"token comment\">//});</span>\n  document<span class=\"token punctuation\">.</span>scrollingElement<span class=\"token punctuation\">.</span>scrollTop <span class=\"token operator\">=</span> wrapper<span class=\"token punctuation\">.</span>firstChild<span class=\"token punctuation\">.</span><span class=\"token function\">getBoundingClientRect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>top <span class=\"token operator\">+</span> window<span class=\"token punctuation\">.</span>scrollY<span class=\"token punctuation\">;</span>\n  document<span class=\"token punctuation\">.</span>scrollingElement<span class=\"token punctuation\">.</span>scrollLeft <span class=\"token operator\">=</span> <span class=\"token number\">750</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">intersectionCallback</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">entries</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  entries<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">entry</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> box <span class=\"token operator\">=</span> entry<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> visiblePct <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span>entry<span class=\"token punctuation\">.</span>intersectionRatio <span class=\"token operator\">*</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"%\"</span><span class=\"token punctuation\">;</span>\n\n    box<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".topLeft\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> visiblePct<span class=\"token punctuation\">;</span>\n    box<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".topRight\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> visiblePct<span class=\"token punctuation\">;</span>\n    box<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".bottomLeft\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> visiblePct<span class=\"token punctuation\">;</span>\n    box<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".bottomRight\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> visiblePct<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div><iframe class=\"sample-code-frame\" title=\"Exemple de seuil sample\" id=\"frame_exemple_de_seuil\" width=\"500\" height=\"500\" src=\"https://yari-demos.prod.mdn.mozit.cloud/fr/docs/Web/API/Intersection_Observer_API/_sample_.exemple_de_seuil.html\" loading=\"lazy\"></iframe>"}},{"type":"prose","value":{"id":"interfaces","title":"Interfaces","isH3":false,"content":"<dl>\n  <dt id=\"intersectionobserver\"><a href=\"/fr/docs/Web/API/IntersectionObserver\"><code>IntersectionObserver</code></a></dt>\n  <dd>\n    <p>L'interface principale pour l'API Intersection Observer. Elle fournit des m√©thodes pour cr√©er et manipuler un observateur qui peut observer n'importe quel nombre d'√©l√©ments cibles pour une m√™me configuration d'intersection. Chaque observateur peut observer de mani√®re asynchrone les √©volutions de l'intersection entre un ou plusieurs √©l√©ments cibles et un √©l√©ment anc√™tre partag√©, ou avec le <a href=\"/fr/docs/Glossary/Viewport\">viewport</a> de leur <a href=\"/fr/docs/Web/API/Document\"><code>Document</code></a> de niveau sup√©rieur. L'anc√™tre ou le <em>viewport</em> est d√©sign√© par le terme <strong>racine</strong>.</p>\n  </dd>\n  <dt id=\"intersectionobserverentry\"><a href=\"/fr/docs/Web/API/IntersectionObserverEntry\"><code>IntersectionObserverEntry</code></a></dt>\n  <dd>\n    <p>Cette interface d√©crit l'intersection d'un √©l√©ment cible sp√©cifique avec la racine de l'observateur √† un moment donn√©. Les objets de ce type ne peuvent √™tre obtenus que de deux fa√ßons : comme entr√©e du callback de votre <code>IntersectionObserver</code>, ou en appelant <a href=\"/fr/docs/Web/API/IntersectionObserver/takeRecords\"><code>IntersectionObserver.takeRecords()</code></a>.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"un_exemple_simple","title":"Un exemple simple","isH3":false,"content":"<p>Cet exemple simple va faire changer la couleur et la transparence d'un √©l√©ment cible √† mesure qu'il devient plus ou moins visible. Sur la page <em><a href=\"/en-US/docs/Web/API/Intersection_Observer_API/Timing_element_visibility\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">Timing element visibility with the Intersection Observer API (en-US)</a></em>, vous pourrez trouver un exemple plus d√©velopp√© montrant comment chronom√©trer le temps durant lequel un √©l√©ment (par exemple, une publicit√©) a √©t√© visible √† l'√©cran, et comment r√©agir √† cette information en enregistrant des statistiques ou en mettant √† jour des √©l√©ments.</p>"}},{"type":"prose","value":{"id":"html","title":"HTML","isH3":true,"content":"<p>Le code HTML de cet exemple est tr√®s court. L'√©l√©ment principal est la bo√Æte que nous allons cibler (avec l'ing√©nieuse d√©nomination <code>\"box\"</code>) et certains contenus dans la bo√Æte.</p>\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>box<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>vertical<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n    Bienvenue dans <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>strong</span><span class=\"token punctuation\">&gt;</span></span>La Bo√Æte !<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>strong</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"css","title":"CSS","isH3":true,"content":"<p>Le CSS n'est pas extr√™mement important dans le cadre de cet exemple ; il met en place l'√©l√©ment et √©tablit que les attributs <a href=\"/fr/docs/Web/CSS/background-color\"><code>background-color</code></a> et <a href=\"/fr/docs/Web/CSS/border\"><code>border</code></a> peuvent participer √† des <a href=\"/fr/docs/Web/CSS/CSS_Transitions\">transitions CSS</a>. Nous utiliserons ces transitions pour faire √©voluer l'√©l√©ment de telle sorte qu'il devienne plus ou moins obscur.</p>\n<div class=\"code-example\"><pre class=\"brush: css notranslate\"><code><span class=\"token selector\">#box</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rgba</span><span class=\"token punctuation\">(</span>40<span class=\"token punctuation\">,</span> 40<span class=\"token punctuation\">,</span> 190<span class=\"token punctuation\">,</span> 255<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 4px solid <span class=\"token function\">rgb</span><span class=\"token punctuation\">(</span>20<span class=\"token punctuation\">,</span> 20<span class=\"token punctuation\">,</span> 120<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">transition</span><span class=\"token punctuation\">:</span> background-color 1s<span class=\"token punctuation\">,</span> border 1s<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 350px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 350px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> flex<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">align-items</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">justify-content</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 20px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.vertical</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> white<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">font</span><span class=\"token punctuation\">:</span> 32px <span class=\"token string\">\"Arial\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.extra</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 350px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 350px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin-top</span><span class=\"token punctuation\">:</span> 10px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 4px solid <span class=\"token function\">rgb</span><span class=\"token punctuation\">(</span>20<span class=\"token punctuation\">,</span> 20<span class=\"token punctuation\">,</span> 120<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">text-align</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 20px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"javascript","title":"JavaScript","isH3":true,"content":"<p>Enfin, jetons un ≈ìil au code JavaScript qui utilise l'API <em>Intersection Observer</em>.</p>\n<h4 id=\"pr√©paration\">Pr√©paration</h4>\n<p>Premi√®rement, nous devons pr√©parer des variables et installer l'observateur.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> numSteps <span class=\"token operator\">=</span> <span class=\"token number\">20.0</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> boxElement<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> prevRatio <span class=\"token operator\">=</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> increasingColor <span class=\"token operator\">=</span> <span class=\"token string\">\"rgba(40, 40, 190, ratio)\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> decreasingColor <span class=\"token operator\">=</span> <span class=\"token string\">\"rgba(190, 40, 40, ratio)\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// On met l'ensemble en place.</span>\n\nwindow<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"load\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  boxElement <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#box\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">createObserver</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Les constantes et variables que nous pr√©parons sont :</p>\n<dl>\n  <dt id=\"numsteps\"><code>numSteps</code></dt>\n  <dd>\n    <p>Une constante qui indique combien de paliers nous voulons avoir entre les ratios de visibilit√© de 0.0 et de 1.0.</p>\n  </dd>\n  <dt id=\"prevratio\"><code>prevRatio</code></dt>\n  <dd>\n    <p>Cette variable sera utilis√©e pour m√©moriser quel √©tait le ratio de visibilit√© la derni√®re fois qu'un palier a √©t√© franchi ; ce qui nous permettra de savoir si l'√©l√©ment est en train de devenir plus ou moins visible.</p>\n  </dd>\n  <dt id=\"increasingcolor\"><code>increasingColor</code></dt>\n  <dd>\n    <p>Une cha√Æne de caract√®res d√©finissant une couleur que nous appliquerons √† l'√©l√©ment cible quand le ratio de visibilit√© augmente. Le mot \"ratio\" dans cette cha√Æne de caract√®res sera remplac√© par la ratio de visibilit√© de la cible actuelle, de telle sorte que l'√©l√©ment, en plus de changer de couleur, deviendra de plus en plus opaque √† mesure qu'il deviendra obscur.</p>\n  </dd>\n  <dt id=\"decreasingcolor\"><code>decreasingColor</code></dt>\n  <dd>\n    <p>De m√™me, il s'agit d'une cha√Æne de caract√®res qui d√©finit une couleur que nous appliquerons lorsque le ratio de visibilit√© diminue.</p>\n  </dd>\n</dl>\n<p>On appelle <a href=\"/fr/docs/Web/API/EventTarget/addEventListener\" title=\"Window.addEventListener()\"><code>Window.addEventListener()</code></a> pour commencer √† √©couter l'√©v√®nement <a href=\"/fr_docs/Web/API/Window/load_event\"><code>load</code></a> ; une fois que la page a finit de charger, on obtient une r√©f√©rence de l'√©l√©ment avec l'identifiant <code>\"box\"</code> gr√¢ce √† <a href=\"/fr/docs/Web/API/Document/querySelector\" title=\"querySelector()\"><code>querySelector()</code></a>, puis on appelle la m√©thode <code>createObserver()</code> que l'on va d√©finir un peu plus tard pour g√©rer la cr√©ation et l'installation de l'observateur d'intersection.</p>\n<h4 id=\"cr√©ation_de_lobservateur_dintersection\">Cr√©ation de l'observateur d'intersection</h4>\n<p>La m√©thode <code>createObserver()</code> est appel√©e une fois que le chargement de la page est termin√© afin de g√©rer la cr√©ation du nouveau <a href=\"/fr/docs/Web/API/IntersectionObserver\"><code>IntersectionObserver</code></a> et de commencer le processus d'observation de l'√©l√©ment cible.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">createObserver</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> observer<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">var</span> options <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">root</span><span class=\"token operator\">:</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">rootMargin</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0px\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">threshold</span><span class=\"token operator\">:</span> <span class=\"token function\">buildThresholdList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  observer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IntersectionObserver</span><span class=\"token punctuation\">(</span>handleIntersect<span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  observer<span class=\"token punctuation\">.</span><span class=\"token function\">observe</span><span class=\"token punctuation\">(</span>boxElement<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>On commence par d√©finir un objet <code>options</code> contenant les param√®tres pour l'observateur. On voudra observer les √©volutions de la visibilit√© de l'√©l√©ment cible relativement au <em>viewport</em>, on initialise donc <code>root</code> avec <code>null</code>. Nous n'avons pas besoin de marge, donc l'espace de marge, <code>rootMargin</code>, est initialis√© √† <code>\"0px\"</code>. Ainsi, l'observateur surveillera les variations de l'intersection entre les fronti√®res de l'√©l√©ment cible et ceux du <em>viewport</em>, sans aucun espace ajout√© ou √¥t√©.</p>\n<p>La liste de paliers de ratio de visibilit√©, <code>threshold</code>, est construite par la fonction <code>buildThresholdList()</code>. La liste de paliers est construite m√©caniquement dans cet exemple car il y en a un certain nombre, et que ce nombre a vocation √† √™tre ajustable.</p>\n<p>Une fois que <code>options</code> est pr√™t, nous pouvons cr√©er le nouvel observateur, en appelant le constructeur <a href=\"/fr/docs/Web/API/IntersectionObserver/IntersectionObserver\" title=\"IntersectionObserver()\"><code>IntersectionObserver()</code></a> , en pr√©cisant une fonction <em>callback</em> √† appeler quand l'intersection franchit l'un de nos paliers, <code>handleIntersect()</code>, et notre ensemble d'options. On appelle alors <a href=\"/fr/docs/Web/API/IntersectionObserver/observe\" title=\"observe()\"><code>observe()</code></a> sur l'observateur retourn√©, afin de le passer √† l'√©l√©ment qui sera notre cible</p>\n<p>On pourrait √©galement choisir de surveiller l'√©volution de la visibilit√© de l'intersection de plusieurs √©l√©ments par rapport au <em>viewport</em> en appelant <code>observer.observe()</code>pour chacun de ces √©l√©ments.</p>\n<h4 id=\"construction_du_tableau_de_paliers_de_ratios\">Construction du tableau de paliers de ratios</h4>\n<p>La fonction<code>buildThresholdList()</code>, qui construit la liste de paliers, ressemble √† ceci :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">buildThresholdList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> thresholds <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i<span class=\"token operator\">=</span><span class=\"token number\">1.0</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">&lt;=</span>numSteps<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> ratio <span class=\"token operator\">=</span> i<span class=\"token operator\">/</span>numSteps<span class=\"token punctuation\">;</span>\n    thresholds<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>ratio<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  thresholds<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> thresholds<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Cela construit la tableau de paliers (chacun de ces paliers √©tant un ratio compris entre 0.0 et 1.0, ajout√© en poussant la valeur<code>i/numSteps</code>dans le tableau <code>thresholds</code> pour chaque entier <code>i</code> entre 1 et <code>numSteps</code>). On pousse √©galement 0 pour inclure cette valeur. Le r√©sultat, dans le cas o√π<code>numSteps</code>a sa valeur par d√©faut, est la liste de paliers suivante :</p>\n<table class=\"standard-table\">\n  <tbody>\n    <tr>\n      <th>#</th>\n      <th>Ratio</th>\n      <th>#</th>\n      <th>Ratio</th>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>0.05</td>\n      <th>11</th>\n      <td>0.55</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>0.1</td>\n      <th>12</th>\n      <td>0.6</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>0.15</td>\n      <th>13</th>\n      <td>0.65</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>0.2</td>\n      <th>14</th>\n      <td>0.7</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>0.25</td>\n      <th>15</th>\n      <td>0.75</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>0.3</td>\n      <th>16</th>\n      <td>0.8</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>0.35</td>\n      <th>17</th>\n      <td>0.85</td>\n    </tr>\n    <tr>\n      <th>8</th>\n      <td>0.4</td>\n      <th>18</th>\n      <td>0.9</td>\n    </tr>\n    <tr>\n      <th>9</th>\n      <td>0.45</td>\n      <th>19</th>\n      <td>0.95</td>\n    </tr>\n    <tr>\n      <th>10</th>\n      <td>0.5</td>\n      <th>20</th>\n      <td>1.0</td>\n    </tr>\n  </tbody>\n</table>\n<p>Bien sur, on pourrait coder en dur le tableau de paliers dans notre code, et c'est souvent ce que vous ferez. Cependant, cet exemple laisse un peu de place pour plus de configuration afin d'ajuster la granularit√©, par exemple.</p>\n<h4 id=\"g√©rer_les_√©volutions_de_lintersection\">G√©rer les √©volutions de l'intersection</h4>\n<p>Quand le navigateur d√©tecte que l'√©l√©ment cible (dans notre cas, celui avec l'identifiant <code>\"box\"</code>) a √©t√© r√©v√©l√© ou cach√© de tel sorte que son ratio de visibilit√© franchit l'un des paliers de notre liste, il appelle la fonction <code>handleIntersect()</code>:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">handleIntersect</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">entries<span class=\"token punctuation\">,</span> observer</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  entries<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">entry</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>entry<span class=\"token punctuation\">.</span>intersectionRatio <span class=\"token operator\">&gt;</span> prevRatio<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      entry<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>backgroundColor <span class=\"token operator\">=</span> increasingColor<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ratio\"</span><span class=\"token punctuation\">,</span> entry<span class=\"token punctuation\">.</span>intersectionRatio<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      entry<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>backgroundColor <span class=\"token operator\">=</span> decreasingColor<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ratio\"</span><span class=\"token punctuation\">,</span> entry<span class=\"token punctuation\">.</span>intersectionRatio<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    prevRatio <span class=\"token operator\">=</span> entry<span class=\"token punctuation\">.</span>intersectionRatio<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Pour chaque <a href=\"/fr/docs/Web/API/IntersectionObserverEntry\"><code>IntersectionObserverEntry</code></a> dans la liste <code>entries</code>, on cherche si le <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IntersectionObserverEntry/intersectionRatio\"><code>intersectionRatio</code> <small>(en-US)</small></a> de l'entr√©e augmente; si c'est le cas, on donne √† la propri√©t√© CSS <a href=\"/fr/docs/Web/CSS/background-color\"><code>background-color</code></a> de la cible la valeur <code>increasingColor</code> (pour rappel, c'est la cha√Æne de caract√®res <code>\"rgba(40, 40, 190, ratio)\"</code>), et on remplace le mot \"ratio\" avec le <code>intersectionRatio</code> de l'entr√©e. Le r√©sultat : non seulement la couleur change, mais la transparence de l'√©l√©ment change aussi. Quand le ratio d'intersection diminue, l'alpha de la couleur de fond diminue de m√™me, et l'√©l√©ment devient plus transparent.</p>\n<p>De m√™me, si le <code>intersectionRatio</code> augmente, on utilise la cha√Æne de caract√®res <code>decreasingColor</code> et on y remplace le mot \"ratio\" avec <code>intersectionRatio</code> avant d'assigner le <code>background-color</code> de l'√©l√©ment cible.</p>\n<p>Enfin, afin de surveiller si le ratio d'intersection augmente ou diminue, on garde en m√©moire le ratio actuel dans la variable <code>prevRatio</code>.</p>"}},{"type":"prose","value":{"id":"r√©sultat","title":"R√©sultat","isH3":true,"content":"<p>Vous pouvez retrouver le r√©sultat ci-dessous. D√©roulez cette page vers le haut ou vers le bas et observez comment l'apparence de la bo√Æte change au fur et √† mesure.</p><iframe class=\"sample-code-frame\" title=\"Un exemple simple sample\" id=\"frame_un_exemple_simple\" width=\"400\" height=\"400\" src=\"https://yari-demos.prod.mdn.mozit.cloud/fr/docs/Web/API/Intersection_Observer_API/_sample_.un_exemple_simple.html\" loading=\"lazy\"></iframe>\n<p>Vous pouvez consulter un exemple encore plus d√©taill√© sur l'article <em><a href=\"/en-US/docs/Web/API/Intersection_Observer_API/Timing_element_visibility\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">Timing element visibility with the Intersection Observer API (en-US)</a></em>.</p>"}},{"type":"specifications","value":{"title":"Sp√©cifications","id":"sp√©cifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://w3c.github.io/IntersectionObserver/#intersection-observer-interface","title":"Intersection Observer"}],"query":"api.IntersectionObserver"}},{"type":"browser_compatibility","value":{"title":"Compatibilit√© des navigateurs","id":"compatibilit√©_des_navigateurs","isH3":false,"query":"api.IntersectionObserver","dataURL":"/fr/docs/Web/API/Intersection_Observer_API/bcd.json"}},{"type":"prose","value":{"id":"voir_aussi","title":"Voir aussi","isH3":false,"content":"<ul>\n  <li><a href=\"https://github.com/WICG/IntersectionObserver/tree/gh-pages/polyfill\" class=\"external\" rel=\" noopener\">Une proth√®se (<em>polyfill</em>) pour l'API <em>Intersection Observer</em></a></li>\n  <li><em><a href=\"/en-US/docs/Web/API/Intersection_Observer_API/Timing_element_visibility\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">Timing element visibility with the Intersection Observer API (en-US)</a></em></li>\n  <li><a href=\"/fr/docs/Web/API/IntersectionObserver\"><code>IntersectionObserver</code></a> et <a href=\"/fr/docs/Web/API/IntersectionObserverEntry\"><code>IntersectionObserverEntry</code></a></li>\n</ul>"}}],"toc":[{"text":"Concepts et utilisation de l'observateur d'intersections","id":"concepts_et_utilisation_de_lobservateur_dintersections"},{"text":"Interfaces","id":"interfaces"},{"text":"Un exemple simple","id":"un_exemple_simple"},{"text":"Sp√©cifications","id":"sp√©cifications"},{"text":"Compatibilit√© des navigateurs","id":"compatibilit√©_des_navigateurs"},{"text":"Voir aussi","id":"voir_aussi"}],"summary":"L'API Intersection Observer permet d'observer de mani√®re asynchrone l'√©volution de l'intersection d'un √©l√©ment cible avec un √©l√©ment anc√™tre ou avec la zone d'affichage d'un document de niveau sup√©rieur.","popularity":0.001,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Intersection Observer API","locale":"en-US","native":"English (US)"},{"title":"Intersection Observer API","locale":"es","native":"Espa√±ol"},{"title":"‰∫§Â∑Æ„Ç™„Éñ„Ç∂„Éº„Éê„Éº API","locale":"ja","native":"Êó•Êú¨Ë™û"},{"title":"Intersection Observer API","locale":"ko","native":"ÌïúÍµ≠Ïñ¥"},{"title":"Intersection Observer API","locale":"ru","native":"–†—É—Å—Å–∫–∏–π"},{"title":"Intersection Observer API","locale":"zh-CN","native":"‰∏≠Êñá (ÁÆÄ‰Ωì)"}],"source":{"folder":"fr/web/api/intersection_observer_api","github_url":"https://github.com/mdn/translated-content/blob/main/files/fr/web/api/intersection_observer_api/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/fr/docs/Web","title":"Technologies web pour d√©veloppeurs"},{"uri":"/fr/docs/Web/API","title":"R√©f√©rence Web API"},{"uri":"/fr/docs/Web/API/Intersection_Observer_API","title":"Intersection Observer API"}],"pageTitle":"Intersection Observer API - R√©f√©rence Web API | MDN","noIndexing":false}}</script></body></html>