{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"ExtendableEvent","mdn_url":"/fr/docs/Web/API/ExtendableEvent","locale":"fr","native":"Français","sidebarHTML":"<ol><li><strong><a href=\"/fr/docs/Web/API/Service_Worker_API\">Service Worker API</a></strong></li><li><strong><a href=\"/fr/docs/Web/API/ExtendableEvent\"><code>ExtendableEvent</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Constructeur</summary><ol><li><a href=\"/fr/docs/Web/API/ExtendableEvent/ExtendableEvent\"><code>ExtendableEvent()</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Méthodes</summary><ol><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/ExtendableEvent/waitUntil\"><code>waitUntil()</code> <small>(en-US)</small></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Héritage&nbsp;:</summary><ol><li><a href=\"/fr/docs/Web/API/Event\"><code>Event</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Pages liées à Service Workers API</summary><ol><li><a href=\"/fr/docs/Web/API/Cache\"><code>Cache</code></a></li><li><a href=\"/fr/docs/Web/API/CacheStorage\"><code>CacheStorage</code></a></li><li><a href=\"/fr/docs/Web/API/Client\"><code>Client</code></a></li><li><a href=\"/fr/docs/Web/API/Clients\"><code>Clients</code></a></li><li><a href=\"/fr/docs/Web/API/FetchEvent\"><code>FetchEvent</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/InstallEvent\"><code>InstallEvent</code> <small>(en-US)</small></a></li><li><a href=\"/fr/docs/Web/API/Navigator/serviceWorker\"><code>Navigator.serviceWorker</code></a></li><li><a href=\"/fr/docs/Web/API/NotificationEvent\"><code>NotificationEvent</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PeriodicSyncEvent\"><code>PeriodicSyncEvent</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PeriodicSyncManager\"><code>PeriodicSyncManager</code> <small>(en-US)</small></a></li><li><a href=\"/fr/docs/Web/API/ServiceWorker\"><code>ServiceWorker</code></a></li><li><a href=\"/fr/docs/Web/API/ServiceWorkerContainer\"><code>ServiceWorkerContainer</code></a></li><li><a href=\"/fr/docs/Web/API/ServiceWorkerGlobalScope\"><code>ServiceWorkerGlobalScope</code></a></li><li><a href=\"/fr/docs/Web/API/ServiceWorkerRegistration\"><code>ServiceWorkerRegistration</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/SyncEvent\"><code>SyncEvent</code> <small>(en-US)</small></a></li><li><a href=\"/fr/docs/Web/API/SyncManager\"><code>SyncManager</code></a></li><li><a href=\"/fr/docs/Web/API/WindowClient\"><code>WindowClient</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>L'interface <strong><code>ExtendableEvent</code></strong> étend la durée de vie des événements <a href=\"/en-US/docs/Web/API/ServiceWorkerGlobalScope/install_event\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">install (en-US)</a> et <a href=\"/en-US/docs/Web/API/ServiceWorkerGlobalScope/activate_event\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">activate (en-US)</a> envoyés dans la portée globale dans le cycle de vie du service worker. Elle s'assure que les événements fonctionnels (comme <a href=\"/fr/docs/Web/API/FetchEvent\"><code>FetchEvent</code></a>) ne soient pas distribués avant de mettre à jour les schémas de la base de données et de vider l'ancien cache.</p>\n<p>Si <a href=\"/en-US/docs/Web/API/ExtendableEvent/waitUntil\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">waitUntil() (en-US)</a> est appelé en dehors du gestionnaire <code>ExtendableEvent</code>, le navigateur doit lever une exception <code>InvalidStateError</code> ; notez que plusieurs appels vont s'empiler, et que les promesses de résultat seront ajoutées à la liste des <a href=\"https://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html#dfn-extend-lifetime-promises\" class=\"external\" rel=\" noopener\">promesses à vie étendue</a>.</p>\n<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>Note :</strong> Le comportement décrit dans le paragraphe précédent a été corrigé dans Firefox 43 (voir <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=1180274\" class=\"external\" rel=\" noopener\">le bug 1180274</a>).</p>\n</div>\n<p>Cette interface hérite de l'interface <a href=\"/fr/docs/Web/API/Event\"><code>Event</code></a>.</p>\n<div class=\"notecard note\" id=\"sect2\">\n  <p><strong>Note :</strong> Cette interface est disponible seulement quand la portée globale est <a href=\"/fr/docs/Web/API/ServiceWorkerGlobalScope\"><code>ServiceWorkerGlobalScope</code></a>. Elle n'est pas disponible quand c'est un objet <a href=\"/fr/docs/Web/API/Window\"><code>Window</code></a> ou un autre type de worker.</p>\n</div>"}},{"type":"prose","value":{"id":"constructeur","title":"Constructeur","isH3":false,"content":"<dl>\n  <dt id=\"extendableevent\"><a href=\"/fr/docs/Web/API/ExtendableEvent/ExtendableEvent\"><code>ExtendableEvent()</code></a></dt>\n  <dd>\n    <p>Crée un nouvel objet <code>ExtendableEvent</code>.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"propriétés","title":"Propriétés","isH3":false,"content":"<p>N'implémente pas de propriétés spécifiques, mais hérite de celles de son parent, <em><a href=\"/fr/docs/Web/API/Event\"><code>Event</code></a>.</em></p>"}},{"type":"prose","value":{"id":"méthodes","title":"Méthodes","isH3":false,"content":"<p>Hérite des méthodes de son parent <em><a href=\"/fr/docs/Web/API/Event\"><code>Event</code></a>.</em></p>\n<dl>\n  <dt id=\"extendableevent.waituntil\"><a href=\"/en-US/docs/Web/API/ExtendableEvent/waitUntil\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">ExtendableEvent.waitUntil() (en-US)</a></dt>\n  <dd>\n    <p>Étend la durée de vie de l'évènement. Cette méthode doit être appelée dans le gestionnaire d'évènement <a href=\"/en-US/docs/Web/API/ServiceWorkerGlobalScope/install_event\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">install (en-US)</a> pour le worker en cours d'installation (voir <a href=\"/en-US/docs/Web/API/ServiceWorkerRegistration/installing\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">installing (en-US)</a>) et dans le gestionnaire d'évènement <a href=\"/en-US/docs/Web/API/ServiceWorkerGlobalScope/activate_event\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">activate (en-US)</a> pour le worker actif (voir <a href=\"/fr/docs/Web/API/ServiceWorkerRegistration/active\"><code>active</code></a>).</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"exemples","title":"Exemples","isH3":false,"content":"<p>Ce fragment de code est tiré de <a href=\"https://github.com/GoogleChrome/samples/blob/gh-pages/service-worker/prefetch/service-worker.js\" class=\"external\" rel=\" noopener\">l'exemple du service worker utilisant prefetch</a> (voir <a href=\"https://googlechrome.github.io/samples/service-worker/prefetch/\" class=\"external\" rel=\" noopener\">l'exemple en live</a>). Ce code appelle <a href=\"/en-US/docs/Web/API/ExtendableEvent/waitUntil\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">ExtendableEvent.waitUntil() (en-US)</a> dans le gestionnaire d'évènement <a href=\"/fr/docs/Web/API/ServiceWorkerGlobalScope/oninstall\" class=\"page-not-created\" title=\"This is a link to an unwritten page\"><code>ServiceWorkerGlobalScope.oninstall</code></a>, retardant le traitement du worker <a href=\"/en-US/docs/Web/API/ServiceWorkerRegistration/installing\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">ServiceWorkerRegistration.installing (en-US)</a> après l'installation jusqu'à ce que la promesse se résolve. La promesse se résout quand toutes les ressources ont été récupérées et mises en cache, ou quand une exception est levée.</p>\n<p>Ce fragment de code montre aussi une bonne pratique pour construire des versions de cache utilisées par le service worker. Même s'il n'y a qu'un cache dans cet exemple, la même approche peut être utilisée pour plusieurs caches. Il lie un identifiant court pour un cache avec un nom de cache spécifique et versionné.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> <span class=\"token constant\">CACHE_VERSION</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> <span class=\"token constant\">CURRENT_CACHES</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">prefetch</span><span class=\"token operator\">:</span> <span class=\"token string\">'prefetch-cache-v'</span> <span class=\"token operator\">+</span> <span class=\"token constant\">CACHE_VERSION</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nself<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'install'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> urlsToPrefetch <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">'./static/pre_fetched.txt'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'./static/pre_fetched.html'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'https://www.chromium.org/_/rsrc/1302286216006/config/customLogo.gif'</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Installation en cours. Ressources à pré-charger :'</span><span class=\"token punctuation\">,</span> urlsToPrefetch<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  event<span class=\"token punctuation\">.</span><span class=\"token function\">waitUntil</span><span class=\"token punctuation\">(</span>\n    caches<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token constant\">CURRENT_CACHES</span><span class=\"token punctuation\">[</span><span class=\"token string\">'prefetch'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">cache</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      cache<span class=\"token punctuation\">.</span><span class=\"token function\">addAll</span><span class=\"token punctuation\">(</span>urlsToPrefetch<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">urlToPrefetch</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Request</span><span class=\"token punctuation\">(</span>urlToPrefetch<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">mode</span><span class=\"token operator\">:</span> <span class=\"token string\">'no-cors'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Toutes les ressources ont été chargées et mises en cache.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Erreur de pré-chargement :'</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<div class=\"notecard warning\" id=\"sect3\">\n  <p><strong>Attention :</strong> Au moment du chargement des ressources, il est très important d'utiliser <code>{mode: 'no-cors'}</code> s'il y a une chance que la ressource soit servie depuis un serveur qui ne supporte pas le <a href=\"http://en.wikipedia.org/wiki/Cross-origin_resource_sharing\" class=\"external\" rel=\" noopener\">CORS</a>. Dans cet exemple, <a href=\"https://www.chromium.org\" class=\"external\" rel=\" noopener\">www.chromium.org</a> ne prend pas en charge le CORS.</p>\n</div>"}},{"type":"specifications","value":{"title":"Spécifications","id":"spécifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://w3c.github.io/ServiceWorker/#extendableevent-interface","title":"Service Workers 1"}],"query":"api.ExtendableEvent"}},{"type":"browser_compatibility","value":{"title":"Compatibilité des navigateurs","id":"compatibilité_des_navigateurs","isH3":false,"query":"api.ExtendableEvent","dataURL":"/fr/docs/Web/API/ExtendableEvent/bcd.json"}},{"type":"prose","value":{"id":"voir_aussi","title":"Voir aussi","isH3":false,"content":"<ul>\n  <li><a href=\"/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">Utiliser les Service Workers (en-US)</a></li>\n  <li><a href=\"https://github.com/mdn/sw-test\" class=\"external\" rel=\" noopener\">Un exemple de base pour un service worker</a></li>\n  <li><a href=\"https://jakearchibald.github.io/isserviceworkerready/\" class=\"external\" rel=\" noopener\">Peut-on utiliser les service workers ?</a></li>\n  <li><a href=\"/fr/docs/Web/JavaScript/Reference/Global_Objects/Promise\"><code>Promise</code></a></li>\n  <li><a href=\"/en-US/docs/Web/API/Web_Workers_API/Using_web_workers\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">Utiliser les web workers (en-US)</a></li>\n</ul>"}}],"toc":[{"text":"Constructeur","id":"constructeur"},{"text":"Propriétés","id":"propriétés"},{"text":"Méthodes","id":"méthodes"},{"text":"Exemples","id":"exemples"},{"text":"Spécifications","id":"spécifications"},{"text":"Compatibilité des navigateurs","id":"compatibilité_des_navigateurs"},{"text":"Voir aussi","id":"voir_aussi"}],"summary":"L'interface ExtendableEvent étend la durée de vie des événements install (en-US) et activate (en-US) envoyés dans la portée globale dans le cycle de vie du service worker. Elle s'assure que les événements fonctionnels (comme FetchEvent) ne soient pas distribués avant de mettre à jour les schémas de la base de données et de vider l'ancien cache.","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"ExtendableEvent","locale":"en-US","native":"English (US)"},{"title":"ExtendableEvent","locale":"ja","native":"日本語"},{"title":"ExtendableEvent","locale":"ru","native":"Русский"},{"title":"ExtendableEvent","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"fr/web/api/extendableevent","github_url":"https://github.com/mdn/translated-content/blob/main/files/fr/web/api/extendableevent/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/fr/docs/Web","title":"Technologies web pour développeurs"},{"uri":"/fr/docs/Web/API","title":"Référence Web API"},{"uri":"/fr/docs/Web/API/ExtendableEvent","title":"ExtendableEvent"}],"pageTitle":"ExtendableEvent - Référence Web API | MDN","noIndexing":false}}