<!DOCTYPE html><html lang="en-US" prefix="og: https://ogp.me/ns#"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="/favicon-48x48.97046865.png"><link rel="apple-touch-icon" href="/apple-touch-icon.0ea0fa02.png"><meta name="theme-color" content="#ffffff"><link rel="manifest" href="/manifest.56b1cedc.json"><link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="MDN Web Docs"><script>Array.prototype.flat&&Array.prototype.includes||document.write('<script src="https://polyfill.io/v3/polyfill.min.js?features=Array.prototype.flat%2Ces6"><\/script>')</script><title>Introduction à l'utilisation de XPath avec JavaScript - XPath | MDN</title><link rel="preload" as="font" type="font/woff2" crossorigin="" href="/static/media/ZillaSlab-Bold.subset.0beac26b.woff2"><link rel="alternate" title="Introduction à l'utilisation de XPath avec JavaScript" href="https://developer.mozilla.org/fr/docs/Web/XPath/Introduction_to_using_XPath_in_JavaScript" hreflang="fr"><link rel="alternate" title="Introduction to using XPath in JavaScript" href="https://developer.mozilla.org/zh-CN/docs/Web/XPath/Introduction_to_using_XPath_in_JavaScript" hreflang="zh"><link rel="alternate" title="Introduction to using XPath in JavaScript" href="https://developer.mozilla.org/ko/docs/Web/XPath/Introduction_to_using_XPath_in_JavaScript" hreflang="ko"><link rel="alternate" title="JavaScript での XPath の利用の手引き" href="https://developer.mozilla.org/ja/docs/Web/XPath/Introduction_to_using_XPath_in_JavaScript" hreflang="ja"><link rel="alternate" title="Introducción al uso de XPath en Javascript" href="https://developer.mozilla.org/es/docs/Web/XPath/Introduction_to_using_XPath_in_JavaScript" hreflang="es"><link rel="alternate" title="Introduction to using XPath in JavaScript" href="https://developer.mozilla.org/en-US/docs/Web/XPath/Introduction_to_using_XPath_in_JavaScript" hreflang="en"><meta name="description" content="Ce document décrit l'interface pour utiliser XPath dans JavaScript, que ce soit en interne, dans les extensions et depuis les sites Web. Mozilla implémente une partie importante de DOM 3 XPath (en). Cela signifie que les expressions XPath peuvent être utilisées sur des documents HTML et XML."><meta property="og:url" content="https://developer.mozilla.org/fr/docs/Web/XPath/Introduction_to_using_XPath_in_JavaScript"><meta property="og:title" content="Introduction à l'utilisation de XPath avec JavaScript - XPath | MDN"><meta property="og:description" content="Ce document décrit l'interface pour utiliser XPath dans JavaScript, que ce soit en interne, dans les extensions et depuis les sites Web. Mozilla implémente une partie importante de DOM 3 XPath (en). Cela signifie que les expressions XPath peuvent être utilisées sur des documents HTML et XML."><meta property="og:locale" content="fr"><meta property="og:image" content="https://developer.mozilla.org/mdn-social-share.0ca9dbda.png"><meta property="twitter:card" content="summary_large_image"><meta name="robots" content="index, follow"><link rel="canonical" href="https://developer.mozilla.org/fr/docs/Web/XPath/Introduction_to_using_XPath_in_JavaScript"><style media="print">.breadcrumbs-container,.document-toc-container,.language-menu,.language-toggle,.on-github,.page-footer,.page-header-main,nav.sidebar,ul.prev-next{display:none!important}.main-page-content,.main-page-content pre{padding:2px}.main-page-content pre{border-left-width:2px}</style><link href="/static/css/main.55b68e13.chunk.css" rel="stylesheet"><script src="/static/js/runtime-main.4bb4c356.js" defer=""></script><script src="/static/js/4.a756dea3.chunk.js" defer=""></script><script src="/static/js/main.d4d565e0.chunk.js" defer=""></script></head><body><div id="root"><ul id="nav-access" class="a11y-nav"><li><a id="skip-main" href="#content">Skip to main content</a></li><li><a id="skip-search" href="#main-q">Skip to search</a></li><li><a id="skip-select-language" href="#select-language">Skip to select language</a></li></ul><div class="page-wrapper document-page"><header class="page-header"><a href="/fr/" class="logo" aria-label="MDN Web Docs"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 451.74 135"><path d="M7.14 8.35v111.06h111.05V8.35zm103.71 56c-.48.92-1 1.79-1.46 2.71a3.44 3.44 0 01-3.54 2 2.4 2.4 0 00-1.55.5c-1.37.9-2.76 1.79-4.18 2.63a7.33 7.33 0 01-6.35.34 29.71 29.71 0 00-10.63-2 11.7 11.7 0 00-9.46 4.31 14.84 14.84 0 00-2.13 4.29c-1.24 3.07-2.3 21.38-2.3 26.05 0 0-17.62-3.42-34.15-20.34l4.31-11.32h-13.5l9.76-10.35h-16.8l9.77-10.34H12.69L30.45 34a40.9 40.9 0 0119.77-10.83c7.1-1.22 8.93-.53 13.31.77l2.43.73.85.25 3.1.95a12.56 12.56 0 006.21.09 11.37 11.37 0 018.25 1 8.24 8.24 0 014.1 6.22 7.29 7.29 0 003.61 5.49 59.45 59.45 0 009.32 4.11c2.27.86 4.54 1.84 6.79 2.72a6.81 6.81 0 012.86 2.06 4.81 4.81 0 011.1 2.73c.14 2 .37 4 .47 6a15.24 15.24 0 01-1.77 8.03zM320.12 39.62a5.42 5.42 0 00-4.53 2.13 7.36 7.36 0 00-1.7 4.43v2.36a6.28 6.28 0 001.7 4.46 5.63 5.63 0 004.3 1.82 5.12 5.12 0 004.57-2.27A9.7 9.7 0 00326 47a8.11 8.11 0 00-1.67-5.52 5.36 5.36 0 00-4.21-1.86zM387.38 39.53a5.52 5.52 0 00-4.7 2.15 8.8 8.8 0 00-1.63 5.49 9.23 9.23 0 001.58 5.45 5.38 5.38 0 004.7 2.25 5.61 5.61 0 004.74-2.2 8.91 8.91 0 001.68-5.59 8.24 8.24 0 00-1.75-5.52 5.76 5.76 0 00-4.62-2.03zM299.47 41.35a4.34 4.34 0 00-4-1.92 4.55 4.55 0 00-3.89 1.73 8.37 8.37 0 00-1.58 4.17h10.48a6.3 6.3 0 00-1.01-3.98zM357.74 30.75H352v23.31h5.72q5.47 0 8.35-3t2.93-8.65q0-5.43-2.88-8.55t-8.38-3.11z"></path><path d="M121.55 8.35v70.8h323V8.35zm42.21 22.45h-4V54h3.68v3.73h-11.25V54h3.31V36.79h-.19l-9.63 19.12h-2.12l-10-19.4h-.19V54h3.45v3.73h-11.15V54h3.68V30.8h-4v-3.73H133l11.66 22.56h.19l11.18-22.56h7.7zm29.12 22.67q-4.11 4.28-11.38 4.28h-14.06v-3.69h3.73V30.75h-3.73v-3.68h13.83q7.59 0 11.66 4.29a15.4 15.4 0 014 11 15.33 15.33 0 01-4.05 11.11zm38.89-22.67h-3.68v27h-2.6L208.08 35h-.19v19h4.67v3.73h-12.22V54h3.49V30.8h-4v-3.73h7.08l16.9 22.09h.19V30.8h-4.58v-3.73h12.32zm43.8 27h-3.31l-7.83-23.18h-.19l-7.55 23.18h-3.35l-8.78-27h-2.65v-3.73H253v3.73h-3.87L255 50.71h.23l6.61-19.91H259v-3.73h11v3.73h-2.78l6.61 20.1h.23l5.43-20.1h-4.15v-3.73h11v3.73h-2.54zm26.71-1.51a9.66 9.66 0 01-6.42 2 10.2 10.2 0 01-7.41-2.74c-1.89-1.82-2.83-4.47-2.83-7.93a12.37 12.37 0 012.64-8.12 9 9 0 017.32-3.21 8.62 8.62 0 016.75 2.69 9.65 9.65 0 012.45 6.52 13.67 13.67 0 01-.28 2.69H290q.29 6.71 6.18 6.7a5.2 5.2 0 003.71-1.18 5.82 5.82 0 001.67-2.83l3.45.71a7.21 7.21 0 01-2.73 4.65zm25.77-1.63c-1.51 2.4-3.92 3.61-7.22 3.61s-5.84-1.29-7.22-3.87c0 .25-.1.82-.21 1.7s-.19 1.44-.22 1.7H309c.16-1 .31-2 .47-3.07a21.42 21.42 0 00.24-3.16v-23h-3.4v-3.3h7.55V40.9a9.76 9.76 0 012.67-3.28 7.33 7.33 0 014.74-1.4 8.48 8.48 0 016.5 2.78q2.55 2.74 2.55 7.74a14.6 14.6 0 01-2.27 7.87zm41.39-1.14q-4.11 4.28-11.37 4.28H344v-3.74h3.73V30.75H344v-3.68h13.83q7.59 0 11.66 4.29a15.41 15.41 0 014.06 11 15.34 15.34 0 01-4.11 11.11zm25.65 1.68a10.53 10.53 0 01-7.9 3.07 10 10 0 01-7.63-3 10.93 10.93 0 01-2.8-7.83 12.13 12.13 0 012.69-7.93q2.69-3.3 8-3.3t8 3.28a12 12 0 012.64 7.76 10.86 10.86 0 01-3 7.9zm22.61.57c-1.4 1.66-3.63 2.5-6.68 2.5a9.58 9.58 0 01-7.15-2.76q-2.72-2.76-2.71-7.91a12.25 12.25 0 012.69-8 9.17 9.17 0 017.5-3.28 15 15 0 013.82.48 10.37 10.37 0 013.5 1.65l.85 5.47-3.35.38-.76-3.54a8.07 8.07 0 00-4.11-1 4.9 4.9 0 00-4.39 2.15 9.93 9.93 0 00-1.41 5.55 8.9 8.9 0 001.5 5.38 5.23 5.23 0 004.44 2c2.92 0 4.67-1.7 5.23-5.1l3.5.71a10.34 10.34 0 01-2.47 5.27zm20.48.75a11.68 11.68 0 01-6.63 1.75 15.52 15.52 0 01-8.26-2.08L424 51l3.26.33-.1 2.74a7 7 0 002.06.66 12.63 12.63 0 002.19.19 8.68 8.68 0 003.66-.75 2.5 2.5 0 001.63-2.36 2.25 2.25 0 00-1.32-2.2 12.65 12.65 0 00-3.28-1 47.39 47.39 0 01-3.9-.82 7.5 7.5 0 01-3.25-1.7 4.67 4.67 0 01-1.33-3.66c0-2.36.88-4 2.62-4.91a12 12 0 015.6-1.37 15 15 0 014.08.55 16.65 16.65 0 013.47 1.39l.47 5.1-3.3.37-.48-3.3a9.5 9.5 0 00-4.06-.9 5.62 5.62 0 00-2.87.66 2.33 2.33 0 00-1.15 2.25 2.13 2.13 0 001.3 2.07 11.91 11.91 0 003.21.92 36.69 36.69 0 013.82.83 7.46 7.46 0 013.21 1.74 4.9 4.9 0 011.3 3.73 5.56 5.56 0 01-2.66 4.91z"></path><path d="M181.17 30.75h-5.71v23.31h5.71q5.47 0 8.36-3t2.88-8.61q0-5.43-2.88-8.55t-8.36-3.15zM121.63 119.32V81.74h114.91v37.58zM153.22 109h-2v-6.85a4.8 4.8 0 00-1.58-4 5.57 5.57 0 00-3.55-1.26 5 5 0 00-4.92 3.26 4.19 4.19 0 00-1.88-2.46 5.82 5.82 0 00-3-.8 4.89 4.89 0 00-4.56 2.56v-2.21h-6.28v3.26h2v8.5h-2v3.23h9.11V109h-2.86v-5.25a4.4 4.4 0 01.69-2.56 2.47 2.47 0 012.21-1q2.57 0 2.56 3.63v8.41h6.29V109h-2v-5.25a4.47 4.47 0 01.67-2.56 2.42 2.42 0 012.19-1q2.63 0 2.63 3.63v8.41h6.28zm9.88-12.07q-4 0-6 2.36a8.41 8.41 0 00-2 5.66 7.25 7.25 0 002.17 5.62 8 8 0 005.65 2 8.54 8.54 0 005.94-2.11 7.27 7.27 0 002.34-5.67 8.21 8.21 0 00-2-5.51q-2.07-2.34-6.1-2.34zm-.1 12.35a3 3 0 01-2.63-1.33 5.68 5.68 0 01-.9-3.26 5 5 0 011-3.28 3.23 3.23 0 012.61-1.18 3.5 3.5 0 012.59 1.08 4.56 4.56 0 011.07 3.31 5.21 5.21 0 01-1 3.41 3.33 3.33 0 01-2.74 1.25zm25-2.3l-3.39-.29-.7 2.32H179l8.32-9.54-.32-2.23h-13.19l-.53 5.25 3.16.34.67-2.36h4.65l-8.25 9.53.44 2.26h13.13zm7.62-9.74h-4.46v5.39h4.46zm0 9.61h-4.46v5.39h4.46zm13.54-17.49h-4.23l-6.48 22.88h4.22zm8.68 0h-4.23l-6.45 22.88h4.19zm15 22.51l-.07-2.26a1.22 1.22 0 01-.56.1c-.69 0-1-.39-1-1.16v-6.49a4.39 4.39 0 00-1.8-3.84 7 7 0 00-4.16-1.28 14.55 14.55 0 00-3.16.3 24.14 24.14 0 00-3.29 1.06l-.56 3.46 3.39.4.5-1.69a2.78 2.78 0 011.08-.37 11.3 11.3 0 011.25-.07c1.19 0 1.89.37 2.09 1.1a8.55 8.55 0 01.3 2.26v.5a8.91 8.91 0 00-1.18-.11h-1.21a12.64 12.64 0 00-4.81.88 3.53 3.53 0 00-2.18 3.64 3.66 3.66 0 001.48 3.33 5.63 5.63 0 003.11 1 4.67 4.67 0 003-.91 6.78 6.78 0 001.8-2 3 3 0 003.33 3 5.54 5.54 0 002.66-.85zm-9.25-2.32a1.69 1.69 0 01-1.36-.52 1.81 1.81 0 01-.43-1.21 1.67 1.67 0 01.86-1.68 4.63 4.63 0 012-.42 7.69 7.69 0 011.07.07l1.06.13a3.58 3.58 0 01-1.08 2.74 3.24 3.24 0 01-2.11.89z"></path></svg></a><button type="button" class="ghost main-menu-toggle" aria-haspopup="true" aria-label="Show Menu"></button><div class="page-header-main "><nav class="main-nav" aria-label="Main menu"><ul class="main-menu nojs"><li class="top-level-entry-container"><button id="technologies-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">Technologies</button><ul class="technologies " role="menu" aria-labelledby="technologies-button"><li role="none"><a tabindex="-1" href="/fr/docs/Web" role="menuitem">Technologies Overview</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web/HTML" role="menuitem">HTML</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web/CSS" role="menuitem">CSS</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web/JavaScript" role="menuitem">JavaScript</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web/Guide/Graphics" role="menuitem">Graphics</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web/HTTP" role="menuitem">HTTP</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web/API" role="menuitem">APIs</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Mozilla/Add-ons/WebExtensions" role="menuitem">Browser Extensions</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web/MathML" role="menuitem">MathML</a></li></ul></li><li class="top-level-entry-container"><button id="references-guides-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">References &amp; Guides</button><ul class="references-guides " role="menu" aria-labelledby="references-guides-button"><li role="none"><a tabindex="-1" href="/fr/docs/Learn" role="menuitem">Learn web development</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web/Tutorials" role="menuitem">Tutorials</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web/Reference" role="menuitem">References</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web/Guide" role="menuitem">Developer Guides</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web/Accessibility" role="menuitem">Accessibility</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Games" role="menuitem">Game development</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web" role="menuitem">...more docs</a></li></ul></li><li class="top-level-entry-container"><button id="feedback-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">Feedback</button><ul class="feedback " role="menu" aria-labelledby="feedback-button"><li role="none"><a tabindex="-1" href="/fr/docs/MDN/Contribute/Feedback" role="menuitem">Send Feedback</a></li><li role="none"><a tabindex="-1" href="/fr/docs/MDN/Contribute" role="menuitem">Contribute to MDN</a></li><li role="none"><a tabindex="-1" target="_blank" rel="noopener noreferrer" href="https://github.com/mdn/content/issues/new" role="menuitem">Report a content issue<!-- --> 🌐</a></li><li role="none"><a tabindex="-1" target="_blank" rel="noopener noreferrer" href="https://github.com/mdn/yari/issues/new" role="menuitem">Report a platform issue<!-- --> 🌐</a></li></ul></li></ul></nav><div class="header-search"><form action="/fr/search" class="search-form search-widget" role="search"><label for="main-q" class="visually-hidden">Search MDN</label><input type="search" name="q" id="main-q" class="search-input-field" placeholder="Site search... (Press &quot;/&quot; to focus)" pattern="(.|\s)*\S(.|\s)*" required="" value=""><input type="submit" class="ghost search-button" value="" aria-label="Search"></form></div><div class="auth-container"></div></div></header><div class="breadcrumb-locale-container"><nav class="breadcrumbs-container" aria-label="Breadcrumb navigation"><ol typeof="BreadcrumbList" vocab="https://schema.org/" aria-label="breadcrumbs"><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="/fr/docs/Web"><span property="name">Technologies web pour développeurs</span></a><meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb-penultimate" property="item" typeof="WebPage" href="/fr/docs/Web/XPath"><span property="name">XPath</span></a><meta property="position" content="2"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb-current-page" property="item" typeof="WebPage" href="/fr/docs/Web/XPath/Introduction_to_using_XPath_in_JavaScript"><span property="name">Introduction à l'utilisation de XPath avec JavaScript</span></a><meta property="position" content="3"></li></ol></nav><ul class="language-toggle"><li><a href="#select-language" class="language-icon"><span class="show-desktop">Change language</span></a></li><li><a class="view-in-english" href="/en-US/docs/Web/XPath/Introduction_to_using_XPath_in_JavaScript"><span class="show-desktop">View in</span> English</a></li></ul></div><div class="localized-content-note notecard inline neutral"><a href="/en-US/docs/MDN/Contribute/Localize#active_locales">Cette page a été traduite à partir de l'anglais par la communauté. Vous pouvez également contribuer en rejoignant la communauté francophone sur MDN Web Docs.</a></div><aside class="document-toc-container"><section class="document-toc"><header><h2>Table of contents</h2><button type="button" class="ghost toc-trigger-mobile" aria-controls="toc-entries" aria-expanded="false">Table of contents</button></header><ul id="toc-entries"><li><a href="#document.evaluate">document.evaluate()</a></li><li><a href="#exemples">Exemples</a></li><li><a href="#annexe">Annexe</a></li><li><a href="#voir_aussi">Voir aussi</a></li></ul></section></aside><main id="content" class="main-content" role="main"><article class="main-page-content" lang="fr"><h1>Introduction à l'utilisation de XPath avec JavaScript</h1><div><p>Ce document décrit l'interface pour utiliser <a href="/fr/docs/Web/XPath">XPath</a> dans JavaScript, que ce soit en interne, dans les extensions et depuis les sites Web. Mozilla implémente une partie importante de <a href="https://www.w3.org/TR/2004/NOTE-DOM-Level-3-XPath-20040226/" class="external" rel=" noopener">DOM 3 XPath (en)</a>. Cela signifie que les expressions XPath peuvent être utilisées sur des documents HTML et XML.</p>
<p>La principale interface pour l'utilisation de XPath est la fonction <a href="/fr/docs/Web/API/Document/evaluate"><code>evaluate()</code></a> de l'objet <a href="/fr/docs/Web/API/Document"><code>document</code></a>.</p></div><h2 id="document.evaluate"><a href="#document.evaluate" title="Permalink to document.evaluate()">document.evaluate()</a></h2><div><p>Cette méthode évalue les expressions <a href="/fr/docs/Web/XPath">XPath</a> dans un document <a href="/fr/docs/Web/XML">XML</a> (y compris les documents HTML), et retourne un objet <a href="/fr/docs/Web/XPath/XPathResult" class="page-not-created" title="This is a link to an unwritten page"><code>XPathResult</code></a>, qui peut être un nœud unique ou un ensemble de nœuds. La documentation existante sur cette méthode se trouve à la page <a href="/fr/docs/Web/API/Document/evaluate"><code>document.evaluate</code></a> mais elle est plutôt succincte comparée à nos besoins actuels. Nous l'examinerons de façon plus complète dans la suite de ce document.</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">var</span> xpathResult <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span> xpathExpression<span class="token punctuation">,</span> contextNode<span class="token punctuation">,</span> namespaceResolver<span class="token punctuation">,</span> resultType<span class="token punctuation">,</span> result <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div><h3 id="paramètres"><a href="#paramètres" title="Permalink to Paramètres">Paramètres</a></h3><div><p>La fonction <a href="/fr/docs/Web/API/Document/evaluate">evaluate</a> prend cinq arguments au total :</p>
<dl>
  <dt id="xpathexpression"><code>xpathExpression</code></dt>
  <dd>
    <p>Une chaîne contenant l'expression XPath à évaluer.</p>
  </dd>
  <dt id="contextnode"><code>contextNode</code></dt>
  <dd>
    <p>Un nœud du document pour lequel l'expression <code>xpathExpression</code> doit être évaluée, ainsi que l'ensemble de ses descendants. Le nœud <a href="/fr/docs/Web/API/Document">document</a> est le plus couramment utilisé.</p>
  </dd>
  <dt id="namespaceresolver"><code>namespaceResolver</code></dt>
  <dd>
    <p>Une fonction à laquelle sera passé tout préfixe d'espace de nommage contenu dans l'expression <code>xpathExpression</code> et qui renvoie une chaîne représentant l'URI de l'espace de nommage associé à ce préfixe. Cela permet la conversion entre le préfixe utilisé dans les expressions XPath et les différents préfixes éventuellement utilisés dans le document. Cette fonction peut être :</p>
  </dd>
</dl><!---->
<ul>
  <li><a href="#impl.c3.a9mentation_d.27un_r.c3.a9solveur_d.27espaces_de_nommage_par_d.c3.a9faut">Créée</a> à l'aide de la méthode <a href="/fr/docs/Web/API/Document/createNSResolver"><code>createNSResolver</code></a> d'un objet <a href="http://www.xulplanet.com/references/objref/XPathEvaluator.html" class="external" rel=" noopener"><code>XPathEvaluator</code></a>. C'est la solution à utiliser à peu près tout le temps.</li>
  <li>Une valeur <code>null</code>, qui peut être utilisé pour les documents HTML ou lorsqu'aucun préfixe n'est utilisé. Remarquez que si l'expression <code>xpathExpression</code> contient un préfixe d'espace de nommage cela déclenchera une exception <code>DOMException</code> portant le code <code>NAMESPACE_ERR</code>.</li>
  <li>Une fonction personnalisée définie par l'utilisateur. Voir la section <a href="#impl.c3.a9mentation_d.27un_r.c3.a9solveur_d.27espace_de_nommage_personnalis.c3.a9">Implémentation d'un résolveur d'espace de nommage personnalisé</a> dans l'annexe pour plus de détails.</li>
</ul><!---->
<dl>
  <dt id="resulttype"><code>resultType</code></dt>
  <dd>
    <p>Une <a href="#constantes_d.c3.a9finies_de_xpathresult">constante</a> qui définit le type de résultat à renvoyer comme résultat de l'évaluation. La constante la plus courante est <code>XPathResult.ANY_TYPE</code> qui renverra un résultat du type le plus naturel par rapport à l'expression XPath. Une section de l'annexe contient une liste complète des <a href="#constantes_d.c3.a9finies_de_xpathresult">constantes disponibles</a>. Elles sont expliquées dans la section <a href="#d.c3.a9finition_du_type_de_retour">#Définition du type de retour</a> ci-dessous.</p>
  </dd>
  <dt id="result"><code>result</code></dt>
  <dd>
    <p>Soit un objet <code>XPathResult</code> existant qui sera réutilisé pour contenir les résultats, soit la valeur <code>null</code> qui peut être utilisée pour créer un nouvel objet <code>XPathResult</code>.</p>
  </dd>
</dl></div><h3 id="valeur_de_retour"><a href="#valeur_de_retour" title="Permalink to Valeur de retour">Valeur de retour</a></h3><div><p>Renvoie <code>xpathResult</code>, qui est un objet <code>XPathResult</code> du type <a href="#d.c3.a9finition_du_type_de_retour">défini</a> dans le paramètre <code>resultType</code>. L'interface <code>XPathResult</code> est définie dans ce <a href="/en-US/docs/Web/API/XPathResult" class="only-in-en-us" title="Currently only available in English (US)">document (en-US)</a>.</p></div><h3 id="implémentation_dun_résolveur_despaces_de_nommage_par_défaut"><a href="#implémentation_dun_résolveur_despaces_de_nommage_par_défaut" title="Permalink to Implémentation d'un résolveur d'espaces de nommage par défaut">Implémentation d'un résolveur d'espaces de nommage par défaut</a></h3><div><p>On crée un résolveur d'espace de nommage à l'aide de la méthode <code>createNSResolver</code> de l'objet <a href="/fr/docs/Web/API/Document">document</a>.</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">var</span> nsResolver <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createNSResolver</span><span class="token punctuation">(</span> contextNode<span class="token punctuation">.</span>ownerDocument <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> contextNode<span class="token punctuation">.</span>documentElement <span class="token operator">:</span> contextNode<span class="token punctuation">.</span>ownerDocument<span class="token punctuation">.</span>documentElement <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Ou alternativement en utilisant la méthode &lt;code&gt;createNSResolver&lt;/code&gt; d'un objet &lt;code&gt;XPathEvaluator&lt;/code&gt;. &lt;pre&gt; var xpEvaluator = new XPathEvaluator(); var nsResolver = xpEvaluator.createNSResolver( contextNode.ownerDocument == null ? contextNode.documentElement : contextNode.ownerDocument.documentElement ); &lt;/pre&gt; On lui passe ensuite <code>document.evaluate</code>, la variable <code>nsResolver</code> comme paramètre <code>namespaceResolver</code>.</p>
<p>véracité du paragraphe suivant à vérifier avec la doc du w3c Notez que XPath définit que les <code>QNames</code> sans préfixe correspondent uniquement aux éléments de l'espace de nommage <code>null</code>. Il n'existe aucun moyen dans XPath pour récupérer l'espace de nommage par défaut. Pour coupler des éléments ou des attributs dans un espace de nommage non nul, vous devrez détecter les noms préfixés, et créer un résolveur d'espace de nommage qui fera correspondre le préfixe avec l'espace de nommage. Vous en saurez plus sur la façon de <a href="#impl.c3.a9mentation_d.27un_r.c3.a9solveur_d.27espace_de_nommage_personnalis.c3.a9">créer un résolveur d'espace de nommage personnalisé</a> ci-dessous.</p></div><h3 id="définition_du_type_de_retour"><a href="#définition_du_type_de_retour" title="Permalink to Définition du type de retour">Définition du type de retour</a></h3><div><p>La variable <code>xpathResult</code> renvoyée par <code>document.evaluate</code> peut être composée de nœuds individuels (<a href="#types_simples">types simples</a>), ou un groupe de nœuds (<a href="#types_d.27ensembles_de_n.c5.93uds">types d'ensembles de nœuds</a>).</p>
<h4 id="types_simples">Types simples</h4>
<p>Lorsque le type de résultat spécifié dans <code>resultType</code> est soit :</p>
<ul>
  <li><code>NUMBER_TYPE</code> — un nombre</li>
  <li><code>STRING_TYPE</code> — une chaîne</li>
  <li><code>BOOLEAN_TYPE</code> — une valeur booléenne</li>
</ul>
<p>On obtiendra la valeur de retour de l'expression en accédant respectivement aux propriétés suivantes de l'objet <code>XPathResult</code> :</p>
<ul>
  <li><code>numberValue</code></li>
  <li><code>stringValue</code></li>
  <li><code>booleanValue</code></li>
</ul>
<h5 id="exemple">Exemple</h5>
<p>Cet exemple utilise l'expression XPath <a href="/fr/docs/Web/XPath/Functions/count"><code>count(//p)</code></a> pour obtenir le nombre d'éléments <code>&lt;p&gt;</code> présents dans le document HTML :</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">var</span> paragraphCount <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span> <span class="token string">'count(//p)'</span><span class="token punctuation">,</span> document<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> XPathResult<span class="token punctuation">.</span><span class="token constant">ANY_TYPE</span><span class="token punctuation">,</span> <span class="token keyword">null</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">'Ce document contient '</span> <span class="token operator">+</span> paragraphCount<span class="token punctuation">.</span>numberValue <span class="token operator">+</span> <span class="token string">' éléments de paragraphe'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Même si JavaScript convertira un nombre en chaîne pour l'affichage, l'interface XPath ne fera pas automatiquement la conversion du résultat numérique si la propriété <code>stringValue</code> est demandée. Ainsi, le code suivant ne fonctionnera <strong>pas</strong> :</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">var</span> paragraphCount <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span><span class="token string">'count(//p)'</span><span class="token punctuation">,</span> document<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> XPathResult<span class="token punctuation">.</span><span class="token constant">ANY_TYPE</span><span class="token punctuation">,</span> <span class="token keyword">null</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">'Ce document contient '</span> <span class="token operator">+</span> paragraphCount<span class="token punctuation">.</span>stringValue <span class="token operator">+</span> <span class="token string">' éléments de paragraphe'</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Au lieu de cela, il déclenchera une exception portant le code <code>NS_DOM_TYPE_ERROR</code>.</p>
<h4 id="types_densembles_de_nœuds">Types d'ensembles de nœuds</h4>
<p>L'objet <code>XPathResult</code> permet de renvoyer les ensembles de nœuds sous la forme de trois types principaux :</p>
<ul>
  <li><a href="#it.c3.a9rateurs">Itérateurs</a></li>
  <li><a href="#snapshots">Snapshots</a></li>
  <li><a href="#premiers_n.c5.93uds">Premiers nœuds</a></li>
</ul>
<h5 id="itérateurs">Itérateurs</h5>
<p>Lorsque le type de résultat spécifié dans le paramètre <code>resultType</code> est soit :</p>
<ul>
  <li><code>UNORDERED_NODE_ITERATOR_TYPE</code></li>
  <li><code>ORDERED_NODE_ITERATOR_TYPE</code></li>
</ul>
<p>L'objet <code>XPathResult</code> renvoyé sera un ensemble de nœuds correspondant à l'expression se comportant comme un itérateur. On pourra accéder individuellement aux nœuds qu'il contient en utilisant la méthode <a href="/fr/docs/Web/XPathResult/IterateNext" class="page-not-created" title="This is a link to an unwritten page"><code>iterateNext()</code></a> de l'objet <code>XPathResult</code>.</p>
<p>Lorsque tous les nœuds ont été parcourus, <a href="/fr/docs/Web/XPathResult/IterateNext" class="page-not-created" title="This is a link to an unwritten page"><code>iterateNext()</code></a> renverra <code>null</code>.</p>
<p>Notez cependant que si le document est modifié (l'arbre du document est modifié) entre les itérations, l'itérateur sera invalidé et la propriété <code>invalidIteratorState</code> de <code>XPathResult</code> deviendra <code>true</code>. Une exception <code>NS_ERROR_DOM_INVALID_STATE_ERR</code> sera également déclenchée.</p>
<h6 id="exemple_ditérateur">Exemple d'itérateur</h6>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">var</span> iterator <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span><span class="token string">'//phoneNumber'</span><span class="token punctuation">,</span> documentNode<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> XPathResult<span class="token punctuation">.</span><span class="token constant">UNORDERED_NODE_ITERATOR_TYPE</span><span class="token punctuation">,</span> <span class="token keyword">null</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> thisNode <span class="token operator">=</span> iterator<span class="token punctuation">.</span><span class="token function">iterateNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">while</span> <span class="token punctuation">(</span>thisNode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> thisNode<span class="token punctuation">.</span>textContent <span class="token punctuation">)</span><span class="token punctuation">;</span>
    thisNode <span class="token operator">=</span> iterator<span class="token punctuation">.</span><span class="token function">iterateNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">'Erreur : L\'arbre du document a été modifié pendant l\'itération '</span> <span class="token operator">+</span> e <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<h5 id="snapshots">Snapshots</h5>
<p>Lorsque le type de résultat spécifié dans le paramètre <code>resultType</code> est l'une des valeurs suivantes :</p>
<ul>
  <li><code>UNORDERED_NODE_SNAPSHOT_TYPE</code></li>
  <li><code>ORDERED_NODE_SNAPSHOT_TYPE</code></li>
</ul>
<p>L'objet <code>XPathResult</code> renvoyé sera un ensemble statique de nœuds correspondant à l'expression. L'accès à chaque nœud se fera au travers de la méthode <a href="/fr/docs/Web/XPathResult/SnapshotItem" class="page-not-created" title="This is a link to an unwritten page"><code>snapshotItem(itemNumber)</code></a> de l'objet <code>XPathResult</code>, où <code>itemNumber</code> est l'indice du nœud à récupérer. On peut accéder au nombre total de nœuds contenus dans l'ensemble par la propriété <code>snapshotLength</code>.</p>
<p>Les snapshots ne changent pas avec les mutations du document. Aussi, contrairement aux itérateurs, le snapshot ne deviendra pas invalide mais peut ne plus correspondre au document actuel. Par exemple, des nœuds peuvent avoir été déplacés, il peut contenir des nœuds qui n'existent plus ou de nouveaux nœuds peuvent avoir été ajoutés.</p>
<h6 id="exemple_de_snapshot">Exemple de snapshot</h6>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">var</span> nodesSnapshot <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span><span class="token string">'//phoneNumber'</span><span class="token punctuation">,</span> documentNode<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> XPathResult<span class="token punctuation">.</span><span class="token constant">ORDERED_NODE_SNAPSHOT_TYPE</span><span class="token punctuation">,</span> <span class="token keyword">null</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nodesSnapshot<span class="token punctuation">.</span>snapshotLength<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> nodesSnapshot<span class="token punctuation">.</span><span class="token function">snapshotItem</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span>textContent <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<h5 id="premier_nœud">Premier nœud</h5>
<p>Lorsque le type de résultat spécifié dans le paramètre <code>resultType</code> est l'une des valeurs suivantes :</p>
<ul>
  <li><code>ANY_UNORDERED_NODE_TYPE</code></li>
  <li><code>FIRST_ORDERED_NODE_TYPE</code></li>
</ul>
<p>L'objet <code>XPathResult</code> renvoyé n'est que le premier nœud trouvé correspondant à l'expression XPath. On peut y accéder à l'aide de la propriété <code>singleNodeValue</code> de l'objet <code>XPathResult</code>. Celle-ci vaudra <code>null</code> si l'ensemble de nœuds est vide.</p>
<p>Notez que pour le sous-type non ordonné (le premier), le nœud unique renvoyé ne sera peut-être pas le premier nœud dans l'ordre du document. Dans le cas du sous-type ordonné (le second), vous pouvez être sûr d'obtenir le premier nœud correspondant dans l'ordre du document.</p>
<h6 id="exemple_de_premier_nœud">Exemple de premier nœud</h6>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">var</span> firstPhoneNumber <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span><span class="token string">'//phoneNumber'</span><span class="token punctuation">,</span> documentNode<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> XPathResult<span class="token punctuation">.</span><span class="token constant">FIRST_ORDERED_NODE_TYPE</span><span class="token punctuation">,</span> <span class="token keyword">null</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">'Le premier numéro de téléphone trouvé est '</span> <span class="token operator">+</span> firstPhoneNumber<span class="token punctuation">.</span>singleNodeValue<span class="token punctuation">.</span>textContent <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<h4 id="la_constante_any_type">La constante ANY_TYPE</h4>
<p>Lorsque le type de résultat spécifié dans le paramètre <code>resultType</code> est la valeur <code>ANY_TYPE</code>, l'objet <code>XPathResult</code> renvoyé pourra être de n'importe quel type, c'est-à-dire du type résultant le plus naturellement de l'évaluation de l'expression.</p>
<p>Il peut s'agir de n'importe lequel des types simples (<code>NUMBER_TYPE, STRING_TYPE, BOOLEAN_TYPE</code>), <strong>mais</strong> si le type du résultat retourné est un ensemble de nœuds alors il ne pourra être <strong>que</strong> du type <code>UNORDERED_NODE_ITERATOR_TYPE</code>.</p>
<p>Pour déterminer le type utilisé après l'évaluation, on utilisera la propriété <code>resultType</code> de l'objet <code>XPathResult</code>. Les valeurs <a href="#constantes_d.c3.a9finies_de_xpathresult">constantes</a> de cette propriété sont définies dans l'annexe.</p>
<p>None Yet =====Exemple Any_Type===== &lt;pre&gt; &lt;/pre&gt;</p></div><h2 id="exemples"><a href="#exemples" title="Permalink to Exemples">Exemples</a></h2><div></div><h3 id="dans_un_document_html"><a href="#dans_un_document_html" title="Permalink to Dans un document HTML">Dans un document HTML</a></h3><div><p>Le code suivant est destiné à être inséré dans un fragment JavaScript intégré ou lié au document HTML qui devra être évalué par l'expression XPath.</p>
<p>Pour extraire tous les éléments d'en-tête <code>&lt;h2&gt;</code> d'un document HTML à l'aide de XPath, l'expression <code>xpathExpression</code> est simplement '<code>//h2</code>', où <code>//</code> est l'opérateur descendant récursif (ou RDO) qui correspond aux éléments dont la propriété <code>nodeName</code> est <code>h2</code> n'importe où dans l'arbre du document. Le code complet pour cela est : link to introductory xpath doc</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">var</span> headings <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span><span class="token string">'//h2'</span><span class="token punctuation">,</span> document<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> XPathResult<span class="token punctuation">.</span><span class="token constant">ANY_TYPE</span><span class="token punctuation">,</span> <span class="token keyword">null</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Notez que, comme HTML ne possède pas d'espace de nommage, <code>null</code> a été passé comme paramètre <code>namespaceResolver</code>.</p>
<p>Comme le but est de chercher les en-têtes dans l'intégralité du document, on utilise l'objet <a href="/fr/docs/Web/API/Document">document</a> lui-même comme paramètre <code>contextNode</code>.</p>
<p>Le résultat de cette expression est un objet <code>XPathResult</code>. Pour connaître le type de résultat renvoyé, il convient d'évaluer la propriété <code>resultType</code> de l'objet renvoyé. Dans notre cas, il sera évalué à <code>4</code>, c'est donc un <code>UNORDERED_NODE_ITERATOR_TYPE</code>. Il s'agit du type de retour par défaut lorsque le résultat de l'expression XPath est un ensemble de nœuds. Il permet d'accéder à un seul nœud à la fois et ne renvoie pas les nœuds dans un ordre particulier. Pour accéder à ceux-ci, on utilise la méthode <code>iterateNext()</code> de l'objet renvoyé :</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">var</span> thisHeading <span class="token operator">=</span> headings<span class="token punctuation">.</span><span class="token function">iterateNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> alertText <span class="token operator">=</span> <span class="token string">'Les en-têtes de niveau 2 présents dans ce document sont :\n'</span>

<span class="token keyword">while</span> <span class="token punctuation">(</span>thisHeading<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  alertText <span class="token operator">+=</span> thisHeading<span class="token punctuation">.</span>textContent <span class="token operator">+</span> <span class="token string">'\n'</span><span class="token punctuation">;</span>
  thisHeading <span class="token operator">=</span> headings<span class="token punctuation">.</span><span class="token function">iterateNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>Une fois l'itération effectuée sur un nœud, nous avons accès à toutes les <a href="/fr/docs/Web/API/Document_Object_Model#interfaces_du_dom">Interfaces DOM</a> standards de ce nœud. Après avoir parcouru tous les éléments <code>h2</code> renvoyés à partir de notre expression, chaque nouvel appel à <code>iterateNext()</code> donnera <code>null</code>.</p></div><h3 id="évaluation_dun_document_xml_appartenant_à_une_extension"><a href="#évaluation_dun_document_xml_appartenant_à_une_extension" title="Permalink to Évaluation d'un document XML appartenant à une extension">Évaluation d'un document XML appartenant à une extension</a></h3><div><p>L'exemple suivant utilise un document XML situé à l'adresse <a href=""><code>chrome://yourextension/content/peopleDB.xml</code></a>.</p>
<div class="code-example"><pre class="brush: xml notranslate"><code><span class="token prolog">&lt;?xml version="1.0"?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>people</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>xul</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>person</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span> <span class="token attr-name">first</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>george<span class="token punctuation">"</span></span> <span class="token attr-name">last</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bush<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>address</span> <span class="token attr-name">street</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1600 pennsylvania avenue<span class="token punctuation">"</span></span> <span class="token attr-name">city</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>washington<span class="token punctuation">"</span></span> <span class="token attr-name">country</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>usa<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phoneNumber</span><span class="token punctuation">&gt;</span></span>202-456-1111<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phoneNumber</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>person</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>person</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span> <span class="token attr-name">first</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tony<span class="token punctuation">"</span></span> <span class="token attr-name">last</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>blair<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>address</span> <span class="token attr-name">street</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10 downing street<span class="token punctuation">"</span></span> <span class="token attr-name">city</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>london<span class="token punctuation">"</span></span> <span class="token attr-name">country</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>uk<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phoneNumber</span><span class="token punctuation">&gt;</span></span>020 7925 0918<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phoneNumber</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>person</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>people</span><span class="token punctuation">&gt;</span></span>
</code></pre></div>
<p>Pour rendre les contenus du document XML accessibles depuis l'extension, on crée un objet <a href="/fr/docs/Web/API/XMLHttpRequest"><code>XMLHttpRequest</code></a> pour charger le document de façon synchrone. La variable <code>xmlDoc</code> contiendra le document comme un objet <a href="/fr/docs/Web/API/XMLDocument"><code>XMLDocument</code></a> sur lequel on pourra utiliser la méthode <code>evaluate</code>.</p>
<p><em>JavaScript utilisé dans les documents XUL/js des extensions.</em></p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">var</span> req <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

req<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"GET"</span><span class="token punctuation">,</span> <span class="token string">"chrome://yourextension/content/peopleDB.xml"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
req<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> xmlDoc <span class="token operator">=</span> req<span class="token punctuation">.</span>responseXML<span class="token punctuation">;</span>

<span class="token keyword">var</span> nsResolver <span class="token operator">=</span> xmlDoc<span class="token punctuation">.</span><span class="token function">createNSResolver</span><span class="token punctuation">(</span> xmlDoc<span class="token punctuation">.</span>ownerDocument <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> xmlDoc<span class="token punctuation">.</span>documentElement <span class="token operator">:</span> xmlDoc<span class="token punctuation">.</span>ownerDocument<span class="token punctuation">.</span>documentElement<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> personIterator <span class="token operator">=</span> xmlDoc<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span><span class="token string">'//person'</span><span class="token punctuation">,</span> xmlDoc<span class="token punctuation">,</span> nsResolver<span class="token punctuation">,</span> XPathResult<span class="token punctuation">.</span><span class="token constant">ANY_TYPE</span><span class="token punctuation">,</span> <span class="token keyword">null</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<h4 id="note">Note</h4>
<p>Quant l'objet XPathResult n'est pas défini, les constantes peuvent être récupérées dans du code privilégié avec <code>Components.inertfaces.nsIDOMXPathResult.ANY_TYPE(CI.nsIDOMXPathResult)</code>. De la même manière un objet XPathEvaluator peut être créé en utilisant :</p>
<div class="code-example"><pre class="brush: js notranslate"><code>Components<span class="token punctuation">.</span>classes<span class="token punctuation">[</span><span class="token string">"@mozille.org/dom/xpath-evaluator;1"</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">createInstance</span><span class="token punctuation">(</span>Components<span class="token punctuation">.</span>interfaces<span class="token punctuation">.</span>nsIDOMXPathEvaluator<span class="token punctuation">)</span>
</code></pre></div></div><h2 id="annexe"><a href="#annexe" title="Permalink to Annexe">Annexe</a></h2><div><h4 id="implémentation_dun_résolveur_despace_de_nommage_personnalisé">Implémentation d'un résolveur d'espace de nommage personnalisé</h4>
<p>Cet exemple ne sert que d'illustration. Cette fonction nécessitera de prendre les préfixes d'espaces de nommage depuis la <code>xpathExpression</code> et retourne l'URI correspondante à ces préfixes. Par exemple, l'expression :</p>
<pre class="notranslate">'//xhtml:td/mathml:math'
</pre>
<p>sélectionnera toutes les expressions <a href="/fr/MathML" class="page-not-created" title="This is a link to an unwritten page">MathML</a> qui sont les descendantes des éléments (X)HTML de cellules de tableau.</p>
<p>Afin d'associer le préfixe <code>mathml:</code> avec l'URI d'espace de nommage '<a href="https://www.w3.org/1998/Math/MathML" class="external" rel=" noopener"><code>http://www.w3.org/1998/Math/MathML</code></a>' et <code>xhtml:</code> avec l'URI <a href="https://www.w3.org/1999/xhtml" class="external" rel=" noopener"><code>http://www.w3.org/1999/xhtml</code></a>, nous fournissons une fonction :</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">function</span> <span class="token function">nsResolver</span><span class="token punctuation">(</span><span class="token parameter">prefix</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> ns <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string-property property">'xhtml'</span> <span class="token operator">:</span> <span class="token string">'http://www.w3.org/1999/xhtml'</span><span class="token punctuation">,</span>
    <span class="token string-property property">'mathml'</span><span class="token operator">:</span> <span class="token string">'http://www.w3.org/1998/Math/MathML'</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> ns<span class="token punctuation">[</span>prefix<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>L'appel à <code>document.evaluate</code> ressemblera alors à :</p>
<div class="code-example"><pre class="brush: js notranslate"><code>document<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span> <span class="token string">'//xhtml:td/mathml:math'</span><span class="token punctuation">,</span> document<span class="token punctuation">,</span> nsResolver<span class="token punctuation">,</span> XPathResult<span class="token punctuation">.</span><span class="token constant">ANY_TYPE</span><span class="token punctuation">,</span> <span class="token keyword">null</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<h4 id="implémentation_dun_espace_de_nommage_par_défaut_pour_les_documents_xml">Implémentation d'un espace de nommage par défaut pour les documents XML</h4>
<p>Comme nous l'avons vu précédemment dans la section <a href="#impl.c3.a9mentation_d.27un_r.c3.a9solveur_d.27espaces_de_nommage_par_d.c3.a9faut">#Implémentation d'un résolveur d'espaces de nommage par défaut</a>, le résolveur par défaut ne gère pas l'espace de nommage par défaut pour les documents XML. Par exemple, avec ce document :</p>
<div class="code-example"><pre class="brush: xml notranslate"><code><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>feed</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2005/Atom<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>feed</span><span class="token punctuation">&gt;</span></span>
</code></pre></div>
<p><code>doc.evaluate('//entry', doc, nsResolver, XPathResult.ANY_TYPE, null)</code> retournera un ensemble vide, où <code>nsResolver</code> est le résolveur retourné par <code>createNSResolver</code>. Passé un résolveur <code>null</code> ne fonctionne pas mieux.</p>
<p>Une alternative possible est de créer un résolveur personnalisé qui retournera le bon espace de nommage (l'espace de nommage <em>Atom</em> dans ce cas). Par exemple :</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">function</span> <span class="token function">resolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">'http://www.w3.org/2005/Atom'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
doc<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span><span class="token string">'//entry'</span><span class="token punctuation">,</span> doc<span class="token punctuation">,</span> resolver<span class="token punctuation">,</span> XPathResult<span class="token punctuation">.</span><span class="token constant">ANY_TYPE</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
</code></pre></div>
<p>Un résolveur plus complexe sera nécessaire si le document utilise de multiple espaces de nommage.</p>
<p>Une approche qui peut potentiellement mieux fonctionner (et autoriser les espaces de nom à ne pas être connus au fil du temps) est décrite dans la section suivante.</p>
<h4 id="utiliser_les_fonctions_xpath_pour_référencer_les_éléments_avec_un_espace_de_nom_par_défaut">Utiliser les fonctions XPath pour référencer les éléments avec un espace de nom par défaut</h4>
<p>Une autre approche pour identifier les éléments par défaut dans un espace de noms non-null (et qui fonctionne bien pour les expressions XPath dynamiques où les espaces de noms peuvent ne pas être connus) implique la référence à un élément particulier en utilisant un formulaire tel que <code>[namespace-uri()='http://www.w3.org/1999/xhtml' and name()='p' and @id='_monid']</code>. Cela évite les problèmes résultant en une requête XPath qui n'est pas capable de détecter l'espace de noms par défaut sur un élément labelisé correctement.</p>
<h4 id="obtenir_des_éléments_et_des_attributs_dun_espace_de_noms_spécifique_en_ignorant_le_préfixe">Obtenir des éléments et des attributs d'un espace de noms spécifique en ignorant le préfixe</h4>
<p>Si l'on souhaite avoir une certaine flexibilité dans les espaces de noms en ne nécessitant pas d'utiliser un préfixe spécifique lorsque l'on veut trouver un élément ou un attribut appartenant à un espace de noms, on doit utiliser des techniques spéciales.</p>
<p>Tandis que l'on peut adapter la technique dans la section supérieure pour tester les éléments appartenant à un espace de noms sans regarder le préfix choisi (en utilisant <a href="/XPath/Functions/local-name" class="page-not-created" title="This is a link to an unwritten page">local-name()</a> combiné avec <a href="/XPath/Functions/namespace-uri" class="page-not-created" title="This is a link to an unwritten page">namespace-uri()</a> à la place de <a href="/XPath/Functions/name" class="page-not-created" title="This is a link to an unwritten page">name()</a>), un situation plus compliquée apparaît cependant, si l'on souhaite obtenir un élément avec un attribut appartenant à un espace de noms spécifique dans un prédicat (étant donnée l'absence des variables indépendantes de l'implémentation en XPath 1.0).</p>
<p>Par exemple, on peut essayer (de manière incorrecte) d'obtenir un élément avec un attribut appartenant à un espace de noms de la manière suivante : <code>var xpathlink = someElements[local-name(@*)="href" and namespace-uri(@*)='http://www.w3.org/1999/xlink'];</code></p>
<p>Cela pourrait récupérer des éléments par inadvertance si un de ces attributs existaient avec un nom local "<code>href</code>", mais que c'était un autre attribut qui avait le nom d'espace ciblé (XLink, à la place de <a href="/XPath/Axes/attribute" class="page-not-created" title="This is a link to an unwritten page">@href</a>).</p>
<p>Afin d'obtenir des éléments avec l'attribut XLink <code>@href</code> de manière précise (sans par ailleurs être obligé de définir des préfixes dans un résolveur de nom d'espaces), on procéder comme suit :</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">var</span> xpathEls <span class="token operator">=</span> <span class="token string">'someElements[@*[local-name() = "href" and manespace-uri() = "http://www.w3.org/1999/xlink"]]'</span><span class="token punctuation">;</span> <span class="token comment">// Récupère les éléments avec un simple attribute qui a à la fois le nom local 'href' and l'espace de noms XLink</span>
<span class="token keyword">var</span> thislevel <span class="token operator">=</span> xml<span class="token punctuation">.</span><span class="token function">evaluate</span><span class="token punctuation">(</span>xpathEls<span class="token punctuation">,</span> xml<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> XPathResult<span class="token punctuation">.</span><span class="token constant">ANY_TYPE</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> thisitemEl <span class="token operator">=</span> thislevel<span class="token punctuation">.</span><span class="token function">iterateNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<h4 id="constantes_définies_de_xpathresult">Constantes définies de XPathResult</h4>
<table class="standard-table">
  <tbody>
    <tr>
      <td class="header">Constante du type de résultat</td>
      <td class="header">Valeur</td>
      <td class="header">Description</td>
    </tr>
    <tr>
      <td>ANY_TYPE</td>
      <td>0</td>
      <td>
        Un ensemble contenant n'importe quel type qui résulte naturellement de
        l'évaluation de l'expression. Notez que si c'est un ensemble de noeuds
        qui doit être retourné, alors le type résultant sera toujours
        UNORDERED_NODE_ITERATOR_TYPE.
      </td>
    </tr>
    <tr>
      <td>NUMBER_TYPE</td>
      <td>1</td>
      <td>
        Un résultat contenant un seul nombre. C'est utile, par exemple, dans une
        expression XPath utilisant la fonction <code>count()</code>.
      </td>
    </tr>
    <tr>
      <td>STRING_TYPE</td>
      <td>2</td>
      <td>Un résultat contenant une seule chaîne de caractère.</td>
    </tr>
    <tr>
      <td>BOOLEAN_TYPE</td>
      <td>3</td>
      <td>
        Un résultat contenant une seule valeur booléenne. C'est utile, par
        exemple, dans une expression XPath utilisant la fonction
        <code>not()</code>.
      </td>
    </tr>
    <tr>
      <td>UNORDERED_NODE_ITERATOR_TYPE</td>
      <td>4</td>
      <td>
        Un ensemble de nœuds contenant tous les nœuds vérifiant l'expression.
        Les nœuds ne sont pas nécessairement dans le même ordre que celui dans
        lequel ils apparaissent dans le document.
      </td>
    </tr>
    <tr>
      <td>ORDERED_NODE_ITERATOR_TYPE</td>
      <td>5</td>
      <td>
        Un ensemble de nœuds contenant tous les nœuds vérifiant l'expression.
        Les nœuds du résultat sont dans le même ordre que celui dans lequel ils
        apparaissent dans le document.
      </td>
    </tr>
    <tr>
      <td>UNORDERED_NODE_SNAPSHOT_TYPE</td>
      <td>6</td>
      <td>
        Un ensemble de nœuds contenant les snapshots de tous les nœuds vérifiant
        l'expression. Les nœuds ne sont pas nécessairement dans le même ordre
        que celui dans lequel ils apparaissent dans le document.
      </td>
    </tr>
    <tr>
      <td>ORDERED_NODE_SNAPSHOT_TYPE</td>
      <td>7</td>
      <td>
        Un ensemble de nœuds contenant les snapshots de tous les nœuds vérifiant
        l'expression. Les nœuds du résultat sont dans le même ordre que celui
        dans lequel ils apparaissent dans le document.
      </td>
    </tr>
    <tr>
      <td>ANY_UNORDERED_NODE_TYPE</td>
      <td>8</td>
      <td>
        Un ensemble de nœuds contenant un seul nœud vérifiant l'expression. Le
        nœud n'est pas nécessairement le premier dans l'ordre du document qui
        correspond à l'expression.
      </td>
    </tr>
    <tr>
      <td>FIRST_ORDERED_NODE_TYPE</td>
      <td>9</td>
      <td>
        Un ensemble de nœuds contenant le premier nœud du document vérifiant
        l'expression.
      </td>
    </tr>
  </tbody>
</table></div><h2 id="voir_aussi"><a href="#voir_aussi" title="Permalink to Voir aussi">Voir aussi</a></h2><div><ul>
  <li><a href="/fr/docs/Web/XPath">XPath</a></li>
  <li><a href="https://www.xml.com/pub/a/2000/08/holman/index.html?page=2#xpath-info" class="external" rel=" noopener">XML Path Language</a> de <em><a href="https://www.xml.com/pub/a/2000/08/holman/" class="external" rel=" noopener">What is XSLT?</a></em> par G. Ken Holman</li>
</ul></div></article><aside class="metadata"><div class="metadata-content-container"><div id="on-github" class="on-github"><h3>Found a problem with this page?</h3><ul><li><a href="https://github.com/mdn/translated-content/edit/main/files/fr/web/xpath/introduction_to_using_xpath_in_javascript/index.md" title="You're going to need to sign in to GitHub first (Opens in a new tab)" target="_blank" rel="noopener noreferrer">Edit on <b>GitHub</b></a></li><li><a href="https://github.com/mdn/translated-content/blob/main/files/fr/web/xpath/introduction_to_using_xpath_in_javascript/index.md" title="Folder: fr/web/xpath/introduction_to_using_xpath_in_javascript (Opens in a new tab)" target="_blank" rel="noopener noreferrer">Source on <b>GitHub</b></a></li><li><a href="https://github.com/mdn/translated-content/issues/new?body=MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Ffr%2Fdocs%2FWeb%2FXPath%2FIntroduction_to_using_XPath_in_JavaScript%0A%0A%23%23%23%23+What+information+was+incorrect%2C+unhelpful%2C+or+incomplete%3F%0A%0A%0A%23%23%23%23+Specific+section+or+headline%3F%0A%0A%0A%23%23%23%23+What+did+you+expect+to+see%3F%0A%0A%0A%23%23%23%23+Did+you+test+this%3F+If+so%2C+how%3F%0A%0A%0A%3C%21--+Do+not+make+changes+below+this+line+--%3E%0A%3Cdetails%3E%0A%3Csummary%3EMDN+Content+page+report+details%3C%2Fsummary%3E%0A%0A*+Folder%3A+%60fr%2Fweb%2Fxpath%2Fintroduction_to_using_xpath_in_javascript%60%0A*+MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Ffr%2Fdocs%2FWeb%2FXPath%2FIntroduction_to_using_XPath_in_JavaScript%0A*+GitHub+URL%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Ftranslated-content%2Fblob%2Fmain%2Ffiles%2Ffr%2Fweb%2Fxpath%2Fintroduction_to_using_xpath_in_javascript%2Findex.md%0A*+Last+commit%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Ftranslated-content%2Fcommit%2F921c46a374ab0a9f4cc809af0370f8c412e54701%0A*+Document+last+modified%3A+2022-10-01T03%3A41%3A16.000Z%0A%0A%3C%2Fdetails%3E&amp;title=Issue+with+%22Introduction+%C3%A0+l%27utilisation+de+XPath+avec+JavaScr%E2%80%A6%22%3A+%28short+summary+here+please%29&amp;labels=needs-triage%2Cl10n-fr" title="This will take you to https://github.com/mdn/content to file a new issue" target="_blank" rel="noopener noreferrer">Report a problem with this content on <b>GitHub</b></a></li><li>Want to fix the problem yourself? See<!-- --> <a href="https://github.com/mdn/content/blob/main/README.md" target="_blank" rel="noopener noreferrer">our Contribution guide</a>.</li></ul></div><p class="last-modified-date"><b>Last modified:</b> <time datetime="2022-10-01T03:41:16.000Z">Oct 1, 2022</time>,<!-- --> <a href="/fr/docs/Web/XPath/Introduction_to_using_XPath_in_JavaScript/contributors.txt">by MDN contributors</a></p><form class="language-menu"><fieldset id="select-language"><legend>Change your language</legend><label for="language-selector" class="visually-hidden">Select your preferred language</label> <select id="language-selector" name="language"><option selected="" value="fr">Français</option><option value="en-US">English (US)</option><option value="es">Español</option><option value="ja">日本語</option><option value="ko">한국어</option><option value="zh-CN">中文 (简体)</option></select> <button type="submit" class="button minimal">Change language</button></fieldset></form></div></aside></main></div><footer id="nav-footer" class="page-footer"><div class="content-container"><div class="page-footer-logo"><a href="/fr/" class="logo" aria-label="MDN Web Docs"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 451.74 135" fill="#fff"><path d="M7.14 8.35v111.06h111.05V8.35zm103.71 56c-.48.92-1 1.79-1.46 2.71a3.44 3.44 0 01-3.54 2 2.4 2.4 0 00-1.55.5c-1.37.9-2.76 1.79-4.18 2.63a7.33 7.33 0 01-6.35.34 29.71 29.71 0 00-10.63-2 11.7 11.7 0 00-9.46 4.31 14.84 14.84 0 00-2.13 4.29c-1.24 3.07-2.3 21.38-2.3 26.05 0 0-17.62-3.42-34.15-20.34l4.31-11.32h-13.5l9.76-10.35h-16.8l9.77-10.34H12.69L30.45 34a40.9 40.9 0 0119.77-10.83c7.1-1.22 8.93-.53 13.31.77l2.43.73.85.25 3.1.95a12.56 12.56 0 006.21.09 11.37 11.37 0 018.25 1 8.24 8.24 0 014.1 6.22 7.29 7.29 0 003.61 5.49 59.45 59.45 0 009.32 4.11c2.27.86 4.54 1.84 6.79 2.72a6.81 6.81 0 012.86 2.06 4.81 4.81 0 011.1 2.73c.14 2 .37 4 .47 6a15.24 15.24 0 01-1.77 8.03zM320.12 39.62a5.42 5.42 0 00-4.53 2.13 7.36 7.36 0 00-1.7 4.43v2.36a6.28 6.28 0 001.7 4.46 5.63 5.63 0 004.3 1.82 5.12 5.12 0 004.57-2.27A9.7 9.7 0 00326 47a8.11 8.11 0 00-1.67-5.52 5.36 5.36 0 00-4.21-1.86zM387.38 39.53a5.52 5.52 0 00-4.7 2.15 8.8 8.8 0 00-1.63 5.49 9.23 9.23 0 001.58 5.45 5.38 5.38 0 004.7 2.25 5.61 5.61 0 004.74-2.2 8.91 8.91 0 001.68-5.59 8.24 8.24 0 00-1.75-5.52 5.76 5.76 0 00-4.62-2.03zM299.47 41.35a4.34 4.34 0 00-4-1.92 4.55 4.55 0 00-3.89 1.73 8.37 8.37 0 00-1.58 4.17h10.48a6.3 6.3 0 00-1.01-3.98zM357.74 30.75H352v23.31h5.72q5.47 0 8.35-3t2.93-8.65q0-5.43-2.88-8.55t-8.38-3.11z"></path><path d="M121.55 8.35v70.8h323V8.35zm42.21 22.45h-4V54h3.68v3.73h-11.25V54h3.31V36.79h-.19l-9.63 19.12h-2.12l-10-19.4h-.19V54h3.45v3.73h-11.15V54h3.68V30.8h-4v-3.73H133l11.66 22.56h.19l11.18-22.56h7.7zm29.12 22.67q-4.11 4.28-11.38 4.28h-14.06v-3.69h3.73V30.75h-3.73v-3.68h13.83q7.59 0 11.66 4.29a15.4 15.4 0 014 11 15.33 15.33 0 01-4.05 11.11zm38.89-22.67h-3.68v27h-2.6L208.08 35h-.19v19h4.67v3.73h-12.22V54h3.49V30.8h-4v-3.73h7.08l16.9 22.09h.19V30.8h-4.58v-3.73h12.32zm43.8 27h-3.31l-7.83-23.18h-.19l-7.55 23.18h-3.35l-8.78-27h-2.65v-3.73H253v3.73h-3.87L255 50.71h.23l6.61-19.91H259v-3.73h11v3.73h-2.78l6.61 20.1h.23l5.43-20.1h-4.15v-3.73h11v3.73h-2.54zm26.71-1.51a9.66 9.66 0 01-6.42 2 10.2 10.2 0 01-7.41-2.74c-1.89-1.82-2.83-4.47-2.83-7.93a12.37 12.37 0 012.64-8.12 9 9 0 017.32-3.21 8.62 8.62 0 016.75 2.69 9.65 9.65 0 012.45 6.52 13.67 13.67 0 01-.28 2.69H290q.29 6.71 6.18 6.7a5.2 5.2 0 003.71-1.18 5.82 5.82 0 001.67-2.83l3.45.71a7.21 7.21 0 01-2.73 4.65zm25.77-1.63c-1.51 2.4-3.92 3.61-7.22 3.61s-5.84-1.29-7.22-3.87c0 .25-.1.82-.21 1.7s-.19 1.44-.22 1.7H309c.16-1 .31-2 .47-3.07a21.42 21.42 0 00.24-3.16v-23h-3.4v-3.3h7.55V40.9a9.76 9.76 0 012.67-3.28 7.33 7.33 0 014.74-1.4 8.48 8.48 0 016.5 2.78q2.55 2.74 2.55 7.74a14.6 14.6 0 01-2.27 7.87zm41.39-1.14q-4.11 4.28-11.37 4.28H344v-3.74h3.73V30.75H344v-3.68h13.83q7.59 0 11.66 4.29a15.41 15.41 0 014.06 11 15.34 15.34 0 01-4.11 11.11zm25.65 1.68a10.53 10.53 0 01-7.9 3.07 10 10 0 01-7.63-3 10.93 10.93 0 01-2.8-7.83 12.13 12.13 0 012.69-7.93q2.69-3.3 8-3.3t8 3.28a12 12 0 012.64 7.76 10.86 10.86 0 01-3 7.9zm22.61.57c-1.4 1.66-3.63 2.5-6.68 2.5a9.58 9.58 0 01-7.15-2.76q-2.72-2.76-2.71-7.91a12.25 12.25 0 012.69-8 9.17 9.17 0 017.5-3.28 15 15 0 013.82.48 10.37 10.37 0 013.5 1.65l.85 5.47-3.35.38-.76-3.54a8.07 8.07 0 00-4.11-1 4.9 4.9 0 00-4.39 2.15 9.93 9.93 0 00-1.41 5.55 8.9 8.9 0 001.5 5.38 5.23 5.23 0 004.44 2c2.92 0 4.67-1.7 5.23-5.1l3.5.71a10.34 10.34 0 01-2.47 5.27zm20.48.75a11.68 11.68 0 01-6.63 1.75 15.52 15.52 0 01-8.26-2.08L424 51l3.26.33-.1 2.74a7 7 0 002.06.66 12.63 12.63 0 002.19.19 8.68 8.68 0 003.66-.75 2.5 2.5 0 001.63-2.36 2.25 2.25 0 00-1.32-2.2 12.65 12.65 0 00-3.28-1 47.39 47.39 0 01-3.9-.82 7.5 7.5 0 01-3.25-1.7 4.67 4.67 0 01-1.33-3.66c0-2.36.88-4 2.62-4.91a12 12 0 015.6-1.37 15 15 0 014.08.55 16.65 16.65 0 013.47 1.39l.47 5.1-3.3.37-.48-3.3a9.5 9.5 0 00-4.06-.9 5.62 5.62 0 00-2.87.66 2.33 2.33 0 00-1.15 2.25 2.13 2.13 0 001.3 2.07 11.91 11.91 0 003.21.92 36.69 36.69 0 013.82.83 7.46 7.46 0 013.21 1.74 4.9 4.9 0 011.3 3.73 5.56 5.56 0 01-2.66 4.91z"></path><path d="M181.17 30.75h-5.71v23.31h5.71q5.47 0 8.36-3t2.88-8.61q0-5.43-2.88-8.55t-8.36-3.15zM121.63 119.32V81.74h114.91v37.58zM153.22 109h-2v-6.85a4.8 4.8 0 00-1.58-4 5.57 5.57 0 00-3.55-1.26 5 5 0 00-4.92 3.26 4.19 4.19 0 00-1.88-2.46 5.82 5.82 0 00-3-.8 4.89 4.89 0 00-4.56 2.56v-2.21h-6.28v3.26h2v8.5h-2v3.23h9.11V109h-2.86v-5.25a4.4 4.4 0 01.69-2.56 2.47 2.47 0 012.21-1q2.57 0 2.56 3.63v8.41h6.29V109h-2v-5.25a4.47 4.47 0 01.67-2.56 2.42 2.42 0 012.19-1q2.63 0 2.63 3.63v8.41h6.28zm9.88-12.07q-4 0-6 2.36a8.41 8.41 0 00-2 5.66 7.25 7.25 0 002.17 5.62 8 8 0 005.65 2 8.54 8.54 0 005.94-2.11 7.27 7.27 0 002.34-5.67 8.21 8.21 0 00-2-5.51q-2.07-2.34-6.1-2.34zm-.1 12.35a3 3 0 01-2.63-1.33 5.68 5.68 0 01-.9-3.26 5 5 0 011-3.28 3.23 3.23 0 012.61-1.18 3.5 3.5 0 012.59 1.08 4.56 4.56 0 011.07 3.31 5.21 5.21 0 01-1 3.41 3.33 3.33 0 01-2.74 1.25zm25-2.3l-3.39-.29-.7 2.32H179l8.32-9.54-.32-2.23h-13.19l-.53 5.25 3.16.34.67-2.36h4.65l-8.25 9.53.44 2.26h13.13zm7.62-9.74h-4.46v5.39h4.46zm0 9.61h-4.46v5.39h4.46zm13.54-17.49h-4.23l-6.48 22.88h4.22zm8.68 0h-4.23l-6.45 22.88h4.19zm15 22.51l-.07-2.26a1.22 1.22 0 01-.56.1c-.69 0-1-.39-1-1.16v-6.49a4.39 4.39 0 00-1.8-3.84 7 7 0 00-4.16-1.28 14.55 14.55 0 00-3.16.3 24.14 24.14 0 00-3.29 1.06l-.56 3.46 3.39.4.5-1.69a2.78 2.78 0 011.08-.37 11.3 11.3 0 011.25-.07c1.19 0 1.89.37 2.09 1.1a8.55 8.55 0 01.3 2.26v.5a8.91 8.91 0 00-1.18-.11h-1.21a12.64 12.64 0 00-4.81.88 3.53 3.53 0 00-2.18 3.64 3.66 3.66 0 001.48 3.33 5.63 5.63 0 003.11 1 4.67 4.67 0 003-.91 6.78 6.78 0 001.8-2 3 3 0 003.33 3 5.54 5.54 0 002.66-.85zm-9.25-2.32a1.69 1.69 0 01-1.36-.52 1.81 1.81 0 01-.43-1.21 1.67 1.67 0 01.86-1.68 4.63 4.63 0 012-.42 7.69 7.69 0 011.07.07l1.06.13a3.58 3.58 0 01-1.08 2.74 3.24 3.24 0 01-2.11.89z"></path></svg></a></div><ul class="link-list-mdn"><li><a href="/fr/docs/Web">Web Technologies</a></li><li><a href="/fr/docs/Learn">Learn Web Development</a></li><li><a href="/fr/docs/MDN/About">About MDN</a></li><li><a href="/fr/docs/MDN/Feedback">Feedback</a></li></ul><ul class="link-list-moz"><li><a href="https://www.mozilla.org/about/" target="_blank" rel="noopener noreferrer">About</a></li><li><a href="https://shop.spreadshirt.com/mdn-store/" target="_blank" rel="noopener noreferrer">MDN Web Docs Store</a></li><li><a href="https://www.mozilla.org/contact/" target="_blank" rel="noopener noreferrer">Contact Us</a></li><li><a href="https://www.mozilla.org/firefox/?utm_source=developer.mozilla.org&amp;utm_campaign=footer&amp;utm_medium=referral" target="_blank" rel="noopener noreferrer">Firefox</a></li></ul><div class="social social-mdn"><h4>MDN</h4><ul><li><a class="social-icon twitter" href="https://twitter.com/mozdevnet" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">MDN on Twitter</span></a></li><li><a class="social-icon github" href="https://github.com/mdn/" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">MDN on Github</span></a></li></ul></div><div class="social social-moz"><h4>Mozilla</h4><ul><li><a class="social-icon twitter" href="https://twitter.com/mozilla" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">Mozilla on Twitter</span></a></li><li><a class="social-icon instagram" href="https://www.instagram.com/mozillagram/" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">Mozilla on Instagram</span></a></li></ul></div><p id="license" class="footer-license">© 2005-<!-- -->2022<!-- --> Mozilla and individual contributors. Content is available under<!-- --> <a href="/docs/MDN/About#Copyrights_and_licenses">these licenses</a>.</p><ul class="footer-legal"><li><a href="https://www.mozilla.org/about/legal/terms/mozilla" target="_blank" rel="noopener noreferrer">Terms</a></li><li><a href="https://www.mozilla.org/privacy/websites/" target="_blank" rel="noopener noreferrer">Privacy</a></li><li><a href="https://www.mozilla.org/privacy/websites/#cookies" target="_blank" rel="noopener noreferrer">Cookies</a></li></ul></div></footer><div class="page-overlay hidden"></div></div><script type="application/json" id="hydration">{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"Introduction à l'utilisation de XPath avec JavaScript","mdn_url":"/fr/docs/Web/XPath/Introduction_to_using_XPath_in_JavaScript","locale":"fr","native":"Français","sidebarHTML":"","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>Ce document décrit l'interface pour utiliser <a href=\"/fr/docs/Web/XPath\">XPath</a> dans JavaScript, que ce soit en interne, dans les extensions et depuis les sites Web. Mozilla implémente une partie importante de <a href=\"https://www.w3.org/TR/2004/NOTE-DOM-Level-3-XPath-20040226/\" class=\"external\" rel=\" noopener\">DOM 3 XPath (en)</a>. Cela signifie que les expressions XPath peuvent être utilisées sur des documents HTML et XML.</p>\n<p>La principale interface pour l'utilisation de XPath est la fonction <a href=\"/fr/docs/Web/API/Document/evaluate\"><code>evaluate()</code></a> de l'objet <a href=\"/fr/docs/Web/API/Document\"><code>document</code></a>.</p>"}},{"type":"prose","value":{"id":"document.evaluate","title":"document.evaluate()","isH3":false,"content":"<p>Cette méthode évalue les expressions <a href=\"/fr/docs/Web/XPath\">XPath</a> dans un document <a href=\"/fr/docs/Web/XML\">XML</a> (y compris les documents HTML), et retourne un objet <a href=\"/fr/docs/Web/XPath/XPathResult\" class=\"page-not-created\" title=\"This is a link to an unwritten page\"><code>XPathResult</code></a>, qui peut être un nœud unique ou un ensemble de nœuds. La documentation existante sur cette méthode se trouve à la page <a href=\"/fr/docs/Web/API/Document/evaluate\"><code>document.evaluate</code></a> mais elle est plutôt succincte comparée à nos besoins actuels. Nous l'examinerons de façon plus complète dans la suite de ce document.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> xpathResult <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">evaluate</span><span class=\"token punctuation\">(</span> xpathExpression<span class=\"token punctuation\">,</span> contextNode<span class=\"token punctuation\">,</span> namespaceResolver<span class=\"token punctuation\">,</span> resultType<span class=\"token punctuation\">,</span> result <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"paramètres","title":"Paramètres","isH3":true,"content":"<p>La fonction <a href=\"/fr/docs/Web/API/Document/evaluate\">evaluate</a> prend cinq arguments au total :</p>\n<dl>\n  <dt id=\"xpathexpression\"><code>xpathExpression</code></dt>\n  <dd>\n    <p>Une chaîne contenant l'expression XPath à évaluer.</p>\n  </dd>\n  <dt id=\"contextnode\"><code>contextNode</code></dt>\n  <dd>\n    <p>Un nœud du document pour lequel l'expression <code>xpathExpression</code> doit être évaluée, ainsi que l'ensemble de ses descendants. Le nœud <a href=\"/fr/docs/Web/API/Document\">document</a> est le plus couramment utilisé.</p>\n  </dd>\n  <dt id=\"namespaceresolver\"><code>namespaceResolver</code></dt>\n  <dd>\n    <p>Une fonction à laquelle sera passé tout préfixe d'espace de nommage contenu dans l'expression <code>xpathExpression</code> et qui renvoie une chaîne représentant l'URI de l'espace de nommage associé à ce préfixe. Cela permet la conversion entre le préfixe utilisé dans les expressions XPath et les différents préfixes éventuellement utilisés dans le document. Cette fonction peut être :</p>\n  </dd>\n</dl><!---->\n<ul>\n  <li><a href=\"#impl.c3.a9mentation_d.27un_r.c3.a9solveur_d.27espaces_de_nommage_par_d.c3.a9faut\">Créée</a> à l'aide de la méthode <a href=\"/fr/docs/Web/API/Document/createNSResolver\"><code>createNSResolver</code></a> d'un objet <a href=\"http://www.xulplanet.com/references/objref/XPathEvaluator.html\" class=\"external\" rel=\" noopener\"><code>XPathEvaluator</code></a>. C'est la solution à utiliser à peu près tout le temps.</li>\n  <li>Une valeur <code>null</code>, qui peut être utilisé pour les documents HTML ou lorsqu'aucun préfixe n'est utilisé. Remarquez que si l'expression <code>xpathExpression</code> contient un préfixe d'espace de nommage cela déclenchera une exception <code>DOMException</code> portant le code <code>NAMESPACE_ERR</code>.</li>\n  <li>Une fonction personnalisée définie par l'utilisateur. Voir la section <a href=\"#impl.c3.a9mentation_d.27un_r.c3.a9solveur_d.27espace_de_nommage_personnalis.c3.a9\">Implémentation d'un résolveur d'espace de nommage personnalisé</a> dans l'annexe pour plus de détails.</li>\n</ul><!---->\n<dl>\n  <dt id=\"resulttype\"><code>resultType</code></dt>\n  <dd>\n    <p>Une <a href=\"#constantes_d.c3.a9finies_de_xpathresult\">constante</a> qui définit le type de résultat à renvoyer comme résultat de l'évaluation. La constante la plus courante est <code>XPathResult.ANY_TYPE</code> qui renverra un résultat du type le plus naturel par rapport à l'expression XPath. Une section de l'annexe contient une liste complète des <a href=\"#constantes_d.c3.a9finies_de_xpathresult\">constantes disponibles</a>. Elles sont expliquées dans la section <a href=\"#d.c3.a9finition_du_type_de_retour\">#Définition du type de retour</a> ci-dessous.</p>\n  </dd>\n  <dt id=\"result\"><code>result</code></dt>\n  <dd>\n    <p>Soit un objet <code>XPathResult</code> existant qui sera réutilisé pour contenir les résultats, soit la valeur <code>null</code> qui peut être utilisée pour créer un nouvel objet <code>XPathResult</code>.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"valeur_de_retour","title":"Valeur de retour","isH3":true,"content":"<p>Renvoie <code>xpathResult</code>, qui est un objet <code>XPathResult</code> du type <a href=\"#d.c3.a9finition_du_type_de_retour\">défini</a> dans le paramètre <code>resultType</code>. L'interface <code>XPathResult</code> est définie dans ce <a href=\"/en-US/docs/Web/API/XPathResult\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">document (en-US)</a>.</p>"}},{"type":"prose","value":{"id":"implémentation_dun_résolveur_despaces_de_nommage_par_défaut","title":"Implémentation d'un résolveur d'espaces de nommage par défaut","isH3":true,"content":"<p>On crée un résolveur d'espace de nommage à l'aide de la méthode <code>createNSResolver</code> de l'objet <a href=\"/fr/docs/Web/API/Document\">document</a>.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> nsResolver <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createNSResolver</span><span class=\"token punctuation\">(</span> contextNode<span class=\"token punctuation\">.</span>ownerDocument <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">?</span> contextNode<span class=\"token punctuation\">.</span>documentElement <span class=\"token operator\">:</span> contextNode<span class=\"token punctuation\">.</span>ownerDocument<span class=\"token punctuation\">.</span>documentElement <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Ou alternativement en utilisant la méthode &lt;code&gt;createNSResolver&lt;/code&gt; d'un objet &lt;code&gt;XPathEvaluator&lt;/code&gt;. &lt;pre&gt; var xpEvaluator = new XPathEvaluator(); var nsResolver = xpEvaluator.createNSResolver( contextNode.ownerDocument == null ? contextNode.documentElement : contextNode.ownerDocument.documentElement ); &lt;/pre&gt; On lui passe ensuite <code>document.evaluate</code>, la variable <code>nsResolver</code> comme paramètre <code>namespaceResolver</code>.</p>\n<p>véracité du paragraphe suivant à vérifier avec la doc du w3c Notez que XPath définit que les <code>QNames</code> sans préfixe correspondent uniquement aux éléments de l'espace de nommage <code>null</code>. Il n'existe aucun moyen dans XPath pour récupérer l'espace de nommage par défaut. Pour coupler des éléments ou des attributs dans un espace de nommage non nul, vous devrez détecter les noms préfixés, et créer un résolveur d'espace de nommage qui fera correspondre le préfixe avec l'espace de nommage. Vous en saurez plus sur la façon de <a href=\"#impl.c3.a9mentation_d.27un_r.c3.a9solveur_d.27espace_de_nommage_personnalis.c3.a9\">créer un résolveur d'espace de nommage personnalisé</a> ci-dessous.</p>"}},{"type":"prose","value":{"id":"définition_du_type_de_retour","title":"Définition du type de retour","isH3":true,"content":"<p>La variable <code>xpathResult</code> renvoyée par <code>document.evaluate</code> peut être composée de nœuds individuels (<a href=\"#types_simples\">types simples</a>), ou un groupe de nœuds (<a href=\"#types_d.27ensembles_de_n.c5.93uds\">types d'ensembles de nœuds</a>).</p>\n<h4 id=\"types_simples\">Types simples</h4>\n<p>Lorsque le type de résultat spécifié dans <code>resultType</code> est soit :</p>\n<ul>\n  <li><code>NUMBER_TYPE</code> — un nombre</li>\n  <li><code>STRING_TYPE</code> — une chaîne</li>\n  <li><code>BOOLEAN_TYPE</code> — une valeur booléenne</li>\n</ul>\n<p>On obtiendra la valeur de retour de l'expression en accédant respectivement aux propriétés suivantes de l'objet <code>XPathResult</code> :</p>\n<ul>\n  <li><code>numberValue</code></li>\n  <li><code>stringValue</code></li>\n  <li><code>booleanValue</code></li>\n</ul>\n<h5 id=\"exemple\">Exemple</h5>\n<p>Cet exemple utilise l'expression XPath <a href=\"/fr/docs/Web/XPath/Functions/count\"><code>count(//p)</code></a> pour obtenir le nombre d'éléments <code>&lt;p&gt;</code> présents dans le document HTML :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> paragraphCount <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">evaluate</span><span class=\"token punctuation\">(</span> <span class=\"token string\">'count(//p)'</span><span class=\"token punctuation\">,</span> document<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> XPathResult<span class=\"token punctuation\">.</span><span class=\"token constant\">ANY_TYPE</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span> <span class=\"token string\">'Ce document contient '</span> <span class=\"token operator\">+</span> paragraphCount<span class=\"token punctuation\">.</span>numberValue <span class=\"token operator\">+</span> <span class=\"token string\">' éléments de paragraphe'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Même si JavaScript convertira un nombre en chaîne pour l'affichage, l'interface XPath ne fera pas automatiquement la conversion du résultat numérique si la propriété <code>stringValue</code> est demandée. Ainsi, le code suivant ne fonctionnera <strong>pas</strong> :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> paragraphCount <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">evaluate</span><span class=\"token punctuation\">(</span><span class=\"token string\">'count(//p)'</span><span class=\"token punctuation\">,</span> document<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> XPathResult<span class=\"token punctuation\">.</span><span class=\"token constant\">ANY_TYPE</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span> <span class=\"token string\">'Ce document contient '</span> <span class=\"token operator\">+</span> paragraphCount<span class=\"token punctuation\">.</span>stringValue <span class=\"token operator\">+</span> <span class=\"token string\">' éléments de paragraphe'</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Au lieu de cela, il déclenchera une exception portant le code <code>NS_DOM_TYPE_ERROR</code>.</p>\n<h4 id=\"types_densembles_de_nœuds\">Types d'ensembles de nœuds</h4>\n<p>L'objet <code>XPathResult</code> permet de renvoyer les ensembles de nœuds sous la forme de trois types principaux :</p>\n<ul>\n  <li><a href=\"#it.c3.a9rateurs\">Itérateurs</a></li>\n  <li><a href=\"#snapshots\">Snapshots</a></li>\n  <li><a href=\"#premiers_n.c5.93uds\">Premiers nœuds</a></li>\n</ul>\n<h5 id=\"itérateurs\">Itérateurs</h5>\n<p>Lorsque le type de résultat spécifié dans le paramètre <code>resultType</code> est soit :</p>\n<ul>\n  <li><code>UNORDERED_NODE_ITERATOR_TYPE</code></li>\n  <li><code>ORDERED_NODE_ITERATOR_TYPE</code></li>\n</ul>\n<p>L'objet <code>XPathResult</code> renvoyé sera un ensemble de nœuds correspondant à l'expression se comportant comme un itérateur. On pourra accéder individuellement aux nœuds qu'il contient en utilisant la méthode <a href=\"/fr/docs/Web/XPathResult/IterateNext\" class=\"page-not-created\" title=\"This is a link to an unwritten page\"><code>iterateNext()</code></a> de l'objet <code>XPathResult</code>.</p>\n<p>Lorsque tous les nœuds ont été parcourus, <a href=\"/fr/docs/Web/XPathResult/IterateNext\" class=\"page-not-created\" title=\"This is a link to an unwritten page\"><code>iterateNext()</code></a> renverra <code>null</code>.</p>\n<p>Notez cependant que si le document est modifié (l'arbre du document est modifié) entre les itérations, l'itérateur sera invalidé et la propriété <code>invalidIteratorState</code> de <code>XPathResult</code> deviendra <code>true</code>. Une exception <code>NS_ERROR_DOM_INVALID_STATE_ERR</code> sera également déclenchée.</p>\n<h6 id=\"exemple_ditérateur\">Exemple d'itérateur</h6>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> iterator <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">evaluate</span><span class=\"token punctuation\">(</span><span class=\"token string\">'//phoneNumber'</span><span class=\"token punctuation\">,</span> documentNode<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> XPathResult<span class=\"token punctuation\">.</span><span class=\"token constant\">UNORDERED_NODE_ITERATOR_TYPE</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> thisNode <span class=\"token operator\">=</span> iterator<span class=\"token punctuation\">.</span><span class=\"token function\">iterateNext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>thisNode<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span> thisNode<span class=\"token punctuation\">.</span>textContent <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    thisNode <span class=\"token operator\">=</span> iterator<span class=\"token punctuation\">.</span><span class=\"token function\">iterateNext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span> <span class=\"token string\">'Erreur : L\\'arbre du document a été modifié pendant l\\'itération '</span> <span class=\"token operator\">+</span> e <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<h5 id=\"snapshots\">Snapshots</h5>\n<p>Lorsque le type de résultat spécifié dans le paramètre <code>resultType</code> est l'une des valeurs suivantes :</p>\n<ul>\n  <li><code>UNORDERED_NODE_SNAPSHOT_TYPE</code></li>\n  <li><code>ORDERED_NODE_SNAPSHOT_TYPE</code></li>\n</ul>\n<p>L'objet <code>XPathResult</code> renvoyé sera un ensemble statique de nœuds correspondant à l'expression. L'accès à chaque nœud se fera au travers de la méthode <a href=\"/fr/docs/Web/XPathResult/SnapshotItem\" class=\"page-not-created\" title=\"This is a link to an unwritten page\"><code>snapshotItem(itemNumber)</code></a> de l'objet <code>XPathResult</code>, où <code>itemNumber</code> est l'indice du nœud à récupérer. On peut accéder au nombre total de nœuds contenus dans l'ensemble par la propriété <code>snapshotLength</code>.</p>\n<p>Les snapshots ne changent pas avec les mutations du document. Aussi, contrairement aux itérateurs, le snapshot ne deviendra pas invalide mais peut ne plus correspondre au document actuel. Par exemple, des nœuds peuvent avoir été déplacés, il peut contenir des nœuds qui n'existent plus ou de nouveaux nœuds peuvent avoir été ajoutés.</p>\n<h6 id=\"exemple_de_snapshot\">Exemple de snapshot</h6>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> nodesSnapshot <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">evaluate</span><span class=\"token punctuation\">(</span><span class=\"token string\">'//phoneNumber'</span><span class=\"token punctuation\">,</span> documentNode<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> XPathResult<span class=\"token punctuation\">.</span><span class=\"token constant\">ORDERED_NODE_SNAPSHOT_TYPE</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span> <span class=\"token keyword\">var</span> i<span class=\"token operator\">=</span><span class=\"token number\">0</span> <span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> nodesSnapshot<span class=\"token punctuation\">.</span>snapshotLength<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span> nodesSnapshot<span class=\"token punctuation\">.</span><span class=\"token function\">snapshotItem</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>textContent <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<h5 id=\"premier_nœud\">Premier nœud</h5>\n<p>Lorsque le type de résultat spécifié dans le paramètre <code>resultType</code> est l'une des valeurs suivantes :</p>\n<ul>\n  <li><code>ANY_UNORDERED_NODE_TYPE</code></li>\n  <li><code>FIRST_ORDERED_NODE_TYPE</code></li>\n</ul>\n<p>L'objet <code>XPathResult</code> renvoyé n'est que le premier nœud trouvé correspondant à l'expression XPath. On peut y accéder à l'aide de la propriété <code>singleNodeValue</code> de l'objet <code>XPathResult</code>. Celle-ci vaudra <code>null</code> si l'ensemble de nœuds est vide.</p>\n<p>Notez que pour le sous-type non ordonné (le premier), le nœud unique renvoyé ne sera peut-être pas le premier nœud dans l'ordre du document. Dans le cas du sous-type ordonné (le second), vous pouvez être sûr d'obtenir le premier nœud correspondant dans l'ordre du document.</p>\n<h6 id=\"exemple_de_premier_nœud\">Exemple de premier nœud</h6>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> firstPhoneNumber <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">evaluate</span><span class=\"token punctuation\">(</span><span class=\"token string\">'//phoneNumber'</span><span class=\"token punctuation\">,</span> documentNode<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> XPathResult<span class=\"token punctuation\">.</span><span class=\"token constant\">FIRST_ORDERED_NODE_TYPE</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span> <span class=\"token string\">'Le premier numéro de téléphone trouvé est '</span> <span class=\"token operator\">+</span> firstPhoneNumber<span class=\"token punctuation\">.</span>singleNodeValue<span class=\"token punctuation\">.</span>textContent <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<h4 id=\"la_constante_any_type\">La constante ANY_TYPE</h4>\n<p>Lorsque le type de résultat spécifié dans le paramètre <code>resultType</code> est la valeur <code>ANY_TYPE</code>, l'objet <code>XPathResult</code> renvoyé pourra être de n'importe quel type, c'est-à-dire du type résultant le plus naturellement de l'évaluation de l'expression.</p>\n<p>Il peut s'agir de n'importe lequel des types simples (<code>NUMBER_TYPE, STRING_TYPE, BOOLEAN_TYPE</code>), <strong>mais</strong> si le type du résultat retourné est un ensemble de nœuds alors il ne pourra être <strong>que</strong> du type <code>UNORDERED_NODE_ITERATOR_TYPE</code>.</p>\n<p>Pour déterminer le type utilisé après l'évaluation, on utilisera la propriété <code>resultType</code> de l'objet <code>XPathResult</code>. Les valeurs <a href=\"#constantes_d.c3.a9finies_de_xpathresult\">constantes</a> de cette propriété sont définies dans l'annexe.</p>\n<p>None Yet =====Exemple Any_Type===== &lt;pre&gt; &lt;/pre&gt;</p>"}},{"type":"prose","value":{"id":"exemples","title":"Exemples","isH3":false,"content":""}},{"type":"prose","value":{"id":"dans_un_document_html","title":"Dans un document HTML","isH3":true,"content":"<p>Le code suivant est destiné à être inséré dans un fragment JavaScript intégré ou lié au document HTML qui devra être évalué par l'expression XPath.</p>\n<p>Pour extraire tous les éléments d'en-tête <code>&lt;h2&gt;</code> d'un document HTML à l'aide de XPath, l'expression <code>xpathExpression</code> est simplement '<code>//h2</code>', où <code>//</code> est l'opérateur descendant récursif (ou RDO) qui correspond aux éléments dont la propriété <code>nodeName</code> est <code>h2</code> n'importe où dans l'arbre du document. Le code complet pour cela est : link to introductory xpath doc</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> headings <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">evaluate</span><span class=\"token punctuation\">(</span><span class=\"token string\">'//h2'</span><span class=\"token punctuation\">,</span> document<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> XPathResult<span class=\"token punctuation\">.</span><span class=\"token constant\">ANY_TYPE</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Notez que, comme HTML ne possède pas d'espace de nommage, <code>null</code> a été passé comme paramètre <code>namespaceResolver</code>.</p>\n<p>Comme le but est de chercher les en-têtes dans l'intégralité du document, on utilise l'objet <a href=\"/fr/docs/Web/API/Document\">document</a> lui-même comme paramètre <code>contextNode</code>.</p>\n<p>Le résultat de cette expression est un objet <code>XPathResult</code>. Pour connaître le type de résultat renvoyé, il convient d'évaluer la propriété <code>resultType</code> de l'objet renvoyé. Dans notre cas, il sera évalué à <code>4</code>, c'est donc un <code>UNORDERED_NODE_ITERATOR_TYPE</code>. Il s'agit du type de retour par défaut lorsque le résultat de l'expression XPath est un ensemble de nœuds. Il permet d'accéder à un seul nœud à la fois et ne renvoie pas les nœuds dans un ordre particulier. Pour accéder à ceux-ci, on utilise la méthode <code>iterateNext()</code> de l'objet renvoyé :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> thisHeading <span class=\"token operator\">=</span> headings<span class=\"token punctuation\">.</span><span class=\"token function\">iterateNext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> alertText <span class=\"token operator\">=</span> <span class=\"token string\">'Les en-têtes de niveau 2 présents dans ce document sont :\\n'</span>\n\n<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>thisHeading<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  alertText <span class=\"token operator\">+=</span> thisHeading<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">+</span> <span class=\"token string\">'\\n'</span><span class=\"token punctuation\">;</span>\n  thisHeading <span class=\"token operator\">=</span> headings<span class=\"token punctuation\">.</span><span class=\"token function\">iterateNext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Une fois l'itération effectuée sur un nœud, nous avons accès à toutes les <a href=\"/fr/docs/Web/API/Document_Object_Model#interfaces_du_dom\">Interfaces DOM</a> standards de ce nœud. Après avoir parcouru tous les éléments <code>h2</code> renvoyés à partir de notre expression, chaque nouvel appel à <code>iterateNext()</code> donnera <code>null</code>.</p>"}},{"type":"prose","value":{"id":"évaluation_dun_document_xml_appartenant_à_une_extension","title":"Évaluation d'un document XML appartenant à une extension","isH3":true,"content":"<p>L'exemple suivant utilise un document XML situé à l'adresse <a href=\"\"><code>chrome://yourextension/content/peopleDB.xml</code></a>.</p>\n<div class=\"code-example\"><pre class=\"brush: xml notranslate\"><code><span class=\"token prolog\">&lt;?xml version=\"1.0\"?&gt;</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>people</span> <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>xul</span> <span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span> <span class=\"token punctuation\">\"</span>http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>person</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span> <span class=\"token attr-name\">first</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>george<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">last</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>bush<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>address</span> <span class=\"token attr-name\">street</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1600 pennsylvania avenue<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">city</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>washington<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">country</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>usa<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>phoneNumber</span><span class=\"token punctuation\">&gt;</span></span>202-456-1111<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>phoneNumber</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>person</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>person</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>name</span> <span class=\"token attr-name\">first</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tony<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">last</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>blair<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>address</span> <span class=\"token attr-name\">street</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>10 downing street<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">city</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>london<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">country</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>uk<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>phoneNumber</span><span class=\"token punctuation\">&gt;</span></span>020 7925 0918<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>phoneNumber</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>person</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>people</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<p>Pour rendre les contenus du document XML accessibles depuis l'extension, on crée un objet <a href=\"/fr/docs/Web/API/XMLHttpRequest\"><code>XMLHttpRequest</code></a> pour charger le document de façon synchrone. La variable <code>xmlDoc</code> contiendra le document comme un objet <a href=\"/fr/docs/Web/API/XMLDocument\"><code>XMLDocument</code></a> sur lequel on pourra utiliser la méthode <code>evaluate</code>.</p>\n<p><em>JavaScript utilisé dans les documents XUL/js des extensions.</em></p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> req <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nreq<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"GET\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"chrome://yourextension/content/peopleDB.xml\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nreq<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> xmlDoc <span class=\"token operator\">=</span> req<span class=\"token punctuation\">.</span>responseXML<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> nsResolver <span class=\"token operator\">=</span> xmlDoc<span class=\"token punctuation\">.</span><span class=\"token function\">createNSResolver</span><span class=\"token punctuation\">(</span> xmlDoc<span class=\"token punctuation\">.</span>ownerDocument <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">?</span> xmlDoc<span class=\"token punctuation\">.</span>documentElement <span class=\"token operator\">:</span> xmlDoc<span class=\"token punctuation\">.</span>ownerDocument<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> personIterator <span class=\"token operator\">=</span> xmlDoc<span class=\"token punctuation\">.</span><span class=\"token function\">evaluate</span><span class=\"token punctuation\">(</span><span class=\"token string\">'//person'</span><span class=\"token punctuation\">,</span> xmlDoc<span class=\"token punctuation\">,</span> nsResolver<span class=\"token punctuation\">,</span> XPathResult<span class=\"token punctuation\">.</span><span class=\"token constant\">ANY_TYPE</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<h4 id=\"note\">Note</h4>\n<p>Quant l'objet XPathResult n'est pas défini, les constantes peuvent être récupérées dans du code privilégié avec <code>Components.inertfaces.nsIDOMXPathResult.ANY_TYPE(CI.nsIDOMXPathResult)</code>. De la même manière un objet XPathEvaluator peut être créé en utilisant :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>Components<span class=\"token punctuation\">.</span>classes<span class=\"token punctuation\">[</span><span class=\"token string\">\"@mozille.org/dom/xpath-evaluator;1\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">createInstance</span><span class=\"token punctuation\">(</span>Components<span class=\"token punctuation\">.</span>interfaces<span class=\"token punctuation\">.</span>nsIDOMXPathEvaluator<span class=\"token punctuation\">)</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"annexe","title":"Annexe","isH3":false,"content":"<h4 id=\"implémentation_dun_résolveur_despace_de_nommage_personnalisé\">Implémentation d'un résolveur d'espace de nommage personnalisé</h4>\n<p>Cet exemple ne sert que d'illustration. Cette fonction nécessitera de prendre les préfixes d'espaces de nommage depuis la <code>xpathExpression</code> et retourne l'URI correspondante à ces préfixes. Par exemple, l'expression :</p>\n<pre class=\"notranslate\">'//xhtml:td/mathml:math'\n</pre>\n<p>sélectionnera toutes les expressions <a href=\"/fr/MathML\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">MathML</a> qui sont les descendantes des éléments (X)HTML de cellules de tableau.</p>\n<p>Afin d'associer le préfixe <code>mathml:</code> avec l'URI d'espace de nommage '<a href=\"https://www.w3.org/1998/Math/MathML\" class=\"external\" rel=\" noopener\"><code>http://www.w3.org/1998/Math/MathML</code></a>' et <code>xhtml:</code> avec l'URI <a href=\"https://www.w3.org/1999/xhtml\" class=\"external\" rel=\" noopener\"><code>http://www.w3.org/1999/xhtml</code></a>, nous fournissons une fonction :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">nsResolver</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prefix</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> ns <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string-property property\">'xhtml'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'http://www.w3.org/1999/xhtml'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string-property property\">'mathml'</span><span class=\"token operator\">:</span> <span class=\"token string\">'http://www.w3.org/1998/Math/MathML'</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> ns<span class=\"token punctuation\">[</span>prefix<span class=\"token punctuation\">]</span> <span class=\"token operator\">||</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>L'appel à <code>document.evaluate</code> ressemblera alors à :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>document<span class=\"token punctuation\">.</span><span class=\"token function\">evaluate</span><span class=\"token punctuation\">(</span> <span class=\"token string\">'//xhtml:td/mathml:math'</span><span class=\"token punctuation\">,</span> document<span class=\"token punctuation\">,</span> nsResolver<span class=\"token punctuation\">,</span> XPathResult<span class=\"token punctuation\">.</span><span class=\"token constant\">ANY_TYPE</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<h4 id=\"implémentation_dun_espace_de_nommage_par_défaut_pour_les_documents_xml\">Implémentation d'un espace de nommage par défaut pour les documents XML</h4>\n<p>Comme nous l'avons vu précédemment dans la section <a href=\"#impl.c3.a9mentation_d.27un_r.c3.a9solveur_d.27espaces_de_nommage_par_d.c3.a9faut\">#Implémentation d'un résolveur d'espaces de nommage par défaut</a>, le résolveur par défaut ne gère pas l'espace de nommage par défaut pour les documents XML. Par exemple, avec ce document :</p>\n<div class=\"code-example\"><pre class=\"brush: xml notranslate\"><code><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>feed</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2005/Atom<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>entry</span> <span class=\"token punctuation\">/&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>entry</span> <span class=\"token punctuation\">/&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>entry</span> <span class=\"token punctuation\">/&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>feed</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<p><code>doc.evaluate('//entry', doc, nsResolver, XPathResult.ANY_TYPE, null)</code> retournera un ensemble vide, où <code>nsResolver</code> est le résolveur retourné par <code>createNSResolver</code>. Passé un résolveur <code>null</code> ne fonctionne pas mieux.</p>\n<p>Une alternative possible est de créer un résolveur personnalisé qui retournera le bon espace de nommage (l'espace de nommage <em>Atom</em> dans ce cas). Par exemple :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">resolver</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token string\">'http://www.w3.org/2005/Atom'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\ndoc<span class=\"token punctuation\">.</span><span class=\"token function\">evaluate</span><span class=\"token punctuation\">(</span><span class=\"token string\">'//entry'</span><span class=\"token punctuation\">,</span> doc<span class=\"token punctuation\">,</span> resolver<span class=\"token punctuation\">,</span> XPathResult<span class=\"token punctuation\">.</span><span class=\"token constant\">ANY_TYPE</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span>\n</code></pre></div>\n<p>Un résolveur plus complexe sera nécessaire si le document utilise de multiple espaces de nommage.</p>\n<p>Une approche qui peut potentiellement mieux fonctionner (et autoriser les espaces de nom à ne pas être connus au fil du temps) est décrite dans la section suivante.</p>\n<h4 id=\"utiliser_les_fonctions_xpath_pour_référencer_les_éléments_avec_un_espace_de_nom_par_défaut\">Utiliser les fonctions XPath pour référencer les éléments avec un espace de nom par défaut</h4>\n<p>Une autre approche pour identifier les éléments par défaut dans un espace de noms non-null (et qui fonctionne bien pour les expressions XPath dynamiques où les espaces de noms peuvent ne pas être connus) implique la référence à un élément particulier en utilisant un formulaire tel que <code>[namespace-uri()='http://www.w3.org/1999/xhtml' and name()='p' and @id='_monid']</code>. Cela évite les problèmes résultant en une requête XPath qui n'est pas capable de détecter l'espace de noms par défaut sur un élément labelisé correctement.</p>\n<h4 id=\"obtenir_des_éléments_et_des_attributs_dun_espace_de_noms_spécifique_en_ignorant_le_préfixe\">Obtenir des éléments et des attributs d'un espace de noms spécifique en ignorant le préfixe</h4>\n<p>Si l'on souhaite avoir une certaine flexibilité dans les espaces de noms en ne nécessitant pas d'utiliser un préfixe spécifique lorsque l'on veut trouver un élément ou un attribut appartenant à un espace de noms, on doit utiliser des techniques spéciales.</p>\n<p>Tandis que l'on peut adapter la technique dans la section supérieure pour tester les éléments appartenant à un espace de noms sans regarder le préfix choisi (en utilisant <a href=\"/XPath/Functions/local-name\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">local-name()</a> combiné avec <a href=\"/XPath/Functions/namespace-uri\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">namespace-uri()</a> à la place de <a href=\"/XPath/Functions/name\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">name()</a>), un situation plus compliquée apparaît cependant, si l'on souhaite obtenir un élément avec un attribut appartenant à un espace de noms spécifique dans un prédicat (étant donnée l'absence des variables indépendantes de l'implémentation en XPath 1.0).</p>\n<p>Par exemple, on peut essayer (de manière incorrecte) d'obtenir un élément avec un attribut appartenant à un espace de noms de la manière suivante : <code>var xpathlink = someElements[local-name(@*)=\"href\" and namespace-uri(@*)='http://www.w3.org/1999/xlink'];</code></p>\n<p>Cela pourrait récupérer des éléments par inadvertance si un de ces attributs existaient avec un nom local \"<code>href</code>\", mais que c'était un autre attribut qui avait le nom d'espace ciblé (XLink, à la place de <a href=\"/XPath/Axes/attribute\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">@href</a>).</p>\n<p>Afin d'obtenir des éléments avec l'attribut XLink <code>@href</code> de manière précise (sans par ailleurs être obligé de définir des préfixes dans un résolveur de nom d'espaces), on procéder comme suit :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> xpathEls <span class=\"token operator\">=</span> <span class=\"token string\">'someElements[@*[local-name() = \"href\" and manespace-uri() = \"http://www.w3.org/1999/xlink\"]]'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Récupère les éléments avec un simple attribute qui a à la fois le nom local 'href' and l'espace de noms XLink</span>\n<span class=\"token keyword\">var</span> thislevel <span class=\"token operator\">=</span> xml<span class=\"token punctuation\">.</span><span class=\"token function\">evaluate</span><span class=\"token punctuation\">(</span>xpathEls<span class=\"token punctuation\">,</span> xml<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> XPathResult<span class=\"token punctuation\">.</span><span class=\"token constant\">ANY_TYPE</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> thisitemEl <span class=\"token operator\">=</span> thislevel<span class=\"token punctuation\">.</span><span class=\"token function\">iterateNext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<h4 id=\"constantes_définies_de_xpathresult\">Constantes définies de XPathResult</h4>\n<table class=\"standard-table\">\n  <tbody>\n    <tr>\n      <td class=\"header\">Constante du type de résultat</td>\n      <td class=\"header\">Valeur</td>\n      <td class=\"header\">Description</td>\n    </tr>\n    <tr>\n      <td>ANY_TYPE</td>\n      <td>0</td>\n      <td>\n        Un ensemble contenant n'importe quel type qui résulte naturellement de\n        l'évaluation de l'expression. Notez que si c'est un ensemble de noeuds\n        qui doit être retourné, alors le type résultant sera toujours\n        UNORDERED_NODE_ITERATOR_TYPE.\n      </td>\n    </tr>\n    <tr>\n      <td>NUMBER_TYPE</td>\n      <td>1</td>\n      <td>\n        Un résultat contenant un seul nombre. C'est utile, par exemple, dans une\n        expression XPath utilisant la fonction <code>count()</code>.\n      </td>\n    </tr>\n    <tr>\n      <td>STRING_TYPE</td>\n      <td>2</td>\n      <td>Un résultat contenant une seule chaîne de caractère.</td>\n    </tr>\n    <tr>\n      <td>BOOLEAN_TYPE</td>\n      <td>3</td>\n      <td>\n        Un résultat contenant une seule valeur booléenne. C'est utile, par\n        exemple, dans une expression XPath utilisant la fonction\n        <code>not()</code>.\n      </td>\n    </tr>\n    <tr>\n      <td>UNORDERED_NODE_ITERATOR_TYPE</td>\n      <td>4</td>\n      <td>\n        Un ensemble de nœuds contenant tous les nœuds vérifiant l'expression.\n        Les nœuds ne sont pas nécessairement dans le même ordre que celui dans\n        lequel ils apparaissent dans le document.\n      </td>\n    </tr>\n    <tr>\n      <td>ORDERED_NODE_ITERATOR_TYPE</td>\n      <td>5</td>\n      <td>\n        Un ensemble de nœuds contenant tous les nœuds vérifiant l'expression.\n        Les nœuds du résultat sont dans le même ordre que celui dans lequel ils\n        apparaissent dans le document.\n      </td>\n    </tr>\n    <tr>\n      <td>UNORDERED_NODE_SNAPSHOT_TYPE</td>\n      <td>6</td>\n      <td>\n        Un ensemble de nœuds contenant les snapshots de tous les nœuds vérifiant\n        l'expression. Les nœuds ne sont pas nécessairement dans le même ordre\n        que celui dans lequel ils apparaissent dans le document.\n      </td>\n    </tr>\n    <tr>\n      <td>ORDERED_NODE_SNAPSHOT_TYPE</td>\n      <td>7</td>\n      <td>\n        Un ensemble de nœuds contenant les snapshots de tous les nœuds vérifiant\n        l'expression. Les nœuds du résultat sont dans le même ordre que celui\n        dans lequel ils apparaissent dans le document.\n      </td>\n    </tr>\n    <tr>\n      <td>ANY_UNORDERED_NODE_TYPE</td>\n      <td>8</td>\n      <td>\n        Un ensemble de nœuds contenant un seul nœud vérifiant l'expression. Le\n        nœud n'est pas nécessairement le premier dans l'ordre du document qui\n        correspond à l'expression.\n      </td>\n    </tr>\n    <tr>\n      <td>FIRST_ORDERED_NODE_TYPE</td>\n      <td>9</td>\n      <td>\n        Un ensemble de nœuds contenant le premier nœud du document vérifiant\n        l'expression.\n      </td>\n    </tr>\n  </tbody>\n</table>"}},{"type":"prose","value":{"id":"voir_aussi","title":"Voir aussi","isH3":false,"content":"<ul>\n  <li><a href=\"/fr/docs/Web/XPath\">XPath</a></li>\n  <li><a href=\"https://www.xml.com/pub/a/2000/08/holman/index.html?page=2#xpath-info\" class=\"external\" rel=\" noopener\">XML Path Language</a> de <em><a href=\"https://www.xml.com/pub/a/2000/08/holman/\" class=\"external\" rel=\" noopener\">What is XSLT?</a></em> par G. Ken Holman</li>\n</ul>"}}],"toc":[{"text":"document.evaluate()","id":"document.evaluate"},{"text":"Exemples","id":"exemples"},{"text":"Annexe","id":"annexe"},{"text":"Voir aussi","id":"voir_aussi"}],"summary":"Ce document décrit l'interface pour utiliser XPath dans JavaScript, que ce soit en interne, dans les extensions et depuis les sites Web. Mozilla implémente une partie importante de DOM 3 XPath (en). Cela signifie que les expressions XPath peuvent être utilisées sur des documents HTML et XML.","popularity":0.0002,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Introduction to using XPath in JavaScript","locale":"en-US","native":"English (US)"},{"title":"Introducción al uso de XPath en Javascript","locale":"es","native":"Español"},{"title":"JavaScript での XPath の利用の手引き","locale":"ja","native":"日本語"},{"title":"Introduction to using XPath in JavaScript","locale":"ko","native":"한국어"},{"title":"Introduction to using XPath in JavaScript","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"fr/web/xpath/introduction_to_using_xpath_in_javascript","github_url":"https://github.com/mdn/translated-content/blob/main/files/fr/web/xpath/introduction_to_using_xpath_in_javascript/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/fr/docs/Web","title":"Technologies web pour développeurs"},{"uri":"/fr/docs/Web/XPath","title":"XPath"},{"uri":"/fr/docs/Web/XPath/Introduction_to_using_XPath_in_JavaScript","title":"Introduction à l'utilisation de XPath avec JavaScript"}],"pageTitle":"Introduction à l'utilisation de XPath avec JavaScript - XPath | MDN","noIndexing":false}}</script></body></html>