<!DOCTYPE html><html lang="en-US" prefix="og: https://ogp.me/ns#"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="/favicon-48x48.97046865.png"><link rel="apple-touch-icon" href="/apple-touch-icon.0ea0fa02.png"><meta name="theme-color" content="#ffffff"><link rel="manifest" href="/manifest.56b1cedc.json"><link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="MDN Web Docs"><script>Array.prototype.flat&&Array.prototype.includes||document.write('<script src="https://polyfill.io/v3/polyfill.min.js?features=Array.prototype.flat%2Ces6"><\/script>')</script><title>Partage d'objets avec des scripts de page - Mozilla | MDN</title><link rel="preload" as="font" type="font/woff2" crossorigin="" href="/static/media/ZillaSlab-Bold.subset.0beac26b.woff2"><link rel="alternate" title="Partage d'objets avec des scripts de page" href="https://developer.mozilla.org/fr/docs/Mozilla/Add-ons/WebExtensions/Sharing_objects_with_page_scripts" hreflang="fr"><link rel="alternate" title="Sharing objects with page scripts" href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Sharing_objects_with_page_scripts" hreflang="en"><meta name="description" content="Comme les notes du guide de scripts de contenu, les scripts de contenu ne voient pas les modifications apport√©es au DOM par des scripts charg√©s par des pages Web.Cela signifie que, par exemple, si une page Web charge une biblioth√®que comme jQuery, les scripts de contenu ne pourront pas l'utiliser et devront charger leur propre copie. √Ä l'inverse, les scripts charg√©s par les pages Web ne peuvent pas voir les modifications apport√©es par les scripts de contenu."><meta property="og:url" content="https://developer.mozilla.org/fr/docs/Mozilla/Add-ons/WebExtensions/Sharing_objects_with_page_scripts"><meta property="og:title" content="Partage d'objets avec des scripts de page - Mozilla | MDN"><meta property="og:description" content="Comme les notes du guide de scripts de contenu, les scripts de contenu ne voient pas les modifications apport√©es au DOM par des scripts charg√©s par des pages Web.Cela signifie que, par exemple, si une page Web charge une biblioth√®que comme jQuery, les scripts de contenu ne pourront pas l'utiliser et devront charger leur propre copie. √Ä l'inverse, les scripts charg√©s par les pages Web ne peuvent pas voir les modifications apport√©es par les scripts de contenu."><meta property="og:locale" content="fr"><meta property="og:image" content="https://developer.mozilla.org/mdn-social-share.0ca9dbda.png"><meta property="twitter:card" content="summary_large_image"><meta name="robots" content="index, follow"><link rel="canonical" href="https://developer.mozilla.org/fr/docs/Mozilla/Add-ons/WebExtensions/Sharing_objects_with_page_scripts"><style media="print">.breadcrumbs-container,.document-toc-container,.language-menu,.language-toggle,.on-github,.page-footer,.page-header-main,nav.sidebar,ul.prev-next{display:none!important}.main-page-content,.main-page-content pre{padding:2px}.main-page-content pre{border-left-width:2px}</style><link href="/static/css/main.55b68e13.chunk.css" rel="stylesheet"><script src="/static/js/runtime-main.4bb4c356.js" defer=""></script><script src="/static/js/4.a756dea3.chunk.js" defer=""></script><script src="/static/js/main.d4d565e0.chunk.js" defer=""></script></head><body><div id="root"><ul id="nav-access" class="a11y-nav"><li><a id="skip-main" href="#content">Skip to main content</a></li><li><a id="skip-search" href="#main-q">Skip to search</a></li><li><a id="skip-select-language" href="#select-language">Skip to select language</a></li></ul><div class="page-wrapper document-page"><header class="page-header"><a href="/fr/" class="logo" aria-label="MDN Web Docs"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 451.74 135"><path d="M7.14 8.35v111.06h111.05V8.35zm103.71 56c-.48.92-1 1.79-1.46 2.71a3.44 3.44 0 01-3.54 2 2.4 2.4 0 00-1.55.5c-1.37.9-2.76 1.79-4.18 2.63a7.33 7.33 0 01-6.35.34 29.71 29.71 0 00-10.63-2 11.7 11.7 0 00-9.46 4.31 14.84 14.84 0 00-2.13 4.29c-1.24 3.07-2.3 21.38-2.3 26.05 0 0-17.62-3.42-34.15-20.34l4.31-11.32h-13.5l9.76-10.35h-16.8l9.77-10.34H12.69L30.45 34a40.9 40.9 0 0119.77-10.83c7.1-1.22 8.93-.53 13.31.77l2.43.73.85.25 3.1.95a12.56 12.56 0 006.21.09 11.37 11.37 0 018.25 1 8.24 8.24 0 014.1 6.22 7.29 7.29 0 003.61 5.49 59.45 59.45 0 009.32 4.11c2.27.86 4.54 1.84 6.79 2.72a6.81 6.81 0 012.86 2.06 4.81 4.81 0 011.1 2.73c.14 2 .37 4 .47 6a15.24 15.24 0 01-1.77 8.03zM320.12 39.62a5.42 5.42 0 00-4.53 2.13 7.36 7.36 0 00-1.7 4.43v2.36a6.28 6.28 0 001.7 4.46 5.63 5.63 0 004.3 1.82 5.12 5.12 0 004.57-2.27A9.7 9.7 0 00326 47a8.11 8.11 0 00-1.67-5.52 5.36 5.36 0 00-4.21-1.86zM387.38 39.53a5.52 5.52 0 00-4.7 2.15 8.8 8.8 0 00-1.63 5.49 9.23 9.23 0 001.58 5.45 5.38 5.38 0 004.7 2.25 5.61 5.61 0 004.74-2.2 8.91 8.91 0 001.68-5.59 8.24 8.24 0 00-1.75-5.52 5.76 5.76 0 00-4.62-2.03zM299.47 41.35a4.34 4.34 0 00-4-1.92 4.55 4.55 0 00-3.89 1.73 8.37 8.37 0 00-1.58 4.17h10.48a6.3 6.3 0 00-1.01-3.98zM357.74 30.75H352v23.31h5.72q5.47 0 8.35-3t2.93-8.65q0-5.43-2.88-8.55t-8.38-3.11z"></path><path d="M121.55 8.35v70.8h323V8.35zm42.21 22.45h-4V54h3.68v3.73h-11.25V54h3.31V36.79h-.19l-9.63 19.12h-2.12l-10-19.4h-.19V54h3.45v3.73h-11.15V54h3.68V30.8h-4v-3.73H133l11.66 22.56h.19l11.18-22.56h7.7zm29.12 22.67q-4.11 4.28-11.38 4.28h-14.06v-3.69h3.73V30.75h-3.73v-3.68h13.83q7.59 0 11.66 4.29a15.4 15.4 0 014 11 15.33 15.33 0 01-4.05 11.11zm38.89-22.67h-3.68v27h-2.6L208.08 35h-.19v19h4.67v3.73h-12.22V54h3.49V30.8h-4v-3.73h7.08l16.9 22.09h.19V30.8h-4.58v-3.73h12.32zm43.8 27h-3.31l-7.83-23.18h-.19l-7.55 23.18h-3.35l-8.78-27h-2.65v-3.73H253v3.73h-3.87L255 50.71h.23l6.61-19.91H259v-3.73h11v3.73h-2.78l6.61 20.1h.23l5.43-20.1h-4.15v-3.73h11v3.73h-2.54zm26.71-1.51a9.66 9.66 0 01-6.42 2 10.2 10.2 0 01-7.41-2.74c-1.89-1.82-2.83-4.47-2.83-7.93a12.37 12.37 0 012.64-8.12 9 9 0 017.32-3.21 8.62 8.62 0 016.75 2.69 9.65 9.65 0 012.45 6.52 13.67 13.67 0 01-.28 2.69H290q.29 6.71 6.18 6.7a5.2 5.2 0 003.71-1.18 5.82 5.82 0 001.67-2.83l3.45.71a7.21 7.21 0 01-2.73 4.65zm25.77-1.63c-1.51 2.4-3.92 3.61-7.22 3.61s-5.84-1.29-7.22-3.87c0 .25-.1.82-.21 1.7s-.19 1.44-.22 1.7H309c.16-1 .31-2 .47-3.07a21.42 21.42 0 00.24-3.16v-23h-3.4v-3.3h7.55V40.9a9.76 9.76 0 012.67-3.28 7.33 7.33 0 014.74-1.4 8.48 8.48 0 016.5 2.78q2.55 2.74 2.55 7.74a14.6 14.6 0 01-2.27 7.87zm41.39-1.14q-4.11 4.28-11.37 4.28H344v-3.74h3.73V30.75H344v-3.68h13.83q7.59 0 11.66 4.29a15.41 15.41 0 014.06 11 15.34 15.34 0 01-4.11 11.11zm25.65 1.68a10.53 10.53 0 01-7.9 3.07 10 10 0 01-7.63-3 10.93 10.93 0 01-2.8-7.83 12.13 12.13 0 012.69-7.93q2.69-3.3 8-3.3t8 3.28a12 12 0 012.64 7.76 10.86 10.86 0 01-3 7.9zm22.61.57c-1.4 1.66-3.63 2.5-6.68 2.5a9.58 9.58 0 01-7.15-2.76q-2.72-2.76-2.71-7.91a12.25 12.25 0 012.69-8 9.17 9.17 0 017.5-3.28 15 15 0 013.82.48 10.37 10.37 0 013.5 1.65l.85 5.47-3.35.38-.76-3.54a8.07 8.07 0 00-4.11-1 4.9 4.9 0 00-4.39 2.15 9.93 9.93 0 00-1.41 5.55 8.9 8.9 0 001.5 5.38 5.23 5.23 0 004.44 2c2.92 0 4.67-1.7 5.23-5.1l3.5.71a10.34 10.34 0 01-2.47 5.27zm20.48.75a11.68 11.68 0 01-6.63 1.75 15.52 15.52 0 01-8.26-2.08L424 51l3.26.33-.1 2.74a7 7 0 002.06.66 12.63 12.63 0 002.19.19 8.68 8.68 0 003.66-.75 2.5 2.5 0 001.63-2.36 2.25 2.25 0 00-1.32-2.2 12.65 12.65 0 00-3.28-1 47.39 47.39 0 01-3.9-.82 7.5 7.5 0 01-3.25-1.7 4.67 4.67 0 01-1.33-3.66c0-2.36.88-4 2.62-4.91a12 12 0 015.6-1.37 15 15 0 014.08.55 16.65 16.65 0 013.47 1.39l.47 5.1-3.3.37-.48-3.3a9.5 9.5 0 00-4.06-.9 5.62 5.62 0 00-2.87.66 2.33 2.33 0 00-1.15 2.25 2.13 2.13 0 001.3 2.07 11.91 11.91 0 003.21.92 36.69 36.69 0 013.82.83 7.46 7.46 0 013.21 1.74 4.9 4.9 0 011.3 3.73 5.56 5.56 0 01-2.66 4.91z"></path><path d="M181.17 30.75h-5.71v23.31h5.71q5.47 0 8.36-3t2.88-8.61q0-5.43-2.88-8.55t-8.36-3.15zM121.63 119.32V81.74h114.91v37.58zM153.22 109h-2v-6.85a4.8 4.8 0 00-1.58-4 5.57 5.57 0 00-3.55-1.26 5 5 0 00-4.92 3.26 4.19 4.19 0 00-1.88-2.46 5.82 5.82 0 00-3-.8 4.89 4.89 0 00-4.56 2.56v-2.21h-6.28v3.26h2v8.5h-2v3.23h9.11V109h-2.86v-5.25a4.4 4.4 0 01.69-2.56 2.47 2.47 0 012.21-1q2.57 0 2.56 3.63v8.41h6.29V109h-2v-5.25a4.47 4.47 0 01.67-2.56 2.42 2.42 0 012.19-1q2.63 0 2.63 3.63v8.41h6.28zm9.88-12.07q-4 0-6 2.36a8.41 8.41 0 00-2 5.66 7.25 7.25 0 002.17 5.62 8 8 0 005.65 2 8.54 8.54 0 005.94-2.11 7.27 7.27 0 002.34-5.67 8.21 8.21 0 00-2-5.51q-2.07-2.34-6.1-2.34zm-.1 12.35a3 3 0 01-2.63-1.33 5.68 5.68 0 01-.9-3.26 5 5 0 011-3.28 3.23 3.23 0 012.61-1.18 3.5 3.5 0 012.59 1.08 4.56 4.56 0 011.07 3.31 5.21 5.21 0 01-1 3.41 3.33 3.33 0 01-2.74 1.25zm25-2.3l-3.39-.29-.7 2.32H179l8.32-9.54-.32-2.23h-13.19l-.53 5.25 3.16.34.67-2.36h4.65l-8.25 9.53.44 2.26h13.13zm7.62-9.74h-4.46v5.39h4.46zm0 9.61h-4.46v5.39h4.46zm13.54-17.49h-4.23l-6.48 22.88h4.22zm8.68 0h-4.23l-6.45 22.88h4.19zm15 22.51l-.07-2.26a1.22 1.22 0 01-.56.1c-.69 0-1-.39-1-1.16v-6.49a4.39 4.39 0 00-1.8-3.84 7 7 0 00-4.16-1.28 14.55 14.55 0 00-3.16.3 24.14 24.14 0 00-3.29 1.06l-.56 3.46 3.39.4.5-1.69a2.78 2.78 0 011.08-.37 11.3 11.3 0 011.25-.07c1.19 0 1.89.37 2.09 1.1a8.55 8.55 0 01.3 2.26v.5a8.91 8.91 0 00-1.18-.11h-1.21a12.64 12.64 0 00-4.81.88 3.53 3.53 0 00-2.18 3.64 3.66 3.66 0 001.48 3.33 5.63 5.63 0 003.11 1 4.67 4.67 0 003-.91 6.78 6.78 0 001.8-2 3 3 0 003.33 3 5.54 5.54 0 002.66-.85zm-9.25-2.32a1.69 1.69 0 01-1.36-.52 1.81 1.81 0 01-.43-1.21 1.67 1.67 0 01.86-1.68 4.63 4.63 0 012-.42 7.69 7.69 0 011.07.07l1.06.13a3.58 3.58 0 01-1.08 2.74 3.24 3.24 0 01-2.11.89z"></path></svg></a><button type="button" class="ghost main-menu-toggle" aria-haspopup="true" aria-label="Show Menu"></button><div class="page-header-main "><nav class="main-nav" aria-label="Main menu"><ul class="main-menu nojs"><li class="top-level-entry-container"><button id="technologies-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">Technologies</button><ul class="technologies " role="menu" aria-labelledby="technologies-button"><li role="none"><a tabindex="-1" href="/fr/docs/Web" role="menuitem">Technologies Overview</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web/HTML" role="menuitem">HTML</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web/CSS" role="menuitem">CSS</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web/JavaScript" role="menuitem">JavaScript</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web/Guide/Graphics" role="menuitem">Graphics</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web/HTTP" role="menuitem">HTTP</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web/API" role="menuitem">APIs</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Mozilla/Add-ons/WebExtensions" role="menuitem">Browser Extensions</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web/MathML" role="menuitem">MathML</a></li></ul></li><li class="top-level-entry-container"><button id="references-guides-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">References &amp; Guides</button><ul class="references-guides " role="menu" aria-labelledby="references-guides-button"><li role="none"><a tabindex="-1" href="/fr/docs/Learn" role="menuitem">Learn web development</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web/Tutorials" role="menuitem">Tutorials</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web/Reference" role="menuitem">References</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web/Guide" role="menuitem">Developer Guides</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web/Accessibility" role="menuitem">Accessibility</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Games" role="menuitem">Game development</a></li><li role="none"><a tabindex="-1" href="/fr/docs/Web" role="menuitem">...more docs</a></li></ul></li><li class="top-level-entry-container"><button id="feedback-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">Feedback</button><ul class="feedback " role="menu" aria-labelledby="feedback-button"><li role="none"><a tabindex="-1" href="/fr/docs/MDN/Contribute/Feedback" role="menuitem">Send Feedback</a></li><li role="none"><a tabindex="-1" href="/fr/docs/MDN/Contribute" role="menuitem">Contribute to MDN</a></li><li role="none"><a tabindex="-1" target="_blank" rel="noopener noreferrer" href="https://github.com/mdn/content/issues/new" role="menuitem">Report a content issue<!-- --> üåê</a></li><li role="none"><a tabindex="-1" target="_blank" rel="noopener noreferrer" href="https://github.com/mdn/yari/issues/new" role="menuitem">Report a platform issue<!-- --> üåê</a></li></ul></li></ul></nav><div class="header-search"><form action="/fr/search" class="search-form search-widget" role="search"><label for="main-q" class="visually-hidden">Search MDN</label><input type="search" name="q" id="main-q" class="search-input-field" placeholder="Site search... (Press &quot;/&quot; to focus)" pattern="(.|\s)*\S(.|\s)*" required="" value=""><input type="submit" class="ghost search-button" value="" aria-label="Search"></form></div><div class="auth-container"></div></div></header><div class="breadcrumb-locale-container"><nav class="breadcrumbs-container" aria-label="Breadcrumb navigation"><ol typeof="BreadcrumbList" vocab="https://schema.org/" aria-label="breadcrumbs"><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="/fr/docs/Mozilla"><span property="name">Mozilla</span></a><meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="/fr/docs/Mozilla/Add-ons"><span property="name">Modules</span></a><meta property="position" content="2"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb-penultimate" property="item" typeof="WebPage" href="/fr/docs/Mozilla/Add-ons/WebExtensions"><span property="name">WebExtensions</span></a><meta property="position" content="3"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb-current-page" property="item" typeof="WebPage" href="/fr/docs/Mozilla/Add-ons/WebExtensions/Sharing_objects_with_page_scripts"><span property="name">Partage d'objets avec des scripts de page</span></a><meta property="position" content="4"></li></ol></nav><ul class="language-toggle"><li><a href="#select-language" class="language-icon"><span class="show-desktop">Change language</span></a></li><li><a class="view-in-english" href="/en-US/docs/Mozilla/Add-ons/WebExtensions/Sharing_objects_with_page_scripts"><span class="show-desktop">View in</span> English</a></li></ul></div><div class="localized-content-note notecard inline neutral"><a href="/en-US/docs/MDN/Contribute/Localize#active_locales">Cette page a √©t√© traduite √† partir de l'anglais par la communaut√©. Vous pouvez √©galement contribuer en rejoignant la communaut√© francophone sur MDN Web Docs.</a></div><aside class="document-toc-container"><section class="document-toc"><header><h2>Table of contents</h2><button type="button" class="ghost toc-trigger-mobile" aria-controls="toc-entries" aria-expanded="false">Table of contents</button></header><ul id="toc-entries"><li><a href="#vision_xray_dans_firefox">Vision Xray dans Firefox</a></li><li><a href="#acc√®s_aux_objets_de_script_de_page_√†_partir_de_scripts_de_contenu">Acc√®s aux objets de script de page √† partir de scripts de contenu</a></li><li><a href="#partage_dobjets_de_script_de_contenu_avec_des_scripts_de_page">Partage d'objets de script de contenu avec des scripts de page</a></li></ul></section></aside><main id="content" class="main-content" role="main"><article class="main-page-content" lang="fr"><h1>Partage d'objets avec des scripts de page</h1><div><div class="notecard note" id="sect1">
  <p><strong>Note :</strong> Les techniques d√©crites dans cette section sont uniquement disponibles dans Firefox, et seulement √† partir de Firefox 49</p>
</div>
<div class="notecard warning" id="sect2">
  <p><strong>Attention :</strong> En tant que d√©veloppeur d'extensions, vous devez consid√©rer que les scripts s'ex√©cutant sur des pages Web arbitraires sont des codes hostiles dont le but est de voler les informations personnelles de l'utilisateur, d'endommager leur ordinateur ou de les attaquer d'une autre mani√®re.</p>
  <p>L'isolation entre les scripts de contenu et les scripts charg√©s par les pages Web a pour but de rendre plus difficile la t√¢che des pages Web hostiles.</p>
  <p>Puisque les techniques d√©crites dans cette section d√©compose cet isolement, elles sont intrins√®quement dangereuses et devraient √™tre utilis√©es avec beaucoup de soin.</p>
</div>
<p>Comme les <a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Content_scripts#dom_access">notes du guide de scripts de contenu</a>, les scripts de contenu ne voient pas les modifications apport√©es au DOM par des scripts charg√©s par des pages Web.Cela signifie que, par exemple, si une page Web charge une biblioth√®que comme jQuery, les scripts de contenu ne pourront pas l'utiliser et devront charger leur propre copie. √Ä l'inverse, les scripts charg√©s par les pages Web ne peuvent pas voir les modifications apport√©es par les scripts de contenu.</p>
<p>Cependant, Firefox fournit des API qui permettent aux scripts de contenu de :</p>
<ul>
  <li>acc√©der aux objets JavaScript cr√©√©s par les scripts de page</li>
  <li>exposer leurs propres objets JavaScript aux scripts de pages.</li>
</ul></div><h2 id="vision_xray_dans_firefox"><a href="#vision_xray_dans_firefox" title="Permalink to Vision Xray dans Firefox">Vision Xray dans Firefox</a></h2><div><p>Dans Firefox, une partie de l'isolation entre les scripts de contenu et les scripts de pages est impl√©ment√©e en utilisant une fonction appel√©e "Vision Xray". Lorsqu'un script dans une port√©e plus privil√©gi√©e acc√®de √† un objet d√©fini dans une port√©e moins privil√©gi√©e, il ne voit que la "version native" de l'objet. Toutes les propri√©t√©s <a href="/fr/docs/Glossary/Expando">expando</a> sont invisibles et si des propri√©t√©s de l'objet ont √©t√© red√©finies, il voit l'impl√©mentation d'origine et non la version red√©finie.</p>
<p>Le but de cette fonctionnalit√© est de rendre le script moins privil√©gi√© plus difficile √† confondre le script plus privil√©gi√© en red√©finissant les propri√©t√©s natives des objets.</p>
<p>Par exemple, lorsqu'un script de contenu acc√®de √† la <a href="/fr/docs/Web/API/Window">fen√™tre</a> de la page, il ne voit aucune propri√©t√© ajout√©e au script de la page, et si le script de la page a red√©fini les propri√©t√©s de la fen√™tre, le script de contenu verra la version originale .</p>
<p>Pour l'histoire compl√®te sur la vision Xray, voir les articles sur <a href="en-US/docs/Mozilla/Tech/Xray_vision">Vision Xray</a> et la <a href="en-US/docs/Mozilla/Gecko/Script_security">securit√© des Scripts</a>.</p></div><h2 id="acc√®s_aux_objets_de_script_de_page_√†_partir_de_scripts_de_contenu"><a href="#acc√®s_aux_objets_de_script_de_page_√†_partir_de_scripts_de_contenu" title="Permalink to Acc√®s aux objets de script de page √† partir de scripts de contenu">Acc√®s aux objets de script de page √† partir de scripts de contenu</a></h2><div><p>Dans Firefox, les objets DOM dans les scripts de contenu obtiennent une propri√©t√© suppl√©mentaire <code>wrappedJSObject</code>. C'est une version "d√©ball√©e" de l'objet, qui inclut toutes les modifications apport√©es √† cet objet par les scripts de page.</p>
<p>Prenons un exemple simple. Supposons qu'une page Web charge un script:</p>
<div class="code-example"><pre class="brush: html notranslate"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>main.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div>
<p>Le script ajoute une propri√©t√© expando √† la <code>fen√™tre</code> globale :</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token comment">// main.js</span>

<span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token string">"I'm defined in a page script!"</span><span class="token punctuation">;</span>
</code></pre></div>
<p>La vision Xray signifie que si un script de contenu tente d'acc√©der √† <code>foo</code>, il sera ind√©fini:</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token comment">// content-script.js</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
</code></pre></div>
<p>Dans Firefox, les scripts de contenu peuvent utiliser <code>window.wrappedJSObject</code> pour voir la propri√©t√© expando :</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token comment">// content-script.js</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>wrappedJSObject<span class="token punctuation">.</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// "I'm defined in a page script!"</span>
</code></pre></div>
<p>Notez qu'une fois que vous faites cela, vous ne pouvez plus compter sur les propri√©t√©s ou les fonctions de cet objet qui sont, ou font, ce que vous attendez. N'importe lequel d'entre eux, m√™me les setters et les getters, aurait pu √™tre red√©fini par un code non fiable.</p>
<p>Notez √©galement que le d√©ballage est transitif: lorsque vous utilisez <code>wrappedJSObject</code>, toutes les propri√©t√©s de l'objet d√©pli√© sont elles-m√™mes d√©pli√©es (et donc peu fiables). C'est donc une bonne pratique, une fois que vous avez l'objet dont vous avez besoin, de le r√©emballer, ce que vous pouvez faire comme ceci:</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token function">XPCNativeWrapper</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>wrappedJSObject<span class="token punctuation">.</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>voir le document <a href="/fr/Tech/Xray_vision" class="page-not-created" title="This is a link to an unwritten page">vision Xray</a> pour plus de d√©tails √† ce sujet.</p></div><h2 id="partage_dobjets_de_script_de_contenu_avec_des_scripts_de_page"><a href="#partage_dobjets_de_script_de_contenu_avec_des_scripts_de_page" title="Permalink to Partage d'objets de script de contenu avec des scripts de page">Partage d'objets de script de contenu avec des scripts de page</a></h2><div><p>Firefox fournit √©galement des API permettant aux scripts de contenu de rendre les objets disponibles pour les scripts de page. Il y a plusieurs approches ici:</p>
<ul>
  <li><a href="#exportfunction"><code>exportFunction()</code></a>: exporte une fonction vers des scripts de page</li>
  <li><a href="#cloneinto"><code>cloneInto()</code></a>: exporte un objet vers des scripts de page.</li>
  <li>constructeurs du contexte de la page</li>
</ul></div><h3 id="exportfunction"><a href="#exportfunction" title="Permalink to exportFunction">exportFunction</a></h3><div><p>√âtant donn√© une fonction d√©finie dans le script de contenu, <code>exportFunction()</code> l'exporte vers la port√©e du script de page, afin que le script de page puisse l'appeler.</p>
<p>Par exemple, consid√©rons une extension qui a un script d'arri√®re-plan comme ceci :</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token comment">/*
Execute content script in the active tab.
*/</span>
<span class="token keyword">function</span> <span class="token function">loadContentScript</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  browser<span class="token punctuation">.</span>tabs<span class="token punctuation">.</span><span class="token function">executeScript</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">file</span><span class="token operator">:</span> <span class="token string">"/content_scripts/export.js"</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/*
Add loadContentScript() as a listener to clicks
on the browser action.
*/</span>
browser<span class="token punctuation">.</span>browserAction<span class="token punctuation">.</span>onClicked<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span>loadContentScript<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/*
Show a notification when we get messages from
the content script.
*/</span>
browser<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span>onMessage<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">message</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  browser<span class="token punctuation">.</span>notifications<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"basic"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">"Message from the page"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">message</span><span class="token operator">:</span> message<span class="token punctuation">.</span>content
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Cela fait deux choses :</p>
<ul>
  <li>ex√©cuter un script de contenu dans l'onglet en cours, lorsque l'utilisateur clique sur une action du navigateur</li>
  <li>√©couter les messages du script de contenu et afficher une <a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/notifications">notification</a> lorsque le message arrive.</li>
</ul>
<p>Le script de contenu ressemble √† ceci :</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token comment">/*
Define a function in the content script's scope, then export it
into the page script's scope.
*/</span>
<span class="token keyword">function</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token parameter">message</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  browser<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">"Function call: "</span> <span class="token operator">+</span> message<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">exportFunction</span><span class="token punctuation">(</span>notify<span class="token punctuation">,</span> window<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">defineAs</span><span class="token operator">:</span><span class="token string">'notify'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Cela d√©finit une fonction <code>notify()</code>, qui envoie simplement son argument au script d'arri√®re-plan. Il exporte ensuite la fonction vers la port√©e du script de page. Maintenant, le script de la page peut appeler cette fonction:</p>
<div class="code-example"><pre class="brush: js notranslate"><code>window<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token string">"Message from the page script!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Pour l'histoire compl√®te, voir <a href="/fr/Tech/XPCOM/Language_Bindings/Components.utils.exportFunction" class="page-not-created" title="This is a link to an unwritten page"><code>Components.utils.exportFunction</code></a>.</p></div><h3 id="cloneinto"><a href="#cloneinto" title="Permalink to cloneInto">cloneInto</a></h3><div><p>√âtant donn√© un objet d√©fini dans le script de contenu, cela cr√©e un clone de l'objet dans la port√©e du script de page, rendant ainsi le clone accessible aux scripts de page. Par d√©faut, cela utilise <a href="/fr/docs/Web/API/Web_Workers_API/Structured_clone_algorithm">l'agorithme clone structur√©</a> pour cloner l'objet, ce qui signifie que les fonctions de l'objet ne sont pas incluses dans le clone. Pour inclure des fonctions, passez l'option <code>cloneFunctions</code>.</p>
<p>Par exemple, voici un script de contenu qui d√©finit un objet contenant une fonction, puis le clone dans la port√©e du script de page :</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token comment">/*
Create an object that contains functions in
the content script's scope, then clone it
into the page script's scope.

Because the object contains functions,
the cloneInto call must include
the `cloneFunctions` option.
*/</span>
<span class="token keyword">var</span> messenger <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">notify</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">message</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    browser<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">"Object method call: "</span> <span class="token operator">+</span> message
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

window<span class="token punctuation">.</span>wrappedJSObject<span class="token punctuation">.</span>messenger <span class="token operator">=</span> <span class="token function">cloneInto</span><span class="token punctuation">(</span>
  messenger<span class="token punctuation">,</span>
  window<span class="token punctuation">,</span>
  <span class="token punctuation">{</span><span class="token literal-property property">cloneFunctions</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Maintenant les scripts de page vont voir une nouvelle propri√©t√© sur la fen√™tre, <code>messenger</code>, qui a une fonction <code>notify()</code>:</p>
<div class="code-example"><pre class="brush: js notranslate"><code>window<span class="token punctuation">.</span>messenger<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token string">"Message from the page script!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Pour l'histoire compl√®te, voir <a href="/fr/Tech/XPCOM/Language_Bindings/Components.utils.cloneInto" class="page-not-created" title="This is a link to an unwritten page"><code>Components.utils.cloneInto</code></a>.</p></div><h3 id="constructeurs_du_contexte_de_la_page"><a href="#constructeurs_du_contexte_de_la_page" title="Permalink to Constructeurs du contexte de la page">Constructeurs du contexte de la page</a></h3><div><p>Sur l'objet fen√™tre de xrayed, des constructeurs immacul√©s pour certains objets javascript int√©gr√©s tels que <code>Object</code>, <code>Function</code> ou <code>Proxy</code> et diff√©rentes classe DOM sont disponibles. <code>XMLHttpRequest</code> ne se comporte pas de cette mani√®re, voir la section <a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Content_scripts#xhr_and_fetch">XHR and fetch</a> pour plus de d√©tails. Ils cr√©eront des instances appartenant √† la hi√©rarchie d'objets de la page global, puis retourneront un wrapper xray.</p>
<p>Puisque les objets cr√©√©s de cette mani√®re appartiennent d√©j√† √† la page et que le script de contenu ne les renvoie pas √† la page, il ne n√©cessitera pas de clonage ou d'exportation suppl√©mentaire.</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token comment">/* javascript built-ins */</span>

<span class="token keyword">const</span> objA <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> objB <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">window<span class="token punctuation">.</span>Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
  objA <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">,</span>                        <span class="token comment">// true</span>
  objB <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">,</span>                        <span class="token comment">// false</span>
  objA <span class="token keyword">instanceof</span> <span class="token class-name">window<span class="token punctuation">.</span>Object</span><span class="token punctuation">,</span>                 <span class="token comment">// false</span>
  objB <span class="token keyword">instanceof</span> <span class="token class-name">window<span class="token punctuation">.</span>Object</span><span class="token punctuation">,</span>                 <span class="token comment">// true</span>
  <span class="token string">'wrappedJSObject'</span> <span class="token keyword">in</span> objB                      <span class="token comment">// true; xrayed</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

objA<span class="token punctuation">.</span>foo <span class="token operator">=</span> <span class="token string">"foo"</span><span class="token punctuation">;</span>
objB<span class="token punctuation">.</span>foo <span class="token operator">=</span> <span class="token string">"foo"</span><span class="token punctuation">;</span>                                <span class="token comment">// xray wrappers for plain javascript objects pass through property assignments</span>
objB<span class="token punctuation">.</span>wrappedJSObject<span class="token punctuation">.</span>bar <span class="token operator">=</span> <span class="token string">"bar"</span><span class="token punctuation">;</span>                <span class="token comment">// unwrapping before assignment does not rely on this special behavior</span>

window<span class="token punctuation">.</span>wrappedJSObject<span class="token punctuation">.</span>objA <span class="token operator">=</span> objA<span class="token punctuation">;</span>
window<span class="token punctuation">.</span>wrappedJSObject<span class="token punctuation">.</span>objB <span class="token operator">=</span> objB<span class="token punctuation">;</span>              <span class="token comment">// automatically unwraps when passed to page context</span>

window<span class="token punctuation">.</span><span class="token function">eval</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  console.log(objA instanceof Object);           // false
  console.log(objB instanceof Object);           // true

  console.log(objA.foo);                         // undefined
  objA.baz = "baz";                              // Error: permission denied

  console.log(objB.foo, objB.bar);               // "foo", "bar"
  objB.baz = "baz";
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* other APIs */</span>

<span class="token keyword">const</span> ev <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Event</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
  ev <span class="token keyword">instanceof</span> <span class="token class-name">Event</span><span class="token punctuation">,</span>                           <span class="token comment">// true</span>
  ev <span class="token keyword">instanceof</span> <span class="token class-name">window<span class="token punctuation">.</span>Event</span><span class="token punctuation">,</span>                    <span class="token comment">// true; Event constructor is actually inherited from the xrayed window</span>
  <span class="token string">'wrappedJSObject'</span> <span class="token keyword">in</span> ev                        <span class="token comment">// true; is an xrayed object</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

ev<span class="token punctuation">.</span>propA <span class="token operator">=</span> <span class="token string">"propA"</span>                                <span class="token comment">// xray wrappers for native objects do not pass through assignments</span>
ev<span class="token punctuation">.</span>propB <span class="token operator">=</span> <span class="token string">"wrapper"</span><span class="token punctuation">;</span>                             <span class="token comment">// define property on xray wrapper</span>
ev<span class="token punctuation">.</span>wrappedJSObject<span class="token punctuation">.</span>propB <span class="token operator">=</span> <span class="token string">"unwrapped"</span><span class="token punctuation">;</span>           <span class="token comment">// define same property on page object</span>
Reflect<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>ev<span class="token punctuation">.</span>wrappedJSObject<span class="token punctuation">,</span>        <span class="token comment">// privileged reflection can operate on less privileged objects</span>
  <span class="token string">'propC'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
     <span class="token literal-property property">get</span><span class="token operator">:</span> <span class="token function">exportFunction</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>             <span class="token comment">// getters must be exported like regular functions</span>
       <span class="token keyword">return</span> <span class="token string">'propC'</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

window<span class="token punctuation">.</span><span class="token function">eval</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  document.addEventListener("click", (e) =&gt; {
    console.log(e instanceof Event, e.propA, e.propB, e.propC);
  });
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

document<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>ev<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true, undefined, "unwrapped", "propC"</span>
</code></pre></div></div></article><aside class="metadata"><div class="metadata-content-container"><div id="on-github" class="on-github"><h3>Found a problem with this page?</h3><ul><li><a href="https://github.com/mdn/translated-content/edit/main/files/fr/mozilla/add-ons/webextensions/sharing_objects_with_page_scripts/index.md" title="You're going to need to sign in to GitHub first (Opens in a new tab)" target="_blank" rel="noopener noreferrer">Edit on <b>GitHub</b></a></li><li><a href="https://github.com/mdn/translated-content/blob/main/files/fr/mozilla/add-ons/webextensions/sharing_objects_with_page_scripts/index.md" title="Folder: fr/mozilla/add-ons/webextensions/sharing_objects_with_page_scripts (Opens in a new tab)" target="_blank" rel="noopener noreferrer">Source on <b>GitHub</b></a></li><li><a href="https://github.com/mdn/translated-content/issues/new?body=MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Ffr%2Fdocs%2FMozilla%2FAdd-ons%2FWebExtensions%2FSharing_objects_with_page_scripts%0A%0A%23%23%23%23+What+information+was+incorrect%2C+unhelpful%2C+or+incomplete%3F%0A%0A%0A%23%23%23%23+Specific+section+or+headline%3F%0A%0A%0A%23%23%23%23+What+did+you+expect+to+see%3F%0A%0A%0A%23%23%23%23+Did+you+test+this%3F+If+so%2C+how%3F%0A%0A%0A%3C%21--+Do+not+make+changes+below+this+line+--%3E%0A%3Cdetails%3E%0A%3Csummary%3EMDN+Content+page+report+details%3C%2Fsummary%3E%0A%0A*+Folder%3A+%60fr%2Fmozilla%2Fadd-ons%2Fwebextensions%2Fsharing_objects_with_page_scripts%60%0A*+MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Ffr%2Fdocs%2FMozilla%2FAdd-ons%2FWebExtensions%2FSharing_objects_with_page_scripts%0A*+GitHub+URL%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Ftranslated-content%2Fblob%2Fmain%2Ffiles%2Ffr%2Fmozilla%2Fadd-ons%2Fwebextensions%2Fsharing_objects_with_page_scripts%2Findex.md%0A*+Last+commit%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Ftranslated-content%2Fcommit%2F921c46a374ab0a9f4cc809af0370f8c412e54701%0A*+Document+last+modified%3A+2022-10-01T03%3A41%3A16.000Z%0A%0A%3C%2Fdetails%3E&amp;title=Issue+with+%22Partage+d%27objets+avec+des+scripts+de+page%22%3A+%28short+summary+here+please%29&amp;labels=needs-triage%2Cl10n-fr" title="This will take you to https://github.com/mdn/content to file a new issue" target="_blank" rel="noopener noreferrer">Report a problem with this content on <b>GitHub</b></a></li><li>Want to fix the problem yourself? See<!-- --> <a href="https://github.com/mdn/content/blob/main/README.md" target="_blank" rel="noopener noreferrer">our Contribution guide</a>.</li></ul></div><p class="last-modified-date"><b>Last modified:</b> <time datetime="2022-10-01T03:41:16.000Z">Oct 1, 2022</time>,<!-- --> <a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Sharing_objects_with_page_scripts/contributors.txt">by MDN contributors</a></p><form class="language-menu"><fieldset id="select-language"><legend>Change your language</legend><label for="language-selector" class="visually-hidden">Select your preferred language</label> <select id="language-selector" name="language"><option selected="" value="fr">Fran√ßais</option><option value="en-US">English (US)</option></select> <button type="submit" class="button minimal">Change language</button></fieldset></form></div></aside></main><nav id="sidebar-quicklinks" class="sidebar"><h4>Related Topics</h4><div>
  <ol>
    <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions"><strong>WebExtensions</strong></a></li>
    <li class="toggle">
      <details>
        <summary>D√©marrage</summary>
        <ol>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/What_are_WebExtensions">Que sont les WebExtensions ?</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Your_first_WebExtension">Votre premi√®re WebExtension</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Your_second_WebExtension">Votre deuxi√®me WebExtension</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension">Anatomie d'une WebExtension</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Examples">Exemples de WebExtensions</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/What_next_">Que faire ensuite ?</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>Concepts</summary>
        <ol>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Using_the_JavaScript_APIs">Utilisation des API JavaScript</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Content_scripts">Scripts de contenu</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Match_patterns">Motifs de correspondance (Match patterns)</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Working_with_files">Travailler avec les fichiers</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Internationalization">Internationalisation</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Content_Security_Policy">Politique de s√©curit√© du contenu</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Native_messaging">Message natifs</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Differences_between_API_implementations">Differences between API implementations</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Chrome_incompatibilities">Incompatibilit√©s avec Chrome</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>Interface Utilisateur</summary>
        <ol>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface">Introduction</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Browser_action">Bouton de la barre d'outils</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Page_actions">Bouton de la barre d'adresse</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Sidebars">Barres lat√©rales</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Context_menu_items">√âl√©ments du menu contextuel</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Options_pages">Page d'options</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Extension_pages">Pages pour l'extension</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Notifications">Notifications</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Omnibox">Suggestions de la barre d'adresse</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/devtools_panels">Panneaux d'outils de d√©veloppement</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>Mode d'emploi</summary>
        <ol>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Intercept_HTTP_requests">Intercepter les requ√™tes HTTP</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Modify_a_web_page">Modifier une page web</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Safely_inserting_external_content_into_a_page">Ins√©rer un contenu externe</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Sharing_objects_with_page_scripts">Share objects with page scripts</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Add_a_button_to_the_toolbar">Ajouter un bouton √† la barre d'outils</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Implement_a_settings_page">Mettre en place une page de param√®tres</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API">Travailler avec l'API Tabs</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Bookmarks_API">Travailler avec l'API Bookmarks</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Cookies_API">Travailler avec l'API Cookies</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Work_with_contextual_identities">Travailler avec des identit√©s contextuelles</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Interact_with_the_clipboard">Interagir avec le presse-papier</a></li>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Build_a_cross_browser_extension">Build a cross-browser extension</a></li>
        </ol>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Firefox_differentiators">Firefox differentiators</a></summary>
      </details>
    </li>
    <li class="toggle">
      <details>
        <summary>Les API JavaScript</summary>
        <ol><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/Browser_support_for_JavaScript_APIs">Browser support for JavaScript APIs</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/alarms">alarms</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/bookmarks">bookmarks</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/browserAction">browserAction</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/browserSettings">browserSettings</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/browsingData">browsingData</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/captivePortal">captivePortal</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/clipboard">clipboard</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/commands">commands</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/contentScripts">contentScripts</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/contextualIdentities">contextualIdentities</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/cookies">cookies</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/devtools">devtools</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/dns">dns</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/downloads">downloads</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/events">events</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/extension">extension</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/extensionTypes">extensionTypes</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/find">find</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/history">history</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/i18n">i18n</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/identity">identity</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/idle">idle</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/management">management</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/menus">menus</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/notifications">notifications</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/omnibox">omnibox</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/pageAction">pageAction</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/permissions">permissions</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/pkcs11">pkcs11</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/privacy">privacy</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/proxy">proxy</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/runtime">runtime</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/search">search</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/sessions">sessions</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/sidebarAction">sidebarAction</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/storage">storage</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs">tabs</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/theme">theme</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/topSites">topSites</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/types">types</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/userScripts">userScripts</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/webNavigation">webNavigation</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/webRequest">webRequest</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/API/windows">windows</a></li></ol>
      </details>
    </li>
    <li class="toggle">
      <details>
      <summary>Cl√©s de manifeste</summary>
        <ol>
          <li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json">Introduction</a></li>
        </ol>
      <ol><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/author">author</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/background">background</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_action">browser_action</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_specific_settings">browser_specific_settings</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/chrome_settings_overrides">chrome_settings_overrides</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/chrome_url_overrides">chrome_url_overrides</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/commands">commands</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_scripts">content_scripts</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_security_policy">content_security_policy</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/default_locale">default_locale</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/description">description</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/developer">developer</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/devtools_page">devtools_page</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/dictionaries">dictionaries</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/externally_connectable">externally_connectable</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/homepage_url">homepage_url</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/icons">icons</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/incognito">incognito</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/manifest_version">manifest_version</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/name">name</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/offline_enabled">offline_enabled</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/omnibox">omnibox</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/optional_permissions">optional_permissions</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/options_page">options_page</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/options_ui">options_ui</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/page_action">page_action</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions">permissions</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/protocol_handlers">protocol_handlers</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/short_name">short_name</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/sidebar_action">sidebar_action</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/storage">storage</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/theme">theme</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/theme_experiment">theme exp√©rimentation</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/user_scripts">user_scripts</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/version">version</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/version_name">version_name</a></li><li><a href="/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/web_accessible_resources">web_accessible_resources</a></li></ol>
      </details>
    </li>
     <li class="toggle">
      <details>
        <summary>Extension Workshop</summary>
        <ol>
          <li><a href="https://extensionworkshop.com/documentation/develop/">Develop</a></li>
          <li><a href="https://extensionworkshop.com/documentation/publish/">Publish</a></li>
          <li><a href="https://extensionworkshop.com/documentation/manage/">Manage</a></li>
          <li><a href="https://extensionworkshop.com/documentation/enterprise/">Enterprise</a></li>
        </ol>
      </details>
    </li>
    <li><a href="/fr/docs/Mozilla/Add-ons/Contact_us"><strong>Nous contacter</strong></a></li>
    <li class="toggle">
      <details>
        <summary>Canaux de discussions</summary>
        <ol>
          <li><a href="https://blog.mozilla.org/addons">Blog extensions</a></li>
          <li><a href="https://discourse.mozilla.org/c/add-ons">Forum extensions</a></li>
          <li><a href="https://chat.mozilla.org/#/room/%23addons:mozilla.org">Add-ons chat</a></li>
        </ol>
      </details>
    </li>
  </ol>
</div></nav></div><footer id="nav-footer" class="page-footer"><div class="content-container"><div class="page-footer-logo"><a href="/fr/" class="logo" aria-label="MDN Web Docs"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 451.74 135" fill="#fff"><path d="M7.14 8.35v111.06h111.05V8.35zm103.71 56c-.48.92-1 1.79-1.46 2.71a3.44 3.44 0 01-3.54 2 2.4 2.4 0 00-1.55.5c-1.37.9-2.76 1.79-4.18 2.63a7.33 7.33 0 01-6.35.34 29.71 29.71 0 00-10.63-2 11.7 11.7 0 00-9.46 4.31 14.84 14.84 0 00-2.13 4.29c-1.24 3.07-2.3 21.38-2.3 26.05 0 0-17.62-3.42-34.15-20.34l4.31-11.32h-13.5l9.76-10.35h-16.8l9.77-10.34H12.69L30.45 34a40.9 40.9 0 0119.77-10.83c7.1-1.22 8.93-.53 13.31.77l2.43.73.85.25 3.1.95a12.56 12.56 0 006.21.09 11.37 11.37 0 018.25 1 8.24 8.24 0 014.1 6.22 7.29 7.29 0 003.61 5.49 59.45 59.45 0 009.32 4.11c2.27.86 4.54 1.84 6.79 2.72a6.81 6.81 0 012.86 2.06 4.81 4.81 0 011.1 2.73c.14 2 .37 4 .47 6a15.24 15.24 0 01-1.77 8.03zM320.12 39.62a5.42 5.42 0 00-4.53 2.13 7.36 7.36 0 00-1.7 4.43v2.36a6.28 6.28 0 001.7 4.46 5.63 5.63 0 004.3 1.82 5.12 5.12 0 004.57-2.27A9.7 9.7 0 00326 47a8.11 8.11 0 00-1.67-5.52 5.36 5.36 0 00-4.21-1.86zM387.38 39.53a5.52 5.52 0 00-4.7 2.15 8.8 8.8 0 00-1.63 5.49 9.23 9.23 0 001.58 5.45 5.38 5.38 0 004.7 2.25 5.61 5.61 0 004.74-2.2 8.91 8.91 0 001.68-5.59 8.24 8.24 0 00-1.75-5.52 5.76 5.76 0 00-4.62-2.03zM299.47 41.35a4.34 4.34 0 00-4-1.92 4.55 4.55 0 00-3.89 1.73 8.37 8.37 0 00-1.58 4.17h10.48a6.3 6.3 0 00-1.01-3.98zM357.74 30.75H352v23.31h5.72q5.47 0 8.35-3t2.93-8.65q0-5.43-2.88-8.55t-8.38-3.11z"></path><path d="M121.55 8.35v70.8h323V8.35zm42.21 22.45h-4V54h3.68v3.73h-11.25V54h3.31V36.79h-.19l-9.63 19.12h-2.12l-10-19.4h-.19V54h3.45v3.73h-11.15V54h3.68V30.8h-4v-3.73H133l11.66 22.56h.19l11.18-22.56h7.7zm29.12 22.67q-4.11 4.28-11.38 4.28h-14.06v-3.69h3.73V30.75h-3.73v-3.68h13.83q7.59 0 11.66 4.29a15.4 15.4 0 014 11 15.33 15.33 0 01-4.05 11.11zm38.89-22.67h-3.68v27h-2.6L208.08 35h-.19v19h4.67v3.73h-12.22V54h3.49V30.8h-4v-3.73h7.08l16.9 22.09h.19V30.8h-4.58v-3.73h12.32zm43.8 27h-3.31l-7.83-23.18h-.19l-7.55 23.18h-3.35l-8.78-27h-2.65v-3.73H253v3.73h-3.87L255 50.71h.23l6.61-19.91H259v-3.73h11v3.73h-2.78l6.61 20.1h.23l5.43-20.1h-4.15v-3.73h11v3.73h-2.54zm26.71-1.51a9.66 9.66 0 01-6.42 2 10.2 10.2 0 01-7.41-2.74c-1.89-1.82-2.83-4.47-2.83-7.93a12.37 12.37 0 012.64-8.12 9 9 0 017.32-3.21 8.62 8.62 0 016.75 2.69 9.65 9.65 0 012.45 6.52 13.67 13.67 0 01-.28 2.69H290q.29 6.71 6.18 6.7a5.2 5.2 0 003.71-1.18 5.82 5.82 0 001.67-2.83l3.45.71a7.21 7.21 0 01-2.73 4.65zm25.77-1.63c-1.51 2.4-3.92 3.61-7.22 3.61s-5.84-1.29-7.22-3.87c0 .25-.1.82-.21 1.7s-.19 1.44-.22 1.7H309c.16-1 .31-2 .47-3.07a21.42 21.42 0 00.24-3.16v-23h-3.4v-3.3h7.55V40.9a9.76 9.76 0 012.67-3.28 7.33 7.33 0 014.74-1.4 8.48 8.48 0 016.5 2.78q2.55 2.74 2.55 7.74a14.6 14.6 0 01-2.27 7.87zm41.39-1.14q-4.11 4.28-11.37 4.28H344v-3.74h3.73V30.75H344v-3.68h13.83q7.59 0 11.66 4.29a15.41 15.41 0 014.06 11 15.34 15.34 0 01-4.11 11.11zm25.65 1.68a10.53 10.53 0 01-7.9 3.07 10 10 0 01-7.63-3 10.93 10.93 0 01-2.8-7.83 12.13 12.13 0 012.69-7.93q2.69-3.3 8-3.3t8 3.28a12 12 0 012.64 7.76 10.86 10.86 0 01-3 7.9zm22.61.57c-1.4 1.66-3.63 2.5-6.68 2.5a9.58 9.58 0 01-7.15-2.76q-2.72-2.76-2.71-7.91a12.25 12.25 0 012.69-8 9.17 9.17 0 017.5-3.28 15 15 0 013.82.48 10.37 10.37 0 013.5 1.65l.85 5.47-3.35.38-.76-3.54a8.07 8.07 0 00-4.11-1 4.9 4.9 0 00-4.39 2.15 9.93 9.93 0 00-1.41 5.55 8.9 8.9 0 001.5 5.38 5.23 5.23 0 004.44 2c2.92 0 4.67-1.7 5.23-5.1l3.5.71a10.34 10.34 0 01-2.47 5.27zm20.48.75a11.68 11.68 0 01-6.63 1.75 15.52 15.52 0 01-8.26-2.08L424 51l3.26.33-.1 2.74a7 7 0 002.06.66 12.63 12.63 0 002.19.19 8.68 8.68 0 003.66-.75 2.5 2.5 0 001.63-2.36 2.25 2.25 0 00-1.32-2.2 12.65 12.65 0 00-3.28-1 47.39 47.39 0 01-3.9-.82 7.5 7.5 0 01-3.25-1.7 4.67 4.67 0 01-1.33-3.66c0-2.36.88-4 2.62-4.91a12 12 0 015.6-1.37 15 15 0 014.08.55 16.65 16.65 0 013.47 1.39l.47 5.1-3.3.37-.48-3.3a9.5 9.5 0 00-4.06-.9 5.62 5.62 0 00-2.87.66 2.33 2.33 0 00-1.15 2.25 2.13 2.13 0 001.3 2.07 11.91 11.91 0 003.21.92 36.69 36.69 0 013.82.83 7.46 7.46 0 013.21 1.74 4.9 4.9 0 011.3 3.73 5.56 5.56 0 01-2.66 4.91z"></path><path d="M181.17 30.75h-5.71v23.31h5.71q5.47 0 8.36-3t2.88-8.61q0-5.43-2.88-8.55t-8.36-3.15zM121.63 119.32V81.74h114.91v37.58zM153.22 109h-2v-6.85a4.8 4.8 0 00-1.58-4 5.57 5.57 0 00-3.55-1.26 5 5 0 00-4.92 3.26 4.19 4.19 0 00-1.88-2.46 5.82 5.82 0 00-3-.8 4.89 4.89 0 00-4.56 2.56v-2.21h-6.28v3.26h2v8.5h-2v3.23h9.11V109h-2.86v-5.25a4.4 4.4 0 01.69-2.56 2.47 2.47 0 012.21-1q2.57 0 2.56 3.63v8.41h6.29V109h-2v-5.25a4.47 4.47 0 01.67-2.56 2.42 2.42 0 012.19-1q2.63 0 2.63 3.63v8.41h6.28zm9.88-12.07q-4 0-6 2.36a8.41 8.41 0 00-2 5.66 7.25 7.25 0 002.17 5.62 8 8 0 005.65 2 8.54 8.54 0 005.94-2.11 7.27 7.27 0 002.34-5.67 8.21 8.21 0 00-2-5.51q-2.07-2.34-6.1-2.34zm-.1 12.35a3 3 0 01-2.63-1.33 5.68 5.68 0 01-.9-3.26 5 5 0 011-3.28 3.23 3.23 0 012.61-1.18 3.5 3.5 0 012.59 1.08 4.56 4.56 0 011.07 3.31 5.21 5.21 0 01-1 3.41 3.33 3.33 0 01-2.74 1.25zm25-2.3l-3.39-.29-.7 2.32H179l8.32-9.54-.32-2.23h-13.19l-.53 5.25 3.16.34.67-2.36h4.65l-8.25 9.53.44 2.26h13.13zm7.62-9.74h-4.46v5.39h4.46zm0 9.61h-4.46v5.39h4.46zm13.54-17.49h-4.23l-6.48 22.88h4.22zm8.68 0h-4.23l-6.45 22.88h4.19zm15 22.51l-.07-2.26a1.22 1.22 0 01-.56.1c-.69 0-1-.39-1-1.16v-6.49a4.39 4.39 0 00-1.8-3.84 7 7 0 00-4.16-1.28 14.55 14.55 0 00-3.16.3 24.14 24.14 0 00-3.29 1.06l-.56 3.46 3.39.4.5-1.69a2.78 2.78 0 011.08-.37 11.3 11.3 0 011.25-.07c1.19 0 1.89.37 2.09 1.1a8.55 8.55 0 01.3 2.26v.5a8.91 8.91 0 00-1.18-.11h-1.21a12.64 12.64 0 00-4.81.88 3.53 3.53 0 00-2.18 3.64 3.66 3.66 0 001.48 3.33 5.63 5.63 0 003.11 1 4.67 4.67 0 003-.91 6.78 6.78 0 001.8-2 3 3 0 003.33 3 5.54 5.54 0 002.66-.85zm-9.25-2.32a1.69 1.69 0 01-1.36-.52 1.81 1.81 0 01-.43-1.21 1.67 1.67 0 01.86-1.68 4.63 4.63 0 012-.42 7.69 7.69 0 011.07.07l1.06.13a3.58 3.58 0 01-1.08 2.74 3.24 3.24 0 01-2.11.89z"></path></svg></a></div><ul class="link-list-mdn"><li><a href="/fr/docs/Web">Web Technologies</a></li><li><a href="/fr/docs/Learn">Learn Web Development</a></li><li><a href="/fr/docs/MDN/About">About MDN</a></li><li><a href="/fr/docs/MDN/Feedback">Feedback</a></li></ul><ul class="link-list-moz"><li><a href="https://www.mozilla.org/about/" target="_blank" rel="noopener noreferrer">About</a></li><li><a href="https://shop.spreadshirt.com/mdn-store/" target="_blank" rel="noopener noreferrer">MDN Web Docs Store</a></li><li><a href="https://www.mozilla.org/contact/" target="_blank" rel="noopener noreferrer">Contact Us</a></li><li><a href="https://www.mozilla.org/firefox/?utm_source=developer.mozilla.org&amp;utm_campaign=footer&amp;utm_medium=referral" target="_blank" rel="noopener noreferrer">Firefox</a></li></ul><div class="social social-mdn"><h4>MDN</h4><ul><li><a class="social-icon twitter" href="https://twitter.com/mozdevnet" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">MDN on Twitter</span></a></li><li><a class="social-icon github" href="https://github.com/mdn/" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">MDN on Github</span></a></li></ul></div><div class="social social-moz"><h4>Mozilla</h4><ul><li><a class="social-icon twitter" href="https://twitter.com/mozilla" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">Mozilla on Twitter</span></a></li><li><a class="social-icon instagram" href="https://www.instagram.com/mozillagram/" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">Mozilla on Instagram</span></a></li></ul></div><p id="license" class="footer-license">¬© 2005-<!-- -->2022<!-- --> Mozilla and individual contributors. Content is available under<!-- --> <a href="/docs/MDN/About#Copyrights_and_licenses">these licenses</a>.</p><ul class="footer-legal"><li><a href="https://www.mozilla.org/about/legal/terms/mozilla" target="_blank" rel="noopener noreferrer">Terms</a></li><li><a href="https://www.mozilla.org/privacy/websites/" target="_blank" rel="noopener noreferrer">Privacy</a></li><li><a href="https://www.mozilla.org/privacy/websites/#cookies" target="_blank" rel="noopener noreferrer">Cookies</a></li></ul></div></footer><div class="page-overlay hidden"></div></div><script type="application/json" id="hydration">{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"Partage d'objets avec des scripts de page","mdn_url":"/fr/docs/Mozilla/Add-ons/WebExtensions/Sharing_objects_with_page_scripts","locale":"fr","native":"Fran√ßais","sidebarHTML":"\n  <ol>\n    <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions\"><strong>WebExtensions</strong></a></li>\n    <li class=\"toggle\">\n      <details>\n        <summary>D√©marrage</summary>\n        <ol>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/What_are_WebExtensions\">Que sont les WebExtensions ?</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Your_first_WebExtension\">Votre premi√®re WebExtension</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Your_second_WebExtension\">Votre deuxi√®me WebExtension</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension\">Anatomie d'une WebExtension</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Examples\">Exemples de WebExtensions</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/What_next_\">Que faire ensuite ?</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary>Concepts</summary>\n        <ol>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Using_the_JavaScript_APIs\">Utilisation des API JavaScript</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Content_scripts\">Scripts de contenu</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Match_patterns\">Motifs de correspondance (Match patterns)</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Working_with_files\">Travailler avec les fichiers</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Internationalization\">Internationalisation</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Content_Security_Policy\">Politique de s√©curit√© du contenu</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Native_messaging\">Message natifs</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Differences_between_API_implementations\">Differences between API implementations</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Chrome_incompatibilities\">Incompatibilit√©s avec Chrome</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary>Interface Utilisateur</summary>\n        <ol>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface\">Introduction</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Browser_action\">Bouton de la barre d'outils</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Page_actions\">Bouton de la barre d'adresse</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Sidebars\">Barres lat√©rales</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Context_menu_items\">√âl√©ments du menu contextuel</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Options_pages\">Page d'options</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Extension_pages\">Pages pour l'extension</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Notifications\">Notifications</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Omnibox\">Suggestions de la barre d'adresse</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/devtools_panels\">Panneaux d'outils de d√©veloppement</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary>Mode d'emploi</summary>\n        <ol>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Intercept_HTTP_requests\">Intercepter les requ√™tes HTTP</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Modify_a_web_page\">Modifier une page web</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Safely_inserting_external_content_into_a_page\">Ins√©rer un contenu externe</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Sharing_objects_with_page_scripts\">Share objects with page scripts</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Add_a_button_to_the_toolbar\">Ajouter un bouton √† la barre d'outils</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Implement_a_settings_page\">Mettre en place une page de param√®tres</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API\">Travailler avec l'API Tabs</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Bookmarks_API\">Travailler avec l'API Bookmarks</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Cookies_API\">Travailler avec l'API Cookies</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Work_with_contextual_identities\">Travailler avec des identit√©s contextuelles</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Interact_with_the_clipboard\">Interagir avec le presse-papier</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Build_a_cross_browser_extension\">Build a cross-browser extension</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Firefox_differentiators\">Firefox differentiators</a></summary>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary>Les API JavaScript</summary>\n        <ol><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Browser_support_for_JavaScript_APIs\">Browser support for JavaScript APIs</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/alarms\">alarms</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/bookmarks\">bookmarks</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/browserAction\">browserAction</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/browserSettings\">browserSettings</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/browsingData\">browsingData</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/captivePortal\">captivePortal</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/clipboard\">clipboard</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/commands\">commands</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/contentScripts\">contentScripts</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/contextualIdentities\">contextualIdentities</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/cookies\">cookies</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/devtools\">devtools</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/dns\">dns</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/downloads\">downloads</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/events\">events</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/extension\">extension</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/extensionTypes\">extensionTypes</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/find\">find</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/history\">history</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/i18n\">i18n</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/identity\">identity</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/idle\">idle</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/management\">management</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/menus\">menus</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/notifications\">notifications</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/omnibox\">omnibox</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/pageAction\">pageAction</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/permissions\">permissions</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/pkcs11\">pkcs11</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/privacy\">privacy</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/proxy\">proxy</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/runtime\">runtime</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/search\">search</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/sessions\">sessions</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/sidebarAction\">sidebarAction</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/storage\">storage</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs\">tabs</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/theme\">theme</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/topSites\">topSites</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/types\">types</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/userScripts\">userScripts</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/webNavigation\">webNavigation</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/webRequest\">webRequest</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/windows\">windows</a></li></ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n      <summary>Cl√©s de manifeste</summary>\n        <ol>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json\">Introduction</a></li>\n        </ol>\n      <ol><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/author\">author</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/background\">background</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_action\">browser_action</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_specific_settings\">browser_specific_settings</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/chrome_settings_overrides\">chrome_settings_overrides</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/chrome_url_overrides\">chrome_url_overrides</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/commands\">commands</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_scripts\">content_scripts</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_security_policy\">content_security_policy</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/default_locale\">default_locale</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/description\">description</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/developer\">developer</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/devtools_page\">devtools_page</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/dictionaries\">dictionaries</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/externally_connectable\">externally_connectable</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/homepage_url\">homepage_url</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/icons\">icons</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/incognito\">incognito</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/manifest_version\">manifest_version</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/name\">name</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/offline_enabled\">offline_enabled</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/omnibox\">omnibox</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/optional_permissions\">optional_permissions</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/options_page\">options_page</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/options_ui\">options_ui</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/page_action\">page_action</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions\">permissions</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/protocol_handlers\">protocol_handlers</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/short_name\">short_name</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/sidebar_action\">sidebar_action</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/storage\">storage</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/theme\">theme</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/theme_experiment\">theme exp√©rimentation</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/user_scripts\">user_scripts</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/version\">version</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/version_name\">version_name</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/web_accessible_resources\">web_accessible_resources</a></li></ol>\n      </details>\n    </li>\n     <li class=\"toggle\">\n      <details>\n        <summary>Extension Workshop</summary>\n        <ol>\n          <li><a href=\"https://extensionworkshop.com/documentation/develop/\">Develop</a></li>\n          <li><a href=\"https://extensionworkshop.com/documentation/publish/\">Publish</a></li>\n          <li><a href=\"https://extensionworkshop.com/documentation/manage/\">Manage</a></li>\n          <li><a href=\"https://extensionworkshop.com/documentation/enterprise/\">Enterprise</a></li>\n        </ol>\n      </details>\n    </li>\n    <li><a href=\"/fr/docs/Mozilla/Add-ons/Contact_us\"><strong>Nous contacter</strong></a></li>\n    <li class=\"toggle\">\n      <details>\n        <summary>Canaux de discussions</summary>\n        <ol>\n          <li><a href=\"https://blog.mozilla.org/addons\">Blog extensions</a></li>\n          <li><a href=\"https://discourse.mozilla.org/c/add-ons\">Forum extensions</a></li>\n          <li><a href=\"https://chat.mozilla.org/#/room/%23addons:mozilla.org\">Add-ons chat</a></li>\n        </ol>\n      </details>\n    </li>\n  </ol>\n","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>Note :</strong> Les techniques d√©crites dans cette section sont uniquement disponibles dans Firefox, et seulement √† partir de Firefox 49</p>\n</div>\n<div class=\"notecard warning\" id=\"sect2\">\n  <p><strong>Attention :</strong> En tant que d√©veloppeur d'extensions, vous devez consid√©rer que les scripts s'ex√©cutant sur des pages Web arbitraires sont des codes hostiles dont le but est de voler les informations personnelles de l'utilisateur, d'endommager leur ordinateur ou de les attaquer d'une autre mani√®re.</p>\n  <p>L'isolation entre les scripts de contenu et les scripts charg√©s par les pages Web a pour but de rendre plus difficile la t√¢che des pages Web hostiles.</p>\n  <p>Puisque les techniques d√©crites dans cette section d√©compose cet isolement, elles sont intrins√®quement dangereuses et devraient √™tre utilis√©es avec beaucoup de soin.</p>\n</div>\n<p>Comme les <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Content_scripts#dom_access\">notes du guide de scripts de contenu</a>, les scripts de contenu ne voient pas les modifications apport√©es au DOM par des scripts charg√©s par des pages Web.Cela signifie que, par exemple, si une page Web charge une biblioth√®que comme jQuery, les scripts de contenu ne pourront pas l'utiliser et devront charger leur propre copie. √Ä l'inverse, les scripts charg√©s par les pages Web ne peuvent pas voir les modifications apport√©es par les scripts de contenu.</p>\n<p>Cependant, Firefox fournit des API qui permettent aux scripts de contenu de :</p>\n<ul>\n  <li>acc√©der aux objets JavaScript cr√©√©s par les scripts de page</li>\n  <li>exposer leurs propres objets JavaScript aux scripts de pages.</li>\n</ul>"}},{"type":"prose","value":{"id":"vision_xray_dans_firefox","title":"Vision Xray dans Firefox","isH3":false,"content":"<p>Dans Firefox, une partie de l'isolation entre les scripts de contenu et les scripts de pages est impl√©ment√©e en utilisant une fonction appel√©e \"Vision Xray\". Lorsqu'un script dans une port√©e plus privil√©gi√©e acc√®de √† un objet d√©fini dans une port√©e moins privil√©gi√©e, il ne voit que la \"version native\" de l'objet. Toutes les propri√©t√©s <a href=\"/fr/docs/Glossary/Expando\">expando</a> sont invisibles et si des propri√©t√©s de l'objet ont √©t√© red√©finies, il voit l'impl√©mentation d'origine et non la version red√©finie.</p>\n<p>Le but de cette fonctionnalit√© est de rendre le script moins privil√©gi√© plus difficile √† confondre le script plus privil√©gi√© en red√©finissant les propri√©t√©s natives des objets.</p>\n<p>Par exemple, lorsqu'un script de contenu acc√®de √† la <a href=\"/fr/docs/Web/API/Window\">fen√™tre</a> de la page, il ne voit aucune propri√©t√© ajout√©e au script de la page, et si le script de la page a red√©fini les propri√©t√©s de la fen√™tre, le script de contenu verra la version originale .</p>\n<p>Pour l'histoire compl√®te sur la vision Xray, voir les articles sur <a href=\"en-US/docs/Mozilla/Tech/Xray_vision\">Vision Xray</a> et la <a href=\"en-US/docs/Mozilla/Gecko/Script_security\">securit√© des Scripts</a>.</p>"}},{"type":"prose","value":{"id":"acc√®s_aux_objets_de_script_de_page_√†_partir_de_scripts_de_contenu","title":"Acc√®s aux objets de script de page √† partir de scripts de contenu","isH3":false,"content":"<p>Dans Firefox, les objets DOM dans les scripts de contenu obtiennent une propri√©t√© suppl√©mentaire <code>wrappedJSObject</code>. C'est une version \"d√©ball√©e\" de l'objet, qui inclut toutes les modifications apport√©es √† cet objet par les scripts de page.</p>\n<p>Prenons un exemple simple. Supposons qu'une page Web charge un script:</p>\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UTF-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/javascript<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>main.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<p>Le script ajoute une propri√©t√© expando √† la <code>fen√™tre</code> globale :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// main.js</span>\n\n<span class=\"token keyword\">var</span> foo <span class=\"token operator\">=</span> <span class=\"token string\">\"I'm defined in a page script!\"</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>La vision Xray signifie que si un script de contenu tente d'acc√©der √† <code>foo</code>, il sera ind√©fini:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// content-script.js</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// undefined</span>\n</code></pre></div>\n<p>Dans Firefox, les scripts de contenu peuvent utiliser <code>window.wrappedJSObject</code> pour voir la propri√©t√© expando :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// content-script.js</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>wrappedJSObject<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \"I'm defined in a page script!\"</span>\n</code></pre></div>\n<p>Notez qu'une fois que vous faites cela, vous ne pouvez plus compter sur les propri√©t√©s ou les fonctions de cet objet qui sont, ou font, ce que vous attendez. N'importe lequel d'entre eux, m√™me les setters et les getters, aurait pu √™tre red√©fini par un code non fiable.</p>\n<p>Notez √©galement que le d√©ballage est transitif: lorsque vous utilisez <code>wrappedJSObject</code>, toutes les propri√©t√©s de l'objet d√©pli√© sont elles-m√™mes d√©pli√©es (et donc peu fiables). C'est donc une bonne pratique, une fois que vous avez l'objet dont vous avez besoin, de le r√©emballer, ce que vous pouvez faire comme ceci:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token function\">XPCNativeWrapper</span><span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>wrappedJSObject<span class=\"token punctuation\">.</span>foo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>voir le document <a href=\"/fr/Tech/Xray_vision\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">vision Xray</a> pour plus de d√©tails √† ce sujet.</p>"}},{"type":"prose","value":{"id":"partage_dobjets_de_script_de_contenu_avec_des_scripts_de_page","title":"Partage d'objets de script de contenu avec des scripts de page","isH3":false,"content":"<p>Firefox fournit √©galement des API permettant aux scripts de contenu de rendre les objets disponibles pour les scripts de page. Il y a plusieurs approches ici:</p>\n<ul>\n  <li><a href=\"#exportfunction\"><code>exportFunction()</code></a>: exporte une fonction vers des scripts de page</li>\n  <li><a href=\"#cloneinto\"><code>cloneInto()</code></a>: exporte un objet vers des scripts de page.</li>\n  <li>constructeurs du contexte de la page</li>\n</ul>"}},{"type":"prose","value":{"id":"exportfunction","title":"exportFunction","isH3":true,"content":"<p>√âtant donn√© une fonction d√©finie dans le script de contenu, <code>exportFunction()</code> l'exporte vers la port√©e du script de page, afin que le script de page puisse l'appeler.</p>\n<p>Par exemple, consid√©rons une extension qui a un script d'arri√®re-plan comme ceci :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">/*\nExecute content script in the active tab.\n*/</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">loadContentScript</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  browser<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">executeScript</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">file</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/content_scripts/export.js\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/*\nAdd loadContentScript() as a listener to clicks\non the browser action.\n*/</span>\nbrowser<span class=\"token punctuation\">.</span>browserAction<span class=\"token punctuation\">.</span>onClicked<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span>loadContentScript<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/*\nShow a notification when we get messages from\nthe content script.\n*/</span>\nbrowser<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span>onMessage<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">message</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  browser<span class=\"token punctuation\">.</span>notifications<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">\"basic\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Message from the page\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">message</span><span class=\"token operator\">:</span> message<span class=\"token punctuation\">.</span>content\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Cela fait deux choses :</p>\n<ul>\n  <li>ex√©cuter un script de contenu dans l'onglet en cours, lorsque l'utilisateur clique sur une action du navigateur</li>\n  <li>√©couter les messages du script de contenu et afficher une <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/notifications\">notification</a> lorsque le message arrive.</li>\n</ul>\n<p>Le script de contenu ressemble √† ceci :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">/*\nDefine a function in the content script's scope, then export it\ninto the page script's scope.\n*/</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">notify</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">message</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  browser<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">content</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Function call: \"</span> <span class=\"token operator\">+</span> message<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">exportFunction</span><span class=\"token punctuation\">(</span>notify<span class=\"token punctuation\">,</span> window<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">defineAs</span><span class=\"token operator\">:</span><span class=\"token string\">'notify'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Cela d√©finit une fonction <code>notify()</code>, qui envoie simplement son argument au script d'arri√®re-plan. Il exporte ensuite la fonction vers la port√©e du script de page. Maintenant, le script de la page peut appeler cette fonction:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>window<span class=\"token punctuation\">.</span><span class=\"token function\">notify</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Message from the page script!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Pour l'histoire compl√®te, voir <a href=\"/fr/Tech/XPCOM/Language_Bindings/Components.utils.exportFunction\" class=\"page-not-created\" title=\"This is a link to an unwritten page\"><code>Components.utils.exportFunction</code></a>.</p>"}},{"type":"prose","value":{"id":"cloneinto","title":"cloneInto","isH3":true,"content":"<p>√âtant donn√© un objet d√©fini dans le script de contenu, cela cr√©e un clone de l'objet dans la port√©e du script de page, rendant ainsi le clone accessible aux scripts de page. Par d√©faut, cela utilise <a href=\"/fr/docs/Web/API/Web_Workers_API/Structured_clone_algorithm\">l'agorithme clone structur√©</a> pour cloner l'objet, ce qui signifie que les fonctions de l'objet ne sont pas incluses dans le clone. Pour inclure des fonctions, passez l'option <code>cloneFunctions</code>.</p>\n<p>Par exemple, voici un script de contenu qui d√©finit un objet contenant une fonction, puis le clone dans la port√©e du script de page :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">/*\nCreate an object that contains functions in\nthe content script's scope, then clone it\ninto the page script's scope.\n\nBecause the object contains functions,\nthe cloneInto call must include\nthe `cloneFunctions` option.\n*/</span>\n<span class=\"token keyword\">var</span> messenger <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">notify</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">message</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    browser<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span><span class=\"token function\">sendMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">content</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Object method call: \"</span> <span class=\"token operator\">+</span> message\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nwindow<span class=\"token punctuation\">.</span>wrappedJSObject<span class=\"token punctuation\">.</span>messenger <span class=\"token operator\">=</span> <span class=\"token function\">cloneInto</span><span class=\"token punctuation\">(</span>\n  messenger<span class=\"token punctuation\">,</span>\n  window<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">cloneFunctions</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Maintenant les scripts de page vont voir une nouvelle propri√©t√© sur la fen√™tre, <code>messenger</code>, qui a une fonction <code>notify()</code>:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>window<span class=\"token punctuation\">.</span>messenger<span class=\"token punctuation\">.</span><span class=\"token function\">notify</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Message from the page script!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Pour l'histoire compl√®te, voir <a href=\"/fr/Tech/XPCOM/Language_Bindings/Components.utils.cloneInto\" class=\"page-not-created\" title=\"This is a link to an unwritten page\"><code>Components.utils.cloneInto</code></a>.</p>"}},{"type":"prose","value":{"id":"constructeurs_du_contexte_de_la_page","title":"Constructeurs du contexte de la page","isH3":true,"content":"<p>Sur l'objet fen√™tre de xrayed, des constructeurs immacul√©s pour certains objets javascript int√©gr√©s tels que <code>Object</code>, <code>Function</code> ou <code>Proxy</code> et diff√©rentes classe DOM sont disponibles. <code>XMLHttpRequest</code> ne se comporte pas de cette mani√®re, voir la section <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Content_scripts#xhr_and_fetch\">XHR and fetch</a> pour plus de d√©tails. Ils cr√©eront des instances appartenant √† la hi√©rarchie d'objets de la page global, puis retourneront un wrapper xray.</p>\n<p>Puisque les objets cr√©√©s de cette mani√®re appartiennent d√©j√† √† la page et que le script de contenu ne les renvoie pas √† la page, il ne n√©cessitera pas de clonage ou d'exportation suppl√©mentaire.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">/* javascript built-ins */</span>\n\n<span class=\"token keyword\">const</span> objA <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> objB <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">window<span class=\"token punctuation\">.</span>Object</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n  objA <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">,</span>                        <span class=\"token comment\">// true</span>\n  objB <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Object</span><span class=\"token punctuation\">,</span>                        <span class=\"token comment\">// false</span>\n  objA <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">window<span class=\"token punctuation\">.</span>Object</span><span class=\"token punctuation\">,</span>                 <span class=\"token comment\">// false</span>\n  objB <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">window<span class=\"token punctuation\">.</span>Object</span><span class=\"token punctuation\">,</span>                 <span class=\"token comment\">// true</span>\n  <span class=\"token string\">'wrappedJSObject'</span> <span class=\"token keyword\">in</span> objB                      <span class=\"token comment\">// true; xrayed</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nobjA<span class=\"token punctuation\">.</span>foo <span class=\"token operator\">=</span> <span class=\"token string\">\"foo\"</span><span class=\"token punctuation\">;</span>\nobjB<span class=\"token punctuation\">.</span>foo <span class=\"token operator\">=</span> <span class=\"token string\">\"foo\"</span><span class=\"token punctuation\">;</span>                                <span class=\"token comment\">// xray wrappers for plain javascript objects pass through property assignments</span>\nobjB<span class=\"token punctuation\">.</span>wrappedJSObject<span class=\"token punctuation\">.</span>bar <span class=\"token operator\">=</span> <span class=\"token string\">\"bar\"</span><span class=\"token punctuation\">;</span>                <span class=\"token comment\">// unwrapping before assignment does not rely on this special behavior</span>\n\nwindow<span class=\"token punctuation\">.</span>wrappedJSObject<span class=\"token punctuation\">.</span>objA <span class=\"token operator\">=</span> objA<span class=\"token punctuation\">;</span>\nwindow<span class=\"token punctuation\">.</span>wrappedJSObject<span class=\"token punctuation\">.</span>objB <span class=\"token operator\">=</span> objB<span class=\"token punctuation\">;</span>              <span class=\"token comment\">// automatically unwraps when passed to page context</span>\n\nwindow<span class=\"token punctuation\">.</span><span class=\"token function\">eval</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  console.log(objA instanceof Object);           // false\n  console.log(objB instanceof Object);           // true\n\n  console.log(objA.foo);                         // undefined\n  objA.baz = \"baz\";                              // Error: permission denied\n\n  console.log(objB.foo, objB.bar);               // \"foo\", \"bar\"\n  objB.baz = \"baz\";\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/* other APIs */</span>\n\n<span class=\"token keyword\">const</span> ev <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Event</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n  ev <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Event</span><span class=\"token punctuation\">,</span>                           <span class=\"token comment\">// true</span>\n  ev <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">window<span class=\"token punctuation\">.</span>Event</span><span class=\"token punctuation\">,</span>                    <span class=\"token comment\">// true; Event constructor is actually inherited from the xrayed window</span>\n  <span class=\"token string\">'wrappedJSObject'</span> <span class=\"token keyword\">in</span> ev                        <span class=\"token comment\">// true; is an xrayed object</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nev<span class=\"token punctuation\">.</span>propA <span class=\"token operator\">=</span> <span class=\"token string\">\"propA\"</span>                                <span class=\"token comment\">// xray wrappers for native objects do not pass through assignments</span>\nev<span class=\"token punctuation\">.</span>propB <span class=\"token operator\">=</span> <span class=\"token string\">\"wrapper\"</span><span class=\"token punctuation\">;</span>                             <span class=\"token comment\">// define property on xray wrapper</span>\nev<span class=\"token punctuation\">.</span>wrappedJSObject<span class=\"token punctuation\">.</span>propB <span class=\"token operator\">=</span> <span class=\"token string\">\"unwrapped\"</span><span class=\"token punctuation\">;</span>           <span class=\"token comment\">// define same property on page object</span>\nReflect<span class=\"token punctuation\">.</span><span class=\"token function\">defineProperty</span><span class=\"token punctuation\">(</span>ev<span class=\"token punctuation\">.</span>wrappedJSObject<span class=\"token punctuation\">,</span>        <span class=\"token comment\">// privileged reflection can operate on less privileged objects</span>\n  <span class=\"token string\">'propC'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token literal-property property\">get</span><span class=\"token operator\">:</span> <span class=\"token function\">exportFunction</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>             <span class=\"token comment\">// getters must be exported like regular functions</span>\n       <span class=\"token keyword\">return</span> <span class=\"token string\">'propC'</span><span class=\"token punctuation\">;</span>\n     <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nwindow<span class=\"token punctuation\">.</span><span class=\"token function\">eval</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  document.addEventListener(\"click\", (e) =&gt; {\n    console.log(e instanceof Event, e.propA, e.propB, e.propC);\n  });\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ndocument<span class=\"token punctuation\">.</span><span class=\"token function\">dispatchEvent</span><span class=\"token punctuation\">(</span>ev<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true, undefined, \"unwrapped\", \"propC\"</span>\n</code></pre></div>"}}],"toc":[{"text":"Vision Xray dans Firefox","id":"vision_xray_dans_firefox"},{"text":"Acc√®s aux objets de script de page √† partir de scripts de contenu","id":"acc√®s_aux_objets_de_script_de_page_√†_partir_de_scripts_de_contenu"},{"text":"Partage d'objets de script de contenu avec des scripts de page","id":"partage_dobjets_de_script_de_contenu_avec_des_scripts_de_page"}],"summary":"Comme les notes du guide de scripts de contenu, les scripts de contenu ne voient pas les modifications apport√©es au DOM par des scripts charg√©s par des pages Web.Cela signifie que, par exemple, si une page Web charge une biblioth√®que comme jQuery, les scripts de contenu ne pourront pas l'utiliser et devront charger leur propre copie. √Ä l'inverse, les scripts charg√©s par les pages Web ne peuvent pas voir les modifications apport√©es par les scripts de contenu.","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Sharing objects with page scripts","locale":"en-US","native":"English (US)"}],"source":{"folder":"fr/mozilla/add-ons/webextensions/sharing_objects_with_page_scripts","github_url":"https://github.com/mdn/translated-content/blob/main/files/fr/mozilla/add-ons/webextensions/sharing_objects_with_page_scripts/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/fr/docs/Mozilla","title":"Mozilla"},{"uri":"/fr/docs/Mozilla/Add-ons","title":"Modules"},{"uri":"/fr/docs/Mozilla/Add-ons/WebExtensions","title":"WebExtensions"},{"uri":"/fr/docs/Mozilla/Add-ons/WebExtensions/Sharing_objects_with_page_scripts","title":"Partage d'objets avec des scripts de page"}],"pageTitle":"Partage d'objets avec des scripts de page - Mozilla | MDN","noIndexing":false}}</script></body></html>