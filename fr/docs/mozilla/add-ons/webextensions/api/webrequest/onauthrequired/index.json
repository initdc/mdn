{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"webRequest.onAuthRequired","mdn_url":"/fr/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/onAuthRequired","locale":"fr","native":"Français","sidebarHTML":"\n  <ol>\n    <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions\"><strong>WebExtensions</strong></a></li>\n    <li class=\"toggle\">\n      <details>\n        <summary>Démarrage</summary>\n        <ol>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/What_are_WebExtensions\">Que sont les WebExtensions ?</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Your_first_WebExtension\">Votre première WebExtension</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Your_second_WebExtension\">Votre deuxième WebExtension</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension\">Anatomie d'une WebExtension</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Examples\">Exemples de WebExtensions</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/What_next_\">Que faire ensuite ?</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary>Concepts</summary>\n        <ol>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Using_the_JavaScript_APIs\">Utilisation des API JavaScript</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Content_scripts\">Scripts de contenu</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Match_patterns\">Motifs de correspondance (Match patterns)</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Working_with_files\">Travailler avec les fichiers</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Internationalization\">Internationalisation</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Content_Security_Policy\">Politique de sécurité du contenu</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Native_messaging\">Message natifs</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Differences_between_API_implementations\">Differences between API implementations</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Chrome_incompatibilities\">Incompatibilités avec Chrome</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary>Interface Utilisateur</summary>\n        <ol>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface\">Introduction</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Browser_action\">Bouton de la barre d'outils</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Page_actions\">Bouton de la barre d'adresse</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Sidebars\">Barres latérales</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Context_menu_items\">Éléments du menu contextuel</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Options_pages\">Page d'options</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Extension_pages\">Pages pour l'extension</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Notifications\">Notifications</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Omnibox\">Suggestions de la barre d'adresse</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/devtools_panels\">Panneaux d'outils de développement</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary>Mode d'emploi</summary>\n        <ol>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Intercept_HTTP_requests\">Intercepter les requêtes HTTP</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Modify_a_web_page\">Modifier une page web</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Safely_inserting_external_content_into_a_page\">Insérer un contenu externe</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Sharing_objects_with_page_scripts\">Share objects with page scripts</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Add_a_button_to_the_toolbar\">Ajouter un bouton à la barre d'outils</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Implement_a_settings_page\">Mettre en place une page de paramètres</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API\">Travailler avec l'API Tabs</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Bookmarks_API\">Travailler avec l'API Bookmarks</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Cookies_API\">Travailler avec l'API Cookies</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Work_with_contextual_identities\">Travailler avec des identités contextuelles</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Interact_with_the_clipboard\">Interagir avec le presse-papier</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Build_a_cross_browser_extension\">Build a cross-browser extension</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Firefox_differentiators\">Firefox differentiators</a></summary>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details open=\"\">\n        <summary>Les API JavaScript</summary>\n        <ol><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Browser_support_for_JavaScript_APIs\">Browser support for JavaScript APIs</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/alarms\">alarms</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/bookmarks\">bookmarks</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/browserAction\">browserAction</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/browserSettings\">browserSettings</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/browsingData\">browsingData</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/captivePortal\">captivePortal</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/clipboard\">clipboard</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/commands\">commands</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/contentScripts\">contentScripts</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/contextualIdentities\">contextualIdentities</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/cookies\">cookies</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/devtools\">devtools</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/dns\">dns</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/downloads\">downloads</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/events\">events</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/extension\">extension</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/extensionTypes\">extensionTypes</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/find\">find</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/history\">history</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/i18n\">i18n</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/identity\">identity</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/idle\">idle</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/management\">management</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/menus\">menus</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/notifications\">notifications</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/omnibox\">omnibox</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/pageAction\">pageAction</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/permissions\">permissions</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/pkcs11\">pkcs11</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/privacy\">privacy</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/proxy\">proxy</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/runtime\">runtime</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/search\">search</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/sessions\">sessions</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/sidebarAction\">sidebarAction</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/storage\">storage</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs\">tabs</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/theme\">theme</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/topSites\">topSites</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/types\">types</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/userScripts\">userScripts</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/webNavigation\">webNavigation</a></li><li class=\"webextension-api-sidebar\"><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/webRequest\">webRequest</a><ol><li data-default-state=\"open\"><a href=\"#\"><strong>Méthodes</strong></a><ol><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/filterResponseData\"><code>filterResponseData()</code></a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/getSecurityInfo\"><code>getSecurityInfo()</code></a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/handlerBehaviorChanged\"><code>handlerBehaviorChanged()</code></a></li></ol></li><li data-default-state=\"open\"><a href=\"#\"><strong>Propriétés</strong></a><ol><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/MAX_HANDLER_BEHAVIOR_CHANGED_CALLS_PER_10_MINUTES\"><code>MAX_HANDLER_BEHAVIOR_CHANGED_CALLS_PER_10_MINUTES</code></a></li></ol></li><li data-default-state=\"open\"><a href=\"#\"><strong>Types</strong></a><ol><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/BlockingResponse\"><code>BlockingResponse</code></a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/CertificateInfo\"><code>CertificateInfo</code></a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/HttpHeaders\"><code>HttpHeaders</code></a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/RequestFilter\"><code>RequestFilter</code></a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/ResourceType\"><code>ResourceType</code></a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/SecurityInfo\"><code>SecurityInfo</code></a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/StreamFilter\"><code>StreamFilter</code></a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/UploadData\"><code>UploadData</code></a></li></ol></li><li data-default-state=\"open\"><a href=\"#\"><strong>Événements</strong></a><ol><li><em><code>onAuthRequired</code></em></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/onBeforeRedirect\"><code>onBeforeRedirect</code></a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/onBeforeRequest\"><code>onBeforeRequest</code></a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/onBeforeSendHeaders\"><code>onBeforeSendHeaders</code></a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/onCompleted\"><code>onCompleted</code></a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/onErrorOccurred\"><code>onErrorOccurred</code></a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/onHeadersReceived\"><code>onHeadersReceived</code></a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/onResponseStarted\"><code>onResponseStarted</code></a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/onSendHeaders\"><code>onSendHeaders</code></a></li></ol></li></ol></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/windows\">windows</a></li></ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n      <summary>Clés de manifeste</summary>\n        <ol>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json\">Introduction</a></li>\n        </ol>\n      <ol><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/author\">author</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/background\">background</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_action\">browser_action</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_specific_settings\">browser_specific_settings</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/chrome_settings_overrides\">chrome_settings_overrides</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/chrome_url_overrides\">chrome_url_overrides</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/commands\">commands</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_scripts\">content_scripts</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_security_policy\">content_security_policy</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/default_locale\">default_locale</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/description\">description</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/developer\">developer</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/devtools_page\">devtools_page</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/dictionaries\">dictionaries</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/externally_connectable\">externally_connectable</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/homepage_url\">homepage_url</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/icons\">icons</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/incognito\">incognito</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/manifest_version\">manifest_version</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/name\">name</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/offline_enabled\">offline_enabled</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/omnibox\">omnibox</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/optional_permissions\">optional_permissions</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/options_page\">options_page</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/options_ui\">options_ui</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/page_action\">page_action</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions\">permissions</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/protocol_handlers\">protocol_handlers</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/short_name\">short_name</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/sidebar_action\">sidebar_action</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/storage\">storage</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/theme\">theme</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/theme_experiment\">theme expérimentation</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/user_scripts\">user_scripts</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/version\">version</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/version_name\">version_name</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/web_accessible_resources\">web_accessible_resources</a></li></ol>\n      </details>\n    </li>\n     <li class=\"toggle\">\n      <details>\n        <summary>Extension Workshop</summary>\n        <ol>\n          <li><a href=\"https://extensionworkshop.com/documentation/develop/\">Develop</a></li>\n          <li><a href=\"https://extensionworkshop.com/documentation/publish/\">Publish</a></li>\n          <li><a href=\"https://extensionworkshop.com/documentation/manage/\">Manage</a></li>\n          <li><a href=\"https://extensionworkshop.com/documentation/enterprise/\">Enterprise</a></li>\n        </ol>\n      </details>\n    </li>\n    <li><a href=\"/fr/docs/Mozilla/Add-ons/Contact_us\"><strong>Nous contacter</strong></a></li>\n    <li class=\"toggle\">\n      <details>\n        <summary>Canaux de discussions</summary>\n        <ol>\n          <li><a href=\"https://blog.mozilla.org/addons\">Blog extensions</a></li>\n          <li><a href=\"https://discourse.mozilla.org/c/add-ons\">Forum extensions</a></li>\n          <li><a href=\"https://chat.mozilla.org/#/room/%23addons:mozilla.org\">Add-ons chat</a></li>\n        </ol>\n      </details>\n    </li>\n  </ol>\n","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>Mise en place quand le serveur envoie un code status 401 ou 407 : c'est-à-dire lorsque le serveur demande au client de fournir des informations d'authentification telles qu'un nom d'utilisateur et un mot de passe.</p>\n<p>L'auditeur peut répondre de l'une des quatre façons suivantes :</p>\n<p><strong>Ne rien faire</strong> : l'auditeur ne peut rien faire, il suffit d'observer la demande. Si cela se produit, cela n'aura aucun effet sur le traitement de la demande, et le navigateur demandera probablement simplement à l'utilisateur de se connecter.</p>\n<p><strong>Annuler la demande</strong> : l'auditeur peut annuler la demande. S'ils le font, l'authentification échouera et l'utilisateur ne sera pas invité à se connecter. Les prolongations peuvent annuler les demandes comme suit :</p>\n<ul>\n  <li>dans addListener, passez <code>\"blocking\"</code> dans le paramètre <code>extraInfoSpec</code></li>\n  <li>dans l'écouteur lui-même, retourne un objet avec une propriété <code>cancel</code> définie à <code>true</code></li>\n</ul>\n<p>\n  <strong>Fournir des informations d'identification de manière synchrone</strong> : si les informations d'identification sont disponibles de manière synchrone, l'extension peut les fournir de manière synchrone. Si l'extension fait cela, le navigateur tentera de se connecter avec les informations d'identification données.\n  L'auditeur peut fournir des informations d'identification de manière synchrone comme suit :\n</p>\n<ul>\n  <li>dans addListener, passez <code>\"blocking\"</code> dans le paramètre <code>extraInfoSpec</code></li>\n  <li>dans l'auditeur, retourner un objet avec une propriété <code>authCredentials</code> définie sur les informations d'identification à fournir</li>\n</ul>\n<p><strong>Fournir les informations d'identification de manière asynchrone</strong> : l'extension peut avoir besoin de récupérer les informations d'identification de manière asynchrone. Par exemple, l'extension peut avoir besoin d'extraire les informations d'identification du stockage ou de demander à l'utilisateur. Dans ce cas, l'auditeur peut fournir des informations d'identification de manière asynchrone comme suit :</p>\n<ul>\n  <li>dans addListener, passez <code>\"blocking\"</code> dans le paramère <code>extraInfoSpec</code></li>\n  <li>dans l'auditeur, retourner une <code>Promise</code> qui est résolue avec un objet contenant une propriété <code>authCredentials</code>, définie sur les credentials à fournir.</li>\n</ul>\n<p>Voir <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/onAuthRequired#examples\">Exemples</a>.</p>\n<p>Si vous utilisez le <code>\"blockage\"</code> vous devez avoir la <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions#api_permissions\">permission de l'API \"webRequestBlocking\"</a> dans votre manifest.json.</p>\n<p>Si votre poste fournit de mauvaises informations d'identification, l'auditeur sera rappelé. Pour cette raison, veillez à ne pas entrer dans une boucle infinie en fournissant à plusieurs reprises de mauvaises informations d'identification.</p>"}},{"type":"prose","value":{"id":"autorisation_de_proxy","title":"Autorisation de proxy","isH3":false,"content":"<p>En général, Firefox ne déclenche pas d'événements <code>webRequest</code> pour les requêtes système, telles que les mises à jour de navigateur ou d'extension, ou les requêtes des moteurs de recherche. Pour permettre à l'autorisation de proxy de fonctionner sans problème pour les requêtes système, à partir de la version 57 Firefox implémente une exception à cette règle.</p>\n<p>Si une extension a les permissions \"webRequest\", \"webRequestBlocking\", \"proxy\", et \"&lt;all_urls&gt;\", alors elle pourra utiliser <code>onAuthRequired</code> pour fournir des informations d'identification pour l'autorisation de proxy (mais pas pour l'autorisation web normale). L'auditeur ne sera pas en mesure d'annuler les demandes du système ou d'apporter d'autres modifications aux demandes du système.</p>"}},{"type":"prose","value":{"id":"syntaxe","title":"Syntaxe","isH3":false,"content":"<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>browser<span class=\"token punctuation\">.</span>webRequest<span class=\"token punctuation\">.</span>onAuthRequired<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span>\n  listener<span class=\"token punctuation\">,</span>                    <span class=\"token comment\">// function</span>\n  filter<span class=\"token punctuation\">,</span>                      <span class=\"token comment\">//  object</span>\n  extraInfoSpec                <span class=\"token comment\">//  optional array of strings</span>\n<span class=\"token punctuation\">)</span>\nbrowser<span class=\"token punctuation\">.</span>webRequest<span class=\"token punctuation\">.</span>onAuthRequired<span class=\"token punctuation\">.</span><span class=\"token function\">removeListener</span><span class=\"token punctuation\">(</span>listener<span class=\"token punctuation\">)</span>\nbrowser<span class=\"token punctuation\">.</span>webRequest<span class=\"token punctuation\">.</span>onAuthRequired<span class=\"token punctuation\">.</span><span class=\"token function\">hasListener</span><span class=\"token punctuation\">(</span>listener<span class=\"token punctuation\">)</span>\n</code></pre></div>\n<p>Les événements ont trois fonctions :</p>\n<dl>\n  <dt id=\"addlistenercallback_filter_extrainfospec\"><code>addListener(callback, filter, extraInfoSpec)</code></dt>\n  <dd>\n    <p>Ajoute un écouteur à cet événement.</p>\n  </dd>\n  <dt id=\"removelistenerlistener\"><code>removeListener(listener)</code></dt>\n  <dd>\n    <p>Arrêtez d'écouter cet événement. L'argument <code>listener</code> est l'écouteur à supprimer.</p>\n  </dd>\n  <dt id=\"haslistenerlistener\"><code>hasListener(listener)</code></dt>\n  <dd>\n    <p>Vérifiez si <code>écouteur</code> est enregistré à cet événement. Retourne <code>true</code> s'il est à l'écoute, sinon <code>false</code>.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"syntaxe_addlistener","title":"Syntaxe addListener","isH3":false,"content":""}},{"type":"prose","value":{"id":"paramètres","title":"Paramètres","isH3":true,"content":"<dl>\n  <dt id=\"callback\"><code>callback</code></dt>\n  <dd>\n    <p>Une fonction qui sera appelée lorsque cet événement se produira. La fonction sera passée les arguments suivants :</p>\n    <dl>\n      <dt id=\"details\"><code>details</code></dt>\n      <dd>\n        <p><a href=\"#details\"><code>object</code></a>. Détails sur la demande. Voir les <a href=\"#details\"><code>détails</code></a> ci-dessous.</p>\n      </dd>\n    </dl>\n    <p>Retourne : <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/BlockingResponse\"><code>webRequest.BlockingResponse</code></a> ou une <a href=\"/fr/docs/Web/JavaScript/Reference/Global_Objects/Promise\"><code>Promise</code></a>.</p>\n    <ul>\n      <li>Pour traiter la requête de manière synchrone, inclure<code>\"blocking\"</code> dans le paramètre <code>extraInfoSpec</code> et retourner un objet <code>BlockingResponse</code>, avec son <code>cancel</code> ou ses propriétés <code>authCredentials</code>.</li>\n      <li>Pour traiter la requête de manière asynchrone, inclure <code>\"blocking\"</code> dans le paramètre <code>extraInfoSpec</code> et retourner une <code>Promise</code> qui est résolue avec un objet <code>BlockingResponse</code>, avec son <code>cancel</code> ou ses propriétés <code>authCredentials</code>.</li>\n    </ul>\n  </dd>\n  <dt id=\"filter\"><code>filter</code></dt>\n  <dd>\n    <p><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/RequestFilter\"><code>webRequest.RequestFilter</code></a>. Un filtre qui restreint les événements qui seront envoyés à cet auditeur.</p>\n  </dd>\n  <dt id=\"extrainfospec\"><code>extraInfoSpec</code><span class=\"badge inline optional\">Facultatif</span></dt>\n  <dd>\n    <p><code>array</code> de <code>string</code>. Options supplémentaires pour l'événement. Vous pouvez passer n'importe laquelle des valeurs suivantes :</p>\n    <ul>\n      <li><code>\"blocking\"</code>: faire le blocage de la demande, afin que vous puissiez annuler la demande ou fournir des informations d'authentification.</li>\n      <li><code>\"``responseHeaders``\"</code>: inclure <code>responseHeaders</code> dans l'objet <code>details</code> transmis à l'auditeur</li>\n    </ul>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"objets_supplémentaires","title":"Objets supplémentaires","isH3":false,"content":""}},{"type":"prose","value":{"id":"détails","title":"Détails","isH3":true,"content":"<dl>\n  <dt id=\"challenger\"><code>challenger</code></dt>\n  <dd>\n    <p><code>object</code>. Le serveur demandant l'authentification. C'est un objet avec les propriétés suivantes :</p>\n    <dl>\n      <dt id=\"host\"><code>host</code></dt>\n      <dd>\n        <p>\n          <code>string</code>. Le <a href=\"https://en.wikipedia.org/wiki/Hostname#Internet_hostnames\" class=\"external\" rel=\" noopener\">nom d'hôte</a> du serveur.\n          <strong>Warning</strong>: Contrairement à chrome, Firefox retournera l'hôte demandé au lieu du proxy demandant l'authentification, même si <code>isProxy</code> est <code>true</code>.\n        </p>\n      </dd>\n      <dt id=\"port\"><code>port</code></dt>\n      <dd>\n        <p><code>integer</code>. Le numéro de port du serveur.</p>\n      </dd>\n    </dl>\n  </dd>\n  <dt id=\"frameid\"><code>frameId</code></dt>\n  <dd>\n    <p><code>integer</code>. Zéro si la requête se produit dans le cadre principal ; une valeur positive est l'ID d'une sous-trame dans laquelle la requête se produit. Si le document d'un (sous-)cadre est chargé (<code>type</code> is <code>main_frame</code> or <code>sub_frame</code>), <code>frameId</code> indique l'ID de ce cadre et non l'ID du cadre extérieur. Les ID de trame sont uniques dans un onglet.</p>\n  </dd>\n  <dt id=\"isproxy\"><code>isProxy</code></dt>\n  <dd>\n    <p><code>boolean</code>. <code>true</code> pour Proxy-Authenticate, <code>false</code> pour WWW-Authenticate. <strong>Note</strong>: <code>webRequest.onAuthRequired</code> n'est appelé que pour les serveurs proxy HTTP et HTTPS/SSL nécessitant une authentification, et non pour les serveurs proxy SOCKS nécessitant une authentification.</p>\n  </dd>\n  <dt id=\"method\"><code>method</code></dt>\n  <dd>\n    <p><code>string</code>. Méthode HTTP standard : par exemple, \"GET\" ou \"POST\".</p>\n  </dd>\n  <dt id=\"parentframeid\"><code>parentFrameId</code></dt>\n  <dd>\n    <p><code>integer</code>. de la trame qui contient la trame qui a envoyé la requête. Réglé à -1 s'il n'existe pas de l'iframe parent.</p>\n  </dd>\n  <dt id=\"proxyinfo\"><code>proxyInfo</code></dt>\n  <dd>\n    <p><code>object</code>. Cette propriété n'est présente que si la demande est proxied. Il contient les propriétés suivantes :</p>\n    <dl>\n      <dt id=\"host_2\"><code>host</code></dt>\n      <dd>\n        <p><code>string</code>. Le nom d'hôte du serveur proxy.</p>\n      </dd>\n      <dt id=\"port_2\"><code>port</code></dt>\n      <dd>\n        <p><code>integer</code>. Le numéro de port du serveur proxy.</p>\n      </dd>\n      <dt id=\"type\"><code>type</code></dt>\n      <dd>\n        <p><code>string</code>. Le type de serveur proxy. L'un des :</p>\n        <ul>\n          <li>\"http\": proxy HTTP (ou SSL CONNECT pour HTTPS)</li>\n          <li>\"https\": proxy HTTP sur connexion TLS vers proxy</li>\n          <li>\"socks\": SOCKS v5 proxy</li>\n          <li>\"socks4\": SOCKS v4 proxy</li>\n          <li>\"direct\": pas de proxy</li>\n          <li>\"unknown\": proxy inconnu</li>\n        </ul>\n      </dd>\n      <dt id=\"username\"><code>username</code></dt>\n      <dd>\n        <p><code>string</code>. Nom d'utilisateur pour le service proxy.</p>\n      </dd>\n      <dt id=\"proxydns\"><code>proxyDNS</code></dt>\n      <dd>\n        <p><code>boolean</code>. Vrai si le proxy exécutera une résolution de nom de domaine basée sur le nom d'hôte fourni, ce qui signifie que le client ne doit pas faire sa propre recherche DNS.</p>\n      </dd>\n      <dt id=\"failovertimeout\"><code>failoverTimeout</code></dt>\n      <dd>\n        <p><code>integer</code>. Délai d'attente de basculement en secondes. Si la connexion ne parvient pas à connecter le serveur proxy après ce nombre de secondes, le serveur proxy suivant dans le tableau renvoyé par <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/proxy#findproxyforurl()_return_value\">FindProxyForURL()</a> sera utilisé.</p>\n      </dd>\n    </dl>\n  </dd>\n  <dt id=\"realm\"><code>realm</code><span class=\"badge inline optional\">Facultatif</span></dt>\n  <dd>\n    <p><code>string</code>. La zone d'authentification <a href=\"https://tools.ietf.org/html/rfc1945#section-11\" class=\"external\" rel=\" noopener\">realm</a> fournie par le serveur, s'il y en a un.</p>\n  </dd>\n  <dt id=\"requestid\"><code>requestId</code></dt>\n  <dd>\n    <p><code>string</code>. L'ID de la demande. Les ID de requête sont uniques au sein d'une session de navigateur, de sorte que vous pouvez les utiliser pour relier différents événements associés à la même requête.</p>\n  </dd>\n  <dt id=\"responseheaders\"><code>responseHeaders</code><span class=\"badge inline optional\">Facultatif</span></dt>\n  <dd>\n    <p><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/HttpHeaders\"><code>webRequest.HttpHeaders</code></a>. Les en-têtes de réponse HTTP qui ont été reçus avec cette réponse.</p>\n  </dd>\n  <dt id=\"scheme\"><code>scheme</code></dt>\n  <dd>\n    <p><code>string</code>. Le schéma d'authentification : <code>\"basic\"</code> ou <code>\"digest</code>\".</p>\n  </dd>\n  <dt id=\"statuscode\"><code>statusCode</code></dt>\n  <dd>\n    <p><code>integer</code>. Code d'état HTTP standard renvoyé par le serveur.</p>\n  </dd>\n  <dt id=\"statusline\"><code>statusLine</code></dt>\n  <dd>\n    <p><code>string</code>. Status d'état HTTP de la réponse ou la chaîne 'HTTP/0.9 200 OK' pour les réponses HTTP/0.9 (c'est-à-dire les réponses qui n'ont pas de ligne d'état) ou une chaîne vide s'il n'y a pas d'en-têtes</p>\n  </dd>\n  <dt id=\"tabid\"><code>tabId</code></dt>\n  <dd>\n    <p><code>integer</code>. ID de l'onglet dans lequel la demande a lieu. Définir à -1 si la requête n'est pas liée à un onglet.</p>\n  </dd>\n  <dt id=\"timestamp\"><code>timeStamp</code></dt>\n  <dd>\n    <p><code>number</code>. L'heure à laquelle cet événement s'est déclenché, en <a href=\"https://en.wikipedia.org/wiki/Unix_time\" class=\"external\" rel=\" noopener\">millisecondes depuis l'époque</a>.</p>\n  </dd>\n  <dt id=\"type_2\"><code>type</code></dt>\n  <dd>\n    <p><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/ResourceType\"><code>webRequest.ResourceType</code></a>. Le type de ressource demandée : par exemple, \"image\", \"script\", \"stylesheet\".</p>\n  </dd>\n  <dt id=\"url\"><code>url</code></dt>\n  <dd>\n    <p><code>string</code>. Cible de la demande.</p>\n  </dd>\n</dl>"}},{"type":"browser_compatibility","value":{"title":"Compatibilité du navigateur","id":"compatibilité_du_navigateur","isH3":false,"query":"webextensions.api.webRequest.onAuthRequired","dataURL":"/fr/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/onAuthRequired/bcd.json"}},{"type":"prose","value":{"id":"exemples","title":"Exemples","isH3":false,"content":"<p>Ce code n'observe que les demandes d'authentification pour l'URL cible :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> target <span class=\"token operator\">=</span> <span class=\"token string\">\"https://intranet.company.com/\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">observe</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">requestDetails</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"observing: \"</span> <span class=\"token operator\">+</span> requestDetails<span class=\"token punctuation\">.</span>requestId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nbrowser<span class=\"token punctuation\">.</span>webRequest<span class=\"token punctuation\">.</span>onAuthRequired<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span>\n  observe<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">urls</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>target<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Ce code annule les demandes d'authentification pour l'URL cible :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> target <span class=\"token operator\">=</span> <span class=\"token string\">\"https://intranet.company.com/\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">cancel</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">requestDetails</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"canceling: \"</span> <span class=\"token operator\">+</span> requestDetails<span class=\"token punctuation\">.</span>requestId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">cancel</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nbrowser<span class=\"token punctuation\">.</span>webRequest<span class=\"token punctuation\">.</span>onAuthRequired<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span>\n  cancel<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">urls</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>target<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token string\">\"blocking\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Ce code fournit les informations d'identification de manière synchrone. Il doit garder une trace des demandes en suspens, pour s'assurer qu'il n'essaie pas à plusieurs reprises de soumettre de mauvaises références :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> target <span class=\"token operator\">=</span> <span class=\"token string\">\"https://intranet.company.com/\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> myCredentials <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">username</span><span class=\"token operator\">:</span> <span class=\"token string\">\"me@company.com\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">password</span><span class=\"token operator\">:</span> <span class=\"token string\">\"zDR$ERHGDFy\"</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> pendingRequests <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// A request has completed.</span>\n<span class=\"token comment\">// We can stop worrying about it.</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">completed</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">requestDetails</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"completed: \"</span> <span class=\"token operator\">+</span> requestDetails<span class=\"token punctuation\">.</span>requestId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> index <span class=\"token operator\">=</span> pendingRequests<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>requestDetails<span class=\"token punctuation\">.</span>requestId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>index <span class=\"token operator\">&gt;</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    pendingRequests<span class=\"token punctuation\">.</span><span class=\"token function\">splice</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">provideCredentialsSync</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">requestDetails</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// If we have seen this request before, then</span>\n  <span class=\"token comment\">// assume our credentials were bad, and give up.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>pendingRequests<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>requestDetails<span class=\"token punctuation\">.</span>requestId<span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"bad credentials for: \"</span> <span class=\"token operator\">+</span> requestDetails<span class=\"token punctuation\">.</span>requestId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">cancel</span><span class=\"token operator\">:</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  pendingRequests<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>requestDetails<span class=\"token punctuation\">.</span>requestId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"providing credentials for: \"</span> <span class=\"token operator\">+</span> requestDetails<span class=\"token punctuation\">.</span>requestId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">authCredentials</span><span class=\"token operator\">:</span> myCredentials<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nbrowser<span class=\"token punctuation\">.</span>webRequest<span class=\"token punctuation\">.</span>onAuthRequired<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span>\n    provideCredentialsSync<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">urls</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>target<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string\">\"blocking\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nbrowser<span class=\"token punctuation\">.</span>webRequest<span class=\"token punctuation\">.</span>onCompleted<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span>\n  completed<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">urls</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>target<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nbrowser<span class=\"token punctuation\">.</span>webRequest<span class=\"token punctuation\">.</span>onErrorOccurred<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span>\n  completed<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">urls</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>target<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Ce code fournit les informations d'identification de manière asynchrone, en les récupérant à partir du stockage. Il doit également assurer le suivi des demandes en suspens, afin de s'assurer qu'il n'essaie pas à plusieurs reprises de soumettre de mauvaises références :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> target <span class=\"token operator\">=</span> <span class=\"token string\">\"https://httpbin.org/basic-auth/*\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> pendingRequests <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/*\nA request has completed. We can stop worrying about it.\n*/</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">completed</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">requestDetails</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"completed: \"</span> <span class=\"token operator\">+</span> requestDetails<span class=\"token punctuation\">.</span>requestId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> index <span class=\"token operator\">=</span> pendingRequests<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>requestDetails<span class=\"token punctuation\">.</span>requestId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>index <span class=\"token operator\">&gt;</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    pendingRequests<span class=\"token punctuation\">.</span><span class=\"token function\">splice</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">provideCredentialsAsync</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">requestDetails</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// If we have seen this request before,</span>\n  <span class=\"token comment\">// then assume our credentials were bad,</span>\n  <span class=\"token comment\">// and give up.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>pendingRequests<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>requestDetails<span class=\"token punctuation\">.</span>requestId<span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"bad credentials for: \"</span> <span class=\"token operator\">+</span> requestDetails<span class=\"token punctuation\">.</span>requestId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">cancel</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    pendingRequests<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>requestDetails<span class=\"token punctuation\">.</span>requestId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"providing credentials for: \"</span> <span class=\"token operator\">+</span> requestDetails<span class=\"token punctuation\">.</span>requestId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// we can return a promise that will be resolved</span>\n    <span class=\"token comment\">// with the stored credentials</span>\n    <span class=\"token keyword\">return</span> browser<span class=\"token punctuation\">.</span>storage<span class=\"token punctuation\">.</span>local<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nbrowser<span class=\"token punctuation\">.</span>webRequest<span class=\"token punctuation\">.</span>onAuthRequired<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span>\n    provideCredentialsAsync<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">urls</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>target<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string\">\"blocking\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nbrowser<span class=\"token punctuation\">.</span>webRequest<span class=\"token punctuation\">.</span>onCompleted<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span>\n  completed<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">urls</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>target<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nbrowser<span class=\"token punctuation\">.</span>webRequest<span class=\"token punctuation\">.</span>onErrorOccurred<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span>\n  completed<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">urls</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>target<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"example_extensions","title":"Example extensions","isH3":true,"content":"<ul><li><a href=\"https://github.com/mdn/webextensions-examples/tree/master/stored-credentials\" class=\"external\" rel=\" noopener\">stored-credentials</a></li></ul>\n<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>Note :</strong></p>\n  <p>Cette API est basée sur l'API Chromium <a href=\"https://developer.chrome.com/extensions/webRequest\" class=\"external\" rel=\" noopener\"><code>chrome.webRequest</code></a>. Cette documentation est dérivée de <a href=\"https://chromium.googlesource.com/chromium/src/+/master/extensions/common/api/web_request.json\" class=\"external\" rel=\" noopener\"><code>web_request.json</code></a> dans le code Chromium.</p>\n  <p>Les données de compatibilité relatives à Microsoft Edge sont fournies par Microsoft Corporation et incluses ici sous la licence Creative Commons Attribution 3.0 pour les États-Unis.</p>\n</div><!--\n// Copyright 2015 The Chromium Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n//    * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n//    * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n//    * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n-->"}}],"toc":[{"text":"Autorisation de proxy","id":"autorisation_de_proxy"},{"text":"Syntaxe","id":"syntaxe"},{"text":"Syntaxe addListener","id":"syntaxe_addlistener"},{"text":"Objets supplémentaires","id":"objets_supplémentaires"},{"text":"Compatibilité du navigateur","id":"compatibilité_du_navigateur"},{"text":"Exemples","id":"exemples"}],"summary":"Mise en place quand le serveur envoie un code status 401 ou 407 : c'est-à-dire lorsque le serveur demande au client de fournir des informations d'authentification telles qu'un nom d'utilisateur et un mot de passe.","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"webRequest.onAuthRequired","locale":"en-US","native":"English (US)"}],"source":{"folder":"fr/mozilla/add-ons/webextensions/api/webrequest/onauthrequired","github_url":"https://github.com/mdn/translated-content/blob/main/files/fr/mozilla/add-ons/webextensions/api/webrequest/onauthrequired/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/fr/docs/Mozilla","title":"Mozilla"},{"uri":"/fr/docs/Mozilla/Add-ons","title":"Modules"},{"uri":"/fr/docs/Mozilla/Add-ons/WebExtensions","title":"WebExtensions"},{"uri":"/fr/docs/Mozilla/Add-ons/WebExtensions/API","title":"Les APIs JavaScript"},{"uri":"/fr/docs/Mozilla/Add-ons/WebExtensions/API/webRequest","title":"webRequest"},{"uri":"/fr/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/onAuthRequired","title":"webRequest.onAuthRequired"}],"pageTitle":"webRequest.onAuthRequired - Mozilla | MDN","noIndexing":false}}