{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"Travailler avec l'API Tabs","mdn_url":"/fr/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API","locale":"fr","native":"Français","sidebarHTML":"\n  <ol>\n    <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions\"><strong>WebExtensions</strong></a></li>\n    <li class=\"toggle\">\n      <details>\n        <summary>Démarrage</summary>\n        <ol>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/What_are_WebExtensions\">Que sont les WebExtensions ?</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Your_first_WebExtension\">Votre première WebExtension</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Your_second_WebExtension\">Votre deuxième WebExtension</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension\">Anatomie d'une WebExtension</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Examples\">Exemples de WebExtensions</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/What_next_\">Que faire ensuite ?</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary>Concepts</summary>\n        <ol>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Using_the_JavaScript_APIs\">Utilisation des API JavaScript</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Content_scripts\">Scripts de contenu</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Match_patterns\">Motifs de correspondance (Match patterns)</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Working_with_files\">Travailler avec les fichiers</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Internationalization\">Internationalisation</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Content_Security_Policy\">Politique de sécurité du contenu</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Native_messaging\">Message natifs</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Differences_between_API_implementations\">Differences between API implementations</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Chrome_incompatibilities\">Incompatibilités avec Chrome</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary>Interface Utilisateur</summary>\n        <ol>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface\">Introduction</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Browser_action\">Bouton de la barre d'outils</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Page_actions\">Bouton de la barre d'adresse</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Sidebars\">Barres latérales</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Context_menu_items\">Éléments du menu contextuel</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Options_pages\">Page d'options</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Extension_pages\">Pages pour l'extension</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Notifications\">Notifications</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/Omnibox\">Suggestions de la barre d'adresse</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/user_interface/devtools_panels\">Panneaux d'outils de développement</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary>Mode d'emploi</summary>\n        <ol>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Intercept_HTTP_requests\">Intercepter les requêtes HTTP</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Modify_a_web_page\">Modifier une page web</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Safely_inserting_external_content_into_a_page\">Insérer un contenu externe</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Sharing_objects_with_page_scripts\">Share objects with page scripts</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Add_a_button_to_the_toolbar\">Ajouter un bouton à la barre d'outils</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Implement_a_settings_page\">Mettre en place une page de paramètres</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API\">Travailler avec l'API Tabs</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Bookmarks_API\">Travailler avec l'API Bookmarks</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Cookies_API\">Travailler avec l'API Cookies</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Work_with_contextual_identities\">Travailler avec des identités contextuelles</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Interact_with_the_clipboard\">Interagir avec le presse-papier</a></li>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Build_a_cross_browser_extension\">Build a cross-browser extension</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Firefox_differentiators\">Firefox differentiators</a></summary>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary>Les API JavaScript</summary>\n        <ol><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Browser_support_for_JavaScript_APIs\">Browser support for JavaScript APIs</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/alarms\">alarms</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/bookmarks\">bookmarks</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/browserAction\">browserAction</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/browserSettings\">browserSettings</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/browsingData\">browsingData</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/captivePortal\">captivePortal</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/clipboard\">clipboard</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/commands\">commands</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/contentScripts\">contentScripts</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/contextualIdentities\">contextualIdentities</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/cookies\">cookies</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/devtools\">devtools</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/dns\">dns</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/downloads\">downloads</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/events\">events</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/extension\">extension</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/extensionTypes\">extensionTypes</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/find\">find</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/history\">history</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/i18n\">i18n</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/identity\">identity</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/idle\">idle</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/management\">management</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/menus\">menus</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/notifications\">notifications</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/omnibox\">omnibox</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/pageAction\">pageAction</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/permissions\">permissions</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/pkcs11\">pkcs11</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/privacy\">privacy</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/proxy\">proxy</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/runtime\">runtime</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/search\">search</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/sessions\">sessions</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/sidebarAction\">sidebarAction</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/storage\">storage</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs\">tabs</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/theme\">theme</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/topSites\">topSites</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/types\">types</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/userScripts\">userScripts</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/webNavigation\">webNavigation</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/webRequest\">webRequest</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/windows\">windows</a></li></ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n      <summary>Clés de manifeste</summary>\n        <ol>\n          <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json\">Introduction</a></li>\n        </ol>\n      <ol><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/author\">author</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/background\">background</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_action\">browser_action</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_specific_settings\">browser_specific_settings</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/chrome_settings_overrides\">chrome_settings_overrides</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/chrome_url_overrides\">chrome_url_overrides</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/commands\">commands</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_scripts\">content_scripts</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_security_policy\">content_security_policy</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/default_locale\">default_locale</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/description\">description</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/developer\">developer</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/devtools_page\">devtools_page</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/dictionaries\">dictionaries</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/externally_connectable\">externally_connectable</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/homepage_url\">homepage_url</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/icons\">icons</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/incognito\">incognito</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/manifest_version\">manifest_version</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/name\">name</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/offline_enabled\">offline_enabled</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/omnibox\">omnibox</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/optional_permissions\">optional_permissions</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/options_page\">options_page</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/options_ui\">options_ui</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/page_action\">page_action</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions\">permissions</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/protocol_handlers\">protocol_handlers</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/short_name\">short_name</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/sidebar_action\">sidebar_action</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/storage\">storage</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/theme\">theme</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/theme_experiment\">theme expérimentation</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/user_scripts\">user_scripts</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/version\">version</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/version_name\">version_name</a></li><li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/web_accessible_resources\">web_accessible_resources</a></li></ol>\n      </details>\n    </li>\n     <li class=\"toggle\">\n      <details>\n        <summary>Extension Workshop</summary>\n        <ol>\n          <li><a href=\"https://extensionworkshop.com/documentation/develop/\">Develop</a></li>\n          <li><a href=\"https://extensionworkshop.com/documentation/publish/\">Publish</a></li>\n          <li><a href=\"https://extensionworkshop.com/documentation/manage/\">Manage</a></li>\n          <li><a href=\"https://extensionworkshop.com/documentation/enterprise/\">Enterprise</a></li>\n        </ol>\n      </details>\n    </li>\n    <li><a href=\"/fr/docs/Mozilla/Add-ons/Contact_us\"><strong>Nous contacter</strong></a></li>\n    <li class=\"toggle\">\n      <details>\n        <summary>Canaux de discussions</summary>\n        <ol>\n          <li><a href=\"https://blog.mozilla.org/addons\">Blog extensions</a></li>\n          <li><a href=\"https://discourse.mozilla.org/c/add-ons\">Forum extensions</a></li>\n          <li><a href=\"https://chat.mozilla.org/#/room/%23addons:mozilla.org\">Add-ons chat</a></li>\n        </ol>\n      </details>\n    </li>\n  </ol>\n","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>Les onglets permettent à un utilisateur d'ouvrir plusieurs pages Web dans la fenêtre de son navigateur, puis de basculer entre ces pages Web. Grâce à l'API Tabs, vous pouvez utiliser et manipuler ces onglets pour créer des utilitaires qui offrent aux utilisateurs de nouvelles façons de travailler avec des onglets ou de fournir les fonctionnalités de votre extension.</p>\n<p>Dans cet article, nous allons regarder :</p>\n<ul>\n  <li>Permissions nécessaires pour utiliser l'API Tabs.</li>\n  <li>En savoir plus sur les onglets et leurs propriétés en utilisant <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/query\"><code>tabs.query</code></a>.</li>\n  <li>Création, duplication, déplacement, mise à jour, rechargement et suppression des onglets.</li>\n  <li>Manipuler le niveau de zoom d'un onglet.</li>\n  <li>Manipuler le CSS d'un onglet.</li>\n</ul>\n<p>Nous concluons ensuite en examinant d'autres fonctionnalités diverses offertes par l'API.</p>\n<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>Note :</strong> Certaines fonctionnalités de l'API d'onglet sont couvert ailleurs. Voici les méthodes que vous pouvez utiliser pour manipuler le contenu de l'onglet avec des scripts (<a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/connect\"><code>tabs.connect</code></a>, <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/sendMessage\"><code>tabs.sendMessage</code></a>, et <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/executeScript\"><code>tabs.executeScript</code></a>). Si vous voulez plus d'informations sur ces méthodes, reportez-vous à l'article <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Content_scripts\">scripts de contenu</a> et le guide pratique <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Modify_a_web_page\">modifier une page web</a>.</p>\n</div>"}},{"type":"prose","value":{"id":"permissions_et_lapi_tabs","title":"Permissions et l'API Tabs","isH3":false,"content":"<p>Pour la majorité des fonctions de l'API Tabs, vous n'avez besoin d'aucune autorisation. Cependant, il y a certaines exceptions :</p>\n<ul>\n  <li>permission <code>\"tabs</code>\" est nécessaire pour accéder aux propriétés de <code>Tab.url</code>, <code>Tab.title</code>, et <code>Tab.favIconUrl</code> de l'objet Tab. Dans Firefox, vous avez également besoin de <code>\"tabs\"</code> pour effectuer une <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/query\">requête</a> par URL.</li>\n  <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions#host_permissions\">persmission de l'hote</a> est nécessaire pour <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/executeScript\"><code>tabs.executeScript</code></a> ou <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/insertCSS\"><code>tabs.insertCSS</code></a>.</li>\n</ul>\n<p>Vous pouvez demander la permission <code>\"tabs\"</code> dans le fichier manifest.json de votre extension :</p>\n<div class=\"code-example\"><pre class=\"brush: json notranslate\"><code><span class=\"token property\">\"permissions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token string\">\"&lt;all_urls&gt;\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">\"tabs\"</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n</code></pre></div>\n<p>Cette requête vous permet d'utiliser toutes les fonctionnalités de l'API Tabs sur tous les sites Web que vos utilisateurs visitent. Il existe également une autre méthode pour demander la permission d'utiliser <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/executeScript\"><code>tabs.executeScript</code></a> ou <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/insertCSS\"><code>tabs.insertCSS</code></a> où vous n'avez pas besoin de la permission de l'hôte, sous la forme <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions#activetab_permission\"><code>\"activeTab\"</code></a>. Cette permission fournit les mêmes droits que les <code>\"onglets\"</code> avec <code>&lt;all_urls&gt;</code>, mais avec deux restrictions:</p>\n<ul>\n  <li>l'utilisateur doit interagir avec l'extension via son navigateur ou l'action de la page, le menu contextuel ou la touche de raccourci.</li>\n  <li>il accorde uniquement la permission dans l'onglet actif..</li>\n</ul>\n<p>L'avantage de cette approche est que l'utilisateur ne recevra pas d'avertissement d'autorisation indiquant que votre extension peut “Accéder à vos données pour tous les sites Web”. En effet, la permission <code>&lt;all_urls&gt;</code> permet à une extension d'exécuter des scripts dans n'importe quel onglet, à tout moment, alors que <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions#activetab_permission\"><code>\"activeTab\"</code></a> se limite à autoriser l'extension à effectuer une action demandée par l'utilisateur dans l'onglet en cours.</p>"}},{"type":"prose","value":{"id":"en_savoir_plus_sur_les_onglets_et_leurs_propriétés","title":"En savoir plus sur les onglets et leurs propriétés","isH3":false,"content":"<p>Il y aura des occasions où vous voulez obtenir une liste de tous les onglets dans toutes les fenêtres du navigateur. D'autres fois, vous pourriez vouloir trouver un sous-ensemble d'onglets qui correspondent à certains critères spécifiques, tels que ceux ouverts à partir d'un onglet spécifique ou l'affichage des pages d'un domaine particulier. Et une fois que vous avez votre liste d'onglets, vous voudrez probablement en savoir plus sur leurs propriétés.</p>\n<p>C'est ici qu'intervient <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/query\"><code>tabs.query</code></a>. Utilisé seul pour obtenir tous les onglets ou prendre l'objet <code>queryInfo</code> — pour spécifier des critères de requête tels que l'activation de l'onglet, dans la fenêtre en cours ou plus de 17 critères — <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/query\"><code>tabs.query</code></a> renvoie un tableau d'objets <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/Tab\"><code>tabs.Tab</code></a> objects contenant des informations sur les onglets.</p>\n<p>Lorsque vous souhaitez uniquement obtenir des informations sur l'onglet en cours, vous pouvez obtenir un objet <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/Tab\"><code>tabs.Tab</code></a> pour cet onglet à l'aide de <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/getCurrent\"><code>tabs.getCurrent</code></a>. Si vous avez un ID d'onglet, vous pouvez obtenir son objet <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/Tab\"><code>tabs.Tab</code></a> en utilisant <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/get\"><code>tabs.get</code></a>.</p>"}},{"type":"prose","value":{"id":"par_exemple","title":"Par exemple","isH3":true,"content":"<p>Pour voir comment <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/query\"><code>tabs.query</code></a> et <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/Tab\"><code>tabs.Tab</code></a> sont utilisés, voyons comment l'exemple <a href=\"https://github.com/mdn/webextensions-examples/tree/master/tabs-tabs-tabs\" class=\"external\" rel=\" noopener\">tabs-tabs-tabs</a> ajoute la liste de “passer aux onglets” à son popup bouton de barre d'outils.</p>\n<p>\n  <img src=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API/switch_to_tab.png\" alt=\"\" width=\"369\" height=\"645\" loading=\"lazy\">\n</p>"}},{"type":"prose","value":{"id":"manifest.json","title":"manifest.json","isH3":true,"content":"<p>Voici le <a href=\"https://github.com/mdn/webextensions-examples/blob/master/tabs-tabs-tabs/manifest.json\" class=\"external\" rel=\" noopener\">manifest.json</a>:</p>\n<div class=\"code-example\"><pre class=\"brush: json notranslate\"><code><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"browser_action\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"browser_style\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"default_title\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Tabs, tabs, tabs\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"default_popup\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"tabs.html\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"A list of methods you can perform on a tab.\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"homepage_url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://github.com/mdn/webextensions-examples/tree/master/tabs-tabs-tabs\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"manifest_version\"</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Tabs, tabs, tabs\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"permissions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"tabs\"</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.0\"</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<div class=\"notecard note\" id=\"sect2\">\n  <p><strong>Note :</strong></p>\n  <ul>\n    <li><strong>tabs.html est défini comme <code>default_popup</code> dans <code>browser_action</code></strong>. C'est affiché chaque fois que l'utilisateur clique sur l'icône de la barre d'outils de l'extension.</li>\n    <li><strong>Les permissions incluent des onglets.</strong> Ceci est nécessaire pour prendre en charge la fonction de liste d'onglets, car l'extension lit le titre des onglets à afficher dans la fenêtre contextuelle.</li>\n  </ul>\n</div>"}},{"type":"prose","value":{"id":"tabs.html","title":"tabs.html","isH3":true,"content":"<p>tabs.html définit le contenu du popup de l'extension :</p>\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">&gt;</span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">&gt;</span></span>\n\n <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>utf-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stylesheet<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tabs.css<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/&gt;</span></span>\n <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">&gt;</span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">&gt;</span></span>\n\n <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>panel<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>panel-section panel-section-header<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n     <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text-section-header<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Tabs-tabs-tabs<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tabs-move-beginning<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Move active tab to the beginning of the window<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">&gt;</span></span>\n\n\n…\n\nDefine the other menu items\n…\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>switch-tabs<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n\n     <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span>Switch to tab<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span>\n\n     <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tabs-list<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n\n <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tabs.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">&gt;</span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<p>Ici, vous pouvez voir que, après la création des éléments de menu, un div vide avec la liste des onglets ID est configuré pour contenir la liste des onglets. Ensuite, tabs.js est appelée.</p>\n<p>Voici un résumé de ce qui précède :</p>\n<ol>\n  <li>Les éléments de menu sont déclarés.</li>\n  <li>Une <code>div</code> vide avec <code>tabs-list</code> est déclaré comme contenant la liste des onglets.</li>\n  <li>tabs.js est appelé.</li>\n</ol>"}},{"type":"prose","value":{"id":"tabs.js","title":"tabs.js","isH3":true,"content":"<p>Dans <a href=\"https://github.com/mdn/webextensions-examples/blob/master/tabs-tabs-tabs/tabs.js\" class=\"external\" rel=\" noopener\">tabs.js</a> nous pouvons voir comment la liste des onglets est construite et ajoutée à la popup.</p>\n<p>Tout d'abord, un gestionnaire d'événements est ajouté pour exécuter <code>listTabs()</code> quand tabs.html est chargé :</p>\n<h4 id=\"création_de_la_fenêtre_contextuelle\">Création de la fenêtre contextuelle</h4>\n<p>Tout d'abord, un gestionnaire d'événements est ajouté pour exécuter <code>listTabs()</code> quand tabs.html est chargé :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>document<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"DOMContentLoaded\"</span><span class=\"token punctuation\">,</span> listTabs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>La première chose que fait <code>listTabs()</code> est d'appeler <code>getCurrentWindowTabs()</code>, où <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/query\"><code>tabs.query</code></a> est utilisé pour obtenur un objet <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/Tab\"><code>tabs.Tab</code></a> pour le onglets dans la fenêtre courante :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">getCurrentWindowTabs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> browser<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">currentWindow</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Maintenant, <code>listTabs()</code> est prêt à créer le contenu de la popup.</p>\n<p>Pour commencer :</p>\n<ol>\n  <li>Récupérer les <code>tabs-list</code> <code>div</code>.</li>\n  <li>Créer un fragment de document (dans lequel la liste sera construite).</li>\n  <li>Mettre les compteurs.</li>\n  <li>Effacer le contenu de <code>tabs-list</code> <code>div</code>.</li>\n</ol>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">listTabs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n <span class=\"token function\">getCurrentWindowTabs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tabs</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> tabsList <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'tabs-list'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> currentTabs <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createDocumentFragment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> limit <span class=\"token operator\">=</span> <span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> counter <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n    tabsList<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Ensuite, nous allons créer les liens pour chaque onglet :</p>\n<ol>\n  <li>Boucle les 5 premiers éléments de l'objet <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/Tab\"><code>tabs.Tab</code></a>.</li>\n  <li>Pour chaque poste, ajoutez un hyperlien vers le fragment de document.\n    <ul>\n      <li>L'étiquette du lien, c'est-à-dire son texte, est définie à l'aide du titre de l'onglet (ou de l'ID, s'il n'a pas de titre).</li>\n      <li>L'adresse du lien est définie à l'aide de l'ID de l'onglet.</li>\n    </ul>\n  </li>\n</ol>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> tab <span class=\"token keyword\">of</span> tabs<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>tab<span class=\"token punctuation\">.</span>active <span class=\"token operator\">&amp;&amp;</span> counter <span class=\"token operator\">&lt;=</span> limit<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> tabLink <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        tabLink<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> tab<span class=\"token punctuation\">.</span>title <span class=\"token operator\">||</span> tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">;</span>\n\n       tabLink<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'href'</span><span class=\"token punctuation\">,</span> tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        tabLink<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'switch-tabs'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        currentTabs<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>tabLink<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n     <span class=\"token punctuation\">}</span>\n\n     counter <span class=\"token operator\">+=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Enfin, le fragment du document est écrit dans la div <code>tabs-list</code> :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>    tabsList<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>currentTabs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<h4 id=\"travailler_avec_longlet_actif\">Travailler avec l'onglet actif</h4>\n<p>Un autre exemple connexe est l'option d'information “Alert active tab”qui décharge toutes les propriétés de l'objet <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/Tab\"><code>tabs.Tab</code></a> de l'onglet actif dans une alerte :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> <span class=\"token string\">\"tabs-alertinfo\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token function\">callOnActiveTab</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tab</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token keyword\">let</span> props <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n     <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> item <span class=\"token keyword\">in</span> tab<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       props <span class=\"token operator\">+=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span> item <span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> = </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span> tab<span class=\"token punctuation\">[</span>item<span class=\"token punctuation\">]</span> <span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> \\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n     <span class=\"token punctuation\">}</span>\n     <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Où <code>callOnActiveTab()</code> ftrouve l'objet de tabulation active en faisant une boucle sur les objets <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/Tab\"><code>tabs.Tab</code></a> qui recherchent l'objet avec l'ensemble actif :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>document<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n <span class=\"token keyword\">function</span> <span class=\"token function\">callOnActiveTab</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">callback</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token function\">getCurrentWindowTabs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tabs</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> tab <span class=\"token keyword\">of</span> tabs<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">.</span>active<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n         <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">,</span> tabs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       <span class=\"token punctuation\">}</span>\n     <span class=\"token punctuation\">}</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"création_duplication_déplacement_mise_à_jour_rechargement_et_suppression_des_onglets","title":"Création, duplication, déplacement, mise à jour, rechargement et suppression des onglets","isH3":false,"content":"<p>Après avoir recueilli des informations sur les onglets, vous voudrez probablement faire quelque chose avec eux — soit pour offrir aux utilisateurs des fonctionnalités de manipulation et de gestion des onglets — soit pour implémenter des fonctionnalités dans votre extension. Les fonctions suivantes sont disponibles :</p>\n<ul>\n  <li>Créer un nouvel onglet (<a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/create\"><code>tabs.create</code></a>).</li>\n  <li>Dupliquer un onglet (<a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/duplicate\"><code>tabs.duplicate</code></a>).</li>\n  <li>Supprimer un onglet (<a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/remove\"><code>tabs.remove</code></a>).</li>\n  <li>Déplacer un onglet (<a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/move\"><code>tabs.move</code></a>).</li>\n  <li>Mettre à jour l'URL d'un onglet — accéderefficacement à une nouvelle page — (<a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/update\"><code>tabs.update</code></a>).</li>\n  <li>Rechargez la page de l'onglet (<a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/reload\"><code>tabs.reload</code></a>).</li>\n</ul>\n<div class=\"notecard note\" id=\"sect3\">\n  <p><strong>Note :</strong></p>\n  <p>Ces fonctions nécessitent toutes l'ID (ou les ID) de l'onglet qu'elles manipulent :</p>\n  <ul>\n    <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/duplicate\"><code>tabs.duplicate</code></a></li>\n    <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/remove\"><code>tabs.remove</code></a></li>\n    <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/move\"><code>tabs.move</code></a></li>\n  </ul>\n  <p>Alors que les fonctions suivantes agissent sur l'onglet actif (si aucun ID d'onglet n'est fourni) :</p>\n  <ul>\n    <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/update\"><code>tabs.update</code></a></li>\n    <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/reload\"><code>tabs.reload</code></a></li>\n  </ul>\n</div>"}},{"type":"prose","value":{"id":"par_exemple_2","title":"Par exemple","isH3":true,"content":"<p>L'exemple <a href=\"https://github.com/mdn/webextensions-examples/tree/master/tabs-tabs-tabs\" class=\"external\" rel=\" noopener\">tabs-tabs-tabs</a> utilise toutes ces fonctionnalités sauf la mise à jour de l'URL d'un onglet. La façon dont ces API sont utilisées est similaire, nous allons donc regarder l'une des implémentations les plus impliquées, celle de l'option “Deplacer l'onglet actif vers le début de la liste des fenêtres”. Mais d'abord, voici une démonstration de la fonctionnalité en action :</p><iframe width=\"560\" height=\"315\" src=\"https://www.youtube-nocookie.com/embed/-lJRzTIvhxo\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen=\"\" loading=\"lazy\"></iframe>\n<h4 id=\"manifest.json_2\"><a href=\"https://github.com/mdn/webextensions-examples/blob/master/tabs-tabs-tabs/manifest.json\" class=\"external\" rel=\" noopener\">manifest.json</a></h4>\n<p>Aucune de ces fonctions ne nécessite de permission pour fonctionner, donc il n'y a aucune fonctionnalité dans le fichier manifest.json qui doit être mise en surbrillance.</p>\n<h4 id=\"tabs.html_2\"><a href=\"https://github.com/mdn/webextensions-examples/blob/master/tabs-tabs-tabs/tabs.html\" class=\"external\" rel=\" noopener\">tabs.html</a></h4>\n<p>tabs.html définit le “menu” affiché dans la fenêtre contextuelle, qui inclut l'option “Déplacer l'onglet actif au début de la liste des fenêtres”, wavec une série de balises <code>&lt;a&gt;</code> groupées par un séparateur visuel. Chaque élément de menu reçoit un ID, qui est utilisé dans tabs.js pour déterminer quel élément de menu est demandé.</p>\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tabs-move-beginning<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Move active tab to the beginning of the window<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tabs-move-end<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Move active tab to the end of the window<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">&gt;</span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>panel-section-separator<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tabs-duplicate<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Duplicate active tab<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">&gt;</span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tabs-reload<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Reload active tab<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>tabs-alertinfo<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Alert active tab info<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<h4 id=\"tabs.js_2\"><a href=\"https://github.com/mdn/webextensions-examples/blob/master/tabs-tabs-tabs/tabs.js\" class=\"external\" rel=\" noopener\">tabs.js</a></h4>\n<p>Pour implémenter le \"menu\" défini dans tabs.html, tabs.js inclut un écouteur pour les clics dans tabs.html</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>document<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n <span class=\"token keyword\">function</span> <span class=\"token function\">callOnActiveTab</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">callback</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n   <span class=\"token function\">getCurrentWindowTabs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tabs</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> tab <span class=\"token keyword\">of</span> tabs<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">.</span>active<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n         <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">,</span> tabs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       <span class=\"token punctuation\">}</span>\n     <span class=\"token punctuation\">}</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Une série d'instructions <code>if</code> cherche alors à faire correspondre l'identifiant de l'élément cliqué. Cet extrait de code est pour l'option “Déplacer l'onglet actif au début de la liste des fenêtres” :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> <span class=\"token string\">\"tabs-move-beginning\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token function\">callOnActiveTab</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tab<span class=\"token punctuation\">,</span> tabs</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token keyword\">var</span> index <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n     <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>tab<span class=\"token punctuation\">.</span>pinned<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       index <span class=\"token operator\">=</span> <span class=\"token function\">firstUnpinnedTab</span><span class=\"token punctuation\">(</span>tabs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n     <span class=\"token punctuation\">}</span>\n     console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">moving </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>tab<span class=\"token punctuation\">.</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> to </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>index<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\n     browser<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>index<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Il est intéressant de noter l'utilisation de console.log. Cela vous permet de générer des informations sur la console du <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Debugging\">debugger</a>, ce qui peut être utile lors de la résolution des problèmes rencontrés lors du développement.</p>\n<p>\n  <img src=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API/console.png\" alt=\"\" width=\"911\" height=\"329\" loading=\"lazy\">\n</p>\n<p>Le code de déplacement appelle d'abord <code>callOnActiveTab()</code> qui à son tour appelle <code>getCurrentWindowTabs()</code> pour obtenir un objet <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/Tab\"><code>tabs.Tab</code></a> contenant les onglets de la fenêtre active. Il parcourt ensuite l'objet pour rechercher et renvoyer l'objet onglet actif :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code> <span class=\"token keyword\">function</span> <span class=\"token function\">callOnActiveTab</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">callback</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token function\">getCurrentWindowTabs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tabs</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> tab <span class=\"token keyword\">of</span> tabs<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">.</span>active<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n         <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">,</span> tabs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       <span class=\"token punctuation\">}</span>\n     <span class=\"token punctuation\">}</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span>\n</code></pre></div>\n<h5 id=\"onglets_épinglés\">Onglets épinglés</h5>\n<p>Une caractéristique des onglets est que l'utilisateur peut épingler des onglets dans une fenêtre. Les onglets épinglés sont placés au début de la liste des onglets et ne peuvent pas être déplacés. Cela signifie que la première position vers laquelle un onglet peut se déplacer est la première position après les onglets épinglés. Ainsi, <code>firstUnpinnedTab()</code> est appelé pour trouver la position du premier onglet non goupillé en faisant une boucle dans l'objet <code>tabs</code> :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">firstUnpinnedTab</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tabs</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> tab <span class=\"token keyword\">of</span> tabs<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>tab<span class=\"token punctuation\">.</span>pinned<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token keyword\">return</span> tab<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Nous avons maintenant tout ce qu'il faut pour déplacer l'onglet : l'objet onglet actif à partir duquel nous pouvons obtenir l'ID de l'onglet et la position à laquelle l'onglet doit être déplacé. Ainsi, nous pouvons mettre en œuvre le mouvement :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>     browser<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">move</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>index<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Les fonctions restantes à dupliquer, recharger, créer et supprimer des onglets sont implémentées de manière similaire.</p>"}},{"type":"prose","value":{"id":"manipulation_du_niveau_du_zoom_dun_onglet","title":"Manipulation du niveau du zoom d'un onglet","isH3":false,"content":"<p>Le prochain ensemble de fonctions vous permet d'obtenir (<a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/getZoom\"><code>tabs.getZoom</code></a>) et de définir (<a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/setZoom\"><code>tabs.setZoom</code></a>) le niveau de zoom dans un onglet. Vous pouvez également récupérer les paramètres de zoom (<a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/getZoomSettings\"><code>tabs.getZoomSettings</code></a>) mais, au moment de l'écriture, la possibilité de définir les paramètres (<a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/setZoomSettings\"><code>tabs.setZoomSettings</code></a>) n'était pas disponible dans Firefox.</p>\n<p>Le niveau de zoom peut être compris entre 30% et 300% (représenté par des décimales de 0.3 à 3).</p>\n<p>Dans Firefox les paramètres de zoom par défaut sont :</p>\n<ul>\n  <li><strong>niveau de zoom par défaut</strong> : 100%.</li>\n  <li><strong>mode zoom</strong>: automatique (le navigateur gère donc le réglage des niveaux de zoom).</li>\n  <li><strong>portée des changements de zoom</strong> : <code>\"per-origin\"</code>, ce qui signifie que lorsque vous visitez à nouveau un site, il prend le niveau de zoom défini lors de votre dernière visite.</li>\n</ul>"}},{"type":"prose","value":{"id":"par_exemple_3","title":"Par exemple","isH3":true,"content":"<p>L'exemple <a href=\"https://github.com/mdn/webextensions-examples/tree/master/tabs-tabs-tabs\" class=\"external\" rel=\" noopener\">tabs-tabs-tabs</a> comprend trois démonstrations de la fonction de zoom : zoom avant, zoom arrière, et réinitialisation du zoom. Voici la fonctionnalité en action :</p><iframe width=\"560\" height=\"315\" src=\"https://www.youtube-nocookie.com/embed/RFr3oYBCg28\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen=\"\" loading=\"lazy\"></iframe>\n<p>Jetons un coup d'oeil à la façon dont le zoom est implémenté.</p>\n<h4 id=\"manifest.json_3\"><a href=\"https://github.com/mdn/webextensions-examples/blob/master/tabs-tabs-tabs/manifest.json\" class=\"external\" rel=\" noopener\">manifest.json</a></h4>\n<p>Aucune des fonctions de zoom n'a besoin d'autorisations. Par conséquent, aucune fonction du fichier manifest.json ne doit être mise en surbrillance.</p>\n<h4 id=\"tabs.html_3\"><a href=\"https://github.com/mdn/webextensions-examples/blob/master/tabs-tabs-tabs/tabs.html\" class=\"external\" rel=\" noopener\">tabs.html</a></h4>\n<p>Nous avons déjà discuté comment le tabs.html définit les options pour cette extension, rien de nouveau ou unique n'est fait pour fournir les options de zoom.</p>\n<h4 id=\"tabs.js_3\"><a href=\"https://github.com/mdn/webextensions-examples/blob/master/tabs-tabs-tabs/tabs.js\" class=\"external\" rel=\" noopener\">tabs.js</a></h4>\n<p>tabs.js commence par définir plusieurs constantes utilisées dans le code du zoom :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> <span class=\"token constant\">ZOOM_INCREMENT</span> <span class=\"token operator\">=</span> <span class=\"token number\">0.2</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">MAX_ZOOM</span> <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">MIN_ZOOM</span> <span class=\"token operator\">=</span> <span class=\"token number\">0.3</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">DEFAULT_ZOOM</span> <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Il utilise ensuite le même écouteur que nous avons discuté précédemment afin qu'il puisse agir sur les clics dans tabs.html.</p>\n<p>Pour la fonction zoom, ceci s'exécute :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> <span class=\"token string\">\"tabs-add-zoom\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token function\">callOnActiveTab</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tab</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token keyword\">var</span> gettingZoom <span class=\"token operator\">=</span> browser<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">getZoom</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n     gettingZoom<span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">zoomFactor</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token comment\">//the maximum zoomFactor is 3, it can't go higher</span>\n       <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>zoomFactor <span class=\"token operator\">&gt;=</span> <span class=\"token constant\">MAX_ZOOM</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n         <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Tab zoom factor is already at max!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n         <span class=\"token keyword\">var</span> newZoomFactor <span class=\"token operator\">=</span> zoomFactor <span class=\"token operator\">+</span> <span class=\"token constant\">ZOOM_INCREMENT</span><span class=\"token punctuation\">;</span>\n         <span class=\"token comment\">//if the newZoomFactor is set to higher than the max accepted</span>\n         <span class=\"token comment\">//it won't change, and will never alert that it's at maximum</span>\n         newZoomFactor <span class=\"token operator\">=</span> newZoomFactor <span class=\"token operator\">&gt;</span> <span class=\"token constant\">MAX_ZOOM</span> <span class=\"token operator\">?</span> <span class=\"token constant\">MAX_ZOOM</span> <span class=\"token operator\">:</span> newZoomFactor<span class=\"token punctuation\">;</span>\n         browser<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">setZoom</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> newZoomFactor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       <span class=\"token punctuation\">}</span>\n     <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Ce code utilise <code>callOnActiveTab()</code> pour obtenir les détails de l'onglet actif, puis <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/getZoom\"><code>tabs.getZoom</code></a> obtient le facteur de zoom actuel de l'onglet. Le zoom actuel est comparé au maximum défini (<code>MAX_ZOOM</code>) et une alerte est émise si l'onglet est déjà au zoom maximum. Sinon, le niveau de zoom est incrémenté mais limité au zoom maximum, puis le zoom est défini avec <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/getZoom\"><code>tabs.getZoom</code></a>.</p>"}},{"type":"prose","value":{"id":"manipuler_le_css_dun_onglet","title":"Manipuler le CSS d'un onglet","isH3":false,"content":"<p>Une autre fonctionnalité importante offerte par l'API Tabs est la possibilité de manipuler le CSS dans un onglet — ajouter un nouveau CSS dans un onglet (<a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/insertCSS\"><code>tabs.insertCSS</code></a>) ou supprimer CSS d'un onglet (<a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/removeCSS\"><code>tabs.removeCSS</code></a>).</p>\n<p>Cela peut être utile si vous voulez, par exemple, mettre en évidence certains éléments de la page ou modifier la disposition par défaut de la page (liste courte des cas d'utilisation).</p>"}},{"type":"prose","value":{"id":"par_exemple_4","title":"Par exemple","isH3":true,"content":"<p>L'exemple <a href=\"https://github.com/mdn/webextensions-examples/tree/master/apply-css\" class=\"external\" rel=\" noopener\">apply-css</a> utilise ces fonctionnalités pour ajouter une bordure rouge à la page Web dans l'onglet actif. Voici la fonctionnalité en action:</p><iframe width=\"560\" height=\"315\" src=\"https://www.youtube-nocookie.com/embed/bcK-GT2Dyhs\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen=\"\" loading=\"lazy\"></iframe>\n<p>Voyons comment cela se passe.</p>\n<h4 id=\"manifest.json_4\"><a href=\"https://github.com/mdn/webextensions-examples/blob/master/apply-css/manifest.json\" class=\"external\" rel=\" noopener\">manifest.json</a></h4>\n<p>Pour utiliser les fonctionnalités CSS dont vous avez besoin :</p>\n<ul>\n  <li>Permission <code>\"tabs\"</code> et <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions#host_permissions\">permission hôte</a> ou</li>\n  <li>Permission <code>\"activeTab\"</code>.</li>\n</ul>\n<p>Ce dernier est le plus utile, car il permet à une extension d'utiliser <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/insertCSS\"><code>tabs.insertCSS</code></a> et <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/removeCSS\"><code>tabs.removeCSS</code></a> dans l'onglet actif lorsqu'il est exécuté depuis le navigateur de l'extension ou action de la page, menu contextuel ou un raccourci.</p>\n<div class=\"code-example\"><pre class=\"brush: json notranslate\"><code><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Adds a page action to toggle applying CSS to pages.\"</span><span class=\"token punctuation\">,</span>\n\n <span class=\"token property\">\"manifest_version\"</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"apply-css\"</span><span class=\"token punctuation\">,</span>\n <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.0\"</span><span class=\"token punctuation\">,</span>\n <span class=\"token property\">\"homepage_url\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://github.com/mdn/webextensions-examples/tree/master/apply-css\"</span><span class=\"token punctuation\">,</span>\n\n <span class=\"token property\">\"background\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"background.js\"</span><span class=\"token punctuation\">]</span>\n <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n <span class=\"token property\">\"page_action\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token property\">\"default_icon\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"icons/off.svg\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"browser_style\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n <span class=\"token property\">\"permissions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"activeTab\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"tabs\"</span>\n <span class=\"token punctuation\">]</span>\n\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Vous noterez que la permission <code>\"tabs\"</code> est ajoutée en plus de <code>\"activeTab\"</code>. Cette permission supplémentaire est nécessaire pour permettre au script de l'extension d'accéder à l'URL de l'onglet, dont nous verrons l'importance dans un instant.</p>\n<p>Les autres caractéristiques principales du fichier manifeste sont la définition de:</p>\n<ul>\n  <li><strong>un script d'arrière-plan</strong>, qui commence à s'exécuter dès que l'extension est chargée.</li>\n  <li><strong>une “action de page”</strong>, qui définit une icône à ajouter à la barre d'adresse du navigateur.</li>\n</ul>\n<h4 id=\"background.js\"><a href=\"https://github.com/mdn/webextensions-examples/blob/master/apply-css/background.js\" class=\"external\" rel=\" noopener\">background.js</a></h4>\n<p>Au démarrage, background.js définit un certain nombre de constantes à utiliser dans l'extension qui définissent le CSS à appliquer, des titres pour les “actions de page”, et une liste de protocoles dans lesquels l'extension fonctionnera :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> <span class=\"token constant\">CSS</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"body { border: 20px solid red; }\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">TITLE_APPLY</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"Apply CSS\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">TITLE_REMOVE</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"Remove CSS\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">APPLICABLE_PROTOCOLS</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"http:\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"https:\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Lors du premier chargement, l'extension utilise <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/query\"><code>tabs.query</code></a> pour obtenir une liste de tous les onglets de la fenêtre du navigateur en cours. Il parcourt ensuite les onglets appelant <code>initializePageAction()</code>.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> gettingAllTabs <span class=\"token operator\">=</span> browser<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">query</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ngettingAllTabs<span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tabs</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> tab <span class=\"token keyword\">of</span> tabs<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token function\">initializePageAction</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p><code>initializePageAction</code> utilise <code>protocolIsApplicable()</code> pour déterminer si l'URL de l'onglet actif est celle à laquelle le CSS peut être appliqué :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">protocolIsApplicable</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">url</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n <span class=\"token keyword\">var</span> anchor <span class=\"token operator\">=</span>  document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n anchor<span class=\"token punctuation\">.</span>href <span class=\"token operator\">=</span> url<span class=\"token punctuation\">;</span>\n <span class=\"token keyword\">return</span> <span class=\"token constant\">APPLICABLE_PROTOCOLS</span><span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>anchor<span class=\"token punctuation\">.</span>protocol<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Ensuite, si l'exemple peut agir sur l'onglet, <code>initializePageAction()</code> définit l'icône <code>pageAction</code> (barre de navigation) et le titre de l'onglet pour utiliser les versions ‘off’ avant de rendre la <code>pageAction</code> visible :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">initializePageAction</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tab</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">protocolIsApplicable</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   browser<span class=\"token punctuation\">.</span>pageAction<span class=\"token punctuation\">.</span><span class=\"token function\">setIcon</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">tabId</span><span class=\"token operator\">:</span> tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">\"icons/off.svg\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   browser<span class=\"token punctuation\">.</span>pageAction<span class=\"token punctuation\">.</span><span class=\"token function\">setTitle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">tabId</span><span class=\"token operator\">:</span> tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token constant\">TITLE_APPLY</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   browser<span class=\"token punctuation\">.</span>pageAction<span class=\"token punctuation\">.</span><span class=\"token function\">show</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Maintenant, un écouteur sur <code>geAction.onClicked</code> attend que l'icône pageAction soit cliqué et appelle <code>toggleCSS</code> quand il l'est.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>browser<span class=\"token punctuation\">.</span>pageAction<span class=\"token punctuation\">.</span>onClicked<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span>toggleCSS<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p><code>toggleCSS()</code> obtient le titre de la <code>pageAction</code> puis prend l'action décrite :</p>\n<ul>\n  <li><strong>Pour \"Appliquer CSS”:</strong>\n    <ul>\n      <li>Basculer l'icône <code>pageAction</code> et le titre dans les versions “supprimer”.</li>\n      <li>Applique le CSS en utilisant <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/insertCSS\"><code>tabs.insertCSS</code></a>.</li>\n    </ul>\n  </li>\n  <li><strong>Pour “Supprimer CSS”:</strong>\n    <ul>\n      <li>Basculer l'icône <code>pageAction</code> et le titre dans les versions “apply”.</li>\n      <li>Supprime le CSS en utilisant <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/removeCSS\"><code>tabs.removeCSS</code></a>.</li>\n    </ul>\n  </li>\n</ul>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">toggleCSS</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">tab</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n\n <span class=\"token keyword\">function</span> <span class=\"token function\">gotTitle</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">title</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>title <span class=\"token operator\">===</span> <span class=\"token constant\">TITLE_APPLY</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n     browser<span class=\"token punctuation\">.</span>pageAction<span class=\"token punctuation\">.</span><span class=\"token function\">setIcon</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">tabId</span><span class=\"token operator\">:</span> tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">\"icons/on.svg\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n     browser<span class=\"token punctuation\">.</span>pageAction<span class=\"token punctuation\">.</span><span class=\"token function\">setTitle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">tabId</span><span class=\"token operator\">:</span> tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token constant\">TITLE_REMOVE</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n     browser<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">insertCSS</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">code</span><span class=\"token operator\">:</span> <span class=\"token constant\">CSS</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n     browser<span class=\"token punctuation\">.</span>pageAction<span class=\"token punctuation\">.</span><span class=\"token function\">setIcon</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">tabId</span><span class=\"token operator\">:</span> tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">\"icons/off.svg\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n     browser<span class=\"token punctuation\">.</span>pageAction<span class=\"token punctuation\">.</span><span class=\"token function\">setTitle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">tabId</span><span class=\"token operator\">:</span> tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">title</span><span class=\"token operator\">:</span> <span class=\"token constant\">TITLE_APPLY</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n     browser<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">removeCSS</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">code</span><span class=\"token operator\">:</span> <span class=\"token constant\">CSS</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n <span class=\"token punctuation\">}</span>\n\n <span class=\"token keyword\">var</span> gettingTitle <span class=\"token operator\">=</span> browser<span class=\"token punctuation\">.</span>pageAction<span class=\"token punctuation\">.</span><span class=\"token function\">getTitle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">tabId</span><span class=\"token operator\">:</span> tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n gettingTitle<span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>gotTitle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Enfin, pour s'assurer que <code>pageAction</code> est valide après chaque mise à jour de l'onglet, un écouteur sur <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/onUpdated\"><code>tabs.onUpdated</code></a> appelle <code>initializePageAction()</code> chaque fois que l'onglet est mis à jour pour vérifier que l'onglet utilise toujours un protocole auquel le CSS peut être appliqué.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>browser<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span>onUpdated<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">id<span class=\"token punctuation\">,</span> changeInfo<span class=\"token punctuation\">,</span> tab</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n\n <span class=\"token function\">initializePageAction</span><span class=\"token punctuation\">(</span>tab<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"quelques_autres_capacités_intéressantes","title":"Quelques autres capacités intéressantes","isH3":false,"content":"<p>Il existe deux autres fonctionnalités de l'API Tabs qui ne rentrent pas dans l'une des sections précédentes :</p>\n<ul>\n  <li>capturez le contenu de l'onglet visible avec <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/captureVisibleTab\"><code>tabs.captureVisibleTab</code></a>.</li>\n  <li>détecter la langue principale du contenu dans un onglet en utilisant <a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs/detectLanguage\"><code>tabs.detectLanguage</code></a>, que vous pourriez utiliser, par exemple, pour faire correspondre la langue de l'interface utilisateur de votre extension avec celle de la page dans laquelle elle s'exécute.</li>\n</ul>"}},{"type":"prose","value":{"id":"apprendre_encore_plus","title":"Apprendre encore plus","isH3":false,"content":"<p>Si vous voulez en savoir plus sur l'API Tabs, consultez le :</p>\n<ul>\n  <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/API/tabs\">Tabs API reference.</a></li>\n  <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions/Examples\">example extensions</a>, car beaucoup d'entre eux utilisent l'API Tabs.</li>\n</ul>"}}],"toc":[{"text":"Permissions et l'API Tabs","id":"permissions_et_lapi_tabs"},{"text":"En savoir plus sur les onglets et leurs propriétés","id":"en_savoir_plus_sur_les_onglets_et_leurs_propriétés"},{"text":"Création, duplication, déplacement, mise à jour, rechargement et suppression des onglets","id":"création_duplication_déplacement_mise_à_jour_rechargement_et_suppression_des_onglets"},{"text":"Manipulation du niveau du zoom d'un onglet","id":"manipulation_du_niveau_du_zoom_dun_onglet"},{"text":"Manipuler le CSS d'un onglet","id":"manipuler_le_css_dun_onglet"},{"text":"Quelques autres capacités intéressantes","id":"quelques_autres_capacités_intéressantes"},{"text":"Apprendre encore plus","id":"apprendre_encore_plus"}],"summary":"Les onglets permettent à un utilisateur d'ouvrir plusieurs pages Web dans la fenêtre de son navigateur, puis de basculer entre ces pages Web. Grâce à l'API Tabs, vous pouvez utiliser et manipuler ces onglets pour créer des utilitaires qui offrent aux utilisateurs de nouvelles façons de travailler avec des onglets ou de fournir les fonctionnalités de votre extension.","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Working with the Tabs API","locale":"en-US","native":"English (US)"},{"title":"Tabs API を使う","locale":"ja","native":"日本語"},{"title":"Working with the Tabs API","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"fr/mozilla/add-ons/webextensions/working_with_the_tabs_api","github_url":"https://github.com/mdn/translated-content/blob/main/files/fr/mozilla/add-ons/webextensions/working_with_the_tabs_api/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/fr/docs/Mozilla","title":"Mozilla"},{"uri":"/fr/docs/Mozilla/Add-ons","title":"Modules"},{"uri":"/fr/docs/Mozilla/Add-ons/WebExtensions","title":"WebExtensions"},{"uri":"/fr/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API","title":"Travailler avec l'API Tabs"}],"pageTitle":"Travailler avec l'API Tabs - Mozilla | MDN","noIndexing":false}}