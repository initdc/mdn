{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"Mise à jour des extensions pour Firefox 3","mdn_url":"/fr/docs/Mozilla/Firefox/Releases/3/Updating_extensions","locale":"fr","native":"Français","sidebarHTML":"","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<ol>\n  <li>Notes de versions pour développeurs\n    <ol>\n      <li><a href=\"/fr/docs/Mozilla/Firefox/Releases\">Notes de versions pour développeurs</a></li>\n    </ol>\n  </li>\n  <li>Modules complémentaires\n    <ol>\n      <li><a href=\"/fr/docs/Mozilla/Add-ons/WebExtensions\">WebExtensions</a></li>\n      <li><a href=\"/fr/docs/Mozilla/Add-ons/Themes\">Thèmes</a></li>\n    </ol>\n  </li>\n  <li>Fonctionnement interne de Firefox\n    <ol>\n      <li><a href=\"/fr/docs/Mozilla\">Le projet Mozilla</a></li>\n      <li><a href=\"/fr/docs/Mozilla/Gecko\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">Gecko</a></li>\n      <li><a href=\"/fr/docs/Mozilla/Firefox/Headless_mode\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">Mode « headless »</a></li>\n      <li><a href=\"/fr/docs/Mozilla/JavaScript_code_modules\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">Modules de code Javascript</a></li>\n      <li><a href=\"/fr/docs/Mozilla/js-ctypes\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">JS-ctypes</a></li>\n      <li><a href=\"/fr/docs/Mozilla/MathML_Project\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">Le projet MathML</a></li>\n      <li><a href=\"/fr/docs/Mozilla/MFBT\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">MFBT</a></li>\n      <li><a href=\"/fr/docs/Mozilla/Projects\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">Les projets Mozilla</a></li>\n      <li><a href=\"/fr/docs/Mozilla/Preferences\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">Le système de préférences</a></li>\n      <li><a href=\"/fr/docs/Mozilla/WebIDL_bindings\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">Connexions WebIDL</a></li>\n      <li><a href=\"/fr/docs/Mozilla/Tech/XPCOM\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">XPCOM</a></li>\n      <li><a href=\"/fr/docs/Mozilla/Tech/XUL\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">XUL</a></li>\n    </ol>\n  </li>\n  <li>Développer et contribuer\n    <ol>\n      <li><a href=\"/fr/docs/Mozilla/Developer_guide/Build_Instructions\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">Instructions de compilation</a></li>\n      <li><a href=\"/fr/docs/Mozilla/Developer_guide/Build_Instructions/Configuring_Build_Options\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">Configuration des options de compilation</a></li>\n      <li><a href=\"/fr/docs/Mozilla/Developer_guide/Build_Instructions/How_Mozilla_s_build_system_works\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">Fonctionnement de la compilation</a></li>\n      <li><a href=\"/fr/docs/Mozilla/Developer_guide/Source_Code/Mercurial\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">Code source de Mozilla</a></li>\n      <li><a href=\"/fr/docs/Mozilla/Localization\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">Localisation</a></li>\n      <li><a href=\"/fr/docs/Mozilla/Mercurial\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">Mercurial</a></li>\n      <li><a href=\"/fr/docs/Mozilla/QA\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">Assurance qualité</a></li>\n      <li><a href=\"/fr/docs/Mozilla/Using_Mozilla_code_in_other_projects\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">Utilisation de code Mozilla dans d'autres projets</a></li>\n    </ol>\n  </li>\n</ol>\n<p>Cet article fournit des informations qui seront utiles pour les développeurs désirant mettre à jour leurs extensions pour qu'elles fonctionnent correctement avec Firefox 3.</p>\n<p>Avant d'aller plus loin, voici une indication utile&nbsp;: si la seule modification dont votre extension a besoin est une mise à jour du champ <code>maxVersion</code> dans son manifeste d'installation, et que celle-ci est hébergée sur <a href=\"https://addons.mozilla.org\" class=\"external\" rel=\" noopener\">addons.mozilla.org</a>, il n'est pas vraiment nécessaire de renvoyer une nouvelle version de votre extension&nbsp;! Utilisez simplement le Developer Control Panel sur AMO pour ajuster la valeur de <code>maxVersion</code>. Cela vous évitera également la revérification de votre extension.</p>"}},{"type":"prose","value":{"id":"première_étape_mise_à_jour_du_manifeste_dinstallation","title":"Première étape&nbsp;: mise à jour du manifeste d'installation","isH3":true,"content":"<p>La première étape — et pour la plupart des extensions la seule qui sera nécessaire — est de mettre à jour le fichier de <a href=\"/fr/Manifestes_d'installation\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">manifeste d'installation</a>, <code>install.rdf</code>, pour indiquer sa compatibilité avec Firefox 3.</p>\n<p>Trouvez simplement la ligne indiquant la version maximale compatible de Firefox (qui, pour Firefox 2, ressemblait probablement à ceci)&nbsp;:</p>\n<div class=\"code-example\"><pre class=\"brush: xml notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">em:</span>maxVersion</span><span class=\"token punctuation\">&gt;</span></span>2.0.*<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">em:</span>maxVersion</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<p>Modifiez-la pour indiquer la compatibilité avec Firefox 3&nbsp;:</p>\n<div class=\"code-example\"><pre class=\"brush: xml notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">em:</span>maxVersion</span><span class=\"token punctuation\">&gt;</span></span>3.0.*<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">em:</span>maxVersion</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<p>Et réinstallez ensuite votre extension.</p>\n<p>Notez que Firefox 3 n'a plus besoin d'un «&nbsp;.0&nbsp;» supplémentaire dans son numéro de version, donc au lieu d'utiliser «&nbsp;3.0.0.*&nbsp;», il ne faut plus indiquer que «&nbsp;3.0.*&nbsp;».</p>\n<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>Note :</strong> Notez qu'à ce point, il faut s'attendre à d'autres changements dans Firefox 3. Ceux-ci peuvent poser des problèmes à certaines extensions, il faut donc éviter de publier une extension avec la valeur <code>3.0.0.*</code> pour <code>maxVersion</code> avant que la RC de Firefox 3 soit disponible. Durant la pariode beta de Firefox 3, il convient d'utiliser <code>3.0b5</code> comme valeur de <code>maxVersion</code>.</p>\n</div>\n<p>Il y a eu (et il y aura encore) un certain nombre de changements dans les API qui poseront probablement des problèmes à certaines. Nous sommes encore en train d'établir une liste complète de ces changements.</p>\n<div class=\"notecard note\" id=\"sect2\">\n  <p><strong>Note :</strong> Si votre extension utilise toujours un script <a href=\"%22fr/Install.js%22\"><code>Install.js</code></a> plutôt qu'un <a href=\"%22fr/Manifestes_d'installation%22\">manifeste d'installation</a>, il vous faudra faire la transition vers un manifeste d'installation maintenant. Firefox 3 ne gère plus les scripts <code>install.js</code> dans les fichiers XPI.</p>\n</div>\n<h4 id=\"ajout_de_localisations_au_manifeste_dinstallation\">Ajout de localisations au manifeste d'installation</h4>\n<p>Firefox 3 permet d'utiliser de nouvelles propriétés dans le manifeste d'installation pour spécifier des descriptions localisées. Les anciennes méthodes continuent à fonctionner, mais la nouvelle permet à Firefox de charger les localisations même lorsque le module complémentaire est désactivé ou sur le point d'être installé. Consultez <a href=\"/fr/Localisation_des_descriptions_d'extensions\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">Localisation des descriptions d'extensions</a> pour plus de détails.</p>","titleAsText":"Première étape : mise à jour du manifeste d'installation"}},{"type":"prose","value":{"id":"deuxième_étape_sassurer_de_fournir_des_mises_à_jour_sécurisées","title":"Deuxième étape&nbsp;: s'assurer de fournir des mises à jour sécurisées","isH3":true,"content":"<p>Si vous hébergez des modules complémentaires vous-mêmes et pas sur un fournisseur d'hébergement sécurisé comme <a href=\"https://addons.mozilla.org\" class=\"external\" rel=\" noopener\">addons.mozilla.org</a>, vous devrez fournir une méthode sécurisée de mise à jour pour vos modules. Pour ce faire, il faudrait soit héberger vos mises à jour sur un site SSL, ou utiliser des clés cryptographiques pour signer les informations de mise à jour. Consultez <a href=\"/fr/Versions_d'une_extension,_mise_%C3%A0_jour_et_compatibilit%C3%A9#Mises_.C3.A0_jour_s.C3.A9curis.C3.A9es\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">Mises à jour sécurisées</a> pour plus d'informations.</p>","titleAsText":"Deuxième étape : s'assurer de fournir des mises à jour sécurisées"}},{"type":"prose","value":{"id":"troisième_étape_soccuper_des_changements_dapi","title":"Troisième étape&nbsp;: s'occuper des changements d'API","isH3":true,"content":"<p>Plusieurs API ont changé de manière significative. Les changements les plus importants, qui affecteront probablement un grand nombre d'extensions, sont les suivants&nbsp;:</p>\n<h4 id=\"dom\">DOM</h4>\n<p>\n  Les nœuds provenant de documents externes doivent être clonés à l'aide de <a href=\"/fr/docs/Web/API/Document/importNode\"><code>document.importNode()</code></a> (ou adoptés avec\n  <a href=\"/fr/docs/Web/API/Document/adoptNode\"><code>document.adoptNode()</code></a>) avant de pouvoir être insérés dans le document courant. Pour en savoir plus sur les problèmes\n  de <a href=\"/fr/docs/Web/API/Node/ownerDocument\"><code>Node.ownerDocument</code></a>, consultez la <a href=\"https://www.w3.org/DOM/faq.html#ownerdoc\" class=\"external\" rel=\" noopener\">FAQ DOM du W3C</a> (en anglais).\n</p>\n<p>\n  Gecko n'obligeait pas à utiliser <a href=\"/fr/docs/Web/API/Document/importNode\"><code>document.importNode()</code></a> et <a href=\"/fr/docs/Web/API/Document/adoptNode\"><code>document.adoptNode()</code></a> avant sa version 1.9. Depuis les versions 1.9\n  alphas, si un nœud n'est pas adopté ou importé avant d'être utilisé dans un autre document, l'exception\n  <code>WRONG_DOCUMENT_ERR</code> est déclenchée (<code>NS_ERROR_DOM_WRONG_DOCUMENT_ERR</code>). implémentation dans le <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=47903\" class=\"external\" rel=\" noopener\">bug 47903</a>.\n</p>\n<h4 id=\"marque-pages_et_historique\">Marque-pages et historique</h4>\n<p>Si votre extension accède aux marque-pages ou à des données de l'historique d'une manière ou d'une autre, elle devra être substantiellement modifiée pour être compatible avec Firefox 3. Les anciennes API pour accéder à ces informations ont été remplacées par la nouvelle architecture <a href=\"/fr/Places\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">Places</a>. Consultez le <a href=\"/fr/Guide_de_migration_vers_Places\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">Guide de migration vers Places</a> pour des détails sur la mise à jour de vos extensions existantes en utilisant l'API Places.</p>\n<h4 id=\"gestionnaire_de_téléchargement\">Gestionnaire de téléchargement</h4>\n<p>L'API du gestionnaire de téléchargement a légèrement changé suite à la transition d'un stockage de données RDF vers l'API <a href=\"/fr/Storage\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">Storage</a>. La transition devrait être très facile à faire. En outre, l'API permettant d'examiner la progression des téléchargements a été modifiée pour permettre l'existence de plusieurs écouteurs sur le gestionnaire de téléchargement. Consultez <a href=\"/fr/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDownloadManager\" class=\"page-not-created\" title=\"This is a link to an unwritten page\"><code>nsIDownloadManager</code></a>, <a href=\"/fr/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIDownloadProgressListener\" class=\"page-not-created\" title=\"This is a link to an unwritten page\"><code>nsIDownloadProgressListener</code></a> et <a href=\"/fr/Surveillance_de_t%C3%A9l%C3%A9chargements\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">Surveillance de téléchargements</a> pour plus d'informations.</p>\n<h4 id=\"gestionnaire_de_mots_de_passe\">Gestionnaire de mots de passe</h4>\n<p>Si votre extension accède à des informations d'identification à l'aide du Gestionnaire de mots de passe, elle devra être adaptée pour utiliser la nouvelle API du gestionnaire d'identification.</p>\n<ul>\n  <li>L'article <a href=\"/fr/Utilisation_de_nsILoginManager\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">Utilisation de nsILoginManager</a> fournit des exemples, dont une démonstration d'écriture d'extension fonctionnant à la fois avec le Gestionnaire de mots de passe et le Gestionnaire d'identification, afin qu'elle fonctionne tant avec Firefox que dans les versions précédentes.</li>\n  <li><a href=\"/fr/NsILoginInfo\" class=\"page-not-created\" title=\"This is a link to an unwritten page\"><code>nsILoginInfo</code></a></li>\n  <li><a href=\"/fr/NsILoginManager\" class=\"page-not-created\" title=\"This is a link to an unwritten page\"><code>nsILoginManager</code></a></li>\n</ul>\n<p>Il est également possible de ne pas utiliser le stockage du gestionnaire de mots de passe intégré si vous désirez fournir votre propre implémentation de stockage de mots de passe dans vos extensions. Consultez <a href=\"/fr/Cr%C3%A9ation_d'un_module_de_stockage_du_gestionnaire_d'identification\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">Création d'un module de stockage du gestionnaire d'identification</a> pour plus de détails.</p>\n<h4 id=\"popups_menus_menus_contextuels_bulles_dinformation_et_panneaux\">Popups (menus, menus contextuels, bulles d'information et panneaux)</h4>\n<p>Le système de popups XUL a été modifié de manière importante dans Firefox 3. Celui-ci gère les menus principaux, les menus contextuels et les panneaux d'information. Un guide d'<a href=\"/fr/XUL/Guide_des_popups\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">utilisation des popups</a> a été créé pour expliquer en détail le fonctionnement du système. Une chose à noter est l'obsolescence de <code>popup.showPopup</code> en faveur des nouvelles méthodes <code>popup.openPopup</code> et <code>popup.openPopupAtScreen</code>.</p>\n<h4 id=\"complément_automatique\">Complément automatique</h4>\n<p>La méthode <a href=\"/fr/NsIAutoCompleteController#handleEnter.28.29\" class=\"page-not-created\" title=\"This is a link to an unwritten page\"><code>handleEnter()</code></a> de l'interface <a href=\"/fr/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAutoCompleteController\" class=\"page-not-created\" title=\"This is a link to an unwritten page\"><code>nsIAutoCompleteController</code></a> a été modifiée pour accepter un paramètre indiquant si le texte a été sélectionné depuis le popup de complément automatique ou par l'appui sur la touche Entrée par l'utilisateur après avoir saisi le texte.</p>\n<h4 id=\"domparser\">DOMParser</h4>\n<ul>\n  <li>Lorsqu'un objet <code>DOMParser</code> est instancié, il hérite du principal du code appelant et des valeurs <code>documentURI</code> et <code>baseURI</code> de la fenêtre dont le constructeur venait.</li>\n  <li>Si l'appelant a des privilèges UniversalXPConnect, il peut fournir des paramètres à <code>new DOMParser()</code>. Si moins de trois paramètres sont fournis, les paramètres restants prendront la valeur <code>null</code> par défaut.\n    <ul>\n      <li>Le premier paramètre est le principal à utiliser&nbsp;; il remplace le principal par défaut normalement hérité.</li>\n      <li>Le second paramètre est la valeur <code>documentURI</code> à utiliser.</li>\n      <li>Le troisième paramètre est la valeur <code>baseURI</code> à utiliser.</li>\n    </ul>\n  </li>\n  <li>Si vous initialisez un <code>DOMParser</code> à l'aide d'un contrat, comme en appelant <code>createInstance()</code>, et que vous n'appelez pas la méthode <code>init()</code> de <code>DOMParser</code>, toute tentative de démarrer une opération d'analyse créera et initialisera automatiquement le <code>DOMParser</code> avec un principal à null et des pointeurs <code>null</code> pour <code>documentURI</code> et <code>baseURI</code>.</li>\n</ul>\n<h4 id=\"interfaces_supprimées\">Interfaces supprimées</h4>\n<p>Les interfaces suivantes ont été retirées de Gecko 1.9, sur lequel se base Firefox 3. Si votre extension utilise l'une ou l'autre d'entre-elles, vous devrez mettre à jour votre code&nbsp;:</p>\n<ul>\n  <li><code>nsIDOMPaintListener</code></li>\n  <li><code>nsIDOMScrollListener</code></li>\n  <li><code>nsIDOMMutationListener</code></li>\n  <li><code>nsIDOMPageTransitionListener</code></li>\n  <li><code>nsICloseAllWindows</code> (voir le <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=386200\" title=\"FIXED: SeaMonkey only: no &quot;view cert button&quot; in untrusted cert error dialog\" class=\"external\" rel=\" noopener\">bug 386200</a>)</li>\n</ul>","titleAsText":"Troisième étape : s'occuper des changements d'API"}},{"type":"prose","value":{"id":"quatrième_étape_vérifier_les_changements_chrome_appropriés","title":"Quatrième étape&nbsp;: vérifier les changements chrome appropriés","isH3":true,"content":"<p>Un changement mineur dans le chrome pourrait nécessiter des changements dans votre code. Un nouveau <code>vbox</code> a été ajouté, appelé «&nbsp;browser-bottombox&nbsp;», qui comprend la Barre de recherche et la Barre d'état en bas de la fenêtre de navigation. Bien que ceci n'affecte pas l'apparence de l'affichage, votre extension peut être affectée si elle utilise des overlays chrome relatifs à ces éléments.</p>\n<p>Par exemple, si vous faisiez précédemment un overlay chrome avant la Barre d'état, comme ceci&nbsp;:</p>\n<div class=\"code-example\"><pre class=\"brush: xml notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>window</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>main-window<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>something</span> <span class=\"token attr-name\">insertbefore</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>status-bar<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>window</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<p>Vous devrez à présent le faire comme ceci&nbsp;:</p>\n<div class=\"code-example\"><pre class=\"brush: xml notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>vbox</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>browser-bottombox<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>something</span> <span class=\"token attr-name\">insertbefore</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>status-bar<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>vbox</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<p>Ou utilisez la technique suivante pour que votre overlay fonctionne tant avec Firefox 2 que Firefox 3&nbsp;:</p>\n<div class=\"code-example\"><pre class=\"brush: xml notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>window</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>main-window<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>vbox</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>browser-bottombox<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">insertbefore</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>status-bar<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>something</span> <span class=\"token attr-name\">insertbefore</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>status-bar<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>vbox</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>window</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<div class=\"notecard note\" id=\"sect3\">\n  <p><strong>Note :</strong> Ce changement s'applique à partir de Firefox 3 beta 4 et des nightlies précédentes.</p>\n</div>","titleAsText":"Quatrième étape : vérifier les changements chrome appropriés"}},{"type":"prose","value":{"id":"autres_changements","title":"Autres changements","isH3":true,"content":"<p><em>Ajoutez ici les changements simples que vous avez dû faire à vos extensions pour qu'elles fonctionnent avec Firefox 3.</em></p>\n<ul>\n  <li><code>chrome://browser/base/utilityOverlay.js</code> n'est plus géré pour des raisons de sécurité. Si vous l'utilisiez auparavant, vous devriez passer à <code>chrome://browser/content/utilityOverlay.js</code>.</li>\n  <li>Les implémentations de <a href=\"/fr/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIAboutModule\" class=\"page-not-created\" title=\"This is a link to an unwritten page\"><code>nsIAboutModule</code></a> doivent à présent supporter la méthode <code>getURIFlags</code>. Consultez <a href=\"https://dxr.mozilla.org/mozilla-central/source/netwerk/protocol/about/public/nsIAboutModule.idl\" class=\"external\" rel=\" noopener\">nsIAboutModule.idl</a> pour la documentation. Ceci affecte les extensions qui fournissent de nouvelles URI <code>about:</code>. (<a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=337746\" title=\"FIXED: [FIX]Move &quot;safe about&quot; hardcoding out of security manager\" class=\"external\" rel=\" noopener\">bug 337746</a>)</li>\n  <li>L'élément <a href=\"/fr/docs/Mozilla/Tech/XUL/tabbrowser\" class=\"page-not-created\" title=\"This is a link to an unwritten page\"><code>tabbrowser</code></a> ne fait plus partie du «&nbsp;toolkit&nbsp;» (<a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=339964\" class=\"external\" rel=\" noopener\">bug 339964</a>). Cela signifie qu'il n'est plus disponible pour les applications XUL et extensions. Il continue cependant à être utilisé dans la fenêtre principale de Firefox (browser.xul).</li>\n  <li>Les changements dans les <a href=\"/fr/Proxys_nsISupports\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">proxys nsISupports</a> et éventuellement aux interfaces liées aux threads doivent être documentés.</li>\n  <li>Si vous utilisez des instructions de traitement XML comme <code>&lt;?xml-stylesheet ?&gt;</code> dans vos fichiers XUL, tenez compte des changements effectués dans le <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=319654\" class=\"external\" rel=\" noopener\">bug 319654</a>&nbsp;:\n    <ol>\n      <li>Les instructions de traitement XML sont à présent ajoutées au DOM des documents XUL. Cela signifie que <a href=\"/fr/docs/Web/API/Document/firstChild\" class=\"page-not-created\" title=\"This is a link to an unwritten page\"><code>document.firstChild</code></a> n'est plus forcément l'élément racine. Si vous avez besoin de l'élément racine dans votre script, utilisez plutôt <a href=\"/fr/docs/Web/API/Document/documentElement\"><code>document.documentElement</code></a>.</li>\n      <li>Les instructions de traitement <code>&lt;?xml-stylesheet ?&gt;</code> et <code>&lt;?xul-overlay ?&gt;</code> n'ont plus d'effet en dehors du prologue du document.</li>\n    </ol>\n  </li>\n  <li><code>window.addEventListener(\"load\", myFunc, true)</code> n'est pas déclenché au chargement de contenu web (chargement de page dans le navigateur). Ceci est causé par le <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=296639\" class=\"external\" rel=\" noopener\">bug 296639</a> qui modifie la manière dont les fenêtres internes et externes communiquent. Une correction simple est d'utiliser <code>gBrowser.addEventListener(\"load\", myFunc, true)</code> comme décrit dans <a href=\"/fr/Extraits_de_code/Onglets_de_navigation#D.C3.A9tection_du_chargement_d.27une_page\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">les exemples de code</a> et qui fonctionnera dans Firefox 2 également.</li>\n  <li><code>content.window.getSelection()</code> fournit un objet (qui peut être converti en une chaîne avec <code>toString()</code>), contrairement à l'ancienne <code>content.document.getSelection()</code>, à présent dépréciée, qui renvoie une chaîne.</li>\n  <li><code>event.preventBubble()</code> avait été dépréciée dans Firefox 2 et a été retirée de Firefox 3. Utilisez <a href=\"/fr/docs/Web/API/Event/stopPropagation\"><code>event.stopPropagation()</code></a>, qui fonctionne également dans Firefox 2.</li>\n  <li>Les timers initialisés par<code>setTimeout()</code> sont à présent bloqués par les fenêtres modales suite à la correction du <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=52209\" class=\"external\" rel=\" noopener\">bug 52209</a>. Vous pouvez utiliser <code>nsITimer</code> à la place.</li>\n  <li>Si votre extension doit permettre à une source non sûre (par exemple un site web) d'accéder au chrome de l'extension, vous devrez utiliser le nouveau paramètre <a href=\"/fr/Enregistrement_chrome#contentaccessible\" class=\"page-not-created\" title=\"This is a link to an unwritten page\"><code>contentaccessible</code></a>.</li>\n  <li>FireFox 3.6 est sensible aux accents dans les pages XUL ! Il faut donc soigneusement enlever toute ponctuation, même dans les commentaires.</li>\n</ul>"}}],"toc":[],"summary":"Cet article fournit des informations qui seront utiles pour les développeurs désirant mettre à jour leurs extensions pour qu'elles fonctionnent correctement avec Firefox 3.","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Updating extensions for Firefox 3","locale":"en-US","native":"English (US)"},{"title":"Actualizar extensiones para Firefox 3","locale":"es","native":"Español"},{"title":"Updating extensions for Firefox 3","locale":"ja","native":"日本語"},{"title":"为 Firefox 3 升级扩展","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"fr/mozilla/firefox/releases/3/updating_extensions","github_url":"https://github.com/mdn/translated-content/blob/main/files/fr/mozilla/firefox/releases/3/updating_extensions/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/fr/docs/Mozilla","title":"Mozilla"},{"uri":"/fr/docs/Mozilla/Firefox","title":"Firefox"},{"uri":"/fr/docs/Mozilla/Firefox/Releases","title":"Notes de version Firefox pour développeurs"},{"uri":"/fr/docs/Mozilla/Firefox/Releases/3","title":"Firefox 3 pour les développeurs"},{"uri":"/fr/docs/Mozilla/Firefox/Releases/3/Updating_extensions","title":"Mise à jour des extensions pour Firefox 3"}],"pageTitle":"Mise à jour des extensions pour Firefox 3 - Mozilla | MDN","noIndexing":false}}