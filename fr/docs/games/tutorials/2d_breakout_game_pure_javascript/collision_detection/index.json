{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"Détection de collisions","mdn_url":"/fr/docs/Games/Tutorials/2D_Breakout_game_pure_JavaScript/Collision_detection","locale":"fr","native":"Français","sidebarHTML":"\n  <ol>\n    <li class=\"toggle\">\n        <details>\n            <summary>Introduction</summary>\n            <ol>\n              <li><a href=\"/fr/docs/Games/Introduction\">Introduction</a></li>\n              <li><a href=\"/fr/docs/Games/Anatomy\">Anatomie d'un jeu vidéo</a></li>\n              <li><a href=\"/fr/docs/Games/Examples\">Exemples</a></li>\n            </ol>\n        </details>\n    </li>\n    <li class=\"toggle\">\n        <details>\n            <summary>API pour le développement de jeux</summary>\n            <ol>\n              <li><a href=\"/fr/docs/Web/API/Canvas_API\">Canvas</a></li>\n              <li><a href=\"/fr/docs/Web/CSS\">CSS</a></li>\n              <li><a href=\"/fr/docs/Web/API/Fullscreen_API\">Full Screen (plein écran)</a></li>\n              <li><a href=\"/fr/docs/Web/API/Gamepad_API\">Gamepad (manette)</a></li>\n              <li><a href=\"/fr/docs/Web/API/IndexedDB_API\">IndexedDB</a></li>\n              <li><a href=\"/fr/docs/Web/JavaScript\">JavaScript</a></li>\n              <li><a href=\"/fr/docs/Web/API/Pointer_Lock_API\">Pointer Lock (verrou de pointeur)</a></li>\n              <li><a href=\"/fr/docs/Web/SVG\">SVG</a></li>\n              <li><a href=\"/fr/docs/Web/JavaScript/Reference/Global_Objects/TypedArray\">Typed Arrays (tableaux typés)</a></li>\n              <li><a href=\"/fr/docs/Web/API/Web_Audio_API\">Web Audio</a></li>\n              <li><a href=\"/fr/docs/Web/API/WebGL_API\">WebGL</a></li>\n              <li><a href=\"/fr/docs/Web/API/WebRTC_API\">WebRTC</a></li>\n              <li><a href=\"/fr/docs/Web/API/WebSockets_API\">WebSockets</a></li>\n              <li><a href=\"/fr/docs/Web/API/WebVR_API\">WebVR (réalité virtuelle)</a></li>\n              <li><a href=\"/fr/docs/Web/API/Web_Workers_API\">Web Workers</a></li>\n              <li><a href=\"/fr/docs/Web/API/XMLHttpRequest\">XMLHttpRequest</a></li>\n            </ol>\n        </details>\n    </li>\n    <li class=\"toggle\">\n        <details>\n            <summary>Techniques</summary>\n            <ol>\n              <li><a href=\"/fr/docs/Games/Techniques/Async_scripts\">Utiliser des scripts asynchrones pour asm.js</a></li>\n              <li><a href=\"/fr/docs/Web/Apps/Developing/Optimizing_startup_performance\">Optimiser les performances de démarrage</a></li>\n              <li><a href=\"/fr/docs/Games/Techniques/WebRTC_data_channels\">Utiliser WebRTC - canaux de données pair-à-pair</a></li>\n              <li><a href=\"/fr/docs/Games/Techniques/Efficient_animation_for_web_games\">Animation efficace pour un jeu internet</a></li>\n              <li><a href=\"/fr/docs/Games/Techniques/Audio_for_Web_Games\">Audio pour les jeux web</a></li>\n              <li><a href=\"/fr/docs/Games/Techniques/2D_collision_detection\">Détection de collision 2D</a></li>\n              <li><a href=\"/fr/docs/Games/Techniques/Tilemaps\">Carreaux et carrelages</a></li>\n            </ol>\n        </details>\n    </li>\n    <li class=\"toggle\">\n        <details>\n            <summary>Jeux 3D sur le Web</summary>\n            <ol>\n              <li><a href=\"/fr/docs/Games/Techniques/3D_on_the_web\">Aperçu des jeux 3D sur le Web</a></li>\n              <li><a href=\"/fr/docs/Games/Techniques/3D_on_the_web/Basic_theory\">Théorie de base sur la 3D</a></li>\n              <li><a href=\"/fr/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_A-Frame\">Construire une démo avec A-Frame</a></li>\n              <li><a href=\"/fr/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_Babylon.js\">Construire une démo avec Babylon.js</a></li>\n              <li><a href=\"/fr/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_PlayCanvas\">Construire une démo avec PlayCanvas</a></li>\n              <li><a href=\"/fr/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_Three.js\">Construire une démo avec Three.js</a></li>\n              <li><a href=\"/fr/docs/Games/Techniques/3D_on_the_web/WebVR\">WebVR (réalité virtuelle)</a></li>\n              <li><a href=\"/fr/docs/Games/Techniques/3D_collision_detection\">Détection de collision en 3D</a></li>\n              <li><a href=\"/fr/docs/Games/Techniques/3D_collision_detection/Bounding_volume_collision_detection_with_THREE.js\">Détection de collision de volumes avec THREE.js</a></li>\n            </ol>\n        </details>\n    </li>\n    <li class=\"toggle\">\n        <details>\n            <summary>Mise en place des contrôle du jeu</summary>\n            <ol>\n              <li><a href=\"/fr/docs/Games/Techniques/Control_mechanisms\">Aperçu des mécanismes de contrôle du jeu</a></li>\n              <li><a href=\"/fr/docs/Games/Techniques/Control_mechanisms/Mobile_touch\">Commandes tactiles mobiles</a></li>\n              <li><a href=\"/fr/docs/Games/Techniques/Control_mechanisms/Desktop_with_mouse_and_keyboard\">Commandes à la souris et au clavier</a></li>\n              <li><a href=\"/fr/docs/Games/Techniques/Control_mechanisms/Desktop_with_gamepad\">Commandes à la manette</a></li>\n              <li><a href=\"/fr/docs/Games/Techniques/Control_mechanisms/Other\">Contrôles non conventionnels</a></li>\n            </ol>\n        </details>\n    </li>\n    <li class=\"toggle\">\n        <details>\n            <summary>Tutoriels</summary>\n            <ol>\n              <li><a href=\"/fr/docs/Games/Tutorials/2D_Breakout_game_pure_JavaScript\">Jeu de casse-briques 2D avec du pur JavaScript</a></li>\n              <li><a href=\"/fr/docs/Games/Tutorials/2D_breakout_game_Phaser\">Jeu de casse-tête 2D avec Phaser</a></li>\n              <li><a href=\"/fr/docs/Games/Tutorials/HTML5_Gamedev_Phaser_Device_Orientation\">Jeu de labyrinthe 2D avec orientation du périphérique</a></li>\n              <li><a href=\"https://mozdevs.github.io/html5-games-workshop/en/guides/platformer/start-here/\">Jeu de plateforme 2D avec Phaser</a></li>\n            </ol>\n        </details>\n    </li>\n    <li class=\"toggle\">\n        <details>\n            <summary>Publication de jeux</summary>\n            <ol>\n              <li><a href=\"/fr/docs/Games/Publishing_games\">Aperçu des outils de publication des jeux</a></li>\n              <li><a href=\"/fr/docs/Games/Publishing_games/Game_distribution\">Distribution des jeux</a></li>\n              <li><a href=\"/fr/docs/Games/Publishing_games/Game_promotion\">Promotion des jeux</a></li>\n              <li><a href=\"/fr/docs/Games/Publishing_games/Game_monetization\">Monétisation des jeux</a></li>\n            </ol>\n        </details>\n    </li>\n  </ol>\n","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<ul class=\"prev-next\">\n    <li><a class=\"button minimal\" href=\"/fr/docs/Games/Tutorials/2D_Breakout_game_pure_JavaScript/Build_the_brick_field\">« Précédent</a></li>\n    <li><a class=\"button minimal\" href=\"/fr/docs/Games/Tutorials/2D_Breakout_game_pure_JavaScript/Track_the_score_and_win\">Suivant  »</a></li>\n</ul>\n<p>Il s'agit de la <strong>7ème étape</strong> sur 10 du <a href=\"/en-US/docs/Games/Tutorials/2D_Breakout_game_pure_JavaScript\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">Gamedev Canvas tutorial (en-US)</a>. Vous pouvez trouver le code source tel qu'il devrait être après avoir complété cette leçon à : <a href=\"https://github.com/end3r/Gamedev-Canvas-workshop/blob/gh-pages/lesson07.html\" class=\"external\" rel=\" noopener\">Gamedev-Canvas-workshop/lesson7.html</a>.</p>\n<p>Les briques apparaissent à l'écran, mais le jeu n'est toujours pas intéressant car la balle les traverse. Nous devons ajouter une détection des collisions afin qu’elle puisse rebondir sur les briques et les casser.</p>\n<p>C'est notre décision, bien sûr, de mettre ça en œuvre, mais il peut être difficile de calculer si la balle touche le rectangle ou non, car il n'y a pas de fonction d'aide dans Canvas pour cela. Dans l'intérêt de ce tutoriel, nous le ferons de la manière la plus simple possible. Nous vérifierons si le centre de la balle entre en collision avec l'une des briques données. Cela ne donnera pas toujours un résultat parfait, et il existe des moyens beaucoup plus sophistiqués de détecter des collisions, mais cela fonctionnera assez bien pour vous apprendre les concepts de base.</p>"}},{"type":"prose","value":{"id":"une_fonction_de_détection_de_collision","title":"Une fonction de détection de collision","isH3":false,"content":"<p>Pour commencer, nous voulons créer une fonction de détection de collision qui va parcourir toutes les briques et comparer la position de chaque brique avec les coordonnées de la balle lorsque chaque image est dessinée. Pour une meilleure lisibilité du code, nous allons définir la variable <code>b</code> pour stocker l’objet brique dans la boucle de la détection de collision:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">collisionDetection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> c<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> c<span class=\"token operator\">&lt;</span>brickColumnCount<span class=\"token punctuation\">;</span> c<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> r<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> r<span class=\"token operator\">&lt;</span>brickRowCount<span class=\"token punctuation\">;</span> r<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">var</span> b <span class=\"token operator\">=</span> bricks<span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n            <span class=\"token comment\">// calculs</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Si le centre de la balle se trouve à l'intérieur des coordonnées d'une de nos briques, nous changerons la direction de la balle. Pour que le centre de la balle soit à l'intérieur de la brique, les quatre affirmations suivantes doivent être vraies :</p>\n<ul>\n  <li>La position x de la balle est supérieure à la position x de la brique.</li>\n  <li>La position x de la balle est inférieure à la position x de la brique plus sa largeur.</li>\n  <li>La position y de la balle est supérieure à la position y de la brique.</li>\n  <li>La position y de la balle est inférieure à la position y de la brique plus sa hauteur.</li>\n</ul>\n<p>Écrivons cela sous forme de code:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">collisionDetection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> c<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> c<span class=\"token operator\">&lt;</span>brickColumnCount<span class=\"token punctuation\">;</span> c<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> r<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> r<span class=\"token operator\">&lt;</span>brickRowCount<span class=\"token punctuation\">;</span> r<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">var</span> b <span class=\"token operator\">=</span> bricks<span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">&gt;</span> b<span class=\"token punctuation\">.</span>x <span class=\"token operator\">&amp;&amp;</span> x <span class=\"token operator\">&lt;</span> b<span class=\"token punctuation\">.</span>x<span class=\"token operator\">+</span>brickWidth <span class=\"token operator\">&amp;&amp;</span> y <span class=\"token operator\">&gt;</span> b<span class=\"token punctuation\">.</span>y <span class=\"token operator\">&amp;&amp;</span> y <span class=\"token operator\">&lt;</span> b<span class=\"token punctuation\">.</span>y<span class=\"token operator\">+</span>brickHeight<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                dy <span class=\"token operator\">=</span> <span class=\"token operator\">-</span>dy<span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Ajoutez le bloc ci-dessus à votre code, sous la fonction <code>keyUpHandler()</code> .</p>"}},{"type":"prose","value":{"id":"faire_disparaître_les_briques_après_quelles_aient_été_touchées","title":"Faire disparaître les briques après qu'elles aient été touchées","isH3":false,"content":"<p>Le code ci-dessus fonctionnera comme vous le souhaitez et la balle changera de direction. Le problème est que les briques restent là où elles sont. Nous devons trouver un moyen de nous débarrasser de celles que nous avons déjà touchées avec la balle. Nous pouvons le faire en ajoutant un paramètre supplémentaire pour indiquer si nous voulons ou non afficher chaque brique à l’écran. Dans la partie du code où nous initialisons les briques, ajoutons une propriété <code>status</code> à chaque brique. Mettez à jour la partie suivante du code comme indiqué par la ligne en évidence:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> bricks <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> c<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> c<span class=\"token operator\">&lt;</span>brickColumnCount<span class=\"token punctuation\">;</span> c<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    bricks<span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> r<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> r<span class=\"token operator\">&lt;</span>brickRowCount<span class=\"token punctuation\">;</span> r<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        bricks<span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">x</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">y</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">status</span><span class=\"token operator\">:</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Nous vérifierons ensuite la valeur de la propriété <code>status</code> de chaque brique dans la fonction <code>drawBricks``()</code> avant de la dessiner. Si <code>status</code> vaut <code>1</code>, dessinez-la, mais s'il vaut <code>0</code>, la balle a été touchée et nous ne voulons pas la voir sur l'écran. Mettez à jour votre fonction <code>drawBricks``()</code> comme suit:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">drawBricks</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> c<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> c<span class=\"token operator\">&lt;</span>brickColumnCount<span class=\"token punctuation\">;</span> c<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> r<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> r<span class=\"token operator\">&lt;</span>brickRowCount<span class=\"token punctuation\">;</span> r<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>bricks<span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>status <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">var</span> brickX <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>c<span class=\"token operator\">*</span><span class=\"token punctuation\">(</span>brickWidth<span class=\"token operator\">+</span>brickPadding<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span>brickOffsetLeft<span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">var</span> brickY <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>r<span class=\"token operator\">*</span><span class=\"token punctuation\">(</span>brickHeight<span class=\"token operator\">+</span>brickPadding<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span>brickOffsetTop<span class=\"token punctuation\">;</span>\n                bricks<span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> brickX<span class=\"token punctuation\">;</span>\n                bricks<span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>y <span class=\"token operator\">=</span> brickY<span class=\"token punctuation\">;</span>\n                ctx<span class=\"token punctuation\">.</span><span class=\"token function\">beginPath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                ctx<span class=\"token punctuation\">.</span><span class=\"token function\">rect</span><span class=\"token punctuation\">(</span>brickX<span class=\"token punctuation\">,</span> brickY<span class=\"token punctuation\">,</span> brickWidth<span class=\"token punctuation\">,</span> brickHeight<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                ctx<span class=\"token punctuation\">.</span>fillStyle <span class=\"token operator\">=</span> <span class=\"token string\">\"#0095DD\"</span><span class=\"token punctuation\">;</span>\n                ctx<span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                ctx<span class=\"token punctuation\">.</span><span class=\"token function\">closePath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"suivi_et_mise_à_jour_de_létat_dans_la_fonction_de_détection_de_collision","title":"Suivi et mise à jour de l'état dans la fonction de détection de collision","isH3":false,"content":"<p>Nous devons maintenant impliquer la propriété de <code>status</code> de brique dans la fonction <code>collisionDetection()</code>: si la brique est active (son statut est <code>1</code>), nous vérifierons si une collision a lieu ; Si une collision se produit, nous allons définir l'état de la brique donnée sur <code>0</code> afin qu'elle ne soit pas affichée à l'écran. Mettez à jour votre fonction <code>collisionDetection()</code> comme indiqué ci-dessous:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">collisionDetection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> c<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> c<span class=\"token operator\">&lt;</span>brickColumnCount<span class=\"token punctuation\">;</span> c<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> r<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> r<span class=\"token operator\">&lt;</span>brickRowCount<span class=\"token punctuation\">;</span> r<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">var</span> b <span class=\"token operator\">=</span> bricks<span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">.</span>status <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>x <span class=\"token operator\">&gt;</span> b<span class=\"token punctuation\">.</span>x <span class=\"token operator\">&amp;&amp;</span> x <span class=\"token operator\">&lt;</span> b<span class=\"token punctuation\">.</span>x<span class=\"token operator\">+</span>brickWidth <span class=\"token operator\">&amp;&amp;</span> y <span class=\"token operator\">&gt;</span> b<span class=\"token punctuation\">.</span>y <span class=\"token operator\">&amp;&amp;</span> y <span class=\"token operator\">&lt;</span> b<span class=\"token punctuation\">.</span>y<span class=\"token operator\">+</span>brickHeight<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    dy <span class=\"token operator\">=</span> <span class=\"token operator\">-</span>dy<span class=\"token punctuation\">;</span>\n                    b<span class=\"token punctuation\">.</span>status <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"activer_notre_détection_de_collision","title":"Activer notre détection de collision","isH3":false,"content":"<p>La dernière chose à faire est d’ajouter un appel à la fonction <code>collisionDetection ()</code> à notre fonction <code>draw()</code> principale. Ajoutez la ligne suivante à la fonction <code>draw ()</code>, juste en dessous de l'appel <code>drawPaddle()</code>:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token function\">collisionDetection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"comparez_votre_code","title":"Comparez votre code","isH3":false,"content":"<p>La détection de collision de la balle est maintenant vérifiée sur chaque image, avec chaque brique. Maintenant, nous pouvons détruire des briques ! : -</p><p><iframe allowfullscreen=\"allowfullscreen\" width=\"756\" height=\"395\" src=\"https://jsfiddle.net/yumetodo/mkwtxgc3/242/embedded/\" loading=\"lazy\"></iframe></p>\n<p>Exercice: changez la couleur de la balle lorsqu'elle frappe une brique.</p>"}},{"type":"prose","value":{"id":"prochaine_étape","title":"Prochaine étape","isH3":false,"content":"<p>Nous ne sommes plus très loin de la fin&nbsp;; poursuivons&nbsp;! Dans le huitième chapitre, nous verrons comment <a href=\"/en-US/docs/Games/Tutorials/2D_Breakout_game_pure_JavaScript/Track_the_score_and_win\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">Track the score and win (en-US)</a>.</p><ul class=\"prev-next\">\n    <li><a class=\"button minimal\" href=\"/fr/docs/Games/Tutorials/2D_Breakout_game_pure_JavaScript/Build_the_brick_field\">« Précédent</a></li>\n    <li><a class=\"button minimal\" href=\"/fr/docs/Games/Tutorials/2D_Breakout_game_pure_JavaScript/Track_the_score_and_win\">Suivant  »</a></li>\n</ul>"}}],"toc":[{"text":"Une fonction de détection de collision","id":"une_fonction_de_détection_de_collision"},{"text":"Faire disparaître les briques après qu'elles aient été touchées","id":"faire_disparaître_les_briques_après_quelles_aient_été_touchées"},{"text":"Suivi et mise à jour de l'état dans la fonction de détection de collision","id":"suivi_et_mise_à_jour_de_létat_dans_la_fonction_de_détection_de_collision"},{"text":"Activer notre détection de collision","id":"activer_notre_détection_de_collision"},{"text":"Comparez votre code","id":"comparez_votre_code"},{"text":"Prochaine étape","id":"prochaine_étape"}],"summary":"Il s'agit de la 7ème étape sur 10 du Gamedev Canvas tutorial (en-US). Vous pouvez trouver le code source tel qu'il devrait être après avoir complété cette leçon à : Gamedev-Canvas-workshop/lesson7.html.","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Collision detection","locale":"en-US","native":"English (US)"},{"title":"Detección de colisiones","locale":"es","native":"Español"},{"title":"衝突検出","locale":"ja","native":"日本語"},{"title":"충돌 감지","locale":"ko","native":"한국어"},{"title":"Обнаружение столкновений","locale":"ru","native":"Русский"},{"title":"撞击处理","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"fr/games/tutorials/2d_breakout_game_pure_javascript/collision_detection","github_url":"https://github.com/mdn/translated-content/blob/main/files/fr/games/tutorials/2d_breakout_game_pure_javascript/collision_detection/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/fr/docs/Games","title":"Développement de jeux vidéo"},{"uri":"/fr/docs/Games/Tutorials","title":"Workflows for different game types"},{"uri":"/fr/docs/Games/Tutorials/2D_Breakout_game_pure_JavaScript","title":"Jeu de casse-briques 2D en pur JavaScript"},{"uri":"/fr/docs/Games/Tutorials/2D_Breakout_game_pure_JavaScript/Collision_detection","title":"Détection de collisions"}],"pageTitle":"Détection de collisions - Développement de jeux vidéo | MDN","noIndexing":false}}