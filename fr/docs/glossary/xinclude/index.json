{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"XInclude","mdn_url":"/fr/docs/Glossary/XInclude","locale":"fr","native":"Français","sidebarHTML":"","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p><a href=\"https://www.w3.org/TR/xinclude/#text-included-items\" class=\"external\" rel=\" noopener\">XML Inclusions (XInclude)</a> est une recommandation du W3C pour permettre l'inclusion de différentes sources XML d'une manière plus pratique que les entités externes XML. Lorsqu'il est utilisé conjointement avec XPointer (Firefox prend en charge un sous-ensemble et est utilisé dans l'exemple de code ci-dessous), XInclude peut également cibler uniquement des portions spécifiques d'un document à inclure. Firefox ne le supporte pas nativement, mais la fonction suivante a pour but de permettre son utilisation avec les documents qui y sont passés.</p>"}},{"type":"prose","value":{"id":"exemple_de_code","title":"Exemple de code","isH3":true,"content":"<p>Le code suivant vise à inclure les balises &lt;xi: include&gt; et &lt;xi: fallback&gt; (les deux éléments du langage) avec tous les attributs de &lt;xi: include&gt; dans un document XML de manière à pouvoir être fusionnés dans un document XML unique.</p>\n<p>(Notez que ceci n'a pas été complètement testé pour toutes les circonstances et peut ne pas refléter complètement le comportement standard).</p>\n<p>Notez également que si vous souhaitez autoriser xml: base, vous aurez besoin de <a href=\"/fr/docs/Archive/Add-ons/Code_snippets/XML/base_function\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">xml:base function</a> et la ligne de démarrage <code>var href = ...</code> doit être :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> href <span class=\"token operator\">=</span> <span class=\"token function\">getXmlBaseLink</span> <span class=\"token punctuation\">(</span><span class=\"token comment\">/* XLink sans xml:base */</span> xinclude<span class=\"token punctuation\">.</span><span class=\"token function\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'href'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">/* Élément à interroger à partir de */</span> xinclude<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">resolveXIncludes</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">docu</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// http://www.w3.org/TR/xinclude/#xml-included-items</span>\n    <span class=\"token keyword\">var</span> xincludes <span class=\"token operator\">=</span> docu<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByTagNameNS</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://www.w3.org/2001/XInclude'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'include'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>xincludes<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>i<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> xincludes<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">var</span> xinclude <span class=\"token operator\">=</span> xincludes<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">var</span> href <span class=\"token operator\">=</span> xinclude<span class=\"token punctuation\">.</span><span class=\"token function\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'href'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">var</span> parse <span class=\"token operator\">=</span> xinclude<span class=\"token punctuation\">.</span><span class=\"token function\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'parse'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">var</span> xpointer <span class=\"token operator\">=</span> xinclude<span class=\"token punctuation\">.</span><span class=\"token function\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'xpointer'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">var</span> encoding <span class=\"token operator\">=</span> xinclude<span class=\"token punctuation\">.</span><span class=\"token function\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'encoding'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// par exemple, UTF-8 // \"text/xml or application/xml ou text/*+xml ou application/*+xml\" avant l'encodage (puis UTF-8)</span>\n            <span class=\"token keyword\">var</span> accept <span class=\"token operator\">=</span> xinclude<span class=\"token punctuation\">.</span><span class=\"token function\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'accept'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// header \"Accept: \"+x</span>\n            <span class=\"token keyword\">var</span> acceptLanguage <span class=\"token operator\">=</span> xinclude<span class=\"token punctuation\">.</span><span class=\"token function\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'accept-language'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// \"Accept-Language: \"+x</span>\n            <span class=\"token keyword\">var</span> xiFallback <span class=\"token operator\">=</span> xinclude<span class=\"token punctuation\">.</span><span class=\"token function\">getElementsByTagNameNS</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http://www.w3.org/2001/XInclude'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'fallback'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Un seul de ces enfants est autorisé</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>href <span class=\"token operator\">===</span> <span class=\"token string\">''</span> <span class=\"token operator\">||</span> href <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// Pointe sur le même document si vide (null est équivalent à une chaîne vide)</span>\n                href <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Défini pour l'uniformité des tests ci-dessous</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>parse <span class=\"token operator\">===</span> <span class=\"token string\">'xml'</span> <span class=\"token operator\">&amp;&amp;</span> xpointer <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Il doit y avoir un attribut XPointer présent si \"href\" est vide et l'</span>analyse est <span class=\"token string\">\"xml\"</span>'<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    retourne <span class=\"token boolean\">false</span> <span class=\"token punctuation\">(</span>faux<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>href<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">#$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> href<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">^#</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Les identifiants de fragment sont interdits dans un XInclude attribut \"href\"'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                retourne <span class=\"token boolean\">false</span> <span class=\"token punctuation\">(</span>faux<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token keyword\">var</span> j<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">var</span> xincludeParent <span class=\"token operator\">=</span> xinclude<span class=\"token punctuation\">.</span>parentNode<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n                netscape<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span>PrivilegeManager<span class=\"token punctuation\">.</span><span class=\"token function\">enablePrivilege</span><span class=\"token punctuation\">(</span><span class=\"token string\">'UniversalXPConnect UniversalBrowserRead'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Necessary with file:///-located files trying to reach external sites</span>\n                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>href <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    <span class=\"token keyword\">var</span> response<span class=\"token punctuation\">,</span> responseType<span class=\"token punctuation\">;</span>\n                    <span class=\"token keyword\">var</span> request <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    request<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'GET'</span><span class=\"token punctuation\">,</span> href<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    request<span class=\"token punctuation\">.</span><span class=\"token function\">setRequestHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">'If-Modified-Since'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Thu, 1 Jan 1970 00:00:00 GMT'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    request<span class=\"token punctuation\">.</span><span class=\"token function\">setRequestHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Cache-Control'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'no-cache'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>accept<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                        request<span class=\"token punctuation\">.</span><span class=\"token function\">setRequestHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Accept'</span><span class=\"token punctuation\">,</span> accept<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token punctuation\">}</span>\n                    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>acceptLanguage<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                        request<span class=\"token punctuation\">.</span><span class=\"token function\">setRequestHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Accept-Language'</span><span class=\"token punctuation\">,</span> acceptLanguage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token punctuation\">}</span>\n                    <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>parse<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                        <span class=\"token keyword\">case</span> <span class=\"token string\">'text'</span><span class=\"token operator\">:</span>\n                            <span class=\"token comment\">// La priorité devrait être sur le type de média :</span>\n\n                            <span class=\"token keyword\">var</span> contentType <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getResponseHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Content-Type'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n                            <span class=\"token comment\">//text/xml; charset=\"utf-8\" // Envoyer pour obtenir les en-têtes en premier?</span>\n                            <span class=\"token comment\">// Réparation : Nous testons également les extensions de fichiers dans le fichier en ce cas:// ne renvoie pas le type de contenu (comme cela semble être le cas); un autre outil peut-il être utilisé dans FF (ou IE) pour détecter l'encodage du fichier local ? Probablement juste besoin d'un test de nomenclature car d'autres codages doivent être spécifiés</span>\n                            <span class=\"token keyword\">var</span> patternXML <span class=\"token operator\">=</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.(svg|xml|xul|rdf|xhtml)$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">;</span>\n                            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>contentType <span class=\"token operator\">&amp;&amp;</span> contentType<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">[text|application]\\/(.*)\\+?xml</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>href<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span><span class=\"token string\">'file://'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> href<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>patternXML<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                                <span class=\"token comment\">/* Saisissez la réponse sous forme de texte (voir ci-dessous pour cette routine), puis recherchez le codage dans*/</span>\n                               <span class=\"token keyword\">var</span> encName <span class=\"token operator\">=</span> <span class=\"token string\">'([A-Za-z][A-Za-z0-9._-]*)'</span><span class=\"token punctuation\">;</span>\n                               <span class=\"token keyword\">var</span> pattern <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RegExp</span><span class=\"token punctuation\">(</span><span class=\"token string\">'^&lt;\\\\?xml\\\\s+.*encoding\\\\s*=\\\\s*([\\'\"])'</span><span class=\"token operator\">+</span>encName<span class=\"token operator\">+</span><span class=\"token string\">'\\\\1.*\\\\?&gt;'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Vérifiez le document si non ?</span>\n                               <span class=\"token comment\">// Laisser la demande être traitée ci-dessous</span>\n                            <span class=\"token punctuation\">}</span>\n                            <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                                <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>encoding <span class=\"token operator\">===</span> <span class=\"token string\">''</span> <span class=\"token operator\">||</span> encoding <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// Encoding n'a pas d'effet en XML</span>\n                                    encoding <span class=\"token operator\">=</span> <span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">;</span>\n                                <span class=\"token punctuation\">}</span>\n                                request<span class=\"token punctuation\">.</span><span class=\"token function\">overrideMimeType</span><span class=\"token punctuation\">(</span><span class=\"token string\">'text/plain; charset='</span><span class=\"token operator\">+</span>encoding<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//'x-user-defined'</span>\n                            <span class=\"token punctuation\">}</span>\n                            responseType <span class=\"token operator\">=</span> <span class=\"token string\">'responseText'</span><span class=\"token punctuation\">;</span>\n                            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n                        <span class=\"token keyword\">case</span> <span class=\"token keyword\">null</span><span class=\"token operator\">:</span>\n                        <span class=\"token keyword\">case</span> <span class=\"token string\">'xml'</span><span class=\"token operator\">:</span>\n                            responseType <span class=\"token operator\">=</span> <span class=\"token string\">'responseXML'</span><span class=\"token punctuation\">;</span>\n                            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n                        <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n                            <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'L'</span>élément XInclude contient une valeur d<span class=\"token string\">'attribut \"parse\" non valide'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                            retourne <span class=\"token boolean\">false</span> <span class=\"token punctuation\">(</span>faux<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                            <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token punctuation\">}</span>\n                    request<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>status <span class=\"token operator\">===</span> <span class=\"token number\">200</span> <span class=\"token operator\">||</span> request<span class=\"token punctuation\">.</span>status <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> request<span class=\"token punctuation\">[</span>responseType<span class=\"token punctuation\">]</span> <span class=\"token operator\">!==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                        response <span class=\"token operator\">=</span> request<span class=\"token punctuation\">[</span>responseType<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n                         <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>responseType <span class=\"token operator\">===</span> <span class=\"token string\">'responseXML'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                            <span class=\"token comment\">// applique xpointer (seul le sous-ensemble xpath1 () est supporté)</span>\n                            <span class=\"token keyword\">var</span> responseNodes<span class=\"token punctuation\">;</span>\n                            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>xpointer<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                                <span class=\"token keyword\">var</span> xpathResult <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">evaluate</span><span class=\"token punctuation\">(</span>\n                                                                 xpointer<span class=\"token punctuation\">,</span>\n                                                                 response<span class=\"token punctuation\">,</span>\n                                                                 <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span>\n                                                                 XPathResult<span class=\"token punctuation\">.</span><span class=\"token constant\">ORDERED_NODE_SNAPSHOT_TYPE</span><span class=\"token punctuation\">,</span>\n                                                                 <span class=\"token keyword\">null</span>\n                                                              <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                                <span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n                                <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> k <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> k <span class=\"token operator\">&lt;</span> xpathResult<span class=\"token punctuation\">.</span>snapshotLength<span class=\"token punctuation\">;</span> k<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                                a<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> xpathResult<span class=\"token punctuation\">.</span><span class=\"token function\">snapshotItem</span><span class=\"token punctuation\">(</span>k<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                                <span class=\"token punctuation\">}</span>\n                                responseNodes <span class=\"token operator\">=</span> a<span class=\"token punctuation\">;</span>\n                            <span class=\"token punctuation\">}</span>\n                            <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// sinon, la réponse doit être un seul document bien formé</span>\n                                responseNodes <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>response<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Mettre en tableau peut donc être traité de la même manière que ci-dessus</span>\n                            <span class=\"token punctuation\">}</span>\n                            <span class=\"token comment\">// PRÉPENDRE TOUT(S) NŒUD(S) (EN XML) PUIS SUPPRIMER XINCLUDE</span>\n                            <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>j<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;</span> responseNodes<span class=\"token punctuation\">.</span>length <span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                                xincludeParent<span class=\"token punctuation\">.</span><span class=\"token function\">insertBefore</span><span class=\"token punctuation\">(</span>responseNodes<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> xinclude<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                            <span class=\"token punctuation\">}</span>\n                            xincludeParent<span class=\"token punctuation\">.</span><span class=\"token function\">removeChild</span><span class=\"token punctuation\">(</span>xinclude<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                         <span class=\"token punctuation\">}</span>\n                         <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>responseType <span class=\"token operator\">===</span> <span class=\"token string\">'responseText'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                             <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>encName<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                                  <span class=\"token keyword\">var</span> encodingType <span class=\"token operator\">=</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>pattern<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                                  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>encodingType<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                                      encodingType <span class=\"token operator\">=</span> encodingType<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n                                  <span class=\"token punctuation\">}</span>\n                                  <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                                      encodingType <span class=\"token operator\">=</span> <span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">;</span>\n                                  <span class=\"token punctuation\">}</span>\n                                  <span class=\"token comment\">// Besoin de faire une toute nouvelle demande, apparemment ici il ne peut pas convertir l'encodage après l'avoir reçu (pour savoir ce que l'encodage était)</span>\n                                  <span class=\"token keyword\">var</span> request2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                                  request2<span class=\"token punctuation\">.</span><span class=\"token function\">overrideMimeType</span><span class=\"token punctuation\">(</span><span class=\"token string\">'text/plain; charset='</span><span class=\"token operator\">+</span>encodingType<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                                  request2<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'GET'</span><span class=\"token punctuation\">,</span> href<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                                  request2<span class=\"token punctuation\">.</span><span class=\"token function\">setRequestHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">'If-Modified-Since'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Thu, 1 Jan 1970 00:00:00 GMT'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                                  request2<span class=\"token punctuation\">.</span><span class=\"token function\">setRequestHeader</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Cache-Control'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'no-cache'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                                  request2<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                                  response <span class=\"token operator\">=</span> request2<span class=\"token punctuation\">[</span>responseType<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Mettre à jour la réponse pour le traitement}</span>\n\n                             <span class=\"token comment\">// REMPLACER XINCLUDE AVEC LA RÉPONSE TEXTE</span>\n                             <span class=\"token keyword\">var</span> textNode <span class=\"token operator\">=</span> docu<span class=\"token punctuation\">.</span><span class=\"token function\">createTextNode</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>                             xincludeParent<span class=\"token punctuation\">.</span><span class=\"token function\">replaceChild</span><span class=\"token punctuation\">(</span>textNode<span class=\"token punctuation\">,</span> xinclude<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                         <span class=\"token punctuation\">}</span>\n\n                        <span class=\"token comment\">// remplacer xinclude dans doc avec la réponse maintenant (en texte brut ou en XML)}</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// Utiliser xi:fallback si la récupération d'XInclude a échoué ci-dessus</span>\n                <span class=\"token keyword\">var</span> xiFallbackChildren <span class=\"token operator\">=</span> xiFallback<span class=\"token punctuation\">.</span>childNodes<span class=\"token punctuation\">;</span>\n                <span class=\"token comment\">// PRÉPENDRE TOUT NŒUD (S) PUIS SUPPRIMER XINCLUDE</span>\n                <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>j<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span> j <span class=\"token operator\">&lt;</span> xiFallbackChildren<span class=\"token punctuation\">.</span>length <span class=\"token punctuation\">;</span> j<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    xincludeParent<span class=\"token punctuation\">.</span><span class=\"token function\">insertBefore</span><span class=\"token punctuation\">(</span>xiFallbackChildren<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> xinclude<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token punctuation\">}</span>\n                xincludeParent<span class=\"token punctuation\">.</span><span class=\"token function\">removeChild</span><span class=\"token punctuation\">(</span>xinclude<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> docu<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}}],"toc":[],"summary":"XML Inclusions (XInclude) est une recommandation du W3C pour permettre l'inclusion de différentes sources XML d'une manière plus pratique que les entités externes XML. Lorsqu'il est utilisé conjointement avec XPointer (Firefox prend en charge un sous-ensemble et est utilisé dans l'exemple de code ci-dessous), XInclude peut également cibler uniquement des portions spécifiques d'un document à inclure. Firefox ne le supporte pas nativement, mais la fonction suivante a pour but de permettre son utilisation avec les documents qui y sont passés.","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"XInclude","locale":"en-US","native":"English (US)"},{"title":"XInclude","locale":"ja","native":"日本語"}],"source":{"folder":"fr/glossary/xinclude","github_url":"https://github.com/mdn/translated-content/blob/main/files/fr/glossary/xinclude/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/fr/docs/Glossary","title":"Glossaire MDN : définitions des termes du Web"},{"uri":"/fr/docs/Glossary/XInclude","title":"XInclude"}],"pageTitle":"XInclude - Glossaire MDN : définitions des termes du Web | MDN","noIndexing":false}}