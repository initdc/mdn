{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"CORS_habilitar_imagens","mdn_url":"/pt-BR/docs/Web/HTML/CORS_enabled_image","locale":"pt-BR","native":"Português (do Brasil)","sidebarHTML":"","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>The HTML specification introduces a <a href=\"/pt-BR/docs/Web/HTML/Element/img#attr-crossorigin\"><code>crossorigin</code></a> attribute for images that, in combination with an appropriate <a href=\"/pt-BR/docs/Glossary/CORS\">CORS</a> header, allows images defined by the <a href=\"/pt-BR/docs/Web/HTML/Element/img\"><code>&lt;img&gt;</code></a> element that are loaded from foreign origins to be used in canvas as if they were being loaded from the current origin.</p>\n<p>See <a href=\"/en-US/HTML/CORS_settings_attributes\">CORS settings attributes</a> for details on how the <code>crossorigin</code> attribute is used.</p>"}},{"type":"prose","value":{"id":"o_que_é_um_contaminado_canvas","title":"O que é um \"contaminado\" canvas?","isH3":false,"content":"<p>Embora você possa usar imagens sem aprovação do CORS em seu canvas, criando contaminação ao canvas. Uma vez o canvas tenhya sido \"contaminado\" você não pode mais \"puxar\" informações do canvas.Por exemplo, você pode não mais usar os métodos canvas toBlob(), toDataURL(), ou getImageData(), fazendo isto você irá lançar um erro de sergurança.</p>\n<p>Esta proteção de usuário tem tido dados expostos por uso de informações de imagens de site web remoto sem permissão.</p>"}},{"type":"prose","value":{"id":"exemplo_armazenando_uma_imagem_de_uma_origem_estrangeira","title":"Exemplo: Armazenando uma imagem de uma origem estrangeira","isH3":false,"content":"<p>Você precisa ter um servidor hospedando as imagenscom o apropriado Access-Control-Allow-Origin cabeçalho. Adicionando atributos crossOrigin faz uma requisição ao cabeçalho. Você pode usar este exemplo das <a href=\"https://github.com/h5bp/server-configs-apache/blob/fc379c45f52a09dd41279dbf4e60ae281110a5b0/src/.htaccess#L36-L53\" class=\"external\" rel=\" noopener\">Configurações Apache Server HTML5 Boilerplate</a> para aproximadamente responder com este cabeçalho de resposta.</p>\n<div class=\"code-example\"><pre class=\"brush: xml notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>IfModule</span> <span class=\"token attr-name\">mod_setenvif.c</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>IfModule</span> <span class=\"token attr-name\">mod_headers.c</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>FilesMatch</span> <span class=\"token attr-name\">\"\\.(cur|gif|ico|jpe?g|png|svgz?|webp)$\"</span><span class=\"token punctuation\">&gt;</span></span>\n            SetEnvIf Origin \":\" IS_CORS\n            Header set Access-Control-Allow-Origin \"*\" env=IS_CORS\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>FilesMatch</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>IfModule</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>IfModule</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<p>Dado que está tudo classificado, você permiti salvar àquelas imagens no <a href=\"/en-US/docs/Web/API/Web_Storage_API\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">Armazenamento DOM (en-US)</a></p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> img <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Image</span><span class=\"token punctuation\">,</span>\n    canvas <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"canvas\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    ctx <span class=\"token operator\">=</span> canvas<span class=\"token punctuation\">.</span><span class=\"token function\">getContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"2d\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    src <span class=\"token operator\">=</span> <span class=\"token string\">\"http://example.com/image\"</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// insert image url here</span>\n\nimg<span class=\"token punctuation\">.</span>crossOrigin <span class=\"token operator\">=</span> <span class=\"token string\">\"Anonymous\"</span><span class=\"token punctuation\">;</span>\n\nimg<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onload</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    canvas<span class=\"token punctuation\">.</span>width <span class=\"token operator\">=</span> img<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">;</span>\n    canvas<span class=\"token punctuation\">.</span>height <span class=\"token operator\">=</span> img<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">;</span>\n    ctx<span class=\"token punctuation\">.</span><span class=\"token function\">drawImage</span><span class=\"token punctuation\">(</span> img<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span> <span class=\"token string\">\"savedImageData\"</span><span class=\"token punctuation\">,</span> canvas<span class=\"token punctuation\">.</span><span class=\"token function\">toDataURL</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"image/png\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\nimg<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> src<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// make sure the load event fires for cached images too</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> img<span class=\"token punctuation\">.</span>complete <span class=\"token operator\">||</span> img<span class=\"token punctuation\">.</span>complete <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    img<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> <span class=\"token string\">\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==\"</span><span class=\"token punctuation\">;</span>\n    img<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> src<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"veja_também","title":"Veja também","isH3":false,"content":"<ul>\n  <li><a href=\"https://blog.chromium.org/2011/07/using-cross-domain-images-in-webgl-and.html\" class=\"external\" rel=\" noopener\">Usando imagens de Cross-domínio em WebGL e Chrome 13</a></li>\n  <li><a href=\"http://whatwg.org/html#attr-img-crossorigin\" class=\"external\" rel=\" noopener\">Especificações HTML - o atributo crossorigin</a></li>\n</ul>"}}],"toc":[{"text":"O que é um \"contaminado\" canvas?","id":"o_que_é_um_contaminado_canvas"},{"text":"Exemplo: Armazenando uma imagem de uma origem estrangeira","id":"exemplo_armazenando_uma_imagem_de_uma_origem_estrangeira"},{"text":"Veja também","id":"veja_também"}],"summary":"The HTML specification introduces a crossorigin attribute for images that, in combination with an appropriate CORS header, allows images defined by the <img> element that are loaded from foreign origins to be used in canvas as if they were being loaded from the current origin.","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Allowing cross-origin use of images and canvas","locale":"en-US","native":"English (US)"},{"title":"Imagen con CORS habilitado","locale":"es","native":"Español"},{"title":"Autoriser les images et canevas provenant d'autres origines","locale":"fr","native":"Français"},{"title":"画像とキャンバスをオリジン間で利用できるようにする","locale":"ja","native":"日本語"},{"title":"교차 출처 이미지와 캔버스 허용하기","locale":"ko","native":"한국어"},{"title":"Разрешение использования изображений из разных источников и canvas","locale":"ru","native":"Русский"},{"title":"启用了 CORS 的图片","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"pt-br/web/html/cors_enabled_image","github_url":"https://github.com/mdn/translated-content/blob/main/files/pt-br/web/html/cors_enabled_image/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/pt-BR/docs/Web","title":"Tecnologia Web para desenvolvedores"},{"uri":"/pt-BR/docs/Web/HTML","title":"HTML: Linguagem de Marcação de Hipertexto"},{"uri":"/pt-BR/docs/Web/HTML/CORS_enabled_image","title":"CORS_habilitar_imagens"}],"pageTitle":"CORS_habilitar_imagens - HTML: Linguagem de Marcação de Hipertexto | MDN","noIndexing":false}}