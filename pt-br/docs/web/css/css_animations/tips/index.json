{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"CSS Animations tips and tricks","mdn_url":"/pt-BR/docs/Web/CSS/CSS_Animations/Tips","locale":"pt-BR","native":"Português (do Brasil)","sidebarHTML":"","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>Animações CSS tornam possível fazer coisas incríveis com os elementos que compoem seus documentos e aplicativos. No entanto, existem coisas que você pode querer fazer que não são óbvias, ou jeitos espertos de fazer coisas que você pode não ter pensado de imediato. Esse artigo é uma coleção de dicas e truques que descobrimos que podem tornar seu trabalho mais fácil, incluindo como rodar uma animação parada novamente.</p>"}},{"type":"prose","value":{"id":"rode_uma_animação_novamente","title":"Rode uma animação novamente","isH3":false,"content":"<p>A especificação <a href=\"/pt-BR/docs/Web/CSS/CSS_Animations\">Animações CSS</a> não oferece um modo de rodar uma animação novamente. Não existe um método mágico <code>resetAnimation()</code> nos elementos, e você não pode nem mesmo apenas atribuir o <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/CSS/animation-play-state\"><code>animation-play-state</code> <small>(en-US)</small></a> do elemento para <code>\"running\"</code> de novo. Ao invés disso, você tem que usar macetes para fazer com que uma animação parada reexecute.</p>\n<p>Aqui está um modo de fazer o qual achamos estável e confiável o suficiente para sugerir à você.</p>"}},{"type":"prose","value":{"id":"conteúdo_html","title":"Conteúdo HTML","isH3":true,"content":"<p>Primeiro, vamos definir o HTML para uma <a href=\"/pt-BR/docs/Web/HTML/Element/div\"><code>&lt;div&gt;</code></a> que gostaríamos de animar e um botão que vai executar (ou reexecutar) a animação.</p>\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>box<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>runButton<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Clique em mim para rodar a animação<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"conteúdo_css","title":"Conteúdo CSS","isH3":true,"content":"<p>Agora vamos definir a animação em sí usando CSS. Algum CSS que não é importante (o estilo do botão \"Rodar\" em sí) não é mostrado aqui, por brevidade.</p>\n<div class=\"code-example\"><pre class=\"brush: css hidden notranslate\"><code><span class=\"token selector\">.runButton</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">cursor</span><span class=\"token punctuation\">:</span> pointer<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 300px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 1px solid black<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">font-size</span><span class=\"token punctuation\">:</span> 16px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">text-align</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">margin-top</span><span class=\"token punctuation\">:</span> 12px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">padding-top</span><span class=\"token punctuation\">:</span> 2px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">padding-bottom</span><span class=\"token punctuation\">:</span> 4px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> white<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> darkgreen<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">font</span><span class=\"token punctuation\">:</span> 14px <span class=\"token string\">\"Open Sans\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Arial\"</span><span class=\"token punctuation\">,</span> sans-serif<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<div class=\"code-example\"><pre class=\"brush: css notranslate\"><code><span class=\"token atrule\"><span class=\"token rule\">@keyframes</span> colorchange</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token selector\">0%</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> yellow <span class=\"token punctuation\">}</span>\n  <span class=\"token selector\">100%</span> <span class=\"token punctuation\">{</span> <span class=\"token property\">background</span><span class=\"token punctuation\">:</span> blue <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.box</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">height</span><span class=\"token punctuation\">:</span> 100px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 1px solid black<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.changing</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">animation</span><span class=\"token punctuation\">:</span> colorchange 2s<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Existem duas classes aqui. A classe \"<code>box</code>\" é a descrição básica da aparência da caixa, sem nenhuma informação de animação inclusa. Os detalhes da animação são incluídos na classe \"<code>changing</code>\", a qual diz que o <a href=\"/pt-BR/docs/Web/CSS/@keyframes\"><code>@keyframes</code></a> chamado <code>\"colorchange\"</code> deveria ser usado no decorrer de dois segundos para animar a caixa.</p>\n<p>Perceba que por isso a caixa não começa com nenhum efeito de animação configurado, então não será animada.</p>"}},{"type":"prose","value":{"id":"conteúdo_javascript","title":"Conteúdo JavaScript","isH3":true,"content":"<p>A seguir vamos olhar para o JavaScript que faz o trabalho. O macete dessa técnica está na função <code>play()</code> , a qual é chamada quando o usuário clica no botão de \"rodar\".</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">play</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".box\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>className <span class=\"token operator\">=</span> <span class=\"token string\">\"box\"</span><span class=\"token punctuation\">;</span>\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">time</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">time</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".box\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>className <span class=\"token operator\">=</span> <span class=\"token string\">\"box changing\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Isso parece esquisito, não parece? É porque a única maneira de executar uma animação novamente é removendo o efeito de animação, deixar o documento recomputar os estilos para que ele saiba que você fez isso, e então adicionar o efeito de animação de volta ao elemento. Para fazer isso acontecer temos que ser criativos.</p>\n<p>Aqui está o que acontece quando a função <code>play()</code> é chamada:</p>\n<ol>\n  <li>The box's list of CSS classes is reset to simply <code>\"box\"</code>. This has the effect of removing any other classes currently applied to the box, including the <code>\"changing\"</code> class that handles animation. In other words, we're removing the animation effect from the box. However, changes to the class list don't take effect until the style recomputation is complete and a refresh has occurred to reflect the change.</li>\n  <li>To be sure that the styles are recalculated, we use <a href=\"/pt-BR/docs/Web/API/Window/requestAnimationFrame\"><code>window.requestAnimationFrame()</code></a>, specifying a callback. Our callback gets executed just before the next repaint of the document. The problem for us is that because it's before the repaint, the style recomputation hasn't actually happened yet! So...</li>\n  <li>Our callback cleverly calls <code>requestAnimationFrame()</code> a second time! This time, the callback is run before the next repaint, which is after the style recomputation has occurred. This callback adds the <code>\"changing\"</code> class back onto the box, so that the repaint will start the animation once again.</li>\n</ol>\n<p>Claro, também precisamos adicionar um tratador de evento para o nosso botão de \"rodar\" para que ele de fato faça algo:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".runButton\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> play<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"resultado","title":"Resultado","isH3":true,"content":"<iframe class=\"sample-code-frame\" title=\"Rode uma animação novamente\" id=\"frame_run_an_animation_again\" width=\"320\" height=\"160\" src=\"https://yari-demos.prod.mdn.mozit.cloud/pt-BR/docs/Web/CSS/CSS_Animations/Tips/_sample_.run_an_animation_again.html\" loading=\"lazy\"></iframe>"}},{"type":"prose","value":{"id":"veja_também","title":"Veja também","isH3":false,"content":"<ul>\n  <li>Animações CSS</li>\n  <li>Usando Animações CSS</li>\n  <li><a href=\"/pt-BR/docs/Web/API/Window/requestAnimationFrame\"><code>Window.requestAnimationFrame()</code></a></li>\n</ul>"}}],"toc":[{"text":"Rode uma animação novamente","id":"rode_uma_animação_novamente"},{"text":"Veja também","id":"veja_também"}],"summary":"Animações CSS tornam possível fazer coisas incríveis com os elementos que compoem seus documentos e aplicativos. No entanto, existem coisas que você pode querer fazer que não são óbvias, ou jeitos espertos de fazer coisas que você pode não ter pensado de imediato. Esse artigo é uma coleção de dicas e truques que descobrimos que podem tornar seu trabalho mais fácil, incluindo como rodar uma animação parada novamente.","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"CSS Animations tips and tricks","locale":"en-US","native":"English (US)"},{"title":"Animaciones CSS tips y trucos","locale":"es","native":"Español"},{"title":"Trucs et astuces pour les animations CSS","locale":"fr","native":"Français"},{"title":"CSS アニメーションのヒントとコツ","locale":"ja","native":"日本語"},{"title":"CSS Animations tips and tricks","locale":"ru","native":"Русский"},{"title":"CSS Animations tips and tricks","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"pt-br/web/css/css_animations/tips","github_url":"https://github.com/mdn/translated-content/blob/main/files/pt-br/web/css/css_animations/tips/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/pt-BR/docs/Web","title":"Tecnologia Web para desenvolvedores"},{"uri":"/pt-BR/docs/Web/CSS","title":"CSS"},{"uri":"/pt-BR/docs/Web/CSS/CSS_Animations","title":"CSS Animations"},{"uri":"/pt-BR/docs/Web/CSS/CSS_Animations/Tips","title":"CSS Animations tips and tricks"}],"pageTitle":"CSS Animations tips and tricks - CSS | MDN","noIndexing":false}}