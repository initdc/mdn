<!DOCTYPE html><html lang="en-US" prefix="og: https://ogp.me/ns#"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="/favicon-48x48.97046865.png"><link rel="apple-touch-icon" href="/apple-touch-icon.0ea0fa02.png"><meta name="theme-color" content="#ffffff"><link rel="manifest" href="/manifest.56b1cedc.json"><link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="MDN Web Docs"><script>Array.prototype.flat&&Array.prototype.includes||document.write('<script src="https://polyfill.io/v3/polyfill.min.js?features=Array.prototype.flat%2Ces6"><\/script>')</script><title>Usando a Web Animations API - APIs da Web | MDN</title><link rel="preload" as="font" type="font/woff2" crossorigin="" href="/static/media/ZillaSlab-Bold.subset.0beac26b.woff2"><link rel="alternate" title="Usando a Web Animations API" href="https://developer.mozilla.org/pt-BR/docs/Web/API/Web_Animations_API/Using_the_Web_Animations_API" hreflang="pt"><link rel="alternate" title="Using the Web Animations API" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Animations_API/Using_the_Web_Animations_API" hreflang="zh"><link rel="alternate" title="Using the Web Animations API" href="https://developer.mozilla.org/ru/docs/Web/API/Web_Animations_API/Using_the_Web_Animations_API" hreflang="ru"><link rel="alternate" title="Web Animations API を利用する" href="https://developer.mozilla.org/ja/docs/Web/API/Web_Animations_API/Using_the_Web_Animations_API" hreflang="ja"><link rel="alternate" title="Using the Web Animations API" href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Animations_API/Using_the_Web_Animations_API" hreflang="en"><meta name="description" content="A Web Animations API nos possibilita criar animações e controlar sua reprodução pelo JavaScript. Esse artigo vai te demonstrar esses conceitos com demonstrações e tutoriais com o temática de Alice no País das Maravilhas."><meta property="og:url" content="https://developer.mozilla.org/pt-BR/docs/Web/API/Web_Animations_API/Using_the_Web_Animations_API"><meta property="og:title" content="Usando a Web Animations API - APIs da Web | MDN"><meta property="og:description" content="A Web Animations API nos possibilita criar animações e controlar sua reprodução pelo JavaScript. Esse artigo vai te demonstrar esses conceitos com demonstrações e tutoriais com o temática de Alice no País das Maravilhas."><meta property="og:locale" content="pt-BR"><meta property="og:image" content="https://developer.mozilla.org/mdn-social-share.0ca9dbda.png"><meta property="twitter:card" content="summary_large_image"><meta name="robots" content="index, follow"><link rel="canonical" href="https://developer.mozilla.org/pt-BR/docs/Web/API/Web_Animations_API/Using_the_Web_Animations_API"><style media="print">.breadcrumbs-container,.document-toc-container,.language-menu,.language-toggle,.on-github,.page-footer,.page-header-main,nav.sidebar,ul.prev-next{display:none!important}.main-page-content,.main-page-content pre{padding:2px}.main-page-content pre{border-left-width:2px}</style><link href="/static/css/main.55b68e13.chunk.css" rel="stylesheet"><script src="/static/js/runtime-main.4bb4c356.js" defer=""></script><script src="/static/js/4.a756dea3.chunk.js" defer=""></script><script src="/static/js/main.d4d565e0.chunk.js" defer=""></script></head><body><div id="root"><ul id="nav-access" class="a11y-nav"><li><a id="skip-main" href="#content">Skip to main content</a></li><li><a id="skip-search" href="#main-q">Skip to search</a></li><li><a id="skip-select-language" href="#select-language">Skip to select language</a></li></ul><div class="page-wrapper document-page"><header class="page-header"><a href="/pt-BR/" class="logo" aria-label="MDN Web Docs"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 451.74 135"><path d="M7.14 8.35v111.06h111.05V8.35zm103.71 56c-.48.92-1 1.79-1.46 2.71a3.44 3.44 0 01-3.54 2 2.4 2.4 0 00-1.55.5c-1.37.9-2.76 1.79-4.18 2.63a7.33 7.33 0 01-6.35.34 29.71 29.71 0 00-10.63-2 11.7 11.7 0 00-9.46 4.31 14.84 14.84 0 00-2.13 4.29c-1.24 3.07-2.3 21.38-2.3 26.05 0 0-17.62-3.42-34.15-20.34l4.31-11.32h-13.5l9.76-10.35h-16.8l9.77-10.34H12.69L30.45 34a40.9 40.9 0 0119.77-10.83c7.1-1.22 8.93-.53 13.31.77l2.43.73.85.25 3.1.95a12.56 12.56 0 006.21.09 11.37 11.37 0 018.25 1 8.24 8.24 0 014.1 6.22 7.29 7.29 0 003.61 5.49 59.45 59.45 0 009.32 4.11c2.27.86 4.54 1.84 6.79 2.72a6.81 6.81 0 012.86 2.06 4.81 4.81 0 011.1 2.73c.14 2 .37 4 .47 6a15.24 15.24 0 01-1.77 8.03zM320.12 39.62a5.42 5.42 0 00-4.53 2.13 7.36 7.36 0 00-1.7 4.43v2.36a6.28 6.28 0 001.7 4.46 5.63 5.63 0 004.3 1.82 5.12 5.12 0 004.57-2.27A9.7 9.7 0 00326 47a8.11 8.11 0 00-1.67-5.52 5.36 5.36 0 00-4.21-1.86zM387.38 39.53a5.52 5.52 0 00-4.7 2.15 8.8 8.8 0 00-1.63 5.49 9.23 9.23 0 001.58 5.45 5.38 5.38 0 004.7 2.25 5.61 5.61 0 004.74-2.2 8.91 8.91 0 001.68-5.59 8.24 8.24 0 00-1.75-5.52 5.76 5.76 0 00-4.62-2.03zM299.47 41.35a4.34 4.34 0 00-4-1.92 4.55 4.55 0 00-3.89 1.73 8.37 8.37 0 00-1.58 4.17h10.48a6.3 6.3 0 00-1.01-3.98zM357.74 30.75H352v23.31h5.72q5.47 0 8.35-3t2.93-8.65q0-5.43-2.88-8.55t-8.38-3.11z"></path><path d="M121.55 8.35v70.8h323V8.35zm42.21 22.45h-4V54h3.68v3.73h-11.25V54h3.31V36.79h-.19l-9.63 19.12h-2.12l-10-19.4h-.19V54h3.45v3.73h-11.15V54h3.68V30.8h-4v-3.73H133l11.66 22.56h.19l11.18-22.56h7.7zm29.12 22.67q-4.11 4.28-11.38 4.28h-14.06v-3.69h3.73V30.75h-3.73v-3.68h13.83q7.59 0 11.66 4.29a15.4 15.4 0 014 11 15.33 15.33 0 01-4.05 11.11zm38.89-22.67h-3.68v27h-2.6L208.08 35h-.19v19h4.67v3.73h-12.22V54h3.49V30.8h-4v-3.73h7.08l16.9 22.09h.19V30.8h-4.58v-3.73h12.32zm43.8 27h-3.31l-7.83-23.18h-.19l-7.55 23.18h-3.35l-8.78-27h-2.65v-3.73H253v3.73h-3.87L255 50.71h.23l6.61-19.91H259v-3.73h11v3.73h-2.78l6.61 20.1h.23l5.43-20.1h-4.15v-3.73h11v3.73h-2.54zm26.71-1.51a9.66 9.66 0 01-6.42 2 10.2 10.2 0 01-7.41-2.74c-1.89-1.82-2.83-4.47-2.83-7.93a12.37 12.37 0 012.64-8.12 9 9 0 017.32-3.21 8.62 8.62 0 016.75 2.69 9.65 9.65 0 012.45 6.52 13.67 13.67 0 01-.28 2.69H290q.29 6.71 6.18 6.7a5.2 5.2 0 003.71-1.18 5.82 5.82 0 001.67-2.83l3.45.71a7.21 7.21 0 01-2.73 4.65zm25.77-1.63c-1.51 2.4-3.92 3.61-7.22 3.61s-5.84-1.29-7.22-3.87c0 .25-.1.82-.21 1.7s-.19 1.44-.22 1.7H309c.16-1 .31-2 .47-3.07a21.42 21.42 0 00.24-3.16v-23h-3.4v-3.3h7.55V40.9a9.76 9.76 0 012.67-3.28 7.33 7.33 0 014.74-1.4 8.48 8.48 0 016.5 2.78q2.55 2.74 2.55 7.74a14.6 14.6 0 01-2.27 7.87zm41.39-1.14q-4.11 4.28-11.37 4.28H344v-3.74h3.73V30.75H344v-3.68h13.83q7.59 0 11.66 4.29a15.41 15.41 0 014.06 11 15.34 15.34 0 01-4.11 11.11zm25.65 1.68a10.53 10.53 0 01-7.9 3.07 10 10 0 01-7.63-3 10.93 10.93 0 01-2.8-7.83 12.13 12.13 0 012.69-7.93q2.69-3.3 8-3.3t8 3.28a12 12 0 012.64 7.76 10.86 10.86 0 01-3 7.9zm22.61.57c-1.4 1.66-3.63 2.5-6.68 2.5a9.58 9.58 0 01-7.15-2.76q-2.72-2.76-2.71-7.91a12.25 12.25 0 012.69-8 9.17 9.17 0 017.5-3.28 15 15 0 013.82.48 10.37 10.37 0 013.5 1.65l.85 5.47-3.35.38-.76-3.54a8.07 8.07 0 00-4.11-1 4.9 4.9 0 00-4.39 2.15 9.93 9.93 0 00-1.41 5.55 8.9 8.9 0 001.5 5.38 5.23 5.23 0 004.44 2c2.92 0 4.67-1.7 5.23-5.1l3.5.71a10.34 10.34 0 01-2.47 5.27zm20.48.75a11.68 11.68 0 01-6.63 1.75 15.52 15.52 0 01-8.26-2.08L424 51l3.26.33-.1 2.74a7 7 0 002.06.66 12.63 12.63 0 002.19.19 8.68 8.68 0 003.66-.75 2.5 2.5 0 001.63-2.36 2.25 2.25 0 00-1.32-2.2 12.65 12.65 0 00-3.28-1 47.39 47.39 0 01-3.9-.82 7.5 7.5 0 01-3.25-1.7 4.67 4.67 0 01-1.33-3.66c0-2.36.88-4 2.62-4.91a12 12 0 015.6-1.37 15 15 0 014.08.55 16.65 16.65 0 013.47 1.39l.47 5.1-3.3.37-.48-3.3a9.5 9.5 0 00-4.06-.9 5.62 5.62 0 00-2.87.66 2.33 2.33 0 00-1.15 2.25 2.13 2.13 0 001.3 2.07 11.91 11.91 0 003.21.92 36.69 36.69 0 013.82.83 7.46 7.46 0 013.21 1.74 4.9 4.9 0 011.3 3.73 5.56 5.56 0 01-2.66 4.91z"></path><path d="M181.17 30.75h-5.71v23.31h5.71q5.47 0 8.36-3t2.88-8.61q0-5.43-2.88-8.55t-8.36-3.15zM121.63 119.32V81.74h114.91v37.58zM153.22 109h-2v-6.85a4.8 4.8 0 00-1.58-4 5.57 5.57 0 00-3.55-1.26 5 5 0 00-4.92 3.26 4.19 4.19 0 00-1.88-2.46 5.82 5.82 0 00-3-.8 4.89 4.89 0 00-4.56 2.56v-2.21h-6.28v3.26h2v8.5h-2v3.23h9.11V109h-2.86v-5.25a4.4 4.4 0 01.69-2.56 2.47 2.47 0 012.21-1q2.57 0 2.56 3.63v8.41h6.29V109h-2v-5.25a4.47 4.47 0 01.67-2.56 2.42 2.42 0 012.19-1q2.63 0 2.63 3.63v8.41h6.28zm9.88-12.07q-4 0-6 2.36a8.41 8.41 0 00-2 5.66 7.25 7.25 0 002.17 5.62 8 8 0 005.65 2 8.54 8.54 0 005.94-2.11 7.27 7.27 0 002.34-5.67 8.21 8.21 0 00-2-5.51q-2.07-2.34-6.1-2.34zm-.1 12.35a3 3 0 01-2.63-1.33 5.68 5.68 0 01-.9-3.26 5 5 0 011-3.28 3.23 3.23 0 012.61-1.18 3.5 3.5 0 012.59 1.08 4.56 4.56 0 011.07 3.31 5.21 5.21 0 01-1 3.41 3.33 3.33 0 01-2.74 1.25zm25-2.3l-3.39-.29-.7 2.32H179l8.32-9.54-.32-2.23h-13.19l-.53 5.25 3.16.34.67-2.36h4.65l-8.25 9.53.44 2.26h13.13zm7.62-9.74h-4.46v5.39h4.46zm0 9.61h-4.46v5.39h4.46zm13.54-17.49h-4.23l-6.48 22.88h4.22zm8.68 0h-4.23l-6.45 22.88h4.19zm15 22.51l-.07-2.26a1.22 1.22 0 01-.56.1c-.69 0-1-.39-1-1.16v-6.49a4.39 4.39 0 00-1.8-3.84 7 7 0 00-4.16-1.28 14.55 14.55 0 00-3.16.3 24.14 24.14 0 00-3.29 1.06l-.56 3.46 3.39.4.5-1.69a2.78 2.78 0 011.08-.37 11.3 11.3 0 011.25-.07c1.19 0 1.89.37 2.09 1.1a8.55 8.55 0 01.3 2.26v.5a8.91 8.91 0 00-1.18-.11h-1.21a12.64 12.64 0 00-4.81.88 3.53 3.53 0 00-2.18 3.64 3.66 3.66 0 001.48 3.33 5.63 5.63 0 003.11 1 4.67 4.67 0 003-.91 6.78 6.78 0 001.8-2 3 3 0 003.33 3 5.54 5.54 0 002.66-.85zm-9.25-2.32a1.69 1.69 0 01-1.36-.52 1.81 1.81 0 01-.43-1.21 1.67 1.67 0 01.86-1.68 4.63 4.63 0 012-.42 7.69 7.69 0 011.07.07l1.06.13a3.58 3.58 0 01-1.08 2.74 3.24 3.24 0 01-2.11.89z"></path></svg></a><button type="button" class="ghost main-menu-toggle" aria-haspopup="true" aria-label="Show Menu"></button><div class="page-header-main "><nav class="main-nav" aria-label="Main menu"><ul class="main-menu nojs"><li class="top-level-entry-container"><button id="technologies-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">Technologies</button><ul class="technologies " role="menu" aria-labelledby="technologies-button"><li role="none"><a tabindex="-1" href="/pt-BR/docs/Web" role="menuitem">Technologies Overview</a></li><li role="none"><a tabindex="-1" href="/pt-BR/docs/Web/HTML" role="menuitem">HTML</a></li><li role="none"><a tabindex="-1" href="/pt-BR/docs/Web/CSS" role="menuitem">CSS</a></li><li role="none"><a tabindex="-1" href="/pt-BR/docs/Web/JavaScript" role="menuitem">JavaScript</a></li><li role="none"><a tabindex="-1" href="/pt-BR/docs/Web/Guide/Graphics" role="menuitem">Graphics</a></li><li role="none"><a tabindex="-1" href="/pt-BR/docs/Web/HTTP" role="menuitem">HTTP</a></li><li role="none"><a tabindex="-1" href="/pt-BR/docs/Web/API" role="menuitem">APIs</a></li><li role="none"><a tabindex="-1" href="/pt-BR/docs/Mozilla/Add-ons/WebExtensions" role="menuitem">Browser Extensions</a></li><li role="none"><a tabindex="-1" href="/pt-BR/docs/Web/MathML" role="menuitem">MathML</a></li></ul></li><li class="top-level-entry-container"><button id="references-guides-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">References &amp; Guides</button><ul class="references-guides " role="menu" aria-labelledby="references-guides-button"><li role="none"><a tabindex="-1" href="/pt-BR/docs/Learn" role="menuitem">Learn web development</a></li><li role="none"><a tabindex="-1" href="/pt-BR/docs/Web/Tutorials" role="menuitem">Tutorials</a></li><li role="none"><a tabindex="-1" href="/pt-BR/docs/Web/Reference" role="menuitem">References</a></li><li role="none"><a tabindex="-1" href="/pt-BR/docs/Web/Guide" role="menuitem">Developer Guides</a></li><li role="none"><a tabindex="-1" href="/pt-BR/docs/Web/Accessibility" role="menuitem">Accessibility</a></li><li role="none"><a tabindex="-1" href="/pt-BR/docs/Games" role="menuitem">Game development</a></li><li role="none"><a tabindex="-1" href="/pt-BR/docs/Web" role="menuitem">...more docs</a></li></ul></li><li class="top-level-entry-container"><button id="feedback-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">Feedback</button><ul class="feedback " role="menu" aria-labelledby="feedback-button"><li role="none"><a tabindex="-1" href="/pt-BR/docs/MDN/Contribute/Feedback" role="menuitem">Send Feedback</a></li><li role="none"><a tabindex="-1" href="/pt-BR/docs/MDN/Contribute" role="menuitem">Contribute to MDN</a></li><li role="none"><a tabindex="-1" target="_blank" rel="noopener noreferrer" href="https://github.com/mdn/content/issues/new" role="menuitem">Report a content issue<!-- --> 🌐</a></li><li role="none"><a tabindex="-1" target="_blank" rel="noopener noreferrer" href="https://github.com/mdn/yari/issues/new" role="menuitem">Report a platform issue<!-- --> 🌐</a></li></ul></li></ul></nav><div class="header-search"><form action="/pt-BR/search" class="search-form search-widget" role="search"><label for="main-q" class="visually-hidden">Search MDN</label><input type="search" name="q" id="main-q" class="search-input-field" placeholder="Site search... (Press &quot;/&quot; to focus)" pattern="(.|\s)*\S(.|\s)*" required="" value=""><input type="submit" class="ghost search-button" value="" aria-label="Search"></form></div><div class="auth-container"></div></div></header><div class="breadcrumb-locale-container"><nav class="breadcrumbs-container" aria-label="Breadcrumb navigation"><ol typeof="BreadcrumbList" vocab="https://schema.org/" aria-label="breadcrumbs"><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="/pt-BR/docs/Web"><span property="name">Tecnologia Web para desenvolvedores</span></a><meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="/pt-BR/docs/Web/API"><span property="name">APIs da Web</span></a><meta property="position" content="2"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb-penultimate" property="item" typeof="WebPage" href="/pt-BR/docs/Web/API/Web_Animations_API"><span property="name">Web Animations API</span></a><meta property="position" content="3"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb-current-page" property="item" typeof="WebPage" href="/pt-BR/docs/Web/API/Web_Animations_API/Using_the_Web_Animations_API"><span property="name">Usando a Web Animations API</span></a><meta property="position" content="4"></li></ol></nav><ul class="language-toggle"><li><a href="#select-language" class="language-icon"><span class="show-desktop">Change language</span></a></li><li><a class="view-in-english" href="/en-US/docs/Web/API/Web_Animations_API/Using_the_Web_Animations_API"><span class="show-desktop">View in</span> English</a></li></ul></div><div class="localized-content-note notecard inline neutral"><a href="/en-US/docs/MDN/Contribute/Localize#active_locales">This page was translated from English by the community. Learn more and join the MDN Web Docs community.</a></div><aside class="document-toc-container"><section class="document-toc"><header><h2>Table of contents</h2><button type="button" class="ghost toc-trigger-mobile" aria-controls="toc-entries" aria-expanded="false">Table of contents</button></header><ul id="toc-entries"><li><a href="#conhecendo_a_web_animations_api">Conhecendo a Web Animations API</a></li><li><a href="#suporte_de_navegadores">Suporte de Navegadores</a></li><li><a href="#escrevendo_animações_css_com_a_web_animations_api">Escrevendo Animações CSS com a Web Animations API</a></li><li><a href="#controlando_a_reprodução_com_play_pause_reverse_e_updateplaybackrate">Controlando a reprodução com play(), pause(), reverse() e updatePlaybackRate()</a></li><li><a href="#extraindo_informação_das_animações">Extraindo informação das animações</a></li><li><a href="#callbacks_e_promises">Callbacks e promises</a></li><li><a href="#conclusão">Conclusão</a></li><li><a href="#veja_também">Veja também</a></li></ul></section></aside><main id="content" class="main-content" role="main"><article class="main-page-content" lang="pt-BR"><h1>Usando a Web Animations API</h1><div><p>A Web Animations API nos possibilita criar animações e controlar sua reprodução pelo JavaScript. Esse artigo vai te demonstrar esses conceitos com demonstrações e tutoriais com o temática de Alice no País das Maravilhas.</p></div><h2 id="conhecendo_a_web_animations_api"><a href="#conhecendo_a_web_animations_api" title="Permalink to Conhecendo a Web Animations API">Conhecendo a Web Animations API</a></h2><div><p>A <a href="/pt-BR/docs/Web/API/Web_Animations_API">Web Animations API</a> abre a engine de animação do browser para os desenvolvedores manipularem via JavaScript. Esta API foi construída para se basear nas implementações das <a href="/pt-BR/docs/Web/CSS/CSS_Animations">Animações CSS</a> e <a href="/pt-BR/docs/Web/CSS/CSS_Transitions">Transições CSS</a>, e deixam a porta aberta para futuros efeitos de animação. É um dos métodos mais performáticos para se animar na Web, permitindo que o browser faça internamente suas próprias otimizações, sem precisar depender de hacks, coerções ou <a href="/pt-BR/docs/Web/API/Window/requestAnimationFrame"><code>Window.requestAnimationFrame()</code></a>.</p>
<p>Com a Web Animations API, podemos transferir as animações interativas das folhas de estilo para o JavaScript, separando comportamento de apresentação. Não vamos precisar mais depender de técnicas muito dependentes do DOM como propriedades do CSS e escopo de classes para controlar a direção da reprodução. E diferente de CSS puro e declarativo, JavaScript também te possibilita definir dinâmicamente valores: de propriedades à duração. Para criar bibilotecas de animação à criar animações interativas, a Web Animations API pode ser a ferramenta perfeita para o trabalho. Vamos ver o que ela pode fazer!</p></div><h2 id="suporte_de_navegadores"><a href="#suporte_de_navegadores" title="Permalink to Suporte de Navegadores">Suporte de Navegadores</a></h2><div><p>O suporte básico para as funcionalidades da Web Animations API discutidas neste artigo estão disponíveis no Firefox 48+, Chrome 36+ e Safari 13.1+. Também existe um <a href="https://github.com/web-animations/web-animations-js" class="external" rel=" noopener">polyfill prático</a> que verifica o suporte e adiciona as funcionalidades onde for necessário.</p></div><h2 id="escrevendo_animações_css_com_a_web_animations_api"><a href="#escrevendo_animações_css_com_a_web_animations_api" title="Permalink to Escrevendo Animações CSS com a Web Animations API">Escrevendo Animações CSS com a Web Animations API</a></h2><div><p>Uma das maneiras mais familiares de abordar a Web Animations API é começar com algo que boa parte dos desenvolvedores web já utilizaram antes: Animações CSS. Animações CSS tem uma sintaxe familiar que funciona bem para nossa demonstração.</p></div><h3 id="a_versão_css"><a href="#a_versão_css" title="Permalink to A versão CSS">A versão CSS</a></h3><div><p>Aqui temos uma animação escrita com CSS mostrando Alice caindo no buraco de coelho que leva ao País das Maravilhas (veja o <a href="https://codepen.io/rachelnabors/pen/QyOqqW" class="external" rel=" noopener">código completo no Codepen</a>):</p>
<p><a href="https://codepen.io/rachelnabors/pen/rxpmJL" class="external" rel=" noopener"><img src="https://mdn.mozillademos.org/files/13843/tumbling-alice_optimized.gif" alt="Alice Tumbling down the rabbit's hole." loading="lazy"></a></p>
<p>Perceba que o fundo se mexe, a Alice gira e sua cor muda em sincronia com o giro. Nós vamos focar somente na Alice para este tutorial. Segue a versão simplificada do CSS que controla a animação da Alice:</p>
<div class="code-example"><pre class="brush: css notranslate"><code><span class="token selector">#alice</span> <span class="token punctuation">{</span>
  <span class="token property">animation</span><span class="token punctuation">:</span> aliceTumbling infinite 3s linear<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token atrule"><span class="token rule">@keyframes</span> aliceTumbling</span> <span class="token punctuation">{</span>
  <span class="token selector">0%</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span> <span class="token function">translate3D</span><span class="token punctuation">(</span>-50%<span class="token punctuation">,</span> -50%<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">30%</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #431236<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">100%</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #000<span class="token punctuation">;</span>
    <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span>360deg<span class="token punctuation">)</span> <span class="token function">translate3D</span><span class="token punctuation">(</span>-50%<span class="token punctuation">,</span> -50%<span class="token punctuation">,</span> 0<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>Isso muda a cor da Alice e a rotação do <code>transform</code> por 3 segundos em um ritmo constante (linear) e se repete infinitamente. No bloco do <a href="/pt-BR/docs/Web/CSS/@keyframes">@keyframes</a> podemos ver que em 30% de cada repetição (por volta dos 900ms), a cor da Alice muda de preto para um vinho, e volta para o preto no final do loop.</p></div><h3 id="mudando_para_o_javascript"><a href="#mudando_para_o_javascript" title="Permalink to Mudando para o JavaScript">Mudando para o JavaScript</a></h3><div><p>Agora vamos tentar criar a mesma animação usando a Web Animations API.</p>
<h4 id="representando_keyframes">Representando keyframes</h4>
<p>A primeira coisa que precisamos fazer é criar um <a href="/en-US/docs/Web/API/Web_Animations_API/Keyframe_Formats" class="only-in-en-us" title="Currently only available in English (US)">Objeto Keyframe (en-US)</a> correspondente ao nosso bloco <a href="/pt-BR/docs/Web/CSS/@keyframes">@keyframes</a> do CSS:</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">var</span> aliceTumbling <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">transform</span><span class="token operator">:</span> <span class="token string">'rotate(0) translate3D(-50%, -50%, 0)'</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'#000'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'#431236'</span><span class="token punctuation">,</span> <span class="token literal-property property">offset</span><span class="token operator">:</span> <span class="token number">0.3</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">transform</span><span class="token operator">:</span> <span class="token string">'rotate(360deg) translate3D(-50%, -50%, 0)'</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'#000'</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Aqui estávamos utilizando uma array contendo múltiplos objetos. Cada objeto representa uma chave do CSS original. Contudo, diferente do CSS, a Web Animations API não precisa informar explicitamente as porcentagens temporais para cada chave, o JS automaticamente divide a animação em partes iguais baseado no número de chaves que você forneceu. Isso significa que um objeto Keyframe com três chaves vai reproduzir a chave do meio em 50% do tempo de cada loop, exceto se for definido o contrário.</p>
<p>Quando queremos explicitamente definir um timing diferente para essas outras chaves, podemos especificar um offset diretamente no objeto, separado do resto da declaração por uma vírgula. No exemplo acima, para definir que a cor da Alice muda em 30% do tempo (e não 50%), nós definiremos como <code>offset: 0.3</code>.</p>
<p>Atualmente, devem ser definidos pelo menos dois keyframes (representando o início e fim de estado das sequências de animação). Se a sua lista de keyframes somente tem uma entrada, <a href="/pt-BR/docs/Web/API/Element/animate"><code>Element.animate()</code></a> pode disparar uma exceção <code>NotSupportedErro</code> em alguns browsers até eles serem atualizados.</p>
<p>Então recapitulando: as chaves são espaçadas igualmente por padrão, exceto se você definir um offset para uma chave. Útil, não?</p>
<h4 id="representando_propriedades_temporais">Representando propriedades temporais</h4>
<p>Nós precisamos criar também um objeto de propriedades temporais (um objeto <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/KeyframeEffect/KeyframeEffect"><code>AnimationEffectTimingProperties</code> <small>(en-US)</small></a>) correspondente aos valores da animação da Alice:</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">var</span> aliceTiming <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
  <span class="token literal-property property">iterations</span><span class="token operator">:</span> <span class="token number">Infinity</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>Você pode notar algumas diferenças aqui comparando com os valores equivalentes representados no CSS:</p>
<ul>
  <li>A propriedade <code>duration</code> está em milisegundos (<code>3000</code>, não <code>3s</code>). Assim como <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/setTimeout"><code>WindowTimers.setTimeout()</code> <small>(en-US)</small></a> e <a href="/pt-BR/docs/Web/API/Window/requestAnimationFrame"><code>Window.requestAnimationFrame()</code></a>, a Web Animations API somente aceita millisegundos.</li>
  <li>A outra diferença é o uso de <code>iterations</code> no lugar de <code>iteration-count</code>.</li>
</ul>
<blockquote>
  <p><strong>Nota:</strong> Existem algumas pequenas diferenças de terminologia entre o CSS Animations e o Web Animations. Por exemplo, Web Animations não usa a string <code>"infinite"</code>, e sim a keyword JavaScript <code>Infinity</code>. E no lugar de <code>timing-function</code>, usamos <code>easing</code>. Não estamos citando um valor de <code>easing</code> aqui pois, diferente das Animações CSS onde o valor padrão do <a href="/en-US/docs/Web/CSS/animation-timing-function" class="only-in-en-us" title="Currently only available in English (US)">animation-timing-function (en-US)</a> é <code>ease</code>, na Web Animations API o padrão é <code>linear</code> — o que nós já queremos para a animação da Alice.</p>
</blockquote>
<h4 id="juntando_as_peças">Juntando as peças</h4>
<p>Agora vamos juntar o que já fizemos com o método <a href="/pt-BR/docs/Web/API/Element/animate"><code>Element.animate()</code></a>:</p>
<div class="code-example"><pre class="brush: js notranslate"><code>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"alice"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span>
  aliceTumbling<span class="token punctuation">,</span>
  aliceTiming
<span class="token punctuation">)</span>
</code></pre></div>
<p>E pronto: a animação começa a tocar (veja a <a href="https://codepen.io/rachelnabors/pen/rxpmJL" class="external" rel=" noopener">versão final no Codepen</a>).</p>
<p>O método <code>animate()</code> pode ser chamado em qualquer elemento do DOM que pode ser animado com CSS. E pode ser escrito de algumas maneiras. Ao invés de criar objetos para os keyframes e propriedades temporais, podemos passar seus valores diretamentes, tipo:</p>
<div class="code-example"><pre class="brush: js notranslate"><code>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"alice"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span>
  <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">transform</span><span class="token operator">:</span> <span class="token string">'rotate(0) translate3D(-50%, -50%, 0)'</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'#000'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'#431236'</span><span class="token punctuation">,</span> <span class="token literal-property property">offset</span><span class="token operator">:</span> <span class="token number">0.3</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">transform</span><span class="token operator">:</span> <span class="token string">'rotate(360deg) translate3D(-50%, -50%, 0)'</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'#000'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
    <span class="token literal-property property">iterations</span><span class="token operator">:</span> <span class="token number">Infinity</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>E se nós precisarmos somente especificar a duração da animação e não suas iterações (por padrão, a animação roda uma ), podemos passar só os milisegundos após o array:</p>
<div class="code-example"><pre class="brush: js notranslate"><code>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"alice"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span>
  <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">transform</span><span class="token operator">:</span> <span class="token string">'rotate(0) translate3D(-50%, -50%, 0)'</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'#000'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'#431236'</span><span class="token punctuation">,</span> <span class="token literal-property property">offset</span><span class="token operator">:</span> <span class="token number">0.3</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">transform</span><span class="token operator">:</span> <span class="token string">'rotate(360deg) translate3D(-50%, -50%, 0)'</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'#000'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div><h2 id="controlando_a_reprodução_com_play_pause_reverse_e_updateplaybackrate"><a href="#controlando_a_reprodução_com_play_pause_reverse_e_updateplaybackrate" title="Permalink to Controlando a reprodução com play(), pause(), reverse() e updatePlaybackRate()">Controlando a reprodução com play(), pause(), reverse() e updatePlaybackRate()</a></h2><div><p>Por mais que possamos escrever Animações CSS utilizando a Web Animations API, a API realmente mostra seu potencial quando precisamos manipular a reprodução da animação. A Web Animations API fornece vários métodos úteis para controlar a reprodução. Vamos dar uma olhada em como pausar e tocar animações no jogo da Alice Crescendo/Encolhendo (confira o <a href="https://codepen.io/rachelnabors/pen/PNYGZQ" class="external" rel=" noopener">código completo no Codepen</a>):</p>
<p><a href="https://codepen.io/rachelnabors/pen/PNYGZQ?editors=0010" class="external" rel=" noopener"><img src="https://mdn.mozillademos.org/files/13845/growing-shrinking_article_optimized.gif" alt="Playing the growing and shrinking game with Alice." loading="lazy"></a></p>
<p>Nesse jogo, Alice tem uma animação que a encolhe ou aumenta seu tamanho, que controlamos por uma garrafa e um cupcake. Cada um tem sua própria animação.</p></div><h3 id="pausando_e_tocando_animações"><a href="#pausando_e_tocando_animações" title="Permalink to Pausando e tocando animações">Pausando e tocando animações</a></h3><div><p>Vamos falar sobre a animação da Alice depois, mas por enquanto, vamos dissecar esta animação do cupcake.</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">var</span> nommingCake <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'eat-me_sprite'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span>
<span class="token punctuation">[</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">transform</span><span class="token operator">:</span> <span class="token string">'translateY(0)'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">transform</span><span class="token operator">:</span> <span class="token string">'translateY(-80%)'</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">fill</span><span class="token operator">:</span> <span class="token string">'forwards'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">easing</span><span class="token operator">:</span> <span class="token string">'steps(4, end)'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">duration</span><span class="token operator">:</span> aliceChange<span class="token punctuation">.</span>effect<span class="token punctuation">.</span>timing<span class="token punctuation">.</span>duration <span class="token operator">/</span> <span class="token number">2</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>O método <a href="/pt-BR/docs/Web/API/Element/animate"><code>Element.animate()</code></a> vai rodar imediatamente depois de ser chamado. Para evitar que o bolinho se coma sozinho antes da interação do usuário, chamamos o <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/Animation/pause"><code>Animation.pause()</code> <small>(en-US)</small></a> imediatamente depois de criar a animação:</p>
<div class="code-example"><pre class="brush: js notranslate"><code>nommingCake<span class="token punctuation">.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Agora nós podemos usar o método <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/Animation/play"><code>Animation.play()</code> <small>(en-US)</small></a> para rodar assim que for o momento:</p>
<div class="code-example"><pre class="brush: js notranslate"><code>nommingCake<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Especificamente, nós queremos linka-lo à animação da Alice, para ela crescer assim que o cupcake é mordido. Podemos fazer isso com a seguinte função:</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">var</span> <span class="token function-variable function">growAlice</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token comment">// Play Alice's animation.</span>
  aliceChange<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Play the cake's animation.</span>
  nommingCake<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div>
<p>Quando o usuário clicar ou pressionar seu dedo no bolinho em uma tela de toque, podemos chamar a função <code>growAlice</code> para fazer todas as animações tocarem:</p>
<div class="code-example"><pre class="brush: js notranslate"><code>cake<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"mousedown"</span><span class="token punctuation">,</span> growAlice<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
cake<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"touchstart"</span><span class="token punctuation">,</span> growAlice<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div><h3 id="outros_métodos_úteis"><a href="#outros_métodos_úteis" title="Permalink to Outros métodos úteis">Outros métodos úteis</a></h3><div><ul>
  <li><a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/Animation/finish"><code>Animation.finish()</code> <small>(en-US)</small></a> pula para o final da animação.</li>
  <li><a href="/pt-BR/docs/Web/API/Animation/cancel"><code>Animation.cancel()</code></a> aborta a animação e cancela seus efeitos.</li>
  <li><a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/Animation/reverse"><code>Animation.reverse()</code> <small>(en-US)</small></a> define o (<a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/Animation/playbackRate"><code>Animation.playbackRate</code> <small>(en-US)</small></a>) para um valor negativo, então roda ao contrário</li>
</ul>
<p>Vamos dar uma olhada primeiro no método <code>playbackRate</code> — um valor negativo vai fazer a animação tocar ao contrário. Quando Alice bebe da garrafa, ela encolhe. Isso porque a garrafa muda o <code>playbackRate</code> da animação de 1 para -1:</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">var</span> <span class="token function-variable function">shrinkAlice</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  aliceChange<span class="token punctuation">.</span>playbackRate <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
  aliceChange<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

bottle<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"mousedown"</span><span class="token punctuation">,</span> shrinkAlice<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bottle<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"touchstart"</span><span class="token punctuation">,</span> shrinkAlice<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Em <a href="https://en.wikipedia.org/wiki/Through_the_Looking-Glass" class="external" rel=" noopener">Alice Através do Espelho</a>, Alice viaja para um mundo onde ela deve correr para se manter no lugar — e correr com o dobro de velocidade para avançar! No exemplo da Corrida da Rainha Vermelha, Alice e a Rainha Vermelha estão correndo para se manter no lugar (veja o <a href="https://codepen.io/rachelnabors/pen/PNGGaV" class="external" rel=" noopener">código completo no Codepen</a>):</p>
<p><a href="https://codepen.io/rachelnabors/pen/PNGGaV" class="external" rel=" noopener"><img src="https://mdn.mozillademos.org/files/13847/red-queen-race_optimized.gif" alt="Alice and the Red Queen race to get to the next square in this game." loading="lazy"></a></p>
<p>Já que crianças pequenas se cansam facilmente, diferente de peças de xadrez autônomas, Alice está constantemente desacelerando. Nós podemos fazer isso definindo uma queda no <code>playbackRate</code> da animação dela. Usamos o <code>updatePlaybackRate()</code> no lugar de definir manualmente o playbackRate, já que isso produz uma atualização mais suave:</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token function">setInterval</span><span class="token punctuation">(</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token comment">// Make sure the playback rate never falls below .4</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>redQueen_alice<span class="token punctuation">.</span>playbackRate <span class="token operator">&gt;</span> <span class="token number">.4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    redQueen_alice<span class="token punctuation">.</span><span class="token function">updatePlaybackRate</span><span class="token punctuation">(</span>redQueen_alice<span class="token punctuation">.</span>playbackRate <span class="token operator">*</span> <span class="token number">.9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Mas impulsioná-las clicando ou tocando na tela aumenta a velocidade delas por multiplicar o playbackRate:</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">var</span> <span class="token function-variable function">goFaster</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  redQueen_alice<span class="token punctuation">.</span><span class="token function">updatePlaybackRate</span><span class="token punctuation">(</span>redQueen_alice<span class="token punctuation">.</span>playbackRate <span class="token operator">*</span> <span class="token number">1.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> goFaster<span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"touchstart"</span><span class="token punctuation">,</span> goFaster<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Os elementos do fundo também tem <code>playbackRate</code>s que também são afetados pelo clique ou toque na tela. O que acontece quando você faz Alice e a Rainha Vermelha correrem com o dobro da velocidade? O que acontece quando você as deixa desacelerar?</p></div><h2 id="extraindo_informação_das_animações"><a href="#extraindo_informação_das_animações" title="Permalink to Extraindo informação das animações">Extraindo informação das animações</a></h2><div><p>Imagine outras maneiras de utilizar o playbackRate, como melhorar a acessibilidade para usuários com disfunções vestibulares permitindo que eles desacelerem as animações do site todo. Isso é impossível de fazer via CSS sem recalcular todas as regras, mas com a Web Animations API, podemos utilizar o método <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/Document/getAnimations"><code>document.getAnimations()</code> <small>(en-US)</small></a> para iterar todas animações de uma página e dividir pela metade seu <code>playbackRate</code>, como por exemplo:</p>
<div class="code-example"><pre class="brush: js notranslate"><code>document<span class="token punctuation">.</span><span class="token function">getAnimations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">animation</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    animation<span class="token punctuation">.</span><span class="token function">updatePlaybackRate</span><span class="token punctuation">(</span>animation<span class="token punctuation">.</span>playbackRate <span class="token operator">*</span> <span class="token number">.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Com a Web Animations API, você só precisa mudar uma simples propriedade!</p>
<p>Outra coisa que é difícil de fazer somente com Animações CSS é criar dependências de valores fornecidos por outras animações. Por exemplo, no logo Aumentando e Encolhendo Alice, você pode ter notado algo estranho sobre a duração do bolinho:</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token literal-property property">duration</span><span class="token operator">:</span> aliceChange<span class="token punctuation">.</span>effect<span class="token punctuation">.</span><span class="token function">getComputedTiming</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>duration <span class="token operator">/</span> <span class="token number">2</span>
</code></pre></div>
<p>Para entender o que está acontecendo, vamos dar uma olhada na animação da Alice:</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">var</span> aliceChange <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'alice'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span>
  <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">transform</span><span class="token operator">:</span> <span class="token string">'translate(-50%, -50%) scale(.5)'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">transform</span><span class="token operator">:</span> <span class="token string">'translate(-50%, -50%) scale(2)'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">8000</span><span class="token punctuation">,</span>
    <span class="token literal-property property">easing</span><span class="token operator">:</span> <span class="token string">'ease-in-out'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">fill</span><span class="token operator">:</span> <span class="token string">'both'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>A animação da Alice a fazia ir de metade de seu tamanho para o dobro em 8 segundos. Então nós a pausamos:</p>
<div class="code-example"><pre class="brush: js notranslate"><code>aliceChange<span class="token punctuation">.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Se pausassemos no início da animação, ela começaria com metade de seu tamanho original, como se já tivesse bebido a garrafa toda! Então nós precisamos definir o estado inicial da animação no meio. Podemos fazer isso definindo o <a href="/pt-BR/docs/Web/API/Animation/currentTime"><code>Animation.currentTime</code></a> para 4 segundos, como no exemplo abaixo:</p>
<div class="code-example"><pre class="brush: js notranslate"><code>aliceChange<span class="token punctuation">.</span>currentTime <span class="token operator">=</span> <span class="token number">4000</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Mas enquanto trabalhamos nessa animação, vamos mudar bastante a duração da Alice. Não seria melhor definir essa <code>currentTime</code> dinamicamente? Assim não precisariamos fazer duas atualizações de uma vez só. Podemos fazer isso referenciando a propriedade <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/Animation/effect"><code>Animation.effect</code> <small>(en-US)</small></a>, que retorna um objeto que contém todos os detalhes sobre o(s) efeito(s) ativos na Alice:</p>
<div class="code-example"><pre class="brush: js notranslate"><code>aliceChange<span class="token punctuation">.</span>currentTime <span class="token operator">=</span> aliceChange<span class="token punctuation">.</span>effect<span class="token punctuation">.</span><span class="token function">getComputedTiming</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>duration <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre></div>
<p>O <code>effect</code> nos permite acessar os keyframes e propriedades temporais da animação — <code>aliceChange.effect.getComputedTiming()</code> aponta para o objeto timing da Alice (cujo tipo é <a class="page-not-created" title="A documentação sobre isto ainda não foi escrita; por favor considere contribuir!"><code>ComputedEffectTiming</code></a>) — que contem o <a class="page-not-created" title="A documentação sobre isto ainda não foi escrita; por favor considere contribuir!"><code>ComputedEffectTiming.duration</code></a> dela. Podemos dividir sua duração pela metade para definir a metade da animação para a linha do tempo da animação da Alice, assim ela começaria com o tamanho normal. Então nós podemos reverter e tocar a animação dela em qualquer direção para encolher ou aumentar seu tamanho!</p>
<p>E nós podemos fazer a mesma coisa quando definimos as durações da garrafa e do bolinho:</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">var</span> drinking <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'liquid'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span>
<span class="token punctuation">[</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token string">'100%'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token string">'0'</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">fill</span><span class="token operator">:</span> <span class="token string">'forwards'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">duration</span><span class="token operator">:</span> aliceChange<span class="token punctuation">.</span>effect<span class="token punctuation">.</span><span class="token function">getComputedTiming</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>duration <span class="token operator">/</span> <span class="token number">2</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
drinking<span class="token punctuation">.</span><span class="token function">pause</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Agora todas as três animações estão ligadas por apenas um <code>duration</code>, que pode ser modificado facilmente em um só lugar do código.</p>
<p>Nós também podemos utilizar a Web Animations API para descobrir o quanto da linha do tempo já foi percorrido. O jogo acaba quando o seu bolinho acaba ou você esvazia a garrafa. A vinheta que é apresentada aos jogadores depende do quão longe a Alice estava em sua animação, seja ficando grande demais pra caber na portinha ou pequena demais pra não conseguir mais alcançar a chave para abrir a porta. Podemos descobrir se ela está nesses extremos pegando o <code>currentTime</code> da sua animação e dividir pelo <code>activeDuration</code>:</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">var</span> <span class="token function-variable function">endGame</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token comment">// get Alice's timeline's playhead location</span>
  <span class="token keyword">var</span> alicePlayhead <span class="token operator">=</span> aliceChange<span class="token punctuation">.</span>currentTime<span class="token punctuation">;</span>
  <span class="token keyword">var</span> aliceTimeline <span class="token operator">=</span> aliceChange<span class="token punctuation">.</span>effect<span class="token punctuation">.</span><span class="token function">getComputedTiming</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>activeDuration<span class="token punctuation">;</span>

  <span class="token comment">// stops Alice's and other animations</span>
  <span class="token function">stopPlayingAlice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// depending on which third it falls into</span>
  <span class="token keyword">var</span> aliceHeight <span class="token operator">=</span> alicePlayhead <span class="token operator">/</span> aliceTimeline<span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>aliceHeight <span class="token operator">&lt;=</span> <span class="token number">.333</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// Alice got smaller!</span>
    <span class="token operator">...</span>

  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>aliceHeight <span class="token operator">&gt;=</span> <span class="token number">.666</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Alice got bigger!</span>
    <span class="token operator">...</span>

  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// Alice didn't change significantly</span>
    <span class="token operator">...</span>

  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>
<blockquote>
  <p><strong>Nota:</strong> <code>getAnimations()</code> e <code>effect</code> não estão disponíveis em todos os browsers no momento em que este artigo foi escrito, mas o polyfill possibilita utilizá-los agora.</p>
</blockquote></div><h2 id="callbacks_e_promises"><a href="#callbacks_e_promises" title="Permalink to Callbacks e promises">Callbacks e promises</a></h2><div><p>Animações e Transições CSS tem seus event listeners próprios, que também são possíveis com a Web Animations API:</p>
<ul>
  <li><a href="/en-US/docs/Web/API/Animation/finish_event"><code>onfinish</code></a> é o manipulador de eventos para o evento <code>finish</code> e pode ser disparado manualmente com <a href="/en-US/docs/Web/API/Animation/finish"><code>finish()</code></a>.</li>
  <li><a href="/en-US/docs/Web/API/Animation/cancel_event"><code>oncancel</code></a> é o manipulador de eventos para o evento <code>cancel</code> e pode ser disparado manualmente com <a href="/en-US/docs/Web/API/Animation/cancel"><code>cancel()</code></a>.</li>
</ul>
<p>Aqui nós definimos os callbacks para o bolinho, a garrafa e para Alice para disparar a função <code>endGame</code>:</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token comment">// When the cake or bottle runs out...</span>
nommingCake<span class="token punctuation">.</span>onfinish <span class="token operator">=</span> endGame<span class="token punctuation">;</span>
drinking<span class="token punctuation">.</span>onfinish <span class="token operator">=</span> endGame<span class="token punctuation">;</span>

<span class="token comment">// ...or Alice reaches the end of her animation</span>
aliceChange<span class="token punctuation">.</span>onfinish <span class="token operator">=</span> endGame<span class="token punctuation">;</span>
</code></pre></div>
<p>Ainda melhor, a Web Animations API também fornece uma promise <a href="/en-US/docs/Web/API/Animation/finished"><code>finished</code></a> que será resolvida quando a animação é completada, e rejeitada se for cancelada.</p></div><h2 id="conclusão"><a href="#conclusão" title="Permalink to Conclusão">Conclusão</a></h2><div><p>Essas são as funcionalidades básicas da Web Animations API, a maioria delas já estão sendo suportadas pelas últimas versões do Chrome, Firefox e Safari. Agora você está pronto pra "cair na toca do coelho" de animar utilizando o browser e pronto pra escrever e experimentar com sua própria animação! Se você está utilizando a API e deseja compartilha, tente usar a hashtag #WAAPI. Nós estaremos de olho e vamos escrever mais tutoriais para cobrir funcionalidades futuras assim que o suporte aumentar!</p></div><h2 id="veja_também"><a href="#veja_também" title="Permalink to Veja também">Veja também</a></h2><div><ul>
  <li>A <a href="https://codepen.io/collection/bpEza/" class="external" rel=" noopener">coleção completa de demos de Alice no País das Maravilhas</a> no CodePen para você brincar, compartilhar e editar</li>
  <li><a href="https://hacks.mozilla.org/2016/08/animating-like-you-just-dont-care-with-element-animate/" class="external" rel=" noopener">Animating like you just don’t care with Element.animate</a> (em inglês) — Um ótimo artigo para se ler que explica mais sobre a Web Animations API por baixo dos panos, e por que ela tem uma performance melhor do que os outros métodos de animação web</li>
  <li><a href="https://github.com/web-animations/web-animations-js" class="external" rel=" noopener">web-animations-js</a> — O polyfill da Web Animations API</li>
</ul></div></article><aside class="metadata"><div class="metadata-content-container"><div id="on-github" class="on-github"><h3>Found a problem with this page?</h3><ul><li><a href="https://github.com/mdn/translated-content/edit/main/files/pt-br/web/api/web_animations_api/using_the_web_animations_api/index.md" title="You're going to need to sign in to GitHub first (Opens in a new tab)" target="_blank" rel="noopener noreferrer">Edit on <b>GitHub</b></a></li><li><a href="https://github.com/mdn/translated-content/blob/main/files/pt-br/web/api/web_animations_api/using_the_web_animations_api/index.md" title="Folder: pt-br/web/api/web_animations_api/using_the_web_animations_api (Opens in a new tab)" target="_blank" rel="noopener noreferrer">Source on <b>GitHub</b></a></li><li><a href="https://github.com/mdn/translated-content/issues/new?body=MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fpt-BR%2Fdocs%2FWeb%2FAPI%2FWeb_Animations_API%2FUsing_the_Web_Animations_API%0A%0A%23%23%23%23+What+information+was+incorrect%2C+unhelpful%2C+or+incomplete%3F%0A%0A%0A%23%23%23%23+Specific+section+or+headline%3F%0A%0A%0A%23%23%23%23+What+did+you+expect+to+see%3F%0A%0A%0A%23%23%23%23+Did+you+test+this%3F+If+so%2C+how%3F%0A%0A%0A%3C%21--+Do+not+make+changes+below+this+line+--%3E%0A%3Cdetails%3E%0A%3Csummary%3EMDN+Content+page+report+details%3C%2Fsummary%3E%0A%0A*+Folder%3A+%60pt-br%2Fweb%2Fapi%2Fweb_animations_api%2Fusing_the_web_animations_api%60%0A*+MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fpt-BR%2Fdocs%2FWeb%2FAPI%2FWeb_Animations_API%2FUsing_the_Web_Animations_API%0A*+GitHub+URL%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Ftranslated-content%2Fblob%2Fmain%2Ffiles%2Fpt-br%2Fweb%2Fapi%2Fweb_animations_api%2Fusing_the_web_animations_api%2Findex.md%0A*+Last+commit%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Ftranslated-content%2Fcommit%2F921c46a374ab0a9f4cc809af0370f8c412e54701%0A*+Document+last+modified%3A+2022-10-01T03%3A41%3A16.000Z%0A%0A%3C%2Fdetails%3E&amp;title=Issue+with+%22Usando+a+Web+Animations+API%22%3A+%28short+summary+here+please%29&amp;labels=needs-triage%2Cl10n-pt-br" title="This will take you to https://github.com/mdn/content to file a new issue" target="_blank" rel="noopener noreferrer">Report a problem with this content on <b>GitHub</b></a></li><li>Want to fix the problem yourself? See<!-- --> <a href="https://github.com/mdn/content/blob/main/README.md" target="_blank" rel="noopener noreferrer">our Contribution guide</a>.</li></ul></div><p class="last-modified-date"><b>Last modified:</b> <time datetime="2022-10-01T03:41:16.000Z">Oct 1, 2022</time>,<!-- --> <a href="/pt-BR/docs/Web/API/Web_Animations_API/Using_the_Web_Animations_API/contributors.txt">by MDN contributors</a></p><form class="language-menu"><fieldset id="select-language"><legend>Change your language</legend><label for="language-selector" class="visually-hidden">Select your preferred language</label> <select id="language-selector" name="language"><option selected="" value="pt-BR">Português (do&nbsp;Brasil)</option><option value="en-US">English (US)</option><option value="ja">日本語</option><option value="ru">Русский</option><option value="zh-CN">中文 (简体)</option></select> <button type="submit" class="button minimal">Change language</button></fieldset></form></div></aside></main><nav id="sidebar-quicklinks" class="sidebar"><h4>Related Topics</h4><div><ol><li><strong><a href="/pt-BR/docs/Web/API/Web_Animations_API">Web Animations API</a></strong></li><li class="toggle"><details open=""><summary>Guias</summary><ol><li><a href="/pt-BR/docs/Web/API/Web_Animations_API/Using_the_Web_Animations_API">Using the Web Animations API</a></li><li><a href="/pt-BR/docs/Web/API/Web_Animations_API/Web_Animations_API_Concepts">Web Animations API Concepts</a></li><li><a href="/pt-BR/docs/Web/API/Web_Animations_API/Keyframe_Formats">Keyframe Formats</a></li></ol></details></li><li class="toggle"><details open=""><summary>Interfaces</summary><ol><li><a href="/pt-BR/docs/Web/API/Animation"><code>Animation</code></a></li><li><a href="/pt-BR/docs/Web/API/AnimationEffect"><code>AnimationEffect</code></a></li><li><a href="/pt-BR/docs/Web/API/AnimationEvent"><code>AnimationEvent</code></a></li><li><a href="/pt-BR/docs/Web/API/AnimationTimeline"><code>AnimationTimeline</code></a></li><li><a href="/pt-BR/docs/Web/API/AnimationPlaybackEvent"><code>AnimationPlaybackEvent</code></a></li><li><a href="/pt-BR/docs/Web/API/DocumentTimeline"><code>DocumentTimeline</code></a></li><li><a href="/pt-BR/docs/Web/API/KeyframeEffect"><code>KeyframeEffect</code></a></li></ol></details></li><li class="toggle"><details open=""><summary>Propriedades</summary><ol><li><a href="/pt-BR/docs/Web/API/Document/timeline"><code>Document.timeline</code></a></li></ol></details></li><li class="toggle"><details open=""><summary>Métodos</summary><ol><li><a href="/pt-BR/docs/Web/API/Document/getAnimations"><code>Document.getAnimations()</code></a></li><li><a href="/pt-BR/docs/Web/API/Element/animate"><code>Element.animate()</code></a></li></ol></details></li></ol></div></nav></div><footer id="nav-footer" class="page-footer"><div class="content-container"><div class="page-footer-logo"><a href="/pt-BR/" class="logo" aria-label="MDN Web Docs"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 451.74 135" fill="#fff"><path d="M7.14 8.35v111.06h111.05V8.35zm103.71 56c-.48.92-1 1.79-1.46 2.71a3.44 3.44 0 01-3.54 2 2.4 2.4 0 00-1.55.5c-1.37.9-2.76 1.79-4.18 2.63a7.33 7.33 0 01-6.35.34 29.71 29.71 0 00-10.63-2 11.7 11.7 0 00-9.46 4.31 14.84 14.84 0 00-2.13 4.29c-1.24 3.07-2.3 21.38-2.3 26.05 0 0-17.62-3.42-34.15-20.34l4.31-11.32h-13.5l9.76-10.35h-16.8l9.77-10.34H12.69L30.45 34a40.9 40.9 0 0119.77-10.83c7.1-1.22 8.93-.53 13.31.77l2.43.73.85.25 3.1.95a12.56 12.56 0 006.21.09 11.37 11.37 0 018.25 1 8.24 8.24 0 014.1 6.22 7.29 7.29 0 003.61 5.49 59.45 59.45 0 009.32 4.11c2.27.86 4.54 1.84 6.79 2.72a6.81 6.81 0 012.86 2.06 4.81 4.81 0 011.1 2.73c.14 2 .37 4 .47 6a15.24 15.24 0 01-1.77 8.03zM320.12 39.62a5.42 5.42 0 00-4.53 2.13 7.36 7.36 0 00-1.7 4.43v2.36a6.28 6.28 0 001.7 4.46 5.63 5.63 0 004.3 1.82 5.12 5.12 0 004.57-2.27A9.7 9.7 0 00326 47a8.11 8.11 0 00-1.67-5.52 5.36 5.36 0 00-4.21-1.86zM387.38 39.53a5.52 5.52 0 00-4.7 2.15 8.8 8.8 0 00-1.63 5.49 9.23 9.23 0 001.58 5.45 5.38 5.38 0 004.7 2.25 5.61 5.61 0 004.74-2.2 8.91 8.91 0 001.68-5.59 8.24 8.24 0 00-1.75-5.52 5.76 5.76 0 00-4.62-2.03zM299.47 41.35a4.34 4.34 0 00-4-1.92 4.55 4.55 0 00-3.89 1.73 8.37 8.37 0 00-1.58 4.17h10.48a6.3 6.3 0 00-1.01-3.98zM357.74 30.75H352v23.31h5.72q5.47 0 8.35-3t2.93-8.65q0-5.43-2.88-8.55t-8.38-3.11z"></path><path d="M121.55 8.35v70.8h323V8.35zm42.21 22.45h-4V54h3.68v3.73h-11.25V54h3.31V36.79h-.19l-9.63 19.12h-2.12l-10-19.4h-.19V54h3.45v3.73h-11.15V54h3.68V30.8h-4v-3.73H133l11.66 22.56h.19l11.18-22.56h7.7zm29.12 22.67q-4.11 4.28-11.38 4.28h-14.06v-3.69h3.73V30.75h-3.73v-3.68h13.83q7.59 0 11.66 4.29a15.4 15.4 0 014 11 15.33 15.33 0 01-4.05 11.11zm38.89-22.67h-3.68v27h-2.6L208.08 35h-.19v19h4.67v3.73h-12.22V54h3.49V30.8h-4v-3.73h7.08l16.9 22.09h.19V30.8h-4.58v-3.73h12.32zm43.8 27h-3.31l-7.83-23.18h-.19l-7.55 23.18h-3.35l-8.78-27h-2.65v-3.73H253v3.73h-3.87L255 50.71h.23l6.61-19.91H259v-3.73h11v3.73h-2.78l6.61 20.1h.23l5.43-20.1h-4.15v-3.73h11v3.73h-2.54zm26.71-1.51a9.66 9.66 0 01-6.42 2 10.2 10.2 0 01-7.41-2.74c-1.89-1.82-2.83-4.47-2.83-7.93a12.37 12.37 0 012.64-8.12 9 9 0 017.32-3.21 8.62 8.62 0 016.75 2.69 9.65 9.65 0 012.45 6.52 13.67 13.67 0 01-.28 2.69H290q.29 6.71 6.18 6.7a5.2 5.2 0 003.71-1.18 5.82 5.82 0 001.67-2.83l3.45.71a7.21 7.21 0 01-2.73 4.65zm25.77-1.63c-1.51 2.4-3.92 3.61-7.22 3.61s-5.84-1.29-7.22-3.87c0 .25-.1.82-.21 1.7s-.19 1.44-.22 1.7H309c.16-1 .31-2 .47-3.07a21.42 21.42 0 00.24-3.16v-23h-3.4v-3.3h7.55V40.9a9.76 9.76 0 012.67-3.28 7.33 7.33 0 014.74-1.4 8.48 8.48 0 016.5 2.78q2.55 2.74 2.55 7.74a14.6 14.6 0 01-2.27 7.87zm41.39-1.14q-4.11 4.28-11.37 4.28H344v-3.74h3.73V30.75H344v-3.68h13.83q7.59 0 11.66 4.29a15.41 15.41 0 014.06 11 15.34 15.34 0 01-4.11 11.11zm25.65 1.68a10.53 10.53 0 01-7.9 3.07 10 10 0 01-7.63-3 10.93 10.93 0 01-2.8-7.83 12.13 12.13 0 012.69-7.93q2.69-3.3 8-3.3t8 3.28a12 12 0 012.64 7.76 10.86 10.86 0 01-3 7.9zm22.61.57c-1.4 1.66-3.63 2.5-6.68 2.5a9.58 9.58 0 01-7.15-2.76q-2.72-2.76-2.71-7.91a12.25 12.25 0 012.69-8 9.17 9.17 0 017.5-3.28 15 15 0 013.82.48 10.37 10.37 0 013.5 1.65l.85 5.47-3.35.38-.76-3.54a8.07 8.07 0 00-4.11-1 4.9 4.9 0 00-4.39 2.15 9.93 9.93 0 00-1.41 5.55 8.9 8.9 0 001.5 5.38 5.23 5.23 0 004.44 2c2.92 0 4.67-1.7 5.23-5.1l3.5.71a10.34 10.34 0 01-2.47 5.27zm20.48.75a11.68 11.68 0 01-6.63 1.75 15.52 15.52 0 01-8.26-2.08L424 51l3.26.33-.1 2.74a7 7 0 002.06.66 12.63 12.63 0 002.19.19 8.68 8.68 0 003.66-.75 2.5 2.5 0 001.63-2.36 2.25 2.25 0 00-1.32-2.2 12.65 12.65 0 00-3.28-1 47.39 47.39 0 01-3.9-.82 7.5 7.5 0 01-3.25-1.7 4.67 4.67 0 01-1.33-3.66c0-2.36.88-4 2.62-4.91a12 12 0 015.6-1.37 15 15 0 014.08.55 16.65 16.65 0 013.47 1.39l.47 5.1-3.3.37-.48-3.3a9.5 9.5 0 00-4.06-.9 5.62 5.62 0 00-2.87.66 2.33 2.33 0 00-1.15 2.25 2.13 2.13 0 001.3 2.07 11.91 11.91 0 003.21.92 36.69 36.69 0 013.82.83 7.46 7.46 0 013.21 1.74 4.9 4.9 0 011.3 3.73 5.56 5.56 0 01-2.66 4.91z"></path><path d="M181.17 30.75h-5.71v23.31h5.71q5.47 0 8.36-3t2.88-8.61q0-5.43-2.88-8.55t-8.36-3.15zM121.63 119.32V81.74h114.91v37.58zM153.22 109h-2v-6.85a4.8 4.8 0 00-1.58-4 5.57 5.57 0 00-3.55-1.26 5 5 0 00-4.92 3.26 4.19 4.19 0 00-1.88-2.46 5.82 5.82 0 00-3-.8 4.89 4.89 0 00-4.56 2.56v-2.21h-6.28v3.26h2v8.5h-2v3.23h9.11V109h-2.86v-5.25a4.4 4.4 0 01.69-2.56 2.47 2.47 0 012.21-1q2.57 0 2.56 3.63v8.41h6.29V109h-2v-5.25a4.47 4.47 0 01.67-2.56 2.42 2.42 0 012.19-1q2.63 0 2.63 3.63v8.41h6.28zm9.88-12.07q-4 0-6 2.36a8.41 8.41 0 00-2 5.66 7.25 7.25 0 002.17 5.62 8 8 0 005.65 2 8.54 8.54 0 005.94-2.11 7.27 7.27 0 002.34-5.67 8.21 8.21 0 00-2-5.51q-2.07-2.34-6.1-2.34zm-.1 12.35a3 3 0 01-2.63-1.33 5.68 5.68 0 01-.9-3.26 5 5 0 011-3.28 3.23 3.23 0 012.61-1.18 3.5 3.5 0 012.59 1.08 4.56 4.56 0 011.07 3.31 5.21 5.21 0 01-1 3.41 3.33 3.33 0 01-2.74 1.25zm25-2.3l-3.39-.29-.7 2.32H179l8.32-9.54-.32-2.23h-13.19l-.53 5.25 3.16.34.67-2.36h4.65l-8.25 9.53.44 2.26h13.13zm7.62-9.74h-4.46v5.39h4.46zm0 9.61h-4.46v5.39h4.46zm13.54-17.49h-4.23l-6.48 22.88h4.22zm8.68 0h-4.23l-6.45 22.88h4.19zm15 22.51l-.07-2.26a1.22 1.22 0 01-.56.1c-.69 0-1-.39-1-1.16v-6.49a4.39 4.39 0 00-1.8-3.84 7 7 0 00-4.16-1.28 14.55 14.55 0 00-3.16.3 24.14 24.14 0 00-3.29 1.06l-.56 3.46 3.39.4.5-1.69a2.78 2.78 0 011.08-.37 11.3 11.3 0 011.25-.07c1.19 0 1.89.37 2.09 1.1a8.55 8.55 0 01.3 2.26v.5a8.91 8.91 0 00-1.18-.11h-1.21a12.64 12.64 0 00-4.81.88 3.53 3.53 0 00-2.18 3.64 3.66 3.66 0 001.48 3.33 5.63 5.63 0 003.11 1 4.67 4.67 0 003-.91 6.78 6.78 0 001.8-2 3 3 0 003.33 3 5.54 5.54 0 002.66-.85zm-9.25-2.32a1.69 1.69 0 01-1.36-.52 1.81 1.81 0 01-.43-1.21 1.67 1.67 0 01.86-1.68 4.63 4.63 0 012-.42 7.69 7.69 0 011.07.07l1.06.13a3.58 3.58 0 01-1.08 2.74 3.24 3.24 0 01-2.11.89z"></path></svg></a></div><ul class="link-list-mdn"><li><a href="/pt-BR/docs/Web">Web Technologies</a></li><li><a href="/pt-BR/docs/Learn">Learn Web Development</a></li><li><a href="/pt-BR/docs/MDN/About">About MDN</a></li><li><a href="/pt-BR/docs/MDN/Feedback">Feedback</a></li></ul><ul class="link-list-moz"><li><a href="https://www.mozilla.org/about/" target="_blank" rel="noopener noreferrer">About</a></li><li><a href="https://shop.spreadshirt.com/mdn-store/" target="_blank" rel="noopener noreferrer">MDN Web Docs Store</a></li><li><a href="https://www.mozilla.org/contact/" target="_blank" rel="noopener noreferrer">Contact Us</a></li><li><a href="https://www.mozilla.org/firefox/?utm_source=developer.mozilla.org&amp;utm_campaign=footer&amp;utm_medium=referral" target="_blank" rel="noopener noreferrer">Firefox</a></li></ul><div class="social social-mdn"><h4>MDN</h4><ul><li><a class="social-icon twitter" href="https://twitter.com/mozdevnet" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">MDN on Twitter</span></a></li><li><a class="social-icon github" href="https://github.com/mdn/" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">MDN on Github</span></a></li></ul></div><div class="social social-moz"><h4>Mozilla</h4><ul><li><a class="social-icon twitter" href="https://twitter.com/mozilla" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">Mozilla on Twitter</span></a></li><li><a class="social-icon instagram" href="https://www.instagram.com/mozillagram/" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">Mozilla on Instagram</span></a></li></ul></div><p id="license" class="footer-license">© 2005-<!-- -->2022<!-- --> Mozilla and individual contributors. Content is available under<!-- --> <a href="/docs/MDN/About#Copyrights_and_licenses">these licenses</a>.</p><ul class="footer-legal"><li><a href="https://www.mozilla.org/about/legal/terms/mozilla" target="_blank" rel="noopener noreferrer">Terms</a></li><li><a href="https://www.mozilla.org/privacy/websites/" target="_blank" rel="noopener noreferrer">Privacy</a></li><li><a href="https://www.mozilla.org/privacy/websites/#cookies" target="_blank" rel="noopener noreferrer">Cookies</a></li></ul></div></footer><div class="page-overlay hidden"></div></div><script type="application/json" id="hydration">{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"Usando a Web Animations API","mdn_url":"/pt-BR/docs/Web/API/Web_Animations_API/Using_the_Web_Animations_API","locale":"pt-BR","native":"Português (do Brasil)","sidebarHTML":"<ol><li><strong><a href=\"/pt-BR/docs/Web/API/Web_Animations_API\">Web Animations API</a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Guias</summary><ol><li><a href=\"/pt-BR/docs/Web/API/Web_Animations_API/Using_the_Web_Animations_API\">Using the Web Animations API</a></li><li><a href=\"/pt-BR/docs/Web/API/Web_Animations_API/Web_Animations_API_Concepts\">Web Animations API Concepts</a></li><li><a href=\"/pt-BR/docs/Web/API/Web_Animations_API/Keyframe_Formats\">Keyframe Formats</a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Interfaces</summary><ol><li><a href=\"/pt-BR/docs/Web/API/Animation\"><code>Animation</code></a></li><li><a href=\"/pt-BR/docs/Web/API/AnimationEffect\"><code>AnimationEffect</code></a></li><li><a href=\"/pt-BR/docs/Web/API/AnimationEvent\"><code>AnimationEvent</code></a></li><li><a href=\"/pt-BR/docs/Web/API/AnimationTimeline\"><code>AnimationTimeline</code></a></li><li><a href=\"/pt-BR/docs/Web/API/AnimationPlaybackEvent\"><code>AnimationPlaybackEvent</code></a></li><li><a href=\"/pt-BR/docs/Web/API/DocumentTimeline\"><code>DocumentTimeline</code></a></li><li><a href=\"/pt-BR/docs/Web/API/KeyframeEffect\"><code>KeyframeEffect</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Propriedades</summary><ol><li><a href=\"/pt-BR/docs/Web/API/Document/timeline\"><code>Document.timeline</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Métodos</summary><ol><li><a href=\"/pt-BR/docs/Web/API/Document/getAnimations\"><code>Document.getAnimations()</code></a></li><li><a href=\"/pt-BR/docs/Web/API/Element/animate\"><code>Element.animate()</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>A Web Animations API nos possibilita criar animações e controlar sua reprodução pelo JavaScript. Esse artigo vai te demonstrar esses conceitos com demonstrações e tutoriais com o temática de Alice no País das Maravilhas.</p>"}},{"type":"prose","value":{"id":"conhecendo_a_web_animations_api","title":"Conhecendo a Web Animations API","isH3":false,"content":"<p>A <a href=\"/pt-BR/docs/Web/API/Web_Animations_API\">Web Animations API</a> abre a engine de animação do browser para os desenvolvedores manipularem via JavaScript. Esta API foi construída para se basear nas implementações das <a href=\"/pt-BR/docs/Web/CSS/CSS_Animations\">Animações CSS</a> e <a href=\"/pt-BR/docs/Web/CSS/CSS_Transitions\">Transições CSS</a>, e deixam a porta aberta para futuros efeitos de animação. É um dos métodos mais performáticos para se animar na Web, permitindo que o browser faça internamente suas próprias otimizações, sem precisar depender de hacks, coerções ou <a href=\"/pt-BR/docs/Web/API/Window/requestAnimationFrame\"><code>Window.requestAnimationFrame()</code></a>.</p>\n<p>Com a Web Animations API, podemos transferir as animações interativas das folhas de estilo para o JavaScript, separando comportamento de apresentação. Não vamos precisar mais depender de técnicas muito dependentes do DOM como propriedades do CSS e escopo de classes para controlar a direção da reprodução. E diferente de CSS puro e declarativo, JavaScript também te possibilita definir dinâmicamente valores: de propriedades à duração. Para criar bibilotecas de animação à criar animações interativas, a Web Animations API pode ser a ferramenta perfeita para o trabalho. Vamos ver o que ela pode fazer!</p>"}},{"type":"prose","value":{"id":"suporte_de_navegadores","title":"Suporte de Navegadores","isH3":false,"content":"<p>O suporte básico para as funcionalidades da Web Animations API discutidas neste artigo estão disponíveis no Firefox 48+, Chrome 36+ e Safari 13.1+. Também existe um <a href=\"https://github.com/web-animations/web-animations-js\" class=\"external\" rel=\" noopener\">polyfill prático</a> que verifica o suporte e adiciona as funcionalidades onde for necessário.</p>"}},{"type":"prose","value":{"id":"escrevendo_animações_css_com_a_web_animations_api","title":"Escrevendo Animações CSS com a Web Animations API","isH3":false,"content":"<p>Uma das maneiras mais familiares de abordar a Web Animations API é começar com algo que boa parte dos desenvolvedores web já utilizaram antes: Animações CSS. Animações CSS tem uma sintaxe familiar que funciona bem para nossa demonstração.</p>"}},{"type":"prose","value":{"id":"a_versão_css","title":"A versão CSS","isH3":true,"content":"<p>Aqui temos uma animação escrita com CSS mostrando Alice caindo no buraco de coelho que leva ao País das Maravilhas (veja o <a href=\"https://codepen.io/rachelnabors/pen/QyOqqW\" class=\"external\" rel=\" noopener\">código completo no Codepen</a>):</p>\n<p><a href=\"https://codepen.io/rachelnabors/pen/rxpmJL\" class=\"external\" rel=\" noopener\"><img src=\"https://mdn.mozillademos.org/files/13843/tumbling-alice_optimized.gif\" alt=\"Alice Tumbling down the rabbit's hole.\" loading=\"lazy\"></a></p>\n<p>Perceba que o fundo se mexe, a Alice gira e sua cor muda em sincronia com o giro. Nós vamos focar somente na Alice para este tutorial. Segue a versão simplificada do CSS que controla a animação da Alice:</p>\n<div class=\"code-example\"><pre class=\"brush: css notranslate\"><code><span class=\"token selector\">#alice</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">animation</span><span class=\"token punctuation\">:</span> aliceTumbling infinite 3s linear<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token atrule\"><span class=\"token rule\">@keyframes</span> aliceTumbling</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token selector\">0%</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> #000<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">transform</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rotate</span><span class=\"token punctuation\">(</span>0<span class=\"token punctuation\">)</span> <span class=\"token function\">translate3D</span><span class=\"token punctuation\">(</span>-50%<span class=\"token punctuation\">,</span> -50%<span class=\"token punctuation\">,</span> 0<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token selector\">30%</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> #431236<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token selector\">100%</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> #000<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">transform</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rotate</span><span class=\"token punctuation\">(</span>360deg<span class=\"token punctuation\">)</span> <span class=\"token function\">translate3D</span><span class=\"token punctuation\">(</span>-50%<span class=\"token punctuation\">,</span> -50%<span class=\"token punctuation\">,</span> 0<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Isso muda a cor da Alice e a rotação do <code>transform</code> por 3 segundos em um ritmo constante (linear) e se repete infinitamente. No bloco do <a href=\"/pt-BR/docs/Web/CSS/@keyframes\">@keyframes</a> podemos ver que em 30% de cada repetição (por volta dos 900ms), a cor da Alice muda de preto para um vinho, e volta para o preto no final do loop.</p>"}},{"type":"prose","value":{"id":"mudando_para_o_javascript","title":"Mudando para o JavaScript","isH3":true,"content":"<p>Agora vamos tentar criar a mesma animação usando a Web Animations API.</p>\n<h4 id=\"representando_keyframes\">Representando keyframes</h4>\n<p>A primeira coisa que precisamos fazer é criar um <a href=\"/en-US/docs/Web/API/Web_Animations_API/Keyframe_Formats\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">Objeto Keyframe (en-US)</a> correspondente ao nosso bloco <a href=\"/pt-BR/docs/Web/CSS/@keyframes\">@keyframes</a> do CSS:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> aliceTumbling <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">transform</span><span class=\"token operator\">:</span> <span class=\"token string\">'rotate(0) translate3D(-50%, -50%, 0)'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">'#000'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">'#431236'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">offset</span><span class=\"token operator\">:</span> <span class=\"token number\">0.3</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">transform</span><span class=\"token operator\">:</span> <span class=\"token string\">'rotate(360deg) translate3D(-50%, -50%, 0)'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">'#000'</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Aqui estávamos utilizando uma array contendo múltiplos objetos. Cada objeto representa uma chave do CSS original. Contudo, diferente do CSS, a Web Animations API não precisa informar explicitamente as porcentagens temporais para cada chave, o JS automaticamente divide a animação em partes iguais baseado no número de chaves que você forneceu. Isso significa que um objeto Keyframe com três chaves vai reproduzir a chave do meio em 50% do tempo de cada loop, exceto se for definido o contrário.</p>\n<p>Quando queremos explicitamente definir um timing diferente para essas outras chaves, podemos especificar um offset diretamente no objeto, separado do resto da declaração por uma vírgula. No exemplo acima, para definir que a cor da Alice muda em 30% do tempo (e não 50%), nós definiremos como <code>offset: 0.3</code>.</p>\n<p>Atualmente, devem ser definidos pelo menos dois keyframes (representando o início e fim de estado das sequências de animação). Se a sua lista de keyframes somente tem uma entrada, <a href=\"/pt-BR/docs/Web/API/Element/animate\"><code>Element.animate()</code></a> pode disparar uma exceção <code>NotSupportedErro</code> em alguns browsers até eles serem atualizados.</p>\n<p>Então recapitulando: as chaves são espaçadas igualmente por padrão, exceto se você definir um offset para uma chave. Útil, não?</p>\n<h4 id=\"representando_propriedades_temporais\">Representando propriedades temporais</h4>\n<p>Nós precisamos criar também um objeto de propriedades temporais (um objeto <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/KeyframeEffect/KeyframeEffect\"><code>AnimationEffectTimingProperties</code> <small>(en-US)</small></a>) correspondente aos valores da animação da Alice:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> aliceTiming <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">duration</span><span class=\"token operator\">:</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">iterations</span><span class=\"token operator\">:</span> <span class=\"token number\">Infinity</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Você pode notar algumas diferenças aqui comparando com os valores equivalentes representados no CSS:</p>\n<ul>\n  <li>A propriedade <code>duration</code> está em milisegundos (<code>3000</code>, não <code>3s</code>). Assim como <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/setTimeout\"><code>WindowTimers.setTimeout()</code> <small>(en-US)</small></a> e <a href=\"/pt-BR/docs/Web/API/Window/requestAnimationFrame\"><code>Window.requestAnimationFrame()</code></a>, a Web Animations API somente aceita millisegundos.</li>\n  <li>A outra diferença é o uso de <code>iterations</code> no lugar de <code>iteration-count</code>.</li>\n</ul>\n<blockquote>\n  <p><strong>Nota:</strong> Existem algumas pequenas diferenças de terminologia entre o CSS Animations e o Web Animations. Por exemplo, Web Animations não usa a string <code>\"infinite\"</code>, e sim a keyword JavaScript <code>Infinity</code>. E no lugar de <code>timing-function</code>, usamos <code>easing</code>. Não estamos citando um valor de <code>easing</code> aqui pois, diferente das Animações CSS onde o valor padrão do <a href=\"/en-US/docs/Web/CSS/animation-timing-function\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">animation-timing-function (en-US)</a> é <code>ease</code>, na Web Animations API o padrão é <code>linear</code> — o que nós já queremos para a animação da Alice.</p>\n</blockquote>\n<h4 id=\"juntando_as_peças\">Juntando as peças</h4>\n<p>Agora vamos juntar o que já fizemos com o método <a href=\"/pt-BR/docs/Web/API/Element/animate\"><code>Element.animate()</code></a>:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"alice\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">animate</span><span class=\"token punctuation\">(</span>\n  aliceTumbling<span class=\"token punctuation\">,</span>\n  aliceTiming\n<span class=\"token punctuation\">)</span>\n</code></pre></div>\n<p>E pronto: a animação começa a tocar (veja a <a href=\"https://codepen.io/rachelnabors/pen/rxpmJL\" class=\"external\" rel=\" noopener\">versão final no Codepen</a>).</p>\n<p>O método <code>animate()</code> pode ser chamado em qualquer elemento do DOM que pode ser animado com CSS. E pode ser escrito de algumas maneiras. Ao invés de criar objetos para os keyframes e propriedades temporais, podemos passar seus valores diretamentes, tipo:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"alice\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">animate</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">transform</span><span class=\"token operator\">:</span> <span class=\"token string\">'rotate(0) translate3D(-50%, -50%, 0)'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">'#000'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">'#431236'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">offset</span><span class=\"token operator\">:</span> <span class=\"token number\">0.3</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">transform</span><span class=\"token operator\">:</span> <span class=\"token string\">'rotate(360deg) translate3D(-50%, -50%, 0)'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">'#000'</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">duration</span><span class=\"token operator\">:</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">iterations</span><span class=\"token operator\">:</span> <span class=\"token number\">Infinity</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>E se nós precisarmos somente especificar a duração da animação e não suas iterações (por padrão, a animação roda uma ), podemos passar só os milisegundos após o array:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"alice\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">animate</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">transform</span><span class=\"token operator\">:</span> <span class=\"token string\">'rotate(0) translate3D(-50%, -50%, 0)'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">'#000'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">'#431236'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">offset</span><span class=\"token operator\">:</span> <span class=\"token number\">0.3</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">transform</span><span class=\"token operator\">:</span> <span class=\"token string\">'rotate(360deg) translate3D(-50%, -50%, 0)'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">color</span><span class=\"token operator\">:</span> <span class=\"token string\">'#000'</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"controlando_a_reprodução_com_play_pause_reverse_e_updateplaybackrate","title":"Controlando a reprodução com play(), pause(), reverse() e updatePlaybackRate()","isH3":false,"content":"<p>Por mais que possamos escrever Animações CSS utilizando a Web Animations API, a API realmente mostra seu potencial quando precisamos manipular a reprodução da animação. A Web Animations API fornece vários métodos úteis para controlar a reprodução. Vamos dar uma olhada em como pausar e tocar animações no jogo da Alice Crescendo/Encolhendo (confira o <a href=\"https://codepen.io/rachelnabors/pen/PNYGZQ\" class=\"external\" rel=\" noopener\">código completo no Codepen</a>):</p>\n<p><a href=\"https://codepen.io/rachelnabors/pen/PNYGZQ?editors=0010\" class=\"external\" rel=\" noopener\"><img src=\"https://mdn.mozillademos.org/files/13845/growing-shrinking_article_optimized.gif\" alt=\"Playing the growing and shrinking game with Alice.\" loading=\"lazy\"></a></p>\n<p>Nesse jogo, Alice tem uma animação que a encolhe ou aumenta seu tamanho, que controlamos por uma garrafa e um cupcake. Cada um tem sua própria animação.</p>"}},{"type":"prose","value":{"id":"pausando_e_tocando_animações","title":"Pausando e tocando animações","isH3":true,"content":"<p>Vamos falar sobre a animação da Alice depois, mas por enquanto, vamos dissecar esta animação do cupcake.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> nommingCake <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'eat-me_sprite'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">animate</span><span class=\"token punctuation\">(</span>\n<span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">transform</span><span class=\"token operator\">:</span> <span class=\"token string\">'translateY(0)'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">transform</span><span class=\"token operator\">:</span> <span class=\"token string\">'translateY(-80%)'</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">fill</span><span class=\"token operator\">:</span> <span class=\"token string\">'forwards'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">easing</span><span class=\"token operator\">:</span> <span class=\"token string\">'steps(4, end)'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">duration</span><span class=\"token operator\">:</span> aliceChange<span class=\"token punctuation\">.</span>effect<span class=\"token punctuation\">.</span>timing<span class=\"token punctuation\">.</span>duration <span class=\"token operator\">/</span> <span class=\"token number\">2</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>O método <a href=\"/pt-BR/docs/Web/API/Element/animate\"><code>Element.animate()</code></a> vai rodar imediatamente depois de ser chamado. Para evitar que o bolinho se coma sozinho antes da interação do usuário, chamamos o <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Animation/pause\"><code>Animation.pause()</code> <small>(en-US)</small></a> imediatamente depois de criar a animação:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>nommingCake<span class=\"token punctuation\">.</span><span class=\"token function\">pause</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Agora nós podemos usar o método <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Animation/play\"><code>Animation.play()</code> <small>(en-US)</small></a> para rodar assim que for o momento:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>nommingCake<span class=\"token punctuation\">.</span><span class=\"token function\">play</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Especificamente, nós queremos linka-lo à animação da Alice, para ela crescer assim que o cupcake é mordido. Podemos fazer isso com a seguinte função:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> <span class=\"token function-variable function\">growAlice</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">// Play Alice's animation.</span>\n  aliceChange<span class=\"token punctuation\">.</span><span class=\"token function\">play</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Play the cake's animation.</span>\n  nommingCake<span class=\"token punctuation\">.</span><span class=\"token function\">play</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Quando o usuário clicar ou pressionar seu dedo no bolinho em uma tela de toque, podemos chamar a função <code>growAlice</code> para fazer todas as animações tocarem:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>cake<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"mousedown\"</span><span class=\"token punctuation\">,</span> growAlice<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ncake<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"touchstart\"</span><span class=\"token punctuation\">,</span> growAlice<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"outros_métodos_úteis","title":"Outros métodos úteis","isH3":true,"content":"<ul>\n  <li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Animation/finish\"><code>Animation.finish()</code> <small>(en-US)</small></a> pula para o final da animação.</li>\n  <li><a href=\"/pt-BR/docs/Web/API/Animation/cancel\"><code>Animation.cancel()</code></a> aborta a animação e cancela seus efeitos.</li>\n  <li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Animation/reverse\"><code>Animation.reverse()</code> <small>(en-US)</small></a> define o (<a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Animation/playbackRate\"><code>Animation.playbackRate</code> <small>(en-US)</small></a>) para um valor negativo, então roda ao contrário</li>\n</ul>\n<p>Vamos dar uma olhada primeiro no método <code>playbackRate</code> — um valor negativo vai fazer a animação tocar ao contrário. Quando Alice bebe da garrafa, ela encolhe. Isso porque a garrafa muda o <code>playbackRate</code> da animação de 1 para -1:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> <span class=\"token function-variable function\">shrinkAlice</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  aliceChange<span class=\"token punctuation\">.</span>playbackRate <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  aliceChange<span class=\"token punctuation\">.</span><span class=\"token function\">play</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nbottle<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"mousedown\"</span><span class=\"token punctuation\">,</span> shrinkAlice<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nbottle<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"touchstart\"</span><span class=\"token punctuation\">,</span> shrinkAlice<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Em <a href=\"https://en.wikipedia.org/wiki/Through_the_Looking-Glass\" class=\"external\" rel=\" noopener\">Alice Através do Espelho</a>, Alice viaja para um mundo onde ela deve correr para se manter no lugar — e correr com o dobro de velocidade para avançar! No exemplo da Corrida da Rainha Vermelha, Alice e a Rainha Vermelha estão correndo para se manter no lugar (veja o <a href=\"https://codepen.io/rachelnabors/pen/PNGGaV\" class=\"external\" rel=\" noopener\">código completo no Codepen</a>):</p>\n<p><a href=\"https://codepen.io/rachelnabors/pen/PNGGaV\" class=\"external\" rel=\" noopener\"><img src=\"https://mdn.mozillademos.org/files/13847/red-queen-race_optimized.gif\" alt=\"Alice and the Red Queen race to get to the next square in this game.\" loading=\"lazy\"></a></p>\n<p>Já que crianças pequenas se cansam facilmente, diferente de peças de xadrez autônomas, Alice está constantemente desacelerando. Nós podemos fazer isso definindo uma queda no <code>playbackRate</code> da animação dela. Usamos o <code>updatePlaybackRate()</code> no lugar de definir manualmente o playbackRate, já que isso produz uma atualização mais suave:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">// Make sure the playback rate never falls below .4</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>redQueen_alice<span class=\"token punctuation\">.</span>playbackRate <span class=\"token operator\">&gt;</span> <span class=\"token number\">.4</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    redQueen_alice<span class=\"token punctuation\">.</span><span class=\"token function\">updatePlaybackRate</span><span class=\"token punctuation\">(</span>redQueen_alice<span class=\"token punctuation\">.</span>playbackRate <span class=\"token operator\">*</span> <span class=\"token number\">.9</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Mas impulsioná-las clicando ou tocando na tela aumenta a velocidade delas por multiplicar o playbackRate:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> <span class=\"token function-variable function\">goFaster</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  redQueen_alice<span class=\"token punctuation\">.</span><span class=\"token function\">updatePlaybackRate</span><span class=\"token punctuation\">(</span>redQueen_alice<span class=\"token punctuation\">.</span>playbackRate <span class=\"token operator\">*</span> <span class=\"token number\">1.1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\ndocument<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"click\"</span><span class=\"token punctuation\">,</span> goFaster<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ndocument<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"touchstart\"</span><span class=\"token punctuation\">,</span> goFaster<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Os elementos do fundo também tem <code>playbackRate</code>s que também são afetados pelo clique ou toque na tela. O que acontece quando você faz Alice e a Rainha Vermelha correrem com o dobro da velocidade? O que acontece quando você as deixa desacelerar?</p>"}},{"type":"prose","value":{"id":"extraindo_informação_das_animações","title":"Extraindo informação das animações","isH3":false,"content":"<p>Imagine outras maneiras de utilizar o playbackRate, como melhorar a acessibilidade para usuários com disfunções vestibulares permitindo que eles desacelerem as animações do site todo. Isso é impossível de fazer via CSS sem recalcular todas as regras, mas com a Web Animations API, podemos utilizar o método <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Document/getAnimations\"><code>document.getAnimations()</code> <small>(en-US)</small></a> para iterar todas animações de uma página e dividir pela metade seu <code>playbackRate</code>, como por exemplo:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>document<span class=\"token punctuation\">.</span><span class=\"token function\">getAnimations</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>\n  <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">animation</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    animation<span class=\"token punctuation\">.</span><span class=\"token function\">updatePlaybackRate</span><span class=\"token punctuation\">(</span>animation<span class=\"token punctuation\">.</span>playbackRate <span class=\"token operator\">*</span> <span class=\"token number\">.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Com a Web Animations API, você só precisa mudar uma simples propriedade!</p>\n<p>Outra coisa que é difícil de fazer somente com Animações CSS é criar dependências de valores fornecidos por outras animações. Por exemplo, no logo Aumentando e Encolhendo Alice, você pode ter notado algo estranho sobre a duração do bolinho:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token literal-property property\">duration</span><span class=\"token operator\">:</span> aliceChange<span class=\"token punctuation\">.</span>effect<span class=\"token punctuation\">.</span><span class=\"token function\">getComputedTiming</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>duration <span class=\"token operator\">/</span> <span class=\"token number\">2</span>\n</code></pre></div>\n<p>Para entender o que está acontecendo, vamos dar uma olhada na animação da Alice:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> aliceChange <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'alice'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">animate</span><span class=\"token punctuation\">(</span>\n  <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">transform</span><span class=\"token operator\">:</span> <span class=\"token string\">'translate(-50%, -50%) scale(.5)'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">transform</span><span class=\"token operator\">:</span> <span class=\"token string\">'translate(-50%, -50%) scale(2)'</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">duration</span><span class=\"token operator\">:</span> <span class=\"token number\">8000</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">easing</span><span class=\"token operator\">:</span> <span class=\"token string\">'ease-in-out'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">fill</span><span class=\"token operator\">:</span> <span class=\"token string\">'both'</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>A animação da Alice a fazia ir de metade de seu tamanho para o dobro em 8 segundos. Então nós a pausamos:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>aliceChange<span class=\"token punctuation\">.</span><span class=\"token function\">pause</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Se pausassemos no início da animação, ela começaria com metade de seu tamanho original, como se já tivesse bebido a garrafa toda! Então nós precisamos definir o estado inicial da animação no meio. Podemos fazer isso definindo o <a href=\"/pt-BR/docs/Web/API/Animation/currentTime\"><code>Animation.currentTime</code></a> para 4 segundos, como no exemplo abaixo:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>aliceChange<span class=\"token punctuation\">.</span>currentTime <span class=\"token operator\">=</span> <span class=\"token number\">4000</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Mas enquanto trabalhamos nessa animação, vamos mudar bastante a duração da Alice. Não seria melhor definir essa <code>currentTime</code> dinamicamente? Assim não precisariamos fazer duas atualizações de uma vez só. Podemos fazer isso referenciando a propriedade <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Animation/effect\"><code>Animation.effect</code> <small>(en-US)</small></a>, que retorna um objeto que contém todos os detalhes sobre o(s) efeito(s) ativos na Alice:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>aliceChange<span class=\"token punctuation\">.</span>currentTime <span class=\"token operator\">=</span> aliceChange<span class=\"token punctuation\">.</span>effect<span class=\"token punctuation\">.</span><span class=\"token function\">getComputedTiming</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>duration <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>O <code>effect</code> nos permite acessar os keyframes e propriedades temporais da animação — <code>aliceChange.effect.getComputedTiming()</code> aponta para o objeto timing da Alice (cujo tipo é <a class=\"page-not-created\" title=\"A documentação sobre isto ainda não foi escrita; por favor considere contribuir!\"><code>ComputedEffectTiming</code></a>) — que contem o <a class=\"page-not-created\" title=\"A documentação sobre isto ainda não foi escrita; por favor considere contribuir!\"><code>ComputedEffectTiming.duration</code></a> dela. Podemos dividir sua duração pela metade para definir a metade da animação para a linha do tempo da animação da Alice, assim ela começaria com o tamanho normal. Então nós podemos reverter e tocar a animação dela em qualquer direção para encolher ou aumentar seu tamanho!</p>\n<p>E nós podemos fazer a mesma coisa quando definimos as durações da garrafa e do bolinho:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> drinking <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'liquid'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">animate</span><span class=\"token punctuation\">(</span>\n<span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token string\">'100%'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">height</span><span class=\"token operator\">:</span> <span class=\"token string\">'0'</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">fill</span><span class=\"token operator\">:</span> <span class=\"token string\">'forwards'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">duration</span><span class=\"token operator\">:</span> aliceChange<span class=\"token punctuation\">.</span>effect<span class=\"token punctuation\">.</span><span class=\"token function\">getComputedTiming</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>duration <span class=\"token operator\">/</span> <span class=\"token number\">2</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ndrinking<span class=\"token punctuation\">.</span><span class=\"token function\">pause</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Agora todas as três animações estão ligadas por apenas um <code>duration</code>, que pode ser modificado facilmente em um só lugar do código.</p>\n<p>Nós também podemos utilizar a Web Animations API para descobrir o quanto da linha do tempo já foi percorrido. O jogo acaba quando o seu bolinho acaba ou você esvazia a garrafa. A vinheta que é apresentada aos jogadores depende do quão longe a Alice estava em sua animação, seja ficando grande demais pra caber na portinha ou pequena demais pra não conseguir mais alcançar a chave para abrir a porta. Podemos descobrir se ela está nesses extremos pegando o <code>currentTime</code> da sua animação e dividir pelo <code>activeDuration</code>:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> <span class=\"token function-variable function\">endGame</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">// get Alice's timeline's playhead location</span>\n  <span class=\"token keyword\">var</span> alicePlayhead <span class=\"token operator\">=</span> aliceChange<span class=\"token punctuation\">.</span>currentTime<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">var</span> aliceTimeline <span class=\"token operator\">=</span> aliceChange<span class=\"token punctuation\">.</span>effect<span class=\"token punctuation\">.</span><span class=\"token function\">getComputedTiming</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>activeDuration<span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// stops Alice's and other animations</span>\n  <span class=\"token function\">stopPlayingAlice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// depending on which third it falls into</span>\n  <span class=\"token keyword\">var</span> aliceHeight <span class=\"token operator\">=</span> alicePlayhead <span class=\"token operator\">/</span> aliceTimeline<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>aliceHeight <span class=\"token operator\">&lt;=</span> <span class=\"token number\">.333</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Alice got smaller!</span>\n    <span class=\"token operator\">...</span>\n\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>aliceHeight <span class=\"token operator\">&gt;=</span> <span class=\"token number\">.666</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Alice got bigger!</span>\n    <span class=\"token operator\">...</span>\n\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Alice didn't change significantly</span>\n    <span class=\"token operator\">...</span>\n\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<blockquote>\n  <p><strong>Nota:</strong> <code>getAnimations()</code> e <code>effect</code> não estão disponíveis em todos os browsers no momento em que este artigo foi escrito, mas o polyfill possibilita utilizá-los agora.</p>\n</blockquote>"}},{"type":"prose","value":{"id":"callbacks_e_promises","title":"Callbacks e promises","isH3":false,"content":"<p>Animações e Transições CSS tem seus event listeners próprios, que também são possíveis com a Web Animations API:</p>\n<ul>\n  <li><a href=\"/en-US/docs/Web/API/Animation/finish_event\"><code>onfinish</code></a> é o manipulador de eventos para o evento <code>finish</code> e pode ser disparado manualmente com <a href=\"/en-US/docs/Web/API/Animation/finish\"><code>finish()</code></a>.</li>\n  <li><a href=\"/en-US/docs/Web/API/Animation/cancel_event\"><code>oncancel</code></a> é o manipulador de eventos para o evento <code>cancel</code> e pode ser disparado manualmente com <a href=\"/en-US/docs/Web/API/Animation/cancel\"><code>cancel()</code></a>.</li>\n</ul>\n<p>Aqui nós definimos os callbacks para o bolinho, a garrafa e para Alice para disparar a função <code>endGame</code>:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// When the cake or bottle runs out...</span>\nnommingCake<span class=\"token punctuation\">.</span>onfinish <span class=\"token operator\">=</span> endGame<span class=\"token punctuation\">;</span>\ndrinking<span class=\"token punctuation\">.</span>onfinish <span class=\"token operator\">=</span> endGame<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ...or Alice reaches the end of her animation</span>\naliceChange<span class=\"token punctuation\">.</span>onfinish <span class=\"token operator\">=</span> endGame<span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Ainda melhor, a Web Animations API também fornece uma promise <a href=\"/en-US/docs/Web/API/Animation/finished\"><code>finished</code></a> que será resolvida quando a animação é completada, e rejeitada se for cancelada.</p>"}},{"type":"prose","value":{"id":"conclusão","title":"Conclusão","isH3":false,"content":"<p>Essas são as funcionalidades básicas da Web Animations API, a maioria delas já estão sendo suportadas pelas últimas versões do Chrome, Firefox e Safari. Agora você está pronto pra \"cair na toca do coelho\" de animar utilizando o browser e pronto pra escrever e experimentar com sua própria animação! Se você está utilizando a API e deseja compartilha, tente usar a hashtag #WAAPI. Nós estaremos de olho e vamos escrever mais tutoriais para cobrir funcionalidades futuras assim que o suporte aumentar!</p>"}},{"type":"prose","value":{"id":"veja_também","title":"Veja também","isH3":false,"content":"<ul>\n  <li>A <a href=\"https://codepen.io/collection/bpEza/\" class=\"external\" rel=\" noopener\">coleção completa de demos de Alice no País das Maravilhas</a> no CodePen para você brincar, compartilhar e editar</li>\n  <li><a href=\"https://hacks.mozilla.org/2016/08/animating-like-you-just-dont-care-with-element-animate/\" class=\"external\" rel=\" noopener\">Animating like you just don’t care with Element.animate</a> (em inglês) — Um ótimo artigo para se ler que explica mais sobre a Web Animations API por baixo dos panos, e por que ela tem uma performance melhor do que os outros métodos de animação web</li>\n  <li><a href=\"https://github.com/web-animations/web-animations-js\" class=\"external\" rel=\" noopener\">web-animations-js</a> — O polyfill da Web Animations API</li>\n</ul>"}}],"toc":[{"text":"Conhecendo a Web Animations API","id":"conhecendo_a_web_animations_api"},{"text":"Suporte de Navegadores","id":"suporte_de_navegadores"},{"text":"Escrevendo Animações CSS com a Web Animations API","id":"escrevendo_animações_css_com_a_web_animations_api"},{"text":"Controlando a reprodução com play(), pause(), reverse() e updatePlaybackRate()","id":"controlando_a_reprodução_com_play_pause_reverse_e_updateplaybackrate"},{"text":"Extraindo informação das animações","id":"extraindo_informação_das_animações"},{"text":"Callbacks e promises","id":"callbacks_e_promises"},{"text":"Conclusão","id":"conclusão"},{"text":"Veja também","id":"veja_também"}],"summary":"A Web Animations API nos possibilita criar animações e controlar sua reprodução pelo JavaScript. Esse artigo vai te demonstrar esses conceitos com demonstrações e tutoriais com o temática de Alice no País das Maravilhas.","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Using the Web Animations API","locale":"en-US","native":"English (US)"},{"title":"Web Animations API を利用する","locale":"ja","native":"日本語"},{"title":"Using the Web Animations API","locale":"ru","native":"Русский"},{"title":"Using the Web Animations API","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"pt-br/web/api/web_animations_api/using_the_web_animations_api","github_url":"https://github.com/mdn/translated-content/blob/main/files/pt-br/web/api/web_animations_api/using_the_web_animations_api/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/pt-BR/docs/Web","title":"Tecnologia Web para desenvolvedores"},{"uri":"/pt-BR/docs/Web/API","title":"APIs da Web"},{"uri":"/pt-BR/docs/Web/API/Web_Animations_API","title":"Web Animations API"},{"uri":"/pt-BR/docs/Web/API/Web_Animations_API/Using_the_Web_Animations_API","title":"Usando a Web Animations API"}],"pageTitle":"Usando a Web Animations API - APIs da Web | MDN","noIndexing":false}}</script></body></html>