{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"Page Visibility API","mdn_url":"/pt-BR/docs/Web/API/Page_Visibility_API","locale":"pt-BR","native":"Português (do Brasil)","sidebarHTML":"<ol><li><strong><a href=\"/pt-BR/docs/Web/API/Page_Visibility_API\">Page Visibility API</a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Propriedades</summary><ol><li><a href=\"/pt-BR/docs/Web/API/Document/hidden\"><code>Document.hidden</code></a></li><li><a href=\"/pt-BR/docs/Web/API/Document/visibilityState\"><code>Document.visibilityState</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Eventos</summary><ol><li><a href=\"/pt-BR/docs/Web/API/Document/visibilitychange_event\"><code>Document</code>: <code>visibilitychange</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>A <strong>API de visibilidade de página</strong> deixa você saber quando uma página da web está visível ou em foco. Com a navegação em abas, existem razões para que quaisquer páginas da web que estejam sendo executadas em segundo plano e não visíveis para o usuário. Quando o usuário minimiza a página ou muda para outra aba, a API envia um evento <code><a href=\"/en-US/docs/Web/API/Document/visibilitychange_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">visibilitychange (en-US)</a></code> informando o estado de visibilidade da página. Você pode detectar o evento e realizar algumas ações ou modificar o seu comportamento. Por exemplo, se a sua aplicação web estiver reproduzindo um video, ela pode pausar durante o momento que o usuário estiver olhando para outra aba, e reproduz novamente quando o usuário retorna para a aba. O usuário não perde nenhuma parte do video e pode continuar assistindo.</p>"}},{"type":"prose","value":{"id":"benefícios","title":"Benefícios","isH3":true,"content":"<p>A API é particularmente util para economizar recursos dando aos desenvolvedores a oportunidade de não realizar tarefas desnecessárias quando a página não está visível.</p>"}},{"type":"prose","value":{"id":"casos_de_uso","title":"Casos de uso","isH3":true,"content":"<p>Alguns exemplos:</p>\n<ul>\n  <li>Um site tem um carrossel de imagens que não devem avançar para o próximo slide a não ser que o usuário esteja visualizando a página.</li>\n  <li>Uma aplicação mostrando um painel de informações não quer fazer requizições de atualizações ao servidor quando a página não estiver visível.</li>\n  <li>Uma página quer detectar quando está sendo prerenderizada para poder contar o número de visualizações de forma mais precisa.</li>\n</ul>\n<p>Desenvolvedores têm historicamente usado alternativas de se detectar isto. Por exemplo, registrando um handler onblur/onfocus na janela te ajuda a saber quando a sua página não é a ativa, mas isto não te diz se a sua página não está visível para o usuário. Já a API de Visibilidade de Página faz isto. (Quando comparada com a técnica de registrar handlers de onblur/onfocus na janela, uma diferencia chave é que a página <em>não</em> fica escondida quando outra janela é ativada e a janela do navegador perde o foco. A página só fica escondida quando o usuário troca para uma aba diferente ou minimiza a janela do navegador.)</p>"}},{"type":"prose","value":{"id":"exemplo","title":"Exemplo","isH3":false,"content":"<p>Veja <a href=\"http://daniemon.com/tech/webapps/page-visibility/\" class=\"external\" rel=\" noopener\">exemplo em caso real</a> (video com som).</p>\n<p>O exemplo, que pausa o video quando você troca para outra aba e volta a reproduzir quando você retorna, foi criado com o seguinte código:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// Configura o nome da propriedade hidden e o evento de mudança para visibilidade</span>\n<span class=\"token keyword\">var</span> hidden<span class=\"token punctuation\">,</span> visibilityChange<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> document<span class=\"token punctuation\">.</span>hidden <span class=\"token operator\">!==</span> <span class=\"token string\">\"undefined\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// Suporte para Opera 12.10 e Firefox 18 em diante</span>\n  hidden <span class=\"token operator\">=</span> <span class=\"token string\">\"hidden\"</span><span class=\"token punctuation\">;</span>\n  visibilityChange <span class=\"token operator\">=</span> <span class=\"token string\">\"visibilitychange\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> document<span class=\"token punctuation\">.</span>mozHidden <span class=\"token operator\">!==</span> <span class=\"token string\">\"undefined\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  hidden <span class=\"token operator\">=</span> <span class=\"token string\">\"mozHidden\"</span><span class=\"token punctuation\">;</span>\n  visibilityChange <span class=\"token operator\">=</span> <span class=\"token string\">\"mozvisibilitychange\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> document<span class=\"token punctuation\">.</span>msHidden <span class=\"token operator\">!==</span> <span class=\"token string\">\"undefined\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  hidden <span class=\"token operator\">=</span> <span class=\"token string\">\"msHidden\"</span><span class=\"token punctuation\">;</span>\n  visibilityChange <span class=\"token operator\">=</span> <span class=\"token string\">\"msvisibilitychange\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> document<span class=\"token punctuation\">.</span>webkitHidden <span class=\"token operator\">!==</span> <span class=\"token string\">\"undefined\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  hidden <span class=\"token operator\">=</span> <span class=\"token string\">\"webkitHidden\"</span><span class=\"token punctuation\">;</span>\n  visibilityChange <span class=\"token operator\">=</span> <span class=\"token string\">\"webkitvisibilitychange\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">var</span> videoElement <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"videoElement\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Se a página está escondida, pausa o video;</span>\n<span class=\"token comment\">// Se a página está visível, reproduz o video</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">handleVisibilityChange</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">[</span>hidden<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    videoElement<span class=\"token punctuation\">.</span><span class=\"token function\">pause</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    videoElement<span class=\"token punctuation\">.</span><span class=\"token function\">play</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Alerta se o navegador não suporta addEventListener ou a API de visibilidade da página</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> document<span class=\"token punctuation\">.</span>addEventListener <span class=\"token operator\">===</span> <span class=\"token string\">\"undefined\"</span> <span class=\"token operator\">||</span>\n  <span class=\"token keyword\">typeof</span> document<span class=\"token punctuation\">[</span>hidden<span class=\"token punctuation\">]</span> <span class=\"token operator\">===</span> <span class=\"token string\">\"undefined\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"This demo requires a browser, such as Google Chrome or Firefox, that supports the Page Visibility API.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Manipula o evento de mudança da visibilidade da página</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span>visibilityChange<span class=\"token punctuation\">,</span> handleVisibilityChange<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Reverte para o favicon existente para o site quando a página é fechada;</span>\n  <span class=\"token comment\">// caso contrário, o favicon continua como paused.png</span>\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"unload\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    favicon<span class=\"token punctuation\">.</span><span class=\"token function\">change</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/favicon.ico\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Quando o video é pausado, configura o favicon.</span>\n  <span class=\"token comment\">// Isso mostra a imagem paused.png</span>\n  videoElement<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"pause\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    favicon<span class=\"token punctuation\">.</span><span class=\"token function\">change</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"images/paused.png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Quando o video é reproduzido, configura o favicon.</span>\n  videoElement<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"play\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    favicon<span class=\"token punctuation\">.</span><span class=\"token function\">change</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"images/playing.png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Configura o título da aba com o tempo atual do video</span>\n  videoElement<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"timeupdate\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span>title <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span>videoElement<span class=\"token punctuation\">.</span>currentTime<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\" segundo(s)\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"visão_geral_das_propriedades","title":"Visão geral das propriedades","isH3":false,"content":""}},{"type":"prose","value":{"id":"document.hidden_somented_leitura","title":"<code>document.hidden</code> Somented leitura","isH3":true,"content":"<p>Retorna <code>true</code> se a página está escondida para o usuário, caso contrário, retorna <code>false</code>.</p>","titleAsText":"document.hidden Somented leitura"}},{"type":"prose","value":{"id":"document.visibilitystate_somente_leitura","title":"<code>document.visibilityState</code> Somente leitura","isH3":true,"content":"<p>É a <code>cadeia de caracteres que denota a visibilidade do documento</code>. Possíveis valores:</p>\n<ul>\n  <li><code>visible</code> : o conteúdo da página pode estar parcialmente visível. Na prática, isso significa que a página é a aba ativa de uma janela não minimizada.</li>\n  <li><code>hidden</code> : o conteúdo da página não está visível para o usuário. Na prática, isso significa que o documento está em uma aba inativa, em uma janela minimizada, ou o sistema operacional está com a tela travada.</li>\n  <li><code>prerender</code> : o conteúdo da página está sendo prerenderizado e não está visível para o usuário(considerado como escondida para motivos de <code>document.hidden</code>). O documento pode começar neste estado, mas nunca mudar dele para algum outro. Nota: a compatibilidade com navegadores é opcional.</li>\n  <li><code>unloaded</code> : a página está sendo removida da memória(a aba ou janela está sendo fechada). Nota: a compatibilidade com navegadores é opcional</li>\n</ul>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">//startSimulation e pauseSimulation definidas em outro lugar</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">handleVisibilityChange</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span>hidden<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">pauseSimulation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span>  <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">startSimulation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\ndocument<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"visibilitychange\"</span><span class=\"token punctuation\">,</span> handleVisibilityChange<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>","titleAsText":"document.visibilityState Somente leitura"}},{"type":"prose","value":{"id":"nota","title":"Nota","isH3":false,"content":"<p>Os estados de visibilidade de <a href=\"/pt-BR/docs/Web/HTML/Element/iframe\"><code>&lt;iframe&gt;</code></a> são os mesmos do documento pai. Esconder o iframe com propriedades CSS não ativa os eventos de visibilidade nem muda o estado do documento do conteúdo.</p>"}},{"type":"prose","value":{"id":"especificações","title":"Especificações","isH3":false,"content":"<table>\n  <thead>\n    <tr>\n      <th>Especificação</th>\n      <th>Estado</th>\n      <th>Comentário</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td><a href=\"https://www.w3.org/TR/page-visibility/\" hreflang=\"en\" lang=\"en\" class=\"external\" title=\"The 'Page Visibility (Second Edition)' specification\" rel=\" noopener\">Page Visibility (Second Edition)</a></td>\n      <td><span class=\"spec-rec\">Recomendação</span></td>\n      <td></td>\n    </tr>\n  </tbody>\n</table>"}},{"type":"browser_compatibility","value":{"title":"Compatibilidade com navegadores","id":"compatibilidade_com_navegadores","isH3":false,"query":"api.Document.visibilityState","dataURL":"/pt-BR/docs/Web/API/Page_Visibility_API/bcd.json"}},{"type":"prose","value":{"id":"veja_também","title":"Veja também","isH3":false,"content":"<ul>\n  <li>Descrição da <a href=\"https://blogs.msdn.com/b/ie/archive/2011/07/08/using-pc-hardware-more-efficiently-in-html5-new-web-performance-apis-part-2.aspx\" class=\"external\" rel=\" noopener\">API de Visibilidade de Página</a> do IEBlog.</li>\n  <li>Descrição da <a href=\"https://code.google.com/chrome/whitepapers/pagevisibility.html\" class=\"external\" rel=\" noopener\">API de visibilidade de Página</a> do Google</li>\n</ul>"}}],"toc":[{"text":"Exemplo","id":"exemplo"},{"text":"Visão geral das propriedades","id":"visão_geral_das_propriedades"},{"text":"Nota","id":"nota"},{"text":"Especificações","id":"especificações"},{"text":"Compatibilidade com navegadores","id":"compatibilidade_com_navegadores"},{"text":"Veja também","id":"veja_também"}],"summary":"A API de visibilidade de página deixa você saber quando uma página da web está visível ou em foco. Com a navegação em abas, existem razões para que quaisquer páginas da web que estejam sendo executadas em segundo plano e não visíveis para o usuário. Quando o usuário minimiza a página ou muda para outra aba, a API envia um evento visibilitychange (en-US) informando o estado de visibilidade da página. Você pode detectar o evento e realizar algumas ações ou modificar o seu comportamento. Por exemplo, se a sua aplicação web estiver reproduzindo um video, ela pode pausar durante o momento que o usuário estiver olhando para outra aba, e reproduz novamente quando o usuário retorna para a aba. O usuário não perde nenhuma parte do video e pode continuar assistindo.","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Page Visibility API","locale":"en-US","native":"English (US)"},{"title":"Page Visibility API","locale":"fr","native":"Français"},{"title":"Page Visibility API","locale":"ja","native":"日本語"},{"title":"Page Visibility API","locale":"ko","native":"한국어"},{"title":"Видимость страницы API","locale":"ru","native":"Русский"},{"title":"页面可见性 API","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"pt-br/web/api/page_visibility_api","github_url":"https://github.com/mdn/translated-content/blob/main/files/pt-br/web/api/page_visibility_api/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/pt-BR/docs/Web","title":"Tecnologia Web para desenvolvedores"},{"uri":"/pt-BR/docs/Web/API","title":"APIs da Web"},{"uri":"/pt-BR/docs/Web/API/Page_Visibility_API","title":"Page Visibility API"}],"pageTitle":"Page Visibility API - APIs da Web | MDN","noIndexing":false}}