{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"Uso de busca Cross-global","mdn_url":"/pt-BR/docs/Web/API/Fetch_API/Cross-global_fetch_usage","locale":"pt-BR","native":"Português (do Brasil)","sidebarHTML":"","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>Este artigo explica um \"edge case\" (um problema ou situação que ocorre apenas em um parâmetro operacional extremo) que ocorre ao utilizar fetch (e potencialmente outras APIs que exibem o mesmo tipo de comportamento de recuperação de recurso). Quando uma busca de cross-origin envolvendo uma URL relativa é iniciada a partir de um <a href=\"/pt-BR/docs/Web/HTML/Element/iframe\"><code>&lt;iframe&gt;</code></a>, a URL relativa costumava ser resolvida na localização global atual, em vez da localização do iframe.</p>"}},{"type":"prose","value":{"id":"o_edge_case","title":"O \"edge case\"","isH3":false,"content":"<p>Muitos sites nunca se deparam com este caso extremo. Para que isso aconteça:</p>\n<ul>\n  <li>Você precisa de um iframe de mesma origem</li>\n  <li>Esse iframe de mesma origem precisa ter um local com um URL base diferente</li>\n  <li>Você tem que usar a função de busca global, por exemplo, frame.contentWindow.fetch ()</li>\n  <li>A URL passada precisa ser relativa</li>\n</ul>"}},{"type":"prose","value":{"id":"o_problema","title":"O problema","isH3":false,"content":"<p>No passado, resolveríamos o URL relativo contra o global atual, por exemplo:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">let</span> absolute <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">URL</span><span class=\"token punctuation\">(</span>relative<span class=\"token punctuation\">,</span> window<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>href<span class=\"token punctuation\">)</span>\n</code></pre></div>\n<p>Isto não é um problema como tal. É que diferentes APIs que exibem esse tipo de comportamento estavam fazendo isso de maneira inconsistente com o comportamento definido na especificação, o que poderia levar a problemas mais adiante.</p>"}},{"type":"prose","value":{"id":"a_solução","title":"A solução","isH3":false,"content":"<p>No Firefox 60 em diante, o Mozilla resolve a URL relativa contra o global que possui a função <code>fetch()</code> que está sendo usada (veja <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=1432272\" class=\"external\" rel=\" noopener\">bug&nbsp;1432272</a>). Portanto, no caso descrito acima, ele é resolvido em relação à localização do iframe:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">let</span> absolute <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">URL</span><span class=\"token punctuation\">(</span>relative<span class=\"token punctuation\">,</span> frame<span class=\"token punctuation\">.</span>contentWindow<span class=\"token punctuation\">.</span>location<span class=\"token punctuation\">.</span>href<span class=\"token punctuation\">)</span>\n</code></pre></div>\n<p>Há muita discussão em andamento sobre a obtenção de novas especificações para se alinhar a essa mudança de comportamento, a fim de mitigar possíveis problemas no futuro.</p>"}}],"toc":[{"text":"O \"edge case\"","id":"o_edge_case"},{"text":"O problema","id":"o_problema"},{"text":"A solução","id":"a_solução"}],"summary":"Este artigo explica um \"edge case\" (um problema ou situação que ocorre apenas em um parâmetro operacional extremo) que ocorre ao utilizar fetch (e potencialmente outras APIs que exibem o mesmo tipo de comportamento de recuperação de recurso). Quando uma busca de cross-origin envolvendo uma URL relativa é iniciada a partir de um <iframe>, a URL relativa costumava ser resolvida na localização global atual, em vez da localização do iframe.","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Cross-global fetch usage","locale":"en-US","native":"English (US)"},{"title":"グローバル間フェッチの使用","locale":"ja","native":"日本語"},{"title":"Cross-global fetch usage","locale":"ru","native":"Русский"},{"title":"Cross-global fetch usage","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"pt-br/web/api/fetch_api/cross-global_fetch_usage","github_url":"https://github.com/mdn/translated-content/blob/main/files/pt-br/web/api/fetch_api/cross-global_fetch_usage/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/pt-BR/docs/Web","title":"Tecnologia Web para desenvolvedores"},{"uri":"/pt-BR/docs/Web/API","title":"APIs da Web"},{"uri":"/pt-BR/docs/Web/API/Fetch_API","title":"Fetch API"},{"uri":"/pt-BR/docs/Web/API/Fetch_API/Cross-global_fetch_usage","title":"Uso de busca Cross-global"}],"pageTitle":"Uso de busca Cross-global - APIs da Web | MDN","noIndexing":false}}