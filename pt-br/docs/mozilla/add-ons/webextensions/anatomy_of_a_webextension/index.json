{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"Anatomia de uma WebExtension","mdn_url":"/pt-BR/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension","locale":"pt-BR","native":"Português (do Brasil)","sidebarHTML":"","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>Uma extensão consiste de uma coleção de arquivos, empacotados para distribuição e instalação. Nesse artigo vamos falar rapidamente sobre os arquivos que podem estar presentes em uma extensão.</p>\n<p>Toda extensão contém um arquivo chamado <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension#manifest.json\">\"manifest.json\"</a>. Ele pode conter ponteiros para quatro outros tipos de arquivos:</p>\n<ul>\n  <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension#background_pages\">background pages</a>: implementação de lógica de longa duração</li>\n  <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension#content_scripts\">content scripts</a>: executado no contexto de páginas web</li>\n  <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension#browser_actions\">browser action files</a>: implementação de botões na toolbar</li>\n  <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension#web_accessible_resources\">web accessible resources</a>: torna o conteúdo do pacote acessível a páginas web e scripts de conteúdo</li>\n</ul>\n<p>\n  <img src=\"https://mdn.mozillademos.org/files/11465/webextension-anatomy.svg\" alt=\"\" loading=\"lazy\">\n</p>"}},{"type":"prose","value":{"id":"manifest.json","title":"manifest.json","isH3":false,"content":"<p>Esse é o único arquivo que está presente em toda WebExtension. Ele contém metadados básicos sobre a extensão, tais como o nome, a versão e as permissões que ela necessita. Também provê ponteiros para outros arquivos na extensão.</p>\n<p>Para mais detalhes sobre o arquivo \"manifest.json\", acesse a <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json\">página de referência.</a></p>"}},{"type":"prose","value":{"id":"background_pages","title":"Background pages","isH3":false,"content":"<p>Muitas vezes as WebExtensions precisam manter um estado ou performance operativa de longa duração, independentemente do ciclo de vida das páginas ou janelas do navegador. As background pages e os scripts servem pra isso.</p>\n<p>Background scripts são carregados assim que a extensão tem sua carga concluída, e permanecem carregados até que ela seja desativada ou desinstalada. No script você pode fazer uso de qualquer uma das WbExtensions APIs.</p>\n<p>Os background scripts não possuem acesso direto às páginas web. No entanto, eles podem carregar scripts de conteúdo na página, e podem se comunicar com os scripts de conteúdo usando uma API de envio de mensagens.</p>\n<p>Você pode incluir uma background page usando a chave <code>background</code> no \"manifest.json\". Você não precisa informar a sua própria background page. Se você incluir uma página de background, um arquivo vazio será criado.</p>\n<div class=\"code-example\"><pre class=\"brush: json notranslate\"><code><span class=\"token comment\">// manifest.json</span>\n\n<span class=\"token property\">\"background\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"background-script.js\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>No entanto, você pode escolher informar a página de background como um arquivo HTML a parte:</p>\n<div class=\"code-example\"><pre class=\"brush: json notranslate\"><code><span class=\"token comment\">// manifest.json</span>\n\n<span class=\"token property\">\"background\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"page\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"background-page.html\"</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"scripts_de_conteúdo","title":"Scripts de conteúdo","isH3":false,"content":"<p>Use os scripts de conteúdo para acessar e manipular páginas web. Scripts de conteúdo são carregados dentro das páginas web e executados em um contexto particular nessa página.</p>\n<p>Eles podem ver e manipular páginas DOM,</p>\n<p>Scripts de conteúdo podem ver e manipular o DOM das páginas, da mesma forma como os scripts normais carregados pela página.</p>\n<p>Ao contrário dos scripts normais, os scripts de conteúdo podem:</p>\n<ul>\n  <li>fazer requisições XHR cross-domain</li>\n  <li>utilizar um pequeno subconjunto de WebExtension APIs</li>\n  <li>trocar mensagens com os scripts de background e acessar indiretamente todas as WebExtensions APIs.</li>\n</ul>\n<p>Scripts de conteúdo não podem acessar diretamente os scripts normais da página, mas podem trocar mensagens com eles através do uso da API window.postMessage.</p>\n<p>Normalmente, quando falamos de scripts de conteúdo, estamos nos referindo a JavaScript, mas é possível injetar CSS em paginas web que utilizam o mesmo mecanismo.</p>\n<p>Você pode injetar scripts de conteúdo em páginas web de duas formas: anexando os scripts para todas as páginas correspondentes a um padrão de URL, ou através de programação a partir de um script de background.</p>\n<p>Para injetar scripts em páginas com base na URL, use a chave <code>content_scripts</code> no \"manifest.json\", informando um ou mais scripts e um array com os padrões:</p>\n<div class=\"code-example\"><pre class=\"brush: json notranslate\"><code><span class=\"token comment\">// manifest.json</span>\n\n<span class=\"token property\">\"content_scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"matches\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"*://*.mozilla.org/*\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"js\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"my-script.js\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span>\n</code></pre></div>\n<p>Se a URL da página corresponder aos padrões passados na chave <code>matches</code>, os scripts passados na chave <code>js</code> serão carregados.</p>\n<p>Para injetar os scripts na página via programação (por exemplo, quando o usuário clicar em um botão) use a API <code>tabs</code>:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// background.js</span>\n\nchrome<span class=\"token punctuation\">.</span>tabs<span class=\"token punctuation\">.</span><span class=\"token function\">executeScript</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">file</span><span class=\"token operator\">:</span> <span class=\"token string\">\"my-script.js\"</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Aprenda mais sobre scripts de conteúdo lendo sua <a href=\"/en-US/docs/Mozilla/Add-ons/SDK/Guides/Content_Scripts\">documentação</a>.</p>"}},{"type":"prose","value":{"id":"ações_de_navegador","title":"Ações de navegador","isH3":false,"content":"<p>Uma \"ação de navegador\" é um botão que você pode adicionar na barra de ferramentas do Firefox. O botão tem um ícone. Você pode informar múltiplos ícones em diferentes tamanhos: fazendo isso, o navegador irá selecionar o ícone mais adequado para a densidade de pixels da tela.</p>\n<p>Opcionalmente, você pode definir um popup para o botão usando HTML, CSS e JavaScript.</p>\n<p>Se você não definir um popup, quando o usuário clicar no botão um evento será disparado, que pode ser ouvido nos scripts de background.</p>\n<p>Se você define um popup, o evento não é disparado: ao invés disso, o popup será mostrado para que o usuário possa interagir. Os scripts executados em popup são capazes de utilizar WebExtension APIs.</p>\n<p>Para aprender mais sobre ações de navegador, consulte a página da API.</p>"}},{"type":"prose","value":{"id":"recursos_acessíveis_na_web","title":"Recursos acessíveis na web","isH3":false,"content":"<p>Recursos acessíveis na web são recursos como imagens, HTML, CSS, JavaScript, que podem ser incluídos na extensão e quer tornar acessível aos scripts de conteúdo e aos scripts da página. Eles podem ser referenciados a partir de scripts de página e de conteúdo, usando um URI scheme especial.</p>\n<p>Por exemplo, se um script de conteúdo quer inserir algumas imagens em páginas da web, você pode incluí-los na extensão e torná-los acessíveis na web. Em seguida o script de conteúdo pode criar e acrescentar tags <a href=\"/pt-BR/docs/Web/HTML/Element/img\">img</a> que fazem referência às imagens através do atributo <code>src</code>.</p>\n<p>Para entender mais, veja a documentação sobre chaves no manifest.json em <a href=\"/pt-BR/docs/Mozilla/Add-ons/WebExtensions/manifest.json/web_accessible_resources\">recursos acessíveis na web.</a></p>"}}],"toc":[{"text":"manifest.json","id":"manifest.json"},{"text":"Background pages","id":"background_pages"},{"text":"Scripts de conteúdo","id":"scripts_de_conteúdo"},{"text":"Ações de navegador","id":"ações_de_navegador"},{"text":"Recursos acessíveis na web","id":"recursos_acessíveis_na_web"}],"summary":"Uma extensão consiste de uma coleção de arquivos, empacotados para distribuição e instalação. Nesse artigo vamos falar rapidamente sobre os arquivos que podem estar presentes em uma extensão.","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Anatomy of an extension","locale":"en-US","native":"English (US)"},{"title":"Anatomía de una extension","locale":"es","native":"Español"},{"title":"Anatomie d'une WebExtension","locale":"fr","native":"Français"},{"title":"拡張機能の中身","locale":"ja","native":"日本語"},{"title":"Anatomy of an extension","locale":"ko","native":"한국어"},{"title":"Анатомия Расширения","locale":"ru","native":"Русский"},{"title":"扩展剖析","locale":"zh-CN","native":"中文 (简体)"},{"title":"Anatomy of an extension","locale":"zh-TW","native":"正體中文 (繁體)"}],"source":{"folder":"pt-br/mozilla/add-ons/webextensions/anatomy_of_a_webextension","github_url":"https://github.com/mdn/translated-content/blob/main/files/pt-br/mozilla/add-ons/webextensions/anatomy_of_a_webextension/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/pt-BR/docs/Mozilla","title":"Mozilla"},{"uri":"/pt-BR/docs/Mozilla/Add-ons","title":"Complementos"},{"uri":"/pt-BR/docs/Mozilla/Add-ons/WebExtensions","title":"Extensões do navegador"},{"uri":"/pt-BR/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension","title":"Anatomia de uma WebExtension"}],"pageTitle":"Anatomia de uma WebExtension - Mozilla | MDN","noIndexing":false}}