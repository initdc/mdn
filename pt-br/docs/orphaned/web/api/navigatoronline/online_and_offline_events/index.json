{"doc":{"isMarkdown":false,"isTranslated":true,"isActive":true,"flaws":{},"title":"Eventos on-line e off-line","mdn_url":"/pt-BR/docs/orphaned/Web/API/NavigatorOnLine/Online_and_offline_events","locale":"pt-BR","native":"Português (do Brasil)","sidebarHTML":"","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>IAlguns navegadores utilizam <a class=\"external\" href=\"https://www.whatwg.org/specs/web-apps/current-work/#offline\" rel=\" noopener\">Online/Offline events</a> relacionados à <a class=\"external\" href=\"https://www.whatwg.org/specs/web-apps/current-work/\" rel=\" noopener\">WHATWG Web Applications 1.0 specification</a>.</p>"}},{"type":"prose","value":{"id":"overview","title":"Introdução","isH3":true,"content":"<p>Para criar um bom aplicativo off-line, primeiramente é necessário que você saiba quando o aplicativo está off-line. Consequentemente, você também precisará saber quando seu aplicativo retorna ao estado on-line novamente, ou seja, os eventos são:</p>\n\n<ol>\n <li>Você precisa saber quando o usuário está on-line novamente, assim você pode sincronizar novamente com o servidor.</li>\n <li>Você precisa saber quando o usuário está off-line, então você deverá agendar os acessos ao servidor para mais tarde.</li>\n</ol>\n\n<p>Este é o processo que os eventos on-line/off-line ajudam a facilitar.</p>\n\n<p>Seu aplicativo também poderá precisar estabelecer que certos documentos deverão ser mantidos em um cache off-line. Você pode saber mais sobre isso no artigo <a href=\"/en-US/Offline_resources_in_Firefox\" title=\"en/Offline_resources_in_Firefox\">Offline resources in Firefox</a>.</p>"}},{"type":"prose","value":{"id":"api","title":"API","isH3":true,"content":"<h4 id=\"navigator.online\" name=\"navigator.onLine\"><code>navigator.onLine</code></h4>\n\n<p><code><a href=\"/en-US/DOM/window.navigator.onLine\" title=\"en/DOM/window.navigator.onLine\">navigator.onLine</a></code> é uma propriedade que mantém valores <code>true</code>/<code>false</code> (<code>true</code> para on-line, <code>false</code> para off-line). Esta propriedade é atualizada quando o usuário entra em \"Modo Off-line\" clicando no item de menu correspondente (Arquivo -&gt; Modo Off-line).</p>\n\n<p>Essa propriedade também deverá ser atualizada toda vez que o navegador perde a conexão com a Internet. De acordo com a especificação:</p>\n\n<blockquote cite=\"http://www.whatwg.org/specs/web-apps/current-work/#offline\">A propriedade <code>navigator.onLine</code> deve retornar false se o usuário clicar num link ou se um aplicativo tentar contatar uma página remota e não estiver conectado à Internet ou se o navegador souber que a tentativa irá falhar por qualquer motivo...</blockquote>\n\n<p>O Firefox 2 atualiza esta propriedade quando se entra em Modo Off-line ou sai do mesmo e também quando a conexão com a Internet é perdida ou reestabelecida no Windows e no Linux.</p>\n\n<p>Essa propriedade existiu em versões mais antigas do Firefox e do Internet Explorer (a especificação acima foi baseada nestas implementações anteriores), então você pode começar a utilizá-la imediatamente. A auto-detecção de estado de rede foi implementada no Firefox 2.</p>\n\n<h4 id=\".22online.22_and_.22offline.22_events\" name=\".22online.22_and_.22offline.22_events\">Eventos \"<code>on-line</code>\" e \"<code>off-line</code>\"</h4>\n\n<p>O <a href=\"/en-US/Firefox_3_for_developers\" title=\"en/Firefox_3_for_developers\">Firefox 3</a> implementou dois novos eventos: \"<code>on-line</code>\" e \"<code>off-line</code>\". Estes dois eventos são chamados na tag <code>&lt;body&gt;</code> de cada página quando o navegador muda entre os modos on e off-line. Também, esses eventos são propagados a partir do <code>document.body</code>, para <code>document</code>, terminando em <code>window</code>. Ambos eventos não podem ser interrompidos (você não pode prevenir que o usuário fique on-line ou off-line).</p>\n\n<p>Você pode resgistrar <em>listeners</em> para esses eventos em caminhos conhecidos:</p>\n\n<ul>\n <li>usando <code><a href=\"/en-US/DOM/element.addEventListener\" title=\"en/DOM/element.addEventListener\">addEventListener</a></code> em <code>window</code>, <code>document</code>, ou <code>document.body</code></li>\n <li>configurando propriedades <code>.ononline</code> ou <code>.onoffline</code> em <code>document</code> ou <code>document.body</code> para um objeto <code>Function</code> em JavaScript. (<strong>Obs.:</strong> <code>window.ononline</code> ou <code>window.onoffline</code> não funcionarão por questões de compatibilidade.)</li>\n <li>especificando atributos <code>ononline=\"...\"</code> or <code>onoffline=\"...\"</code>  na tag <code>&lt;body&gt;</code> do HTML.</li>\n</ul>"}},{"type":"prose","value":{"id":"example","title":"Example","isH3":true,"content":"<p>Há <a class=\"link-https external\" href=\"https://bugzilla.mozilla.org/attachment.cgi?id=220609\" rel=\" noopener\">a simple test case</a> que você pode rodar para ver como esses eventos funcionam. XXX Quando os testes para isso forem criados, redirecione para eles e atualize este exemplo -nickolay</p>\n\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code> <span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">doctype</span> <span class=\"token name\">html</span><span class=\"token punctuation\">&gt;</span></span>\n <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">&gt;</span></span>\n <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">&gt;</span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token script\"><span class=\"token language-javascript\">\n     <span class=\"token keyword\">function</span> <span class=\"token function\">updateOnlineStatus</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">msg</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token keyword\">var</span> status <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"status\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       <span class=\"token keyword\">var</span> condition <span class=\"token operator\">=</span> navigator<span class=\"token punctuation\">.</span>onLine <span class=\"token operator\">?</span> <span class=\"token string\">\"ONLINE\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"OFFLINE\"</span><span class=\"token punctuation\">;</span>\n       status<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"class\"</span><span class=\"token punctuation\">,</span> condition<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       <span class=\"token keyword\">var</span> state <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"state\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       state<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> condition<span class=\"token punctuation\">;</span>\n       <span class=\"token keyword\">var</span> log <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"log\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       log<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">createTextNode</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Event: \"</span> <span class=\"token operator\">+</span> msg <span class=\"token operator\">+</span> <span class=\"token string\">\"; status=\"</span> <span class=\"token operator\">+</span> condition <span class=\"token operator\">+</span> <span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n     <span class=\"token punctuation\">}</span>\n     <span class=\"token keyword\">function</span> <span class=\"token function\">loaded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n       <span class=\"token function\">updateOnlineStatus</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"load\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"offline\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n         <span class=\"token function\">updateOnlineStatus</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"offline\"</span><span class=\"token punctuation\">)</span>\n       <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n       document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"online\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n         <span class=\"token function\">updateOnlineStatus</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"online\"</span><span class=\"token punctuation\">)</span>\n       <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n     <span class=\"token punctuation\">}</span>\n   </span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token style\"><span class=\"token language-css\">...</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">&gt;</span></span>\n <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">&gt;</span></span>\n <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span> <span class=\"token special-attr\"><span class=\"token attr-name\">onload</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value javascript language-javascript\"><span class=\"token function\">loaded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">&gt;</span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>status<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>state<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>log<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">&gt;</span></span>\n <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"references","title":"Notas","isH3":true,"content":"<p>Se a API não estiver implementada no navegador, você pode usar outros sinais para detectar quando se está off-line, inclusive receber <a class=\"external\" href=\"https://www.html5rocks.com/en/mobile/workingoffthegrid.html#toc-appcache\" rel=\" noopener\">AppCache error events</a> e <a class=\"external\" href=\"https://www.html5rocks.com/en/mobile/workingoffthegrid.html#toc-xml-http-request\" rel=\" noopener\">responses from XMLHttpRequest</a>.</p>"}},{"type":"prose","value":{"id":"references_2","title":"Referências","isH3":true,"content":"<ul>\n <li><a class=\"external\" href=\"https://www.whatwg.org/specs/web-apps/current-work/#offline\" rel=\" noopener\">'Online/Offline events' section from the WHATWG Web Applications 1.0 Specification</a></li>\n <li><a class=\"link-https external\" href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=336359\" rel=\" noopener\">The bug tracking online/offline events implementation in Firefox</a> and a <a class=\"link-https external\" href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=336682\" rel=\" noopener\">follow-up</a></li>\n <li><a class=\"link-https external\" href=\"https://bugzilla.mozilla.org/attachment.cgi?id=220609\" rel=\" noopener\">A simple test case</a></li>\n <li><a class=\"external\" href=\"http://ejohn.org/blog/offline-events/\" rel=\" noopener\">An explanation of Online/Offline events</a></li>\n <li><a class=\"external\" href=\"https://hacks.mozilla.org/2010/01/offline-web-applications/\" rel=\" noopener\">offline web applications</a> em hacks.mozilla.org - mostra um aplicativo off-line e explica como funciona.</li>\n</ul>"}}],"toc":[],"summary":"IAlguns navegadores utilizam Online/Offline events relacionados à WHATWG Web Applications 1.0 specification.","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Eventos online y offline","locale":"es","native":"Español"}],"source":{"folder":"pt-br/orphaned/web/api/navigatoronline/online_and_offline_events","github_url":"https://github.com/mdn/translated-content/blob/main/files/pt-br/orphaned/web/api/navigatoronline/online_and_offline_events/index.html","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.html"},"parents":[{"uri":"/pt-BR/docs/orphaned/Web/API/NavigatorOnLine","title":"NavigatorOnLine"},{"uri":"/pt-BR/docs/orphaned/Web/API/NavigatorOnLine/Online_and_offline_events","title":"Eventos on-line e off-line"}],"pageTitle":"Eventos on-line e off-line | MDN","noIndexing":true}}