<!DOCTYPE html><html lang="en-US" prefix="og: https://ogp.me/ns#"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="/favicon-48x48.97046865.png"><link rel="apple-touch-icon" href="/apple-touch-icon.0ea0fa02.png"><meta name="theme-color" content="#ffffff"><link rel="manifest" href="/manifest.56b1cedc.json"><link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="MDN Web Docs"><script>Array.prototype.flat&&Array.prototype.includes||document.write('<script src="https://polyfill.io/v3/polyfill.min.js?features=Array.prototype.flat%2Ces6"><\/script>')</script><title>Anatomia de um v√≠deo game - Desenvolvimento de jogos | MDN</title><link rel="preload" as="font" type="font/woff2" crossorigin="" href="/static/media/ZillaSlab-Bold.subset.0beac26b.woff2"><link rel="alternate" title="Anatomia de um v√≠deo game" href="https://developer.mozilla.org/pt-BR/docs/Games/Anatomy" hreflang="pt"><link rel="alternate" title="ÂâñÊûêÊ∏∏ÊàèÁªìÊûÑ" href="https://developer.mozilla.org/zh-CN/docs/Games/Anatomy" hreflang="zh"><link rel="alternate" title="–ê–Ω–∞—Ç–æ–º–∏—è –≤–∏–¥–µ–æ–∏–≥—Ä—ã" href="https://developer.mozilla.org/ru/docs/Games/Anatomy" hreflang="ru"><link rel="alternate" title="„Éì„Éá„Ç™„Ç≤„Éº„É†„ÅÆËß£ÂâñÂ≠¶" href="https://developer.mozilla.org/ja/docs/Games/Anatomy" hreflang="ja"><link rel="alternate" title="Anatomie d'un jeu vid√©o" href="https://developer.mozilla.org/fr/docs/Games/Anatomy" hreflang="fr"><link rel="alternate" title="Anatomy of a video game" href="https://developer.mozilla.org/en-US/docs/Games/Anatomy" hreflang="en"><meta name="description" content="I want to be clear that any of the above, or none of them, could be best for your game. The correct decision entirely depends on the trade-offs that you are willing (and unwilling) to make. The concern is mostly with switching to another option. Fortunately, I do not have any experience with this but I have heard it is an excruciating game of Whack-a-Mole."><meta property="og:url" content="https://developer.mozilla.org/pt-BR/docs/Games/Anatomy"><meta property="og:title" content="Anatomia de um v√≠deo game - Desenvolvimento de jogos | MDN"><meta property="og:description" content="I want to be clear that any of the above, or none of them, could be best for your game. The correct decision entirely depends on the trade-offs that you are willing (and unwilling) to make. The concern is mostly with switching to another option. Fortunately, I do not have any experience with this but I have heard it is an excruciating game of Whack-a-Mole."><meta property="og:locale" content="pt-BR"><meta property="og:image" content="https://developer.mozilla.org/mdn-social-share.0ca9dbda.png"><meta property="twitter:card" content="summary_large_image"><meta name="robots" content="index, follow"><link rel="canonical" href="https://developer.mozilla.org/pt-BR/docs/Games/Anatomy"><style media="print">.breadcrumbs-container,.document-toc-container,.language-menu,.language-toggle,.on-github,.page-footer,.page-header-main,nav.sidebar,ul.prev-next{display:none!important}.main-page-content,.main-page-content pre{padding:2px}.main-page-content pre{border-left-width:2px}</style><link href="/static/css/main.55b68e13.chunk.css" rel="stylesheet"><script src="/static/js/runtime-main.4bb4c356.js" defer=""></script><script src="/static/js/4.a756dea3.chunk.js" defer=""></script><script src="/static/js/main.d4d565e0.chunk.js" defer=""></script></head><body><div id="root"><ul id="nav-access" class="a11y-nav"><li><a id="skip-main" href="#content">Skip to main content</a></li><li><a id="skip-search" href="#main-q">Skip to search</a></li><li><a id="skip-select-language" href="#select-language">Skip to select language</a></li></ul><div class="page-wrapper document-page"><header class="page-header"><a href="/pt-BR/" class="logo" aria-label="MDN Web Docs"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 451.74 135"><path d="M7.14 8.35v111.06h111.05V8.35zm103.71 56c-.48.92-1 1.79-1.46 2.71a3.44 3.44 0 01-3.54 2 2.4 2.4 0 00-1.55.5c-1.37.9-2.76 1.79-4.18 2.63a7.33 7.33 0 01-6.35.34 29.71 29.71 0 00-10.63-2 11.7 11.7 0 00-9.46 4.31 14.84 14.84 0 00-2.13 4.29c-1.24 3.07-2.3 21.38-2.3 26.05 0 0-17.62-3.42-34.15-20.34l4.31-11.32h-13.5l9.76-10.35h-16.8l9.77-10.34H12.69L30.45 34a40.9 40.9 0 0119.77-10.83c7.1-1.22 8.93-.53 13.31.77l2.43.73.85.25 3.1.95a12.56 12.56 0 006.21.09 11.37 11.37 0 018.25 1 8.24 8.24 0 014.1 6.22 7.29 7.29 0 003.61 5.49 59.45 59.45 0 009.32 4.11c2.27.86 4.54 1.84 6.79 2.72a6.81 6.81 0 012.86 2.06 4.81 4.81 0 011.1 2.73c.14 2 .37 4 .47 6a15.24 15.24 0 01-1.77 8.03zM320.12 39.62a5.42 5.42 0 00-4.53 2.13 7.36 7.36 0 00-1.7 4.43v2.36a6.28 6.28 0 001.7 4.46 5.63 5.63 0 004.3 1.82 5.12 5.12 0 004.57-2.27A9.7 9.7 0 00326 47a8.11 8.11 0 00-1.67-5.52 5.36 5.36 0 00-4.21-1.86zM387.38 39.53a5.52 5.52 0 00-4.7 2.15 8.8 8.8 0 00-1.63 5.49 9.23 9.23 0 001.58 5.45 5.38 5.38 0 004.7 2.25 5.61 5.61 0 004.74-2.2 8.91 8.91 0 001.68-5.59 8.24 8.24 0 00-1.75-5.52 5.76 5.76 0 00-4.62-2.03zM299.47 41.35a4.34 4.34 0 00-4-1.92 4.55 4.55 0 00-3.89 1.73 8.37 8.37 0 00-1.58 4.17h10.48a6.3 6.3 0 00-1.01-3.98zM357.74 30.75H352v23.31h5.72q5.47 0 8.35-3t2.93-8.65q0-5.43-2.88-8.55t-8.38-3.11z"></path><path d="M121.55 8.35v70.8h323V8.35zm42.21 22.45h-4V54h3.68v3.73h-11.25V54h3.31V36.79h-.19l-9.63 19.12h-2.12l-10-19.4h-.19V54h3.45v3.73h-11.15V54h3.68V30.8h-4v-3.73H133l11.66 22.56h.19l11.18-22.56h7.7zm29.12 22.67q-4.11 4.28-11.38 4.28h-14.06v-3.69h3.73V30.75h-3.73v-3.68h13.83q7.59 0 11.66 4.29a15.4 15.4 0 014 11 15.33 15.33 0 01-4.05 11.11zm38.89-22.67h-3.68v27h-2.6L208.08 35h-.19v19h4.67v3.73h-12.22V54h3.49V30.8h-4v-3.73h7.08l16.9 22.09h.19V30.8h-4.58v-3.73h12.32zm43.8 27h-3.31l-7.83-23.18h-.19l-7.55 23.18h-3.35l-8.78-27h-2.65v-3.73H253v3.73h-3.87L255 50.71h.23l6.61-19.91H259v-3.73h11v3.73h-2.78l6.61 20.1h.23l5.43-20.1h-4.15v-3.73h11v3.73h-2.54zm26.71-1.51a9.66 9.66 0 01-6.42 2 10.2 10.2 0 01-7.41-2.74c-1.89-1.82-2.83-4.47-2.83-7.93a12.37 12.37 0 012.64-8.12 9 9 0 017.32-3.21 8.62 8.62 0 016.75 2.69 9.65 9.65 0 012.45 6.52 13.67 13.67 0 01-.28 2.69H290q.29 6.71 6.18 6.7a5.2 5.2 0 003.71-1.18 5.82 5.82 0 001.67-2.83l3.45.71a7.21 7.21 0 01-2.73 4.65zm25.77-1.63c-1.51 2.4-3.92 3.61-7.22 3.61s-5.84-1.29-7.22-3.87c0 .25-.1.82-.21 1.7s-.19 1.44-.22 1.7H309c.16-1 .31-2 .47-3.07a21.42 21.42 0 00.24-3.16v-23h-3.4v-3.3h7.55V40.9a9.76 9.76 0 012.67-3.28 7.33 7.33 0 014.74-1.4 8.48 8.48 0 016.5 2.78q2.55 2.74 2.55 7.74a14.6 14.6 0 01-2.27 7.87zm41.39-1.14q-4.11 4.28-11.37 4.28H344v-3.74h3.73V30.75H344v-3.68h13.83q7.59 0 11.66 4.29a15.41 15.41 0 014.06 11 15.34 15.34 0 01-4.11 11.11zm25.65 1.68a10.53 10.53 0 01-7.9 3.07 10 10 0 01-7.63-3 10.93 10.93 0 01-2.8-7.83 12.13 12.13 0 012.69-7.93q2.69-3.3 8-3.3t8 3.28a12 12 0 012.64 7.76 10.86 10.86 0 01-3 7.9zm22.61.57c-1.4 1.66-3.63 2.5-6.68 2.5a9.58 9.58 0 01-7.15-2.76q-2.72-2.76-2.71-7.91a12.25 12.25 0 012.69-8 9.17 9.17 0 017.5-3.28 15 15 0 013.82.48 10.37 10.37 0 013.5 1.65l.85 5.47-3.35.38-.76-3.54a8.07 8.07 0 00-4.11-1 4.9 4.9 0 00-4.39 2.15 9.93 9.93 0 00-1.41 5.55 8.9 8.9 0 001.5 5.38 5.23 5.23 0 004.44 2c2.92 0 4.67-1.7 5.23-5.1l3.5.71a10.34 10.34 0 01-2.47 5.27zm20.48.75a11.68 11.68 0 01-6.63 1.75 15.52 15.52 0 01-8.26-2.08L424 51l3.26.33-.1 2.74a7 7 0 002.06.66 12.63 12.63 0 002.19.19 8.68 8.68 0 003.66-.75 2.5 2.5 0 001.63-2.36 2.25 2.25 0 00-1.32-2.2 12.65 12.65 0 00-3.28-1 47.39 47.39 0 01-3.9-.82 7.5 7.5 0 01-3.25-1.7 4.67 4.67 0 01-1.33-3.66c0-2.36.88-4 2.62-4.91a12 12 0 015.6-1.37 15 15 0 014.08.55 16.65 16.65 0 013.47 1.39l.47 5.1-3.3.37-.48-3.3a9.5 9.5 0 00-4.06-.9 5.62 5.62 0 00-2.87.66 2.33 2.33 0 00-1.15 2.25 2.13 2.13 0 001.3 2.07 11.91 11.91 0 003.21.92 36.69 36.69 0 013.82.83 7.46 7.46 0 013.21 1.74 4.9 4.9 0 011.3 3.73 5.56 5.56 0 01-2.66 4.91z"></path><path d="M181.17 30.75h-5.71v23.31h5.71q5.47 0 8.36-3t2.88-8.61q0-5.43-2.88-8.55t-8.36-3.15zM121.63 119.32V81.74h114.91v37.58zM153.22 109h-2v-6.85a4.8 4.8 0 00-1.58-4 5.57 5.57 0 00-3.55-1.26 5 5 0 00-4.92 3.26 4.19 4.19 0 00-1.88-2.46 5.82 5.82 0 00-3-.8 4.89 4.89 0 00-4.56 2.56v-2.21h-6.28v3.26h2v8.5h-2v3.23h9.11V109h-2.86v-5.25a4.4 4.4 0 01.69-2.56 2.47 2.47 0 012.21-1q2.57 0 2.56 3.63v8.41h6.29V109h-2v-5.25a4.47 4.47 0 01.67-2.56 2.42 2.42 0 012.19-1q2.63 0 2.63 3.63v8.41h6.28zm9.88-12.07q-4 0-6 2.36a8.41 8.41 0 00-2 5.66 7.25 7.25 0 002.17 5.62 8 8 0 005.65 2 8.54 8.54 0 005.94-2.11 7.27 7.27 0 002.34-5.67 8.21 8.21 0 00-2-5.51q-2.07-2.34-6.1-2.34zm-.1 12.35a3 3 0 01-2.63-1.33 5.68 5.68 0 01-.9-3.26 5 5 0 011-3.28 3.23 3.23 0 012.61-1.18 3.5 3.5 0 012.59 1.08 4.56 4.56 0 011.07 3.31 5.21 5.21 0 01-1 3.41 3.33 3.33 0 01-2.74 1.25zm25-2.3l-3.39-.29-.7 2.32H179l8.32-9.54-.32-2.23h-13.19l-.53 5.25 3.16.34.67-2.36h4.65l-8.25 9.53.44 2.26h13.13zm7.62-9.74h-4.46v5.39h4.46zm0 9.61h-4.46v5.39h4.46zm13.54-17.49h-4.23l-6.48 22.88h4.22zm8.68 0h-4.23l-6.45 22.88h4.19zm15 22.51l-.07-2.26a1.22 1.22 0 01-.56.1c-.69 0-1-.39-1-1.16v-6.49a4.39 4.39 0 00-1.8-3.84 7 7 0 00-4.16-1.28 14.55 14.55 0 00-3.16.3 24.14 24.14 0 00-3.29 1.06l-.56 3.46 3.39.4.5-1.69a2.78 2.78 0 011.08-.37 11.3 11.3 0 011.25-.07c1.19 0 1.89.37 2.09 1.1a8.55 8.55 0 01.3 2.26v.5a8.91 8.91 0 00-1.18-.11h-1.21a12.64 12.64 0 00-4.81.88 3.53 3.53 0 00-2.18 3.64 3.66 3.66 0 001.48 3.33 5.63 5.63 0 003.11 1 4.67 4.67 0 003-.91 6.78 6.78 0 001.8-2 3 3 0 003.33 3 5.54 5.54 0 002.66-.85zm-9.25-2.32a1.69 1.69 0 01-1.36-.52 1.81 1.81 0 01-.43-1.21 1.67 1.67 0 01.86-1.68 4.63 4.63 0 012-.42 7.69 7.69 0 011.07.07l1.06.13a3.58 3.58 0 01-1.08 2.74 3.24 3.24 0 01-2.11.89z"></path></svg></a><button type="button" class="ghost main-menu-toggle" aria-haspopup="true" aria-label="Show Menu"></button><div class="page-header-main "><nav class="main-nav" aria-label="Main menu"><ul class="main-menu nojs"><li class="top-level-entry-container"><button id="technologies-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">Technologies</button><ul class="technologies " role="menu" aria-labelledby="technologies-button"><li role="none"><a tabindex="-1" href="/pt-BR/docs/Web" role="menuitem">Technologies Overview</a></li><li role="none"><a tabindex="-1" href="/pt-BR/docs/Web/HTML" role="menuitem">HTML</a></li><li role="none"><a tabindex="-1" href="/pt-BR/docs/Web/CSS" role="menuitem">CSS</a></li><li role="none"><a tabindex="-1" href="/pt-BR/docs/Web/JavaScript" role="menuitem">JavaScript</a></li><li role="none"><a tabindex="-1" href="/pt-BR/docs/Web/Guide/Graphics" role="menuitem">Graphics</a></li><li role="none"><a tabindex="-1" href="/pt-BR/docs/Web/HTTP" role="menuitem">HTTP</a></li><li role="none"><a tabindex="-1" href="/pt-BR/docs/Web/API" role="menuitem">APIs</a></li><li role="none"><a tabindex="-1" href="/pt-BR/docs/Mozilla/Add-ons/WebExtensions" role="menuitem">Browser Extensions</a></li><li role="none"><a tabindex="-1" href="/pt-BR/docs/Web/MathML" role="menuitem">MathML</a></li></ul></li><li class="top-level-entry-container"><button id="references-guides-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">References &amp; Guides</button><ul class="references-guides " role="menu" aria-labelledby="references-guides-button"><li role="none"><a tabindex="-1" href="/pt-BR/docs/Learn" role="menuitem">Learn web development</a></li><li role="none"><a tabindex="-1" href="/pt-BR/docs/Web/Tutorials" role="menuitem">Tutorials</a></li><li role="none"><a tabindex="-1" href="/pt-BR/docs/Web/Reference" role="menuitem">References</a></li><li role="none"><a tabindex="-1" href="/pt-BR/docs/Web/Guide" role="menuitem">Developer Guides</a></li><li role="none"><a tabindex="-1" href="/pt-BR/docs/Web/Accessibility" role="menuitem">Accessibility</a></li><li role="none"><a tabindex="-1" href="/pt-BR/docs/Games" role="menuitem">Game development</a></li><li role="none"><a tabindex="-1" href="/pt-BR/docs/Web" role="menuitem">...more docs</a></li></ul></li><li class="top-level-entry-container"><button id="feedback-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">Feedback</button><ul class="feedback " role="menu" aria-labelledby="feedback-button"><li role="none"><a tabindex="-1" href="/pt-BR/docs/MDN/Contribute/Feedback" role="menuitem">Send Feedback</a></li><li role="none"><a tabindex="-1" href="/pt-BR/docs/MDN/Contribute" role="menuitem">Contribute to MDN</a></li><li role="none"><a tabindex="-1" target="_blank" rel="noopener noreferrer" href="https://github.com/mdn/content/issues/new" role="menuitem">Report a content issue<!-- --> üåê</a></li><li role="none"><a tabindex="-1" target="_blank" rel="noopener noreferrer" href="https://github.com/mdn/yari/issues/new" role="menuitem">Report a platform issue<!-- --> üåê</a></li></ul></li></ul></nav><div class="header-search"><form action="/pt-BR/search" class="search-form search-widget" role="search"><label for="main-q" class="visually-hidden">Search MDN</label><input type="search" name="q" id="main-q" class="search-input-field" placeholder="Site search... (Press &quot;/&quot; to focus)" pattern="(.|\s)*\S(.|\s)*" required="" value=""><input type="submit" class="ghost search-button" value="" aria-label="Search"></form></div><div class="auth-container"></div></div></header><div class="breadcrumb-locale-container"><nav class="breadcrumbs-container" aria-label="Breadcrumb navigation"><ol typeof="BreadcrumbList" vocab="https://schema.org/" aria-label="breadcrumbs"><li property="itemListElement" typeof="ListItem"><a class="breadcrumb-penultimate" property="item" typeof="WebPage" href="/pt-BR/docs/Games"><span property="name">Desenvolvimento de jogos</span></a><meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb-current-page" property="item" typeof="WebPage" href="/pt-BR/docs/Games/Anatomy"><span property="name">Anatomia de um v√≠deo game</span></a><meta property="position" content="2"></li></ol></nav><ul class="language-toggle"><li><a href="#select-language" class="language-icon"><span class="show-desktop">Change language</span></a></li><li><a class="view-in-english" href="/en-US/docs/Games/Anatomy"><span class="show-desktop">View in</span> English</a></li></ul></div><div class="localized-content-note notecard inline neutral"><a href="/en-US/docs/MDN/Contribute/Localize#active_locales">This page was translated from English by the community. Learn more and join the MDN Web Docs community.</a></div><aside class="document-toc-container"><section class="document-toc"><header><h2>Table of contents</h2><button type="button" class="ghost toc-trigger-mobile" aria-controls="toc-entries" aria-expanded="false">Table of contents</button></header><ul id="toc-entries"><li><a href="#apresentar_aceitar_interpretar_calcular_repetir">Apresentar, aceitar, interpretar, calcular, repetir</a></li><li><a href="#contruindo_um_loop_principal_em_javascript">Contruindo um loop principal em JavaScript</a></li><li><a href="#construindo_um_loop_principal_melhor_em_javascript">Construindo um loop principal <em>melhor</em> em Javascript</a></li><li><a href="#construindo_um_loop_principal_mais_otimizado_no_javascript">Construindo um loop principal mais <em>otimizado</em> no JavaScript</a></li><li><a href="#it_is_decision..._time">It is decision... time</a></li><li><a href="#summary">Summary</a></li></ul></section></aside><main id="content" class="main-content" role="main"><article class="main-page-content" lang="pt-BR"><h1>Anatomia de um v√≠deo game</h1><div><p>Este artigo analisa a anatomia e o fluxo de trabalho do v√≠deo game m√©dio de um ponto de vista t√©cnico, em termos de como o loop principal deve ser executado. Isso ajuda os iniciantes da arena do desenvolvimento de jogos modernos a entender o que √© necess√°rio ao construir um jogo e como os padr√µes da web como o JavaScript se prestam como ferramentas. Os programadores de jogos experientes que s√£o novos no desenvolvimento da web tamb√©m podem se beneficiar.</p></div><h2 id="apresentar_aceitar_interpretar_calcular_repetir"><a href="#apresentar_aceitar_interpretar_calcular_repetir" title="Permalink to Apresentar, aceitar, interpretar, calcular, repetir">Apresentar, aceitar, interpretar, calcular, repetir</a></h2><div><p>O objetivo de todo v√≠deo game √© <strong>apresentar</strong> ao usu√°rio uma situa√ß√£o, <strong>aceitar</strong> sua entrada, <strong>interpretar</strong> estes sinais em a√ß√µes, e <strong>calcular</strong> uma nova situa√ß√£o resultante dessas a√ß√µes. Jogos est√£o constantemente repetindo estes est√°gios, de novo e de novo, at√© alguma condi√ß√£o final ocorrer (como vencer, perder, ou sair para ir dormir). N√£o surpreendentemente, este padr√£o corresponde a como um mecanismo de jogo est√° programado.</p>
<p>As especificidades dependem do jogo.</p>
<p>Alguns jogos guiam este ciclo pela entrada do usu√°rio. Imagine que voc√™ est√° desenvolvendo um <em>"encontre as diferen√ßas entre estas duas imagens similares"</em>. Esses jogos <strong>apresentam</strong> duas imagens ao usu√°rio, eles <strong>aceitam</strong> seus cliques (ou toques), eles <strong>interpretam</strong> as entradas como um sucesso, falha, pausa, intera√ß√£o com o menu, etc., finalmente, eles <strong>calculam</strong> uma cena atualizada resultante dessas entradas. O ciclo do jogo √© avan√ßado pelas entradas do usu√°rio e pela esperas at√© que ele as forne√ßa. Isso √© mais aproximado de um <em>jogo</em> <em>baseado em turnos</em> onde n√£o h√° demanda de uma constante atualiza√ß√£o a cada frame, somente quando o jogador reaje.</p>
<p>Outros jogos demandam controle sobre cada um dos menores intervalos de tempo poss√≠veis. Os mesmos princ√≠pios acima aplicam-se com uma pequena diferen√ßa: cada frame de anima√ß√£o avan√ßa o ciclo e cada mudan√ßa na entrada do usu√°rio √© capturada no primeiro turno dispon√≠vel. Este modelo <em>uma vez por frame</em> √© implementado em algo chamado <strong>loop principal.</strong> Se o seu jogo √© baseado em tempo, ent√£o essa ser√° a autoridade a qual as suas simula√ß√µes ir√£o obedecer.</p>
<p>Mas o jogo pode n√£o precisar de controle por frame. Seu game loop pode ser similar ao exemplo <em>encontre as diferen√ßas</em> e basear-se em eventos de entrada. Ele pode requerer ambos, entrada e tempo simulado. Ele pode at√© mesmo ter um ciclo baseado em algo totalmente diferente.</p>
<p>JavaScript Moderno ‚Äî como descrito nas pr√≥ximas se√ß√µes ‚Äî felizmente, facilita o desenvolvimento de um loop principal "execute uma vez por frame". √â claro, seu jogo ser√° somente t√£o otimizado quando o fizer. Se parece que algo deveria estar ligado a um evento menos frequente, seria uma boa ideia implement√°-lo fora do loop principal (mas n√£o sempre).</p></div><h2 id="contruindo_um_loop_principal_em_javascript"><a href="#contruindo_um_loop_principal_em_javascript" title="Permalink to Contruindo um loop principal em JavaScript">Contruindo um loop principal em JavaScript</a></h2><div><p>JavaScript trabalaha melhor com eventos e chamadas de fun√ß√µes. Navegadores modernos esfor√ßam-se para chamar m√©todos √† medida que s√£o necess√°rios e ociosos (ou fazem suas outras tarefas) nos intervalos. √â uma excelente ideia ligar seu c√≥digo aos momentos apropriados a eles. Pense se a sua fun√ß√£o realmente precisa ser chamada em um estrito intervalo de tempo, a cada frame, ou somente ap√≥s algo acontecer. Ser mais espec√≠fico com o navegador sobre quando a sua fun√ß√£o precisa ser chamada permite que o navegador otimize essa chamada. Tamb√©m, isso facilitar√° o seu trabalho.</p>
<p>Alguns c√≥digos precisam ser rodados frame por frame, ent√£o por qu√™ ligar essas fun√ß√µes a qualquer coisa que n√£o seja a atualiza√ß√£o de tela do navegador? Na web, <code><a href="/pt-BR/docs/Web/API/Window/requestAnimationFrame"><code>window.requestAnimationFrame()</code></a> ser√° a base da maioria dos mais bem programados loops principais do tipo frame por frame.</code> Uma chamada de fun√ß√£o deve ser passada dentro da fun√ß√£o anterior quando a mesma for chamada. Esta chamdada de fun√ß√£o ser√° executada em um tempo adequado antes da pr√≥xima atualiza√ß√£o de tela. Eis um exemplo de um loop principal simples:</p>
<pre class="notranslate">window.main = function () {
  window.requestAnimationFrame( main );

  // Whatever your main loop needs to do.
};

main(); //Start the cycle.
</pre>
<p><strong>Nota</strong>: Em cada m√©todo do <code>main()</code> discutido aqui, n√≥s agendamos uma nova requisi√ß√£o <code>requestAnimationFrame</code> antes de executar o conte√∫do de nosso loop. Isso n√£o √© por acidente, e √© considerado boa pr√°tica. Chamando o pr√≥ximo <code>requestAnimationFrame</code> anteriormente garante que o navegador receba a chamada a tempo de planejar adequadamente, mesmo que seu frame atual falhe em sua (?VSync window?).</p>
<p>O trecho de c√≥digo acima possui duas declara√ß√µes. A primeira cria uma fun√ß√£o como uma vari√°vel global chamada <code>main()</code>. Esta fun√ß√£o faz algum trabalho e tamb√©m diz ao navegador para cam√°-la na pr√≥xima frame com <code>window.requestAnimationFrame()</code>. A segunda declara√ß√£o chama a fun√ß√£o <code>main()</code>, definida na primeira declara√ß√£o. Pelo fato do <code>main()</code> ser chamado uma vez na segunda declara√ß√£o e cada chamada dele coloc√°-lo na lista de coisas a fazer na pr√≥xima frame, <code>main()</code> √© sincronizado com a sua taxa de frame.</p>
<p>√â claro que esse loop n√£o √© perfeito. Antes de discutirmos maneiras de mud√°-lo, deixe-nos discutir o que j√° est√° bem.</p>
<p>Cronometrando o loop principal para quando o navegador atualiza a tela o permite rodar o seu loop t√£o frequentemente quanto o navegador queira atualizar. Voc√™ tem controle sobre cada frame de anima√ß√£o. Isso √© muito simples por que <code>main()</code> √© a √∫nica fun√ß√£o em loop. Um jogo de primeira pessoa (ou um jogo similar) apresenta uma nova cena a cada frame. Voc√™ realmente n√£o pode ser mais suave e receptivo do que isso.</p>
<p>Mas n√£o assuma imediatamente que anima√ß√µes requerem controle frame por frame. Anima√ß√µes simples podem ser facilmente desenvolvidas at√© mesmo com acelera√ß√£o-GPU, com anima√ß√µes CSS e com outras ferramentas inclusas no navegador. Existem muitas delas que far√£o sua vida mais f√°cil.</p></div><h2 id="construindo_um_loop_principal_melhor_em_javascript"><a href="#construindo_um_loop_principal_melhor_em_javascript" title="Permalink to Construindo um loop principal melhor em Javascript">Construindo um loop principal <em>melhor</em> em Javascript</a></h2><div><p>Existem dois problemas √≥bvios com nosso loop principal anterior: <code>main()</code> polui o objeto <code><a href="/pt-BR/docs/Web/API/Window"><code>window</code></a></code> (onde todas as vari√°veis globais s√£o armazenadas) e o c√≥digo de exemplo n√£o nos permite <em>parar</em> o loop a menos que toda a aba seja fechada ou atualizada. Para o primeiro problema, se voc√™ quer que o loop principal apenas rode sem precisar de f√°cil acesso (direto) a ele, voc√™ pode cri√°-lo como uma Fun√ß√£o Diretamente Invocada (Immediately-Invoked Function Expression - IIFE).</p>
<pre class="notranslate">/*
* Starting with the semicolon is in case whatever line of code above this example
* relied on automatic semicolon insertion (ASI). The browser could accidentally
* think this whole example continues from the previous line. The leading semicolon
* marks the beginning of our new line if the previous one was not empty or terminated.
*/

;(function () {
  function main() {
    window.requestAnimationFrame( main );

    // Your main loop contents.
  }

  main(); // Start the cycle
})();
</pre>
<p>Quando o browser alcan√ßar este IIFE, ele ir√° definir o seu pr√≥prio loop principal e imediatamente agenda-o para para o pr√≥ximo frame. Ele n√£o ser√° anexado a nenhum objeto e <code>main</code> (ou <code>main()</code> para m√©todos) ser√° um nome v√°lido sem uso no resto da aplica√ß√£o, livre para ser definido como outra coisa.</p>
<p>Nota: Na pr√°tica, √© mais comum previnir o pr√≥ximo <code>requestAnimationFrame()</code> com uma declara√ß√£o <code>if</code>, no lugar de chamar <code>cancelAnimationFrame()</code>.</p>
<p>Para o pr√≥ximo problema, parando o loop principal, voc√™ precisar√° cancelar a chamada a <code>main()</code> com <code>window.cancelAnimationFrame()</code>. Voc√™ precisar√° passar para <code>cancelAnimationFrame()</code> o token do ID dado pelo <code>requestAnimationFrame()</code> quando ele foi chamado. Vamos assumir que as fun√ß√µes do seu jogo e vari√°veis est√£o constru√≠das em um namespace que voc√™ chamou de <code>MyGame</code>. Expandindo o nosso √∫ltimo exemplo, o loop principal ficaria parecido com isto:</p>
<pre class="notranslate">/*
* Starting with the semicolon is in case whatever line of code above this example
* relied on automatic semicolon insertion (ASI). The browser could accidentally
* think this whole example continues from the previous line. The leading semicolon
* marks the beginning of our new line if the previous one was not empty or terminated.
*
* Let us also assume that MyGame is previously defined.
*/

;(function () {
  function main() {
    MyGame.stopMain = window.requestAnimationFrame( main );

    // Your main loop contents.
  }

  main(); // Start the cycle
})();
</pre>
<p>N√≥s temos agora uma vari√°vel declarada no namespace do nosso <code>MyGame</code>, que nos chamamos de <code>stopMain</code>, e que cont√©m o ID retornado pela execu√ß√£o mais recente do <code>requestAnimationFrame()</code> do nosso loop principal. Em algum ponto, n√≥s podemos parar o loop principal pedindo ao browser para cancelar a requisi√ß√£o que corresponde ao nosso token.</p>
<pre class="notranslate">window.cancelAnimationFrame( MyGame.stopMain );
</pre>
<p>A chave para programar loop principal, no JavaScript, √© anex√°-lo a qualquer evento que deve estar dirigindo sua a√ß√£o e prestar aten√ß√£o a como os diferentes sistemas envolvidos interagem entre si. Voc√™ poder√° ter multiplos componentes dirigidos por multiplos diferentes tipos de eventos. Isto parece complexidade desnecess√°ria mas pode ser s√≥ uma boa otimiza√ß√£o (n√£o necess√°ria, √© claro). O problema √© que voc√™ n√£o est√° programando um loop principal t√≠pico. No JavaScript, voc√™ est√° usando o loop principal do browser e est√° tentando faz√™-lo efetivamente.</p></div><h2 id="construindo_um_loop_principal_mais_otimizado_no_javascript"><a href="#construindo_um_loop_principal_mais_otimizado_no_javascript" title="Permalink to Construindo um loop principal mais otimizado no JavaScript">Construindo um loop principal mais <em>otimizado</em> no JavaScript</a></h2><div><p>Finalmente, no JavaScript, o browser est√° rodando o seu loop principal e o seu c√≥digo existe em algum de seus est√°gios. As se√ß√µes acima descrevem loops principais que tentam n√£o eliminar o controle do navegador. Esses m√©todos principais anexam eles mesmos ao <code>window.requestAnimationFrame()</code>, que pergunta ao browser por controle sobre o pr√≥ximo frame. √â responsabilidade do browser saber como relacionar esses requests ao loop principal. A <a href="https://www.w3.org/TR/animation-timing/" class="external" rel=" noopener">especifica√ß√£o da W3C para o requestAnimationFrame</a> n√£o define realmente quando os browsers tem que executar os callbacks do requestAnimationFrame. Isto pode ser uma vantagem por que os fornecedores de browsers podem ter a liberdade de experimentar com as solu√ß√µes que sintam que seja melhor e podem modifica-la com o passar do tempo.</p>
<p>Vers√µes modernas do Firefox e Google Chrome (e provavelmente outros) tentam conectar os callbacks do <code>requestAnimationFramea</code> a sua thread principal no primeiro intervalo de tempo de um frame. A thread principal portanto tenta fazer o seguinte:</p>
<ol>
  <li>Come√ßar uma nova frame (enquanto a anterior √© tratada pela exibi√ß√£o).</li>
  <li>Go through the list of <code>requestAnimationFrame</code> callbacks and invoke them.</li>
  <li>Perform garbage collection and other per-frame tasks when the above callbacks stop controlling the main thread.</li>
  <li>Sleep (unless an event interrupts the browser's nap) until the monitor is ready for your image (<a href="http://www.techopedia.com/definition/92/vertical-sync-vsync" class="external" rel=" noopener">VSync</a>) and repeat.</li>
</ol>
<p>Modern versions of Firefox and Google Chrome (and probably others) <em>attempt</em> to connect <code>requestAnimationFrame</code> callbacks to their main thread at the very beginning of a frame's timeslice. The browser's main thread thus <em>tries</em> to look like the following:</p>
<ol>
  <li>Start a new frame (while the previous frame is handled by the display).</li>
  <li>Go through the list of <code>requestAnimationFrame</code> callbacks and invoke them.</li>
  <li>Perform garbage collection and other per-frame tasks when the above callbacks stop controlling the main thread.</li>
  <li>Sleep (unless an event interrupts the browser's nap) until the monitor is ready for your image (<a href="http://www.techopedia.com/definition/92/vertical-sync-vsync" class="external" rel=" noopener">VSync</a>) and repeat.</li>
</ol>
<p>You can think about developing realtime applications as having a budget of time to do work. All of the above steps must take place every 16-and-a-half milliseconds to keep up with a 60 Hz display. Browsers invoke your code as early as possible to give it maximum computation time. Your main thread will often start workloads that are not even on the main thread (such as rasterization or shaders in WebGL). Long calculations can be performed on a Web Worker or a GPU at the same time as the browser uses its main thread to manage garbage collection, its other tasks, or handle asynchronous events.</p>
<p>While we are on the topic of budgeting time, many web browsers have a tool called <em>High Resolution Time</em>. The <a class="page-not-created" title="A documenta√ß√£o sobre isto ainda n√£o foi escrita; por favor considere contribuir!"><code>Date</code></a> object is no longer the recognised method for timing events because it is very imprecise and can be modified by the system clock. High Resolution Time, on the other hand, counts the number of milliseconds since <code>navigationStart</code> (when the previous document is unloaded). This value is returned as a decimal number accurate to a thousandth of a millisecond. It is known as a <code><a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/DOMHighResTimeStamp"><code>DOMHighResTimeStamp</code> <small>(en-US)</small></a></code> but, for all intents and purposes, consider it a floating point number.</p>
<p><strong>Note</strong>: Systems (hardware or software) that are not capable of microsecond accuracy are allowed to provide millisecond accuracy as a minimum. They should provide 0.001ms accuracy if they are capable of it, however.</p>
<p>This value is not too useful alone, since it is relative to a fairly uninteresting event, but it can be subtracted from another timestamp to accurately and precisely determine how much time elapsed between those two points. To acquire one of these timestamps, you can call <code>window.performance.now()</code> and store the result as a variable.</p>
<pre class="notranslate">var tNow = window.performance.now();
</pre>
<p>Back to the topic of the main loop. You will often want to know when your main function was invoked. Because this is common, <code>window.requestAnimationFrame()</code> always provides a <code>DOMHighResTimeStamp</code> to callbacks as an argument when they are executed. This leads to another enhancement to our previous main loops.</p>
<pre class="notranslate">/*
* Starting with the semicolon is in case whatever line of code above this example
* relied on automatic semicolon insertion (ASI). The browser could accidentally
* think this whole example continues from the previous line. The leading semicolon
* marks the beginning of our new line if the previous one was not empty or terminated.
*
* Let us also assume that MyGame is previously defined.
*/

;(function () {
  function main( tFrame ) {
    MyGame.stopMain = window.requestAnimationFrame( main );

    // Your main loop contents.
    // tFrame, from "function main ( tFrame )", is now a DOMHighResTimeStamp provided by rAF.
  }

  main(); // Start the cycle
})();
</pre>
<p>Several other optimizations are possible and it really depends on what your game attempts to accomplish. Your game genre will obviously make a difference but it could even be more subtle than that. You could draw every pixel individually on a canvas or you could layer DOM elements (including multiple WebGL canvases with transparent backgrounds if you want) into a complex hierarchy. Each of these paths will lead to different opportunities and constraints.</p></div><h2 id="it_is_decision..._time"><a href="#it_is_decision..._time" title="Permalink to It is decision... time">It is decision... time</a></h2><div><p>You will need to make hard decisions about your main loop: how to simulate the accurate progress of time. If you demand per-frame control then you will need to determine how frequently your game will update and draw. You might even want update and draw to occur at different rates. You will also need to consider how gracefully your game will fail if the user's system cannot keep up with the workload. Let us start by assuming that you will handle user input and update the game state every time you draw. We will branch out later.</p>
<p><em><strong>Note</strong>:</em> Changing how your main loop deals with time is a debugging nightmare, everywhere. Think about your needs, carefully, before working on your main loop.</p></div><h3 id="what_most_browser_games_should_look_like"><a href="#what_most_browser_games_should_look_like" title="Permalink to What most browser games should look like">What most browser games should look like</a></h3><div><p>If your game can hit the maximum refresh rate of any hardware you support then your job is fairly easy. You can simply update, render, and then do nothing until VSync.</p>
<pre class="notranslate">/*
* Starting with the semicolon is in case whatever line of code above this example
* relied on automatic semicolon insertion (ASI). The browser could accidentally
* think this whole example continues from the previous line. The leading semicolon
* marks the beginning of our new line if the previous one was not empty or terminated.
*
* Let us also assume that MyGame is previously defined.
*/

;(function () {
  function main( tFrame ) {
    MyGame.stopMain = window.requestAnimationFrame( main );

    update( tFrame ); //Call your update method. In our case, we give it rAF's timestamp.
    render();
  }

  main(); // Start the cycle
})();
</pre>
<p>If the maximum refresh rate cannot be reached, quality settings could be adjusted to stay under your time budget. The most famous example of this concept is the game from id Software, RAGE. This game removed control from the user in order to keep its calculation time at roughly 16ms (or roughly 60fps). If computation took too long then rendered resolution would decrease, textures and other assets would fail to load or draw, and so forth. This (non-web) case study made a few assumptions and tradeoffs:</p>
<ul>
  <li>Each frame of animation accounts for user input.</li>
  <li>No frame needs to be extrapolated (guessed) because each draw has its own update.</li>
  <li>Simulation systems can basically assume that each full update is ~16ms apart.</li>
  <li>Giving the user control over quality settings would be a nightmare.</li>
  <li>Different monitors input at different rates: 30 FPS, 75 FPS, 100 FPS, 120 FPS, 144 FPS, etc.</li>
  <li>Systems that are unable to keep up with 60 FPS lose visual quality to keep the game running at optimal speed (eventually it outright fails, if quality becomes too low.)</li>
</ul></div><h3 id="other_ways_to_handle_variable_refresh_rate_needs"><a href="#other_ways_to_handle_variable_refresh_rate_needs" title="Permalink to Other ways to handle variable refresh rate needs">Other ways to handle variable refresh rate needs</a></h3><div><p>Other methods of tackling the problem exist.</p>
<p>One common technique is to update the simulation at a constant frequency and then draw as much (or as little) of the actual frames as possible. The update method can continue looping without care about what the user sees. The draw method can view the last update and when it happened. Since draw knows when it represents, and the simulation time for the last update, it can predict a plausible frame to draw for the user. It does not matter whether this is more frequent than the official update loop (or even less frequent). The update method sets checkpoints and, as frequently as the system allows, the render method draws instants of time around them. There are many ways to separate the update method in web standards:</p>
<ul>
  <li>Draw on <code>requestAnimationFrame</code> and update on a <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/setInterval"><code>window.setInterval</code> <small>(en-US)</small></a> or <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/setTimeout"><code>window.setTimeout</code> <small>(en-US)</small></a>.
    <ul>
      <li>This uses processor time even when unfocused or minimized, hogs the main thread, and is probably an artifact of traditional game loops (but it is simple.)</li>
    </ul>
  </li>
  <li>Draw on <code>requestAnimationFrame</code> and update on a <code>setInterval</code> or <code>setTimeout</code> in a <a href="/en-US/docs/Web/API/Web_Workers_API/Using_web_workers" class="only-in-en-us" title="Currently only available in English (US)">Web Worker (en-US)</a>.
    <ul>
      <li>This is the same as above, except update does not hog the main thread (nor does the main thread hog it). This is a more complex solution, and might be too much overhead for simple updates.</li>
    </ul>
  </li>
  <li>Draw on <code>requestAnimationFrame</code> and use it to poke a Web Worker containing the update method with the number of ticks to compute, if any.
    <ul>
      <li>This sleeps until <code>requestAnimationFrame</code> is called and does not pollute the main thread, plus you are not relying on old fashioned methods. Again, this is a bit more complex than the previous two options, and <em>starting</em> each update will be blocked until the browser decides to fire rAF callbacks.</li>
    </ul>
  </li>
</ul>
<p>Each of these methods have similar tradeoffs:</p>
<ul>
  <li>Users can skip rendering frames or interpolate extra ones depending on their performance.</li>
  <li>You can count on all users updating non-cosmetic variables at the same constant frequency minus hiccups.</li>
  <li>Much more complicated to program than the basic loops we saw earlier.</li>
  <li>User input is completely ignored until the next update (even if the user has a fast device).</li>
  <li>The mandatory interpolation has a performance penalty.</li>
</ul>
<p>A separate update and draw method could look like the following example. For the sake of demonstration, the example is based on the third bullet point, just without using Web Workers for readability (and, let's be honest, writeability).</p>
<p><em>Note: This example, specifically, is in need of technical review.</em></p>
<pre class="notranslate">/*
* Starting with the semicolon is in case whatever line of code above this example
* relied on automatic semicolon insertion (ASI). The browser could accidentally
* think this whole example continues from the previous line. The leading semicolon
* marks the beginning of our new line if the previous one was not empty or terminated.
*
* Let us also assume that MyGame is previously defined.
*
* MyGame.lastRender keeps track of the last provided requestAnimationFrame timestamp.
* MyGame.lastTick keeps track of the last update time. Always increments by tickLength.
* MyGame.tickLength is how frequently the game state updates. It is 20 Hz (50ms) here.
*
* timeSinceTick is the time between requestAnimationFrame callback and last update.
* numTicks is how many updates should have happened between these two rendered frames.
*
* render() is passed tFrame because it is assumed that the render method will calculate
*          how long it has been since the most recently passed update tick for
*          extrapolation (purely cosmetic for fast devices). It draws the scene.
*
* update() calculates the game state as of a given point in time. It should always
*          increment by tickLength. It is the authority for game state. It is passed
*          the DOMHighResTimeStamp for the time it represents (which, again, is always
*          last update + MyGame.tickLength unless a pause feature is added, etc.)
*
* setInitialState() Performs whatever tasks are leftover before the mainloop must run.
*                   It is just a generic example function that you might have added.
*/

;(function () {
  function main( tFrame ) {
    MyGame.stopMain = window.requestAnimationFrame( main );
    var nextTick = MyGame.lastTick + MyGame.tickLength;
    var numTicks = 0;

    //If tFrame &lt; nextTick then 0 ticks need to be updated (0 is default for numTicks).
    //If tFrame = nextTick then 1 tick needs to be updated (and so forth).
    //Note: As we mention in summary, you should keep track of how large numTicks is.
    //If it is large, then either your game was asleep, or the machine cannot keep up.
    if (tFrame &gt; nextTick) {
      var timeSinceTick = tFrame - MyGame.lastTick;
      numTicks = Math.floor( timeSinceTick / MyGame.tickLength );
    }

    queueUpdates( numTicks );
    render( tFrame );
    MyGame.lastRender = tFrame;
  }

  function queueUpdates( numTicks ) {
    for(var i=0; i &lt; numTicks; i++) {
      MyGame.lastTick = MyGame.lastTick + MyGame.tickLength; //Now lastTick is this tick.
      update( MyGame.lastTick );
    }
  }

  MyGame.lastTick = performance.now();
  MyGame.lastRender = MyGame.lastTick; //Pretend the first draw was on first update.
  MyGame.tickLength = 50; //This sets your simulation to run at 20Hz (50ms)

  setInitialState();
  main(performance.now()); // Start the cycle
})();
</pre>
<p>Another alternative is to simply do certain things less often. If a portion of your update loop is difficult to compute but insensitive to time, you might consider scaling back its frequency and, ideally, spreading it out into chunks throughout that lengthened period. An implicit example of this is found over at The Artillery Blog for Artillery Games, where they <a href="http://blog.artillery.com/2012/10/browser-garbage-collection-and-framerate.html" class="external" rel=" noopener">adjust their rate of garbage generation</a> to optimize garbage collection. Obviously, cleaning up resources is not time sensitive (especially if tidying is more disruptive than the garbage itself).</p>
<p>This may also apply to some of your own tasks. Those are good candidates to throttle when available resources become a concern.</p></div><h2 id="summary"><a href="#summary" title="Permalink to Summary">Summary</a></h2><div><p>I want to be clear that any of the above, or none of them, could be best for your game. The correct decision entirely depends on the trade-offs that you are willing (and unwilling) to make. The concern is mostly with switching to another option. Fortunately, I do not have any experience with this but I have heard it is an excruciating game of Whack-a-Mole.</p>
<p>An important thing to remember for managed platforms, like the web, is that your loop may stop execution for significant periods of time. This could occur when the user unselects your tab and the browser sleeps (or slows) its <code>requestAnimationFrame</code> callback interval. You have many ways to deal with this situation and this could depend on whether your game is single player or multiplayer. Some choices are:</p>
<ul>
  <li>Consider the gap "a pause" and skip the time.
    <ul>
      <li>You can probably see how this is problematic for most multiplayer games.</li>
    </ul>
  </li>
  <li>You can simulate the gap to catch up.
    <ul>
      <li>This can be a problem for long drops and/or complex updates.</li>
    </ul>
  </li>
  <li>You can recover the game state from a peer or the server.
    <ul>
      <li>This is ineffective if your peers or server are out-of-date too, or they don't exist because the game is single player and doesn't have a server.</li>
    </ul>
  </li>
</ul>
<p>Once your main loop has been developed and you have decided on a set of assumptions and tradeoffs which suit your game, it is now just a matter of using your decisions to calculate any applicable physics, AI, sounds, network synchronization, and whatever else your game may require.</p></div></article><aside class="metadata"><div class="metadata-content-container"><div id="on-github" class="on-github"><h3>Found a problem with this page?</h3><ul><li><a href="https://github.com/mdn/translated-content/edit/main/files/pt-br/games/anatomy/index.md" title="You're going to need to sign in to GitHub first (Opens in a new tab)" target="_blank" rel="noopener noreferrer">Edit on <b>GitHub</b></a></li><li><a href="https://github.com/mdn/translated-content/blob/main/files/pt-br/games/anatomy/index.md" title="Folder: pt-br/games/anatomy (Opens in a new tab)" target="_blank" rel="noopener noreferrer">Source on <b>GitHub</b></a></li><li><a href="https://github.com/mdn/translated-content/issues/new?body=MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fpt-BR%2Fdocs%2FGames%2FAnatomy%0A%0A%23%23%23%23+What+information+was+incorrect%2C+unhelpful%2C+or+incomplete%3F%0A%0A%0A%23%23%23%23+Specific+section+or+headline%3F%0A%0A%0A%23%23%23%23+What+did+you+expect+to+see%3F%0A%0A%0A%23%23%23%23+Did+you+test+this%3F+If+so%2C+how%3F%0A%0A%0A%3C%21--+Do+not+make+changes+below+this+line+--%3E%0A%3Cdetails%3E%0A%3Csummary%3EMDN+Content+page+report+details%3C%2Fsummary%3E%0A%0A*+Folder%3A+%60pt-br%2Fgames%2Fanatomy%60%0A*+MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fpt-BR%2Fdocs%2FGames%2FAnatomy%0A*+GitHub+URL%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Ftranslated-content%2Fblob%2Fmain%2Ffiles%2Fpt-br%2Fgames%2Fanatomy%2Findex.md%0A*+Last+commit%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Ftranslated-content%2Fcommit%2F921c46a374ab0a9f4cc809af0370f8c412e54701%0A*+Document+last+modified%3A+2022-10-01T03%3A41%3A16.000Z%0A%0A%3C%2Fdetails%3E&amp;title=Issue+with+%22Anatomia+de+um+v%C3%ADdeo+game%22%3A+%28short+summary+here+please%29&amp;labels=needs-triage%2Cl10n-pt-br" title="This will take you to https://github.com/mdn/content to file a new issue" target="_blank" rel="noopener noreferrer">Report a problem with this content on <b>GitHub</b></a></li><li>Want to fix the problem yourself? See<!-- --> <a href="https://github.com/mdn/content/blob/main/README.md" target="_blank" rel="noopener noreferrer">our Contribution guide</a>.</li></ul></div><p class="last-modified-date"><b>Last modified:</b> <time datetime="2022-10-01T03:41:16.000Z">Oct 1, 2022</time>,<!-- --> <a href="/pt-BR/docs/Games/Anatomy/contributors.txt">by MDN contributors</a></p><form class="language-menu"><fieldset id="select-language"><legend>Change your language</legend><label for="language-selector" class="visually-hidden">Select your preferred language</label> <select id="language-selector" name="language"><option selected="" value="pt-BR">Portugu√™s (do&nbsp;Brasil)</option><option value="en-US">English (US)</option><option value="fr">Fran√ßais</option><option value="ja">Êó•Êú¨Ë™û</option><option value="ru">–†—É—Å—Å–∫–∏–π</option><option value="zh-CN">‰∏≠Êñá (ÁÆÄ‰Ωì)</option></select> <button type="submit" class="button minimal">Change language</button></fieldset></form></div></aside></main><nav id="sidebar-quicklinks" class="sidebar"><h4>Related Topics</h4><div>
  <ol>
    <li class="toggle">
        <details>
            <summary>Introdu√ß√£o</summary>
            <ol>
              <li><a href="/pt-BR/docs/Games/Introduction">Introdu√ß√£o</a></li>
              <li><a href="/pt-BR/docs/Games/Anatomy">Anatomia de um video game</a></li>
              <li><a href="/pt-BR/docs/Games/Examples">Exemplos</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>APIs para desenvolvimento de jogos</summary>
            <ol>
              <li><a href="/pt-BR/docs/Web/API/Canvas_API">Canvas</a></li>
              <li><a href="/pt-BR/docs/Web/CSS">CSS</a></li>
              <li><a href="/pt-BR/docs/Web/API/Fullscreen_API">Full screen</a></li>
              <li><a href="/pt-BR/docs/Web/API/Gamepad_API">Gamepad</a></li>
              <li><a href="/pt-BR/docs/Web/API/IndexedDB_API">IndexedDB</a></li>
              <li><a href="/pt-BR/docs/Web/JavaScript">JavaScript</a></li>
              <li><a href="/pt-BR/docs/Web/API/Pointer_Lock_API">Pointer Lock</a></li>
              <li><a href="/pt-BR/docs/Web/SVG">SVG</a></li>
              <li><a href="/pt-BR/docs/Web/JavaScript/Reference/Global_Objects/TypedArray">Typed Arrays</a></li>
              <li><a href="/pt-BR/docs/Web/API/Web_Audio_API">Web Audio</a></li>
              <li><a href="/pt-BR/docs/Web/API/WebGL_API">WebGL</a></li>
              <li><a href="/pt-BR/docs/Web/API/WebRTC_API">WebRTC</a></li>
              <li><a href="/pt-BR/docs/Web/API/WebSockets_API">WebSockets</a></li>
              <li><a href="/pt-BR/docs/Web/API/WebVR_API">WebVR</a></li>
              <li><a href="/pt-BR/docs/Web/API/Web_Workers_API">Web Workers</a></li>
              <li><a href="/pt-BR/docs/Web/API/XMLHttpRequest">XMLHttpRequest</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>T√©cnicas</summary>
            <ol>
              <li><a href="/pt-BR/docs/Games/Techniques/Async_scripts">Usando async scripts para&amp;nbsp;asm.js</a></li>
              <li><a href="/pt-BR/docs/Web/Apps/Developing/Optimizing_startup_performance">Otimizando a performance de startup</a></li>
              <li><a href="/pt-BR/docs/Games/Techniques/WebRTC_data_channels">Usando canais de dados WebRTC peer-to-peer</a></li>
              <li><a href="/pt-BR/docs/Games/Techniques/Efficient_animation_for_web_games">Anima√ß√£o eficiente para jogos web</a></li>
              <li><a href="/pt-BR/docs/Games/Techniques/Audio_for_Web_Games">Audio para Jogos Web</a></li>
              <li><a href="/pt-BR/docs/Games/Techniques/2D_collision_detection">Detec√ß√£o de colis√£o 2D</a></li>
              <li><a href="/pt-BR/docs/Games/Techniques/Tilemaps">Vis√£o geral de Tiles e tilemaps</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>Vis√£o geral de jogos 3D na Web</summary>
            <ol>
              <li><a href="/pt-BR/docs/Games/Techniques/3D_on_the_web">Vis√£o geral de jogos 3D na Web</a></li>
              <li><a href="/pt-BR/docs/Games/Techniques/3D_on_the_web/Basic_theory">Explicando teoria b√°sica 3D</a></li>
              <li><a href="/pt-BR/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_A-Frame">Desenvolvendo um demo b√°sico com A-Frame</a></li>
              <li><a href="/pt-BR/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_Babylon.js">Desenvolvendo um demo b√°sico com Babylon.js</a></li>
              <li><a href="/pt-BR/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_PlayCanvas">Desenvolvendo um demo b√°sico com PlayCanvas</a></li>
              <li><a href="/pt-BR/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_Three.js">Desenvolvendo um demo b√°sico com Three.js</a></li>
              <li><a href="/pt-BR/docs/Games/Techniques/3D_on_the_web/WebVR">WebVR</a></li>
              <li><a href="/pt-BR/docs/Games/Techniques/3D_collision_detection">Detec√ß√£o de colis√£o 3D</a></li>
              <li><a href="/pt-BR/docs/Games/Techniques/3D_collision_detection/Bounding_volume_collision_detection_with_THREE.js">BDetec√ß√£o da quantidade de&amp;nbsp;choque de colis√£o com THREE.js</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>Implementando mecanismos de controle de jogo</summary>
            <ol>
              <li><a href="/pt-BR/docs/Games/Techniques/Control_mechanisms">Vis√£o geral de mecanismos de controle de jogo</a></li>
              <li><a href="/pt-BR/docs/Games/Techniques/Control_mechanisms/Mobile_touch">Controles de toque Mobile</a></li>
              <li><a href="/pt-BR/docs/Games/Techniques/Control_mechanisms/Desktop_with_mouse_and_keyboard">Controles de rato e teclado em Desktop</a></li>
              <li><a href="/pt-BR/docs/Games/Techniques/Control_mechanisms/Desktop_with_gamepad">Controle de gamepad em Desktop</a></li>
              <li><a href="/pt-BR/docs/Games/Techniques/Control_mechanisms/Other">Other</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>Tutoriais</summary>
            <ol>
              <li><a href="/pt-BR/docs/Games/Tutorials/2D_Breakout_game_pure_JavaScript">Jogo 2D usando JavaScript puro</a></li>
              <li><a href="/pt-BR/docs/Games/Tutorials/2D_breakout_game_Phaser">Jogo 2D usando Phaser</a></li>
              <li><a href="/pt-BR/docs/Games/Tutorials/HTML5_Gamedev_Phaser_Device_Orientation">Jogo labirinto 2D com device orientation</a></li>
              <li><a href="https://mozdevs.github.io/html5-games-workshop/en/guides/platformer/start-here/">Plataforma de jogo 2D usando Phaser</a></li>
            </ol>
        </details>
    </li>
    <li class="toggle">
        <details>
            <summary>Publicando jogos</summary>
            <ol>
              <li><a href="/pt-BR/docs/Games/Publishing_games">Vis√£o geral sobre publica√ß√£o de jogos</a></li>
              <li><a href="/pt-BR/docs/Games/Publishing_games/Game_distribution">Distribui√ß√£o de Jogos</a></li>
              <li><a href="/pt-BR/docs/Games/Publishing_games/Game_promotion">Promo√ß√£o de Jogos</a></li>
              <li><a href="/pt-BR/docs/Games/Publishing_games/Game_monetization">Monetiza√ß√£o de Jogos</a></li>
            </ol>
        </details>
    </li>
  </ol>
</div></nav></div><footer id="nav-footer" class="page-footer"><div class="content-container"><div class="page-footer-logo"><a href="/pt-BR/" class="logo" aria-label="MDN Web Docs"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 451.74 135" fill="#fff"><path d="M7.14 8.35v111.06h111.05V8.35zm103.71 56c-.48.92-1 1.79-1.46 2.71a3.44 3.44 0 01-3.54 2 2.4 2.4 0 00-1.55.5c-1.37.9-2.76 1.79-4.18 2.63a7.33 7.33 0 01-6.35.34 29.71 29.71 0 00-10.63-2 11.7 11.7 0 00-9.46 4.31 14.84 14.84 0 00-2.13 4.29c-1.24 3.07-2.3 21.38-2.3 26.05 0 0-17.62-3.42-34.15-20.34l4.31-11.32h-13.5l9.76-10.35h-16.8l9.77-10.34H12.69L30.45 34a40.9 40.9 0 0119.77-10.83c7.1-1.22 8.93-.53 13.31.77l2.43.73.85.25 3.1.95a12.56 12.56 0 006.21.09 11.37 11.37 0 018.25 1 8.24 8.24 0 014.1 6.22 7.29 7.29 0 003.61 5.49 59.45 59.45 0 009.32 4.11c2.27.86 4.54 1.84 6.79 2.72a6.81 6.81 0 012.86 2.06 4.81 4.81 0 011.1 2.73c.14 2 .37 4 .47 6a15.24 15.24 0 01-1.77 8.03zM320.12 39.62a5.42 5.42 0 00-4.53 2.13 7.36 7.36 0 00-1.7 4.43v2.36a6.28 6.28 0 001.7 4.46 5.63 5.63 0 004.3 1.82 5.12 5.12 0 004.57-2.27A9.7 9.7 0 00326 47a8.11 8.11 0 00-1.67-5.52 5.36 5.36 0 00-4.21-1.86zM387.38 39.53a5.52 5.52 0 00-4.7 2.15 8.8 8.8 0 00-1.63 5.49 9.23 9.23 0 001.58 5.45 5.38 5.38 0 004.7 2.25 5.61 5.61 0 004.74-2.2 8.91 8.91 0 001.68-5.59 8.24 8.24 0 00-1.75-5.52 5.76 5.76 0 00-4.62-2.03zM299.47 41.35a4.34 4.34 0 00-4-1.92 4.55 4.55 0 00-3.89 1.73 8.37 8.37 0 00-1.58 4.17h10.48a6.3 6.3 0 00-1.01-3.98zM357.74 30.75H352v23.31h5.72q5.47 0 8.35-3t2.93-8.65q0-5.43-2.88-8.55t-8.38-3.11z"></path><path d="M121.55 8.35v70.8h323V8.35zm42.21 22.45h-4V54h3.68v3.73h-11.25V54h3.31V36.79h-.19l-9.63 19.12h-2.12l-10-19.4h-.19V54h3.45v3.73h-11.15V54h3.68V30.8h-4v-3.73H133l11.66 22.56h.19l11.18-22.56h7.7zm29.12 22.67q-4.11 4.28-11.38 4.28h-14.06v-3.69h3.73V30.75h-3.73v-3.68h13.83q7.59 0 11.66 4.29a15.4 15.4 0 014 11 15.33 15.33 0 01-4.05 11.11zm38.89-22.67h-3.68v27h-2.6L208.08 35h-.19v19h4.67v3.73h-12.22V54h3.49V30.8h-4v-3.73h7.08l16.9 22.09h.19V30.8h-4.58v-3.73h12.32zm43.8 27h-3.31l-7.83-23.18h-.19l-7.55 23.18h-3.35l-8.78-27h-2.65v-3.73H253v3.73h-3.87L255 50.71h.23l6.61-19.91H259v-3.73h11v3.73h-2.78l6.61 20.1h.23l5.43-20.1h-4.15v-3.73h11v3.73h-2.54zm26.71-1.51a9.66 9.66 0 01-6.42 2 10.2 10.2 0 01-7.41-2.74c-1.89-1.82-2.83-4.47-2.83-7.93a12.37 12.37 0 012.64-8.12 9 9 0 017.32-3.21 8.62 8.62 0 016.75 2.69 9.65 9.65 0 012.45 6.52 13.67 13.67 0 01-.28 2.69H290q.29 6.71 6.18 6.7a5.2 5.2 0 003.71-1.18 5.82 5.82 0 001.67-2.83l3.45.71a7.21 7.21 0 01-2.73 4.65zm25.77-1.63c-1.51 2.4-3.92 3.61-7.22 3.61s-5.84-1.29-7.22-3.87c0 .25-.1.82-.21 1.7s-.19 1.44-.22 1.7H309c.16-1 .31-2 .47-3.07a21.42 21.42 0 00.24-3.16v-23h-3.4v-3.3h7.55V40.9a9.76 9.76 0 012.67-3.28 7.33 7.33 0 014.74-1.4 8.48 8.48 0 016.5 2.78q2.55 2.74 2.55 7.74a14.6 14.6 0 01-2.27 7.87zm41.39-1.14q-4.11 4.28-11.37 4.28H344v-3.74h3.73V30.75H344v-3.68h13.83q7.59 0 11.66 4.29a15.41 15.41 0 014.06 11 15.34 15.34 0 01-4.11 11.11zm25.65 1.68a10.53 10.53 0 01-7.9 3.07 10 10 0 01-7.63-3 10.93 10.93 0 01-2.8-7.83 12.13 12.13 0 012.69-7.93q2.69-3.3 8-3.3t8 3.28a12 12 0 012.64 7.76 10.86 10.86 0 01-3 7.9zm22.61.57c-1.4 1.66-3.63 2.5-6.68 2.5a9.58 9.58 0 01-7.15-2.76q-2.72-2.76-2.71-7.91a12.25 12.25 0 012.69-8 9.17 9.17 0 017.5-3.28 15 15 0 013.82.48 10.37 10.37 0 013.5 1.65l.85 5.47-3.35.38-.76-3.54a8.07 8.07 0 00-4.11-1 4.9 4.9 0 00-4.39 2.15 9.93 9.93 0 00-1.41 5.55 8.9 8.9 0 001.5 5.38 5.23 5.23 0 004.44 2c2.92 0 4.67-1.7 5.23-5.1l3.5.71a10.34 10.34 0 01-2.47 5.27zm20.48.75a11.68 11.68 0 01-6.63 1.75 15.52 15.52 0 01-8.26-2.08L424 51l3.26.33-.1 2.74a7 7 0 002.06.66 12.63 12.63 0 002.19.19 8.68 8.68 0 003.66-.75 2.5 2.5 0 001.63-2.36 2.25 2.25 0 00-1.32-2.2 12.65 12.65 0 00-3.28-1 47.39 47.39 0 01-3.9-.82 7.5 7.5 0 01-3.25-1.7 4.67 4.67 0 01-1.33-3.66c0-2.36.88-4 2.62-4.91a12 12 0 015.6-1.37 15 15 0 014.08.55 16.65 16.65 0 013.47 1.39l.47 5.1-3.3.37-.48-3.3a9.5 9.5 0 00-4.06-.9 5.62 5.62 0 00-2.87.66 2.33 2.33 0 00-1.15 2.25 2.13 2.13 0 001.3 2.07 11.91 11.91 0 003.21.92 36.69 36.69 0 013.82.83 7.46 7.46 0 013.21 1.74 4.9 4.9 0 011.3 3.73 5.56 5.56 0 01-2.66 4.91z"></path><path d="M181.17 30.75h-5.71v23.31h5.71q5.47 0 8.36-3t2.88-8.61q0-5.43-2.88-8.55t-8.36-3.15zM121.63 119.32V81.74h114.91v37.58zM153.22 109h-2v-6.85a4.8 4.8 0 00-1.58-4 5.57 5.57 0 00-3.55-1.26 5 5 0 00-4.92 3.26 4.19 4.19 0 00-1.88-2.46 5.82 5.82 0 00-3-.8 4.89 4.89 0 00-4.56 2.56v-2.21h-6.28v3.26h2v8.5h-2v3.23h9.11V109h-2.86v-5.25a4.4 4.4 0 01.69-2.56 2.47 2.47 0 012.21-1q2.57 0 2.56 3.63v8.41h6.29V109h-2v-5.25a4.47 4.47 0 01.67-2.56 2.42 2.42 0 012.19-1q2.63 0 2.63 3.63v8.41h6.28zm9.88-12.07q-4 0-6 2.36a8.41 8.41 0 00-2 5.66 7.25 7.25 0 002.17 5.62 8 8 0 005.65 2 8.54 8.54 0 005.94-2.11 7.27 7.27 0 002.34-5.67 8.21 8.21 0 00-2-5.51q-2.07-2.34-6.1-2.34zm-.1 12.35a3 3 0 01-2.63-1.33 5.68 5.68 0 01-.9-3.26 5 5 0 011-3.28 3.23 3.23 0 012.61-1.18 3.5 3.5 0 012.59 1.08 4.56 4.56 0 011.07 3.31 5.21 5.21 0 01-1 3.41 3.33 3.33 0 01-2.74 1.25zm25-2.3l-3.39-.29-.7 2.32H179l8.32-9.54-.32-2.23h-13.19l-.53 5.25 3.16.34.67-2.36h4.65l-8.25 9.53.44 2.26h13.13zm7.62-9.74h-4.46v5.39h4.46zm0 9.61h-4.46v5.39h4.46zm13.54-17.49h-4.23l-6.48 22.88h4.22zm8.68 0h-4.23l-6.45 22.88h4.19zm15 22.51l-.07-2.26a1.22 1.22 0 01-.56.1c-.69 0-1-.39-1-1.16v-6.49a4.39 4.39 0 00-1.8-3.84 7 7 0 00-4.16-1.28 14.55 14.55 0 00-3.16.3 24.14 24.14 0 00-3.29 1.06l-.56 3.46 3.39.4.5-1.69a2.78 2.78 0 011.08-.37 11.3 11.3 0 011.25-.07c1.19 0 1.89.37 2.09 1.1a8.55 8.55 0 01.3 2.26v.5a8.91 8.91 0 00-1.18-.11h-1.21a12.64 12.64 0 00-4.81.88 3.53 3.53 0 00-2.18 3.64 3.66 3.66 0 001.48 3.33 5.63 5.63 0 003.11 1 4.67 4.67 0 003-.91 6.78 6.78 0 001.8-2 3 3 0 003.33 3 5.54 5.54 0 002.66-.85zm-9.25-2.32a1.69 1.69 0 01-1.36-.52 1.81 1.81 0 01-.43-1.21 1.67 1.67 0 01.86-1.68 4.63 4.63 0 012-.42 7.69 7.69 0 011.07.07l1.06.13a3.58 3.58 0 01-1.08 2.74 3.24 3.24 0 01-2.11.89z"></path></svg></a></div><ul class="link-list-mdn"><li><a href="/pt-BR/docs/Web">Web Technologies</a></li><li><a href="/pt-BR/docs/Learn">Learn Web Development</a></li><li><a href="/pt-BR/docs/MDN/About">About MDN</a></li><li><a href="/pt-BR/docs/MDN/Feedback">Feedback</a></li></ul><ul class="link-list-moz"><li><a href="https://www.mozilla.org/about/" target="_blank" rel="noopener noreferrer">About</a></li><li><a href="https://shop.spreadshirt.com/mdn-store/" target="_blank" rel="noopener noreferrer">MDN Web Docs Store</a></li><li><a href="https://www.mozilla.org/contact/" target="_blank" rel="noopener noreferrer">Contact Us</a></li><li><a href="https://www.mozilla.org/firefox/?utm_source=developer.mozilla.org&amp;utm_campaign=footer&amp;utm_medium=referral" target="_blank" rel="noopener noreferrer">Firefox</a></li></ul><div class="social social-mdn"><h4>MDN</h4><ul><li><a class="social-icon twitter" href="https://twitter.com/mozdevnet" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">MDN on Twitter</span></a></li><li><a class="social-icon github" href="https://github.com/mdn/" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">MDN on Github</span></a></li></ul></div><div class="social social-moz"><h4>Mozilla</h4><ul><li><a class="social-icon twitter" href="https://twitter.com/mozilla" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">Mozilla on Twitter</span></a></li><li><a class="social-icon instagram" href="https://www.instagram.com/mozillagram/" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">Mozilla on Instagram</span></a></li></ul></div><p id="license" class="footer-license">¬© 2005-<!-- -->2022<!-- --> Mozilla and individual contributors. Content is available under<!-- --> <a href="/docs/MDN/About#Copyrights_and_licenses">these licenses</a>.</p><ul class="footer-legal"><li><a href="https://www.mozilla.org/about/legal/terms/mozilla" target="_blank" rel="noopener noreferrer">Terms</a></li><li><a href="https://www.mozilla.org/privacy/websites/" target="_blank" rel="noopener noreferrer">Privacy</a></li><li><a href="https://www.mozilla.org/privacy/websites/#cookies" target="_blank" rel="noopener noreferrer">Cookies</a></li></ul></div></footer><div class="page-overlay hidden"></div></div><script type="application/json" id="hydration">{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"Anatomia de um v√≠deo game","mdn_url":"/pt-BR/docs/Games/Anatomy","locale":"pt-BR","native":"Portugu√™s (do¬†Brasil)","sidebarHTML":"\n  <ol>\n    <li class=\"toggle\">\n        <details>\n            <summary>Introdu√ß√£o</summary>\n            <ol>\n              <li><a href=\"/pt-BR/docs/Games/Introduction\">Introdu√ß√£o</a></li>\n              <li><a href=\"/pt-BR/docs/Games/Anatomy\">Anatomia de um video game</a></li>\n              <li><a href=\"/pt-BR/docs/Games/Examples\">Exemplos</a></li>\n            </ol>\n        </details>\n    </li>\n    <li class=\"toggle\">\n        <details>\n            <summary>APIs para desenvolvimento de jogos</summary>\n            <ol>\n              <li><a href=\"/pt-BR/docs/Web/API/Canvas_API\">Canvas</a></li>\n              <li><a href=\"/pt-BR/docs/Web/CSS\">CSS</a></li>\n              <li><a href=\"/pt-BR/docs/Web/API/Fullscreen_API\">Full screen</a></li>\n              <li><a href=\"/pt-BR/docs/Web/API/Gamepad_API\">Gamepad</a></li>\n              <li><a href=\"/pt-BR/docs/Web/API/IndexedDB_API\">IndexedDB</a></li>\n              <li><a href=\"/pt-BR/docs/Web/JavaScript\">JavaScript</a></li>\n              <li><a href=\"/pt-BR/docs/Web/API/Pointer_Lock_API\">Pointer Lock</a></li>\n              <li><a href=\"/pt-BR/docs/Web/SVG\">SVG</a></li>\n              <li><a href=\"/pt-BR/docs/Web/JavaScript/Reference/Global_Objects/TypedArray\">Typed Arrays</a></li>\n              <li><a href=\"/pt-BR/docs/Web/API/Web_Audio_API\">Web Audio</a></li>\n              <li><a href=\"/pt-BR/docs/Web/API/WebGL_API\">WebGL</a></li>\n              <li><a href=\"/pt-BR/docs/Web/API/WebRTC_API\">WebRTC</a></li>\n              <li><a href=\"/pt-BR/docs/Web/API/WebSockets_API\">WebSockets</a></li>\n              <li><a href=\"/pt-BR/docs/Web/API/WebVR_API\">WebVR</a></li>\n              <li><a href=\"/pt-BR/docs/Web/API/Web_Workers_API\">Web Workers</a></li>\n              <li><a href=\"/pt-BR/docs/Web/API/XMLHttpRequest\">XMLHttpRequest</a></li>\n            </ol>\n        </details>\n    </li>\n    <li class=\"toggle\">\n        <details>\n            <summary>T√©cnicas</summary>\n            <ol>\n              <li><a href=\"/pt-BR/docs/Games/Techniques/Async_scripts\">Usando async scripts para&amp;nbsp;asm.js</a></li>\n              <li><a href=\"/pt-BR/docs/Web/Apps/Developing/Optimizing_startup_performance\">Otimizando a performance de startup</a></li>\n              <li><a href=\"/pt-BR/docs/Games/Techniques/WebRTC_data_channels\">Usando canais de dados WebRTC peer-to-peer</a></li>\n              <li><a href=\"/pt-BR/docs/Games/Techniques/Efficient_animation_for_web_games\">Anima√ß√£o eficiente para jogos web</a></li>\n              <li><a href=\"/pt-BR/docs/Games/Techniques/Audio_for_Web_Games\">Audio para Jogos Web</a></li>\n              <li><a href=\"/pt-BR/docs/Games/Techniques/2D_collision_detection\">Detec√ß√£o de colis√£o 2D</a></li>\n              <li><a href=\"/pt-BR/docs/Games/Techniques/Tilemaps\">Vis√£o geral de Tiles e tilemaps</a></li>\n            </ol>\n        </details>\n    </li>\n    <li class=\"toggle\">\n        <details>\n            <summary>Vis√£o geral de jogos 3D na Web</summary>\n            <ol>\n              <li><a href=\"/pt-BR/docs/Games/Techniques/3D_on_the_web\">Vis√£o geral de jogos 3D na Web</a></li>\n              <li><a href=\"/pt-BR/docs/Games/Techniques/3D_on_the_web/Basic_theory\">Explicando teoria b√°sica 3D</a></li>\n              <li><a href=\"/pt-BR/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_A-Frame\">Desenvolvendo um demo b√°sico com A-Frame</a></li>\n              <li><a href=\"/pt-BR/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_Babylon.js\">Desenvolvendo um demo b√°sico com Babylon.js</a></li>\n              <li><a href=\"/pt-BR/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_PlayCanvas\">Desenvolvendo um demo b√°sico com PlayCanvas</a></li>\n              <li><a href=\"/pt-BR/docs/Games/Techniques/3D_on_the_web/Building_up_a_basic_demo_with_Three.js\">Desenvolvendo um demo b√°sico com Three.js</a></li>\n              <li><a href=\"/pt-BR/docs/Games/Techniques/3D_on_the_web/WebVR\">WebVR</a></li>\n              <li><a href=\"/pt-BR/docs/Games/Techniques/3D_collision_detection\">Detec√ß√£o de colis√£o 3D</a></li>\n              <li><a href=\"/pt-BR/docs/Games/Techniques/3D_collision_detection/Bounding_volume_collision_detection_with_THREE.js\">BDetec√ß√£o da quantidade de&amp;nbsp;choque de colis√£o com THREE.js</a></li>\n            </ol>\n        </details>\n    </li>\n    <li class=\"toggle\">\n        <details>\n            <summary>Implementando mecanismos de controle de jogo</summary>\n            <ol>\n              <li><a href=\"/pt-BR/docs/Games/Techniques/Control_mechanisms\">Vis√£o geral de mecanismos de controle de jogo</a></li>\n              <li><a href=\"/pt-BR/docs/Games/Techniques/Control_mechanisms/Mobile_touch\">Controles de toque Mobile</a></li>\n              <li><a href=\"/pt-BR/docs/Games/Techniques/Control_mechanisms/Desktop_with_mouse_and_keyboard\">Controles de rato e teclado em Desktop</a></li>\n              <li><a href=\"/pt-BR/docs/Games/Techniques/Control_mechanisms/Desktop_with_gamepad\">Controle de gamepad em Desktop</a></li>\n              <li><a href=\"/pt-BR/docs/Games/Techniques/Control_mechanisms/Other\">Other</a></li>\n            </ol>\n        </details>\n    </li>\n    <li class=\"toggle\">\n        <details>\n            <summary>Tutoriais</summary>\n            <ol>\n              <li><a href=\"/pt-BR/docs/Games/Tutorials/2D_Breakout_game_pure_JavaScript\">Jogo 2D usando JavaScript puro</a></li>\n              <li><a href=\"/pt-BR/docs/Games/Tutorials/2D_breakout_game_Phaser\">Jogo 2D usando Phaser</a></li>\n              <li><a href=\"/pt-BR/docs/Games/Tutorials/HTML5_Gamedev_Phaser_Device_Orientation\">Jogo labirinto 2D com device orientation</a></li>\n              <li><a href=\"https://mozdevs.github.io/html5-games-workshop/en/guides/platformer/start-here/\">Plataforma de jogo 2D usando Phaser</a></li>\n            </ol>\n        </details>\n    </li>\n    <li class=\"toggle\">\n        <details>\n            <summary>Publicando jogos</summary>\n            <ol>\n              <li><a href=\"/pt-BR/docs/Games/Publishing_games\">Vis√£o geral sobre publica√ß√£o de jogos</a></li>\n              <li><a href=\"/pt-BR/docs/Games/Publishing_games/Game_distribution\">Distribui√ß√£o de Jogos</a></li>\n              <li><a href=\"/pt-BR/docs/Games/Publishing_games/Game_promotion\">Promo√ß√£o de Jogos</a></li>\n              <li><a href=\"/pt-BR/docs/Games/Publishing_games/Game_monetization\">Monetiza√ß√£o de Jogos</a></li>\n            </ol>\n        </details>\n    </li>\n  </ol>\n","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>Este artigo analisa a anatomia e o fluxo de trabalho do v√≠deo game m√©dio de um ponto de vista t√©cnico, em termos de como o loop principal deve ser executado. Isso ajuda os iniciantes da arena do desenvolvimento de jogos modernos a entender o que √© necess√°rio ao construir um jogo e como os padr√µes da web como o JavaScript se prestam como ferramentas. Os programadores de jogos experientes que s√£o novos no desenvolvimento da web tamb√©m podem se beneficiar.</p>"}},{"type":"prose","value":{"id":"apresentar_aceitar_interpretar_calcular_repetir","title":"Apresentar, aceitar, interpretar, calcular, repetir","isH3":false,"content":"<p>O objetivo de todo v√≠deo game √© <strong>apresentar</strong> ao usu√°rio uma situa√ß√£o, <strong>aceitar</strong> sua entrada, <strong>interpretar</strong> estes sinais em a√ß√µes, e <strong>calcular</strong> uma nova situa√ß√£o resultante dessas a√ß√µes. Jogos est√£o constantemente repetindo estes est√°gios, de novo e de novo, at√© alguma condi√ß√£o final ocorrer (como vencer, perder, ou sair para ir dormir). N√£o surpreendentemente, este padr√£o corresponde a como um mecanismo de jogo est√° programado.</p>\n<p>As especificidades dependem do jogo.</p>\n<p>Alguns jogos guiam este ciclo pela entrada do usu√°rio. Imagine que voc√™ est√° desenvolvendo um <em>\"encontre as diferen√ßas entre estas duas imagens similares\"</em>. Esses jogos <strong>apresentam</strong> duas imagens ao usu√°rio, eles <strong>aceitam</strong> seus cliques (ou toques), eles <strong>interpretam</strong> as entradas como um sucesso, falha, pausa, intera√ß√£o com o menu, etc., finalmente, eles <strong>calculam</strong> uma cena atualizada resultante dessas entradas. O ciclo do jogo √© avan√ßado pelas entradas do usu√°rio e pela esperas at√© que ele as forne√ßa. Isso √© mais aproximado de um <em>jogo</em> <em>baseado em turnos</em> onde n√£o h√° demanda de uma constante atualiza√ß√£o a cada frame, somente quando o jogador reaje.</p>\n<p>Outros jogos demandam controle sobre cada um dos menores intervalos de tempo poss√≠veis. Os mesmos princ√≠pios acima aplicam-se com uma pequena diferen√ßa: cada frame de anima√ß√£o avan√ßa o ciclo e cada mudan√ßa na entrada do usu√°rio √© capturada no primeiro turno dispon√≠vel. Este modelo <em>uma vez por frame</em> √© implementado em algo chamado <strong>loop principal.</strong> Se o seu jogo √© baseado em tempo, ent√£o essa ser√° a autoridade a qual as suas simula√ß√µes ir√£o obedecer.</p>\n<p>Mas o jogo pode n√£o precisar de controle por frame. Seu game loop pode ser similar ao exemplo <em>encontre as diferen√ßas</em> e basear-se em eventos de entrada. Ele pode requerer ambos, entrada e tempo simulado. Ele pode at√© mesmo ter um ciclo baseado em algo totalmente diferente.</p>\n<p>JavaScript Moderno ‚Äî como descrito nas pr√≥ximas se√ß√µes ‚Äî felizmente, facilita o desenvolvimento de um loop principal \"execute uma vez por frame\". √â claro, seu jogo ser√° somente t√£o otimizado quando o fizer. Se parece que algo deveria estar ligado a um evento menos frequente, seria uma boa ideia implement√°-lo fora do loop principal (mas n√£o sempre).</p>"}},{"type":"prose","value":{"id":"contruindo_um_loop_principal_em_javascript","title":"Contruindo um loop principal em JavaScript","isH3":false,"content":"<p>JavaScript trabalaha melhor com eventos e chamadas de fun√ß√µes. Navegadores modernos esfor√ßam-se para chamar m√©todos √† medida que s√£o necess√°rios e ociosos (ou fazem suas outras tarefas) nos intervalos. √â uma excelente ideia ligar seu c√≥digo aos momentos apropriados a eles. Pense se a sua fun√ß√£o realmente precisa ser chamada em um estrito intervalo de tempo, a cada frame, ou somente ap√≥s algo acontecer. Ser mais espec√≠fico com o navegador sobre quando a sua fun√ß√£o precisa ser chamada permite que o navegador otimize essa chamada. Tamb√©m, isso facilitar√° o seu trabalho.</p>\n<p>Alguns c√≥digos precisam ser rodados frame por frame, ent√£o por qu√™ ligar essas fun√ß√µes a qualquer coisa que n√£o seja a atualiza√ß√£o de tela do navegador? Na web, <code><a href=\"/pt-BR/docs/Web/API/Window/requestAnimationFrame\"><code>window.requestAnimationFrame()</code></a> ser√° a base da maioria dos mais bem programados loops principais do tipo frame por frame.</code> Uma chamada de fun√ß√£o deve ser passada dentro da fun√ß√£o anterior quando a mesma for chamada. Esta chamdada de fun√ß√£o ser√° executada em um tempo adequado antes da pr√≥xima atualiza√ß√£o de tela. Eis um exemplo de um loop principal simples:</p>\n<pre class=\"notranslate\">window.main = function () {\n  window.requestAnimationFrame( main );\n\n  // Whatever your main loop needs to do.\n};\n\nmain(); //Start the cycle.\n</pre>\n<p><strong>Nota</strong>: Em cada m√©todo do <code>main()</code> discutido aqui, n√≥s agendamos uma nova requisi√ß√£o <code>requestAnimationFrame</code> antes de executar o conte√∫do de nosso loop. Isso n√£o √© por acidente, e √© considerado boa pr√°tica. Chamando o pr√≥ximo <code>requestAnimationFrame</code> anteriormente garante que o navegador receba a chamada a tempo de planejar adequadamente, mesmo que seu frame atual falhe em sua (?VSync window?).</p>\n<p>O trecho de c√≥digo acima possui duas declara√ß√µes. A primeira cria uma fun√ß√£o como uma vari√°vel global chamada <code>main()</code>. Esta fun√ß√£o faz algum trabalho e tamb√©m diz ao navegador para cam√°-la na pr√≥xima frame com <code>window.requestAnimationFrame()</code>. A segunda declara√ß√£o chama a fun√ß√£o <code>main()</code>, definida na primeira declara√ß√£o. Pelo fato do <code>main()</code> ser chamado uma vez na segunda declara√ß√£o e cada chamada dele coloc√°-lo na lista de coisas a fazer na pr√≥xima frame, <code>main()</code> √© sincronizado com a sua taxa de frame.</p>\n<p>√â claro que esse loop n√£o √© perfeito. Antes de discutirmos maneiras de mud√°-lo, deixe-nos discutir o que j√° est√° bem.</p>\n<p>Cronometrando o loop principal para quando o navegador atualiza a tela o permite rodar o seu loop t√£o frequentemente quanto o navegador queira atualizar. Voc√™ tem controle sobre cada frame de anima√ß√£o. Isso √© muito simples por que <code>main()</code> √© a √∫nica fun√ß√£o em loop. Um jogo de primeira pessoa (ou um jogo similar) apresenta uma nova cena a cada frame. Voc√™ realmente n√£o pode ser mais suave e receptivo do que isso.</p>\n<p>Mas n√£o assuma imediatamente que anima√ß√µes requerem controle frame por frame. Anima√ß√µes simples podem ser facilmente desenvolvidas at√© mesmo com acelera√ß√£o-GPU, com anima√ß√µes CSS e com outras ferramentas inclusas no navegador. Existem muitas delas que far√£o sua vida mais f√°cil.</p>"}},{"type":"prose","value":{"id":"construindo_um_loop_principal_melhor_em_javascript","title":"Construindo um loop principal <em>melhor</em> em Javascript","isH3":false,"content":"<p>Existem dois problemas √≥bvios com nosso loop principal anterior: <code>main()</code> polui o objeto <code><a href=\"/pt-BR/docs/Web/API/Window\"><code>window</code></a></code> (onde todas as vari√°veis globais s√£o armazenadas) e o c√≥digo de exemplo n√£o nos permite <em>parar</em> o loop a menos que toda a aba seja fechada ou atualizada. Para o primeiro problema, se voc√™ quer que o loop principal apenas rode sem precisar de f√°cil acesso (direto) a ele, voc√™ pode cri√°-lo como uma Fun√ß√£o Diretamente Invocada (Immediately-Invoked Function Expression - IIFE).</p>\n<pre class=\"notranslate\">/*\n* Starting with the semicolon is in case whatever line of code above this example\n* relied on automatic semicolon insertion (ASI). The browser could accidentally\n* think this whole example continues from the previous line. The leading semicolon\n* marks the beginning of our new line if the previous one was not empty or terminated.\n*/\n\n;(function () {\n  function main() {\n    window.requestAnimationFrame( main );\n\n    // Your main loop contents.\n  }\n\n  main(); // Start the cycle\n})();\n</pre>\n<p>Quando o browser alcan√ßar este IIFE, ele ir√° definir o seu pr√≥prio loop principal e imediatamente agenda-o para para o pr√≥ximo frame. Ele n√£o ser√° anexado a nenhum objeto e <code>main</code> (ou <code>main()</code> para m√©todos) ser√° um nome v√°lido sem uso no resto da aplica√ß√£o, livre para ser definido como outra coisa.</p>\n<p>Nota: Na pr√°tica, √© mais comum previnir o pr√≥ximo <code>requestAnimationFrame()</code> com uma declara√ß√£o <code>if</code>, no lugar de chamar <code>cancelAnimationFrame()</code>.</p>\n<p>Para o pr√≥ximo problema, parando o loop principal, voc√™ precisar√° cancelar a chamada a <code>main()</code> com <code>window.cancelAnimationFrame()</code>. Voc√™ precisar√° passar para <code>cancelAnimationFrame()</code> o token do ID dado pelo <code>requestAnimationFrame()</code> quando ele foi chamado. Vamos assumir que as fun√ß√µes do seu jogo e vari√°veis est√£o constru√≠das em um namespace que voc√™ chamou de <code>MyGame</code>. Expandindo o nosso √∫ltimo exemplo, o loop principal ficaria parecido com isto:</p>\n<pre class=\"notranslate\">/*\n* Starting with the semicolon is in case whatever line of code above this example\n* relied on automatic semicolon insertion (ASI). The browser could accidentally\n* think this whole example continues from the previous line. The leading semicolon\n* marks the beginning of our new line if the previous one was not empty or terminated.\n*\n* Let us also assume that MyGame is previously defined.\n*/\n\n;(function () {\n  function main() {\n    MyGame.stopMain = window.requestAnimationFrame( main );\n\n    // Your main loop contents.\n  }\n\n  main(); // Start the cycle\n})();\n</pre>\n<p>N√≥s temos agora uma vari√°vel declarada no namespace do nosso <code>MyGame</code>, que nos chamamos de <code>stopMain</code>, e que cont√©m o ID retornado pela execu√ß√£o mais recente do <code>requestAnimationFrame()</code> do nosso loop principal. Em algum ponto, n√≥s podemos parar o loop principal pedindo ao browser para cancelar a requisi√ß√£o que corresponde ao nosso token.</p>\n<pre class=\"notranslate\">window.cancelAnimationFrame( MyGame.stopMain );\n</pre>\n<p>A chave para programar loop principal, no JavaScript, √© anex√°-lo a qualquer evento que deve estar dirigindo sua a√ß√£o e prestar aten√ß√£o a como os diferentes sistemas envolvidos interagem entre si. Voc√™ poder√° ter multiplos componentes dirigidos por multiplos diferentes tipos de eventos. Isto parece complexidade desnecess√°ria mas pode ser s√≥ uma boa otimiza√ß√£o (n√£o necess√°ria, √© claro). O problema √© que voc√™ n√£o est√° programando um loop principal t√≠pico. No JavaScript, voc√™ est√° usando o loop principal do browser e est√° tentando faz√™-lo efetivamente.</p>","titleAsText":"Construindo um loop principal melhor em Javascript"}},{"type":"prose","value":{"id":"construindo_um_loop_principal_mais_otimizado_no_javascript","title":"Construindo um loop principal mais <em>otimizado</em> no JavaScript","isH3":false,"content":"<p>Finalmente, no JavaScript, o browser est√° rodando o seu loop principal e o seu c√≥digo existe em algum de seus est√°gios. As se√ß√µes acima descrevem loops principais que tentam n√£o eliminar o controle do navegador. Esses m√©todos principais anexam eles mesmos ao <code>window.requestAnimationFrame()</code>, que pergunta ao browser por controle sobre o pr√≥ximo frame. √â responsabilidade do browser saber como relacionar esses requests ao loop principal. A <a href=\"https://www.w3.org/TR/animation-timing/\" class=\"external\" rel=\" noopener\">especifica√ß√£o da W3C para o requestAnimationFrame</a> n√£o define realmente quando os browsers tem que executar os callbacks do requestAnimationFrame. Isto pode ser uma vantagem por que os fornecedores de browsers podem ter a liberdade de experimentar com as solu√ß√µes que sintam que seja melhor e podem modifica-la com o passar do tempo.</p>\n<p>Vers√µes modernas do Firefox e Google Chrome (e provavelmente outros) tentam conectar os callbacks do <code>requestAnimationFramea</code> a sua thread principal no primeiro intervalo de tempo de um frame. A thread principal portanto tenta fazer o seguinte:</p>\n<ol>\n  <li>Come√ßar uma nova frame (enquanto a anterior √© tratada pela exibi√ß√£o).</li>\n  <li>Go through the list of <code>requestAnimationFrame</code> callbacks and invoke them.</li>\n  <li>Perform garbage collection and other per-frame tasks when the above callbacks stop controlling the main thread.</li>\n  <li>Sleep (unless an event interrupts the browser's nap) until the monitor is ready for your image (<a href=\"http://www.techopedia.com/definition/92/vertical-sync-vsync\" class=\"external\" rel=\" noopener\">VSync</a>) and repeat.</li>\n</ol>\n<p>Modern versions of Firefox and Google Chrome (and probably others) <em>attempt</em> to connect <code>requestAnimationFrame</code> callbacks to their main thread at the very beginning of a frame's timeslice. The browser's main thread thus <em>tries</em> to look like the following:</p>\n<ol>\n  <li>Start a new frame (while the previous frame is handled by the display).</li>\n  <li>Go through the list of <code>requestAnimationFrame</code> callbacks and invoke them.</li>\n  <li>Perform garbage collection and other per-frame tasks when the above callbacks stop controlling the main thread.</li>\n  <li>Sleep (unless an event interrupts the browser's nap) until the monitor is ready for your image (<a href=\"http://www.techopedia.com/definition/92/vertical-sync-vsync\" class=\"external\" rel=\" noopener\">VSync</a>) and repeat.</li>\n</ol>\n<p>You can think about developing realtime applications as having a budget of time to do work. All of the above steps must take place every 16-and-a-half milliseconds to keep up with a 60 Hz display. Browsers invoke your code as early as possible to give it maximum computation time. Your main thread will often start workloads that are not even on the main thread (such as rasterization or shaders in WebGL). Long calculations can be performed on a Web Worker or a GPU at the same time as the browser uses its main thread to manage garbage collection, its other tasks, or handle asynchronous events.</p>\n<p>While we are on the topic of budgeting time, many web browsers have a tool called <em>High Resolution Time</em>. The <a class=\"page-not-created\" title=\"A documenta√ß√£o sobre isto ainda n√£o foi escrita; por favor considere contribuir!\"><code>Date</code></a> object is no longer the recognised method for timing events because it is very imprecise and can be modified by the system clock. High Resolution Time, on the other hand, counts the number of milliseconds since <code>navigationStart</code> (when the previous document is unloaded). This value is returned as a decimal number accurate to a thousandth of a millisecond. It is known as a <code><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DOMHighResTimeStamp\"><code>DOMHighResTimeStamp</code> <small>(en-US)</small></a></code> but, for all intents and purposes, consider it a floating point number.</p>\n<p><strong>Note</strong>: Systems (hardware or software) that are not capable of microsecond accuracy are allowed to provide millisecond accuracy as a minimum. They should provide 0.001ms accuracy if they are capable of it, however.</p>\n<p>This value is not too useful alone, since it is relative to a fairly uninteresting event, but it can be subtracted from another timestamp to accurately and precisely determine how much time elapsed between those two points. To acquire one of these timestamps, you can call <code>window.performance.now()</code> and store the result as a variable.</p>\n<pre class=\"notranslate\">var tNow = window.performance.now();\n</pre>\n<p>Back to the topic of the main loop. You will often want to know when your main function was invoked. Because this is common, <code>window.requestAnimationFrame()</code> always provides a <code>DOMHighResTimeStamp</code> to callbacks as an argument when they are executed. This leads to another enhancement to our previous main loops.</p>\n<pre class=\"notranslate\">/*\n* Starting with the semicolon is in case whatever line of code above this example\n* relied on automatic semicolon insertion (ASI). The browser could accidentally\n* think this whole example continues from the previous line. The leading semicolon\n* marks the beginning of our new line if the previous one was not empty or terminated.\n*\n* Let us also assume that MyGame is previously defined.\n*/\n\n;(function () {\n  function main( tFrame ) {\n    MyGame.stopMain = window.requestAnimationFrame( main );\n\n    // Your main loop contents.\n    // tFrame, from \"function main ( tFrame )\", is now a DOMHighResTimeStamp provided by rAF.\n  }\n\n  main(); // Start the cycle\n})();\n</pre>\n<p>Several other optimizations are possible and it really depends on what your game attempts to accomplish. Your game genre will obviously make a difference but it could even be more subtle than that. You could draw every pixel individually on a canvas or you could layer DOM elements (including multiple WebGL canvases with transparent backgrounds if you want) into a complex hierarchy. Each of these paths will lead to different opportunities and constraints.</p>","titleAsText":"Construindo um loop principal mais otimizado no JavaScript"}},{"type":"prose","value":{"id":"it_is_decision..._time","title":"It is decision... time","isH3":false,"content":"<p>You will need to make hard decisions about your main loop: how to simulate the accurate progress of time. If you demand per-frame control then you will need to determine how frequently your game will update and draw. You might even want update and draw to occur at different rates. You will also need to consider how gracefully your game will fail if the user's system cannot keep up with the workload. Let us start by assuming that you will handle user input and update the game state every time you draw. We will branch out later.</p>\n<p><em><strong>Note</strong>:</em> Changing how your main loop deals with time is a debugging nightmare, everywhere. Think about your needs, carefully, before working on your main loop.</p>"}},{"type":"prose","value":{"id":"what_most_browser_games_should_look_like","title":"What most browser games should look like","isH3":true,"content":"<p>If your game can hit the maximum refresh rate of any hardware you support then your job is fairly easy. You can simply update, render, and then do nothing until VSync.</p>\n<pre class=\"notranslate\">/*\n* Starting with the semicolon is in case whatever line of code above this example\n* relied on automatic semicolon insertion (ASI). The browser could accidentally\n* think this whole example continues from the previous line. The leading semicolon\n* marks the beginning of our new line if the previous one was not empty or terminated.\n*\n* Let us also assume that MyGame is previously defined.\n*/\n\n;(function () {\n  function main( tFrame ) {\n    MyGame.stopMain = window.requestAnimationFrame( main );\n\n    update( tFrame ); //Call your update method. In our case, we give it rAF's timestamp.\n    render();\n  }\n\n  main(); // Start the cycle\n})();\n</pre>\n<p>If the maximum refresh rate cannot be reached, quality settings could be adjusted to stay under your time budget. The most famous example of this concept is the game from id Software, RAGE. This game removed control from the user in order to keep its calculation time at roughly 16ms (or roughly 60fps). If computation took too long then rendered resolution would decrease, textures and other assets would fail to load or draw, and so forth. This (non-web) case study made a few assumptions and tradeoffs:</p>\n<ul>\n  <li>Each frame of animation accounts for user input.</li>\n  <li>No frame needs to be extrapolated (guessed) because each draw has its own update.</li>\n  <li>Simulation systems can basically assume that each full update is ~16ms apart.</li>\n  <li>Giving the user control over quality settings would be a nightmare.</li>\n  <li>Different monitors input at different rates: 30 FPS, 75 FPS, 100 FPS, 120 FPS, 144 FPS, etc.</li>\n  <li>Systems that are unable to keep up with 60 FPS lose visual quality to keep the game running at optimal speed (eventually it outright fails, if quality becomes too low.)</li>\n</ul>"}},{"type":"prose","value":{"id":"other_ways_to_handle_variable_refresh_rate_needs","title":"Other ways to handle variable refresh rate needs","isH3":true,"content":"<p>Other methods of tackling the problem exist.</p>\n<p>One common technique is to update the simulation at a constant frequency and then draw as much (or as little) of the actual frames as possible. The update method can continue looping without care about what the user sees. The draw method can view the last update and when it happened. Since draw knows when it represents, and the simulation time for the last update, it can predict a plausible frame to draw for the user. It does not matter whether this is more frequent than the official update loop (or even less frequent). The update method sets checkpoints and, as frequently as the system allows, the render method draws instants of time around them. There are many ways to separate the update method in web standards:</p>\n<ul>\n  <li>Draw on <code>requestAnimationFrame</code> and update on a <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/setInterval\"><code>window.setInterval</code> <small>(en-US)</small></a> or <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/setTimeout\"><code>window.setTimeout</code> <small>(en-US)</small></a>.\n    <ul>\n      <li>This uses processor time even when unfocused or minimized, hogs the main thread, and is probably an artifact of traditional game loops (but it is simple.)</li>\n    </ul>\n  </li>\n  <li>Draw on <code>requestAnimationFrame</code> and update on a <code>setInterval</code> or <code>setTimeout</code> in a <a href=\"/en-US/docs/Web/API/Web_Workers_API/Using_web_workers\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">Web Worker (en-US)</a>.\n    <ul>\n      <li>This is the same as above, except update does not hog the main thread (nor does the main thread hog it). This is a more complex solution, and might be too much overhead for simple updates.</li>\n    </ul>\n  </li>\n  <li>Draw on <code>requestAnimationFrame</code> and use it to poke a Web Worker containing the update method with the number of ticks to compute, if any.\n    <ul>\n      <li>This sleeps until <code>requestAnimationFrame</code> is called and does not pollute the main thread, plus you are not relying on old fashioned methods. Again, this is a bit more complex than the previous two options, and <em>starting</em> each update will be blocked until the browser decides to fire rAF callbacks.</li>\n    </ul>\n  </li>\n</ul>\n<p>Each of these methods have similar tradeoffs:</p>\n<ul>\n  <li>Users can skip rendering frames or interpolate extra ones depending on their performance.</li>\n  <li>You can count on all users updating non-cosmetic variables at the same constant frequency minus hiccups.</li>\n  <li>Much more complicated to program than the basic loops we saw earlier.</li>\n  <li>User input is completely ignored until the next update (even if the user has a fast device).</li>\n  <li>The mandatory interpolation has a performance penalty.</li>\n</ul>\n<p>A separate update and draw method could look like the following example. For the sake of demonstration, the example is based on the third bullet point, just without using Web Workers for readability (and, let's be honest, writeability).</p>\n<p><em>Note: This example, specifically, is in need of technical review.</em></p>\n<pre class=\"notranslate\">/*\n* Starting with the semicolon is in case whatever line of code above this example\n* relied on automatic semicolon insertion (ASI). The browser could accidentally\n* think this whole example continues from the previous line. The leading semicolon\n* marks the beginning of our new line if the previous one was not empty or terminated.\n*\n* Let us also assume that MyGame is previously defined.\n*\n* MyGame.lastRender keeps track of the last provided requestAnimationFrame timestamp.\n* MyGame.lastTick keeps track of the last update time. Always increments by tickLength.\n* MyGame.tickLength is how frequently the game state updates. It is 20 Hz (50ms) here.\n*\n* timeSinceTick is the time between requestAnimationFrame callback and last update.\n* numTicks is how many updates should have happened between these two rendered frames.\n*\n* render() is passed tFrame because it is assumed that the render method will calculate\n*          how long it has been since the most recently passed update tick for\n*          extrapolation (purely cosmetic for fast devices). It draws the scene.\n*\n* update() calculates the game state as of a given point in time. It should always\n*          increment by tickLength. It is the authority for game state. It is passed\n*          the DOMHighResTimeStamp for the time it represents (which, again, is always\n*          last update + MyGame.tickLength unless a pause feature is added, etc.)\n*\n* setInitialState() Performs whatever tasks are leftover before the mainloop must run.\n*                   It is just a generic example function that you might have added.\n*/\n\n;(function () {\n  function main( tFrame ) {\n    MyGame.stopMain = window.requestAnimationFrame( main );\n    var nextTick = MyGame.lastTick + MyGame.tickLength;\n    var numTicks = 0;\n\n    //If tFrame &lt; nextTick then 0 ticks need to be updated (0 is default for numTicks).\n    //If tFrame = nextTick then 1 tick needs to be updated (and so forth).\n    //Note: As we mention in summary, you should keep track of how large numTicks is.\n    //If it is large, then either your game was asleep, or the machine cannot keep up.\n    if (tFrame &gt; nextTick) {\n      var timeSinceTick = tFrame - MyGame.lastTick;\n      numTicks = Math.floor( timeSinceTick / MyGame.tickLength );\n    }\n\n    queueUpdates( numTicks );\n    render( tFrame );\n    MyGame.lastRender = tFrame;\n  }\n\n  function queueUpdates( numTicks ) {\n    for(var i=0; i &lt; numTicks; i++) {\n      MyGame.lastTick = MyGame.lastTick + MyGame.tickLength; //Now lastTick is this tick.\n      update( MyGame.lastTick );\n    }\n  }\n\n  MyGame.lastTick = performance.now();\n  MyGame.lastRender = MyGame.lastTick; //Pretend the first draw was on first update.\n  MyGame.tickLength = 50; //This sets your simulation to run at 20Hz (50ms)\n\n  setInitialState();\n  main(performance.now()); // Start the cycle\n})();\n</pre>\n<p>Another alternative is to simply do certain things less often. If a portion of your update loop is difficult to compute but insensitive to time, you might consider scaling back its frequency and, ideally, spreading it out into chunks throughout that lengthened period. An implicit example of this is found over at The Artillery Blog for Artillery Games, where they <a href=\"http://blog.artillery.com/2012/10/browser-garbage-collection-and-framerate.html\" class=\"external\" rel=\" noopener\">adjust their rate of garbage generation</a> to optimize garbage collection. Obviously, cleaning up resources is not time sensitive (especially if tidying is more disruptive than the garbage itself).</p>\n<p>This may also apply to some of your own tasks. Those are good candidates to throttle when available resources become a concern.</p>"}},{"type":"prose","value":{"id":"summary","title":"Summary","isH3":false,"content":"<p>I want to be clear that any of the above, or none of them, could be best for your game. The correct decision entirely depends on the trade-offs that you are willing (and unwilling) to make. The concern is mostly with switching to another option. Fortunately, I do not have any experience with this but I have heard it is an excruciating game of Whack-a-Mole.</p>\n<p>An important thing to remember for managed platforms, like the web, is that your loop may stop execution for significant periods of time. This could occur when the user unselects your tab and the browser sleeps (or slows) its <code>requestAnimationFrame</code> callback interval. You have many ways to deal with this situation and this could depend on whether your game is single player or multiplayer. Some choices are:</p>\n<ul>\n  <li>Consider the gap \"a pause\" and skip the time.\n    <ul>\n      <li>You can probably see how this is problematic for most multiplayer games.</li>\n    </ul>\n  </li>\n  <li>You can simulate the gap to catch up.\n    <ul>\n      <li>This can be a problem for long drops and/or complex updates.</li>\n    </ul>\n  </li>\n  <li>You can recover the game state from a peer or the server.\n    <ul>\n      <li>This is ineffective if your peers or server are out-of-date too, or they don't exist because the game is single player and doesn't have a server.</li>\n    </ul>\n  </li>\n</ul>\n<p>Once your main loop has been developed and you have decided on a set of assumptions and tradeoffs which suit your game, it is now just a matter of using your decisions to calculate any applicable physics, AI, sounds, network synchronization, and whatever else your game may require.</p>"}}],"toc":[{"text":"Apresentar, aceitar, interpretar, calcular, repetir","id":"apresentar_aceitar_interpretar_calcular_repetir"},{"text":"Contruindo um loop principal em JavaScript","id":"contruindo_um_loop_principal_em_javascript"},{"text":"Construindo um loop principal <em>melhor</em> em Javascript","id":"construindo_um_loop_principal_melhor_em_javascript"},{"text":"Construindo um loop principal mais <em>otimizado</em> no JavaScript","id":"construindo_um_loop_principal_mais_otimizado_no_javascript"},{"text":"It is decision... time","id":"it_is_decision..._time"},{"text":"Summary","id":"summary"}],"summary":"I want to be clear that any of the above, or none of them, could be best for your game. The correct decision entirely depends on the trade-offs that you are willing (and unwilling) to make. The concern is mostly with switching to another option. Fortunately, I do not have any experience with this but I have heard it is an excruciating game of Whack-a-Mole.","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Anatomy of a video game","locale":"en-US","native":"English (US)"},{"title":"Anatomie d'un jeu vid√©o","locale":"fr","native":"Fran√ßais"},{"title":"„Éì„Éá„Ç™„Ç≤„Éº„É†„ÅÆËß£ÂâñÂ≠¶","locale":"ja","native":"Êó•Êú¨Ë™û"},{"title":"–ê–Ω–∞—Ç–æ–º–∏—è –≤–∏–¥–µ–æ–∏–≥—Ä—ã","locale":"ru","native":"–†—É—Å—Å–∫–∏–π"},{"title":"ÂâñÊûêÊ∏∏ÊàèÁªìÊûÑ","locale":"zh-CN","native":"‰∏≠Êñá (ÁÆÄ‰Ωì)"}],"source":{"folder":"pt-br/games/anatomy","github_url":"https://github.com/mdn/translated-content/blob/main/files/pt-br/games/anatomy/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/pt-BR/docs/Games","title":"Desenvolvimento de jogos"},{"uri":"/pt-BR/docs/Games/Anatomy","title":"Anatomia de um v√≠deo game"}],"pageTitle":"Anatomia de um v√≠deo game - Desenvolvimento de jogos | MDN","noIndexing":false}}</script></body></html>