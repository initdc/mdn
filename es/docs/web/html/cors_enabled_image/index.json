{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"Imagen con CORS habilitado","mdn_url":"/es/docs/Web/HTML/CORS_enabled_image","locale":"es","native":"Español","sidebarHTML":"","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>La especificación HTML introduce un atributo <a href=\"/es/docs/Web/HTML/Element/img#attr-crossorigin\"><code>crossorigin</code></a> para imágenes que, en conjunto con el encabezado <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Glossary/CORS\">CORS <small>(en-US)</small></a> apropiado, permite definir imágenes con el elemento <a href=\"/es/docs/Web/HTML/Element/img\"><code>&lt;img&gt;</code></a> que se carguen de orígenes externos dentro de un lienzo (<em>canvas</em>) como si estas fuesen cargadas del origen actual.</p>\n<p>Vea el artículo <a href=\"/en-US/HTML/CORS_settings_attributes\">\"Atributos de configuración CORS\"</a> para mas detalles de como el atributo \"crossorigin\" es usado.</p>"}},{"type":"prose","value":{"id":"¿qué_es_un_tainted_canvas","title":"¿Qué es un \"tainted\" canvas?","isH3":false,"content":"<p>Aunque puedes usar imágenes sin la aprobación del CORS en el elemento canvas, hacerlo puede \"manchar\" el canvas. Por ejemplo, no puedes usar los métodos canvas <code>toBlob()</code>, <code>toDataURL()</code>, or <code>getImageData(). Si los usas se lanzará un mensaje de seguridad.</code></p>\n<p>Esto protegerá a los usuarios de tener información privada usada por medio de imágenes que cogen información desde otras web sin permiso.</p>"}},{"type":"prose","value":{"id":"ejemplo_almacenando_una_imagen_desde_un_origen_externo","title":"Ejemplo: Almacenando una imagen desde un origen externo","isH3":false,"content":"<p>Debes de tener un servidor de hosting de imágenes con el apropiado <code>Access-Control-Allow-Origin</code> header. Añadiendo el atributo crossOrigin crea un request header.</p>\n<p>Puedes utilizar este fragemto de la configuración del servidor Apache del Boilerplate HTML5 para responder apropiadamente con este encabezado de respuesta.</p>\n<div class=\"code-example\"><pre class=\"brush: xml notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>IfModule</span> <span class=\"token attr-name\">mod_setenvif.c</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>IfModule</span> <span class=\"token attr-name\">mod_headers.c</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>FilesMatch</span> <span class=\"token attr-name\">\"\\.(cur|gif|ico|jpe?g|png|svgz?|webp)$\"</span><span class=\"token punctuation\">&gt;</span></span>\n            SetEnvIf Origin \":\" IS_CORS\n            Header set Access-Control-Allow-Origin \"*\" env=IS_CORS\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>FilesMatch</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>IfModule</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>IfModule</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<p>Dado que está todo ordenado, serás capás de guardar esas imagenes en el almacenamiento del DOM, así como si fueran solicitados de tu dominio.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> img <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Image</span><span class=\"token punctuation\">,</span>\n    canvas <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"canvas\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    ctx <span class=\"token operator\">=</span> canvas<span class=\"token punctuation\">.</span><span class=\"token function\">getContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"2d\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    src <span class=\"token operator\">=</span> <span class=\"token string\">\"http://example.com/image\"</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// insert image url here</span>\n\nimg<span class=\"token punctuation\">.</span>crossOrigin <span class=\"token operator\">=</span> <span class=\"token string\">\"Anonymous\"</span><span class=\"token punctuation\">;</span>\n\nimg<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onload</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    canvas<span class=\"token punctuation\">.</span>width <span class=\"token operator\">=</span> img<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">;</span>\n    canvas<span class=\"token punctuation\">.</span>height <span class=\"token operator\">=</span> img<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">;</span>\n    ctx<span class=\"token punctuation\">.</span><span class=\"token function\">drawImage</span><span class=\"token punctuation\">(</span> img<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span> <span class=\"token string\">\"savedImageData\"</span><span class=\"token punctuation\">,</span> canvas<span class=\"token punctuation\">.</span><span class=\"token function\">toDataURL</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"image/png\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\nimg<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> src<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// make sure the load event fires for cached images too</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> img<span class=\"token punctuation\">.</span>complete <span class=\"token operator\">||</span> img<span class=\"token punctuation\">.</span>complete <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span> <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    img<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> <span class=\"token string\">\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==\"</span><span class=\"token punctuation\">;</span>\n    img<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> src<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"también_puede_ver","title":"También puede ver","isH3":false,"content":"<ul>\n  <li><a href=\"https://blog.chromium.org/2011/07/using-cross-domain-images-in-webgl-and.html\" class=\"external\" rel=\" noopener\">Using Cross-domain images in WebGL and Chrome 13</a></li>\n  <li><a href=\"http://whatwg.org/html#attr-img-crossorigin\" class=\"external\" rel=\" noopener\">HTML Specification - the <code>crossorigin</code> attribute</a></li>\n</ul>"}}],"toc":[{"text":"¿Qué es un \"tainted\" canvas?","id":"¿qué_es_un_tainted_canvas"},{"text":"Ejemplo: Almacenando una imagen desde un origen externo","id":"ejemplo_almacenando_una_imagen_desde_un_origen_externo"},{"text":"También puede ver","id":"también_puede_ver"}],"summary":"La especificación HTML introduce un atributo crossorigin para imágenes que, en conjunto con el encabezado CORS (en-US) apropiado, permite definir imágenes con el elemento <img> que se carguen de orígenes externos dentro de un lienzo (canvas) como si estas fuesen cargadas del origen actual.","popularity":0.0003,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Allowing cross-origin use of images and canvas","locale":"en-US","native":"English (US)"},{"title":"Autoriser les images et canevas provenant d'autres origines","locale":"fr","native":"Français"},{"title":"画像とキャンバスをオリジン間で利用できるようにする","locale":"ja","native":"日本語"},{"title":"교차 출처 이미지와 캔버스 허용하기","locale":"ko","native":"한국어"},{"title":"CORS_habilitar_imagens","locale":"pt-BR","native":"Português (do Brasil)"},{"title":"Разрешение использования изображений из разных источников и canvas","locale":"ru","native":"Русский"},{"title":"启用了 CORS 的图片","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"es/web/html/cors_enabled_image","github_url":"https://github.com/mdn/translated-content/blob/main/files/es/web/html/cors_enabled_image/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/es/docs/Web","title":"Tecnología para desarrolladores web"},{"uri":"/es/docs/Web/HTML","title":"HTML: Lenguaje de etiquetas de hipertexto"},{"uri":"/es/docs/Web/HTML/CORS_enabled_image","title":"Imagen con CORS habilitado"}],"pageTitle":"Imagen con CORS habilitado - HTML: Lenguaje de etiquetas de hipertexto | MDN","noIndexing":false}}