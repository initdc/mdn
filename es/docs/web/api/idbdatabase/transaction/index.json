{"doc":{"isMarkdown":false,"isTranslated":true,"isActive":true,"flaws":{},"title":"IDBDatabase.transaction()","mdn_url":"/es/docs/Web/API/IDBDatabase/transaction","locale":"es","native":"Español","sidebarHTML":"<ol><li><strong><a href=\"/es/docs/Web/API/IndexedDB_API\">IndexedDB API</a></strong></li><li><strong><a href=\"/es/docs/Web/API/IDBDatabase\"><code>IDBDatabase</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Propiedades</summary><ol><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBDatabase/name\"><code>name</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBDatabase/objectStoreNames\"><code>objectStoreNames</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBDatabase/version\"><code>version</code> <small>(en-US)</small></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Métodos</summary><ol><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBDatabase/close\"><code>close()</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBDatabase/createObjectStore\"><code>createObjectStore()</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBDatabase/deleteObjectStore\"><code>deleteObjectStore()</code> <small>(en-US)</small></a></li><li><em><code>transaction()</code></em></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Eventos</summary><ol><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBDatabase/close_event\"><code>close</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBDatabase/versionchange_event\"><code>versionchange</code> <small>(en-US)</small></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Herencia</summary><ol><li><a href=\"/es/docs/Web/API/EventTarget\"><code>EventTarget</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Páginas relacionadas a IndexedDB</summary><ol><li><a href=\"/es/docs/Web/API/IDBCursor\"><code>IDBCursor</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBCursorWithValue\"><code>IDBCursorWithValue</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBFactory\"><code>IDBFactory</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBIndex\"><code>IDBIndex</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBKeyRange\"><code>IDBKeyRange</code> <small>(en-US)</small></a></li><li><a href=\"/es/docs/Web/API/IDBObjectStore\"><code>IDBObjectStore</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBOpenDBRequest\"><code>IDBOpenDBRequest</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBRequest\"><code>IDBRequest</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBTransaction\"><code>IDBTransaction</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBVersionChangeEvent\"><code>IDBVersionChangeEvent</code> <small>(en-US)</small></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p></p><p></p>\n\n<div id=\"sect1\">\n<p>El método <strong><code>transaction()</code></strong> <em><strong><code>[transacción]</code></strong></em> de la interfaz <a href=\"/es/docs/Web/API/IDBDatabase\"><code>IDBDatabase</code></a> retorna inmediatamente un objeto de transacción<span style=\"line-height: 1.5;\"> (<a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBTransaction\"><code>IDBTransaction</code> <small>(en-US)</small></a>) que contiene el método <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBTransaction/objectStore\"><code>IDBTransaction.objectStore</code> <small>(en-US)</small></a>, el cual puedes usar para acceder a tu almacén de objetos.</span></p>\n\n<p></p><div class=\"notecard note\" id=\"sect2\">\n  <p><strong>Nota:</strong> Esta característica está disponible en <a href=\"/es/docs/Web/API/Web_Workers_API\">Web Workers</a></p>\n</div><p></p>\n</div>"}},{"type":"prose","value":{"id":"sintáxis","title":"Sintáxis","isH3":false,"content":"<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> transaccion <span class=\"token operator\">=</span> db<span class=\"token punctuation\">.</span><span class=\"token function\">transaction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"toDoList\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"readwrite\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>"}},{"type":"prose","value":{"id":"retorna","title":"Retorna","isH3":true,"content":"<p>Un objeto <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBTransaction\"><code>IDBTransaction</code> <small>(en-US)</small></a>.</p>"}},{"type":"prose","value":{"id":"excepciones","title":"Excepciones","isH3":true,"content":"<p>Éste método puede invocar una excepción <a href=\"/es/docs/Web/API/DomException\"><code>DOMException</code></a> de alguno de los siguientes tipos:</p>\n\n<table class=\"standard-table\">\n <thead>\n  <tr>\n   <th scope=\"col\">Excepción</th>\n   <th scope=\"col\">Descripción</th>\n  </tr>\n </thead>\n <tbody>\n  <tr>\n   <td><code><a href=\"/en-US/docs/Web\">InvalidStateError</a></code></td>\n   <td>\n    <p>El método <code>close()</code> ha sido llamado previamente en esta instancia de <a href=\"/es/docs/Web/API/IDBDatabase\"><code>IDBDatabase</code></a>.</p>\n   </td>\n  </tr>\n  <tr>\n   <td><code>NotFoundError</code></td>\n   <td>Un almacén de objetos especificado en el parámetro <code>storeNames</code> ha sido borrado o removido.</td>\n  </tr>\n  <tr>\n   <td><code>TypeError</code></td>\n   <td>El valor para el parámetro <code>mode</code> es inválido.</td>\n  </tr>\n  <tr>\n   <td><code>InvalidAccessError</code></td>\n   <td>La función fue llamada con una lista vacía de nombres de almacenes.<br>\n     </td>\n  </tr>\n </tbody>\n</table>"}},{"type":"prose","value":{"id":"ejemplo","title":"Ejemplo","isH3":false,"content":"<p>En este ejemplo abrimos la conexión a una base de datos, luego usamos <code>transaction()</code> para abrir una transacción en dicha base de datos. Para un ejemplo completo, vea nuestra aplicación <a href=\"https://github.com/mdn/to-do-notifications/\" style=\"line-height: 1.5;\" class=\"external\" rel=\" noopener\">To-do Notifications</a> <span style=\"line-height: 1.5;\">(</span><a href=\"https://mdn.github.io/to-do-notifications/\" style=\"line-height: 1.5;\" class=\"external\" rel=\" noopener\">ver ejemplo en vivo</a><span style=\"line-height: 1.5;\">).</span></p>\n\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> db<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Abrimos nuestra base de datos:</span>\n<span class=\"token keyword\">var</span> DBOpenRequest <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>indexedDB<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"toDoList\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nDBOpenRequest<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onsuccess</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  note<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">+=</span> <span class=\"token string\">'&lt;li&gt;Base de datos inicializada.&lt;/li&gt;'</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// almacenar el resultado de la apertura de la base de datos en la variable db. Esto es bastante usado más abajo:</span>\n  db <span class=\"token operator\">=</span> DBOpenRequest<span class=\"token punctuation\">.</span>result<span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// ejecutar la función displayData() para popular la lista de tareas con los datos \"to-do\" que existen actualmente en la Base de Datos Indizada (IDB):</span>\n  <span class=\"token function\">displayData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// abrir una transacción lectura/escritura, lista para añadir los datos:</span>\n<span class=\"token keyword\">var</span> transaction <span class=\"token operator\">=</span> db<span class=\"token punctuation\">.</span><span class=\"token function\">transaction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"toDoList\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"readwrite\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// reportar cuando haya éxito al abrir la transacción</span>\ntransaction<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">oncomplete</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  note<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">+=</span> <span class=\"token string\">'&lt;li&gt;Transacción completa: modificación a la base de datos finalizada.&lt;/li&gt;'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\ntransaction<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onerror</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  note<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">+=</span> <span class=\"token string\">'&lt;li&gt;Transacción no abierta debido a un error. No se permite duplicar ítems.&lt;/li&gt;'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// después deberías continuar y hacerle algo a esta base de datos a través del almacén de objetos:</span>\n<span class=\"token keyword\">var</span> objectStore <span class=\"token operator\">=</span> transaction<span class=\"token punctuation\">.</span><span class=\"token function\">objectStore</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"toDoList\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// etc.</span></code></pre></div>"}},{"type":"prose","value":{"id":"parámetros","title":"Parámetros","isH3":false,"content":"<dl>\n <dt id=\"storenames\">storeNames</dt>\n <dd>Son los nombres de los almacenes de objetos e índices que están en el ámbito de la nueva transacción, declarados como un arreglo de cadenas de texto. Especifíca solamente aquellos a los que necesitas acceso.<br>\n Si necesitas acceder a un solo almacén, puedes especificar su nombre como una cadena. Por tanto las siguientes líneas son equivalentes:</dd>\n <dd>\n <pre class=\"notranslate\"><code class=\"brush:js;\">var transaction = db.transaction(['my-store-name']);\nvar transaction = db.transaction('my-store-name');</code></pre>\n </dd>\n <dd>Si necesitas acceder a todos los almacenes de objetos en la base de datos, puedes usar la propiedad <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBDatabase/objectStoreNames\"><code>IDBDatabase.objectStoreNames</code> <small>(en-US)</small></a>:\n <pre class=\"notranslate\"><code class=\"brush:js;\">var transaction = db.transaction(db.objectStoreNames);</code></pre>\n </dd>\n <dd>Pasar un arreglo vació como parámetro  arrojará una excepción.</dd>\n <dt id=\"mode\">mode</dt>\n <dd><em>Opcional</em>. Los tipos de acceso que pueden desempeñarse en la transacción. Las transacciones son abiertas en uno de tres modos: <code>readonly <em>[sólo lectura], </em>readwrite <em>[lectura/escritura],</em></code> y <code>readwriteflush <em>[descarga de lectura/escritura]</em></code> (no-estándar, sólo para Firefox). El modo <code>versionchange <em>[cambio de versión] </em></code>no puede ser especificado aquí. Si no provees un parámetro, el modo predeterminado será <code>readonly <em>[sólo lectura]</em></code>. Para evitar ralentizar las cosas, no abras una transacción <code>readwrite <em>[lectura/escritura]</em></code> a menos que realmente necesites escribir en la base de datos.</dd>\n <dd>Si necesitas abrir un almacén de objetos en modo <code>readwrite</code> para cambiar los datos, usa lo siguiente:\n <div class=\"code-example\"><pre class=\"brush:js; notranslate\"><code><span class=\"token keyword\">var</span> transaction <span class=\"token operator\">=</span> db<span class=\"token punctuation\">.</span><span class=\"token function\">transaction</span><span class=\"token punctuation\">(</span><span class=\"token string\">'my-store-name'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"readwrite\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n\n <p>Desde Firefox 40, las transacciones de IndexedDB tienen garantías de durabilidad relajadas para aumentar el rendimiento (ver <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=1112702\" class=\"external\" rel=\" noopener\">error&nbsp;1112702</a>), lo cual es el mismo comportamiento de otros navegadores que soportan IndexedDB. Es decir, anteriormente en una transacción <code>readwrite</code> el evento <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBTransaction/complete_event\"><code>IDBTransaction.oncomplete</code> <small>(en-US)</small></a> era invocado sólo cuando se garantizaba que todos los datos habían sido vaciados al disco duro. En Firefox 40+ el evento <code>complete</code> es accionado después de indicársele al Sistema Operativo que escriba los datos al disco pero esta confirmación podría suceder poco antes de que los datos hayan sido verdaderamente escritos en él. Si bien dicho evento puede entonces ser entregado un poco antes de tiempo, de cualquier modo, existe una pequeña probabilidad de que la entera transacción se pierda si el SO se bloquea o si ha ocurrido una pérdida de energía antes de que los datos efectivamente se descarguen al disco duro. Como esas catastróficas circunstancias son más bien raras, la mayoría de los consumidores no deberían preocuparse demasiado.</p>\n\n <div class=\"note notecard\" id=\"sect3\">\n <p><strong>Nota</strong>: En Firefox, si deseas asegurar la durabilidad por alguna razón (por ejemplo, que estés almacenando datos críticos que no puedan ser recalculados después) puedes forzar una transacción a descargar al disco antes de invocar el evento <code>complete</code> creando una transacción que use un modo experimental <code>readwriteflush</code>  (no-estándar) (ver <a href=\"/es/docs/Web/API/IDBDatabase/transaction\" aria-current=\"page\"><code>IDBDatabase.transaction</code></a>). Esto actualmente es experimental, y puede usarse únicamente si la configuración <code>dom.indexedDB.experimental</code> es igual a <code>true</code> en <code>about:config</code>.</p>\n </div>\n </dd>\n</dl>"}},{"type":"prose","value":{"id":"especificación","title":"<span style=\"font-size: 2.14285714285714rem;\">Especificación</span>","isH3":false,"content":"<table class=\"standard-table\">\n <tbody>\n  <tr>\n   <th scope=\"col\">Especificación</th>\n   <th scope=\"col\">Estado</th>\n   <th scope=\"col\">Comentario</th>\n  </tr>\n  <tr>\n   <td><a href=\"https://www.w3.org/TR/IndexedDB/#widl-IDBDatabase-transaction-IDBTransaction-DOMString-sequence-DOMString--storeNames-IDBTransactionMode-mode\" hreflang=\"en\" lang=\"en\" class=\"external\" rel=\" noopener\">Indexed Database API 2.0<br><small lang=\"es\">La definición de 'transaction()' en esta especificación.</small></a></td>\n   <td><span class=\"spec-rec\">Recommendation</span></td>\n   <td> </td>\n  </tr>\n </tbody>\n</table>","titleAsText":"Especificación"}},{"type":"browser_compatibility","value":{"title":"Compatibilidad con Navegadores","id":"browser_compatibility","isH3":false,"query":"api.IDBDatabase.transaction","dataURL":"/es/docs/Web/API/IDBDatabase/transaction/bcd.json"}},{"type":"prose","value":{"id":"ver_también","title":"Ver también","isH3":false,"content":"<ul>\n <li><a href=\"/en-US/docs/Web/API/IndexedDB_API/Using_IndexedDB\">Usando IndexedDB</a></li>\n <li>Iniciando transacciones: <a href=\"/es/docs/Web/API/IDBDatabase\"><code>IDBDatabase</code></a></li>\n <li>Usando transacciones: <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBTransaction\"><code>IDBTransaction</code> <small>(en-US)</small></a></li>\n <li>Configurar un rango de llaves: <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBKeyRange\"><code>IDBKeyRange</code> <small>(en-US)</small></a></li>\n <li>Recuperando y haciendo cambios a tus datos: <a href=\"/es/docs/Web/API/IDBObjectStore\"><code>IDBObjectStore</code></a></li>\n <li>Usando cursores: <a href=\"/es/docs/Web/API/IDBCursor\"><code>IDBCursor</code></a></li>\n <li>Ejemplo de referencia: <a class=\"external\" href=\"https://github.com/mdn/to-do-notifications/tree/gh-pages\" rel=\" noopener\">To-do Notifications</a> (<a class=\"external\" href=\"https://mdn.github.io/to-do-notifications/\" rel=\" noopener\">ver ejemplo en vivo</a>).</li>\n</ul>"}}],"toc":[{"text":"Sintáxis","id":"sintáxis"},{"text":"Ejemplo","id":"ejemplo"},{"text":"Parámetros","id":"parámetros"},{"text":"<span style=\"font-size: 2.14285714285714rem;\">Especificación</span>","id":"especificación"},{"text":"Compatibilidad con Navegadores","id":"browser_compatibility"},{"text":"Ver también","id":"ver_también"}],"summary":"El método transaction() [transacción] de la interfaz IDBDatabase retorna inmediatamente un objeto de transacción (IDBTransaction (en-US)) que contiene el método IDBTransaction.objectStore (en-US), el cual puedes usar para acceder a tu almacén de objetos.","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"IDBDatabase.transaction()","locale":"en-US","native":"English (US)"},{"title":"IDBDatabase.transaction()","locale":"fr","native":"Français"}],"source":{"folder":"es/web/api/idbdatabase/transaction","github_url":"https://github.com/mdn/translated-content/blob/main/files/es/web/api/idbdatabase/transaction/index.html","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.html"},"parents":[{"uri":"/es/docs/Web","title":"Tecnología para desarrolladores web"},{"uri":"/es/docs/Web/API","title":"Referencia de la API Web"},{"uri":"/es/docs/Web/API/IDBDatabase","title":"IDBDatabase"},{"uri":"/es/docs/Web/API/IDBDatabase/transaction","title":"IDBDatabase.transaction()"}],"pageTitle":"IDBDatabase.transaction() - Referencia de la API Web | MDN","noIndexing":false}}