{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"Eventos online y offline","mdn_url":"/es/docs/orphaned/Web/API/NavigatorOnLine/Online_and_offline_events","locale":"es","native":"Español","sidebarHTML":"","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p><a href=\"/es/Firefox_3_para_desarrolladores\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">Firefox 3</a> implementa <a href=\"https://www.whatwg.org/specs/web-apps/current-work/#offline\" class=\"external\" rel=\" noopener\">eventos Online/Offline</a> de la <a href=\"https://www.whatwg.org/specs/web-apps/current-work/\" class=\"external\" rel=\" noopener\">especificacióbn WHATWG Web Applications 1.0</a>.</p>"}},{"type":"prose","value":{"id":"descripción","title":"Descripción","isH3":true,"content":"<p>Para poder construir una aplicación web offline-funcional, necesitas conocer cuándo está tu aplicación realmente offline. Además, también necesitas conocer cuándo vuelve la aplicación al estado 'online' nuevamente. A efectos prácticos, los requisitos son los siguientes:</p>\n<ol>\n  <li>Necesitas conocer cuándo el usuario vuelve a estar online, para que puedas re-sincronizar con el servidor.</li>\n  <li>Necesitas conocer cuándo el usuario está offline, para así estar seguro de poner en cola las peticiones al servidor para más tarde.</li>\n</ol>\n<p>Es este proceso el que los eventos online/offline ayudan a trivializar.</p>\n<p>Tu aplicación web quizás necesite establecer que ciertos documentos se mantengan en la caché de recursos offline. Para hacerlo, incluye elementos <code>LINK</code> en tu sección <code>HEAD</code> de la siguiente manera:</p>\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code>&lt;link rel=\"offline-resource\" href=\"mi_recurso&gt;\n</code></pre></div>\n<p>Cuando Firefox 3 o superiores procesan el HTML, esto causará que el recurso referenciado se mantenga en caché para su uso offline en un recurso especial de la caché.</p>"}},{"type":"prose","value":{"id":"api","title":"API","isH3":true,"content":"<h4 id=\"navigator.online\"><code>navigator.onLine</code></h4>\n<p><a href=\"/es/docs/DOM/window.navigator.onLine\"><code>navigator.onLine</code></a> es una propiedad que mantiene un valor <code>true</code>/<code>false</code> (<code>true</code> para online, <code>false</code> para offline). Esta propiedad se actualiza siempre que el usuario cambia hacia \"Modo sin conexión\" seleccionando el menú correspondiente (Archivo -&gt; Trabajar sin conexión en Firefox).</p>\n<p>Además, esta propiedad se debería actualizar siempre que el navegador no sea capaz de conectarse a la red. De acuerdo con la especificación:</p>\n<blockquote>\n  <p>El atributo <code>navigator.onLine</code> debe devolver false si el agente de usuario no contactará con la red cuando el usuario siga los enlaces o cuando un script solicite una página remota (o sepa que intentarlo fallaría)...</p>\n</blockquote>\n<p>Firefox 2 actualiza esta propiedad cuando cambia desde/hacia el modo offline del navegador, y cuando pierde/recupera la conectividad de la red en Windows y Linux.</p>\n<p>Esta propiedad existía en versiones más antiguas de Firefox e Internet Explorer (la especificación surgió a partir estas implementaciones previas), así que puedes comenzar a usarla inmediatamente. La detección automática del estado de la red se implementó en Firefox 2.</p>\n<h4 id=\"eventos_online_y_offline\">eventos \"<code>online</code>\" y \"<code>offline</code>\"</h4>\n<p><a href=\"/es/Firefox_3_para_desarrolladores\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">Firefox 3</a> introduce dos nuevos eventos: \"<code>online</code>\" y \"<code>offline</code>\". Estos dos eventos son iniciados en el <code>&lt;body&gt;</code> de cada página cuando el usuario cambia de modo online a offline. Además, los eventos emergen desde <code>document.body</code> a <code>document</code>, terminando en <code>window</code>. Ambos eventos son no-cancelables (no se puede evitar que el usuario pase a modo online u offline).</p>\n<p>Puedes registrar <em>listeners</em> para estos eventos de varias maneras habituales:</p>\n<ul>\n  <li>Usando <a href=\"/es/docs/DOM/element.addEventListener\"><code>addEventListener</code></a> en <code>window</code>, <code>document</code> o <code>document.body</code></li>\n  <li>estableciendo las propiedades <code>.ononline</code> u <code>.onoffline</code> en <code>document</code> o <code>document.body</code> para que apunten a un objeto JavaScript <code>Function</code> (<strong>Nota:</strong> usar <code>window.ononline</code> o <code>window.onoffline</code> no funcionará por razones de compatibilidad).</li>\n  <li>especificando los atributos <code>ononline=\"...\"</code> u <code>onoffline=\"...\"</code> en la etiqueta <code>&lt;body&gt;</code> en el código HTML.</li>\n</ul>"}},{"type":"prose","value":{"id":"ejemplo","title":"Ejemplo:","isH3":true,"content":"<p>Hay una <a href=\"https://bugzilla.mozilla.org/attachment.cgi?id=220609\" class=\"external\" rel=\" noopener\">prueba sencilla</a> que puedes ejecutar para verificar que los eventos están funcionando.</p>\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">doctype</span> <span class=\"token name\">html</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token script\"><span class=\"token language-javascript\">\n    <span class=\"token keyword\">function</span> <span class=\"token function\">updateOnlineStatus</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">msg</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">var</span> status <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"status\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">var</span> condition <span class=\"token operator\">=</span> navigator<span class=\"token punctuation\">.</span>onLine <span class=\"token operator\">?</span> <span class=\"token string\">\"ONLINE\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"OFFLINE\"</span><span class=\"token punctuation\">;</span>\n      status<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"class\"</span><span class=\"token punctuation\">,</span> condition<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">var</span> state <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"state\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      state<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> condition<span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">var</span> log <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"log\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      log<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">createTextNode</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Event: \"</span> <span class=\"token operator\">+</span> msg <span class=\"token operator\">+</span> <span class=\"token string\">\"; status=\"</span> <span class=\"token operator\">+</span> condition <span class=\"token operator\">+</span> <span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">loaded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">updateOnlineStatus</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"load\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"offline\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">updateOnlineStatus</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"offline\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"online\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">updateOnlineStatus</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"online\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  </span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token style\"><span class=\"token language-css\">...</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span> <span class=\"token special-attr\"><span class=\"token attr-name\">onload</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value javascript language-javascript\"><span class=\"token function\">loaded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>status<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>state<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>log<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"referencias","title":"Referencias","isH3":true,"content":"<ul>\n  <li><a href=\"https://www.whatwg.org/specs/web-apps/current-work/#offline\" class=\"external\" rel=\" noopener\">Sección 'Eventos Online/Offline ' de la especificación WHATWG Web Applications 1.0</a></li>\n  <li><a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=336359\" class=\"external\" rel=\" noopener\">El bug que documenta la implementación de los eventos online/offline en Firefox</a> y un enlace <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=336682\" class=\"external\" rel=\" noopener\">con una modificación posterior</a></li>\n  <li><a href=\"https://bugzilla.mozilla.org/attachment.cgi?id=220609\" class=\"external\" rel=\" noopener\">Un ejemplo sencillo</a></li>\n  <li><a href=\"http://ejohn.org/blog/offline-events/\" class=\"external\" rel=\" noopener\">Una explicación de los eventos Online/Offline</a></li>\n</ul>"}}],"toc":[],"summary":"Firefox 3 implementa eventos Online/Offline de la especificacióbn WHATWG Web Applications 1.0.","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Eventos on-line e off-line","locale":"pt-BR","native":"Português (do Brasil)"}],"source":{"folder":"es/orphaned/web/api/navigatoronline/online_and_offline_events","github_url":"https://github.com/mdn/translated-content/blob/main/files/es/orphaned/web/api/navigatoronline/online_and_offline_events/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/es/docs/orphaned/Web/API/NavigatorOnLine","title":"NavigatorOnLine"},{"uri":"/es/docs/orphaned/Web/API/NavigatorOnLine/Online_and_offline_events","title":"Eventos online y offline"}],"pageTitle":"Eventos online y offline | MDN","noIndexing":true}}