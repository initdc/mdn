<!DOCTYPE html><html lang="en-US" prefix="og: https://ogp.me/ns#"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="/favicon-48x48.97046865.png"><link rel="apple-touch-icon" href="/apple-touch-icon.0ea0fa02.png"><meta name="theme-color" content="#ffffff"><link rel="manifest" href="/manifest.56b1cedc.json"><link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="MDN Web Docs"><script>Array.prototype.flat&&Array.prototype.includes||document.write('<script src="https://polyfill.io/v3/polyfill.min.js?features=Array.prototype.flat%2Ces6"><\/script>')</script><title>Кодеки, используемые WebRTC - Web media technologies | MDN</title><link rel="preload" as="font" type="font/woff2" crossorigin="" href="/static/media/ZillaSlab-Bold.subset.0beac26b.woff2"><link rel="alternate" title="Кодеки, используемые WebRTC" href="https://developer.mozilla.org/ru/docs/Web/Media/Formats/WebRTC_codecs" hreflang="ru"><link rel="alternate" title="Codecs used by WebRTC" href="https://developer.mozilla.org/en-US/docs/Web/Media/Formats/WebRTC_codecs" hreflang="en"><meta name="description" content="WebRTC."><meta property="og:url" content="https://developer.mozilla.org/ru/docs/Web/Media/Formats/WebRTC_codecs"><meta property="og:title" content="Кодеки, используемые WebRTC - Web media technologies | MDN"><meta property="og:description" content="WebRTC."><meta property="og:locale" content="ru"><meta property="og:image" content="https://developer.mozilla.org/mdn-social-share.0ca9dbda.png"><meta property="twitter:card" content="summary_large_image"><meta name="robots" content="index, follow"><link rel="canonical" href="https://developer.mozilla.org/ru/docs/Web/Media/Formats/WebRTC_codecs"><style media="print">.breadcrumbs-container,.document-toc-container,.language-menu,.language-toggle,.on-github,.page-footer,.page-header-main,nav.sidebar,ul.prev-next{display:none!important}.main-page-content,.main-page-content pre{padding:2px}.main-page-content pre{border-left-width:2px}</style><link href="/static/css/main.55b68e13.chunk.css" rel="stylesheet"><script src="/static/js/runtime-main.4bb4c356.js" defer=""></script><script src="/static/js/4.a756dea3.chunk.js" defer=""></script><script src="/static/js/main.d4d565e0.chunk.js" defer=""></script></head><body><div id="root"><ul id="nav-access" class="a11y-nav"><li><a id="skip-main" href="#content">Skip to main content</a></li><li><a id="skip-search" href="#main-q">Skip to search</a></li><li><a id="skip-select-language" href="#select-language">Skip to select language</a></li></ul><div class="page-wrapper document-page"><header class="page-header"><a href="/ru/" class="logo" aria-label="MDN Web Docs"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 451.74 135"><path d="M7.14 8.35v111.06h111.05V8.35zm103.71 56c-.48.92-1 1.79-1.46 2.71a3.44 3.44 0 01-3.54 2 2.4 2.4 0 00-1.55.5c-1.37.9-2.76 1.79-4.18 2.63a7.33 7.33 0 01-6.35.34 29.71 29.71 0 00-10.63-2 11.7 11.7 0 00-9.46 4.31 14.84 14.84 0 00-2.13 4.29c-1.24 3.07-2.3 21.38-2.3 26.05 0 0-17.62-3.42-34.15-20.34l4.31-11.32h-13.5l9.76-10.35h-16.8l9.77-10.34H12.69L30.45 34a40.9 40.9 0 0119.77-10.83c7.1-1.22 8.93-.53 13.31.77l2.43.73.85.25 3.1.95a12.56 12.56 0 006.21.09 11.37 11.37 0 018.25 1 8.24 8.24 0 014.1 6.22 7.29 7.29 0 003.61 5.49 59.45 59.45 0 009.32 4.11c2.27.86 4.54 1.84 6.79 2.72a6.81 6.81 0 012.86 2.06 4.81 4.81 0 011.1 2.73c.14 2 .37 4 .47 6a15.24 15.24 0 01-1.77 8.03zM320.12 39.62a5.42 5.42 0 00-4.53 2.13 7.36 7.36 0 00-1.7 4.43v2.36a6.28 6.28 0 001.7 4.46 5.63 5.63 0 004.3 1.82 5.12 5.12 0 004.57-2.27A9.7 9.7 0 00326 47a8.11 8.11 0 00-1.67-5.52 5.36 5.36 0 00-4.21-1.86zM387.38 39.53a5.52 5.52 0 00-4.7 2.15 8.8 8.8 0 00-1.63 5.49 9.23 9.23 0 001.58 5.45 5.38 5.38 0 004.7 2.25 5.61 5.61 0 004.74-2.2 8.91 8.91 0 001.68-5.59 8.24 8.24 0 00-1.75-5.52 5.76 5.76 0 00-4.62-2.03zM299.47 41.35a4.34 4.34 0 00-4-1.92 4.55 4.55 0 00-3.89 1.73 8.37 8.37 0 00-1.58 4.17h10.48a6.3 6.3 0 00-1.01-3.98zM357.74 30.75H352v23.31h5.72q5.47 0 8.35-3t2.93-8.65q0-5.43-2.88-8.55t-8.38-3.11z"></path><path d="M121.55 8.35v70.8h323V8.35zm42.21 22.45h-4V54h3.68v3.73h-11.25V54h3.31V36.79h-.19l-9.63 19.12h-2.12l-10-19.4h-.19V54h3.45v3.73h-11.15V54h3.68V30.8h-4v-3.73H133l11.66 22.56h.19l11.18-22.56h7.7zm29.12 22.67q-4.11 4.28-11.38 4.28h-14.06v-3.69h3.73V30.75h-3.73v-3.68h13.83q7.59 0 11.66 4.29a15.4 15.4 0 014 11 15.33 15.33 0 01-4.05 11.11zm38.89-22.67h-3.68v27h-2.6L208.08 35h-.19v19h4.67v3.73h-12.22V54h3.49V30.8h-4v-3.73h7.08l16.9 22.09h.19V30.8h-4.58v-3.73h12.32zm43.8 27h-3.31l-7.83-23.18h-.19l-7.55 23.18h-3.35l-8.78-27h-2.65v-3.73H253v3.73h-3.87L255 50.71h.23l6.61-19.91H259v-3.73h11v3.73h-2.78l6.61 20.1h.23l5.43-20.1h-4.15v-3.73h11v3.73h-2.54zm26.71-1.51a9.66 9.66 0 01-6.42 2 10.2 10.2 0 01-7.41-2.74c-1.89-1.82-2.83-4.47-2.83-7.93a12.37 12.37 0 012.64-8.12 9 9 0 017.32-3.21 8.62 8.62 0 016.75 2.69 9.65 9.65 0 012.45 6.52 13.67 13.67 0 01-.28 2.69H290q.29 6.71 6.18 6.7a5.2 5.2 0 003.71-1.18 5.82 5.82 0 001.67-2.83l3.45.71a7.21 7.21 0 01-2.73 4.65zm25.77-1.63c-1.51 2.4-3.92 3.61-7.22 3.61s-5.84-1.29-7.22-3.87c0 .25-.1.82-.21 1.7s-.19 1.44-.22 1.7H309c.16-1 .31-2 .47-3.07a21.42 21.42 0 00.24-3.16v-23h-3.4v-3.3h7.55V40.9a9.76 9.76 0 012.67-3.28 7.33 7.33 0 014.74-1.4 8.48 8.48 0 016.5 2.78q2.55 2.74 2.55 7.74a14.6 14.6 0 01-2.27 7.87zm41.39-1.14q-4.11 4.28-11.37 4.28H344v-3.74h3.73V30.75H344v-3.68h13.83q7.59 0 11.66 4.29a15.41 15.41 0 014.06 11 15.34 15.34 0 01-4.11 11.11zm25.65 1.68a10.53 10.53 0 01-7.9 3.07 10 10 0 01-7.63-3 10.93 10.93 0 01-2.8-7.83 12.13 12.13 0 012.69-7.93q2.69-3.3 8-3.3t8 3.28a12 12 0 012.64 7.76 10.86 10.86 0 01-3 7.9zm22.61.57c-1.4 1.66-3.63 2.5-6.68 2.5a9.58 9.58 0 01-7.15-2.76q-2.72-2.76-2.71-7.91a12.25 12.25 0 012.69-8 9.17 9.17 0 017.5-3.28 15 15 0 013.82.48 10.37 10.37 0 013.5 1.65l.85 5.47-3.35.38-.76-3.54a8.07 8.07 0 00-4.11-1 4.9 4.9 0 00-4.39 2.15 9.93 9.93 0 00-1.41 5.55 8.9 8.9 0 001.5 5.38 5.23 5.23 0 004.44 2c2.92 0 4.67-1.7 5.23-5.1l3.5.71a10.34 10.34 0 01-2.47 5.27zm20.48.75a11.68 11.68 0 01-6.63 1.75 15.52 15.52 0 01-8.26-2.08L424 51l3.26.33-.1 2.74a7 7 0 002.06.66 12.63 12.63 0 002.19.19 8.68 8.68 0 003.66-.75 2.5 2.5 0 001.63-2.36 2.25 2.25 0 00-1.32-2.2 12.65 12.65 0 00-3.28-1 47.39 47.39 0 01-3.9-.82 7.5 7.5 0 01-3.25-1.7 4.67 4.67 0 01-1.33-3.66c0-2.36.88-4 2.62-4.91a12 12 0 015.6-1.37 15 15 0 014.08.55 16.65 16.65 0 013.47 1.39l.47 5.1-3.3.37-.48-3.3a9.5 9.5 0 00-4.06-.9 5.62 5.62 0 00-2.87.66 2.33 2.33 0 00-1.15 2.25 2.13 2.13 0 001.3 2.07 11.91 11.91 0 003.21.92 36.69 36.69 0 013.82.83 7.46 7.46 0 013.21 1.74 4.9 4.9 0 011.3 3.73 5.56 5.56 0 01-2.66 4.91z"></path><path d="M181.17 30.75h-5.71v23.31h5.71q5.47 0 8.36-3t2.88-8.61q0-5.43-2.88-8.55t-8.36-3.15zM121.63 119.32V81.74h114.91v37.58zM153.22 109h-2v-6.85a4.8 4.8 0 00-1.58-4 5.57 5.57 0 00-3.55-1.26 5 5 0 00-4.92 3.26 4.19 4.19 0 00-1.88-2.46 5.82 5.82 0 00-3-.8 4.89 4.89 0 00-4.56 2.56v-2.21h-6.28v3.26h2v8.5h-2v3.23h9.11V109h-2.86v-5.25a4.4 4.4 0 01.69-2.56 2.47 2.47 0 012.21-1q2.57 0 2.56 3.63v8.41h6.29V109h-2v-5.25a4.47 4.47 0 01.67-2.56 2.42 2.42 0 012.19-1q2.63 0 2.63 3.63v8.41h6.28zm9.88-12.07q-4 0-6 2.36a8.41 8.41 0 00-2 5.66 7.25 7.25 0 002.17 5.62 8 8 0 005.65 2 8.54 8.54 0 005.94-2.11 7.27 7.27 0 002.34-5.67 8.21 8.21 0 00-2-5.51q-2.07-2.34-6.1-2.34zm-.1 12.35a3 3 0 01-2.63-1.33 5.68 5.68 0 01-.9-3.26 5 5 0 011-3.28 3.23 3.23 0 012.61-1.18 3.5 3.5 0 012.59 1.08 4.56 4.56 0 011.07 3.31 5.21 5.21 0 01-1 3.41 3.33 3.33 0 01-2.74 1.25zm25-2.3l-3.39-.29-.7 2.32H179l8.32-9.54-.32-2.23h-13.19l-.53 5.25 3.16.34.67-2.36h4.65l-8.25 9.53.44 2.26h13.13zm7.62-9.74h-4.46v5.39h4.46zm0 9.61h-4.46v5.39h4.46zm13.54-17.49h-4.23l-6.48 22.88h4.22zm8.68 0h-4.23l-6.45 22.88h4.19zm15 22.51l-.07-2.26a1.22 1.22 0 01-.56.1c-.69 0-1-.39-1-1.16v-6.49a4.39 4.39 0 00-1.8-3.84 7 7 0 00-4.16-1.28 14.55 14.55 0 00-3.16.3 24.14 24.14 0 00-3.29 1.06l-.56 3.46 3.39.4.5-1.69a2.78 2.78 0 011.08-.37 11.3 11.3 0 011.25-.07c1.19 0 1.89.37 2.09 1.1a8.55 8.55 0 01.3 2.26v.5a8.91 8.91 0 00-1.18-.11h-1.21a12.64 12.64 0 00-4.81.88 3.53 3.53 0 00-2.18 3.64 3.66 3.66 0 001.48 3.33 5.63 5.63 0 003.11 1 4.67 4.67 0 003-.91 6.78 6.78 0 001.8-2 3 3 0 003.33 3 5.54 5.54 0 002.66-.85zm-9.25-2.32a1.69 1.69 0 01-1.36-.52 1.81 1.81 0 01-.43-1.21 1.67 1.67 0 01.86-1.68 4.63 4.63 0 012-.42 7.69 7.69 0 011.07.07l1.06.13a3.58 3.58 0 01-1.08 2.74 3.24 3.24 0 01-2.11.89z"></path></svg></a><button type="button" class="ghost main-menu-toggle" aria-haspopup="true" aria-label="Show Menu"></button><div class="page-header-main "><nav class="main-nav" aria-label="Main menu"><ul class="main-menu nojs"><li class="top-level-entry-container"><button id="technologies-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">Technologies</button><ul class="technologies " role="menu" aria-labelledby="technologies-button"><li role="none"><a tabindex="-1" href="/ru/docs/Web" role="menuitem">Technologies Overview</a></li><li role="none"><a tabindex="-1" href="/ru/docs/Web/HTML" role="menuitem">HTML</a></li><li role="none"><a tabindex="-1" href="/ru/docs/Web/CSS" role="menuitem">CSS</a></li><li role="none"><a tabindex="-1" href="/ru/docs/Web/JavaScript" role="menuitem">JavaScript</a></li><li role="none"><a tabindex="-1" href="/ru/docs/Web/Guide/Graphics" role="menuitem">Graphics</a></li><li role="none"><a tabindex="-1" href="/ru/docs/Web/HTTP" role="menuitem">HTTP</a></li><li role="none"><a tabindex="-1" href="/ru/docs/Web/API" role="menuitem">APIs</a></li><li role="none"><a tabindex="-1" href="/ru/docs/Mozilla/Add-ons/WebExtensions" role="menuitem">Browser Extensions</a></li><li role="none"><a tabindex="-1" href="/ru/docs/Web/MathML" role="menuitem">MathML</a></li></ul></li><li class="top-level-entry-container"><button id="references-guides-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">References &amp; Guides</button><ul class="references-guides " role="menu" aria-labelledby="references-guides-button"><li role="none"><a tabindex="-1" href="/ru/docs/Learn" role="menuitem">Learn web development</a></li><li role="none"><a tabindex="-1" href="/ru/docs/Web/Tutorials" role="menuitem">Tutorials</a></li><li role="none"><a tabindex="-1" href="/ru/docs/Web/Reference" role="menuitem">References</a></li><li role="none"><a tabindex="-1" href="/ru/docs/Web/Guide" role="menuitem">Developer Guides</a></li><li role="none"><a tabindex="-1" href="/ru/docs/Web/Accessibility" role="menuitem">Accessibility</a></li><li role="none"><a tabindex="-1" href="/ru/docs/Games" role="menuitem">Game development</a></li><li role="none"><a tabindex="-1" href="/ru/docs/Web" role="menuitem">...more docs</a></li></ul></li><li class="top-level-entry-container"><button id="feedback-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">Feedback</button><ul class="feedback " role="menu" aria-labelledby="feedback-button"><li role="none"><a tabindex="-1" href="/ru/docs/MDN/Contribute/Feedback" role="menuitem">Send Feedback</a></li><li role="none"><a tabindex="-1" href="/ru/docs/MDN/Contribute" role="menuitem">Contribute to MDN</a></li><li role="none"><a tabindex="-1" target="_blank" rel="noopener noreferrer" href="https://github.com/mdn/content/issues/new" role="menuitem">Report a content issue<!-- --> 🌐</a></li><li role="none"><a tabindex="-1" target="_blank" rel="noopener noreferrer" href="https://github.com/mdn/yari/issues/new" role="menuitem">Report a platform issue<!-- --> 🌐</a></li></ul></li></ul></nav><div class="header-search"><form action="/ru/search" class="search-form search-widget" role="search"><label for="main-q" class="visually-hidden">Search MDN</label><input type="search" name="q" id="main-q" class="search-input-field" placeholder="Site search... (Press &quot;/&quot; to focus)" pattern="(.|\s)*\S(.|\s)*" required="" value=""><input type="submit" class="ghost search-button" value="" aria-label="Search"></form></div><div class="auth-container"></div></div></header><div class="breadcrumb-locale-container"><nav class="breadcrumbs-container" aria-label="Breadcrumb navigation"><ol typeof="BreadcrumbList" vocab="https://schema.org/" aria-label="breadcrumbs"><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="/ru/docs/Web"><span property="name">Веб-технологии для разработчиков</span></a><meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="/ru/docs/Web/Media"><span property="name">Web media technologies</span></a><meta property="position" content="2"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb-penultimate" property="item" typeof="WebPage" href="/ru/docs/Web/Media/Formats"><span property="name">Media type and format guide: image, audio, and video content</span></a><meta property="position" content="3"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb-current-page" property="item" typeof="WebPage" href="/ru/docs/Web/Media/Formats/WebRTC_codecs"><span property="name">Кодеки, используемые WebRTC</span></a><meta property="position" content="4"></li></ol></nav><ul class="language-toggle"><li><a href="#select-language" class="language-icon"><span class="show-desktop">Change language</span></a></li><li><a class="view-in-english" href="/en-US/docs/Web/Media/Formats/WebRTC_codecs"><span class="show-desktop">View in</span> English</a></li></ul></div><div class="localized-content-note notecard inline neutral"><a href="/en-US/docs/MDN/Contribute/Localize#active_locales">Эта страница была переведена с английского языка силами сообщества. Вы тоже можете внести свой вклад, присоединившись к русскоязычному сообществу MDN Web Docs.</a></div><aside class="document-toc-container"><section class="document-toc"><header><h2>Table of contents</h2><button type="button" class="ghost toc-trigger-mobile" aria-controls="toc-entries" aria-expanded="false">Table of contents</button></header><ul id="toc-entries"><li><a href="#безконтейнерные_медиаданные">Безконтейнерные медиаданные</a></li><li><a href="#общие_требования_к_кодекам">Общие требования к кодекам</a></li><li><a href="#поддерживаемые_видео_кодеки">Поддерживаемые видео кодеки</a></li><li><a href="#поддерживаемые_аудио_кодеки">Поддерживаемые аудио кодеки</a></li><li><a href="#определение_и_конфигурирование_кодеков">Определение и конфигурирование кодеков</a></li><li><a href="#кодеки_по_умолчанию">Кодеки по умолчанию</a></li><li><a href="#правильный_выбор_кодеков">Правильный выбор кодеков</a></li><li><a href="#последствия_для_безопасности">Последствия для безопасности</a></li><li><a href="#смотрите_также">Смотрите также :</a></li></ul></section></aside><main id="content" class="main-content" role="main"><article class="main-page-content" lang="ru"><h1>Кодеки, используемые WebRTC</h1><div><div id="sect1"></div>

<p>С <a href="/en-US/docs/Web/API/WebRTC_API">WebRTC API</a> возможно создание сайтов и приложений, позволяющих пользователям общаться в реальном времени, используя аудио и/или видео, а также передавать данные или другую информацию. Для общения, двум устройствам необходима возможность согласования использования кодеков, для каждой дорожки в потоке данных, для успешного взаимодействия и обмена медиаданными. В этом руководстве рассматриваются кодеки, которые требуются браузерам для этого, а также другие кодеки, которые поддерживаются некоторыми или всеми браузерами, поддерживающими <span class="seoSummary">WebRTC.</span></p></div><h2 id="безконтейнерные_медиаданные"><a href="#безконтейнерные_медиаданные" title="Permalink to Безконтейнерные медиаданные">Безконтейнерные медиаданные</a></h2><div><p>WebRTC использует объект типа <a href="/ru/docs/Web/API/MediaStreamTrack"><code>MediaStreamTrack</code></a> для представления каждого трека, передающегося между узлами соединения без использования контейнера или объекта типа <a href="/ru/docs/Web/API/MediaStream"><code>MediaStream</code></a> , объединяющего треки. Какие кодеки могут быть в этих треках, спецификацией  WebRTC не определяется. Однако, <a href="https://datatracker.ietf.org/doc/html/rfc7742" class="external" rel=" noopener">RFC 7742</a> определяет, что все браузеры, поддерживающие WebRTC, должны поддерживать <a href="/en-US/docs/Web/Media/Formats/Video_codecs#vp8">VP8</a> и <a href="/en-US/docs/Web/Media/Formats/Video_codecs#avc_(h.264)">H.264</a> ограниченный базовый профиль для видео; и <a href="https://datatracker.ietf.org/doc/html/rfc7874" class="external" rel=" noopener">RFC 7874</a> , определяющая, что браузеры должны поддерживать, по меньшей мере, кодеки <a href="/en-US/docs/Web/Media/Formats/Audio_codecs#opus">Opus</a> и <a href="/en-US/docs/Web/Media/Formats/Audio_codecs#g.711">G.711</a>  форматов PCMA и PCMU.</p>

<p>Эти две спецификации определяют свойства, которые должны поддерживаться каждым кодеком, а так же определённые функции для удобства использования, к примеру, функция эхоподавления. В этом руководстве происходит обзор кодеков, поддержка которых обязательна браузерам для реализации WebRTC, а так же иные (не обязательные) кодеки, поддерживаемые отдельными или всеми браузерами,.</p>

<p>Хоть сжатие всегда и необходимо при работе со средствами массовой информации в Интернете, оно имеет дополнительное значение при проведении видеоконференций, чтобы участники могли общаться без задержек и перерывов. Второстепенное значение имеет необходимость синхронизации видео и звука, чтобы движения и любая вспомогательная информация (например, слайды или проекция) были представлены одновременно с соответствующим звуком</p></div><h2 id="общие_требования_к_кодекам"><a href="#общие_требования_к_кодекам" title="Permalink to Общие требования к кодекам">Общие требования к кодекам</a></h2><div><p>Прежде чем рассматривать возможности и требования, специфичные для кодеков, необходимо выполнить несколько общих требований, которые должны быть выполнены при любой конфигурации кодеков, используемой с WebRTC</p>

<p>Если <a href="/ru/docs/Glossary/SDP">SDP</a> специально не указывает иное, веб-браузер, принимающий видеопоток WebRTC, должен иметь возможность обрабатывать видео со скоростью не менее 20 кадров в секунду при минимальном разрешении 320 пикселей в ширину и 240 пикселей в высоту. Рекомендуется, чтобы видео кодировалось с частотой кадров и размером не ниже этого, поскольку это, по сути, нижняя граница того, что WebRTC обычно должен обрабатывать.</p>

<p>SDP поддерживает независимый от кодеков способ указания предпочтительных разрешений видео (<a href="https://datatracker.ietf.org/doc/html/rfc6236" class="external" rel=" noopener">RFC 6236</a>). Это делается путём отправки <code>a=imageattr</code> атрибута SDP для указания максимально допустимого разрешения. Однако отправителю не требуется поддерживать этот механизм, поэтому вы должны быть готовы получать носители с другим разрешением, чем вы запрашивали. Помимо этого простого запроса максимального разрешения, определённые кодеки могут предлагать дополнительные способы запроса конкретных конфигураций мультимедиа.</p></div><h2 id="поддерживаемые_видео_кодеки"><a href="#поддерживаемые_видео_кодеки" title="Permalink to Поддерживаемые видео кодеки">Поддерживаемые видео кодеки</a></h2><div><p>WebRTC устанавливает набор базовых кодеков, которые требуются браузерам для работы. Некоторые браузеры могут поддерживать дополнительный набор кодеков.</p>

<p>Ниже приведены видеокодеки, которые требуются в любом полностью совместимом с WebRTC браузере, а также требуемые профили и браузеры, которые фактически соответствуют требованиям</p>

<table class="standard-table">
 <caption>
 <p>Обязательные видеокодеки</p>
 </caption>
 <thead>
  <tr>
   <th scope="row">Наименование кодека</th>
   <th scope="col">Профиль</th>
   <th scope="col">Совместимость с браузерами</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <th scope="row"><a href="#vp8">VP8</a></th>
   <td>—</td>
   <td>Chrome, Edge, Firefox, Safari (12.1+)</td>
  </tr>
  <tr>
   <th scope="row"><a href="#avc">AVC / H.264</a></th>
   <td>Constrained Baseline (CB)</td>
   <td>Chrome (52+), Edge, Firefox<sup><a href="#supported-foot-1">[1]</a></sup>, Safari</td>
  </tr>
 </tbody>
</table>

<p><a name="supported-foot-1">[1]</a>  Firefox для Android 68 и более поздних версий больше не поддерживает AVC (H.264). Это связано с изменением требований магазина Google Play, которые не позволяют Firefox загружать и устанавливать кодек OpenH264, необходимый для обработки H.264 в соединениях WebRTC. Смотрим подробности в <a href="https://support.mozilla.org/en-US/kb/firefox-android-openh264" class="external" rel=" noopener"> статье о SUMO</a> .</p>

<p>Для получения дополнительной информации о соображениях, связанных с WebRTC для каждого кодека, см. Подразделы ниже, перейдя по ссылкам на название каждого кодека.</p>

<p>Полную информацию о том, какие видеокодеки и конфигурации требуется для поддержки WebRTC, можно найти в <a href="https://datatracker.ietf.org/doc/html/rfc7742" class="external" rel=" noopener">RFC 7742: Требования к обработке видео и кодекам WebRTC</a>. Стоит отметить, что RFC охватывает множество требований, связанных с видео, включая цветовые пространства (sRGB является предпочтительным, но не обязательным цветовым пространством по умолчанию), рекомендации по функциям обработки веб-камеры (автоматическая фокусировка, автоматический баланс белого, автоматический уровень освещения) и так далее.</p>

<div class="note notecard" id="sect2">
<p><strong> Предупреждение :</strong>  Эти требования относятся к веб-браузерам и другим продуктам, полностью совместимым с WebRTC. Продукты, не относящиеся к WebRTC, которые в некоторой степени могут взаимодействовать с WebRTC, могут поддерживать или не поддерживать эти кодеки, хотя это рекомендуется в технических документах</p>
</div>

<p>В дополнение к обязательным кодекам, некоторые браузеры также поддерживают дополнительные кодеки. Они перечислены в таблице ниже</p>

<table class="standard-table">
 <caption>
 <p>Другие видео кодеки</p>
 </caption>
 <thead>
  <tr>
   <th scope="row">Наименование кодека</th>
   <th scope="col">Профили</th>
   <th scope="col">Совместимость с браузерами</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <th scope="row">VP9</th>
   <td>—</td>
   <td>Chrome (48+), Firefox</td>
  </tr>
 </tbody>
</table></div><h3 id="кодек_vp8"><a href="#кодек_vp8" title="Permalink to Кодек VP8">Кодек VP8</a></h3><div><p>VP8, который мы  <a href="/en-US/docs/Web/Media/Formats/Video_codecs#vp8">описывали в общем</a>  в основной статье  <a href="/en-US/docs/Web/Media/Formats/Video_codecs">руководства по сетевым видеокодекам</a>, имеет специфические требования, которым необходимо следовать при кодировании видео треков WebRTC соединения.</p>

<p>По умолчанию, VP8 будет использовать квадратные пиксели (то есть, пиксели с соотношением сторон 1: 1).</p>

<h4 id="дополнительное_замечание">Дополнительное замечание</h4>

<p>Формат полезной нагрузки сети для совместного использования VP8 с помощью <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Glossary/RTP">RTP <small>(en-US)</small></a> (например, при использовании WebRTC) описано в <a href="https://datatracker.ietf.org/doc/html/rfc7741" class="external" rel=" noopener">RFC 7741: RTP Payload Format for VP8 Video</a>.</p></div><h3 id="кодек_avc_h.264"><a href="#кодек_avc_h.264" title="Permalink to  Кодек AVC / H.264"></a><a id="AVC"> Кодек AVC / H.264</a></h3><div><p>Поддержка профиля AVC Constrained Baseline (<code>CB</code>) требуется во всех полностью совместимых реализациях WebRTC. <code>CB</code> является подмножеством основного профиля и специально разработан для приложений с низкой сложностью и малой задержкой, таких как мобильное видео и видеоконференции, а также для платформ с более низкими возможностями обработки видео..</p>

<p>Наш <a href="/en-US/docs/Web/Media/Formats/Video_codecs#avc_(h.264)">обзор  AVC</a> и его функциональности найдёте в основном руководстве по видеокодекам.</p>

<h4 id="требования_поддержки_специальных_параметров">Требования поддержки специальных параметров</h4>

<p>AVC предлагает широкий спектр параметров для управления дополнительными значениями. Чтобы повысить надёжность совместного использования мультимедиа WebRTC на нескольких платформах и в разных браузерах, необходимо, чтобы конечные точки WebRTC, поддерживающие AVC, обрабатывали определённые параметры определённым образом. Иногда это просто означает, что параметр должен (или не должен) поддерживаться. Иногда это означает, что необходимо указать конкретное значение для параметра или разрешить определённый набор значений. А иногда требования более сложны.</p>

<h5 id="полезные_но_необязательные_параметры">Полезные, но необязательные параметры</h5>

<p>Эти параметры не обязаны поддерживаться конечной точкой WebRTC, и их использование также не обязательно. Их использование, некоторым образом, может улучшить пользовательское впечатление , но к использованию не обязательно. Некоторые из них довольно сложны в использовании.</p>

<dl>
 <dt id="max-br"><code>max-br</code></dt>
 <dd>Если параметр определён и поддерживается , он определяет максимальную скорость передачи видеоданных в  единицах 1,000 bps (бит в секунду) для VCL и 1,200 bps (бит в секунду) для NAL. Подробности на  <a href="https://tools.ietf.org/html/rfc6184#page-47" class="external" rel=" noopener">странице 47 спецификации RFC 6184</a>.</dd>
 <dt id="max-cpb"><code>max-cpb</code></dt>
 <dd>Если параметр определён и поддерживается, он определяет максимальный размер буфера, кодируемых данных. Немного усложнённый параметр, размер которого может варьироваться. Смотрим на <a href="https://tools.ietf.org/html/rfc6184#page-45" class="external" rel=" noopener">страницу  45 спецификации RFC 6184</a> о подробностях.</dd>
 <dt id="max-dpb"><code>max-dpb</code></dt>
 <dd>Определяет максимальный размер буфера  декодированных данных, выраженных в единицах  8/3 макроблоков. Подробности в спецификации <a href="https://tools.ietf.org/html/rfc6184#page-46" class="external" rel=" noopener">RFC 6184, страница 46</a>.</dd>
 <dt id="max-fs"><code>max-fs</code></dt>
 <dd>Определяет максимальный размер видеокадра, выраженный в количестве макроблоков.</dd>
 <dt id="max-mbps"><code>max-mbps</code></dt>
 <dd>Определяет максимальную скорость обработки макроблоков в секунду. Значение является целым числом..</dd>
 <dt id="max-smbps"><code>max-smbps</code></dt>
 <dd>Определяет максимальную скорость обработки статических макроблоков в секунду (используя гипотетическое предположение, что все макроблоки являются статическими макроблоками).</dd>
</dl>

<h5 id="параметры_с_определёнными_требованиями">Параметры с определёнными требованиями</h5>

<p>Эти параметры являются необязательными, но имеют специальные требования при их использовании.</p>

<dl>
 <dt id="packetization-mode"><code>packetization-mode</code></dt>
 <dd>Все конечные точки обязательны для поддержания режима  1 (не чередующийся режим). Поддержка иных режимов пакетизации не обязательна, и сам параметр не обязателен для определения.</dd>
 <dt id="sprop-parameter-sets"><code>sprop-parameter-sets</code></dt>
 <dd>Информация о последовательности и изображении для AVC может передаваться как внутри канала, так и вне его. При использовании AVC  с WebRTC, информация должна передаваться в канале, поэтому значение параметра не включается в SDP.</dd>
</dl>

<h5 id="обязательные_для_определения_параметры">Обязательные для определения параметры</h5>

<p>Эти параметры обязательны к определению, при использовании AVC в WebRTC соединении.</p>

<ul>
 <li><code>profile-level-id</code></li>
</ul>

<p>Все реализации WebRTC обязательно определяют и передают  в своих  SDP, определяя суб  - профиль используемого кодека (подмножество инструментов кодирования, которые могут быть использованы для генерации потока или того, что поддерживает получатель) и уровня потока по умолчанию, или уровня поддержки получателя.</p>

<p> Конкретное значение разработчику не известно, используется одно на всех, и устанавливается  WebRTC. Начиная с <a href="https://datatracker.ietf.org/doc/html/rfc6184" class="external" rel=" noopener">RFC 6184</a> ("RTP Payload Format for H.264 Video"), наличие <code>profile-level-id</code> необязательно.</p>

<h4 id="прочие_требования">Прочие требования</h4>

<p>В целях поддержки переключения между книжной и альбомной ориентацией можно использовать два метода. Первый - это расширение заголовка видеоориентации (CVO) для протокола RTP. Однако, если это не сигнализируется как поддерживаемое в SDP, тогда рекомендуется, чтобы браузеры поддерживали сообщения Display Orientation SEI, хотя и не обязательно</p>

<p>Если не указано иное, соотношение сторон пикселя составляет 1: 1, что указывает на то, что пиксели являются квадратными</p>

<h4 id="прочие_замечания">Прочие замечания</h4>

<p>Формат полезной нагрузки, используемый для AVC в WebRTC, описан в <a href="https://datatracker.ietf.org/doc/html/rfc6184" class="external" rel=" noopener">RFC 6184: RTP Payload Format for H.264 Video</a>. Реализации AVC для WebRTC необходимы для поддержки специальных сообщений SEI :  «заполнитель нагрузки» и «полное замораживание кадра», они используются для плавного переключения между несколькими входными потоками.</p></div><h2 id="поддерживаемые_аудио_кодеки"><a href="#поддерживаемые_аудио_кодеки" title="Permalink to Поддерживаемые аудио кодеки">Поддерживаемые аудио кодеки</a></h2><div><p>Спецификация  <a href="https://datatracker.ietf.org/doc/html/rfc7874" class="external" rel=" noopener">RFC 7874</a> предписывает всем браузерам поддержку аудиокодеков, перечисленных в таблице :</p>

<table class="standard-table">
 <caption>
 <p>Обязательные аудиокодеки</p>
 </caption>
 <thead>
  <tr>
   <th scope="row">Наименование кодека</th>
   <th scope="col">Совместимость с браузерами</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <th scope="row"><a href="/en-US/docs/Web/Media/Formats/Audio_codecs#opus">Opus</a></th>
   <td>Edge, Firefox, Safari</td>
  </tr>
  <tr>
   <th scope="row"><a href="/en-US/docs/Web/Media/Formats/Audio_codecs#g.711">G.711 PCM (A-law)</a></th>
   <td>Chrome, Firefox, Safari</td>
  </tr>
  <tr>
   <th scope="row"><a href="/en-US/docs/Web/Media/Formats/Audio_codecs#g.711">G.711 PCM (µ-law)</a></th>
   <td>Chrome, Firefox, Safari</td>
  </tr>
 </tbody>
</table>

<p>Более подробное обсуждение использования кодеков в WebRTC следует ниже.</p>

<p>Спецификация  <a href="https://datatracker.ietf.org/doc/html/rfc7874" class="external" rel=" noopener">RFC 7874</a> определяет список аудио кодеков, которые браузеры, реализующие WebRTC обязаны поддерживать; так же предоставляются рекомендации и требования для специфических аудио функциональностей, таких как удаление эхоподавление, шумоподавление и выравнивание звука.</p>

<div class="note notecard" id="sect3">
<p><strong> Примечание :</strong>  Список выше указывает на минимальный набор кодеков, который требуется реализовать браузерам (браузерному окружению), поддерживающих  WebRTC. Такие браузеры могут поддерживать также и другие кодеки, что подвергает риску межплатформенной совместимости при использовании этих кодеков без проверки гарантированной работоспособности в часто используемых браузерах.</p>
</div>

<p>В дополнение к обязательным видеокодекам, некоторые браузеры поддерживают дополнительные кодеки, перечисленные в таблице:</p>

<table class="standard-table">
 <caption>Дополнительные аудио кодеки</caption>
 <thead>
  <tr>
   <th scope="row">Наименование кодека</th>
   <th scope="col">Совместимость с браузерами</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <th scope="row">G.722</th>
   <td>Chrome, Firefox, Safari</td>
  </tr>
  <tr>
   <th scope="row">iLBC<sup><a href="#other-audio-foot-1">[1]</a></sup></th>
   <td>Chrome, Safari</td>
  </tr>
  <tr>
   <th scope="row">iSAC<sup><a href="#other-audio-foot-2">[2]</a></sup></th>
   <td>Chrome, Safari</td>
  </tr>
 </tbody>
</table>

<p><a id="other-audio-foot-1" name="other-audio-foot-1">[1]</a> <strong><a title="Internet Low Bitrate Codec" href="https://ru.wikipedia.org/wiki/Internet_Low_Bitrate_Codec" class="external" rel=" noopener">Internet Low Bitrate Codec</a></strong> (<strong>iLBC</strong>)  - узкополосный кодек с открытым кодом, разработанный Global IP Solutions и Google, спроектированный для потокового голосового аудио. Google и другие разработчики браузеров адоптировали его для работы с  WebRTC, но он доступен не во всех браузерах, и не является обязательно поддерживаемым кодеком.</p>

<p><a id="other-audio-foot-2" name="other-audio-foot-2">[2]</a> The <strong><a title="Internet Speech Audio Codec" href="https://ru.wikipedia.org/wiki/Internet_Speech_Audio_Codec" class="external" rel=" noopener">Internet Speech Audio Codec</a></strong> (<strong>iSAC</strong>)  -  другой кодек, разработанный Global IP Solutions, теперь принадлежащий Google, открывший его код. Используется Google Talk, QQ, и другими клиентами быстрых сообщений, специально спроектированный для голосовых сообщений, упакованных в поток RTP. Пока не является обязательной поддерживаемым кодеком. Поддерживается Safari и Chrome. Не поддерживается Firefox и Edge.</p>

<p><strong><a title="Comfort noise" href="https://ru.wikipedia.org/wiki/Comfort_noise" class="external" rel=" noopener">Comfort noise</a></strong> (<strong>CN</strong>) - комфортный шум. Является формой искусственного фонового шума, использующегося для заполнения пробелов в передаче, вместо использования полной тишины. Помогает избежать вибрационных эффектов, возникающих, когда голосовая активация или подобная функциональность  вызывает временное приостановление потока, известная как прерывистая передача (Discontinuous Transmission (DTX)). В спецификации <a href="https://datatracker.ietf.org/doc/html/rfc3389" class="external" rel=" noopener">RFC 3389</a>, метод предлагает использовать определённое заполнение в беззвучных промежутках.</p>

<p>Комфортный шум используется с G.711 и может потенциально использоваться с другими кодеками, которые не имеют встроенной функции CN. Кодек Opus, к примеру, имеет собственную реализацию CN, поэтому использование RFC 3389 CN с кодеком Opus не рекомендуется.</p>

<p>Отправитель звука никогда не должен использовать прерывистую передачу или комфортный шум.</p></div><h3 id="кодек_opus"><a href="#кодек_opus" title="Permalink to Кодек Opus">Кодек Opus</a></h3><div><p>Формат Opus, определённый в <a href="https://datatracker.ietf.org/doc/html/rfc6716" class="external" rel=" noopener">RFC 6716</a>), является основным форматом для аудио в WebRTC. Формат полезной нагрузки RTP для Opus находится в <a href="https://datatracker.ietf.org/doc/html/rfc7587" class="external" rel=" noopener">RFC 7587</a>. Можете найти подробную информацию об Opus и его возможностях, а также о том, как другие API могут поддерживать Opus, в <a href="/en-US/docs/Web/Media/Formats/Audio_codecs#opus">соответствующей секции</a>  нашего <a href="/en-US/docs/Web/Media/Formats/Audio_codecs">руководства по аудиокодекам, использующимся в web</a>.</p>

<p>Должны поддерживаться оба режима : речь и обычное аудио. Масштабируемость и гибкость Opus полезна при работе с аудио, имеющим различную степень сложности. Поддержка внутриполосных стереосигналов позволяет поддерживать стереозвук без усложнения процесса демультиплексирования.</p>

<p>Весь диапазон битрейтов, поддерживаемых Opus (от 6 кбит / с до 510 кбит / с), поддерживается в WebRTC, причём скорость битов можно динамически изменять. Более высокие битовые скорости передачи обычно улучшают качество..</p>

<h4 id="рекомендации_по_скорости_передачи_данных_bit_rate">Рекомендации по скорости передачи данных (bit rate)</h4>

<p>При условии размер кадра в 20 миллисекунд, в следующей таблице приведены рекомендуемые скорости передачи данных для различных типов носителей.</p>

<table class="standard-table">
 <thead>
  <tr>
   <th scope="col">Медиа носитель</th>
   <th scope="col">Рекомендованный диапазон bit rate</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td>Узкополосная речь (NB)</td>
   <td>8 - 12 kbps</td>
  </tr>
  <tr>
   <td>Широкополосная речь (WB)</td>
   <td>16 - 20 kbps</td>
  </tr>
  <tr>
   <td>Полноценная речь (FB)</td>
   <td>28 - 40 kbps</td>
  </tr>
  <tr>
   <td>Монофоническая музыка (FB mono)</td>
   <td>48 - 64 kbps</td>
  </tr>
  <tr>
   <td>Стереофоническая музыка (FB stereo)</td>
   <td>64 - 128 kbps</td>
  </tr>
 </tbody>
</table>

<p>Скорость передачи может быть скорректирована в любое время. Во избежание перегрузки сети средняя скорость передачи звука не должна превышать доступную пропускную способность сети (за вычетом любых других известных или ожидаемых дополнительных требований к пропускной способности).</p></div><h3 id="кодек_g.711"><a href="#кодек_g.711" title="Permalink to Кодек G.711">Кодек G.711</a></h3><div><p>G.711 определяет формат для звука с импульсной кодовой модуляцией (PCM) в виде серии 8-битных целочисленных выборок, взятых с частотой дискретизации 8000 Гц, что даёт скорость передачи данных 64 кбит / с. И в <a title="µ-law" href="https://ru.wikipedia.org/wiki/M-law" class="external" rel=" noopener">µ-law</a> , и в <a title="A-law" href="https://ru.wikipedia.org/wiki/A-law" class="external" rel=" noopener">A-law</a> разрешена кодировка.</p>

<p>G.711 <a href="https://www.itu.int/rec/T-REC-G.711-198811-I/en" class="external" rel=" noopener">определяется ITU</a>  , а его формат нагрузки в <a href="https://datatracker.ietf.org/doc/html/rfc3551" class="external" rel=" noopener">RFC 3551: 4.5.14</a>.</p>

<p>WebRTC требует, чтобы G.711 использовал 8-битные выборки со стандартной скоростью 64 кбит / с, хотя G.711 поддерживает некоторые другие варианты. WebRTC не предписывает использовать ни G.711.0 (сжатие без потерь), G.711.1 (широкополосная возможность), ни какие-либо другие расширения стандарта G.711</p>

<p>Из-за низкой частоты дискретизации и размера выборки качество звука G.711 в целом считается низким по современным стандартам, хотя оно примерно эквивалентно звучанию стационарного телефона. Обычно он используется в качестве наименьшего общего знаменателя, чтобы гарантировать, что браузеры могут установить аудио-соединение независимо от платформ и браузеров, или как запасной вариант в целом.</p></div><h2 id="определение_и_конфигурирование_кодеков"><a href="#определение_и_конфигурирование_кодеков" title="Permalink to Определение и конфигурирование кодеков">Определение и конфигурирование кодеков</a></h2><div></div><h3 id="получение_поддерживаемых_кодеков"><a href="#получение_поддерживаемых_кодеков" title="Permalink to Получение поддерживаемых кодеков">Получение поддерживаемых кодеков</a></h3><div><p>Поскольку браузер и платформа могут иметь различную доступность среди потенциальных кодеков - и могут иметь несколько профилей или уровней, поддерживаемых для данного кодека - первый шаг при настройке кодеков для объекта типа <a href="/ru/docs/Web/API/RTCPeerConnection"><code>RTCPeerConnection</code></a>  - получить список доступных кодеков. Для этого сначала нужно инициализировать объект соединения, который получит список.</p>

<p>Существует два способа для выполнения этого. Наиболее эффективный - использовать статический метод <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/RTCRtpSender/getCapabilities"><code>RTCRtpSender.getCapabilities()</code> <small>(en-US)</small></a> (или эквивалентный для принимающего узла <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/RTCRtpReceiver/getCapabilities"><code>RTCRtpReceiver.getCapabilities()</code> <small>(en-US)</small></a> ), определяющий тип медиаданных в параметре. К примеру, для определения поддерживаемых кодеков видео применяем :</p>

<div class="code-example"><pre class="brush: js notranslate"><code>codecList <span class="token operator">=</span> RTCRtpSender<span class="token punctuation">.</span><span class="token function">getCapabilities</span><span class="token punctuation">(</span><span class="token string">"video"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>codecs<span class="token punctuation">;</span></code></pre></div>

<p>Теперь массив <code>codecList</code> содержит объекты <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/RTCRtpCodecCapability"><code>RTCRtpCodecCapability</code> <small>(en-US)</small></a> , каждый содержащий описываемую конфигурацию кодека. Также в списке будут присутствовать записи для повторной передачи (RTX), избыточного кодирования (RED) и прямого исправления ошибок (FEC).</p>

<p>Если соединение находится в процессе запуска, используем событие <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/RTCPeerConnection/icegatheringstatechange_event"><code>icegatheringstatechange</code> <small>(en-US)</small></a>  для наблюдения за изменением статуса сборки кандидатов  <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Glossary/ICE">ICE <small>(en-US)</small></a> и при завершении, запрашиваем список кодеков.</p>

<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">let</span> codecList <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

peerConnection<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"icegatheringstatechange"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>peerConnection<span class="token punctuation">.</span>iceGatheringState <span class="token operator">===</span> <span class="token string">"complete"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> senders <span class="token operator">=</span> peerConnection<span class="token punctuation">.</span><span class="token function">getSenders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    senders<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">sender</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>sender<span class="token punctuation">.</span>track<span class="token punctuation">.</span>kind <span class="token operator">===</span> <span class="token string">"video"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        codecList <span class="token operator">=</span> sender<span class="token punctuation">.</span><span class="token function">getParameters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>codecs<span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  codecList <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>

<p>Обработчик события <code>icegatheringstatechange</code> установлен; в нем мы отслеживаем тип события <code>complete</code> завершения сборки кандидатов ICE, указывающее что сборка кандидатов завершена. Метод <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/RTCPeerConnection/getSenders"><code>RTCPeerConnection.getSenders()</code> <small>(en-US)</small></a> вызывается для получения списка всех объектов <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/RTCRtpSender"><code>RTCRtpSender</code> <small>(en-US)</small></a> , использующихся в соединении.</p>

<p>Имея это в виду, мы просматриваем список отправителей и ищем первого, чей <a href="/ru/docs/Web/API/MediaStreamTrack"><code>MediaStreamTrack</code></a> указывает, что тип <a class="page-not-created" title="Документация об этом ещё не написана; пожалуйста, поспособствуйте её написанию!"><code>track</code></a> в своём свойстве  <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/MediaStreamTrack/kind"><code>kind</code> <small>(en-US)</small></a> содержит значение <code>video</code>, указывающее, что данные являются видеоданными. Затем вызывается метод отправителя  <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/RTCRtpSender/getParameters"><code>getParameters()</code> <small>(en-US)</small></a> , и значением свойства  <a class="page-not-created" title="Документация об этом ещё не написана; пожалуйста, поспособствуйте её написанию!"><code>codecs</code></a> возвращаемого объекта <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/RTCRtpSendParameters"><code>RTCRtpSendParameters</code> <small>(en-US)</small></a> , инициализируем переменную <code>codecList</code>.</p>

<p>Если видеотрек не найден, устанавливаем  <code>codecList</code> в <code>null</code>.</p>

<p>При возврате, <code>codecList </code>либо  <code>null</code> , указывающий на то, что видеодорожки не были найдены, либо это массив <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/RTCRtpCodecParameters"><code>RTCRtpCodecParameters</code> <small>(en-US)</small></a> объектов, каждый из которых описывает одну разрешённую конфигурацию кодека. Особое значение в этих объектах имеет свойство <a class="page-not-created" title="Документация об этом ещё не написана; пожалуйста, поспособствуйте её написанию!"><code>payloadType</code></a>, которое является однобайтовым значением, однозначно идентифицирующим описанную конфигурацию.</p>

<div class="note notecard" id="sect4">
<p><strong>Примечание :</strong>  Два метода получения списков кодеков, показанные здесь, используют разные типы вывода в своих списках кодеков. Помните об этом при использовании результатов</p>
</div></div><h3 id="настройка_списка_кодеков"><a href="#настройка_списка_кодеков" title="Permalink to Настройка списка кодеков">Настройка списка кодеков</a></h3><div><p>Как только получен список доступных кодеков, его можно изменить и передать этот пересмотренный список методу  <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/RTCRtpTransceiver/setCodecPreferences"><code>RTCRtpTransceiver.setCodecPreferences()</code> <small>(en-US)</small></a> для перенастройки списка, используемых кодеков. Это изменяет порядок предпочтений кодеков, позволяя указать WebRTC на более предпочтительный кодек среди прочих .</p>

<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">function</span> <span class="token function">changeVideoCodec</span><span class="token punctuation">(</span><span class="token parameter">mimeType</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> transceivers <span class="token operator">=</span> peerConnection<span class="token punctuation">.</span><span class="token function">getTransceivers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  transceivers<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">transceiver</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> kind <span class="token operator">=</span> transceiver<span class="token punctuation">.</span>sender<span class="token punctuation">.</span>track<span class="token punctuation">.</span>kind<span class="token punctuation">;</span>
    <span class="token keyword">let</span> sendCodecs <span class="token operator">=</span> RTCRtpSender<span class="token punctuation">.</span><span class="token function">getCapabilities</span><span class="token punctuation">(</span>kind<span class="token punctuation">)</span><span class="token punctuation">.</span>codecs<span class="token punctuation">;</span>
    <span class="token keyword">let</span> recvCodecs <span class="token operator">=</span> RTCRtpReceiver<span class="token punctuation">.</span><span class="token function">getCapabilities</span><span class="token punctuation">(</span>kind<span class="token punctuation">)</span><span class="token punctuation">.</span>codecs<span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>kind <span class="token operator">===</span> <span class="token string">"video"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      sendCodecs <span class="token operator">=</span> <span class="token function">preferCodec</span><span class="token punctuation">(</span>mimeType<span class="token punctuation">)</span><span class="token punctuation">;</span>
      recvCodecs <span class="token operator">=</span> <span class="token function">preferCodec</span><span class="token punctuation">(</span>mimeType<span class="token punctuation">)</span><span class="token punctuation">;</span>
      transceiver<span class="token punctuation">.</span><span class="token function">setCodecPreferences</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>sendCodecs<span class="token punctuation">,</span> <span class="token operator">...</span>recvCodecs<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  peerConnection<span class="token punctuation">.</span><span class="token function">onnegotiationneeded</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>

<p>В этом примере функция  <code>changeVideoCodec()</code> принимает в параметр MIME тип предпочтительного к использованию кодека. Код начинается с получения списка объектов приёмо-передатчиков объекта соединения <a href="/ru/docs/Web/API/RTCPeerConnection"><code>RTCPeerConnection</code></a>.</p>

<p>Затем, для каждого приёмо-передатчика анализируем тип медиа свойства <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/RTCRtpSender"><code>RTCRtpSender</code> <small>(en-US)</small></a>'s track's <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/MediaStreamTrack/kind"><code>kind</code> <small>(en-US)</small></a>. Так же получаем список поддерживаемых браузером кодеков стороны отправки и получения  <code>video</code>, используя статический метод <code>getCapabilities()</code> обоих классов <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/RTCRtpSender"><code>RTCRtpSender</code> <small>(en-US)</small></a> и <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/RTCRtpReceiver"><code>RTCRtpReceiver</code> <small>(en-US)</small></a>.</p>

<p>Если тип медиаданных является типом  <code>video</code>, вызываем метод <code>preferCodec()</code> для обоих взаимодействующих сторон списков кодеков, который реорганизует список кодеков необходимым образом  (смотри ниже).</p>

<p>И наконец, вызываем метод <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/RTCRtpTransceiver/setCodecPreferences"><code>setCodecPreferences()</code> <small>(en-US)</small></a> объекта  <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/RTCRtpTransceiver"><code>RTCRtpTransceiver</code> <small>(en-US)</small></a> для определения того, что использование кодеков обеих сторон разрешено, в указанном порядке.</p>

<p>Это выполняется для каждого объекта приёмо-передатчика объекта соединения  <code>RTCPeerConnection</code>; как только все приёмо-передатчики обновили списки предпочитаемых кодеков, вызывается обработчик события  <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/RTCPeerConnection/negotiationneeded_event"><code>onnegotiationneeded</code> <small>(en-US)</small></a> , который создаёт новый объект предложения, обновляет объект локального описания сессии, отправляет предложение удалённому узлу, и так далее, запуская согласование соединения .</p>

<p>Функция <code>preferCodec()</code> вызываемая приведённым выше кодом, действует так, чтобы переместить указанный кодек в верхнюю часть списка (для приоритета во время согласования):</p>

<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">function</span> <span class="token function">preferCodec</span><span class="token punctuation">(</span><span class="token parameter">codecs<span class="token punctuation">,</span> mimeType</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> otherCodecs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> sortedCodecs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> count <span class="token operator">=</span> codecs<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

  codecs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">codec</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>codec<span class="token punctuation">.</span>mimeType <span class="token operator">===</span> mimeType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      sortedCodecs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>codec<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      otherCodecs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>codec<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> sortedCodecs<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>otherCodecs<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>

<p>Этот код просто разбивает список кодеков на два массива: один, содержащий кодеки, чей  MIME тип совпадает с тем, который указан в параметре <code>mimeType</code> , другой же содержит остальные кодеки. Как только список разделён, они объединяются вместе с записями, соответствующими заданному <code>mimeType</code> следующими вначале, за которыми следуют остальные записи кодеков. Затем этот список возвращается вызывающему коду.</p></div><h2 id="кодеки_по_умолчанию"><a href="#кодеки_по_умолчанию" title="Permalink to Кодеки по умолчанию">Кодеки по умолчанию</a></h2><div><p>Если не определённо иное, кодеки по умолчанию (предпочтительные кодеки), запрашиваемые браузерными реализациями  WebRTC, перечислены ниже</p>

<table class="standard-table">
 <caption>
 <p>Предпочтительные для  WebRTC кодеки основных веб-браузеров</p>
 </caption>
 <thead>
  <tr>
   <th scope="col"></th>
   <th scope="col">Audio</th>
   <th scope="col">Video</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <th scope="row">Chrome</th>
   <td></td>
   <td></td>
  </tr>
  <tr>
   <th scope="row">Edge</th>
   <td></td>
   <td></td>
  </tr>
  <tr>
   <th scope="row">Firefox</th>
   <td></td>
   <td>VP9 (Firefox 46 and later)<br>
    VP8</td>
  </tr>
  <tr>
   <th scope="row">Opera</th>
   <td></td>
   <td></td>
  </tr>
  <tr>
   <th scope="row">Safari</th>
   <td></td>
   <td></td>
  </tr>
 </tbody>
</table></div><h2 id="правильный_выбор_кодеков"><a href="#правильный_выбор_кодеков" title="Permalink to Правильный выбор кодеков">Правильный выбор кодеков</a></h2><div><p>Перед выбором кодека, который не является обязательным (VP8 или AVC для видео и  Opus или PCM для аудио), следует серьёзно рассмотреть потенциальные недостатки: в особенности, если предполагается, что эти кодеки не широко доступны на всех устройствах, поддерживающих WebRTC.</p>

<p>Если вы предпочитаете кодек, отличный от обязательных, вы должны по крайней мере разрешить откат к одному из обязательных кодеков, если поддержка для кодека, который вы предпочитаете, окажется недоступна.</p></div><h3 id="аудио"><a href="#аудио" title="Permalink to Аудио">Аудио</a></h3><div><p>В целом, если кодек доступен и звук, который вы хотите отправить, имеет частоту дискретизации более 8 кГц, вам следует настоятельно рекомендовать использовать Opus в качестве основного кодека. Для голосовых соединений в стеснённой среде использование G.711 с частотой дискретизации 8 кГц может обеспечить приемлемое качество для разговора, но обычно вы будете использовать G.711 в качестве запасного варианта, поскольку есть другие более эффективные варианты, чей звук лучше, такие как Опус в своём узкополосном режиме .</p></div><h3 id="видео"><a href="#видео" title="Permalink to Видео">Видео</a></h3><div><p>При выборе поддерживаемого видеокодека (или набора кодеков) необходимо учитывать ряд факторов</p>

<h4 id="условия_лицензирования">Условия лицензирования</h4>

<p>Прежде чем выбрать видеокодек, убедитесь, что вы знаете о любых лицензионных требованиях к выбранному вами кодеку; можете найти информацию о возможных проблемах лицензирования в нашем основном <a href="/en-US/docs/Web/Media/Formats/Video_codecs">руководстве по видеокодекам, используемым в  web</a>. Из двух обязательных кодеков для видео - VP8 и AVC / H.264 - только VP8 полностью свободен от лицензионных требований. Если выбираете AVC, убедитесь, что вы знаете о любых возможных сборах, которые вам, возможно, придётся заплатить; владельцы патентов обычно говорят, что большинству типичных разработчиков веб-сайтов не нужно беспокоиться об оплате лицензионных сборов, которые, как правило, больше ориентированы на разработчиков программного обеспечения для кодирования и декодирования.</p>

<div class="warning notecard" id="sect5">
<p><strong>Внимание :</strong>  Информация здесь не является юридической консультацией! Обязательно убедитесь в возможности ответственности, прежде чем принимать какие-либо окончательные решения, если существует вероятность возникновения проблем с лицензированием.</p>
</div>

<h4 id="энергопотребление_и_срок_службы_батареи">Энергопотребление и срок службы батареи</h4>

<p>Ещё один фактор, который следует учитывать, особенно на мобильных платформах, - это влияние кодека на время автономной работы. Если кодек обрабатывается аппаратно на данной платформе, он, вероятно, позволит значительно увеличить срок службы батареи и уменьшить выработку тепла.</p>

<p>Например, Safari для iOS и iPadOS представила WebRTC с AVC в качестве единственного поддерживаемого видеокодека. Преимущество AVC на iOS и iPadOS заключается в возможности кодирования и декодирования на аппаратном уровне.Safari 12.1 представил поддержку VP8 в IRC, что улучшает взаимодействие, но за дополнительную плату - VP8 не имеет аппаратной поддержки на устройствах iOS, поэтому его использование приводит к увеличению нагрузки на процессор и сокращению срока службы батареи.</p>

<h4 id="производительность">Производительность</h4>

<p>К счастью, VP8 и AVC работают одинаково с точки зрения конечного пользователя и одинаково адекватны для использования в видеоконференцсвязи и других решениях WebRTC. Окончательное решение остаётся за разработчиком. Какой бы вариант вы ни выбрали, обязательно прочитайте информацию, представленную в этой статье, о любых конкретных проблемах конфигурации, с которыми вам, возможно, придётся столкнуться для этого кодека.</p>

<p>Имейте в виду, что выбор кодека, которого нет в списке обязательных кодеков, может привести к риску выбора кодека, который не поддерживается браузером, который предпочитают ваши пользователи. Прочтите <a href="/en-US/docs/Web/Media/Formats/Support_issues">Решение проблем медиаподдержки в веб контенте</a> , чтобы узнать больше о том, как предлагать поддержку предпочитаемых кодеков, но при этом использовать браузеры, которые не поддерживают этот кодек.</p></div><h2 id="последствия_для_безопасности"><a href="#последствия_для_безопасности" title="Permalink to Последствия для безопасности">Последствия для безопасности</a></h2><div><p>При выборе и настройке кодеков возникают интересные потенциальные проблемы безопасности. Видео WebRTC защищено с помощью Datagram Transport Layer Security (<a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Glossary/DTLS">DTLS <small>(en-US)</small></a>), но для мотивированной стороны теоретически возможно вывести величину изменения, которое происходит от кадра к кадру при использовании кодеков с переменной скоростью передачи (VBR), путём мониторинга скорости потока  и её изменения во времени.Это может потенциально позволить злоумышленнику сделать вывод о содержании потока, учитывая приливы и отливы скорости передачи.</p>

<p>Подробнее о безопасности при использовании AVC в WebRTC см.  <a href="https://datatracker.ietf.org/doc/html/rfc6184#section-9" class="external" rel=" noopener">RFC 6184, секция 9: RTP Payload Format for H.264 Video: Security Considerations</a>.</p></div><h2 id="смотрите_также"><a href="#смотрите_также" title="Permalink to Смотрите также :">Смотрите также :</a></h2><div><ul>
 <li><a href="/en-US/docs/Web/API/WebRTC_API">WebRTC API</a></li>
 <li><a href="/en-US/docs/Web/API/WebRTC_API/Protocols">Введение в протоколы WebRTC</a></li>
 <li><a href="/en-US/docs/Web/API/WebRTC_API/Connectivity">WebRTC соединение </a></li>
 <li><a href="/en-US/docs/Web/Media/Formats/Video_codecs">Руководство по видеокодекам, использующимся в web</a></li>
 <li><a href="/en-US/docs/Web/Media/Formats/Audio_codecs">Руководство по аудиокодекам, использующимся в web</a></li>
 <li><a href="/en-US/docs/Web/Media/Formats/Video_concepts">Концепции цифрового видео</a></li>
 <li><a href="/en-US/docs/Web/Media/Formats/Audio_concepts">Концепции цифрового аудио</a></li>
</ul></div></article><aside class="metadata"><div class="metadata-content-container"><div id="on-github" class="on-github"><h3>Found a problem with this page?</h3><ul><li><a href="https://github.com/mdn/translated-content/edit/main/files/ru/web/media/formats/webrtc_codecs/index.html" title="You're going to need to sign in to GitHub first (Opens in a new tab)" target="_blank" rel="noopener noreferrer">Edit on <b>GitHub</b></a></li><li><a href="https://github.com/mdn/translated-content/blob/main/files/ru/web/media/formats/webrtc_codecs/index.html" title="Folder: ru/web/media/formats/webrtc_codecs (Opens in a new tab)" target="_blank" rel="noopener noreferrer">Source on <b>GitHub</b></a></li><li><a href="https://github.com/mdn/translated-content/issues/new?body=MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fru%2Fdocs%2FWeb%2FMedia%2FFormats%2FWebRTC_codecs%0A%0A%23%23%23%23+What+information+was+incorrect%2C+unhelpful%2C+or+incomplete%3F%0A%0A%0A%23%23%23%23+Specific+section+or+headline%3F%0A%0A%0A%23%23%23%23+What+did+you+expect+to+see%3F%0A%0A%0A%23%23%23%23+Did+you+test+this%3F+If+so%2C+how%3F%0A%0A%0A%3C%21--+Do+not+make+changes+below+this+line+--%3E%0A%3Cdetails%3E%0A%3Csummary%3EMDN+Content+page+report+details%3C%2Fsummary%3E%0A%0A*+Folder%3A+%60ru%2Fweb%2Fmedia%2Fformats%2Fwebrtc_codecs%60%0A*+MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fru%2Fdocs%2FWeb%2FMedia%2FFormats%2FWebRTC_codecs%0A*+GitHub+URL%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Ftranslated-content%2Fblob%2Fmain%2Ffiles%2Fru%2Fweb%2Fmedia%2Fformats%2Fwebrtc_codecs%2Findex.html%0A*+Last+commit%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Ftranslated-content%2Fcommit%2F921c46a374ab0a9f4cc809af0370f8c412e54701%0A*+Document+last+modified%3A+2022-10-01T03%3A41%3A16.000Z%0A%0A%3C%2Fdetails%3E&amp;title=Issue+with+%22%D0%9A%D0%BE%D0%B4%D0%B5%D0%BA%D0%B8%2C+%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D1%83%D0%B5%D0%BC%D1%8B%D0%B5+WebRTC%22%3A+%28short+summary+here+please%29&amp;labels=needs-triage%2Cl10n-ru" title="This will take you to https://github.com/mdn/content to file a new issue" target="_blank" rel="noopener noreferrer">Report a problem with this content on <b>GitHub</b></a></li><li>Want to fix the problem yourself? See<!-- --> <a href="https://github.com/mdn/content/blob/main/README.md" target="_blank" rel="noopener noreferrer">our Contribution guide</a>.</li></ul></div><p class="last-modified-date"><b>Last modified:</b> <time datetime="2022-10-01T03:41:16.000Z">Oct 1, 2022</time>,<!-- --> <a href="/ru/docs/Web/Media/Formats/WebRTC_codecs/contributors.txt">by MDN contributors</a></p><form class="language-menu"><fieldset id="select-language"><legend>Change your language</legend><label for="language-selector" class="visually-hidden">Select your preferred language</label> <select id="language-selector" name="language"><option selected="" value="ru">Русский</option><option value="en-US">English (US)</option></select> <button type="submit" class="button minimal">Change language</button></fieldset></form></div></aside></main><nav id="sidebar-quicklinks" class="sidebar"><h4>Related Topics</h4><div>
<ol></ol>
</div></nav></div><footer id="nav-footer" class="page-footer"><div class="content-container"><div class="page-footer-logo"><a href="/ru/" class="logo" aria-label="MDN Web Docs"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 451.74 135" fill="#fff"><path d="M7.14 8.35v111.06h111.05V8.35zm103.71 56c-.48.92-1 1.79-1.46 2.71a3.44 3.44 0 01-3.54 2 2.4 2.4 0 00-1.55.5c-1.37.9-2.76 1.79-4.18 2.63a7.33 7.33 0 01-6.35.34 29.71 29.71 0 00-10.63-2 11.7 11.7 0 00-9.46 4.31 14.84 14.84 0 00-2.13 4.29c-1.24 3.07-2.3 21.38-2.3 26.05 0 0-17.62-3.42-34.15-20.34l4.31-11.32h-13.5l9.76-10.35h-16.8l9.77-10.34H12.69L30.45 34a40.9 40.9 0 0119.77-10.83c7.1-1.22 8.93-.53 13.31.77l2.43.73.85.25 3.1.95a12.56 12.56 0 006.21.09 11.37 11.37 0 018.25 1 8.24 8.24 0 014.1 6.22 7.29 7.29 0 003.61 5.49 59.45 59.45 0 009.32 4.11c2.27.86 4.54 1.84 6.79 2.72a6.81 6.81 0 012.86 2.06 4.81 4.81 0 011.1 2.73c.14 2 .37 4 .47 6a15.24 15.24 0 01-1.77 8.03zM320.12 39.62a5.42 5.42 0 00-4.53 2.13 7.36 7.36 0 00-1.7 4.43v2.36a6.28 6.28 0 001.7 4.46 5.63 5.63 0 004.3 1.82 5.12 5.12 0 004.57-2.27A9.7 9.7 0 00326 47a8.11 8.11 0 00-1.67-5.52 5.36 5.36 0 00-4.21-1.86zM387.38 39.53a5.52 5.52 0 00-4.7 2.15 8.8 8.8 0 00-1.63 5.49 9.23 9.23 0 001.58 5.45 5.38 5.38 0 004.7 2.25 5.61 5.61 0 004.74-2.2 8.91 8.91 0 001.68-5.59 8.24 8.24 0 00-1.75-5.52 5.76 5.76 0 00-4.62-2.03zM299.47 41.35a4.34 4.34 0 00-4-1.92 4.55 4.55 0 00-3.89 1.73 8.37 8.37 0 00-1.58 4.17h10.48a6.3 6.3 0 00-1.01-3.98zM357.74 30.75H352v23.31h5.72q5.47 0 8.35-3t2.93-8.65q0-5.43-2.88-8.55t-8.38-3.11z"></path><path d="M121.55 8.35v70.8h323V8.35zm42.21 22.45h-4V54h3.68v3.73h-11.25V54h3.31V36.79h-.19l-9.63 19.12h-2.12l-10-19.4h-.19V54h3.45v3.73h-11.15V54h3.68V30.8h-4v-3.73H133l11.66 22.56h.19l11.18-22.56h7.7zm29.12 22.67q-4.11 4.28-11.38 4.28h-14.06v-3.69h3.73V30.75h-3.73v-3.68h13.83q7.59 0 11.66 4.29a15.4 15.4 0 014 11 15.33 15.33 0 01-4.05 11.11zm38.89-22.67h-3.68v27h-2.6L208.08 35h-.19v19h4.67v3.73h-12.22V54h3.49V30.8h-4v-3.73h7.08l16.9 22.09h.19V30.8h-4.58v-3.73h12.32zm43.8 27h-3.31l-7.83-23.18h-.19l-7.55 23.18h-3.35l-8.78-27h-2.65v-3.73H253v3.73h-3.87L255 50.71h.23l6.61-19.91H259v-3.73h11v3.73h-2.78l6.61 20.1h.23l5.43-20.1h-4.15v-3.73h11v3.73h-2.54zm26.71-1.51a9.66 9.66 0 01-6.42 2 10.2 10.2 0 01-7.41-2.74c-1.89-1.82-2.83-4.47-2.83-7.93a12.37 12.37 0 012.64-8.12 9 9 0 017.32-3.21 8.62 8.62 0 016.75 2.69 9.65 9.65 0 012.45 6.52 13.67 13.67 0 01-.28 2.69H290q.29 6.71 6.18 6.7a5.2 5.2 0 003.71-1.18 5.82 5.82 0 001.67-2.83l3.45.71a7.21 7.21 0 01-2.73 4.65zm25.77-1.63c-1.51 2.4-3.92 3.61-7.22 3.61s-5.84-1.29-7.22-3.87c0 .25-.1.82-.21 1.7s-.19 1.44-.22 1.7H309c.16-1 .31-2 .47-3.07a21.42 21.42 0 00.24-3.16v-23h-3.4v-3.3h7.55V40.9a9.76 9.76 0 012.67-3.28 7.33 7.33 0 014.74-1.4 8.48 8.48 0 016.5 2.78q2.55 2.74 2.55 7.74a14.6 14.6 0 01-2.27 7.87zm41.39-1.14q-4.11 4.28-11.37 4.28H344v-3.74h3.73V30.75H344v-3.68h13.83q7.59 0 11.66 4.29a15.41 15.41 0 014.06 11 15.34 15.34 0 01-4.11 11.11zm25.65 1.68a10.53 10.53 0 01-7.9 3.07 10 10 0 01-7.63-3 10.93 10.93 0 01-2.8-7.83 12.13 12.13 0 012.69-7.93q2.69-3.3 8-3.3t8 3.28a12 12 0 012.64 7.76 10.86 10.86 0 01-3 7.9zm22.61.57c-1.4 1.66-3.63 2.5-6.68 2.5a9.58 9.58 0 01-7.15-2.76q-2.72-2.76-2.71-7.91a12.25 12.25 0 012.69-8 9.17 9.17 0 017.5-3.28 15 15 0 013.82.48 10.37 10.37 0 013.5 1.65l.85 5.47-3.35.38-.76-3.54a8.07 8.07 0 00-4.11-1 4.9 4.9 0 00-4.39 2.15 9.93 9.93 0 00-1.41 5.55 8.9 8.9 0 001.5 5.38 5.23 5.23 0 004.44 2c2.92 0 4.67-1.7 5.23-5.1l3.5.71a10.34 10.34 0 01-2.47 5.27zm20.48.75a11.68 11.68 0 01-6.63 1.75 15.52 15.52 0 01-8.26-2.08L424 51l3.26.33-.1 2.74a7 7 0 002.06.66 12.63 12.63 0 002.19.19 8.68 8.68 0 003.66-.75 2.5 2.5 0 001.63-2.36 2.25 2.25 0 00-1.32-2.2 12.65 12.65 0 00-3.28-1 47.39 47.39 0 01-3.9-.82 7.5 7.5 0 01-3.25-1.7 4.67 4.67 0 01-1.33-3.66c0-2.36.88-4 2.62-4.91a12 12 0 015.6-1.37 15 15 0 014.08.55 16.65 16.65 0 013.47 1.39l.47 5.1-3.3.37-.48-3.3a9.5 9.5 0 00-4.06-.9 5.62 5.62 0 00-2.87.66 2.33 2.33 0 00-1.15 2.25 2.13 2.13 0 001.3 2.07 11.91 11.91 0 003.21.92 36.69 36.69 0 013.82.83 7.46 7.46 0 013.21 1.74 4.9 4.9 0 011.3 3.73 5.56 5.56 0 01-2.66 4.91z"></path><path d="M181.17 30.75h-5.71v23.31h5.71q5.47 0 8.36-3t2.88-8.61q0-5.43-2.88-8.55t-8.36-3.15zM121.63 119.32V81.74h114.91v37.58zM153.22 109h-2v-6.85a4.8 4.8 0 00-1.58-4 5.57 5.57 0 00-3.55-1.26 5 5 0 00-4.92 3.26 4.19 4.19 0 00-1.88-2.46 5.82 5.82 0 00-3-.8 4.89 4.89 0 00-4.56 2.56v-2.21h-6.28v3.26h2v8.5h-2v3.23h9.11V109h-2.86v-5.25a4.4 4.4 0 01.69-2.56 2.47 2.47 0 012.21-1q2.57 0 2.56 3.63v8.41h6.29V109h-2v-5.25a4.47 4.47 0 01.67-2.56 2.42 2.42 0 012.19-1q2.63 0 2.63 3.63v8.41h6.28zm9.88-12.07q-4 0-6 2.36a8.41 8.41 0 00-2 5.66 7.25 7.25 0 002.17 5.62 8 8 0 005.65 2 8.54 8.54 0 005.94-2.11 7.27 7.27 0 002.34-5.67 8.21 8.21 0 00-2-5.51q-2.07-2.34-6.1-2.34zm-.1 12.35a3 3 0 01-2.63-1.33 5.68 5.68 0 01-.9-3.26 5 5 0 011-3.28 3.23 3.23 0 012.61-1.18 3.5 3.5 0 012.59 1.08 4.56 4.56 0 011.07 3.31 5.21 5.21 0 01-1 3.41 3.33 3.33 0 01-2.74 1.25zm25-2.3l-3.39-.29-.7 2.32H179l8.32-9.54-.32-2.23h-13.19l-.53 5.25 3.16.34.67-2.36h4.65l-8.25 9.53.44 2.26h13.13zm7.62-9.74h-4.46v5.39h4.46zm0 9.61h-4.46v5.39h4.46zm13.54-17.49h-4.23l-6.48 22.88h4.22zm8.68 0h-4.23l-6.45 22.88h4.19zm15 22.51l-.07-2.26a1.22 1.22 0 01-.56.1c-.69 0-1-.39-1-1.16v-6.49a4.39 4.39 0 00-1.8-3.84 7 7 0 00-4.16-1.28 14.55 14.55 0 00-3.16.3 24.14 24.14 0 00-3.29 1.06l-.56 3.46 3.39.4.5-1.69a2.78 2.78 0 011.08-.37 11.3 11.3 0 011.25-.07c1.19 0 1.89.37 2.09 1.1a8.55 8.55 0 01.3 2.26v.5a8.91 8.91 0 00-1.18-.11h-1.21a12.64 12.64 0 00-4.81.88 3.53 3.53 0 00-2.18 3.64 3.66 3.66 0 001.48 3.33 5.63 5.63 0 003.11 1 4.67 4.67 0 003-.91 6.78 6.78 0 001.8-2 3 3 0 003.33 3 5.54 5.54 0 002.66-.85zm-9.25-2.32a1.69 1.69 0 01-1.36-.52 1.81 1.81 0 01-.43-1.21 1.67 1.67 0 01.86-1.68 4.63 4.63 0 012-.42 7.69 7.69 0 011.07.07l1.06.13a3.58 3.58 0 01-1.08 2.74 3.24 3.24 0 01-2.11.89z"></path></svg></a></div><ul class="link-list-mdn"><li><a href="/ru/docs/Web">Web Technologies</a></li><li><a href="/ru/docs/Learn">Learn Web Development</a></li><li><a href="/ru/docs/MDN/About">About MDN</a></li><li><a href="/ru/docs/MDN/Feedback">Feedback</a></li></ul><ul class="link-list-moz"><li><a href="https://www.mozilla.org/about/" target="_blank" rel="noopener noreferrer">About</a></li><li><a href="https://shop.spreadshirt.com/mdn-store/" target="_blank" rel="noopener noreferrer">MDN Web Docs Store</a></li><li><a href="https://www.mozilla.org/contact/" target="_blank" rel="noopener noreferrer">Contact Us</a></li><li><a href="https://www.mozilla.org/firefox/?utm_source=developer.mozilla.org&amp;utm_campaign=footer&amp;utm_medium=referral" target="_blank" rel="noopener noreferrer">Firefox</a></li></ul><div class="social social-mdn"><h4>MDN</h4><ul><li><a class="social-icon twitter" href="https://twitter.com/mozdevnet" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">MDN on Twitter</span></a></li><li><a class="social-icon github" href="https://github.com/mdn/" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">MDN on Github</span></a></li></ul></div><div class="social social-moz"><h4>Mozilla</h4><ul><li><a class="social-icon twitter" href="https://twitter.com/mozilla" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">Mozilla on Twitter</span></a></li><li><a class="social-icon instagram" href="https://www.instagram.com/mozillagram/" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">Mozilla on Instagram</span></a></li></ul></div><p id="license" class="footer-license">© 2005-<!-- -->2022<!-- --> Mozilla and individual contributors. Content is available under<!-- --> <a href="/docs/MDN/About#Copyrights_and_licenses">these licenses</a>.</p><ul class="footer-legal"><li><a href="https://www.mozilla.org/about/legal/terms/mozilla" target="_blank" rel="noopener noreferrer">Terms</a></li><li><a href="https://www.mozilla.org/privacy/websites/" target="_blank" rel="noopener noreferrer">Privacy</a></li><li><a href="https://www.mozilla.org/privacy/websites/#cookies" target="_blank" rel="noopener noreferrer">Cookies</a></li></ul></div></footer><div class="page-overlay hidden"></div></div><script type="application/json" id="hydration">{"doc":{"isMarkdown":false,"isTranslated":true,"isActive":true,"flaws":{},"title":"Кодеки, используемые WebRTC","mdn_url":"/ru/docs/Web/Media/Formats/WebRTC_codecs","locale":"ru","native":"Русский","sidebarHTML":"\n<ol></ol>\n","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<div id=\"sect1\"></div>\n\n<p>С <a href=\"/en-US/docs/Web/API/WebRTC_API\">WebRTC API</a> возможно создание сайтов и приложений, позволяющих пользователям общаться в реальном времени, используя аудио и/или видео, а также передавать данные или другую информацию. Для общения, двум устройствам необходима возможность согласования использования кодеков, для каждой дорожки в потоке данных, для успешного взаимодействия и обмена медиаданными. В этом руководстве рассматриваются кодеки, которые требуются браузерам для этого, а также другие кодеки, которые поддерживаются некоторыми или всеми браузерами, поддерживающими <span class=\"seoSummary\">WebRTC.</span></p>"}},{"type":"prose","value":{"id":"безконтейнерные_медиаданные","title":"Безконтейнерные медиаданные","isH3":false,"content":"<p>WebRTC использует объект типа <a href=\"/ru/docs/Web/API/MediaStreamTrack\"><code>MediaStreamTrack</code></a> для представления каждого трека, передающегося между узлами соединения без использования контейнера или объекта типа <a href=\"/ru/docs/Web/API/MediaStream\"><code>MediaStream</code></a> , объединяющего треки. Какие кодеки могут быть в этих треках, спецификацией  WebRTC не определяется. Однако, <a href=\"https://datatracker.ietf.org/doc/html/rfc7742\" class=\"external\" rel=\" noopener\">RFC 7742</a> определяет, что все браузеры, поддерживающие WebRTC, должны поддерживать <a href=\"/en-US/docs/Web/Media/Formats/Video_codecs#vp8\">VP8</a> и <a href=\"/en-US/docs/Web/Media/Formats/Video_codecs#avc_(h.264)\">H.264</a> ограниченный базовый профиль для видео; и <a href=\"https://datatracker.ietf.org/doc/html/rfc7874\" class=\"external\" rel=\" noopener\">RFC 7874</a> , определяющая, что браузеры должны поддерживать, по меньшей мере, кодеки <a href=\"/en-US/docs/Web/Media/Formats/Audio_codecs#opus\">Opus</a> и <a href=\"/en-US/docs/Web/Media/Formats/Audio_codecs#g.711\">G.711</a>  форматов PCMA и PCMU.</p>\n\n<p>Эти две спецификации определяют свойства, которые должны поддерживаться каждым кодеком, а так же определённые функции для удобства использования, к примеру, функция эхоподавления. В этом руководстве происходит обзор кодеков, поддержка которых обязательна браузерам для реализации WebRTC, а так же иные (не обязательные) кодеки, поддерживаемые отдельными или всеми браузерами,.</p>\n\n<p>Хоть сжатие всегда и необходимо при работе со средствами массовой информации в Интернете, оно имеет дополнительное значение при проведении видеоконференций, чтобы участники могли общаться без задержек и перерывов. Второстепенное значение имеет необходимость синхронизации видео и звука, чтобы движения и любая вспомогательная информация (например, слайды или проекция) были представлены одновременно с соответствующим звуком</p>"}},{"type":"prose","value":{"id":"общие_требования_к_кодекам","title":"Общие требования к кодекам","isH3":false,"content":"<p>Прежде чем рассматривать возможности и требования, специфичные для кодеков, необходимо выполнить несколько общих требований, которые должны быть выполнены при любой конфигурации кодеков, используемой с WebRTC</p>\n\n<p>Если <a href=\"/ru/docs/Glossary/SDP\">SDP</a> специально не указывает иное, веб-браузер, принимающий видеопоток WebRTC, должен иметь возможность обрабатывать видео со скоростью не менее 20 кадров в секунду при минимальном разрешении 320 пикселей в ширину и 240 пикселей в высоту. Рекомендуется, чтобы видео кодировалось с частотой кадров и размером не ниже этого, поскольку это, по сути, нижняя граница того, что WebRTC обычно должен обрабатывать.</p>\n\n<p>SDP поддерживает независимый от кодеков способ указания предпочтительных разрешений видео (<a href=\"https://datatracker.ietf.org/doc/html/rfc6236\" class=\"external\" rel=\" noopener\">RFC 6236</a>). Это делается путём отправки <code>a=imageattr</code> атрибута SDP для указания максимально допустимого разрешения. Однако отправителю не требуется поддерживать этот механизм, поэтому вы должны быть готовы получать носители с другим разрешением, чем вы запрашивали. Помимо этого простого запроса максимального разрешения, определённые кодеки могут предлагать дополнительные способы запроса конкретных конфигураций мультимедиа.</p>"}},{"type":"prose","value":{"id":"поддерживаемые_видео_кодеки","title":"Поддерживаемые видео кодеки","isH3":false,"content":"<p>WebRTC устанавливает набор базовых кодеков, которые требуются браузерам для работы. Некоторые браузеры могут поддерживать дополнительный набор кодеков.</p>\n\n<p>Ниже приведены видеокодеки, которые требуются в любом полностью совместимом с WebRTC браузере, а также требуемые профили и браузеры, которые фактически соответствуют требованиям</p>\n\n<table class=\"standard-table\">\n <caption>\n <p>Обязательные видеокодеки</p>\n </caption>\n <thead>\n  <tr>\n   <th scope=\"row\">Наименование кодека</th>\n   <th scope=\"col\">Профиль</th>\n   <th scope=\"col\">Совместимость с браузерами</th>\n  </tr>\n </thead>\n <tbody>\n  <tr>\n   <th scope=\"row\"><a href=\"#vp8\">VP8</a></th>\n   <td>—</td>\n   <td>Chrome, Edge, Firefox, Safari (12.1+)</td>\n  </tr>\n  <tr>\n   <th scope=\"row\"><a href=\"#avc\">AVC / H.264</a></th>\n   <td>Constrained Baseline (CB)</td>\n   <td>Chrome (52+), Edge, Firefox<sup><a href=\"#supported-foot-1\">[1]</a></sup>, Safari</td>\n  </tr>\n </tbody>\n</table>\n\n<p><a name=\"supported-foot-1\">[1]</a>  Firefox для Android 68 и более поздних версий больше не поддерживает AVC (H.264). Это связано с изменением требований магазина Google Play, которые не позволяют Firefox загружать и устанавливать кодек OpenH264, необходимый для обработки H.264 в соединениях WebRTC. Смотрим подробности в <a href=\"https://support.mozilla.org/en-US/kb/firefox-android-openh264\" class=\"external\" rel=\" noopener\"> статье о SUMO</a> .</p>\n\n<p>Для получения дополнительной информации о соображениях, связанных с WebRTC для каждого кодека, см. Подразделы ниже, перейдя по ссылкам на название каждого кодека.</p>\n\n<p>Полную информацию о том, какие видеокодеки и конфигурации требуется для поддержки WebRTC, можно найти в <a href=\"https://datatracker.ietf.org/doc/html/rfc7742\" class=\"external\" rel=\" noopener\">RFC 7742: Требования к обработке видео и кодекам WebRTC</a>. Стоит отметить, что RFC охватывает множество требований, связанных с видео, включая цветовые пространства (sRGB является предпочтительным, но не обязательным цветовым пространством по умолчанию), рекомендации по функциям обработки веб-камеры (автоматическая фокусировка, автоматический баланс белого, автоматический уровень освещения) и так далее.</p>\n\n<div class=\"note notecard\" id=\"sect2\">\n<p><strong> Предупреждение :</strong>  Эти требования относятся к веб-браузерам и другим продуктам, полностью совместимым с WebRTC. Продукты, не относящиеся к WebRTC, которые в некоторой степени могут взаимодействовать с WebRTC, могут поддерживать или не поддерживать эти кодеки, хотя это рекомендуется в технических документах</p>\n</div>\n\n<p>В дополнение к обязательным кодекам, некоторые браузеры также поддерживают дополнительные кодеки. Они перечислены в таблице ниже</p>\n\n<table class=\"standard-table\">\n <caption>\n <p>Другие видео кодеки</p>\n </caption>\n <thead>\n  <tr>\n   <th scope=\"row\">Наименование кодека</th>\n   <th scope=\"col\">Профили</th>\n   <th scope=\"col\">Совместимость с браузерами</th>\n  </tr>\n </thead>\n <tbody>\n  <tr>\n   <th scope=\"row\">VP9</th>\n   <td>—</td>\n   <td>Chrome (48+), Firefox</td>\n  </tr>\n </tbody>\n</table>"}},{"type":"prose","value":{"id":"кодек_vp8","title":"Кодек VP8","isH3":true,"content":"<p>VP8, который мы  <a href=\"/en-US/docs/Web/Media/Formats/Video_codecs#vp8\">описывали в общем</a>  в основной статье  <a href=\"/en-US/docs/Web/Media/Formats/Video_codecs\">руководства по сетевым видеокодекам</a>, имеет специфические требования, которым необходимо следовать при кодировании видео треков WebRTC соединения.</p>\n\n<p>По умолчанию, VP8 будет использовать квадратные пиксели (то есть, пиксели с соотношением сторон 1: 1).</p>\n\n<h4 id=\"дополнительное_замечание\">Дополнительное замечание</h4>\n\n<p>Формат полезной нагрузки сети для совместного использования VP8 с помощью <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Glossary/RTP\">RTP <small>(en-US)</small></a> (например, при использовании WebRTC) описано в <a href=\"https://datatracker.ietf.org/doc/html/rfc7741\" class=\"external\" rel=\" noopener\">RFC 7741: RTP Payload Format for VP8 Video</a>.</p>"}},{"type":"prose","value":{"id":"кодек_avc_h.264","title":"<a id=\"AVC\"> Кодек AVC / H.264</a>","isH3":true,"content":"<p>Поддержка профиля AVC Constrained Baseline (<code>CB</code>) требуется во всех полностью совместимых реализациях WebRTC. <code>CB</code> является подмножеством основного профиля и специально разработан для приложений с низкой сложностью и малой задержкой, таких как мобильное видео и видеоконференции, а также для платформ с более низкими возможностями обработки видео..</p>\n\n<p>Наш <a href=\"/en-US/docs/Web/Media/Formats/Video_codecs#avc_(h.264)\">обзор  AVC</a> и его функциональности найдёте в основном руководстве по видеокодекам.</p>\n\n<h4 id=\"требования_поддержки_специальных_параметров\">Требования поддержки специальных параметров</h4>\n\n<p>AVC предлагает широкий спектр параметров для управления дополнительными значениями. Чтобы повысить надёжность совместного использования мультимедиа WebRTC на нескольких платформах и в разных браузерах, необходимо, чтобы конечные точки WebRTC, поддерживающие AVC, обрабатывали определённые параметры определённым образом. Иногда это просто означает, что параметр должен (или не должен) поддерживаться. Иногда это означает, что необходимо указать конкретное значение для параметра или разрешить определённый набор значений. А иногда требования более сложны.</p>\n\n<h5 id=\"полезные_но_необязательные_параметры\">Полезные, но необязательные параметры</h5>\n\n<p>Эти параметры не обязаны поддерживаться конечной точкой WebRTC, и их использование также не обязательно. Их использование, некоторым образом, может улучшить пользовательское впечатление , но к использованию не обязательно. Некоторые из них довольно сложны в использовании.</p>\n\n<dl>\n <dt id=\"max-br\"><code>max-br</code></dt>\n <dd>Если параметр определён и поддерживается , он определяет максимальную скорость передачи видеоданных в  единицах 1,000 bps (бит в секунду) для VCL и 1,200 bps (бит в секунду) для NAL. Подробности на  <a href=\"https://tools.ietf.org/html/rfc6184#page-47\" class=\"external\" rel=\" noopener\">странице 47 спецификации RFC 6184</a>.</dd>\n <dt id=\"max-cpb\"><code>max-cpb</code></dt>\n <dd>Если параметр определён и поддерживается, он определяет максимальный размер буфера, кодируемых данных. Немного усложнённый параметр, размер которого может варьироваться. Смотрим на <a href=\"https://tools.ietf.org/html/rfc6184#page-45\" class=\"external\" rel=\" noopener\">страницу  45 спецификации RFC 6184</a> о подробностях.</dd>\n <dt id=\"max-dpb\"><code>max-dpb</code></dt>\n <dd>Определяет максимальный размер буфера  декодированных данных, выраженных в единицах  8/3 макроблоков. Подробности в спецификации <a href=\"https://tools.ietf.org/html/rfc6184#page-46\" class=\"external\" rel=\" noopener\">RFC 6184, страница 46</a>.</dd>\n <dt id=\"max-fs\"><code>max-fs</code></dt>\n <dd>Определяет максимальный размер видеокадра, выраженный в количестве макроблоков.</dd>\n <dt id=\"max-mbps\"><code>max-mbps</code></dt>\n <dd>Определяет максимальную скорость обработки макроблоков в секунду. Значение является целым числом..</dd>\n <dt id=\"max-smbps\"><code>max-smbps</code></dt>\n <dd>Определяет максимальную скорость обработки статических макроблоков в секунду (используя гипотетическое предположение, что все макроблоки являются статическими макроблоками).</dd>\n</dl>\n\n<h5 id=\"параметры_с_определёнными_требованиями\">Параметры с определёнными требованиями</h5>\n\n<p>Эти параметры являются необязательными, но имеют специальные требования при их использовании.</p>\n\n<dl>\n <dt id=\"packetization-mode\"><code>packetization-mode</code></dt>\n <dd>Все конечные точки обязательны для поддержания режима  1 (не чередующийся режим). Поддержка иных режимов пакетизации не обязательна, и сам параметр не обязателен для определения.</dd>\n <dt id=\"sprop-parameter-sets\"><code>sprop-parameter-sets</code></dt>\n <dd>Информация о последовательности и изображении для AVC может передаваться как внутри канала, так и вне его. При использовании AVC  с WebRTC, информация должна передаваться в канале, поэтому значение параметра не включается в SDP.</dd>\n</dl>\n\n<h5 id=\"обязательные_для_определения_параметры\">Обязательные для определения параметры</h5>\n\n<p>Эти параметры обязательны к определению, при использовании AVC в WebRTC соединении.</p>\n\n<ul>\n <li><code>profile-level-id</code></li>\n</ul>\n\n<p>Все реализации WebRTC обязательно определяют и передают  в своих  SDP, определяя суб  - профиль используемого кодека (подмножество инструментов кодирования, которые могут быть использованы для генерации потока или того, что поддерживает получатель) и уровня потока по умолчанию, или уровня поддержки получателя.</p>\n\n<p> Конкретное значение разработчику не известно, используется одно на всех, и устанавливается  WebRTC. Начиная с <a href=\"https://datatracker.ietf.org/doc/html/rfc6184\" class=\"external\" rel=\" noopener\">RFC 6184</a> (\"RTP Payload Format for H.264 Video\"), наличие <code>profile-level-id</code> необязательно.</p>\n\n<h4 id=\"прочие_требования\">Прочие требования</h4>\n\n<p>В целях поддержки переключения между книжной и альбомной ориентацией можно использовать два метода. Первый - это расширение заголовка видеоориентации (CVO) для протокола RTP. Однако, если это не сигнализируется как поддерживаемое в SDP, тогда рекомендуется, чтобы браузеры поддерживали сообщения Display Orientation SEI, хотя и не обязательно</p>\n\n<p>Если не указано иное, соотношение сторон пикселя составляет 1: 1, что указывает на то, что пиксели являются квадратными</p>\n\n<h4 id=\"прочие_замечания\">Прочие замечания</h4>\n\n<p>Формат полезной нагрузки, используемый для AVC в WebRTC, описан в <a href=\"https://datatracker.ietf.org/doc/html/rfc6184\" class=\"external\" rel=\" noopener\">RFC 6184: RTP Payload Format for H.264 Video</a>. Реализации AVC для WebRTC необходимы для поддержки специальных сообщений SEI :  «заполнитель нагрузки» и «полное замораживание кадра», они используются для плавного переключения между несколькими входными потоками.</p>","titleAsText":" Кодек AVC / H.264"}},{"type":"prose","value":{"id":"поддерживаемые_аудио_кодеки","title":"Поддерживаемые аудио кодеки","isH3":false,"content":"<p>Спецификация  <a href=\"https://datatracker.ietf.org/doc/html/rfc7874\" class=\"external\" rel=\" noopener\">RFC 7874</a> предписывает всем браузерам поддержку аудиокодеков, перечисленных в таблице :</p>\n\n<table class=\"standard-table\">\n <caption>\n <p>Обязательные аудиокодеки</p>\n </caption>\n <thead>\n  <tr>\n   <th scope=\"row\">Наименование кодека</th>\n   <th scope=\"col\">Совместимость с браузерами</th>\n  </tr>\n </thead>\n <tbody>\n  <tr>\n   <th scope=\"row\"><a href=\"/en-US/docs/Web/Media/Formats/Audio_codecs#opus\">Opus</a></th>\n   <td>Edge, Firefox, Safari</td>\n  </tr>\n  <tr>\n   <th scope=\"row\"><a href=\"/en-US/docs/Web/Media/Formats/Audio_codecs#g.711\">G.711 PCM (A-law)</a></th>\n   <td>Chrome, Firefox, Safari</td>\n  </tr>\n  <tr>\n   <th scope=\"row\"><a href=\"/en-US/docs/Web/Media/Formats/Audio_codecs#g.711\">G.711 PCM (µ-law)</a></th>\n   <td>Chrome, Firefox, Safari</td>\n  </tr>\n </tbody>\n</table>\n\n<p>Более подробное обсуждение использования кодеков в WebRTC следует ниже.</p>\n\n<p>Спецификация  <a href=\"https://datatracker.ietf.org/doc/html/rfc7874\" class=\"external\" rel=\" noopener\">RFC 7874</a> определяет список аудио кодеков, которые браузеры, реализующие WebRTC обязаны поддерживать; так же предоставляются рекомендации и требования для специфических аудио функциональностей, таких как удаление эхоподавление, шумоподавление и выравнивание звука.</p>\n\n<div class=\"note notecard\" id=\"sect3\">\n<p><strong> Примечание :</strong>  Список выше указывает на минимальный набор кодеков, который требуется реализовать браузерам (браузерному окружению), поддерживающих  WebRTC. Такие браузеры могут поддерживать также и другие кодеки, что подвергает риску межплатформенной совместимости при использовании этих кодеков без проверки гарантированной работоспособности в часто используемых браузерах.</p>\n</div>\n\n<p>В дополнение к обязательным видеокодекам, некоторые браузеры поддерживают дополнительные кодеки, перечисленные в таблице:</p>\n\n<table class=\"standard-table\">\n <caption>Дополнительные аудио кодеки</caption>\n <thead>\n  <tr>\n   <th scope=\"row\">Наименование кодека</th>\n   <th scope=\"col\">Совместимость с браузерами</th>\n  </tr>\n </thead>\n <tbody>\n  <tr>\n   <th scope=\"row\">G.722</th>\n   <td>Chrome, Firefox, Safari</td>\n  </tr>\n  <tr>\n   <th scope=\"row\">iLBC<sup><a href=\"#other-audio-foot-1\">[1]</a></sup></th>\n   <td>Chrome, Safari</td>\n  </tr>\n  <tr>\n   <th scope=\"row\">iSAC<sup><a href=\"#other-audio-foot-2\">[2]</a></sup></th>\n   <td>Chrome, Safari</td>\n  </tr>\n </tbody>\n</table>\n\n<p><a id=\"other-audio-foot-1\" name=\"other-audio-foot-1\">[1]</a> <strong><a title=\"Internet Low Bitrate Codec\" href=\"https://ru.wikipedia.org/wiki/Internet_Low_Bitrate_Codec\" class=\"external\" rel=\" noopener\">Internet Low Bitrate Codec</a></strong> (<strong>iLBC</strong>)  - узкополосный кодек с открытым кодом, разработанный Global IP Solutions и Google, спроектированный для потокового голосового аудио. Google и другие разработчики браузеров адоптировали его для работы с  WebRTC, но он доступен не во всех браузерах, и не является обязательно поддерживаемым кодеком.</p>\n\n<p><a id=\"other-audio-foot-2\" name=\"other-audio-foot-2\">[2]</a> The <strong><a title=\"Internet Speech Audio Codec\" href=\"https://ru.wikipedia.org/wiki/Internet_Speech_Audio_Codec\" class=\"external\" rel=\" noopener\">Internet Speech Audio Codec</a></strong> (<strong>iSAC</strong>)  -  другой кодек, разработанный Global IP Solutions, теперь принадлежащий Google, открывший его код. Используется Google Talk, QQ, и другими клиентами быстрых сообщений, специально спроектированный для голосовых сообщений, упакованных в поток RTP. Пока не является обязательной поддерживаемым кодеком. Поддерживается Safari и Chrome. Не поддерживается Firefox и Edge.</p>\n\n<p><strong><a title=\"Comfort noise\" href=\"https://ru.wikipedia.org/wiki/Comfort_noise\" class=\"external\" rel=\" noopener\">Comfort noise</a></strong> (<strong>CN</strong>) - комфортный шум. Является формой искусственного фонового шума, использующегося для заполнения пробелов в передаче, вместо использования полной тишины. Помогает избежать вибрационных эффектов, возникающих, когда голосовая активация или подобная функциональность  вызывает временное приостановление потока, известная как прерывистая передача (Discontinuous Transmission (DTX)). В спецификации <a href=\"https://datatracker.ietf.org/doc/html/rfc3389\" class=\"external\" rel=\" noopener\">RFC 3389</a>, метод предлагает использовать определённое заполнение в беззвучных промежутках.</p>\n\n<p>Комфортный шум используется с G.711 и может потенциально использоваться с другими кодеками, которые не имеют встроенной функции CN. Кодек Opus, к примеру, имеет собственную реализацию CN, поэтому использование RFC 3389 CN с кодеком Opus не рекомендуется.</p>\n\n<p>Отправитель звука никогда не должен использовать прерывистую передачу или комфортный шум.</p>"}},{"type":"prose","value":{"id":"кодек_opus","title":"Кодек Opus","isH3":true,"content":"<p>Формат Opus, определённый в <a href=\"https://datatracker.ietf.org/doc/html/rfc6716\" class=\"external\" rel=\" noopener\">RFC 6716</a>), является основным форматом для аудио в WebRTC. Формат полезной нагрузки RTP для Opus находится в <a href=\"https://datatracker.ietf.org/doc/html/rfc7587\" class=\"external\" rel=\" noopener\">RFC 7587</a>. Можете найти подробную информацию об Opus и его возможностях, а также о том, как другие API могут поддерживать Opus, в <a href=\"/en-US/docs/Web/Media/Formats/Audio_codecs#opus\">соответствующей секции</a>  нашего <a href=\"/en-US/docs/Web/Media/Formats/Audio_codecs\">руководства по аудиокодекам, использующимся в web</a>.</p>\n\n<p>Должны поддерживаться оба режима : речь и обычное аудио. Масштабируемость и гибкость Opus полезна при работе с аудио, имеющим различную степень сложности. Поддержка внутриполосных стереосигналов позволяет поддерживать стереозвук без усложнения процесса демультиплексирования.</p>\n\n<p>Весь диапазон битрейтов, поддерживаемых Opus (от 6 кбит / с до 510 кбит / с), поддерживается в WebRTC, причём скорость битов можно динамически изменять. Более высокие битовые скорости передачи обычно улучшают качество..</p>\n\n<h4 id=\"рекомендации_по_скорости_передачи_данных_bit_rate\">Рекомендации по скорости передачи данных (bit rate)</h4>\n\n<p>При условии размер кадра в 20 миллисекунд, в следующей таблице приведены рекомендуемые скорости передачи данных для различных типов носителей.</p>\n\n<table class=\"standard-table\">\n <thead>\n  <tr>\n   <th scope=\"col\">Медиа носитель</th>\n   <th scope=\"col\">Рекомендованный диапазон bit rate</th>\n  </tr>\n </thead>\n <tbody>\n  <tr>\n   <td>Узкополосная речь (NB)</td>\n   <td>8 - 12 kbps</td>\n  </tr>\n  <tr>\n   <td>Широкополосная речь (WB)</td>\n   <td>16 - 20 kbps</td>\n  </tr>\n  <tr>\n   <td>Полноценная речь (FB)</td>\n   <td>28 - 40 kbps</td>\n  </tr>\n  <tr>\n   <td>Монофоническая музыка (FB mono)</td>\n   <td>48 - 64 kbps</td>\n  </tr>\n  <tr>\n   <td>Стереофоническая музыка (FB stereo)</td>\n   <td>64 - 128 kbps</td>\n  </tr>\n </tbody>\n</table>\n\n<p>Скорость передачи может быть скорректирована в любое время. Во избежание перегрузки сети средняя скорость передачи звука не должна превышать доступную пропускную способность сети (за вычетом любых других известных или ожидаемых дополнительных требований к пропускной способности).</p>"}},{"type":"prose","value":{"id":"кодек_g.711","title":"Кодек G.711","isH3":true,"content":"<p>G.711 определяет формат для звука с импульсной кодовой модуляцией (PCM) в виде серии 8-битных целочисленных выборок, взятых с частотой дискретизации 8000 Гц, что даёт скорость передачи данных 64 кбит / с. И в <a title=\"µ-law\" href=\"https://ru.wikipedia.org/wiki/M-law\" class=\"external\" rel=\" noopener\">µ-law</a> , и в <a title=\"A-law\" href=\"https://ru.wikipedia.org/wiki/A-law\" class=\"external\" rel=\" noopener\">A-law</a> разрешена кодировка.</p>\n\n<p>G.711 <a href=\"https://www.itu.int/rec/T-REC-G.711-198811-I/en\" class=\"external\" rel=\" noopener\">определяется ITU</a>  , а его формат нагрузки в <a href=\"https://datatracker.ietf.org/doc/html/rfc3551\" class=\"external\" rel=\" noopener\">RFC 3551: 4.5.14</a>.</p>\n\n<p>WebRTC требует, чтобы G.711 использовал 8-битные выборки со стандартной скоростью 64 кбит / с, хотя G.711 поддерживает некоторые другие варианты. WebRTC не предписывает использовать ни G.711.0 (сжатие без потерь), G.711.1 (широкополосная возможность), ни какие-либо другие расширения стандарта G.711</p>\n\n<p>Из-за низкой частоты дискретизации и размера выборки качество звука G.711 в целом считается низким по современным стандартам, хотя оно примерно эквивалентно звучанию стационарного телефона. Обычно он используется в качестве наименьшего общего знаменателя, чтобы гарантировать, что браузеры могут установить аудио-соединение независимо от платформ и браузеров, или как запасной вариант в целом.</p>"}},{"type":"prose","value":{"id":"определение_и_конфигурирование_кодеков","title":"Определение и конфигурирование кодеков","isH3":false,"content":""}},{"type":"prose","value":{"id":"получение_поддерживаемых_кодеков","title":"Получение поддерживаемых кодеков","isH3":true,"content":"<p>Поскольку браузер и платформа могут иметь различную доступность среди потенциальных кодеков - и могут иметь несколько профилей или уровней, поддерживаемых для данного кодека - первый шаг при настройке кодеков для объекта типа <a href=\"/ru/docs/Web/API/RTCPeerConnection\"><code>RTCPeerConnection</code></a>  - получить список доступных кодеков. Для этого сначала нужно инициализировать объект соединения, который получит список.</p>\n\n<p>Существует два способа для выполнения этого. Наиболее эффективный - использовать статический метод <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/RTCRtpSender/getCapabilities\"><code>RTCRtpSender.getCapabilities()</code> <small>(en-US)</small></a> (или эквивалентный для принимающего узла <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/RTCRtpReceiver/getCapabilities\"><code>RTCRtpReceiver.getCapabilities()</code> <small>(en-US)</small></a> ), определяющий тип медиаданных в параметре. К примеру, для определения поддерживаемых кодеков видео применяем :</p>\n\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>codecList <span class=\"token operator\">=</span> RTCRtpSender<span class=\"token punctuation\">.</span><span class=\"token function\">getCapabilities</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"video\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>codecs<span class=\"token punctuation\">;</span></code></pre></div>\n\n<p>Теперь массив <code>codecList</code> содержит объекты <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/RTCRtpCodecCapability\"><code>RTCRtpCodecCapability</code> <small>(en-US)</small></a> , каждый содержащий описываемую конфигурацию кодека. Также в списке будут присутствовать записи для повторной передачи (RTX), избыточного кодирования (RED) и прямого исправления ошибок (FEC).</p>\n\n<p>Если соединение находится в процессе запуска, используем событие <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/RTCPeerConnection/icegatheringstatechange_event\"><code>icegatheringstatechange</code> <small>(en-US)</small></a>  для наблюдения за изменением статуса сборки кандидатов  <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Glossary/ICE\">ICE <small>(en-US)</small></a> и при завершении, запрашиваем список кодеков.</p>\n\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">let</span> codecList <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n\npeerConnection<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"icegatheringstatechange\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>peerConnection<span class=\"token punctuation\">.</span>iceGatheringState <span class=\"token operator\">===</span> <span class=\"token string\">\"complete\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> senders <span class=\"token operator\">=</span> peerConnection<span class=\"token punctuation\">.</span><span class=\"token function\">getSenders</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    senders<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">sender</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>sender<span class=\"token punctuation\">.</span>track<span class=\"token punctuation\">.</span>kind <span class=\"token operator\">===</span> <span class=\"token string\">\"video\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        codecList <span class=\"token operator\">=</span> sender<span class=\"token punctuation\">.</span><span class=\"token function\">getParameters</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>codecs<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  codecList <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n\n<p>Обработчик события <code>icegatheringstatechange</code> установлен; в нем мы отслеживаем тип события <code>complete</code> завершения сборки кандидатов ICE, указывающее что сборка кандидатов завершена. Метод <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/RTCPeerConnection/getSenders\"><code>RTCPeerConnection.getSenders()</code> <small>(en-US)</small></a> вызывается для получения списка всех объектов <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/RTCRtpSender\"><code>RTCRtpSender</code> <small>(en-US)</small></a> , использующихся в соединении.</p>\n\n<p>Имея это в виду, мы просматриваем список отправителей и ищем первого, чей <a href=\"/ru/docs/Web/API/MediaStreamTrack\"><code>MediaStreamTrack</code></a> указывает, что тип <a class=\"page-not-created\" title=\"Документация об этом ещё не написана; пожалуйста, поспособствуйте её написанию!\"><code>track</code></a> в своём свойстве  <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/MediaStreamTrack/kind\"><code>kind</code> <small>(en-US)</small></a> содержит значение <code>video</code>, указывающее, что данные являются видеоданными. Затем вызывается метод отправителя  <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/RTCRtpSender/getParameters\"><code>getParameters()</code> <small>(en-US)</small></a> , и значением свойства  <a class=\"page-not-created\" title=\"Документация об этом ещё не написана; пожалуйста, поспособствуйте её написанию!\"><code>codecs</code></a> возвращаемого объекта <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/RTCRtpSendParameters\"><code>RTCRtpSendParameters</code> <small>(en-US)</small></a> , инициализируем переменную <code>codecList</code>.</p>\n\n<p>Если видеотрек не найден, устанавливаем  <code>codecList</code> в <code>null</code>.</p>\n\n<p>При возврате, <code>codecList </code>либо  <code>null</code> , указывающий на то, что видеодорожки не были найдены, либо это массив <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/RTCRtpCodecParameters\"><code>RTCRtpCodecParameters</code> <small>(en-US)</small></a> объектов, каждый из которых описывает одну разрешённую конфигурацию кодека. Особое значение в этих объектах имеет свойство <a class=\"page-not-created\" title=\"Документация об этом ещё не написана; пожалуйста, поспособствуйте её написанию!\"><code>payloadType</code></a>, которое является однобайтовым значением, однозначно идентифицирующим описанную конфигурацию.</p>\n\n<div class=\"note notecard\" id=\"sect4\">\n<p><strong>Примечание :</strong>  Два метода получения списков кодеков, показанные здесь, используют разные типы вывода в своих списках кодеков. Помните об этом при использовании результатов</p>\n</div>"}},{"type":"prose","value":{"id":"настройка_списка_кодеков","title":"Настройка списка кодеков","isH3":true,"content":"<p>Как только получен список доступных кодеков, его можно изменить и передать этот пересмотренный список методу  <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/RTCRtpTransceiver/setCodecPreferences\"><code>RTCRtpTransceiver.setCodecPreferences()</code> <small>(en-US)</small></a> для перенастройки списка, используемых кодеков. Это изменяет порядок предпочтений кодеков, позволяя указать WebRTC на более предпочтительный кодек среди прочих .</p>\n\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">changeVideoCodec</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">mimeType</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> transceivers <span class=\"token operator\">=</span> peerConnection<span class=\"token punctuation\">.</span><span class=\"token function\">getTransceivers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  transceivers<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">transceiver</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> kind <span class=\"token operator\">=</span> transceiver<span class=\"token punctuation\">.</span>sender<span class=\"token punctuation\">.</span>track<span class=\"token punctuation\">.</span>kind<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> sendCodecs <span class=\"token operator\">=</span> RTCRtpSender<span class=\"token punctuation\">.</span><span class=\"token function\">getCapabilities</span><span class=\"token punctuation\">(</span>kind<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>codecs<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">let</span> recvCodecs <span class=\"token operator\">=</span> RTCRtpReceiver<span class=\"token punctuation\">.</span><span class=\"token function\">getCapabilities</span><span class=\"token punctuation\">(</span>kind<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>codecs<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>kind <span class=\"token operator\">===</span> <span class=\"token string\">\"video\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      sendCodecs <span class=\"token operator\">=</span> <span class=\"token function\">preferCodec</span><span class=\"token punctuation\">(</span>mimeType<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      recvCodecs <span class=\"token operator\">=</span> <span class=\"token function\">preferCodec</span><span class=\"token punctuation\">(</span>mimeType<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      transceiver<span class=\"token punctuation\">.</span><span class=\"token function\">setCodecPreferences</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>sendCodecs<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>recvCodecs<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  peerConnection<span class=\"token punctuation\">.</span><span class=\"token function\">onnegotiationneeded</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n\n<p>В этом примере функция  <code>changeVideoCodec()</code> принимает в параметр MIME тип предпочтительного к использованию кодека. Код начинается с получения списка объектов приёмо-передатчиков объекта соединения <a href=\"/ru/docs/Web/API/RTCPeerConnection\"><code>RTCPeerConnection</code></a>.</p>\n\n<p>Затем, для каждого приёмо-передатчика анализируем тип медиа свойства <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/RTCRtpSender\"><code>RTCRtpSender</code> <small>(en-US)</small></a>'s track's <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/MediaStreamTrack/kind\"><code>kind</code> <small>(en-US)</small></a>. Так же получаем список поддерживаемых браузером кодеков стороны отправки и получения  <code>video</code>, используя статический метод <code>getCapabilities()</code> обоих классов <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/RTCRtpSender\"><code>RTCRtpSender</code> <small>(en-US)</small></a> и <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/RTCRtpReceiver\"><code>RTCRtpReceiver</code> <small>(en-US)</small></a>.</p>\n\n<p>Если тип медиаданных является типом  <code>video</code>, вызываем метод <code>preferCodec()</code> для обоих взаимодействующих сторон списков кодеков, который реорганизует список кодеков необходимым образом  (смотри ниже).</p>\n\n<p>И наконец, вызываем метод <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/RTCRtpTransceiver/setCodecPreferences\"><code>setCodecPreferences()</code> <small>(en-US)</small></a> объекта  <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/RTCRtpTransceiver\"><code>RTCRtpTransceiver</code> <small>(en-US)</small></a> для определения того, что использование кодеков обеих сторон разрешено, в указанном порядке.</p>\n\n<p>Это выполняется для каждого объекта приёмо-передатчика объекта соединения  <code>RTCPeerConnection</code>; как только все приёмо-передатчики обновили списки предпочитаемых кодеков, вызывается обработчик события  <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/RTCPeerConnection/negotiationneeded_event\"><code>onnegotiationneeded</code> <small>(en-US)</small></a> , который создаёт новый объект предложения, обновляет объект локального описания сессии, отправляет предложение удалённому узлу, и так далее, запуская согласование соединения .</p>\n\n<p>Функция <code>preferCodec()</code> вызываемая приведённым выше кодом, действует так, чтобы переместить указанный кодек в верхнюю часть списка (для приоритета во время согласования):</p>\n\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">preferCodec</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">codecs<span class=\"token punctuation\">,</span> mimeType</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> otherCodecs <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> sortedCodecs <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> count <span class=\"token operator\">=</span> codecs<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n\n  codecs<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">codec</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>codec<span class=\"token punctuation\">.</span>mimeType <span class=\"token operator\">===</span> mimeType<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      sortedCodecs<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>codec<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      otherCodecs<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>codec<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> sortedCodecs<span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span>otherCodecs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n\n<p>Этот код просто разбивает список кодеков на два массива: один, содержащий кодеки, чей  MIME тип совпадает с тем, который указан в параметре <code>mimeType</code> , другой же содержит остальные кодеки. Как только список разделён, они объединяются вместе с записями, соответствующими заданному <code>mimeType</code> следующими вначале, за которыми следуют остальные записи кодеков. Затем этот список возвращается вызывающему коду.</p>"}},{"type":"prose","value":{"id":"кодеки_по_умолчанию","title":"Кодеки по умолчанию","isH3":false,"content":"<p>Если не определённо иное, кодеки по умолчанию (предпочтительные кодеки), запрашиваемые браузерными реализациями  WebRTC, перечислены ниже</p>\n\n<table class=\"standard-table\">\n <caption>\n <p>Предпочтительные для  WebRTC кодеки основных веб-браузеров</p>\n </caption>\n <thead>\n  <tr>\n   <th scope=\"col\"></th>\n   <th scope=\"col\">Audio</th>\n   <th scope=\"col\">Video</th>\n  </tr>\n </thead>\n <tbody>\n  <tr>\n   <th scope=\"row\">Chrome</th>\n   <td></td>\n   <td></td>\n  </tr>\n  <tr>\n   <th scope=\"row\">Edge</th>\n   <td></td>\n   <td></td>\n  </tr>\n  <tr>\n   <th scope=\"row\">Firefox</th>\n   <td></td>\n   <td>VP9 (Firefox 46 and later)<br>\n    VP8</td>\n  </tr>\n  <tr>\n   <th scope=\"row\">Opera</th>\n   <td></td>\n   <td></td>\n  </tr>\n  <tr>\n   <th scope=\"row\">Safari</th>\n   <td></td>\n   <td></td>\n  </tr>\n </tbody>\n</table>"}},{"type":"prose","value":{"id":"правильный_выбор_кодеков","title":"Правильный выбор кодеков","isH3":false,"content":"<p>Перед выбором кодека, который не является обязательным (VP8 или AVC для видео и  Opus или PCM для аудио), следует серьёзно рассмотреть потенциальные недостатки: в особенности, если предполагается, что эти кодеки не широко доступны на всех устройствах, поддерживающих WebRTC.</p>\n\n<p>Если вы предпочитаете кодек, отличный от обязательных, вы должны по крайней мере разрешить откат к одному из обязательных кодеков, если поддержка для кодека, который вы предпочитаете, окажется недоступна.</p>"}},{"type":"prose","value":{"id":"аудио","title":"Аудио","isH3":true,"content":"<p>В целом, если кодек доступен и звук, который вы хотите отправить, имеет частоту дискретизации более 8 кГц, вам следует настоятельно рекомендовать использовать Opus в качестве основного кодека. Для голосовых соединений в стеснённой среде использование G.711 с частотой дискретизации 8 кГц может обеспечить приемлемое качество для разговора, но обычно вы будете использовать G.711 в качестве запасного варианта, поскольку есть другие более эффективные варианты, чей звук лучше, такие как Опус в своём узкополосном режиме .</p>"}},{"type":"prose","value":{"id":"видео","title":"Видео","isH3":true,"content":"<p>При выборе поддерживаемого видеокодека (или набора кодеков) необходимо учитывать ряд факторов</p>\n\n<h4 id=\"условия_лицензирования\">Условия лицензирования</h4>\n\n<p>Прежде чем выбрать видеокодек, убедитесь, что вы знаете о любых лицензионных требованиях к выбранному вами кодеку; можете найти информацию о возможных проблемах лицензирования в нашем основном <a href=\"/en-US/docs/Web/Media/Formats/Video_codecs\">руководстве по видеокодекам, используемым в  web</a>. Из двух обязательных кодеков для видео - VP8 и AVC / H.264 - только VP8 полностью свободен от лицензионных требований. Если выбираете AVC, убедитесь, что вы знаете о любых возможных сборах, которые вам, возможно, придётся заплатить; владельцы патентов обычно говорят, что большинству типичных разработчиков веб-сайтов не нужно беспокоиться об оплате лицензионных сборов, которые, как правило, больше ориентированы на разработчиков программного обеспечения для кодирования и декодирования.</p>\n\n<div class=\"warning notecard\" id=\"sect5\">\n<p><strong>Внимание :</strong>  Информация здесь не является юридической консультацией! Обязательно убедитесь в возможности ответственности, прежде чем принимать какие-либо окончательные решения, если существует вероятность возникновения проблем с лицензированием.</p>\n</div>\n\n<h4 id=\"энергопотребление_и_срок_службы_батареи\">Энергопотребление и срок службы батареи</h4>\n\n<p>Ещё один фактор, который следует учитывать, особенно на мобильных платформах, - это влияние кодека на время автономной работы. Если кодек обрабатывается аппаратно на данной платформе, он, вероятно, позволит значительно увеличить срок службы батареи и уменьшить выработку тепла.</p>\n\n<p>Например, Safari для iOS и iPadOS представила WebRTC с AVC в качестве единственного поддерживаемого видеокодека. Преимущество AVC на iOS и iPadOS заключается в возможности кодирования и декодирования на аппаратном уровне.Safari 12.1 представил поддержку VP8 в IRC, что улучшает взаимодействие, но за дополнительную плату - VP8 не имеет аппаратной поддержки на устройствах iOS, поэтому его использование приводит к увеличению нагрузки на процессор и сокращению срока службы батареи.</p>\n\n<h4 id=\"производительность\">Производительность</h4>\n\n<p>К счастью, VP8 и AVC работают одинаково с точки зрения конечного пользователя и одинаково адекватны для использования в видеоконференцсвязи и других решениях WebRTC. Окончательное решение остаётся за разработчиком. Какой бы вариант вы ни выбрали, обязательно прочитайте информацию, представленную в этой статье, о любых конкретных проблемах конфигурации, с которыми вам, возможно, придётся столкнуться для этого кодека.</p>\n\n<p>Имейте в виду, что выбор кодека, которого нет в списке обязательных кодеков, может привести к риску выбора кодека, который не поддерживается браузером, который предпочитают ваши пользователи. Прочтите <a href=\"/en-US/docs/Web/Media/Formats/Support_issues\">Решение проблем медиаподдержки в веб контенте</a> , чтобы узнать больше о том, как предлагать поддержку предпочитаемых кодеков, но при этом использовать браузеры, которые не поддерживают этот кодек.</p>"}},{"type":"prose","value":{"id":"последствия_для_безопасности","title":"Последствия для безопасности","isH3":false,"content":"<p>При выборе и настройке кодеков возникают интересные потенциальные проблемы безопасности. Видео WebRTC защищено с помощью Datagram Transport Layer Security (<a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Glossary/DTLS\">DTLS <small>(en-US)</small></a>), но для мотивированной стороны теоретически возможно вывести величину изменения, которое происходит от кадра к кадру при использовании кодеков с переменной скоростью передачи (VBR), путём мониторинга скорости потока  и её изменения во времени.Это может потенциально позволить злоумышленнику сделать вывод о содержании потока, учитывая приливы и отливы скорости передачи.</p>\n\n<p>Подробнее о безопасности при использовании AVC в WebRTC см.  <a href=\"https://datatracker.ietf.org/doc/html/rfc6184#section-9\" class=\"external\" rel=\" noopener\">RFC 6184, секция 9: RTP Payload Format for H.264 Video: Security Considerations</a>.</p>"}},{"type":"prose","value":{"id":"смотрите_также","title":"Смотрите также :","isH3":false,"content":"<ul>\n <li><a href=\"/en-US/docs/Web/API/WebRTC_API\">WebRTC API</a></li>\n <li><a href=\"/en-US/docs/Web/API/WebRTC_API/Protocols\">Введение в протоколы WebRTC</a></li>\n <li><a href=\"/en-US/docs/Web/API/WebRTC_API/Connectivity\">WebRTC соединение </a></li>\n <li><a href=\"/en-US/docs/Web/Media/Formats/Video_codecs\">Руководство по видеокодекам, использующимся в web</a></li>\n <li><a href=\"/en-US/docs/Web/Media/Formats/Audio_codecs\">Руководство по аудиокодекам, использующимся в web</a></li>\n <li><a href=\"/en-US/docs/Web/Media/Formats/Video_concepts\">Концепции цифрового видео</a></li>\n <li><a href=\"/en-US/docs/Web/Media/Formats/Audio_concepts\">Концепции цифрового аудио</a></li>\n</ul>"}}],"toc":[{"text":"Безконтейнерные медиаданные","id":"безконтейнерные_медиаданные"},{"text":"Общие требования к кодекам","id":"общие_требования_к_кодекам"},{"text":"Поддерживаемые видео кодеки","id":"поддерживаемые_видео_кодеки"},{"text":"Поддерживаемые аудио кодеки","id":"поддерживаемые_аудио_кодеки"},{"text":"Определение и конфигурирование кодеков","id":"определение_и_конфигурирование_кодеков"},{"text":"Кодеки по умолчанию","id":"кодеки_по_умолчанию"},{"text":"Правильный выбор кодеков","id":"правильный_выбор_кодеков"},{"text":"Последствия для безопасности","id":"последствия_для_безопасности"},{"text":"Смотрите также :","id":"смотрите_также"}],"summary":"WebRTC.","popularity":0.0002,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Codecs used by WebRTC","locale":"en-US","native":"English (US)"}],"source":{"folder":"ru/web/media/formats/webrtc_codecs","github_url":"https://github.com/mdn/translated-content/blob/main/files/ru/web/media/formats/webrtc_codecs/index.html","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.html"},"parents":[{"uri":"/ru/docs/Web","title":"Веб-технологии для разработчиков"},{"uri":"/ru/docs/Web/Media","title":"Web media technologies"},{"uri":"/ru/docs/Web/Media/Formats","title":"Media type and format guide: image, audio, and video content"},{"uri":"/ru/docs/Web/Media/Formats/WebRTC_codecs","title":"Кодеки, используемые WebRTC"}],"pageTitle":"Кодеки, используемые WebRTC - Web media technologies | MDN","noIndexing":false}}</script></body></html>