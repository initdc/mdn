{"doc":{"isMarkdown":false,"isTranslated":true,"isActive":true,"flaws":{},"title":"CacheStorage","mdn_url":"/ru/docs/Web/API/CacheStorage","locale":"ru","native":"Русский","sidebarHTML":"<ol><li><strong><a href=\"/ru/docs/Web/API/Service_Worker_API\">Service Worker API</a></strong></li><li><strong><a href=\"/ru/docs/Web/API/CacheStorage\"><code>CacheStorage</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Методы</summary><ol><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/CacheStorage/delete\"><code>delete()</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/CacheStorage/has\"><code>has()</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/CacheStorage/keys\"><code>keys()</code> <small>(en-US)</small></a></li><li><a href=\"/ru/docs/Web/API/CacheStorage/match\"><code>match()</code></a></li><li><a href=\"/ru/docs/Web/API/CacheStorage/open\"><code>open()</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Похожие страницы для Service Workers API</summary><ol><li><a href=\"/ru/docs/Web/API/Cache\"><code>Cache</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Client\"><code>Client</code> <small>(en-US)</small></a></li><li><a href=\"/ru/docs/Web/API/Clients\"><code>Clients</code></a></li><li><a href=\"/ru/docs/Web/API/ExtendableEvent\"><code>ExtendableEvent</code></a></li><li><a href=\"/ru/docs/Web/API/FetchEvent\"><code>FetchEvent</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/InstallEvent\"><code>InstallEvent</code> <small>(en-US)</small></a></li><li><a href=\"/ru/docs/Web/API/Navigator/serviceWorker\"><code>Navigator.serviceWorker</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/NotificationEvent\"><code>NotificationEvent</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PeriodicSyncEvent\"><code>PeriodicSyncEvent</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PeriodicSyncManager\"><code>PeriodicSyncManager</code> <small>(en-US)</small></a></li><li><a href=\"/ru/docs/Web/API/ServiceWorker\"><code>ServiceWorker</code></a></li><li><a href=\"/ru/docs/Web/API/ServiceWorkerContainer\"><code>ServiceWorkerContainer</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/ServiceWorkerGlobalScope\"><code>ServiceWorkerGlobalScope</code> <small>(en-US)</small></a></li><li><a href=\"/ru/docs/Web/API/ServiceWorkerRegistration\"><code>ServiceWorkerRegistration</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/SyncEvent\"><code>SyncEvent</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/SyncManager\"><code>SyncManager</code> <small>(en-US)</small></a></li><li><a href=\"/ru/docs/Web/API/WindowClient\"><code>WindowClient</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p></p><div class=\"notecard experimental\" id=\"sect1\"><p><strong>Experimental:</strong> <strong>Это экспериментальная технология</strong><br>Так как спецификация этой технологии ещё не стабилизировалась, смотрите <a href=\"#browser_compatibility\">таблицу совместимости</a> по поводу использования в различных браузерах. Также заметьте, что синтаксис и поведение экспериментальной технологии может измениться в будущих версиях браузеров, вслед за изменениями спецификации.</p></div><p></p>\n\n<p>Интерфейс <strong><code>CacheStorage</code></strong> представляет собой хранилище для объектов <a href=\"/ru/docs/Web/API/Cache\"><code>Cache</code></a>. Он предоставляет главную директорию всех именованных кешей, к которым могут получить доступ <a href=\"/ru/docs/Web/API/ServiceWorker\"><code>ServiceWorker</code></a>, другие типы воркеров или <a href=\"/ru/docs/Web/API/Window\"><code>window</code></a> (вы не обязаны использовать их с service workers, даже если существует спецификация, определяющая это) и поддерживает отображение строковых имён соответствующих объектов <a href=\"/ru/docs/Web/API/Cache\"><code>Cache</code></a>.</p>\n\n<p><code>CacheStorage</code> также позволяет вызвать <a href=\"/ru/docs/Web/API/CacheStorage/open\"><code>CacheStorage.open()</code></a> и <a href=\"/ru/docs/Web/API/CacheStorage/match\"><code>CacheStorage.match()</code></a>. Используйте <a href=\"/ru/docs/Web/API/CacheStorage/open\"><code>CacheStorage.open()</code></a> для получения экземпляров <a href=\"/ru/docs/Web/API/Cache\"><code>Cache</code></a>. Используйте <a href=\"/ru/docs/Web/API/CacheStorage/match\"><code>CacheStorage.match()</code></a> для проверки того, является ли данный <a href=\"/ru/docs/Web/API/Request\"><code>Request</code></a> ключом в любом из объектов <a href=\"/ru/docs/Web/API/Cache\"><code>Cache</code></a>, отслеживаемых объектом <code>CacheStorage</code>.</p>\n\n<p>Вы можете получить доступ к <code>CacheStorage</code> через глобальное свойство <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/caches\"><code>caches</code> <small>(en-US)</small></a>.</p>\n\n<div class=\"note notecard\" id=\"sect2\"><strong>Примечание</strong>: CacheStorage всегда возвращает отказ с <code>SecurityError</code> для ненадёжных источников (т.e. тех, что не используют HTTPS, хотя это утверждение, вероятно, станет более общим в будущем). При тестировании это можно обойти, установив опцию \"Enable Service Workers over HTTP (when toolbox is open)\" в меню Firefox Devtools options/gear.</div>\n\n<div class=\"note notecard\" id=\"sect3\"><strong>Примечание</strong>: <a href=\"/ru/docs/Web/API/CacheStorage/match\"><code>CacheStorage.match()</code></a> удобный метод. Подобная функциональность сопоставления записей кеша может быть реализован путём открытия вашего кеша с помощью <a href=\"/ru/docs/Web/API/CacheStorage/open\"><code>CacheStorage.open()</code></a>, возвращения записей, в ней содержащихся, через <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/CacheStorage/keys\"><code>CacheStorage.keys()</code> <small>(en-US)</small></a> и сравнения необходимой <a href=\"/ru/docs/Web/API/CacheStorage/match\"><code>CacheStorage.match()</code></a>.</div>"}},{"type":"prose","value":{"id":"методы","title":"Методы","isH3":false,"content":"<dl>\n <dt id=\"cachestorage.match\"><a href=\"/ru/docs/Web/API/CacheStorage/match\"><code>CacheStorage.match()</code></a></dt>\n <dd>Проверяет, является ли данный <a href=\"/ru/docs/Web/API/Request\"><code>Request</code></a> ключом в любом из объектов <a href=\"/ru/docs/Web/API/Cache\"><code>Cache</code></a>, отслеживаемых объектом <a href=\"/ru/docs/Web/API/CacheStorage\" aria-current=\"page\"><code>CacheStorage</code></a>, и возвращает <a href=\"/ru/docs/Web/JavaScript/Reference/Global_Objects/Promise\"><code>Promise</code></a>, который успешно завершится, когда найдёт совпадение.</dd>\n <dt id=\"cachestorage.has_en-us\"><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/CacheStorage/has\"><code>CacheStorage.has()</code> <small>(en-US)</small></a></dt>\n <dd>Возвращает <a href=\"/ru/docs/Web/JavaScript/Reference/Global_Objects/Promise\"><code>Promise</code></a>, который успешно завершится и вернёт <code>true,</code> если объект <a href=\"/ru/docs/Web/API/Cache\"><code>Cache</code></a> содержит кеш с установленным <code>cacheName</code>.</dd>\n <dt id=\"cachestorage.open\"><a href=\"/ru/docs/Web/API/CacheStorage/open\"><code>CacheStorage.open()</code></a></dt>\n <dd>Возвращает <a href=\"/ru/docs/Web/JavaScript/Reference/Global_Objects/Promise\"><code>Promise</code></a>, который успешно завершится, когда объект <a href=\"/ru/docs/Web/API/Cache\"><code>Cache</code></a> найдёт необходимый объект с <code>cacheName</code> (если такого нет, то создаст новый).</dd>\n <dt id=\"cachestorage.delete_en-us\"><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/CacheStorage/delete\"><code>CacheStorage.delete()</code> <small>(en-US)</small></a></dt>\n <dd>Находит объект <a href=\"/ru/docs/Web/API/Cache\"><code>Cache</code></a>, соответствующий <code>cacheName</code>, и, если такой обнаружен, удаляет объект <a href=\"/ru/docs/Web/API/Cache\"><code>Cache</code></a> и возвращает <a href=\"/ru/docs/Web/JavaScript/Reference/Global_Objects/Promise\"><code>Promise</code></a>, завершающийся с <code>true</code>. Если объект <a href=\"/ru/docs/Web/API/Cache\"><code>Cache</code></a> не найдёт, то возвращается <code>false</code>.</dd>\n <dt id=\"cachestorage.keys_en-us\"><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/CacheStorage/keys\"><code>CacheStorage.keys()</code> <small>(en-US)</small></a></dt>\n <dd>Возвращает <a href=\"/ru/docs/Web/JavaScript/Reference/Global_Objects/Promise\"><code>Promise</code></a>, который вернёт массив, содержащий строки, соответствующие всем именованным объектам <a href=\"/ru/docs/Web/API/Cache\"><code>Cache</code></a>, отслеживаемым <a href=\"/ru/docs/Web/API/CacheStorage\" aria-current=\"page\"><code>CacheStorage</code></a>. Используйте этот метод для прохода по списку всех объектов <a href=\"/ru/docs/Web/API/Cache\"><code>Cache</code></a>.</dd>\n</dl>"}},{"type":"prose","value":{"id":"примеры","title":"Примеры","isH3":false,"content":"<p>Фрагмент кода взят с MDN <a href=\"https://github.com/mdn/sw-test/\" class=\"external\" rel=\" noopener\">sw-test example</a> (смотри <a href=\"https://mdn.github.io/sw-test/\" class=\"external\" rel=\" noopener\">sw-test running live</a>). Этот service worker ожидает старта события <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/InstallEvent\"><code>InstallEvent</code> <small>(en-US)</small></a>, затем запускает <a href=\"/ru/docs/Web/API/ExtendableEvent/waitUntil\" title=\"waitUntil\"><code>waitUntil</code></a> для обработки процесса установки приложения. Он состоит из вызова <a href=\"/ru/docs/Web/API/CacheStorage/open\"><code>CacheStorage.open</code></a> для создания нового кеша и затем использует <a href=\"/ru/docs/Web/API/Cache/addAll\"><code>Cache.addAll</code></a> для добавления к нему списка ресурсов.</p>\n\n<p>Во втором блоке кода мы ждём запуска события <a href=\"/ru/docs/Web/API/FetchEvent\"><code>FetchEvent</code></a>. Мы создаём встроенный ответ:</p>\n\n<ol>\n <li>Проверяем, был ли необходимый запрос найден в CacheStorage. Если да, выполняем его.</li>\n <li>Если нет, получаем запрос от сети, затем так же открываем кеш, созданный в первом блоке, и добавляем клон запроса в него, используя <a href=\"/ru/docs/Web/API/Cache/put\"><code>Cache.put</code></a> (<code>cache.put(event.request, response.clone())</code>.)</li>\n <li>Если произошла ошибка (например, из-за отсутствия подключения), возвращаем ответ с отказом.</li>\n</ol>\n\n<p>Наконец, возвращаем ответ, был ли встроенный запрос в итоге равнозначным, используя <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/FetchEvent/respondWith\"><code>FetchEvent.respondWith</code> <small>(en-US)</small></a>.</p>\n\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'install'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  event<span class=\"token punctuation\">.</span><span class=\"token function\">waitUntil</span><span class=\"token punctuation\">(</span>\n    caches<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'v1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">cache</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> cache<span class=\"token punctuation\">.</span><span class=\"token function\">addAll</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n        <span class=\"token string\">'/sw-test/'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'/sw-test/index.html'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'/sw-test/style.css'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'/sw-test/app.js'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'/sw-test/image-list.js'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'/sw-test/star-wars-logo.jpg'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'/sw-test/gallery/bountyHunters.jpg'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'/sw-test/gallery/myLittleVader.jpg'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token string\">'/sw-test/gallery/snowTroopers.jpg'</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fetch'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> response<span class=\"token punctuation\">;</span>\n  event<span class=\"token punctuation\">.</span><span class=\"token function\">respondWith</span><span class=\"token punctuation\">(</span>caches<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">r</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    response <span class=\"token operator\">=</span> r<span class=\"token punctuation\">;</span>\n    caches<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'v1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">cache</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      cache<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">,</span> response<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> caches<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/sw-test/gallery/myLittleVader.jpg'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>"}},{"type":"specifications","value":{"title":"Спецификации","id":"спецификации","isH3":false,"specifications":[{"bcdSpecificationURL":"https://w3c.github.io/ServiceWorker/#cachestorage-interface","title":"Service Workers 1"}],"query":"api.CacheStorage"}},{"type":"browser_compatibility","value":{"title":"Поддержка браузерами","id":"поддержка_браузерами","isH3":false,"query":"api.CacheStorage","dataURL":"/ru/docs/Web/API/CacheStorage/bcd.json"}},{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p></p><p></p>"}},{"type":"prose","value":{"id":"смотрите_также","title":"Смотрите также","isH3":false,"content":"<ul>\n <li><a href=\"/en-US/docs/Web/API/ServiceWorker_API/Using_Service_Workers\">Using Service Workers</a></li>\n <li><a href=\"/ru/docs/Web/API/Cache\"><code>Cache</code></a></li>\n <li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/caches\"><code>WorkerGlobalScope.caches</code> <small>(en-US)</small></a></li>\n</ul>"}}],"toc":[{"text":"Методы","id":"методы"},{"text":"Примеры","id":"примеры"},{"text":"Спецификации","id":"спецификации"},{"text":"Поддержка браузерами","id":"поддержка_браузерами"},{"text":"Смотрите также","id":"смотрите_также"}],"summary":"Интерфейс CacheStorage представляет собой хранилище для объектов Cache. Он предоставляет главную директорию всех именованных кешей, к которым могут получить доступ ServiceWorker, другие типы воркеров или window (вы не обязаны использовать их с service workers, даже если существует спецификация, определяющая это) и поддерживает отображение строковых имён соответствующих объектов Cache.","popularity":0.0002,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"CacheStorage","locale":"en-US","native":"English (US)"},{"title":"CacheStorage","locale":"es","native":"Español"},{"title":"CacheStorage","locale":"fr","native":"Français"},{"title":"CacheStorage","locale":"ja","native":"日本語"},{"title":"CacheStorage","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"ru/web/api/cachestorage","github_url":"https://github.com/mdn/translated-content/blob/main/files/ru/web/api/cachestorage/index.html","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.html"},"parents":[{"uri":"/ru/docs/Web","title":"Веб-технологии для разработчиков"},{"uri":"/ru/docs/Web/API","title":"Интерфейсы веб API"},{"uri":"/ru/docs/Web/API/CacheStorage","title":"CacheStorage"}],"pageTitle":"CacheStorage - Интерфейсы веб API | MDN","noIndexing":false}}