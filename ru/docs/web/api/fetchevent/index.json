{"doc":{"isMarkdown":false,"isTranslated":true,"isActive":true,"flaws":{},"title":"FetchEvent","mdn_url":"/ru/docs/Web/API/FetchEvent","locale":"ru","native":"Русский","sidebarHTML":"<ol><li><strong><a href=\"/ru/docs/Web/API/Service_Worker_API\">Service Worker API</a></strong></li><li><strong><a href=\"/ru/docs/Web/API/FetchEvent\"><code>FetchEvent</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Конструктор</summary><ol><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/FetchEvent/FetchEvent\"><code>FetchEvent()</code> <small>(en-US)</small></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Свойства</summary><ol><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/FetchEvent/clientId\"><code>clientId</code> <small>(en-US)</small></a></li><li><svg class=\"icon icon-nonstandard\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-nonstandard\"></use>\n</svg><svg class=\"icon icon-deprecated\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-deprecated\"></use>\n</svg><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/FetchEvent/isReload\"><code>isReload</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/FetchEvent/preloadResponse\"><code>preloadResponse</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/FetchEvent/replacesClientId\"><code>replacesClientId</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/FetchEvent/request\"><code>request</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/FetchEvent/resultingClientId\"><code>resultingClientId</code> <small>(en-US)</small></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Методы</summary><ol><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/FetchEvent/respondWith\"><code>respondWith()</code> <small>(en-US)</small></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Наследование:</summary><ol><li><a href=\"/ru/docs/Web/API/ExtendableEvent\"><code>ExtendableEvent</code></a></li><li><a href=\"/ru/docs/Web/API/Event\"><code>Event</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Похожие страницы для Service Workers API</summary><ol><li><a href=\"/ru/docs/Web/API/Cache\"><code>Cache</code></a></li><li><a href=\"/ru/docs/Web/API/CacheStorage\"><code>CacheStorage</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Client\"><code>Client</code> <small>(en-US)</small></a></li><li><a href=\"/ru/docs/Web/API/Clients\"><code>Clients</code></a></li><li><a href=\"/ru/docs/Web/API/ExtendableEvent\"><code>ExtendableEvent</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/InstallEvent\"><code>InstallEvent</code> <small>(en-US)</small></a></li><li><a href=\"/ru/docs/Web/API/Navigator/serviceWorker\"><code>Navigator.serviceWorker</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/NotificationEvent\"><code>NotificationEvent</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PeriodicSyncEvent\"><code>PeriodicSyncEvent</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PeriodicSyncManager\"><code>PeriodicSyncManager</code> <small>(en-US)</small></a></li><li><a href=\"/ru/docs/Web/API/ServiceWorker\"><code>ServiceWorker</code></a></li><li><a href=\"/ru/docs/Web/API/ServiceWorkerContainer\"><code>ServiceWorkerContainer</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/ServiceWorkerGlobalScope\"><code>ServiceWorkerGlobalScope</code> <small>(en-US)</small></a></li><li><a href=\"/ru/docs/Web/API/ServiceWorkerRegistration\"><code>ServiceWorkerRegistration</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/SyncEvent\"><code>SyncEvent</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/SyncManager\"><code>SyncManager</code> <small>(en-US)</small></a></li><li><a href=\"/ru/docs/Web/API/WindowClient\"><code>WindowClient</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p></p><p></p>\n\n<p>Это тип событий <code>fetch</code>, обрабатываемых в <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/ServiceWorkerGlobalScope\">глобальном контексте service worker <small>(en-US)</small></a>. Данное событие содержит данные о запросе, включая его цель. Оно предоставляет метод <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/FetchEvent/respondWith\"><code>event.respondWith()</code> <small>(en-US)</small></a>, с помощью которого service worker может ответить на запрос.</p>"}},{"type":"prose","value":{"id":"конструктор","title":"Конструктор","isH3":false,"content":"<dl>\n <dt id=\"fetchevent_en-us\"><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/FetchEvent/FetchEvent\"><code>FetchEvent()</code> <small>(en-US)</small></a></dt>\n <dd>Создаёт новый объект <code>FetchEvent</code>. Как правило, данный конструктор не используется. Браузер самостоятельно создаёт данные объекты и передаёт их в обработчик событий <code>fetch</code>.</dd>\n</dl>"}},{"type":"prose","value":{"id":"свойства","title":"Свойства","isH3":false,"content":"<p><em>Данный класс наследует все свойства класса <a href=\"/ru/docs/Web/API/Event\"><code>Event</code></a></em>.</p>\n\n<dl>\n <dt id=\"fetchevent.clientid_en-us\"><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/FetchEvent/clientId\"><code>fetchEvent.clientId</code> <small>(en-US)</small></a> <span title=\"Это значение изменять нельзя.\" class=\"badge inline readonly\">Только для чтения </span></dt>\n <dd><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Client/id\"><code>Идентификатор</code> <small>(en-US)</small></a> <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Client\"><code>клиента</code> <small>(en-US)</small></a> того же источника, отправившего запрос.</dd>\n <dt id=\"fetchevent.preloadresponse_en-us\"><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/FetchEvent/preloadResponse\"><code>fetchEvent.preloadResponse</code> <small>(en-US)</small></a> <span title=\"Это значение изменять нельзя.\" class=\"badge inline readonly\">Только для чтения </span></dt>\n <dd><a href=\"/ru/docs/Web/JavaScript/Reference/Global_Objects/Promise\"><code>Промис</code></a> для <a href=\"/ru/docs/Web/API/Response\" title=\"запроса\"><code>запроса</code></a>, или же пустой промис, если не произошла навигация или <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/NavigationPreloadManager\">предзагрузка навигации <small>(en-US)</small></a> отключена.</dd>\n <dt id=\"fetchevent.request_en-us\"><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/FetchEvent/request\"><code>fetchEvent.request</code> <small>(en-US)</small></a> <span title=\"Это значение изменять нельзя.\" class=\"badge inline readonly\">Только для чтения </span></dt>\n <dd>Запрос (<a href=\"/ru/docs/Web/API/Request\"><code>Request</code></a>) от браузера.</dd>\n <dt id=\"fetchevent.replacesclientid_en-us\"><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/FetchEvent/replacesClientId\"><code>fetchEvent.replacesClientId</code> <small>(en-US)</small></a> <span title=\"Это значение изменять нельзя.\" class=\"badge inline readonly\">Только для чтения </span></dt>\n <dd><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Client/id\"><code>Идентификатор</code> <small>(en-US)</small></a> <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Client\"><code>клиента</code> <small>(en-US)</small></a>, заменяемого при навигации.</dd>\n <dt id=\"fetchevent.resultingclientid_en-us\"><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/FetchEvent/resultingClientId\"><code>fetchEvent.resultingClientId</code> <small>(en-US)</small></a> <span title=\"Это значение изменять нельзя.\" class=\"badge inline readonly\">Только для чтения </span></dt>\n <dd><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Client/id\"><code>Идентификатор</code> <small>(en-US)</small></a> <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Client\"><code>клиента</code> <small>(en-US)</small></a>, заменившего прошлый клиент при навигации.</dd>\n</dl>"}},{"type":"prose","value":{"id":"методы","title":"Методы","isH3":false,"content":"<p><em>Данный класс наследует методы класса </em><em><a href=\"/ru/docs/Web/API/ExtendableEvent\"><code>ExtendableEvent</code></a></em>.</p>\n\n<dl>\n <dt id=\"fetchevent.respondwith_en-us\"><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/FetchEvent/respondWith\"><code>fetchEvent.respondWith()</code> <small>(en-US)</small></a></dt>\n <dd>Перехватывает запрос и отправляет промис с ответом.</dd>\n <dt id=\"extendableevent.waituntil\"><a href=\"/ru/docs/Web/API/ExtendableEvent/waitUntil\"><code>extendableEvent.waitUntil()</code></a></dt>\n <dd>\n <p>Продлевает выполнение обработчика события до завершения переданного промиса. Используется чтобы уведомить браузер о событии, продолжающемся после отправки ответа, таком как обновление кеша или потоковая передача.</p>\n </dd>\n</dl>"}},{"type":"prose","value":{"id":"примеры","title":"Примеры","isH3":false,"content":"<p>В данном примере все не-GET запросы будут обрабатываться стандартными средствами браузера. В случае GET запросов, service worker попробует найти ответ в кеше, а в случае его отсутствия получит данные с сервера. Также, он асинхронно обновит данные в кеше.</p>\n\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>self<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'fetch'</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">event</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// В случае не-GET запроса браузер должен сам обрабатывать его</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">.</span>method <span class=\"token operator\">!=</span> <span class=\"token string\">'GET'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Обрабатываем запрос с помощью логики service worker</span>\n  event<span class=\"token punctuation\">.</span><span class=\"token function\">respondWith</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Пытаемся получить ответ из кеша.</span>\n    <span class=\"token keyword\">const</span> cache <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> caches<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dynamic-v1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> cachedResponse <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> cache<span class=\"token punctuation\">.</span><span class=\"token function\">match</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>cachedResponse<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Если кеш был найден, возвращаем данные из него</span>\n      <span class=\"token comment\">// и запускаем фоновое обновление данных в кеше.</span>\n      event<span class=\"token punctuation\">.</span><span class=\"token function\">waitUntil</span><span class=\"token punctuation\">(</span>cache<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span> cachedResponse<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// В случае, если данные не были найдены в кеше, получаем их с сервера.</span>\n    <span class=\"token keyword\">return</span> <span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>"}},{"type":"specifications","value":{"title":"Спецификации","id":"спецификации","isH3":false,"specifications":[{"bcdSpecificationURL":"https://w3c.github.io/ServiceWorker/#fetchevent-interface","title":"Service Workers 1"}],"query":"api.FetchEvent"}},{"type":"browser_compatibility","value":{"title":"Совместимость","id":"совместимость","isH3":false,"query":"api.FetchEvent","dataURL":"/ru/docs/Web/API/FetchEvent/bcd.json"}},{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<div id=\"sect2\">\n\n\n<p></p><p></p>\n</div>"}},{"type":"prose","value":{"id":"смотрите_также","title":"Смотрите также","isH3":false,"content":"<ul>\n <li><a href=\"/ru/docs/Web/JavaScript/Reference/Global_Objects/Promise\"><code>Promise</code></a></li>\n <li><a href=\"/en-US/docs/Web/API/Fetch_API\">Fetch API</a></li>\n</ul>"}}],"toc":[{"text":"Конструктор","id":"конструктор"},{"text":"Свойства","id":"свойства"},{"text":"Методы","id":"методы"},{"text":"Примеры","id":"примеры"},{"text":"Спецификации","id":"спецификации"},{"text":"Совместимость","id":"совместимость"},{"text":"Смотрите также","id":"смотрите_также"}],"summary":"Это тип событий fetch, обрабатываемых в глобальном контексте service worker (en-US). Данное событие содержит данные о запросе, включая его цель. Оно предоставляет метод event.respondWith() (en-US), с помощью которого service worker может ответить на запрос.","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"FetchEvent","locale":"en-US","native":"English (US)"},{"title":"FetchEvent","locale":"es","native":"Español"},{"title":"FetchEvent","locale":"fr","native":"Français"},{"title":"FetchEvent","locale":"ja","native":"日本語"},{"title":"FetchEvent","locale":"ko","native":"한국어"},{"title":"FetchEvent","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"ru/web/api/fetchevent","github_url":"https://github.com/mdn/translated-content/blob/main/files/ru/web/api/fetchevent/index.html","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.html"},"parents":[{"uri":"/ru/docs/Web","title":"Веб-технологии для разработчиков"},{"uri":"/ru/docs/Web/API","title":"Интерфейсы веб API"},{"uri":"/ru/docs/Web/API/FetchEvent","title":"FetchEvent"}],"pageTitle":"FetchEvent - Интерфейсы веб API | MDN","noIndexing":false}}