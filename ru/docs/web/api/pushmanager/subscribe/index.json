{"doc":{"isMarkdown":false,"isTranslated":true,"isActive":true,"flaws":{},"title":"PushManager.subscribe()","mdn_url":"/ru/docs/Web/API/PushManager/subscribe","locale":"ru","native":"Русский","sidebarHTML":"<ol><li><strong><a href=\"/ru/docs/Web/API/Push_API\">Push API</a></strong></li><li><strong><a href=\"/ru/docs/Web/API/PushManager\"><code>PushManager</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Свойства</summary><ol><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PushManager/supportedContentEncodings\"><code>supportedContentEncodings</code> <small>(en-US)</small></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Методы</summary><ol><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PushManager/getSubscription\"><code>getSubscription()</code> <small>(en-US)</small></a></li><li><svg class=\"icon icon-deprecated\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-deprecated\"></use>\n</svg><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PushManager/hasPermission\"><code>hasPermission()</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PushManager/permissionState\"><code>permissionState()</code> <small>(en-US)</small></a></li><li><svg class=\"icon icon-deprecated\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-deprecated\"></use>\n</svg><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PushManager/register\"><code>register()</code> <small>(en-US)</small></a></li><li><svg class=\"icon icon-deprecated\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-deprecated\"></use>\n</svg><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PushManager/registrations\"><code>registrations()</code> <small>(en-US)</small></a></li><li><em><code>subscribe()</code></em></li><li><svg class=\"icon icon-deprecated\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-deprecated\"></use>\n</svg><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PushManager/unregister\"><code>unregister()</code> <small>(en-US)</small></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Похожие страницы для Push API</summary><ol><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PushEvent\"><code>PushEvent</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PushMessageData\"><code>PushMessageData</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PushSubscription\"><code>PushSubscription</code> <small>(en-US)</small></a></li><li><a href=\"/ru/docs/Web/API/ServiceWorkerRegistration/pushManager\"><code>ServiceWorkerRegistration.pushManager</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p></p><div class=\"notecard experimental\" id=\"sect1\"><p><strong>Experimental:</strong> <strong>Это экспериментальная технология</strong><br>Так как спецификация этой технологии ещё не стабилизировалась, смотрите <a href=\"#browser_compatibility\">таблицу совместимости</a> по поводу использования в различных браузерах. Также заметьте, что синтаксис и поведение экспериментальной технологии может измениться в будущих версиях браузеров, вслед за изменениями спецификации.</p></div><p></p>\n\n<p>Метод <strong><code>subscribe()</code></strong> интерфейса <a href=\"/ru/docs/Web/API/PushManager\"><code>PushManager</code></a> позволяет осуществлять подписку на push-уведомления.</p>\n\n<p>Возвращает <a href=\"/ru/docs/Web/JavaScript/Reference/Global_Objects/Promise\"><code>Promise</code></a>, который разрешается в объект <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PushSubscription\"><code>PushSubscription</code> <small>(en-US)</small></a>, содержащий детали push-подписки. Новая push-подписка создаётся в случае, если сервис-воркер не имеет существующей подписки.</p>"}},{"type":"prose","value":{"id":"синтаксис","title":"Синтаксис","isH3":false,"content":"<pre class=\"syntaxbox notranslate\">PushManager.subscribe(options).then(function(pushSubscription) { ... } );</pre>"}},{"type":"prose","value":{"id":"свойства","title":"Свойства","isH3":true,"content":"<dl>\n <dt id=\"options_необязательный\"><code>options <span class=\"badge inline optional\">Необязательный</span></code></dt>\n <dd>Объект, содержащий необязательные параметры конфигурации. Может иметь следующие свойства:\n <ul>\n  <li><code>userVisibleOnly</code>: Булевое значение, указывающее на то, будет ли возвращаемая подписка использоваться для сообщений, чей эффект может быть видим для пользователя.</li>\n  <li><code>applicationServerKey</code>: открытый ключ ECDSA P-256, закодированный в Base64 <a href=\"/ru/docs/conflicting/Web/JavaScript/Reference/Global_Objects/String_6fa58bba0570d663099f0ae7ae8883ab\"><code>DOMString</code></a> или <a class=\"page-not-created\" title=\"Документация об этом ещё не написана; пожалуйста, поспособствуйте её написанию!\"><code>ArrayBuffer</code></a>}, содержащий , который push-сервер будет использовать для аутентификации сервера приложений. Если указано, все сообщения с сервера вашего приложения должны использовать схему аутентификации VAPID и включать JWT, подписанный соответствующим закрытым ключом. Этот ключ <strong><em>НЕ </em></strong>тот же ключ ECDH, который вы используете для шифрования данных. Для получения дополнительной информации см. «<a href=\"https://blog.mozilla.org/services/2016/04/04/using-vapid-with-webpush/\" class=\"external\" rel=\" noopener\">Using VAPID with WebPush</a>».</li>\n </ul>\n\n <div class=\"note notecard\" id=\"sect2\">\n <p><strong>Примечание: </strong>Свойство, требуемое некоторыми браузерами, например Chrome и Edge.</p>\n </div>\n </dd>\n</dl>"}},{"type":"prose","value":{"id":"возвращает","title":"Возвращает","isH3":true,"content":"<p><a href=\"/ru/docs/Web/JavaScript/Reference/Global_Objects/Promise\"><code>Promise</code></a> который разрешается в объект <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PushSubscription\"><code>PushSubscription</code> <small>(en-US)</small></a>.</p>"}},{"type":"prose","value":{"id":"пример","title":"Пример","isH3":false,"content":"<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onpush</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// Отсюда можно записывать данные в IndexedDB, отправлять их в любое</span>\n  <span class=\"token comment\">// открытое окно, отображать уведомление и т. д.</span>\n<span class=\"token punctuation\">}</span>\n\nnavigator<span class=\"token punctuation\">.</span>serviceWorker<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span><span class=\"token string\">'serviceworker.js'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>\n  <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">serviceWorkerRegistration</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    serviceWorkerRegistration<span class=\"token punctuation\">.</span>pushManager<span class=\"token punctuation\">.</span><span class=\"token function\">subscribe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>\n      <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">pushSubscription</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>pushSubscription<span class=\"token punctuation\">.</span>subscriptionId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>pushSubscription<span class=\"token punctuation\">.</span>endpoint<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// Детали push-подписки, требуемые сервером приложения,</span>\n        <span class=\"token comment\">// теперь доступны, и могут быть отправлены, к примеру,</span>\n        <span class=\"token comment\">// при помощи XMLHttpRequest.</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// При разработке это часто помогает отлавливать ошибки в консоли.</span>\n        <span class=\"token comment\">// В продакшен-среде это также может быть полезно для отправки отчёта</span>\n        <span class=\"token comment\">// об ошибках на сервер приложения.</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>"}},{"type":"specifications","value":{"title":"Спецификации","id":"спецификации","isH3":false,"specifications":[{"bcdSpecificationURL":"https://w3c.github.io/push-api/#dom-pushmanager-subscribe","title":"Push API"}],"query":"api.PushManager.subscribe"}},{"type":"browser_compatibility","value":{"title":"Совместимость с браузерами","id":"совместимость_с_браузерами","isH3":false,"query":"api.PushManager.subscribe","dataURL":"/ru/docs/Web/API/PushManager/subscribe/bcd.json"}},{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p></p><p></p>"}},{"type":"prose","value":{"id":"смотрите_также","title":"Смотрите также","isH3":false,"content":"<ul>\n <li><a href=\"/en-US/docs/Web/API/Push_API\">Using the Push API</a></li>\n <li><a href=\"http://updates.html5rocks.com/2015/03/push-notificatons-on-the-open-web\" class=\"external\" rel=\" noopener\">Push Notifications on the Open Web</a>, Matt Gaunt</li>\n</ul>"}}],"toc":[{"text":"Синтаксис","id":"синтаксис"},{"text":"Пример","id":"пример"},{"text":"Спецификации","id":"спецификации"},{"text":"Совместимость с браузерами","id":"совместимость_с_браузерами"},{"text":"Смотрите также","id":"смотрите_также"}],"summary":"Метод subscribe() интерфейса PushManager позволяет осуществлять подписку на push-уведомления.","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"PushManager.subscribe()","locale":"en-US","native":"English (US)"},{"title":"PushManager.subscribe()","locale":"ja","native":"日本語"},{"title":"PushManager.subscribe()","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"ru/web/api/pushmanager/subscribe","github_url":"https://github.com/mdn/translated-content/blob/main/files/ru/web/api/pushmanager/subscribe/index.html","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.html"},"parents":[{"uri":"/ru/docs/Web","title":"Веб-технологии для разработчиков"},{"uri":"/ru/docs/Web/API","title":"Интерфейсы веб API"},{"uri":"/ru/docs/Web/API/PushManager","title":"PushManager"},{"uri":"/ru/docs/Web/API/PushManager/subscribe","title":"PushManager.subscribe()"}],"pageTitle":"PushManager.subscribe() - Интерфейсы веб API | MDN","noIndexing":false}}