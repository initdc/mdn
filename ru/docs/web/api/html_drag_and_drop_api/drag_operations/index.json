{"doc":{"isMarkdown":false,"isTranslated":true,"isActive":true,"flaws":{},"title":"Drag Operations","mdn_url":"/ru/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations","locale":"ru","native":"Русский","sidebarHTML":"<ol><li><strong><a href=\"/ru/docs/Web/API/HTML_Drag_and_Drop_API\">HTML Drag and Drop API</a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Руководства</summary><ol><li><a href=\"/ru/docs/Web/API/HTML_Drag_and_Drop_API/File_drag_and_drop\">File drag and drop</a></li><li><a href=\"/ru/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations\">Drag operations</a></li><li><a href=\"/ru/docs/Web/API/HTML_Drag_and_Drop_API/Multiple_items\">Dragging and Dropping Multiple Items</a></li><li><a href=\"/ru/docs/Web/API/HTML_Drag_and_Drop_API/Recommended_drag_types\">Recommended Drag Types</a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Интерфейсы</summary><ol><li><a href=\"/ru/docs/Web/API/DataTransfer\"><code>DataTransfer</code></a></li><li><a href=\"/ru/docs/Web/API/DataTransferItem\"><code>DataTransferItem</code></a></li><li><a href=\"/ru/docs/Web/API/DataTransferItemList\"><code>DataTransferItemList</code></a></li><li><a href=\"/ru/docs/Web/API/DragEvent\"><code>DragEvent</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>События</summary><ol><li><a href=\"/ru/docs/Web/API/Document/drag_event\"><code>Document</code>: <code>drag</code></a></li><li><a href=\"/ru/docs/Web/API/Document/dragend_event\"><code>Document</code>: <code>dragend</code></a></li><li><a href=\"/ru/docs/Web/API/Document/dragenter_event\"><code>Document</code>: <code>dragenter</code></a></li><li><a href=\"/ru/docs/Web/API/Document/dragleave_event\"><code>Document</code>: <code>dragleave</code></a></li><li><a href=\"/ru/docs/Web/API/Document/dragover_event\"><code>Document</code>: <code>dragover</code></a></li><li><a href=\"/ru/docs/Web/API/Document/dragstart_event\"><code>Document</code>: <code>dragstart</code></a></li><li><a href=\"/ru/docs/Web/API/Document/drop_event\"><code>Document</code>: <code>drop</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p></p><p></p>\n\n<p>Ниже описаны шаги, которые происходят при drag and drop операции.</p>\n\n<p class=\"note\">Drag операции описываются в документе, используя <a href=\"/ru/docs/Web/API/DataTransfer\"><code>DataTransfer</code></a> интерфейс. Этот документ не использует не<a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransferItem\"><code>DataTransferItem</code> <small>(en-US)</small></a> интерфейс, не<a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransferItemList\"><code>DataTransferItemList</code> <small>(en-US)</small></a> интерфейс.</p>"}},{"type":"prose","value":{"id":"draggableattribute","title":"<code>draggable</code> атрибуты","isH3":false,"content":"<p>На веб-странице, в некоторых случаях используется поведение drag (перетаскивания) по умолчанию. Включая выделенный текст, изображения и ссылки. Когда изображение или ссылка переносятся, URL изображения или ссылки устанавливается в качестве данных drag и перетаскивание начинается. Для других элементов, они должны быть частью выделения для выполнения перетаскивания по умолчанию. Чтобы увидеть это в действии, выделите область веб-страницы, а затем нажмите и удерживайте кнопку мыши и перетащите выделение. Появится специфичный для ОС рендеринг выделенного фрагмента и будет следовать за указателем мыши при перетаскивании. Однако это поведение является только drag поведением по умолчанию, если нет обработчиков, определяющих данные для перетаскивания.</p>\n\n<p>В HTML, кроме поведения по умолчанию изображений, ссылок и выделенных областей, никакие другие элементы по умолчанию не переносятся.</p>\n\n<p>Для перетаскивания других HTML-элементов, должны быть выполнены три пункта :</p>\n\n<ol>\n <li>Установить <code><a href=\"/ru/docs/Web/HTML/Global_attributes#attr-draggable\"><code>draggable</code></a>=\"</code><code>true\"</code> на элемент, который вы хотите сделать перетаскиваемым.</li>\n <li>Добавить обработчик события <code><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragstart_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragstart (en-US)</a></code></code>.</li>\n <li><a href=\"/en-US/docs/Web/API/DataTransfer/setData\">Установить данные перетаскивания</a> в обработчик выше.</li>\n</ol>\n\n<p>Вот пример, который позволяет перетаскивать часть содержимого.</p>\n\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">draggable</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ondragstart</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>event.dataTransfer.setData(<span class=\"token punctuation\">'</span>text/plain<span class=\"token punctuation\">'</span>, <span class=\"token punctuation\">'</span>This text may be dragged<span class=\"token punctuation\">'</span>)<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n  This text <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>strong</span><span class=\"token punctuation\">&gt;</span></span>may<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>strong</span><span class=\"token punctuation\">&gt;</span></span> be dragged.\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n\n<p>Атрибут <code><a href=\"/ru/docs/Web/HTML/Global_attributes#attr-draggable\"><code>draggable</code></a></code> установлен в  <code>\"true\"</code>, т.о. этот элемент становится перетаскиваемым. Если этот атрибут был опущен или установлен в <code>\"false\"</code>, то элемент не может быть перенесён, и вместо этого будет выбран текст.</p>\n\n<p>Атрибут <code><a href=\"/ru/docs/Web/HTML/Global_attributes#attr-draggable\"><code>draggable</code></a></code> может быть использован для любого элемента, включая изображения и ссылки. Однако, для последних двух, значение по умолчанию - <code>true</code>, т.о. вы можете только использовать атрибут  <code><a href=\"/ru/docs/Web/HTML/Global_attributes#attr-draggable\"><code>draggable</code></a></code> со значением <code>false</code> для отключение перетаскивания этих элементов.</p>\n\n<div class=\"note notecard\" id=\"sect1\">\n<p><strong>Примечание:</strong> Когда элемент становится перетаскиваемыми, текст или другие элементы в нем больше не могут быть выбраны обычным способом, щёлкая и перетаскивая мышью. Вместо этого пользователь должен удерживать клавишу <kbd>Alt</kbd>  чтобы выбрать текст с помощью мыши или клавиатуры.</p>\n</div>","titleAsText":"draggable атрибуты"}},{"type":"prose","value":{"id":"dragstart","title":"Начало операции перетаскивания","isH3":false,"content":"<p>В примере, обработчик добавлен для события <code><a href=\"/en-US/docs/Web/API/HTMLElement/dragstart_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragstart (en-US)</a></code> с использованием атрибута<code><a href=\"/ru/docs/Web/API/HTMLElement/dragstart_event\" title=\"ondragstart\"><code>ondragstart</code></a></code>.</p>\n\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span> <span class=\"token attr-name\">draggable</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ondragstart</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>event.dataTransfer.setData(<span class=\"token punctuation\">'</span>text/plain<span class=\"token punctuation\">'</span>, <span class=\"token punctuation\">'</span>This text may be dragged<span class=\"token punctuation\">'</span>)<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n  This text <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>strong</span><span class=\"token punctuation\">&gt;</span></span>may<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>strong</span><span class=\"token punctuation\">&gt;</span></span> be dragged.\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n\n<p>Когда пользователь начинает перетаскивание, запускается событие <code><a href=\"/en-US/docs/Web/API/HTMLElement/dragstart_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragstart (en-US)</a></code>.</p>\n\n<p>В этом примере обработчик <code><a href=\"/en-US/docs/Web/API/HTMLElement/dragstart_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragstart (en-US)</a></code> добавлен к самому перемещаемом элементу. Однако, вы можете слушать более высокого предка, так как событие перетаскивание всплывает вверх как и большинство событий.</p>\n\n<p>Внутри события <code><a href=\"/en-US/docs/Web/API/HTMLElement/dragstart_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragstart (en-US)</a></code>, вы можете указать <strong>drag данные</strong>, <strong>изображение отклика</strong>, <strong>drag-эффекты</strong>, все это описано ниже. Однако, обязательны только <strong>drag данные</strong>. (Изображение и drag-эффекты по умолчанию, подходят в большинстве ситуаций)</p>"}},{"type":"prose","value":{"id":"dragdata","title":"Drag-данные","isH3":false,"content":"<p>Все <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DragEvent\"><code>drag events</code> <small>(en-US)</small></a> имеют свойство, называемое<a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DragEvent/dataTransfer\"><code>dataTransfer</code> <small>(en-US)</small></a>, которое содержит drag-данные (<code>dataTransfer</code> это <a href=\"/ru/docs/Web/API/DataTransfer\"><code>DataTransfer</code></a> object).</p>\n\n<p>Когда происходит перетаскивание, данные должны быть связаны с перетаскиванием, которое определяет, что перетаскивается. Например, при перетаскивании выделенного текста в текстовое поле данные, связанные с элементом данных перетаскивания, являются самим текстом. Аналогично, при перетаскивании ссылки на веб-странице элемент данных перетаскивания является URL-адресом ссылки.</p>\n\n<p><a href=\"/ru/docs/Web/API/DataTransfer\" title=\"drag data\"><code>drag data</code></a> содержит два параметра, <strong>тип</strong> (или формат) данных, и <strong>значение </strong>данных. Формат это строковый тип (такой как <code><a href=\"/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Recommended_drag_types#text\" title=\"text/plain\">text/plain</a></code> текстовых данных), значение - строка текста. Когда начинается перетаскивание, вы добавляете данные, предоставляя тип и данные. Во время перетаскивания в обработчике события для событий <code><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragenter_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragenter (en-US)</a></code></code> и <code><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragover_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragover (en-US)</a></code></code> , вы используете типы данных перетаскиваемых данных, чтобы проверить, разрешено ли удаление. Например, цель drop, которая принимает ссылки, будет проверять тип <code><a href=\"/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Recommended_drag_types#link\" title=\"text/uri-list\">text/uri-list</a></code>. В течение события drop, обработчик будет получать данные тащат и вставить его на место.</p>\n\n<p>Свойство <a href=\"/ru/docs/Web/API/DataTransfer\" title=\"drag data's\"><code>drag data's</code></a> <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/types\"><code>types</code> <small>(en-US)</small></a> возвращает список MIME-типов <a href=\"/ru/docs/conflicting/Web/JavaScript/Reference/Global_Objects/String_6fa58bba0570d663099f0ae7ae8883ab\"><code>DOMString</code></a>, таких как <code><a href=\"/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Recommended_drag_types#text\" title=\"text/plain\">text/plain</a></code> или <code><a href=\"/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Recommended_drag_types#image\" title=\"image/jpeg\">image/jpeg</a></code>. Вы также можете создавать свои собственные типы. Большинство основные используемых типов описаны в  <a href=\"/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Recommended_drag_types\" title=\"/en-US/docs/DragDrop/Recommended_Drag_Types\">Recommended Drag Types</a>.</p>\n\n<p>Перетаскивание может включать элементы данных нескольких различных типов. Это позволяет предоставлять данные в более специфических типах, часто пользовательских, но по предоставляет резервные данные для drop, которые не поддерживают более специфические типы. Как правило, наименее специфичным типом будут обычные текстовые данные, использующие тип <code><a href=\"/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Recommended_drag_types#text\" title=\"text/plain\">text/plain</a></code>. Эти данные будут простым текстовым представлением.</p>\n\n<p>Установка элементов drag-данных <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DragEvent/dataTransfer\"><code>dataTransfer</code> <small>(en-US)</small></a>, используя метод <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/setData\"><code>setData()</code> <small>(en-US)</small></a>. Требуется два аргумента: тип данных и значение данных. Например:</p>\n\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>event<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span><span class=\"token function\">setData</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text/plain\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Text to drag\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n\n<p>Здесь, значение -  \"Text to drag\", формат -  <code><a href=\"/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Recommended_drag_types#text\" title=\"text/plain\">text/plain</a></code>.</p>\n\n<p>Вы можете предусмотреть данные в нескольких форматах. Сделаем это, вызовем метод  <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/setData\"><code>setData()</code> <small>(en-US)</small></a> несколько раз с различными форматами. Вы должны вызывать его с форматами от большей специфичности к меньшей.</p>\n\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> dt <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">;</span>\ndt<span class=\"token punctuation\">.</span><span class=\"token function\">setData</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"application/x.bookmark\"</span><span class=\"token punctuation\">,</span> bookmarkString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ndt<span class=\"token punctuation\">.</span><span class=\"token function\">setData</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text/uri-list\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"https://www.mozilla.org\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ndt<span class=\"token punctuation\">.</span><span class=\"token function\">setData</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text/plain\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"https://www.mozilla.org\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n\n<p>Добавлены данные трёх различных форматов. Первый тип - <code>application/x.bookmark</code>, пользовательский тип.Другие приложения не поддерживают данный тип, но вы можете использовать пользовательский тип для перетаскивания между областями в одном приложение или на одной странице.</p>\n\n<p>Предоставляя данные и в других типах, мы также можем поддерживать перетаскивание в другие приложения в менее специфичных формах. Тип <code>application/x.bookmark</code> может предоставлять данные с  более подробной информацией для использования в приложении, в то время как другие типы могут включать только один URL-адрес или текстовую версию.</p>\n\n<p>Обратите внимание, что и <code><a href=\"/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Recommended_drag_types#link\" title=\"text/uri-list\">text/uri-list</a></code> и <code><a href=\"/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Recommended_drag_types#text\" title=\"text/plain\">text/plain</a></code> содержат одни и те же данные в этом примере.  Это часто бывает так, но это не обязательно.</p>\n\n<p>Если вы попытаетесь добавить данные дважды с тем же форматом, новые данные заменят старые данные, но в той же позиции в списке типов, что и старые данные.</p>\n\n<p>Вы можете очистить данные, используя метод <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/clearData\"><code>clearData()</code> <small>(en-US)</small></a>, который принимает один аргумент: тип данных для удаления.</p>\n\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>event<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span><span class=\"token function\">clearData</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text/uri-list\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n\n<p>Аргумент <code>type</code> в методе <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/clearData\"><code>clearData()</code> <small>(en-US)</small></a> опционален. Если <code>type</code> не указан, данные, связанные со всеми типами, удаляются. Если перетаскивание не содержит элементов данных перетаскивания или все элементы были впоследствии очищены, то перетаскивание не произойдёт.</p>"}},{"type":"prose","value":{"id":"dragfeedback","title":"Настройка изображения отклика drag","isH3":false,"content":"<p>Когда происходит перетаскивание, полупрозрачное изображение генерируется из цели перетаскивания (событие \"<code><a href=\"/en-US/docs/Web/API/HTMLElement/dragstart_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragstart (en-US)</a></code>\" элемента срабатывает), и следует за указателем пользователя во время перетаскивания. Это изображение создаётся автоматически, поэтому вам не нужно создавать его самостоятельно. Однако вы можете использовать <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/setDragImage\"><code>setDragImage()</code> <small>(en-US)</small></a> для задания пользовательского изображения отклика перетаскивания.</p>\n\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>event<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span><span class=\"token function\">setDragImage</span><span class=\"token punctuation\">(</span>image<span class=\"token punctuation\">,</span> xOffset<span class=\"token punctuation\">,</span> yOffset<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n\n<p>Необходимы три аргумента. Первый - это ссылка на изображение. Эта ссылка обычно относится к элементу <code>&lt;img&gt;</code>, но также может относиться к элементу <code>&lt;canvas&gt;</code> или любому другому элементу. Изображение отклика будет генерироваться из того, как изображение выглядит на экране, для изображений они будут нарисованы в их первоначальном размере. Второй и третий аргументы метода <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/setDragImage\"><code>setDragImage()</code> <small>(en-US)</small></a> - это смещения, в которых изображение должно появляться относительно указателя мыши.</p>\n\n<p>Также можно использовать изображения и canvas, которых нет в документе. Этот метод полезен при рисовании пользовательских изображений перетаскивания с помощью элемента canvas, как показано в следующем примере:</p>\n\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">dragWithCustomImage</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> canvas <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"canvas\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  canvas<span class=\"token punctuation\">.</span>width <span class=\"token operator\">=</span> canvas<span class=\"token punctuation\">.</span>height <span class=\"token operator\">=</span> <span class=\"token number\">50</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> ctx <span class=\"token operator\">=</span> canvas<span class=\"token punctuation\">.</span><span class=\"token function\">getContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"2d\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  ctx<span class=\"token punctuation\">.</span>lineWidth <span class=\"token operator\">=</span> <span class=\"token number\">4</span><span class=\"token punctuation\">;</span>\n  ctx<span class=\"token punctuation\">.</span><span class=\"token function\">moveTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  ctx<span class=\"token punctuation\">.</span><span class=\"token function\">lineTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token punctuation\">,</span> <span class=\"token number\">50</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  ctx<span class=\"token punctuation\">.</span><span class=\"token function\">moveTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">50</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  ctx<span class=\"token punctuation\">.</span><span class=\"token function\">lineTo</span><span class=\"token punctuation\">(</span><span class=\"token number\">50</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  ctx<span class=\"token punctuation\">.</span><span class=\"token function\">stroke</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> dt <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">;</span>\n  dt<span class=\"token punctuation\">.</span><span class=\"token function\">setData</span><span class=\"token punctuation\">(</span><span class=\"token string\">'text/plain'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Data to Drag'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  dt<span class=\"token punctuation\">.</span><span class=\"token function\">setDragImage</span><span class=\"token punctuation\">(</span>canvas<span class=\"token punctuation\">,</span> <span class=\"token number\">25</span><span class=\"token punctuation\">,</span> <span class=\"token number\">25</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n\n<p>В этом примере мы делаем один canvas перетаскивания. Поскольку размер холста составляет 50×50 пикселей, мы используем смещение половины этого (25), чтобы изображение было центрировано на указателе мыши.</p>"}},{"type":"prose","value":{"id":"drageffects","title":"Drag эффекты","isH3":false,"content":"<p>При перетаскивании можно выполнить несколько операций. Операция  <code>copy</code> используется для указания на то, что перетаскиваемые данные будут скопированы из текущего местоположения в место перетаскивания. Операция <code>move</code> используется для указания на то, что перетаскиваемые данные будут перемещены, а операция <code>link</code> используется для указания на то, что между исходным и удаляемым местоположениями будет создана некоторая форма связи или соединения.</p>\n\n<p>Вы можете указать, какая из трёх операций разрешена для источника перетаскивания, установив свойство <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/effectAllowed\"><code>effectAllowed</code> <small>(en-US)</small></a> в обработчике событий<code><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragstart_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragstart (en-US)</a></code></code>.</p>\n\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>event<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span>effectAllowed <span class=\"token operator\">=</span> <span class=\"token string\">\"copy\"</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n\n<p>В этом примере разрешена только <strong>копия</strong>.</p>\n\n<p>Вы можете комбинировать значения различными способами:</p>\n\n<dl>\n <dt id=\"none\"><code>none</code></dt>\n <dd>никакая операция не разрешена</dd>\n <dt id=\"copy\"><code>copy</code></dt>\n <dd>только <code>copy</code></dd>\n <dt id=\"move\"><code>move</code></dt>\n <dd>только <code>move</code></dd>\n <dt id=\"link\"><code>link</code></dt>\n <dd>только <code>link</code></dd>\n <dt id=\"copymove\"><code>copyMove</code></dt>\n <dd>только <code>copy</code> или <code>move</code></dd>\n <dt id=\"copylink\"><code>copyLink</code></dt>\n <dd>только <code>copy</code> или <code>link</code></dd>\n <dt id=\"linkmove\"><code>linkMove</code></dt>\n <dd>только <code>link</code> или <code>move</code></dd>\n <dt id=\"all\"><code>all</code></dt>\n <dd>только <code>copy</code>, <code>move</code>, или <code>link</code></dd>\n <dt id=\"uninitialized\">uninitialized</dt>\n <dd>Значение по умолчанию <code>all</code>.</dd>\n</dl>\n\n<p>Обратите внимание, что эти значения должны использоваться так, как указано выше. Например, установка свойства <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/effectAllowed\"><code>effectAllowed</code> <small>(en-US)</small></a> на <code>copyMove</code> позволяет выполнять операцию копирования или перемещения, но не позволяет пользователю выполнять операцию связывания. Если вы не измените свойство <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/effectAllowed\"><code>effectAllowed</code> <small>(en-US)</small></a>,  то любая операция разрешена, как и со значением '<code>all</code>'. Поэтому вам не нужно настраивать это свойство, если вы не хотите исключить определённые типы.</p>\n\n<p>Во время операции перетаскивания, обработчик для событий <code><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragenter_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragenter (en-US)</a></code></code> или <code><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragover_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragover (en-US)</a></code></code> может проверить свойство <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/effectAllowed\"><code>effectAllowed</code> <small>(en-US)</small></a> , какие операции разрешены. Связанное свойство,  <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/dropEffect\"><code>dropEffect</code> <small>(en-US)</small></a>, должно быть установлено в пределах одного из этих событий, чтобы указать, какая единственная операция должна быть выполнена. Допустимые значения для <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/dropEffect\"><code>dropEffect</code> <small>(en-US)</small></a> - <code>none</code>, <code>copy</code>, <code>move</code>, или <code>link</code>. Комбинированные значения для этого свойства не используются.</p>\n\n<p>С событиями <code><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragenter_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragenter (en-US)</a></code></code> и <code><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragover_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragover (en-US)</a></code></code>, свойство <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/dropEffect\"><code>dropEffect</code> <small>(en-US)</small></a> инициализируется в соответствии с запросом пользователя. Пользователь может изменить желаемый эффект, нажав клавиши-модификаторы. Хотя точные используемые клавиши различаются в зависимости от платформы, обычно клавиши  <kbd>Shift</kbd> и <kbd>Control</kbd> используются для переключения между копированием, перемещением и связыванием. Указатель мыши изменится, чтобы указать, какая операция требуется. Например, для <code>copy</code> курсор может появиться со знаком плюс рядом с ним.</p>\n\n<p>Вы можете изменять свойство <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/dropEffect\"><code>dropEffect</code> <small>(en-US)</small></a> во время событий <code><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragenter_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragenter (en-US)</a></code></code> или <code><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragover_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragover (en-US)</a></code></code>, например, определённая drop-цель поддерживает только определённые операции. Вы можете изменить свойство <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/dropEffect\"><code>dropEffect</code> <small>(en-US)</small></a>, чтобы переопределить действие пользователя, и обеспечить выполнение специфичной  операции перетаскивания при её наступлении. Обратите внимание, что этот эффект должен быть указан в списке свойств <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/effectAllowed\"><code>effectAllowed</code> <small>(en-US)</small></a>. В противном случае ему будет присвоено другое допустимое значение.</p>\n\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>event<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span>dropEffect <span class=\"token operator\">=</span> <span class=\"token string\">\"copy\"</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n\n<p>В этом примере выполняется эффект копирования.</p>\n\n<p>Вы можете использовать значение <code>none</code>, чтобы указать, что в этом месте не допускается удаление, хотя в этом случае лучше не отменять событие.</p>\n\n<p>В событиях <code><code><a href=\"/en-US/docs/Web/API/HTMLElement/drop_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">drop (en-US)</a></code></code> и <code><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragend_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragend (en-US)</a></code></code>, вы можете проверить свойства <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/dropEffect\"><code>dropEffect</code> <small>(en-US)</small></a> для определения того, какой эффект был в конечном итоге выбран.  Если выбран эффект \"<code>move</code>\",то исходные данные должны быть удалены из источника перетаскивания в событии<code><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragend_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragend (en-US)</a></code></code>.</p>"}},{"type":"prose","value":{"id":"droptargets","title":"Указание drop-целей","isH3":false,"content":"<p>Обработчик для событий <code><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragenter_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragenter (en-US)</a></code></code> и <code><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragover_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragover (en-US)</a></code></code> используются для указания допустимых drop-целей, то есть мест, где могут быть сброшены перетаскиваемые элементы. Большинство областей веб-страницы или приложения не являются допустимыми местами для сброса данных. Таким образом, обработка этих событий по умолчанию не допускает сброса перетаскиваемых данных.</p>\n\n<p>Если вы хотите разрешить сброс переносимых данных, вы должны предотвратить обработку по умолчанию, отменив оба события <code>dragenter</code> и <code>dragover</code>.  Это можно сделать, либо вернув <code>false</code> из определённых атрибутом обработчика событий, либо вызвав метод <a href=\"/ru/docs/Web/API/Event/preventDefault\" title=\"preventDefault()\"><code>preventDefault()</code></a> событие. Последнее может быть более осуществимо в функции, определённой в отдельном скрипте.</p>\n\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">ondragover</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>return false<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">ondragover</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>event.preventDefault()<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n\n<p>Вызывая метод <a href=\"/ru/docs/Web/API/Event/preventDefault\" title=\"preventDefault()\"><code>preventDefault()</code></a> во время обоих событий <code><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragenter_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragenter (en-US)</a></code></code> и <code><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragover_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragover (en-US)</a></code></code> укажите, что падение разрешено в этом месте. Однако обычно вы захотите вызвать метод  <a href=\"/ru/docs/Web/API/Event/preventDefault\" title=\"preventDefault()\"><code>preventDefault()</code></a> события только в определённых ситуациях (например, только при перетаскивании ссылки).</p>\n\n<p>Для этого вызовите функцию, которая проверяет условие и отменяет событие только при его выполнении. Если условие не выполнено, не отменяйте событие, и сброс перетаскиваемых данных не произойдёт, если пользователь отпустит кнопку мыши.</p>\n\n<p>Наиболее распространённым является принятие или отклонение сброса в зависимости от типа данных перетаскивания при передаче данных — например, разрешение для изображений, ссылок или и того, и другого. Для этого вы можете проверить свойство <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/types\"><code>types</code> <small>(en-US)</small></a> события <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DragEvent/dataTransfer\"><code>dataTransfer</code> <small>(en-US)</small></a> (свойство). Свойство <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/types\"><code>types</code> <small>(en-US)</small></a> возвращает массив из строк, добавленных при начале перетаскивания, в порядке от наиболее значимого к наименее значимому.</p>\n\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">doDragOver</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> isLink <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span>types<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text/uri-list\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isLink<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n\n<p>В этом примере мы используем метод <code>includes</code>  чтобы проверить, присутствует ли тип <code><a href=\"/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Recommended_drag_types#link\" title=\"text/uri-list\">text/uri-list</a></code> в списке типов. Если это так, мы отменим событие, так что сброс становится разрешён. Если перетаскиваемые данные не содержат ссылки, событие не будет отменено, и сброс не может произойти в этом месте.</p>\n\n<p>Вы также можете установить либо свойство <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/effectAllowed\"><code>effectAllowed</code> <small>(en-US)</small></a>, либо свойство<a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/dropEffect\"><code>dropEffect</code> <small>(en-US)</small></a>, либо оба одновременно, если вы хотите указать более конкретные сведения о типе операции, которая будет выполнена. Естественно, изменение любого свойства не будет иметь никакого эффекта, если вы не отмените событие.</p>"}},{"type":"prose","value":{"id":"dropfeedback","title":"Drop Feedback","isH3":false,"content":"<p>There are several ways in which you can indicate to the user that a drop is allowed at a certain location. The mouse pointer will update as necessary depending on the value of the <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/dropEffect\"><code>dropEffect</code> <small>(en-US)</small></a> property.</p>\n\n<p>Although the exact appearance depends on the user's platform, typically a plus sign icon will appear for a '<code>copy</code>' for example, and a 'cannot drop here' icon will appear when a drop is not allowed. This mouse pointer feedback is sufficient in many cases.</p>\n\n<p>However, you can also update the user interface with an insertion point or highlight as needed. For simple highlighting, you can use the <code>:-moz-drag-over</code> CSS pseudoclass on a drop target.</p>\n\n<div class=\"code-example\"><pre class=\"brush: css notranslate\"><code><span class=\"token selector\">.droparea:-moz-drag-over</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">outline</span><span class=\"token punctuation\">:</span> 1px solid black<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n\n<p>In this example, the element with the class <code>droparea</code> will receive a 1 pixel black outline while it is a valid drop target, that is, if the <a href=\"/ru/docs/Web/API/Event/preventDefault\" title=\"preventDefault()\"><code>preventDefault()</code></a> method was called during the <code><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragenter_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragenter (en-US)</a></code></code> event.</p>\n\n<div class=\"note notecard\" id=\"sect2\">\n<p><strong>Note:</strong> You must cancel the <code><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragenter_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragenter (en-US)</a></code></code> event for this pseudoclass to apply, as this state is not checked for the <code><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragover_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragover (en-US)</a></code></code> event.</p>\n</div>\n\n<p>For more complex visual effects, you can also perform other operations during the <code><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragenter_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragenter (en-US)</a></code></code> event. For example, by inserting an element at the location where the drop will occur. This might be an insertion marker, or an element that represents the dragged element in its new location. To do this, you could create an <a href=\"/en-US/docs/XUL/image\" title=\"This is a link to an unwritten page\" class=\"page-not-created\">image</a> or <a href=\"/en-US/docs/XUL/separator\" title=\"This is a link to an unwritten page\" class=\"page-not-created\">separator</a> element and simply insert it into the document during the <code><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragenter_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragenter (en-US)</a></code></code> event.</p>\n\n<p>The <code><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragover_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragover (en-US)</a></code></code> event will fire at the element the mouse is pointing at. Naturally, you may need to move the insertion marker around a <code><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragover_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragover (en-US)</a></code></code> event as well. You can use the event's <a href=\"/ru/docs/Web/API/MouseEvent/clientX\" title=\"clientX\"><code>clientX</code></a> and <a href=\"/ru/docs/Web/API/MouseEvent/clientY\" title=\"clientY\"><code>clientY</code></a> properties as with other mouse events to determine the location of the mouse pointer.</p>\n\n<p>Finally, the <code><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragleave_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragleave (en-US)</a></code></code> event will fire at an element when the drag leaves the element. This is the time when you should remove any insertion markers or highlighting. You do not need to cancel this event. Any highlighting or other visual effects specified using the <code>:-moz-drag-over</code> pseudoclass will be removed automatically. The <code><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragleave_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragleave (en-US)</a></code></code> event will always fire, even if the drag is cancelled, so you can always ensure that any insertion point cleanup can be done during this event.</p>"}},{"type":"prose","value":{"id":"drop","title":"Performing a Drop","isH3":false,"content":"<p>When the user releases the mouse, the drag and drop operation ends.</p>\n\n<p>If the mouse is released over an element that is a valid drop target, that is, one that cancelled the last <code><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragenter_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragenter (en-US)</a></code></code> or <code><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragover_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragover (en-US)</a></code></code> event, then the drop will be successful, and a <code><code><a href=\"/en-US/docs/Web/API/HTMLElement/drop_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">drop (en-US)</a></code></code> event will fire at the target. Otherwise, the drag operation is cancelled, and no <code><code><a href=\"/en-US/docs/Web/API/HTMLElement/drop_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">drop (en-US)</a></code></code> event is fired.</p>\n\n<p>During the <code><code><a href=\"/en-US/docs/Web/API/HTMLElement/drop_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">drop (en-US)</a></code></code> event, you should retrieve that data that was dropped from the event and insert it at the drop location. You can use the <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/dropEffect\"><code>dropEffect</code> <small>(en-US)</small></a> property to determine which drag operation was desired.</p>\n\n<p>As with all drag-related events, the event's <code><a href=\"/ru/docs/Web/API/DataTransfer\" title=\"dataTransfer\"><code>dataTransfer</code></a></code> property will hold the data that is being dragged. The <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/getData\"><code>getData()</code> <small>(en-US)</small></a> method may be used to retrieve the data again.</p>\n\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">onDrop</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span><span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text/plain\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> data<span class=\"token punctuation\">;</span>\n  event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n\n<p>The <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/getData\"><code>getData()</code> <small>(en-US)</small></a> method takes one argument, the type of data to retrieve. It will return the string value that was set when <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/setData\"><code>setData()</code> <small>(en-US)</small></a> was called at the beginning of the drag operation. An empty string will be returned if data of that type does not exist. (Naturally, though, you would likely know that the right type of data was available, as it was previously checked during a <code><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragover_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragover (en-US)</a></code></code> event.)</p>\n\n<p>In the example here, once the data has been retrieved, we insert the string as the textual content of the target. This has the effect of inserting the dragged text where it was dropped, assuming that the drop target is an area of text such as a <code>p</code> or <code>div</code> element.</p>\n\n<p>In a web page, you should call the <a href=\"/ru/docs/Web/API/Event/preventDefault\" title=\"preventDefault()\"><code>preventDefault()</code></a> method of the event if you have accepted the drop, so that the browser's default handling is not triggered by the dropped data as well. For example, when a link is dragged to a web page, Firefox will open the link. By cancelling the event, this behavior will be prevented.</p>\n\n<p>You can retrieve other types of data as well. If the data is a link, it should have the type <code><a href=\"/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Recommended_drag_types#link\" title=\"text/uri-list\">text/uri-list</a></code>. You could then insert a link into the content.</p>\n\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">doDrop</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> lines <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span><span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"text/uri-list\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"\\n\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  lines<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">line</span> <span class=\"token operator\">=&gt;</span> <span class=\"token operator\">!</span>line<span class=\"token punctuation\">.</span><span class=\"token function\">startsWith</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">line</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> link <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      link<span class=\"token punctuation\">.</span>href <span class=\"token operator\">=</span> line<span class=\"token punctuation\">;</span>\n      link<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> line<span class=\"token punctuation\">;</span>\n      event<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>link<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n\n<p>This example inserts a link from the dragged data. As the name implies, the <code><a href=\"/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Recommended_drag_types#link\" title=\"text/uri-list\">text/uri-list</a></code> type actually may contain a list of URLs, each on a separate line. The above code uses <code><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/split\" title=\"split\">split</a></code> to break the string into lines, then iterates over the list of lines, and inserts each as a link into the document. (Note also that links starting with a number sign (<code>#</code>) are skipped, as these are comments.)</p>\n\n<p>For simple cases, you can use the special type <code>URL</code> just to retrieve the first valid URL in the list. For example:</p>\n\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> link <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span><span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"URL\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n\n<p>This eliminates the need to check for comments or iterate through lines yourself. However, it is limited to only the first URL in the list.</p>\n\n<p>The <code>URL</code> type is a special type. It is used only as a shorthand, and it does not appear within the list of types specified in the <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/types\"><code>types</code> <small>(en-US)</small></a> property.</p>\n\n<p>Sometimes you may support some different formats, and you want to retrieve the data that is most specific that is supported. In the following example, three formats are supported by a drop target.</p>\n\n<p>The following example returns the data associated with the best-supported format:</p>\n\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">doDrop</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> supportedTypes <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"application/x-moz-file\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"text/uri-list\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"text/plain\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> types <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span>types<span class=\"token punctuation\">.</span><span class=\"token function\">filter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">type</span> <span class=\"token operator\">=&gt;</span> supportedTypes<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>types<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> event<span class=\"token punctuation\">.</span>dataTransfer<span class=\"token punctuation\">.</span><span class=\"token function\">getData</span><span class=\"token punctuation\">(</span>types<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  event<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"dragend","title":"Окончание перетаскивания","isH3":false,"content":"<p>Как только перетаскивание завершено, событие <code><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragend_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragend (en-US)</a></code></code> запускается в источнике перетаскивания (тот же элемент, который получил событие <code><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragstart_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragstart (en-US)</a></code></code>). Это событие сработает, если перетаскивание было успешным<sup>[1]</sup> или если оно было отменено. Однако вы можете использовать свойство <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/dropEffect\"><code>dropEffect</code> <small>(en-US)</small></a> для определения, какая операция удаления произошла.</p>\n\n<p>Если свойство <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/dropEffect\"><code>dropEffect</code> <small>(en-US)</small></a> имеет значение <code>none</code> во время события <code><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragend_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragend (en-US)</a></code></code>, то перетаскивание было отменено. В противном случае эффект указывает, какая операция была выполнена. Источник может использовать эту информацию после операции перемещения для удаления перетаскиваемого элемента из старого расположения. Свойство <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DataTransfer/mozUserCancelled\"><code>mozUserCancelled</code> <small>(en-US)</small></a> будет присвоено значение <code>true</code>, если пользователь отменил перетаскивание (нажав <kbd>Escape</kbd>), и <code>false</code> если перетаскивание было отменено по другим причинам, таким как недопустимая цель перетаскивания, или если оно было успешным.</p>\n\n<p>Сброс может произойти внутри того же окна или над другим приложением. Событие<code><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragend_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragend (en-US)</a></code></code>будет срабатывать всегда, независимо от этого. Свойство события <a href=\"/ru/docs/Web/API/MouseEvent/screenX\" title=\"screenX\"><code>screenX</code></a> и <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/MouseEvent/screenY\"><code>screenY</code> <small>(en-US)</small></a> будут установлены в координаты экрана, где произошёл сброс.</p>\n\n<p>Когда событие <code><code><a href=\"/en-US/docs/Web/API/HTMLElement/dragend_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragend (en-US)</a></code></code> завершило распространение, операция перетаскивания завершена.</p>\n\n<p>[1]: В Gecko, <code><a href=\"/en-US/docs/Web/API/HTMLElement/dragend_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragend (en-US)</a></code> не отправляется, если исходный узел движется или удаляется во время перетаскивания (например, при сбрасывании или <code><a href=\"/en-US/docs/Web/API/HTMLElement/dragover_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">dragover (en-US)</a></code>). <a class=\"external\" href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=460801\" title=\"New D&amp;D API: dragend is not dispatched if the source node was moved or removed during the drag session\" rel=\" noopener\">Bug 460801</a></p>"}},{"type":"prose","value":{"id":"see_also","title":"Смотрите также","isH3":false,"content":"<ul>\n <li><a class=\"internal\" href=\"/docs/Web/API/HTML_Drag_and_Drop_API\" title=\"HTML Drag and Drop API\">HTML Drag and Drop API (Overview)</a></li>\n <li><a class=\"internal\" href=\"/docs/Web/Guide/HTML/Dragging_and_Dropping_Multiple_Items\" title=\"Dragging and Dropping Multiple Items\">Dragging and Dropping Multiple Items</a></li>\n <li><a class=\"internal\" href=\"/docs/Web/Guide/HTML/Recommended_Drag_Types\" title=\"Recommended Drag Types\">Recommended Drag Types</a></li>\n <li><a href=\"https://html.spec.whatwg.org/multipage/interaction.html#dnd\" title=\"Drag and Drop Standard\" class=\"external\" rel=\" noopener\">HTML5 Living Standard: Drag and Drop</a></li>\n</ul>"}}],"toc":[{"text":"<code>draggable</code> атрибуты","id":"draggableattribute"},{"text":"Начало операции перетаскивания","id":"dragstart"},{"text":"Drag-данные","id":"dragdata"},{"text":"Настройка изображения отклика drag","id":"dragfeedback"},{"text":"Drag эффекты","id":"drageffects"},{"text":"Указание drop-целей","id":"droptargets"},{"text":"Drop Feedback","id":"dropfeedback"},{"text":"Performing a Drop","id":"drop"},{"text":"Окончание перетаскивания","id":"dragend"},{"text":"Смотрите также","id":"see_also"}],"summary":"Ниже описаны шаги, которые происходят при drag and drop операции.","popularity":0.0002,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Drag operations","locale":"en-US","native":"English (US)"},{"title":"Opérations de glissement","locale":"fr","native":"Français"},{"title":"ドラッグ操作","locale":"ja","native":"日本語"},{"title":"Drag Operations","locale":"ko","native":"한국어"},{"title":"拖拽操作","locale":"zh-CN","native":"中文 (简体)"},{"title":"拖曳操作","locale":"zh-TW","native":"正體中文 (繁體)"}],"source":{"folder":"ru/web/api/html_drag_and_drop_api/drag_operations","github_url":"https://github.com/mdn/translated-content/blob/main/files/ru/web/api/html_drag_and_drop_api/drag_operations/index.html","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.html"},"parents":[{"uri":"/ru/docs/Web","title":"Веб-технологии для разработчиков"},{"uri":"/ru/docs/Web/API","title":"Интерфейсы веб API"},{"uri":"/ru/docs/Web/API/HTML_Drag_and_Drop_API","title":"HTML Drag and Drop API"},{"uri":"/ru/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations","title":"Drag Operations"}],"pageTitle":"Drag Operations - Интерфейсы веб API | MDN","noIndexing":false}}