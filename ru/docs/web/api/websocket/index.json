{"doc":{"isMarkdown":false,"isTranslated":true,"isActive":true,"flaws":{},"title":"WebSocket","mdn_url":"/ru/docs/Web/API/WebSocket","locale":"ru","native":"Русский","sidebarHTML":"","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>Объект <strong>WebSocket </strong>предоставляет API для создания и управления <a href=\"/ru/WebSockets\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">веб-сокет</a>-подключения к серверу, а также для отправки и получения данных в этом подключении.</p>\n\n<p>Конструктор WebSocket принимает один обязательный и один опциональный параметр:</p>\n\n<pre class=\"notranslate\">WebSocket WebSocket(\n  in DOMString url,\n  in optional DOMString protocols\n);\n\nWebSocket WebSocket(\n  in DOMString url,\n  in optional DOMString[] protocols\n);\n</pre>\n\n<dl>\n <dt id=\"url\"><code>url</code></dt>\n <dd>URL-адрес к которому подключаться; сервер по этому адресу должен ответить на websocket-запрос.</dd>\n <dt id=\"protocols\"><code>protocols</code> <span class=\"badge inline optional\">Необязательный</span></dt>\n <dd>Протокол в виде строки или массив строк протоколов. Эти строки используются для определения подпротоколов клиента, т.к. один сервер может поддерживать несколько WebSocket-подпротоколов (например, вы можете захотеть, чтобы один сервер мог обрабатывать разные типы взаимодействия в зависимости от указанного протокола).  Если вы не укажете значение протокола, по умолчанию будет использоваться пустая строка.</dd>\n</dl>\n\n<p>Конструктор может выбросить исключение:</p>\n\n<dl>\n <dt id=\"security_err\"><code>SECURITY_ERR</code></dt>\n <dd>Порт, на который устанавливается подключение заблокирован.</dd>\n</dl>\n\n<dl>\n</dl>"}},{"type":"prose","value":{"id":"method_overview","title":"Обзор метода","isH3":false,"content":"<table class=\"standard-table\">\n <tbody>\n  <tr>\n   <td><code>void <a href=\"#close()\">close</a>(in optional unsigned long code, in optional DOMString reason);</code></td>\n  </tr>\n  <tr>\n   <td><code>void <a href=\"#send()\">send</a>(in DOMString data);</code></td>\n  </tr>\n </tbody>\n</table>"}},{"type":"prose","value":{"id":"атрибуты","title":"<strong>Атрибуты</strong>","isH3":false,"content":"<table class=\"standard-table\">\n <tbody>\n  <tr>\n   <td class=\"header\">Атрибут</td>\n   <td class=\"header\">Тип</td>\n   <td class=\"header\">Описание</td>\n  </tr>\n  <tr>\n   <td><code>binaryType</code></td>\n   <td><a href=\"/ru/docs/conflicting/Web/JavaScript/Reference/Global_Objects/String_6fa58bba0570d663099f0ae7ae8883ab\"><code>DOMString</code></a></td>\n   <td>Строка, указывающая на тип двоичных данных, которые будут переданы по соединению. Это может быть \"blob\" если будут использованы <a href=\"/ru/docs/Web/API/Blob\"><code>Blob</code></a> объекты или \"arraybuffer\" если будут использованы объекты <a href=\"/en-US/JavaScript_typed_arrays/ArrayBuffer\" title=\"en/JavaScript typed arrays/ArrayBuffer\"><code>ArrayBuffer</code></a> </td>\n  </tr>\n  <tr>\n   <td><code>bufferedAmount</code></td>\n   <td><code><a href=\"/en-US/unsigned_long\" title=\"en/unsigned long\">unsigned long</a></code></td>\n   <td>Количество байтов данных, которые были поставлены в очередь, используя вызовы <a href=\"#send\">send</a>, но ещё не переданные в сеть. Это значение не сбрасывается в ноль, при закрытии соединения; если продолжить вызывать  <a href=\"#send\">send</a>, значение будет расти. <strong>Только чтение.</strong></td>\n  </tr>\n  <tr>\n   <td><code>extensions</code></td>\n   <td><a href=\"/ru/docs/conflicting/Web/JavaScript/Reference/Global_Objects/String_6fa58bba0570d663099f0ae7ae8883ab\"><code>DOMString</code></a></td>\n   <td>Расширения, выбранные сервером. В настоящее время это только пустая строка или список расширений, согласованных соединением.</td>\n  </tr>\n  <tr>\n   <td><code>onclose</code></td>\n   <td><a href=\"/ru/docs/conflicting/Web/API/EventTarget/addEventListener\"><code>EventListener</code></a></td>\n   <td>Обработчик событий, вызываемый, когда <code>readyState </code>WebSocket соединения изменяется на <code>CLOSED</code>. Наблюдатель получает <a href=\"/en-US/WebSockets/WebSockets_reference/CloseEvent\" title=\"en/WebSockets/WebSockets reference/CloseEvent\"><code>CloseEvent</code></a> с именем \"close\".</td>\n  </tr>\n  <tr>\n   <td><code>onerror</code></td>\n   <td><a href=\"/ru/docs/conflicting/Web/API/EventTarget/addEventListener\"><code>EventListener</code></a></td>\n   <td>\n    <p>Обработчик событий, вызываемый, когда происходит ошибка. Это простое событие, называемое \"error\".</p>\n   </td>\n  </tr>\n  <tr>\n   <td><code>onmessage</code></td>\n   <td><a href=\"/ru/docs/conflicting/Web/API/EventTarget/addEventListener\"><code>EventListener</code></a></td>\n   <td>\n    <p>Обработчик событий , вызываемый, когда получается сообщение с сервера. Наблюдатель получает <code><a href=\"en-US/docs/Web/API/MessageEvent\" title=\"en-US/docs/Web/API/MessageEvent\">MessageEvent</a></code>,  называемое \"message\".</p>\n   </td>\n  </tr>\n  <tr>\n   <td><code>onopen</code></td>\n   <td><a href=\"/ru/docs/conflicting/Web/API/EventTarget/addEventListener\"><code>EventListener</code></a></td>\n   <td>\n    <p>Наблюдатель событий, вызываемый, когда <code>readyState</code> WebSocket - соединения изменяется на <code>OPEN</code>; это показывает, что соединение готово отсылать и принимать данные. Это простое событие, называемое \"open\".</p>\n   </td>\n  </tr>\n  <tr>\n   <td><code>protocol</code></td>\n   <td><a href=\"/ru/docs/conflicting/Web/JavaScript/Reference/Global_Objects/String_6fa58bba0570d663099f0ae7ae8883ab\"><code>DOMString</code></a></td>\n   <td>\n    <p>Строка, обозначающая имя подпротокола выбранного сервера; это будет одной из строк, указываемой в параметре <code>protocols</code> при создании WebSocket - объекта.</p>\n   </td>\n  </tr>\n  <tr>\n   <td><code>readyState</code></td>\n   <td><code><a href=\"/en-US/unsigned_short\" title=\"en/unsigned short\">unsigned short</a></code></td>\n   <td>\n    <p>Текущее состояние подключения; это одно из <a href=\"#ready_state_constants\">Ready state constants</a>. <strong>Только для чтения</strong><strong>.</strong></p>\n   </td>\n  </tr>\n  <tr>\n   <td><code>url</code></td>\n   <td><a href=\"/ru/docs/conflicting/Web/JavaScript/Reference/Global_Objects/String_6fa58bba0570d663099f0ae7ae8883ab\"><code>DOMString</code></a></td>\n   <td>\n    <p>URL, создаваемый конструктором. Это всегда абсолютный URL. <strong>Только для чтения.</strong></p>\n   </td>\n  </tr>\n </tbody>\n</table>","titleAsText":"Атрибуты"}},{"type":"prose","value":{"id":"constants","title":"Константы","isH3":false,"content":""}},{"type":"prose","value":{"id":"константы_состояния_готовности","title":"Константы состояния готовности","isH3":true,"content":"<p>Эти константы используются атрибутом <code>readyState</code> для описания состояния WebSocket - подключения</p>\n\n<table class=\"standard-table\">\n <tbody>\n  <tr>\n   <td class=\"header\">Константа</td>\n   <td class=\"header\">Значение</td>\n   <td class=\"header\">Описание</td>\n  </tr>\n  <tr>\n   <td><code>CONNECTING</code></td>\n   <td><code>0</code></td>\n   <td>Соединение ещё не открыто.</td>\n  </tr>\n  <tr>\n   <td><code>OPEN</code></td>\n   <td><code>1</code></td>\n   <td>Соединение открыто и готово к обмену данными.</td>\n  </tr>\n  <tr>\n   <td><code>CLOSING</code></td>\n   <td><code>2</code></td>\n   <td>Соединение в процессе закрытия.</td>\n  </tr>\n  <tr>\n   <td><code>CLOSED</code></td>\n   <td><code>3</code></td>\n   <td>Соединение закрыто или не может открыться.</td>\n  </tr>\n </tbody>\n</table>"}},{"type":"prose","value":{"id":"methods","title":"Методы","isH3":false,"content":""}},{"type":"prose","value":{"id":"close","title":"close()","isH3":true,"content":"<p>Закрывает WebSocket - подключение или заканчивает попытку подключения. Если подключение уже закрыто, этот метод не делает ничего.</p>\n\n<pre class=\"eval notranslate\">void close(\n  in optional unsigned short code,\n  in optional DOMString reason\n);\n</pre>\n\n<h6 id=\"parameters\">Параметры</h6>\n\n<dl>\n <dt id=\"code\"><code>code</code> <span class=\"badge inline optional\">Необязательный</span></dt>\n <dd>Числовое значение, обозначающее статус-код, описывающий почему подключение будет закрыто. Если параметр не указан, значение по умолчанию равно 1000(обозначает \"обмен завершён\"). Смотрите <a href=\"en-US/docs/Web/API/CloseEvent#properties\" title=\"en-US/docs/Web/API/CloseEvent#properties\">list of status codes</a> для <code><a href=\"en-US/docs/Web/API/CloseEvent\" title=\"en-US/docs/Web/API/CloseEvent\">CloseEvent</a></code>, чтобы узнать разрешённые значения.</dd>\n <dt id=\"reason\"><code>reason</code> <span class=\"badge inline optional\">Необязательный</span></dt>\n <dd>Читаемая человеком строка, объясняющая, почему подключение закрывается. Строка должна быть не длиннее, чем 123 байта UTF-8 текста (<strong>не</strong> символов). </dd>\n</dl>\n\n<h6 id=\"возможные_исключения\">Возможные исключения</h6>\n\n<dl>\n <dt id=\"invalid_access_err\"><code>INVALID_ACCESS_ERR</code></dt>\n <dd>Указан неверный <code>code</code>.</dd>\n <dt id=\"syntax_err\"><code>SYNTAX_ERR</code></dt>\n <dd>Строка <code>reason</code> слишком длинные или содержит непарные суррогаты.</dd>\n</dl>\n\n<h6 id=\"примечания\">Примечания</h6>\n\n<p>В Gecko этот метод не поддерживает никакие параметры включительно до Gecko 8.0 (Firefox 8.0 / Thunderbird 8.0 / SeaMonkey 2.5).</p>"}},{"type":"prose","value":{"id":"send","title":"send()","isH3":true,"content":"<p>Передаёт данные на сервер через WebSocket - соединение.</p>\n\n<pre class=\"eval notranslate\">void send(\n  in DOMString data\n);\n\nvoid send(\n  in ArrayBuffer data\n);\n\nvoid send(\n  in Blob data\n);\n</pre>\n\n<h6 id=\"parameters\">Параметры</h6>\n\n<dl>\n <dt id=\"data\"><code>data</code></dt>\n <dd>Текстовая строка, которая будет отправлена на сервер.</dd>\n</dl>\n\n<h6 id=\"возможные_исключения_2\">Возможные исключения</h6>\n\n<dl>\n <dt id=\"invalid_state_err\"><code>INVALID_STATE_ERR</code></dt>\n <dd>Соединение ещё не открыто.</dd>\n <dt id=\"syntax_err_2\"><code>SYNTAX_ERR</code></dt>\n <dd>Строка <code>data</code> содержит непарные суррогаты</dd>\n</dl>\n\n<div class=\"note notecard\" id=\"sect1\">\n<p><strong>Заметьте:</strong> Gecko - реализация метода <code>send()</code> несколько отличается от специфицированной в <span title=\"(Firefox 6.0 / Thunderbird 6.0 / SeaMonkey 2.3)\">Gecko&nbsp;6.0</span>; Gecko возвращает <code>boolean</code>, обозначающий, открыто ли соединение до сих пор (и, в дополнение, были ли доставлены данные); это было исправлено в <span title=\"(Firefox 8.0 / Thunderbird 8.0 / SeaMonkey 2.5)\">Gecko&nbsp;8.0</span>.</p>\n\n<p>Начиная с <span title=\"(Firefox 11.0 / Thunderbird 11.0 / SeaMonkey 2.8)\">Gecko&nbsp;11.0</span>, поддержка <code><a href=\"/en-US/JavaScript_typed_arrays/ArrayBuffer\" title=\"en/JavaScript typed arrays/ArrayBuffer\">ArrayBuffer</a></code> была реализована, но не <a href=\"/ru/docs/Web/API/Blob\"><code>Blob</code></a> типы данных.</p>\n</div>"}},{"type":"prose","value":{"id":"see_also","title":"Спецификации","isH3":false,"content":"<table class=\"standard-table\">\n <tbody>\n  <tr>\n   <td> <strong>Спецификация</strong></td>\n   <td><strong>Статус</strong></td>\n  </tr>\n  <tr>\n   <td><a href=\"https://html.spec.whatwg.org/multipage/web-sockets.html#the-websocket-interface\" hreflang=\"en\" lang=\"en\" class=\"external\" rel=\" noopener\">HTML Living Standard<br><small lang=\"ru\">Определение 'WebSocket' в этой спецификации.</small></a></td>\n   <td><span class=\"spec-living\">Живой стандарт</span></td>\n  </tr>\n </tbody>\n</table>"}},{"type":"prose","value":{"id":"see_also_2","title":"Пример","isH3":false,"content":"<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// Создаёт WebSocket - подключение.</span>\n<span class=\"token keyword\">const</span> socket <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">WebSocket</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ws://localhost:8080'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Соединение открыто</span>\nsocket<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'open'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    socket<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello Server!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Наблюдает за сообщениями</span>\nsocket<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'message'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Message from server '</span><span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>"}},{"type":"browser_compatibility","value":{"title":"Совместимость с браузерами","id":"совместимость_с_браузерами","isH3":false,"query":"api.WebSocket","dataURL":"/ru/docs/Web/API/WebSocket/bcd.json"}},{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<div id=\"sect2\">\n\n\n<p></p><p></p>\n</div>"}},{"type":"prose","value":{"id":"see_also_3","title":"Смотрите также","isH3":false,"content":"<ul>\n <li><a href=\"/en-US/WebSockets/Writing_WebSocket_client_applications\" title=\"en/WebSockets/Writing WebSocket client applications\">Writing WebSocket client applications</a></li>\n <li><a class=\"external\" href=\"https://dev.w3.org/html5/websockets/\" rel=\" noopener\">HTML5: WebSockets</a></li>\n</ul>"}}],"toc":[{"text":"Обзор метода","id":"method_overview"},{"text":"<strong>Атрибуты</strong>","id":"атрибуты"},{"text":"Константы","id":"constants"},{"text":"Методы","id":"methods"},{"text":"Спецификации","id":"see_also"},{"text":"Пример","id":"see_also_2"},{"text":"Совместимость с браузерами","id":"совместимость_с_браузерами"},{"text":"Смотрите также","id":"see_also_3"}],"summary":"Объект WebSocket предоставляет API для создания и управления веб-сокет-подключения к серверу, а также для отправки и получения данных в этом подключении.","popularity":0.0011,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"WebSocket","locale":"en-US","native":"English (US)"},{"title":"WebSocket","locale":"es","native":"Español"},{"title":"WebSocket","locale":"fr","native":"Français"},{"title":"WebSocket","locale":"ja","native":"日本語"},{"title":"WebSocket","locale":"ko","native":"한국어"},{"title":"WebSocket","locale":"pt-BR","native":"Português (do Brasil)"},{"title":"WebSocket","locale":"zh-CN","native":"中文 (简体)"},{"title":"WebSocket","locale":"zh-TW","native":"正體中文 (繁體)"}],"source":{"folder":"ru/web/api/websocket","github_url":"https://github.com/mdn/translated-content/blob/main/files/ru/web/api/websocket/index.html","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.html"},"parents":[{"uri":"/ru/docs/Web","title":"Веб-технологии для разработчиков"},{"uri":"/ru/docs/Web/API","title":"Интерфейсы веб API"},{"uri":"/ru/docs/Web/API/WebSocket","title":"WebSocket"}],"pageTitle":"WebSocket - Интерфейсы веб API | MDN","noIndexing":false}}