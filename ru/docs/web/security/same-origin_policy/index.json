{"doc":{"isMarkdown":false,"isTranslated":true,"isActive":true,"flaws":{},"title":"Same-origin policy","mdn_url":"/ru/docs/Web/Security/Same-origin_policy","locale":"ru","native":"Русский","sidebarHTML":"\n<ol></ol>\n","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p><strong>Политика одинакового источника</strong> (same-origin policy) определяет как документ или скрипт, загруженный из одного источника (<a href=\"/ru/docs/Glossary/Origin\">origin</a>), может взаимодействовать с ресурсом из другого источника. Это помогает изолировать потенциально вредоносные документы, снижая количество возможных векторов атак.</p>"}},{"type":"prose","value":{"id":"определение_origin","title":"Определение origin","isH3":false,"content":"<p>Две страницы имеют одинаковый origin (источник) если протокол , порт (если указан), и хост одинаковы для обоих страниц. Время от времени, вы можете видеть это как  \"scheme/host/port tuple\" (где \"tuple\"<sup> переводится как кортеж или запись</sup> набор из трёх компонент, которые вместе составляют единое целое).</p>\n\n<p>В следующей таблице даны примеры origin-сравнений с URL <code>http://store.company.com/dir/page.html</code>:</p>\n\n<table class=\"standard-table\">\n <tbody>\n  <tr>\n   <th>URL</th>\n   <th>Outcome</th>\n   <th>Reason</th>\n  </tr>\n  <tr>\n   <td><code>http://store.company.com/dir2/other.html</code></td>\n   <td>Success</td>\n   <td></td>\n  </tr>\n  <tr>\n   <td><code>http://store.company.com/dir/inner/another.html</code></td>\n   <td>Success</td>\n   <td></td>\n  </tr>\n  <tr>\n   <td><code>https://store.company.com/secure.html</code></td>\n   <td>Failure</td>\n   <td>Different protocol</td>\n  </tr>\n  <tr>\n   <td><code>http://store.company.com:81/dir/etc.html</code></td>\n   <td>Failure</td>\n   <td>Different port</td>\n  </tr>\n  <tr>\n   <td><code>http://news.company.com/dir/other.html</code></td>\n   <td>Failure</td>\n   <td>Different host</td>\n  </tr>\n </tbody>\n</table>\n\n<p>Смотрите также <a href=\"/en-US/docs/Same-origin_policy_for_file:_URIs\" title=\"This is a link to an unwritten page\" class=\"page-not-created\">origin definition for <code>file:</code> URLs</a>.</p>"}},{"type":"prose","value":{"id":"наследование_origins","title":"Наследование origins","isH3":true,"content":"<p>Контент из <code>about:blank</code> и <code>javascript:</code> адреса наследуют источник документа, содержащего этот URL, поскольку они не содержат информации о сервере происхождения.</p>\n\n<div class=\"note notecard\" id=\"sect1\">\n<p>Например, <code>about:blank</code> часто используется в качестве URL новых, пустых окон в которые родительский скрипт записывает контент (например, с помощью <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Window/open\"><code>Window.open()</code> <small>(en-US)</small></a>). Если это окно также содержит JavaScript, то скрипт будет наследовать то же происхождение, что и его родитель.</p>\n</div>\n\n<div class=\"warning notecard\" id=\"sect2\">\n<p style=\"line-height: 30px;\"><code>data:</code> адреса получают новый, пустой, безопасный контекст.</p>\n</div>"}},{"type":"prose","value":{"id":"исключения_в_internet_explorer","title":"Исключения в Internet Explorer","isH3":true,"content":"<p>Internet Explorer два основных исключения из политики одно происхождения:</p>\n\n<dl>\n <dt id=\"trust_zones_зоны_доверия\">Trust Zones (Зоны доверия)</dt>\n <dd>Если оба домена находятся в зоне высокого доверия (например, зоны корпоративной интрасети), то ограничения на одно и то же происхождение не применяется.</dd>\n <dt id=\"порт\">Порт</dt>\n <dd>IE не включает порт в same-origin проверку. Следовательно, <code>https://company.com:81/index.html</code> и <code>https://company.com/index.html</code> являются адресами одного происхождения и ограничения действовать не будут.</dd>\n</dl>\n\n<p>Эти исключения являются нестандартными и не поддерживаются в любом другом браузере</p>"}},{"type":"prose","value":{"id":"изменение_origin","title":"Изменение origin","isH3":false,"content":"<p>Страница может изменить свой оригинальный origin с некоторыми ограничениями. Скрипт может установить значение <a href=\"/ru/docs/Web/API/Document/domain\"><code>document.domain</code></a> на текущий домен или супердомен текущего домена. Если значение будет установлено на супердомен текущего домена, более короткий домен будет использован для последующей проверки origin'а. Например, предполагается, что скрипт в документе по адресу <code>http://store.company.com/dir/other.html</code> выполняется следующим выражением:</p>\n\n<div class=\"code-example\"><pre class=\"brush: js line-numbers language-js notranslate\"><code>document<span class=\"token punctuation\">.</span>domain <span class=\"token operator\">=</span> <span class=\"token string\">\"company.com\"</span><span class=\"token punctuation\">;</span></code></pre></div>\n\n<p>После этого, страница может пройти такую же проверку на <code>http://company.com/dir/page.html</code> (<code>предполагая, что http://company.com/dir/page.html</code> установил <code>document.domain</code> в значение \"<code>company.com</code>\" чтобы указать, что у него получилось разрешение - смотри <a href=\"/ru/docs/Web/API/Document/domain\"><code>document.domain</code></a>). Однако, <code>company.com</code> <strong>не может </strong>установить <code>document.domain</code> в значение <code>othercompany.com</code>, поскольку это значение не является супердоменом <code>company.com</code>.</p>\n\n<p>Номер порта проверяется браузером отдельно. Любой вызов <code>document.domain</code>, включающий <code>document.domain = document.domain</code>, заменяет номер порта, устанавливая его в значение <code>null</code>. Следовательно, <strong>невозможно</strong> вызов <code>company.com:8080</code> обозначить <code>company.com</code> одной лишь установкой<code>document.domain = \"company.com\"</code> в начале. Он должен быть установлен в обоих случаях и номер портов в этих случаях должны равняться значению <code>null</code>.</p>\n\n<div class=\"note notecard\" id=\"sect3\">\n<p><strong>Замечание:</strong> Когда используется <code>document.domain</code> для разрешения поддомена для родительского доступа к нему, вы должны установить <code>document.domain</code> в<em> такое же значение, </em>как в родительском домене, так и в поддомене. Это необходимо, даже если при этом просто восстанавливается исходное значение родительского домена. Несоблюдение этого правила может привести к ошибкам разрешений.</p>\n</div>"}},{"type":"prose","value":{"id":"cross-origin_network_access","title":"Cross-origin network access","isH3":false,"content":"<p>The same-origin policy controls interactions between two different origins, such as when you use <a href=\"/ru/docs/Web/API/XMLHttpRequest\"><code>XMLHttpRequest</code></a> or an <a href=\"/ru/docs/Web/HTML/Element/img\"><code>&lt;img&gt;</code></a> element. These interactions are typically placed into three categories:</p>\n\n<ul>\n <li>Cross-origin <em>writes </em>are typically allowed. Examples are links, redirects and form submissions. Certain rarely used HTTP requests require <a href=\"/en-US/docs/Web/HTTP/CORS#preflighted_requests\" title=\"HTTP/Access_control_CORS#Preflighted_requests\">preflight</a>.</li>\n <li>Cross-origin <em>embedding </em>is typically allowed. Examples are listed below.</li>\n <li>Cross-origin <em>reads </em>are typically not allowed, but read access is often leaked by embedding. For example, you can read the width and height of an embedded image, the actions of an embedded script, or the <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=629094\" class=\"external\" rel=\" noopener\">availability of an embedded resource</a>.</li>\n</ul>\n\n<p>Here are some examples of resources which may be embedded cross-origin:</p>\n\n<ul>\n <li>JavaScript with <code>&lt;script src=\"...\"&gt;&lt;/script&gt;</code>. Error messages for syntax errors are only available for same-origin scripts.</li>\n <li>CSS with <code>&lt;link rel=\"stylesheet\" href=\"...\"&gt;</code>. Due to the <a href=\"http://scarybeastsecurity.blogspot.dk/2009/12/generic-cross-browser-cross-domain.html\" title=\"http://scarybeastsecurity.blogspot.dk/2009/12/generic-cross-browser-cross-domain.html\" class=\"external\" rel=\" noopener\">relaxed syntax rules</a> of CSS, cross-origin CSS requires a correct <code>Content-Type</code> header. Restrictions vary by browser: <a href=\"http://msdn.microsoft.com/en-us/library/ie/gg622939%28v=vs.85%29.aspx\" class=\"external\" rel=\" noopener\">IE</a>, <a href=\"https://www.mozilla.org/security/announce/2010/mfsa2010-46.html\" title=\"http://www.mozilla.org/security/announce/2010/mfsa2010-46.html\" class=\"external\" rel=\" noopener\">Firefox</a>, <a href=\"https://code.google.com/p/chromium/issues/detail?id=9877\" class=\"external\" rel=\" noopener\">Chrome</a>, <a href=\"https://support.apple.com/kb/HT4070\" class=\"external\" rel=\" noopener\">Safari</a> (scroll down to CVE-2010-0051) and <a href=\"https://www.opera.com/support/kb/view/943/\" class=\"external\" rel=\" noopener\">Opera</a>.</li>\n <li>Images with <a href=\"/ru/docs/Web/HTML/Element/img\"><code>&lt;img&gt;</code></a>. Supported image formats include PNG, JPEG, GIF, BMP, SVG, ...</li>\n <li>Media files with <a href=\"/ru/docs/Web/HTML/Element/video\"><code>&lt;video&gt;</code></a> and <a href=\"/ru/docs/Web/HTML/Element/audio\"><code>&lt;audio&gt;</code></a>.</li>\n <li>Plug-ins with <a href=\"/en-US/docs/Web/HTML/Element/object\" title=\"HTML/Element/object\"><code>&lt;object&gt;</code></a>, <a href=\"/en-US/docs/Web/HTML/Element/embed\" title=\"HTML/Element/embed\"><code>&lt;embed&gt;</code></a> and <a href=\"/en-US/docs/Web/HTML/Element/applet\" title=\"HTML/Element/applet\"><code>&lt;applet&gt;</code></a>.</li>\n <li>Fonts with <a href=\"/en-US/docs/Web/CSS/@font-face\" title=\"CSS/@font-face\"><code>@font-face</code></a>. Some browsers allow cross-origin fonts, others require same-origin fonts.</li>\n <li>Anything with <a href=\"/en-US/docs/Web/HTML/Element/frame\" title=\"HTML/Element/frame\"><code>&lt;frame&gt;</code></a> and <a href=\"/en-US/docs/Web/HTML/Element/iframe\" title=\"HTML/Element/iframe\"><code>&lt;iframe&gt;</code></a>. A site can use the <code><a href=\"/en-US/docs/Web/HTTP/Headers/X-Frame-Options\" title=\"HTTP/X-Frame-Options\">X-Frame-Options</a></code> header to prevent this form of cross-origin interaction.</li>\n</ul>"}},{"type":"prose","value":{"id":"how_to_allow_cross-origin_access","title":"How to allow cross-origin access","isH3":true,"content":"<p>Use <a href=\"/en-US/docs/Web/HTTP/CORS\" title=\"HTTP/Access_control_CORS\">CORS</a> to allow cross-origin access.</p>"}},{"type":"prose","value":{"id":"how_to_block_cross-origin_access","title":"How to block cross-origin access","isH3":true,"content":"<ul>\n <li>To prevent cross-origin writes, check for an unguessable token in the request, known as a <a href=\"https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29\" class=\"external\" rel=\" noopener\">Cross-Site Request Forgery (CSRF)</a> token. You must prevent cross-origin reads of pages that know this token.</li>\n <li>To prevent cross-origin reads of a resource, ensure that it is not embeddable. It is often necessary to prevent embedding because embedding a resource always leaks some information about it.</li>\n <li>To prevent cross-origin embedding, ensure that your resource cannot be interpreted as one of the embeddable formats listed above. The browser does not respect the <code>Content-Type</code> in most cases. For example, if you point a <code>&lt;script&gt;</code> tag at an HTML document, the browser will try to parse the HTML as JavaScript. When your resource is not an entry point to your site, you can also use a CSRF token to prevent embedding.</li>\n</ul>"}},{"type":"prose","value":{"id":"cross-origin_script_api_access","title":"Cross-origin script API access","isH3":false,"content":"<p>JavaScript APIs such as <a href=\"/en-US/docs/Web/API/HTMLIFrameElement\" title=\"DOM/HTMLIFrameElement\"><code>iframe.contentWindow</code></a>, <a href=\"/ru/docs/Web/API/Window/parent\"><code>window.parent</code></a>, <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Window/open\"><code>window.open</code> <small>(en-US)</small></a> and <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Window/opener\"><code>window.opener</code> <small>(en-US)</small></a> allow documents to directly reference each other. When the two documents do not have the same origin, these references provide very limited access to <a href=\"/en-US/docs/Web/API/Window\"><code>Window</code></a> and <a href=\"/en-US/docs/Web/API/Location\"><code>Location</code></a> objects, as described in the next two sections.</p>\n\n<p>To communicate further between documents from different origins, use <a href=\"/ru/docs/Web/API/Window/postMessage\"><code>window.postMessage</code></a>.</p>"}},{"type":"prose","value":{"id":"window","title":"Window","isH3":true,"content":"<p>Specification:  <a href=\"https://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#security-window\" class=\"external\" rel=\" noopener\">http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#security-window</a>.</p>\n\n<p>The following cross-origin access to <code>Window</code> properties is allowed:</p>\n\n<table class=\"fullwidth-table standard-table\">\n <thead>\n  <tr>\n   <th scope=\"col\">Methods</th>\n  </tr>\n </thead>\n <tbody>\n  <tr>\n   <td><a href=\"/ru/docs/Web/API/Window/blur\"><code>window.blur</code></a></td>\n  </tr>\n  <tr>\n   <td><a href=\"/ru/docs/Web/API/Window/close\"><code>window.close</code></a></td>\n  </tr>\n  <tr>\n   <td><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Window/focus\"><code>window.focus</code> <small>(en-US)</small></a></td>\n  </tr>\n  <tr>\n   <td><a href=\"/ru/docs/Web/API/Window/postMessage\"><code>window.postMessage</code></a></td>\n  </tr>\n </tbody>\n</table>\n\n<table class=\"fullwidth-table standard-table\">\n <thead>\n  <tr>\n   <th scope=\"col\">Attributes</th>\n   <th scope=\"col\"></th>\n  </tr>\n </thead>\n <tbody>\n  <tr>\n   <td><a href=\"/ru/docs/Web/API/Window/closed\"><code>window.closed</code></a></td>\n   <td>Read only.</td>\n  </tr>\n  <tr>\n   <td><a href=\"/ru/docs/Web/API/Window/frames\"><code>window.frames</code></a></td>\n   <td>Read only.</td>\n  </tr>\n  <tr>\n   <td><a href=\"/ru/docs/Web/API/Window/length\"><code>window.length</code></a></td>\n   <td>Read only.</td>\n  </tr>\n  <tr>\n   <td><a href=\"/ru/docs/Web/API/Window/location\"><code>window.location</code></a></td>\n   <td>Read/write.</td>\n  </tr>\n  <tr>\n   <td><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Window/opener\"><code>window.opener</code> <small>(en-US)</small></a></td>\n   <td>Read only.</td>\n  </tr>\n  <tr>\n   <td><a href=\"/ru/docs/Web/API/Window/parent\"><code>window.parent</code></a></td>\n   <td>Read only.</td>\n  </tr>\n  <tr>\n   <td><a href=\"/ru/docs/Web/API/Window/self\"><code>window.self</code></a></td>\n   <td>Read only.</td>\n  </tr>\n  <tr>\n   <td><a href=\"/ru/docs/Web/API/Window/top\"><code>window.top</code></a></td>\n   <td>Read only.</td>\n  </tr>\n  <tr>\n   <td><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Window/window\"><code>window.window</code> <small>(en-US)</small></a></td>\n   <td>Read only.</td>\n  </tr>\n </tbody>\n</table>\n\n<p>Some browsers allow access to more properties than the specification allows.</p>"}},{"type":"prose","value":{"id":"location","title":"Location","isH3":true,"content":"<p>Specification:  <a href=\"https://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#security-location\" class=\"external\" rel=\" noopener\">http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#security-location</a>.</p>\n\n<p>The following cross-origin access to <code>Location</code> properties is allowed:</p>\n\n<table class=\"fullwidth-table standard-table\">\n <thead>\n  <tr>\n   <th scope=\"col\">Methods</th>\n  </tr>\n </thead>\n <tbody>\n  <tr>\n   <td><a href=\"/ru/docs/Web/API/Location/replace\"><code>location.replace</code></a></td>\n  </tr>\n </tbody>\n</table>\n\n<table class=\"fullwidth-table standard-table\">\n <thead>\n  <tr>\n   <th scope=\"col\">Attributes</th>\n   <th scope=\"col\"></th>\n  </tr>\n </thead>\n <tbody>\n  <tr>\n   <td><a class=\"page-not-created\" title=\"Документация об этом ещё не написана; пожалуйста, поспособствуйте её написанию!\"><code>URLUtils.href</code></a></td>\n   <td>Write only.</td>\n  </tr>\n </tbody>\n</table>\n\n<p>Some browsers allow access to more properties than the specification allows.</p>"}},{"type":"prose","value":{"id":"cross-origin_data_storage_access","title":"Cross-origin data storage access","isH3":false,"content":"<p>Access to data stored in the browser such as <a href=\"/en-US/docs/Web/API/Web_Storage_API\">localStorage</a> and <a href=\"/en-US/docs/Web/API/IndexedDB_API\">IndexedDB</a> are separated by origin. Each origin gets its own separate storage, and JavaScript in one origin cannot read from or write to the storage belonging to another origin.</p>\n\n<p>Cookies use a separate definition of origins. A page can set a cookie for its own domain or any parent domain, as long as the parent domain is not a public suffix. Firefox and Chrome use the <a href=\"http://publicsuffix.org/\" class=\"external\" rel=\" noopener\">Public Suffix List</a> to determine if a domain is a public suffix. Internet Explorer uses its own internal method to determine if a domain is a public suffix. The browser will make a cookie available to the given domain including any sub-domains, no matter which protocol (HTTP/HTTPS) or port is used. When you set a cookie, you can limit its availability using the Domain, Path, Secure and Http-Only flags. When you read a cookie, you cannot see from where it was set. Even if you use only secure https connections, any cookie you see may have been set using an insecure connection.</p>"}},{"type":"prose","value":{"id":"see_also","title":"See also","isH3":false,"content":"<ul>\n <li><a href=\"/en-US/docs/Same-origin_policy_for_file:_URIs\" title=\"This is a link to an unwritten page\" class=\"page-not-created\">Same-origin policy for file: URIs</a></li>\n <li><a href=\"https://www.w3.org/Security/wiki/Same_Origin_Policy\" class=\"external\" rel=\" noopener\">Same-Origin Policy at W3C</a></li>\n</ul>\n\n<div class=\"originaldocinfo\" id=\"sect4\">\n<h2 id=\"original_document_information\">Original Document Information</h2>\n\n<ul>\n <li>Author(s): Jesse Ruderman</li>\n</ul>\n</div>\n\n<p></p><p></p>"}}],"toc":[{"text":"Определение origin","id":"определение_origin"},{"text":"Изменение origin","id":"изменение_origin"},{"text":"Cross-origin network access","id":"cross-origin_network_access"},{"text":"Cross-origin script API access","id":"cross-origin_script_api_access"},{"text":"Cross-origin data storage access","id":"cross-origin_data_storage_access"},{"text":"See also","id":"see_also"}],"summary":"Политика одинакового источника (same-origin policy) определяет как документ или скрипт, загруженный из одного источника (origin), может взаимодействовать с ресурсом из другого источника. Это помогает изолировать потенциально вредоносные документы, снижая количество возможных векторов атак.","popularity":0.0005,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Same-origin policy","locale":"en-US","native":"English (US)"},{"title":"Política Same-origin","locale":"es","native":"Español"},{"title":"Same-origin policy","locale":"fr","native":"Français"},{"title":"同一オリジンポリシー","locale":"ja","native":"日本語"},{"title":"동일 출처 정책","locale":"ko","native":"한국어"},{"title":"浏览器的同源策略","locale":"zh-CN","native":"中文 (简体)"},{"title":"同源政策 (Same-origin policy)","locale":"zh-TW","native":"正體中文 (繁體)"}],"source":{"folder":"ru/web/security/same-origin_policy","github_url":"https://github.com/mdn/translated-content/blob/main/files/ru/web/security/same-origin_policy/index.html","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.html"},"parents":[{"uri":"/ru/docs/Web","title":"Веб-технологии для разработчиков"},{"uri":"/ru/docs/Web/Security","title":"Веб-безопасность"},{"uri":"/ru/docs/Web/Security/Same-origin_policy","title":"Same-origin policy"}],"pageTitle":"Same-origin policy - Веб-безопасность | MDN","noIndexing":false}}