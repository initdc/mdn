<!DOCTYPE html><html lang="en-US" prefix="og: https://ogp.me/ns#"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="/favicon-48x48.97046865.png"><link rel="apple-touch-icon" href="/apple-touch-icon.0ea0fa02.png"><meta name="theme-color" content="#ffffff"><link rel="manifest" href="/manifest.56b1cedc.json"><link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="MDN Web Docs"><script>Array.prototype.flat&&Array.prototype.includes||document.write('<script src="https://polyfill.io/v3/polyfill.min.js?features=Array.prototype.flat%2Ces6"><\/script>')</script><title>Руководство часть 10: Тестирование приложений Django - Изучение веб-разработки | MDN</title><link rel="preload" as="font" type="font/woff2" crossorigin="" href="/static/media/ZillaSlab-Bold.subset.0beac26b.woff2"><link rel="alternate" title="Руководство часть 10: Тестирование приложений Django" href="https://developer.mozilla.org/ru/docs/Learn/Server-side/Django/Testing" hreflang="ru"><link rel="alternate" title="Django Tutorial Part 10: Testing a Django web application" href="https://developer.mozilla.org/zh-TW/docs/Learn/Server-side/Django/Testing" hreflang="zh-TW"><link rel="alternate" title="Django 教程 10: 测试 Django 网页应用" href="https://developer.mozilla.org/zh-CN/docs/Learn/Server-side/Django/Testing" hreflang="zh"><link rel="alternate" title="Tutorial Django Parte 10: Testando uma aplicação web Django" href="https://developer.mozilla.org/pt-BR/docs/Learn/Server-side/Django/Testing" hreflang="pt"><link rel="alternate" title="Django 튜토리얼 파트 10: Django 웹 어플리케이션 테스트하기" href="https://developer.mozilla.org/ko/docs/Learn/Server-side/Django/Testing" hreflang="ko"><link rel="alternate" title="Django Tutorial Part 10: Testing a Django web application" href="https://developer.mozilla.org/fr/docs/Learn/Server-side/Django/Testing" hreflang="fr"><link rel="alternate" title="Tutorial de Django Parte 10: Probando una aplicación web Django" href="https://developer.mozilla.org/es/docs/Learn/Server-side/Django/Testing" hreflang="es"><link rel="alternate" title="Django Tutorial Part 10: Testing a Django web application" href="https://developer.mozilla.org/en-US/docs/Learn/Server-side/Django/Testing" hreflang="en"><meta name="description" content="Сайты, в процессе развития и разработки, становится все сложнее тестировать вручную. Кроме такого тестирования, сложными становятся внутренние взаимодействия между компонентами - внесение небольшого изменения в одной части приложения влияет на другие. При этом, чтобы все продолжало работать нужно вносить все больше и больше изменений и, желательно так, чтобы не добавлялись новые ошибки. Одним из способов который позволяет смягчить последствия добавления изменений, является внедрение в разработку автоматического тестирования - оно должно просто и надёжно запускаться каждый раз, когда вы вносите изменения в свой код. Данное руководство рассматривает вопросы автоматизации юнит-тестирования вашего сайта при помощи фреймворка Django для тестов."><meta property="og:url" content="https://developer.mozilla.org/ru/docs/Learn/Server-side/Django/Testing"><meta property="og:title" content="Руководство часть 10: Тестирование приложений Django - Изучение веб-разработки | MDN"><meta property="og:description" content="Сайты, в процессе развития и разработки, становится все сложнее тестировать вручную. Кроме такого тестирования, сложными становятся внутренние взаимодействия между компонентами - внесение небольшого изменения в одной части приложения влияет на другие. При этом, чтобы все продолжало работать нужно вносить все больше и больше изменений и, желательно так, чтобы не добавлялись новые ошибки. Одним из способов который позволяет смягчить последствия добавления изменений, является внедрение в разработку автоматического тестирования - оно должно просто и надёжно запускаться каждый раз, когда вы вносите изменения в свой код. Данное руководство рассматривает вопросы автоматизации юнит-тестирования вашего сайта при помощи фреймворка Django для тестов."><meta property="og:locale" content="ru"><meta property="og:image" content="https://developer.mozilla.org/mdn-social-share.0ca9dbda.png"><meta property="twitter:card" content="summary_large_image"><meta name="robots" content="index, follow"><link rel="canonical" href="https://developer.mozilla.org/ru/docs/Learn/Server-side/Django/Testing"><style media="print">.breadcrumbs-container,.document-toc-container,.language-menu,.language-toggle,.on-github,.page-footer,.page-header-main,nav.sidebar,ul.prev-next{display:none!important}.main-page-content,.main-page-content pre{padding:2px}.main-page-content pre{border-left-width:2px}</style><link href="/static/css/main.55b68e13.chunk.css" rel="stylesheet"><script src="/static/js/runtime-main.4bb4c356.js" defer=""></script><script src="/static/js/4.a756dea3.chunk.js" defer=""></script><script src="/static/js/main.d4d565e0.chunk.js" defer=""></script></head><body><div id="root"><ul id="nav-access" class="a11y-nav"><li><a id="skip-main" href="#content">Skip to main content</a></li><li><a id="skip-search" href="#main-q">Skip to search</a></li><li><a id="skip-select-language" href="#select-language">Skip to select language</a></li></ul><div class="page-wrapper document-page"><header class="page-header"><a href="/ru/" class="logo" aria-label="MDN Web Docs"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 451.74 135"><path d="M7.14 8.35v111.06h111.05V8.35zm103.71 56c-.48.92-1 1.79-1.46 2.71a3.44 3.44 0 01-3.54 2 2.4 2.4 0 00-1.55.5c-1.37.9-2.76 1.79-4.18 2.63a7.33 7.33 0 01-6.35.34 29.71 29.71 0 00-10.63-2 11.7 11.7 0 00-9.46 4.31 14.84 14.84 0 00-2.13 4.29c-1.24 3.07-2.3 21.38-2.3 26.05 0 0-17.62-3.42-34.15-20.34l4.31-11.32h-13.5l9.76-10.35h-16.8l9.77-10.34H12.69L30.45 34a40.9 40.9 0 0119.77-10.83c7.1-1.22 8.93-.53 13.31.77l2.43.73.85.25 3.1.95a12.56 12.56 0 006.21.09 11.37 11.37 0 018.25 1 8.24 8.24 0 014.1 6.22 7.29 7.29 0 003.61 5.49 59.45 59.45 0 009.32 4.11c2.27.86 4.54 1.84 6.79 2.72a6.81 6.81 0 012.86 2.06 4.81 4.81 0 011.1 2.73c.14 2 .37 4 .47 6a15.24 15.24 0 01-1.77 8.03zM320.12 39.62a5.42 5.42 0 00-4.53 2.13 7.36 7.36 0 00-1.7 4.43v2.36a6.28 6.28 0 001.7 4.46 5.63 5.63 0 004.3 1.82 5.12 5.12 0 004.57-2.27A9.7 9.7 0 00326 47a8.11 8.11 0 00-1.67-5.52 5.36 5.36 0 00-4.21-1.86zM387.38 39.53a5.52 5.52 0 00-4.7 2.15 8.8 8.8 0 00-1.63 5.49 9.23 9.23 0 001.58 5.45 5.38 5.38 0 004.7 2.25 5.61 5.61 0 004.74-2.2 8.91 8.91 0 001.68-5.59 8.24 8.24 0 00-1.75-5.52 5.76 5.76 0 00-4.62-2.03zM299.47 41.35a4.34 4.34 0 00-4-1.92 4.55 4.55 0 00-3.89 1.73 8.37 8.37 0 00-1.58 4.17h10.48a6.3 6.3 0 00-1.01-3.98zM357.74 30.75H352v23.31h5.72q5.47 0 8.35-3t2.93-8.65q0-5.43-2.88-8.55t-8.38-3.11z"></path><path d="M121.55 8.35v70.8h323V8.35zm42.21 22.45h-4V54h3.68v3.73h-11.25V54h3.31V36.79h-.19l-9.63 19.12h-2.12l-10-19.4h-.19V54h3.45v3.73h-11.15V54h3.68V30.8h-4v-3.73H133l11.66 22.56h.19l11.18-22.56h7.7zm29.12 22.67q-4.11 4.28-11.38 4.28h-14.06v-3.69h3.73V30.75h-3.73v-3.68h13.83q7.59 0 11.66 4.29a15.4 15.4 0 014 11 15.33 15.33 0 01-4.05 11.11zm38.89-22.67h-3.68v27h-2.6L208.08 35h-.19v19h4.67v3.73h-12.22V54h3.49V30.8h-4v-3.73h7.08l16.9 22.09h.19V30.8h-4.58v-3.73h12.32zm43.8 27h-3.31l-7.83-23.18h-.19l-7.55 23.18h-3.35l-8.78-27h-2.65v-3.73H253v3.73h-3.87L255 50.71h.23l6.61-19.91H259v-3.73h11v3.73h-2.78l6.61 20.1h.23l5.43-20.1h-4.15v-3.73h11v3.73h-2.54zm26.71-1.51a9.66 9.66 0 01-6.42 2 10.2 10.2 0 01-7.41-2.74c-1.89-1.82-2.83-4.47-2.83-7.93a12.37 12.37 0 012.64-8.12 9 9 0 017.32-3.21 8.62 8.62 0 016.75 2.69 9.65 9.65 0 012.45 6.52 13.67 13.67 0 01-.28 2.69H290q.29 6.71 6.18 6.7a5.2 5.2 0 003.71-1.18 5.82 5.82 0 001.67-2.83l3.45.71a7.21 7.21 0 01-2.73 4.65zm25.77-1.63c-1.51 2.4-3.92 3.61-7.22 3.61s-5.84-1.29-7.22-3.87c0 .25-.1.82-.21 1.7s-.19 1.44-.22 1.7H309c.16-1 .31-2 .47-3.07a21.42 21.42 0 00.24-3.16v-23h-3.4v-3.3h7.55V40.9a9.76 9.76 0 012.67-3.28 7.33 7.33 0 014.74-1.4 8.48 8.48 0 016.5 2.78q2.55 2.74 2.55 7.74a14.6 14.6 0 01-2.27 7.87zm41.39-1.14q-4.11 4.28-11.37 4.28H344v-3.74h3.73V30.75H344v-3.68h13.83q7.59 0 11.66 4.29a15.41 15.41 0 014.06 11 15.34 15.34 0 01-4.11 11.11zm25.65 1.68a10.53 10.53 0 01-7.9 3.07 10 10 0 01-7.63-3 10.93 10.93 0 01-2.8-7.83 12.13 12.13 0 012.69-7.93q2.69-3.3 8-3.3t8 3.28a12 12 0 012.64 7.76 10.86 10.86 0 01-3 7.9zm22.61.57c-1.4 1.66-3.63 2.5-6.68 2.5a9.58 9.58 0 01-7.15-2.76q-2.72-2.76-2.71-7.91a12.25 12.25 0 012.69-8 9.17 9.17 0 017.5-3.28 15 15 0 013.82.48 10.37 10.37 0 013.5 1.65l.85 5.47-3.35.38-.76-3.54a8.07 8.07 0 00-4.11-1 4.9 4.9 0 00-4.39 2.15 9.93 9.93 0 00-1.41 5.55 8.9 8.9 0 001.5 5.38 5.23 5.23 0 004.44 2c2.92 0 4.67-1.7 5.23-5.1l3.5.71a10.34 10.34 0 01-2.47 5.27zm20.48.75a11.68 11.68 0 01-6.63 1.75 15.52 15.52 0 01-8.26-2.08L424 51l3.26.33-.1 2.74a7 7 0 002.06.66 12.63 12.63 0 002.19.19 8.68 8.68 0 003.66-.75 2.5 2.5 0 001.63-2.36 2.25 2.25 0 00-1.32-2.2 12.65 12.65 0 00-3.28-1 47.39 47.39 0 01-3.9-.82 7.5 7.5 0 01-3.25-1.7 4.67 4.67 0 01-1.33-3.66c0-2.36.88-4 2.62-4.91a12 12 0 015.6-1.37 15 15 0 014.08.55 16.65 16.65 0 013.47 1.39l.47 5.1-3.3.37-.48-3.3a9.5 9.5 0 00-4.06-.9 5.62 5.62 0 00-2.87.66 2.33 2.33 0 00-1.15 2.25 2.13 2.13 0 001.3 2.07 11.91 11.91 0 003.21.92 36.69 36.69 0 013.82.83 7.46 7.46 0 013.21 1.74 4.9 4.9 0 011.3 3.73 5.56 5.56 0 01-2.66 4.91z"></path><path d="M181.17 30.75h-5.71v23.31h5.71q5.47 0 8.36-3t2.88-8.61q0-5.43-2.88-8.55t-8.36-3.15zM121.63 119.32V81.74h114.91v37.58zM153.22 109h-2v-6.85a4.8 4.8 0 00-1.58-4 5.57 5.57 0 00-3.55-1.26 5 5 0 00-4.92 3.26 4.19 4.19 0 00-1.88-2.46 5.82 5.82 0 00-3-.8 4.89 4.89 0 00-4.56 2.56v-2.21h-6.28v3.26h2v8.5h-2v3.23h9.11V109h-2.86v-5.25a4.4 4.4 0 01.69-2.56 2.47 2.47 0 012.21-1q2.57 0 2.56 3.63v8.41h6.29V109h-2v-5.25a4.47 4.47 0 01.67-2.56 2.42 2.42 0 012.19-1q2.63 0 2.63 3.63v8.41h6.28zm9.88-12.07q-4 0-6 2.36a8.41 8.41 0 00-2 5.66 7.25 7.25 0 002.17 5.62 8 8 0 005.65 2 8.54 8.54 0 005.94-2.11 7.27 7.27 0 002.34-5.67 8.21 8.21 0 00-2-5.51q-2.07-2.34-6.1-2.34zm-.1 12.35a3 3 0 01-2.63-1.33 5.68 5.68 0 01-.9-3.26 5 5 0 011-3.28 3.23 3.23 0 012.61-1.18 3.5 3.5 0 012.59 1.08 4.56 4.56 0 011.07 3.31 5.21 5.21 0 01-1 3.41 3.33 3.33 0 01-2.74 1.25zm25-2.3l-3.39-.29-.7 2.32H179l8.32-9.54-.32-2.23h-13.19l-.53 5.25 3.16.34.67-2.36h4.65l-8.25 9.53.44 2.26h13.13zm7.62-9.74h-4.46v5.39h4.46zm0 9.61h-4.46v5.39h4.46zm13.54-17.49h-4.23l-6.48 22.88h4.22zm8.68 0h-4.23l-6.45 22.88h4.19zm15 22.51l-.07-2.26a1.22 1.22 0 01-.56.1c-.69 0-1-.39-1-1.16v-6.49a4.39 4.39 0 00-1.8-3.84 7 7 0 00-4.16-1.28 14.55 14.55 0 00-3.16.3 24.14 24.14 0 00-3.29 1.06l-.56 3.46 3.39.4.5-1.69a2.78 2.78 0 011.08-.37 11.3 11.3 0 011.25-.07c1.19 0 1.89.37 2.09 1.1a8.55 8.55 0 01.3 2.26v.5a8.91 8.91 0 00-1.18-.11h-1.21a12.64 12.64 0 00-4.81.88 3.53 3.53 0 00-2.18 3.64 3.66 3.66 0 001.48 3.33 5.63 5.63 0 003.11 1 4.67 4.67 0 003-.91 6.78 6.78 0 001.8-2 3 3 0 003.33 3 5.54 5.54 0 002.66-.85zm-9.25-2.32a1.69 1.69 0 01-1.36-.52 1.81 1.81 0 01-.43-1.21 1.67 1.67 0 01.86-1.68 4.63 4.63 0 012-.42 7.69 7.69 0 011.07.07l1.06.13a3.58 3.58 0 01-1.08 2.74 3.24 3.24 0 01-2.11.89z"></path></svg></a><button type="button" class="ghost main-menu-toggle" aria-haspopup="true" aria-label="Show Menu"></button><div class="page-header-main "><nav class="main-nav" aria-label="Main menu"><ul class="main-menu nojs"><li class="top-level-entry-container"><button id="technologies-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">Technologies</button><ul class="technologies " role="menu" aria-labelledby="technologies-button"><li role="none"><a tabindex="-1" href="/ru/docs/Web" role="menuitem">Technologies Overview</a></li><li role="none"><a tabindex="-1" href="/ru/docs/Web/HTML" role="menuitem">HTML</a></li><li role="none"><a tabindex="-1" href="/ru/docs/Web/CSS" role="menuitem">CSS</a></li><li role="none"><a tabindex="-1" href="/ru/docs/Web/JavaScript" role="menuitem">JavaScript</a></li><li role="none"><a tabindex="-1" href="/ru/docs/Web/Guide/Graphics" role="menuitem">Graphics</a></li><li role="none"><a tabindex="-1" href="/ru/docs/Web/HTTP" role="menuitem">HTTP</a></li><li role="none"><a tabindex="-1" href="/ru/docs/Web/API" role="menuitem">APIs</a></li><li role="none"><a tabindex="-1" href="/ru/docs/Mozilla/Add-ons/WebExtensions" role="menuitem">Browser Extensions</a></li><li role="none"><a tabindex="-1" href="/ru/docs/Web/MathML" role="menuitem">MathML</a></li></ul></li><li class="top-level-entry-container"><button id="references-guides-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">References &amp; Guides</button><ul class="references-guides " role="menu" aria-labelledby="references-guides-button"><li role="none"><a tabindex="-1" href="/ru/docs/Learn" role="menuitem">Learn web development</a></li><li role="none"><a tabindex="-1" href="/ru/docs/Web/Tutorials" role="menuitem">Tutorials</a></li><li role="none"><a tabindex="-1" href="/ru/docs/Web/Reference" role="menuitem">References</a></li><li role="none"><a tabindex="-1" href="/ru/docs/Web/Guide" role="menuitem">Developer Guides</a></li><li role="none"><a tabindex="-1" href="/ru/docs/Web/Accessibility" role="menuitem">Accessibility</a></li><li role="none"><a tabindex="-1" href="/ru/docs/Games" role="menuitem">Game development</a></li><li role="none"><a tabindex="-1" href="/ru/docs/Web" role="menuitem">...more docs</a></li></ul></li><li class="top-level-entry-container"><button id="feedback-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">Feedback</button><ul class="feedback " role="menu" aria-labelledby="feedback-button"><li role="none"><a tabindex="-1" href="/ru/docs/MDN/Contribute/Feedback" role="menuitem">Send Feedback</a></li><li role="none"><a tabindex="-1" href="/ru/docs/MDN/Contribute" role="menuitem">Contribute to MDN</a></li><li role="none"><a tabindex="-1" target="_blank" rel="noopener noreferrer" href="https://github.com/mdn/content/issues/new" role="menuitem">Report a content issue<!-- --> 🌐</a></li><li role="none"><a tabindex="-1" target="_blank" rel="noopener noreferrer" href="https://github.com/mdn/yari/issues/new" role="menuitem">Report a platform issue<!-- --> 🌐</a></li></ul></li></ul></nav><div class="header-search"><form action="/ru/search" class="search-form search-widget" role="search"><label for="main-q" class="visually-hidden">Search MDN</label><input type="search" name="q" id="main-q" class="search-input-field" placeholder="Site search... (Press &quot;/&quot; to focus)" pattern="(.|\s)*\S(.|\s)*" required="" value=""><input type="submit" class="ghost search-button" value="" aria-label="Search"></form></div><div class="auth-container"></div></div></header><div class="breadcrumb-locale-container"><nav class="breadcrumbs-container" aria-label="Breadcrumb navigation"><ol typeof="BreadcrumbList" vocab="https://schema.org/" aria-label="breadcrumbs"><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="/ru/docs/Learn"><span property="name">Изучение веб-разработки</span></a><meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="/ru/docs/Learn/Server-side"><span property="name">Серверное программирование веб-сайтов</span></a><meta property="position" content="2"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb-penultimate" property="item" typeof="WebPage" href="/ru/docs/Learn/Server-side/Django"><span property="name">Веб-фреймворк Django (Python)</span></a><meta property="position" content="3"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb-current-page" property="item" typeof="WebPage" href="/ru/docs/Learn/Server-side/Django/Testing"><span property="name">Руководство часть 10: Тестирование приложений Django</span></a><meta property="position" content="4"></li></ol></nav><ul class="language-toggle"><li><a href="#select-language" class="language-icon"><span class="show-desktop">Change language</span></a></li><li><a class="view-in-english" href="/en-US/docs/Learn/Server-side/Django/Testing"><span class="show-desktop">View in</span> English</a></li></ul></div><div class="localized-content-note notecard inline neutral"><a href="/en-US/docs/MDN/Contribute/Localize#active_locales">Эта страница была переведена с английского языка силами сообщества. Вы тоже можете внести свой вклад, присоединившись к русскоязычному сообществу MDN Web Docs.</a></div><aside class="document-toc-container"><section class="document-toc"><header><h2>Table of contents</h2><button type="button" class="ghost toc-trigger-mobile" aria-controls="toc-entries" aria-expanded="false">Table of contents</button></header><ul id="toc-entries"><li><a href="#обзор">Обзор</a></li><li><a href="#обзор_структуры_тестов">Обзор структуры тестов</a></li><li><a href="#как_запускать_тесты">Как запускать тесты</a></li><li><a href="#тестирование_locallibrary">Тестирование LocalLibrary</a></li><li><a href="#другие_рекомендованные_инструменты_для_тестирования">Другие рекомендованные инструменты для тестирования</a></li><li><a href="#домашняя_работы">Домашняя работы</a></li><li><a href="#итоги">Итоги</a></li><li><a href="#смотрите_также">Смотрите также</a></li></ul></section></aside><main id="content" class="main-content" role="main"><article class="main-page-content" lang="ru"><h1>Руководство часть 10: Тестирование приложений Django</h1><div><div id="sect1"></div>

<div id="sect2"><ul class="prev-next">
    <li><a class="button minimal" href="/ru/docs/Learn/Server-side/Django/Forms"> Назад </a></li>
    <li><a class="button minimal" href="/ru/docs/Learn/Server-side/Django"> Обзор: Django</a></li>
    <li><a class="button minimal" href="/ru/docs/Learn/Server-side/Django/Deployment"> Далее  </a></li>
</ul></div>

<p class="summary">Сайты, в процессе развития и разработки, становится все сложнее тестировать вручную. Кроме такого тестирования, сложными становятся внутренние взаимодействия между компонентами - внесение небольшого изменения в одной части приложения влияет на другие. При этом, чтобы все продолжало работать нужно вносить все больше и больше изменений и, желательно так, чтобы не добавлялись новые ошибки. Одним из способов который позволяет смягчить последствия добавления изменений, является внедрение в разработку автоматического тестирования - оно должно просто и надёжно запускаться каждый раз, когда вы вносите изменения в свой код. Данное руководство рассматривает вопросы автоматизации<em> юнит-тестирования</em> вашего сайта при помощи фреймворка Django для тестов.</p>

<table>
 <tbody>
  <tr>
   <th scope="row">Требования:</th>
   <td>Изучить все предыдущие темы руководства, включая <a href="/en-US/docs/Learn/Server-side/Django/Forms">Руководство Django Часть 9: Работа с формами</a>.</td>
  </tr>
  <tr>
   <th scope="row">Цель:</th>
   <td>Понимать как создавать юнит тесты для сайта на основе Django.</td>
  </tr>
 </tbody>
</table></div><h2 id="обзор"><a href="#обзор" title="Permalink to Обзор">Обзор</a></h2><div><p><a href="/en-US/docs/Learn/Server-side/Django/Tutorial_local_library_website">LocalLibrary</a> в настоящий момент содержит страницы для показа списков всех книг, авторов, подробной информации о книгах <code>Book</code> и авторах <code>Author</code>, а также страницу для обновления информации об экземпляре книги <code>BookInstance</code> и, кроме того, страницы для создания, обновления и удаления записей модели <code>Author</code> (и модели <code>Book</code>, в том случае, если вы выполнили домашнее задание в руководстве <a href="/en-US/docs/Learn/Server-side/Django/Forms">работа с формами</a>). Даже в случае небольшого сайта, ручной переход на каждую страницу и <em>беглая</em> проверка того, что все работает как следует, может занять несколько минут. В процессе внесения изменений и роста сайта требуемое время для проведения проверок будет только возрастать. Если бы мы продолжили в том же духе, то в какой-то момент на проведение тестов мы тратили бы больше времени, чем на написание кода и внесение изменений.</p>

<p>Автоматические тесты могут серьёзно помочь нам справиться с этой проблемой! Очевидными преимуществами в таком случае являются значительно меньшие временные затраты на проведение тестов, их подробное выполнение, а кроме того, тесты имеют постоянную функциональность, или последовательность действий  (человек никогда не сможет тестировать так надёжно!). В связи с быстротой их выполнения автоматические тесты можно выполнять более часто, а если они провалятся, то укажут на соответствующее место (где что-то пошло не так как ожидалось).</p>

<p>Кроме того, автоматические тесты могут действовать как первый "настоящий пользователь" вашего кода, заставляя вас строго следить за объявлениями и документированием поведения вашего сайта. Тесты часто являются основой для создания примеров вашего кода и документации. По этим причинам иногда некоторые процессы разработки программного обеспечения начинаются с определения тестов и их реализации, а уже после этого следует написание кода который должен иметь соответствующее поведение (так называемая разработка <a href="https://en.wikipedia.org/wiki/Test-driven_development" class="external" rel=" noopener">на основе тестов</a> и <a href="https://en.wikipedia.org/wiki/Behavior-driven_development" class="external" rel=" noopener">на основе поведения</a>).</p>

<p>Данное руководство показывает процесс создания автоматических тестов в Django при помощи добавления их к разработке сайта <em>LocalLibrary</em>.</p></div><h3 id="типы_тестирования"><a href="#типы_тестирования" title="Permalink to Типы тестирования">Типы тестирования</a></h3><div><p>Существует несколько типов, уровней, классификаций тестов и тестовых приёмов. Наиболее важными автоматическими тестами являются:</p>

<dl>
 <dt id="юнит-тесты">Юнит-тесты</dt>
 <dd>Проверяют функциональное поведение для отдельных компонентов, часто классов и функций.</dd>
 <dt id="регрессионное_тестирование"><strong>Регрессионное тестирование</strong></dt>
 <dd>Тесты которые воспроизводят исторические ошибки (баги). Каждый тест вначале запускается для проверки того, что баг был исправлен, а затем перезапускается для того, чтобы убедиться, что он не был внесён снова с появлением новых изменений в коде.</dd>
 <dt id="интеграционные_тесты">Интеграционные тесты</dt>
 <dd>Проверка совместной работы групп компонентов. Данные тесты отвечают за совместную работу между компонентами, не обращая внимания на внутренние процессы в компонентах. Они проводятся как для простых групп компонентов, так и для целых веб-сайтов.</dd>
</dl>

<div class="note notecard" id="sect3">
<p><strong>Примечание:  </strong>К другим типам тестов относятся методы чёрного ящика, белого ящика, ручные, автоматические, канареечные (canary), дымные (smoke), соответствия (conformance), принятия (acceptance), функциональные (functional),  системные (system), эффективности (performance), загрузочные (load) и стресс-тесты (stress tests).</p>
</div></div><h3 id="что_django_предоставляет_для_тестирования"><a href="#что_django_предоставляет_для_тестирования" title="Permalink to Что Django предоставляет для тестирования?">Что Django предоставляет для тестирования?</a></h3><div><p>Тестирование сайта это сложная задача, потому что она состоит их нескольких логических слоёв – от  HTTP-запроса и запроса к моделям, до валидации формы и их обработки, а кроме того, рендеринга шаблонов страниц.</p>

<p>Django предоставляет фреймворк для создания тестов, построенного на основе иерархии классов, которые, в свою очередь, зависят от стандартной библиотеки Python  <code><a href="https://docs.python.org/3/library/unittest.html#module-unittest" title="(in Python v3.5)" class="external" rel=" noopener">unittest</a></code>. Несмотря на название, данный фреймворк подходит и для юнит-, и для интеграционного тестирования. Фреймворк Django добавляет методы API и инструменты, которые помогают тестировать как веб так и, специфическое для Django, поведение. Это позволяет вам имитировать URL-запросы, добавление тестовых данных, а также проводить проверку выходных данных ваших приложений. Кроме того, Django предоставляет API (<a href="https://docs.djangoproject.com/en/1.10/topics/testing/tools/#liveservertestcase" class="external" rel=" noopener">LiveServerTestCase</a>) и инструменты <a href="https://docs.djangoproject.com/en/1.10/topics/testing/advanced/#other-testing-frameworks" class="external" rel=" noopener">для применения различных фреймворков тестирования</a>, например вы можете подключить популярный фреймворк <a href="/en-US/docs/Learn/Tools_and_testing/Cross_browser_testing/Your_own_automation_environment">Selenium</a> для имитации поведения пользователя в реальном браузере.</p>

<p>Для написания теста вы должны наследоваться от любого из классов тестирования Django (или <em>юниттеста</em>)  (<a href="https://docs.djangoproject.com/en/1.10/topics/testing/tools/#simpletestcase" class="external" rel=" noopener">SimpleTestCase</a>, <a href="https://docs.djangoproject.com/en/1.10/topics/testing/tools/#transactiontestcase" class="external" rel=" noopener">TransactionTestCase</a>, <a href="https://docs.djangoproject.com/en/1.10/topics/testing/tools/#testcase" class="external" rel=" noopener">TestCase</a>, <a href="https://docs.djangoproject.com/en/1.10/topics/testing/tools/#liveservertestcase" class="external" rel=" noopener">LiveServerTestCase</a>), а затем реализовать отдельные методы проверки кода (тесты это функции-"утверждения", которые проверяют, что результатом выражения являются значения <code>True</code> или <code>False</code>, или что два значения равны и так далее). Когда вы запускаете тест, фреймворк выполняет соответствующие тестовые методы в вашем классе-наследнике. Методы тестирования запускаются независимо друг от друга, начиная с метода настроек и/или завершаясь методом разрушения (tear-down), определённом в классе, как показано ниже.</p>

<div class="code-example"><pre class="brush: python notranslate"><code><span class="token keyword">class</span> <span class="token class-name">YourTestClass</span><span class="token punctuation">(</span>TestCase<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">setUp</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># Установки запускаются перед каждым тестом</span>
        <span class="token keyword">pass</span>

    <span class="token keyword">def</span> <span class="token function">tearDown</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># Очистка после каждого метода</span>
        <span class="token keyword">pass</span>

    <span class="token keyword">def</span> <span class="token function">test_something_that_will_pass</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>assertFalse<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_something_that_will_fail</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>assertTrue<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>
</code></pre></div>

<p>Самый подходящий базовый класс для большинства тестов это <a href="https://docs.djangoproject.com/en/1.10/topics/testing/tools/#testcase" class="external" rel=" noopener">django.test.TestCase</a>.  Этот класс создаёт чистую базу данных перед запуском своих методов, а также запускает каждую функцию тестирования в его собственной транзакции. У данного класса также имеется тестовый <a href="https://docs.djangoproject.com/en/1.10/topics/testing/tools/#django.test.Client" title="django.test.Client" class="external" rel=" noopener">Клиент</a>, который вы можете использовать для имитации взаимодействия пользователя с кодом на уровне отображения. В следующих разделах мы сконцентрируемся на юнит-тестах, которые будут созданы на основе класса <a href="https://docs.djangoproject.com/en/1.10/topics/testing/tools/#testcase" class="external" rel=" noopener">TestCase</a>.</p>

<div class="note notecard" id="sect4">
<p><strong>Примечание:</strong> Класс <a href="https://docs.djangoproject.com/en/1.10/topics/testing/tools/#testcase" class="external" rel=" noopener">django.test.TestCase</a> очень удобен, но он может приводить к замедленной работе в некоторых случаях (не для каждого теста необходимо настраивать базу данных, или имитировать взаимодействие с отображением). Когда вы познакомитесь с работой данного класса, то сможете заменить некоторые из ваших тестов на более простые классы тестирования.</p>
</div></div><h3 id="что_вы_должны_тестировать"><a href="#что_вы_должны_тестировать" title="Permalink to Что вы должны тестировать?">Что вы должны тестировать?</a></h3><div><p>Вы должны тестировать все аспекты, касающиеся вашего кода, но не библиотеки, или функциональность, предоставляемые Python, или Django.</p>

<p>Например, рассмотрим модель <code>Author</code>, определённую ниже. Вам не нужно проверять тот факт, что <code>first_name</code> и <code>last_name</code> были сохранены в базу данных как <code>CharField</code>, потому что за это отвечает непосредственно Django (хотя конечно, на практике  в течение разработки вы косвенно будете проверять данную функциональность). Тоже касается и, например, проверки того, что поле <code>date_of_birth</code> является датой, поскольку это тоже часть реализации Django.</p>

<p>Вы должны проверить текст для меток (<em>First name, Last_name, Date of birth, Died</em>), и размер поля, выделенного для текста (<em>100 символов</em>), потому что они являются частью вашей разработки и чем-то, что может сломаться/измениться в будущем.</p>

<div class="code-example"><pre class="brush: python notranslate"><code><span class="token keyword">class</span> <span class="token class-name">Author</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    first_name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
    last_name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
    date_of_birth <span class="token operator">=</span> models<span class="token punctuation">.</span>DateField<span class="token punctuation">(</span>null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    date_of_death <span class="token operator">=</span> models<span class="token punctuation">.</span>DateField<span class="token punctuation">(</span><span class="token string">'Died'</span><span class="token punctuation">,</span> null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">get_absolute_url</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> reverse<span class="token punctuation">(</span><span class="token string">'author-detail'</span><span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'%s, %s'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> self<span class="token punctuation">.</span>first_name<span class="token punctuation">)</span></code></pre></div>

<p>Подобным же образом вы должны убедиться, что методы <code style="font-style: normal; font-weight: normal;">get_absolute_url()</code> и <code style="font-style: normal; font-weight: normal;">__str__()</code> ведут себя как требуется, потому что они являются частью вашей бизнес логики. В случае функции <code style="font-style: normal; font-weight: normal;">get_absolute_url()</code> вы можете быть уверены, что функция из Django <code>reverse()</code> была реализована правильно и, следовательно, вы тестируете только то, чтобы соответствующий вызов в отображении был правильно определён.</p>

<div class="note notecard" id="sect5">
<p><strong>Примечание:</strong> Проницательные читатели могут заметить, что мы можем некоторым образом ограничить дату рождения и смерти какими-то граничными значениями и выполнять проверку, чтобы дата смерти шла после рождения. В Django данное ограничение может быть добавлено к вашим классам форм (хотя вы и можете определить валидаторы для этих полей, они будут проявлять себя только на уровне форм, а не уровне модели).</p>
</div>

<p>Ну что же, усвоив данную информацию, давайте перейдём к процессу определения и запуска тестов.</p></div><h2 id="обзор_структуры_тестов"><a href="#обзор_структуры_тестов" title="Permalink to Обзор структуры тестов">Обзор структуры тестов</a></h2><div><p>Перед тем как мы перейдём к тому "что тестировать", давайте кратко взглянем на моменты <em>где</em> и <em>как</em> определяются тесты.</p>

<p>Django использует юнит-тестовый модуль - <a href="https://docs.python.org/3/library/unittest.html#unittest-test-discovery" title="(in Python v3.5)" class="external" rel=" noopener">встроенный "обнаружитель" тестов</a>, который находит тесты в текущей рабочей директории, в любом файле с шаблонным именем<strong> test*.py</strong>. Предоставляя соответствующие имена файлов, вы можете работать с любой структурой которая вас устраивает. Мы рекомендуем создать пакет для вашего тестирующего кода и, следовательно, отделить файлы моделей, отображений, форм и любые другие, от кода который будет использоваться для тестов. Например:</p>

<pre class="notranslate">catalog/
  /tests/
    __init__.py
    test_models.py
    test_forms.py
    test_views.py
</pre>

<p>В проекте <em>LocalLibrary</em> создайте файловую структуру, указанную выше. Файл <strong>__init__.py</strong> должен быть пустым (так мы говорим Питону, что данная директория является пакетом). Вы можете создать три тестовых файла при помощи копирования и переименования файла-образца <strong>/catalog/tests.py</strong>.</p>

<div class="note notecard" id="sect6">
<p><strong>Примечание:</strong> Скелет тестового файла <strong>/catalog/tests.py</strong> был создан автоматически когда мы выполняли <a href="/en-US/docs/Learn/Server-side/Django/skeleton_website">построение скелета сайта Django</a>. Является абсолютно "легальным" действием - поместить все ваши тесты в данный файл, тем не менее, если вы проводите тесты "правильно", то вы очень быстро придёте к очень большому и неуправляемому файлу тестирования.</p>

<p>Можете удалить данный файл, поскольку больше он нам не понадобится.</p>
</div>

<p>Откройте <strong>/catalog/tests/test_models.py</strong>. Файл должен импортировать <code>django.test.TestCase</code>, как показано ниже:</p>

<div class="code-example"><pre class="brush: python notranslate"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>test <span class="token keyword">import</span> TestCase

<span class="token comment"># Поместите ваш код тестов здесь</span>
</code></pre></div>

<p>Вы часто будете добавлять соответствующий тестовый класс для каждой модели/отображения/формы с отдельными методами проверки каждой отдельной функциональности. В каких-то случаях вы захотите иметь отдельный класс для тестирования какого-то особого варианта работы, или функциональности, с отдельными функциями тестирования, которые будут проверять элемент/элементы данного варианта (например, мы можем создать отдельный класс тестирования для проверки того, что поле валидно, - функции данного класса будут проверять каждый неверный вариант использования). Опять же, структура файлов и пакетов полностью зависит от вас и будет лучше если вы будете её придерживаться.</p>

<p>Добавьте тестовый класс, показанный ниже, в нижнюю часть файла. Данный класс демонстрирует как создать класс тестирования при помощи наследования от <code>TestCase</code>.</p>

<div class="code-example"><pre class="brush: python notranslate"><code><span class="token keyword">class</span> <span class="token class-name">YourTestClass</span><span class="token punctuation">(</span>TestCase<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token decorator annotation punctuation">@classmethod</span>
    <span class="token keyword">def</span> <span class="token function">setUpTestData</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"setUpTestData: Run once to set up non-modified data for all class methods."</span><span class="token punctuation">)</span>
        <span class="token keyword">pass</span>

    <span class="token keyword">def</span> <span class="token function">setUp</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"setUp: Run once for every test method to setup clean data."</span><span class="token punctuation">)</span>
        <span class="token keyword">pass</span>

    <span class="token keyword">def</span> <span class="token function">test_false_is_false</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Method: test_false_is_false."</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertFalse<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_false_is_true</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Method: test_false_is_true."</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertTrue<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_one_plus_one_equals_two</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Method: test_one_plus_one_equals_two."</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span></code></pre></div>

<p>Этот класс определяет два метода которые вы можете использовать для дотестовой настройки (например, создание какой-либо модели, или других объектов, которые вам понадобятся):</p>

<ul>
 <li><code>setUpTestData()</code> вызывается каждый раз перед запуском теста на уровне настройки всего класса. Вы должны использовать данный метод для создания объектов, которые не будут модифицироваться/изменяться в каком-либо из тестовых методов.</li>
 <li><code>setUp()</code> вызывается перед каждой тестовой функцией для настройки объектов, которые могут изменяться во время тестов (каждая функция тестирования будет получать "свежую" версию данных объектов).</li>
</ul>

<div class="note notecard" id="sect7">
<p><strong>Примечание</strong>. Классы тестирования также содержат метод <code>tearDown()</code>, который мы пока не используем. Этот метод не особенно полезен для тестирования баз данных, поскольку базовый класс <code>TestCase</code> автоматически разрывает соединения с ними.</p>
</div>

<p>Далее идут несколько методов, которые используют функции <code>Assert</code>, проверяющие условия "истинно" (true), "ложно" (false) или равенство (<code>AssertTrue</code>, <code>AssertFalse</code>, <code>AssertEqual</code>). Если условия не выполняются как ожидалось, то это приводит к провалу теста и выводу соответствующего сообщения об ошибке на консоль.</p>

<p>Функции проверки утверждений <code>AssertTrue</code>, <code>AssertFalse</code>, <code>AssertEqual</code> реализованы в <strong>unittest</strong>.  В данном фреймворке существуют и другие подобные функции, а кроме того, <a href="https://docs.djangoproject.com/en/1.10/topics/testing/tools/#assertions" class="external" rel=" noopener">специфические для Django функции</a> проверки, например, перехода из/к отображению (<code>assertRedirects</code>), проверки использования какого-то конкретного шаблона (<code>assertTemplateUsed</code>) и так далее.</p>

<div class="note notecard" id="sect8">
<p>В обычной ситуации у вас нет необходимости вызывать функции <strong>print()</strong> из методов теста, как во фрагменте выше. Мы поступили так только для того, чтобы вы в консоле увидели порядок вызова тестовых функций класса.</p>
</div></div><h2 id="как_запускать_тесты"><a href="#как_запускать_тесты" title="Permalink to Как запускать тесты">Как запускать тесты</a></h2><div><p>Простейшим способом запуска всех тестов является применение следующей команды:</p>

<div class="code-example"><pre class="brush: bash notranslate"><code>python3 manage.py <span class="token builtin class-name">test</span></code></pre></div>

<p>Таким образом мы найдём в текущей директории все файлы с именем <strong>test*.py</strong> и запустим все тесты (у нас имеются несколько файлов для тестирования, но на данный момент, только <strong>/catalog/tests/test_models.py</strong> содержит какие-либо тесты). По умолчанию, тесты сообщат что-нибудь, только в случае провала.</p>

<p>Запустите тесты из корневой папки сайта <em>LocalLibrary</em>. Вы должны увидеть вывод, который похож на следующий.</p>

<div class="code-example"><pre class="brush: bash notranslate"><code><span class="token operator">&gt;</span>python manage.py <span class="token builtin class-name">test</span>

Creating <span class="token builtin class-name">test</span> database <span class="token keyword">for</span> <span class="token builtin class-name">alias</span> <span class="token string">'default'</span><span class="token punctuation">..</span>.
setUpTestData: Run once to <span class="token builtin class-name">set</span> up non-modified data <span class="token keyword">for</span> all class methods.
setUp: Run once <span class="token keyword">for</span> every <span class="token builtin class-name">test</span> method to setup clean data.
Method: test_false_is_false.
.setUp: Run once <span class="token keyword">for</span> every <span class="token builtin class-name">test</span> method to setup clean data.
Method: test_false_is_true.
.setUp: Run once <span class="token keyword">for</span> every <span class="token builtin class-name">test</span> method to setup clean data.
Method: test_one_plus_one_equals_two.
<span class="token builtin class-name">.</span>
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
FAIL: test_false_is_true <span class="token punctuation">(</span>catalog.tests.tests_models.YourTestClass<span class="token punctuation">)</span>
----------------------------------------------------------------------
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span>:
  File <span class="token string">"D:\Github\django_tmp\library_w_t_2\locallibrary<span class="token entity" title="\c">\c</span>atalog<span class="token entity" title="\t">\t</span>ests<span class="token entity" title="\t">\t</span>ests_models.py"</span>, line <span class="token number">22</span>, <span class="token keyword">in</span> test_false_is_true
    self.assertTrue<span class="token punctuation">(</span>False<span class="token punctuation">)</span>
AssertionError: False is not <span class="token boolean">true</span>

----------------------------------------------------------------------
Ran <span class="token number">3</span> tests <span class="token keyword">in</span> <span class="token number">0</span>.075s

FAILED <span class="token punctuation">(</span>failures<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
Destroying <span class="token builtin class-name">test</span> database <span class="token keyword">for</span> <span class="token builtin class-name">alias</span> <span class="token string">'default'</span><span class="token punctuation">..</span>.</code></pre></div>

<p>Как видите, один тест провалился и мы можем точно увидеть в какой именно функции это произошло и почему (так и было задумано, поскольку <code>False</code> не равен <code>True</code>!).</p>

<div class="note notecard" id="sect9">
<p><strong>Совет: </strong> Самая важная вещь, которую нужно извлечь из тестового выхода выше, заключается в том, что это гораздо более ценно, если вы используете описательные/информативные имена для ваших объектов и методов.</p>
</div>

<p>Текст выделенный жирным, обычно не должен появляться в тестовом выводе (это результат работы функций <code>print()</code> в наших тестах). Он показывает, что вызов метода  <code>setUpTestData()</code> происходит один раз для всего класса в целом, а вызовы<code>setUp()</code> осуществляются перед каждым методом.</p>

<p>Следующий раздел показывает как запускать отдельные тесты и как контролировать процесс вывода информации.</p></div><h3 id="ещё_больше_тестовой_информации"><a href="#ещё_больше_тестовой_информации" title="Permalink to Ещё больше тестовой информации">Ещё больше тестовой информации</a></h3><div><p>Если вы желаете получать больше информации о тестах вы должны изменить значение параметра <em>verbosity</em>. Например, для вывода списка успешных и неуспешных тестов (и всю информацию о том, как прошла настройка базы данных) вы можете установить значение verbosity равным "2":</p>

<div class="code-example"><pre class="brush: bash notranslate"><code>python3 manage.py <span class="token builtin class-name">test</span> --verbosity <span class="token number">2</span></code></pre></div>

<p>Доступными значениями для verbosity являются  0, 1 (значение по умолчанию), 2 и 3.</p></div><h3 id="запуск_определённых_тестов"><a href="#запуск_определённых_тестов" title="Permalink to Запуск определённых тестов">Запуск определённых тестов</a></h3><div><p>Если вы хотите запустить подмножество тестов, тогда вам надо указать полный путь к вашему пакету, модулю/подмодулю, классу наследнику<code>TestCase</code>, или методу:</p>

<div class="code-example"><pre class="brush: bash notranslate"><code>python3 manage.py <span class="token builtin class-name">test</span> catalog.tests   <span class="token comment"># Run the specified module</span>
python3 manage.py <span class="token builtin class-name">test</span> catalog.tests.test_models  <span class="token comment"># Run the specified module</span>
python3 manage.py <span class="token builtin class-name">test</span> catalog.tests.test_models.YourTestClass <span class="token comment"># Run the specified class</span>
python3 manage.py <span class="token builtin class-name">test</span> catalog.tests.test_models.YourTestClass.test_one_plus_one_equals_two  <span class="token comment"># Run the specified method</span>
</code></pre></div></div><h2 id="тестирование_locallibrary"><a href="#тестирование_locallibrary" title="Permalink to Тестирование LocalLibrary">Тестирование LocalLibrary</a></h2><div><p>Теперь, когда мы знаем как запустить наши тесты и что именно мы должны тестировать, давайте рассмотрим некоторые практические примеры.</p>

<div class="note notecard" id="sect10">
<p><strong>Примечание: </strong>Мы не будем расписывать все тесты, а просто покажем вам пример того, как они должны работать и что ещё вы можете с ними сделать.</p>
</div></div><h3 id="модели"><a href="#модели" title="Permalink to Модели">Модели</a></h3><div><p>Как было отмечено ранее, мы должны тестировать все то, что является частью нашего кода, а не библиотеки/код, которые уже были протестированы командами разработчиков Django, или Python.</p>

<p>Рассмотрим модель <code>Author</code>. Мы должны провести тесты текстовых меток всех полей, поскольку, даже несмотря на то, что не все они определены, у нас есть проект, в котором сказано, что все их значения должны быть заданы. Если мы не проведём их тестирование, тогда мы не будем знать, что данные метки действительно содержат необходимые значения. Мы уверены в том, что Django создаст поле заданной длины, таким образом наши тесты будут проверять нужный нам размер поля, а заодно и его содержимое.</p>

<div class="code-example"><pre class="brush: python notranslate"><code><span class="token keyword">class</span> <span class="token class-name">Author</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    first_name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
    last_name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">)</span>
    date_of_birth <span class="token operator">=</span> models<span class="token punctuation">.</span>DateField<span class="token punctuation">(</span>null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    date_of_death <span class="token operator">=</span> models<span class="token punctuation">.</span>DateField<span class="token punctuation">(</span><span class="token string">'Died'</span><span class="token punctuation">,</span> null<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> blank<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">get_absolute_url</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> reverse<span class="token punctuation">(</span><span class="token string">'author-detail'</span><span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string">'%s, %s'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> self<span class="token punctuation">.</span>first_name<span class="token punctuation">)</span></code></pre></div>

<p>Откройте файл <strong>/catalog/tests/test_models.py</strong> и замените все его содержимое кодом, приведённом во фрагменте для тестирования модели <code>Author</code> (фрагмент представлен ниже).</p>

<p>В первой строке мы импортируем класс <code>TestCase</code>, а затем наследуемся от него, создавая класс с описательным именем (<code>AuthorModelTest</code>), оно поможет нам идентифицировать места провалов в тестах во время вывода информации на консоль. Затем мы создаём метод <code>setUpTestData()</code>, в котором создаём объект автора, который мы будем использовать в тестах, но нигде не будем изменять.</p>

<div class="code-example"><pre class="brush: python notranslate"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>test <span class="token keyword">import</span> TestCase

<span class="token comment"># Create your tests here.</span>

<span class="token keyword">from</span> catalog<span class="token punctuation">.</span>models <span class="token keyword">import</span> Author

<span class="token keyword">class</span> <span class="token class-name">AuthorModelTest</span><span class="token punctuation">(</span>TestCase<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token decorator annotation punctuation">@classmethod</span>
    <span class="token keyword">def</span> <span class="token function">setUpTestData</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment">#Set up non-modified objects used by all test methods</span>
        Author<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span>first_name<span class="token operator">=</span><span class="token string">'Big'</span><span class="token punctuation">,</span> last_name<span class="token operator">=</span><span class="token string">'Bob'</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_first_name_label</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        author<span class="token operator">=</span>Author<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
        field_label <span class="token operator">=</span> author<span class="token punctuation">.</span>_meta<span class="token punctuation">.</span>get_field<span class="token punctuation">(</span><span class="token string">'first_name'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>verbose_name
        self<span class="token punctuation">.</span>assertEquals<span class="token punctuation">(</span>field_label<span class="token punctuation">,</span><span class="token string">'first name'</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_date_of_death_label</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        author<span class="token operator">=</span>Author<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
        field_label <span class="token operator">=</span> author<span class="token punctuation">.</span>_meta<span class="token punctuation">.</span>get_field<span class="token punctuation">(</span><span class="token string">'date_of_death'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>verbose_name
        self<span class="token punctuation">.</span>assertEquals<span class="token punctuation">(</span>field_label<span class="token punctuation">,</span><span class="token string">'died'</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_first_name_max_length</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        author<span class="token operator">=</span>Author<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
        max_length <span class="token operator">=</span> author<span class="token punctuation">.</span>_meta<span class="token punctuation">.</span>get_field<span class="token punctuation">(</span><span class="token string">'first_name'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>max_length
        self<span class="token punctuation">.</span>assertEquals<span class="token punctuation">(</span>max_length<span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_object_name_is_last_name_comma_first_name</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        author<span class="token operator">=</span>Author<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
        expected_object_name <span class="token operator">=</span> <span class="token string">'%s, %s'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>author<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> author<span class="token punctuation">.</span>first_name<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertEquals<span class="token punctuation">(</span>expected_object_name<span class="token punctuation">,</span><span class="token builtin">str</span><span class="token punctuation">(</span>author<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_get_absolute_url</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        author<span class="token operator">=</span>Author<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token comment">#This will also fail if the urlconf is not defined.</span>
        self<span class="token punctuation">.</span>assertEquals<span class="token punctuation">(</span>author<span class="token punctuation">.</span>get_absolute_url<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'/catalog/author/1'</span><span class="token punctuation">)</span></code></pre></div>

<p>Тесты полей проверяют значения текстовых меток (<code>verbose_name</code>), включая их ожидаемую длину. Все методы имеют описательные имена, а их логика придерживается одной и той же структуры:</p>

<div class="code-example"><pre class="brush: python notranslate"><code><span class="token comment"># Получение объекта для тестирования</span>
author<span class="token operator">=</span>Author<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment"># Получение метаданных поля для получения необходимых значений</span>
field_label <span class="token operator">=</span> author<span class="token punctuation">.</span>_meta<span class="token punctuation">.</span>get_field<span class="token punctuation">(</span><span class="token string">'first_name'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>verbose_name

<span class="token comment"># Сравнить значение с ожидаемым результатом</span>
self<span class="token punctuation">.</span>assertEquals<span class="token punctuation">(</span>field_label<span class="token punctuation">,</span><span class="token string">'first name'</span><span class="token punctuation">)</span>  </code></pre></div>

<p>Интересно отметить следующее:</p>

<ul>
 <li>Мы не можем получить поле <code>verbose_name</code> напрямую через <code>author.first_name.verbose_name</code>, потому что <code>author.first_name</code> является <em>строкой</em>. Вместо этого, нам надо использовать атрибут <code>_meta</code> объекта автора для получения того экземпляра поля, который будет использоваться для получения дополнительной информации.</li>
 <li>Мы выбрали метод <code>assertEquals(field_label,'first name')</code> вместо  <code>assertTrue(field_label == 'first name')</code>, потому что, в случае провала теста, в выводе будет указано какое именно значение содержит метка и это немного облегчит нам задачу по отладке кода.</li>
</ul>

<div class="note notecard" id="sect11">
<p><strong>Примечание:</strong> Тесты для текстовых меток <code>last_name</code> и <code>date_of_birth</code>, а также тест длины поля <code>last_name</code> были опущены. Добавьте свою версию этих тестов,  соблюдая соглашение об именовании и следуя структуре логики, представленной выше.</p>
</div>

<p>Кроме того, нам надо провести тесты наших собственных методов. Они просто проверяют, что имена объектов имеют следующие значения "Last Name, First Name" и что URL-адрес, по которому мы получаем экземпляр <code>Author</code>, такой как ожидается.</p>

<div class="code-example"><pre class="brush: python notranslate"><code><span class="token keyword">def</span> <span class="token function">test_object_name_is_last_name_comma_first_name</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
    author<span class="token operator">=</span>Author<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
    expected_object_name <span class="token operator">=</span> <span class="token string">'%s, %s'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>author<span class="token punctuation">.</span>last_name<span class="token punctuation">,</span> author<span class="token punctuation">.</span>first_name<span class="token punctuation">)</span>
    self<span class="token punctuation">.</span>assertEquals<span class="token punctuation">(</span>expected_object_name<span class="token punctuation">,</span><span class="token builtin">str</span><span class="token punctuation">(</span>author<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">test_get_absolute_url</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
    author<span class="token operator">=</span>Author<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token comment">#This will also fail if the urlconf is not defined.</span>
    self<span class="token punctuation">.</span>assertEquals<span class="token punctuation">(</span>author<span class="token punctuation">.</span>get_absolute_url<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'/catalog/author/1'</span><span class="token punctuation">)</span></code></pre></div>

<p>Теперь запустите тесты. Если вы создали модель Author, в соответствии с разделом о моделях данного руководства, то весьма вероятно, что вы получите сообщение об ошибке для метки <code>date_of_death</code>, как показано ниже. Тест провалился потому что, в соответствии с соглашением Django, первый символ имени метки должен быть в верхнем регистре (Django делает это автоматически).</p>

<div class="code-example"><pre class="brush: bash notranslate"><code><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
FAIL: test_date_of_death_label <span class="token punctuation">(</span>catalog.tests.test_models.AuthorModelTest<span class="token punctuation">)</span>
----------------------------------------------------------------------
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span>:
  File <span class="token string">"D:\...\locallibrary<span class="token entity" title="\c">\c</span>atalog<span class="token entity" title="\t">\t</span>ests<span class="token entity" title="\t">\t</span>est_models.py"</span>, line <span class="token number">32</span>, <span class="token keyword">in</span> test_date_of_death_label
    self.assertEquals<span class="token punctuation">(</span>field_label,<span class="token string">'died'</span><span class="token punctuation">)</span>
AssertionError: <span class="token string">'Died'</span> <span class="token operator">!=</span> <span class="token string">'died'</span>
- Died
? ^
+ died
? ^</code></pre></div>

<p>Это несущественный баг, но он демонстрирует нам то, что написание тестов может более тщательно проверить все неточности, которые вы можете сделать.</p>

<div class="note notecard" id="sect12">
<p><strong>Примечание: </strong>Измените значение метки для поля date_of_death (/catalog/models.py) на "died" и перезапустите тесты.</p>
</div>

<p>Тот же подход применяется к тестированию других моделей. Самостоятельно создайте свои собственные тесты для оставшихся моделей.</p></div><h3 id="формы"><a href="#формы" title="Permalink to Формы">Формы</a></h3><div><p>Смысл проведения тестов для форм тот же, что и для моделей; надо проверить весь собственный код и другие особенности проекта, но не то, что касается фреймворка, или сторонних библиотек.</p>

<p>В основном это означает, что вы должны протестировать то, что формы имеют соответствующие поля и что они показываются с соответствующими метками и вспомогательными текстами. Вам не надо проверять то, что Django правильно осуществляет валидацию полей (если только вы не создали своё собственное поле и валидацию) — то есть вам не надо проверять что, например, поле ввода электронного адреса принимает только электронного адреса. Но вы должны протестировать каждую дополнительную валидацию, которую вы добавляете для полей и любые сообщения, который ваш код генерирует в случае ошибок.</p>

<p>Рассмотрим форму для обновления книг. Она имеет только одно поле обновления даты, которое будет иметь текстовую метку и вспомогательный текст, который вам надо проверить.</p>

<div class="code-example"><pre class="brush: python notranslate"><code><span class="token keyword">class</span> <span class="token class-name">RenewBookForm</span><span class="token punctuation">(</span>forms<span class="token punctuation">.</span>Form<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
    Форма обновления книг для библиотекарей
    """</span>
    renewal_date <span class="token operator">=</span> forms<span class="token punctuation">.</span>DateField<span class="token punctuation">(</span>help_text<span class="token operator">=</span><span class="token string">"Enter a date between now and 4 weeks (default 3)."</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">clean_renewal_date</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        data <span class="token operator">=</span> self<span class="token punctuation">.</span>cleaned_data<span class="token punctuation">[</span><span class="token string">'renewal_date'</span><span class="token punctuation">]</span>

        <span class="token comment">#Проверка, что дата не в прошлом.</span>
        <span class="token keyword">if</span> data <span class="token operator">&lt;</span> datetime<span class="token punctuation">.</span>date<span class="token punctuation">.</span>today<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> ValidationError<span class="token punctuation">(</span>_<span class="token punctuation">(</span><span class="token string">'Invalid date - renewal in past'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token comment">#Если дата в "далёком" будущем (+4 недели)</span>
        <span class="token keyword">if</span> data <span class="token operator">&gt;</span> datetime<span class="token punctuation">.</span>date<span class="token punctuation">.</span>today<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>weeks<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> ValidationError<span class="token punctuation">(</span>_<span class="token punctuation">(</span><span class="token string">'Invalid date - renewal more than 4 weeks ahead'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

        <span class="token comment"># Всегда надо возвращать очищенные данные.</span>
        <span class="token keyword">return</span> data</code></pre></div>

<p>Откройте файл <strong>/catalog/tests/test_forms.py</strong> и замените весь существующий в нем код, следующим кодом теста для формы <code>RenewBookForm</code>. Мы начали его с импорта нашей формы и некоторых библиотек Python и Django, которые помогут нам провести тесты. Затем, тем же способом как мы делали для моделей, объявляем тестовый класс нашей формы, то есть применяя описательное имя класс наследника <code>TestCase</code>.</p>

<div class="code-example"><pre class="brush: python notranslate"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>test <span class="token keyword">import</span> TestCase

<span class="token comment"># Создайте ваши тесты здесь</span>

<span class="token keyword">import</span> datetime
<span class="token keyword">from</span> django<span class="token punctuation">.</span>utils <span class="token keyword">import</span> timezone
<span class="token keyword">from</span> catalog<span class="token punctuation">.</span>forms <span class="token keyword">import</span> RenewBookForm

<span class="token keyword">class</span> <span class="token class-name">RenewBookFormTest</span><span class="token punctuation">(</span>TestCase<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">test_renew_form_date_field_label</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        form <span class="token operator">=</span> RenewBookForm<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertTrue<span class="token punctuation">(</span>form<span class="token punctuation">.</span>fields<span class="token punctuation">[</span><span class="token string">'renewal_date'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>label <span class="token operator">==</span> <span class="token boolean">None</span> <span class="token keyword">or</span> form<span class="token punctuation">.</span>fields<span class="token punctuation">[</span><span class="token string">'renewal_date'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>label <span class="token operator">==</span> <span class="token string">'renewal date'</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_renew_form_date_field_help_text</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        form <span class="token operator">=</span> RenewBookForm<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span>form<span class="token punctuation">.</span>fields<span class="token punctuation">[</span><span class="token string">'renewal_date'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>help_text<span class="token punctuation">,</span><span class="token string">'Enter a date between now and 4 weeks (default 3).'</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_renew_form_date_in_past</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        date <span class="token operator">=</span> datetime<span class="token punctuation">.</span>date<span class="token punctuation">.</span>today<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>days<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
        form_data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'renewal_date'</span><span class="token punctuation">:</span> date<span class="token punctuation">}</span>
        form <span class="token operator">=</span> RenewBookForm<span class="token punctuation">(</span>data<span class="token operator">=</span>form_data<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertFalse<span class="token punctuation">(</span>form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_renew_form_date_too_far_in_future</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        date <span class="token operator">=</span> datetime<span class="token punctuation">.</span>date<span class="token punctuation">.</span>today<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>weeks<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">+</span> datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>days<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
        form_data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'renewal_date'</span><span class="token punctuation">:</span> date<span class="token punctuation">}</span>
        form <span class="token operator">=</span> RenewBookForm<span class="token punctuation">(</span>data<span class="token operator">=</span>form_data<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertFalse<span class="token punctuation">(</span>form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_renew_form_date_today</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        date <span class="token operator">=</span> datetime<span class="token punctuation">.</span>date<span class="token punctuation">.</span>today<span class="token punctuation">(</span><span class="token punctuation">)</span>
        form_data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'renewal_date'</span><span class="token punctuation">:</span> date<span class="token punctuation">}</span>
        form <span class="token operator">=</span> RenewBookForm<span class="token punctuation">(</span>data<span class="token operator">=</span>form_data<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertTrue<span class="token punctuation">(</span>form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_renew_form_date_max</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        date <span class="token operator">=</span> timezone<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>weeks<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span>
        form_data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'renewal_date'</span><span class="token punctuation">:</span> date<span class="token punctuation">}</span>
        form <span class="token operator">=</span> RenewBookForm<span class="token punctuation">(</span>data<span class="token operator">=</span>form_data<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertTrue<span class="token punctuation">(</span>form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div>

<p>Первые две функции проверяют текст который должны содержать поля <code>label</code> и <code>help_text</code>. Доступ к полю мы получаем при помощи словаря (то есть, <code>form.fields['renewal_date']</code>). Отметим, что мы должны проверять содержит ли метка значение <code>None</code>, иначе в поле текста метки вы увидите "<code>None</code>".</p>

<p>Оставшиеся функции проверяют валидность дат, то есть их нахождение внутри определённого интервала, а также невалидность для значений, которые находятся вне заданного интервала. Для получения исходного значения мы использовали функцию получения текущей даты (<code>datetime.date.today()</code>), а также функцию <code>datetime.timedelta()</code> (которая принимает определённое число дней, или недель). Затем мы просто создали форму, передавая ей наши данные и проверяя её на валидность.</p>

<div class="note notecard" id="sect13">
<p><strong>Примечание:</strong> В данном примере мы не использовали ни базу данных, ни тестовый клиент. Рассмотрите модификацию этих тестов при помощи класса <a href="https://docs.djangoproject.com/en/1.10/topics/testing/tools/#django.test.SimpleTestCase" class="external" rel=" noopener">SimpleTestCase</a>.</p>

<p>Нам также надо бы проверять возникновение ошибок, которые появляются если форма не валидна. Но, обычно, это относится к процессу вывода информации, таким образом, мы позаботимся об этом в следующем разделе.</p>
</div>

<p>На этом с формами можно закончить; у нас имеются и другие тесты, но они были созданы обобщёнными классами отображения для редактирования! Запустите тесты и убедитесь, что наш код все ещё им соответствует!</p></div><h3 id="отображения"><a href="#отображения" title="Permalink to Отображения">Отображения</a></h3><div><p>Для проверки поведения отображения мы используем тестовый клиент Django <a href="https://docs.djangoproject.com/en/1.10/topics/testing/tools/#django.test.Client" class="external" rel=" noopener">Client</a>. Данный класс действует как упрощённый веб-браузер который мы применяем для имитации  <code>GET</code> и <code>POST</code> запросов и проверки ответов. Про ответы мы можем узнать почти все, начиная с низкоуровневого HTTP (итоговые заголовки и коды статусов) и вплоть до применяемых шаблонов, которые используются для HTML-рендера, а также контекста, который передаётся в соответствующий  шаблон. Кроме того, мы можем отследить последовательность перенаправлений (если имеются), проверить URL-адреса и коды статусов на каждом шаге. Все это позволит нам проверить, что каждое отображение выполняет то, что ожидается.</p>

<p>Давайте начнём с одного из простейших отображений которое возвращает список всех авторов. Вы можете его увидеть по URL-адресу <strong>/catalog/authors/</strong> (данный URL-адрес можно найти в разделе приложения catalog,  в файле настроек urls.py по имени  'authors').</p>

<div class="code-example"><pre class="brush: python notranslate"><code><span class="token keyword">class</span> <span class="token class-name">AuthorListView</span><span class="token punctuation">(</span>generic<span class="token punctuation">.</span>ListView<span class="token punctuation">)</span><span class="token punctuation">:</span>
    model <span class="token operator">=</span> Author
    paginate_by <span class="token operator">=</span> <span class="token number">10</span>
</code></pre></div>

<p>Поскольку это обобщённое отображение списка, то почти все за нас делает Django. Если вы доверяете Django, то единственной вещью, которую вам нужно протестировать, является переход к данному отображению по указанному URL-адресу. Таким образом, если вы применяете методику TDD (test-driven development, разработка через тесты), то начните проект с написания тестов, которые будут проверять, что данное отображение выводит всех авторов и, к тому же, например, блоками по 10.</p>

<p>Откройте файл <strong>/catalog/tests/test_views.py</strong> замените все его содержимое на следующий код теста для класса <code>AuthorListView</code>. Как и ранее, мы импортируем нашу модель и некоторые полезные классы. В методе <code>setUpTestData()</code> мы задаём число объектов класса <code>Author</code> которые мы тестируем при постраничном выводе.</p>

<div class="code-example"><pre class="brush: python notranslate"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>test <span class="token keyword">import</span> TestCase

<span class="token comment"># Create your tests here.</span>

<span class="token keyword">from</span> catalog<span class="token punctuation">.</span>models <span class="token keyword">import</span> Author
<span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> reverse

<span class="token keyword">class</span> <span class="token class-name">AuthorListViewTest</span><span class="token punctuation">(</span>TestCase<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token decorator annotation punctuation">@classmethod</span>
    <span class="token keyword">def</span> <span class="token function">setUpTestData</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment">#Create 13 authors for pagination tests</span>
        number_of_authors <span class="token operator">=</span> <span class="token number">13</span>
        <span class="token keyword">for</span> author_num <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>number_of_authors<span class="token punctuation">)</span><span class="token punctuation">:</span>
            Author<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span>first_name<span class="token operator">=</span><span class="token string">'Christian %s'</span> <span class="token operator">%</span> author_num<span class="token punctuation">,</span> last_name <span class="token operator">=</span> <span class="token string">'Surname %s'</span> <span class="token operator">%</span> author_num<span class="token punctuation">,</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_view_url_exists_at_desired_location</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        resp <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'/catalog/authors/'</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span>resp<span class="token punctuation">.</span>status_code<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_view_url_accessible_by_name</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        resp <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>get<span class="token punctuation">(</span>reverse<span class="token punctuation">(</span><span class="token string">'authors'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span>resp<span class="token punctuation">.</span>status_code<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_view_uses_correct_template</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        resp <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>get<span class="token punctuation">(</span>reverse<span class="token punctuation">(</span><span class="token string">'authors'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span>resp<span class="token punctuation">.</span>status_code<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>assertTemplateUsed<span class="token punctuation">(</span>resp<span class="token punctuation">,</span> <span class="token string">'catalog/author_list.html'</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_pagination_is_ten</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        resp <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>get<span class="token punctuation">(</span>reverse<span class="token punctuation">(</span><span class="token string">'authors'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span>resp<span class="token punctuation">.</span>status_code<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertTrue<span class="token punctuation">(</span><span class="token string">'is_paginated'</span> <span class="token keyword">in</span> resp<span class="token punctuation">.</span>context<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertTrue<span class="token punctuation">(</span>resp<span class="token punctuation">.</span>context<span class="token punctuation">[</span><span class="token string">'is_paginated'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertTrue<span class="token punctuation">(</span> <span class="token builtin">len</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>context<span class="token punctuation">[</span><span class="token string">'author_list'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">10</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_lists_all_authors</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment">#Get second page and confirm it has (exactly) remaining 3 items</span>
        resp <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>get<span class="token punctuation">(</span>reverse<span class="token punctuation">(</span><span class="token string">'authors'</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'?page=2'</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span>resp<span class="token punctuation">.</span>status_code<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertTrue<span class="token punctuation">(</span><span class="token string">'is_paginated'</span> <span class="token keyword">in</span> resp<span class="token punctuation">.</span>context<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertTrue<span class="token punctuation">(</span>resp<span class="token punctuation">.</span>context<span class="token punctuation">[</span><span class="token string">'is_paginated'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertTrue<span class="token punctuation">(</span> <span class="token builtin">len</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>context<span class="token punctuation">[</span><span class="token string">'author_list'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span></code></pre></div>

<p>Все тесты используют клиент (принадлежащего классу <code>TestCase</code>, от которого мы наследовались) для имитации <code>GET</code>-запроса и получения ответа (<code>resp</code>). Первая версия проверяет заданный URL-адрес (заметьте, - просто определённый путь без указания домена), в то время как второй генерирует URL-адрес при помощи его имени, указанного в настройках.</p>

<div class="code-example"><pre class="brush: python notranslate"><code>resp <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'/catalog/authors/'</span><span class="token punctuation">)</span>
resp <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>get<span class="token punctuation">(</span>reverse<span class="token punctuation">(</span><span class="token string">'authors'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div>

<p>Когда мы получаем ответ, то мы извлекаем код статуса, используемый шаблон, "включён" ли постраничный вывод, количество элементов в подмножестве (на странице) и общее число элементов.</p>

<p>Наиболее интересной переменной является <code>resp.context</code>, которая является объектом контекста, который передаётся шаблону из отображения. Он (объект контекста) очень полезен для тестов, поскольку позволяет нам убедиться, что наш шаблон получает все данные которые ему необходимы. Другими словами мы можем проверить, что мы используем правильный шаблон с данными, которые проделывают долгий путь проверок чтобы соответствовать данному шаблону.</p>

<h4 id="отображения_и_регистрация_пользователей">Отображения и регистрация пользователей</h4>

<p>В некоторых случаях вам нужно провести тесты отображений к которым имеют доступ только зарегистрированные пользователи. Например, <code>LoanedBooksByUserListView</code> очень похоже на наше предыдущее отображение, но доступно только для залогинившихся пользователей и показывает только те записи (<code>BookInstance)</code>, которые соответствуют текущему пользователю, имеют статус 'on loan' (книга взята домой), а также забронированы.</p>

<div class="code-example"><pre class="brush: python notranslate"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>mixins <span class="token keyword">import</span> LoginRequiredMixin

<span class="token keyword">class</span> <span class="token class-name">LoanedBooksByUserListView</span><span class="token punctuation">(</span>LoginRequiredMixin<span class="token punctuation">,</span>generic<span class="token punctuation">.</span>ListView<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
    Обобщённый класс отображения списка взятых книг текущим пользователем
    """</span>
    model <span class="token operator">=</span> BookInstance
    template_name <span class="token operator">=</span><span class="token string">'catalog/bookinstance_list_borrowed_user.html'</span>
    paginate_by <span class="token operator">=</span> <span class="token number">10</span>

    <span class="token keyword">def</span> <span class="token function">get_queryset</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> BookInstance<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>borrower<span class="token operator">=</span>self<span class="token punctuation">.</span>request<span class="token punctuation">.</span>user<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>status__exact<span class="token operator">=</span><span class="token string">'o'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>order_by<span class="token punctuation">(</span><span class="token string">'due_back'</span><span class="token punctuation">)</span></code></pre></div>

<p>Добавьте тестовый код следующего фрагмента в <strong>/catalog/tests/test_views.py</strong>. В нем, для создания нескольких аккаунтов и  объектов <code>BookInstance</code> которые будут использоваться в дальнейших тестах, мы используем метод <code>SetUp()</code> (вместе с соответствующими книгами и другими записями). Половина книг бронируется  тестовыми пользователями, но в начале для них всех мы устанавливаем статус "доступно". Использование метода <code>SetUp()</code> предпочтительнее чем <code>setUpTestData()</code>, поскольку в дальнейшем мы будем модифицировать некоторые объекты.</p>

<div class="note notecard" id="sect14">
<p><strong>Примечание:</strong> Метод <code>setUp()</code> создаёт книгу с заданным языком <code>Language</code>, но <em>ваш</em> код может не включать в себя модель <code>Language</code>, поскольку это было <em>домашним заданием</em>. В таком случае просто закомментируйте соответствующие строки. Поступите также и в следующем разделе, посвящённом <code>RenewBookInstancesViewTest.</code></p>
</div>

<div class="code-example"><pre class="brush: python notranslate"><code><span class="token keyword">import</span> datetime
<span class="token keyword">from</span> django<span class="token punctuation">.</span>utils <span class="token keyword">import</span> timezone

<span class="token keyword">from</span> catalog<span class="token punctuation">.</span>models <span class="token keyword">import</span> BookInstance<span class="token punctuation">,</span> Book<span class="token punctuation">,</span> Genre<span class="token punctuation">,</span> Language
<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>models <span class="token keyword">import</span> User <span class="token comment"># Необходимо для представления User как borrower</span>

<span class="token keyword">class</span> <span class="token class-name">LoanedBookInstancesByUserListViewTest</span><span class="token punctuation">(</span>TestCase<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">setUp</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># Создание двух пользователей</span>
        test_user1 <span class="token operator">=</span> User<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create_user<span class="token punctuation">(</span>username<span class="token operator">=</span><span class="token string">'testuser1'</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">'12345'</span><span class="token punctuation">)</span>
        test_user1<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>
        test_user2 <span class="token operator">=</span> User<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create_user<span class="token punctuation">(</span>username<span class="token operator">=</span><span class="token string">'testuser2'</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">'12345'</span><span class="token punctuation">)</span>
        test_user2<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment"># Создание книги</span>
        test_author <span class="token operator">=</span> Author<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span>first_name<span class="token operator">=</span><span class="token string">'John'</span><span class="token punctuation">,</span> last_name<span class="token operator">=</span><span class="token string">'Smith'</span><span class="token punctuation">)</span>
        test_genre <span class="token operator">=</span> Genre<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'Fantasy'</span><span class="token punctuation">)</span>
        test_language <span class="token operator">=</span> Language<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'English'</span><span class="token punctuation">)</span>
        test_book <span class="token operator">=</span> Book<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">'Book Title'</span><span class="token punctuation">,</span> summary <span class="token operator">=</span> <span class="token string">'My book summary'</span><span class="token punctuation">,</span> isbn<span class="token operator">=</span><span class="token string">'ABCDEFG'</span><span class="token punctuation">,</span> author<span class="token operator">=</span>test_author<span class="token punctuation">,</span> language<span class="token operator">=</span>test_language<span class="token punctuation">)</span>
        <span class="token comment"># Create genre as a post-step</span>
        genre_objects_for_book <span class="token operator">=</span> Genre<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        test_book<span class="token punctuation">.</span>genre<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>genre_objects_for_book<span class="token punctuation">)</span> <span class="token comment"># Присвоение типов many-to-many напрямую недопустимо</span>
        test_book<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment"># Создание 30 объектов BookInstance</span>
        number_of_book_copies <span class="token operator">=</span> <span class="token number">30</span>
        <span class="token keyword">for</span> book_copy <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>number_of_book_copies<span class="token punctuation">)</span><span class="token punctuation">:</span>
            return_date<span class="token operator">=</span> timezone<span class="token punctuation">.</span>now<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>days<span class="token operator">=</span>book_copy<span class="token operator">%</span><span class="token number">5</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> book_copy <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">:</span>
                the_borrower<span class="token operator">=</span>test_user1
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                the_borrower<span class="token operator">=</span>test_user2
            status<span class="token operator">=</span><span class="token string">'m'</span>
            BookInstance<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span>book<span class="token operator">=</span>test_book<span class="token punctuation">,</span>imprint<span class="token operator">=</span><span class="token string">'Unlikely Imprint, 2016'</span><span class="token punctuation">,</span> due_back<span class="token operator">=</span>return_date<span class="token punctuation">,</span> borrower<span class="token operator">=</span>the_borrower<span class="token punctuation">,</span> status<span class="token operator">=</span>status<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_redirect_if_not_logged_in</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        resp <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>get<span class="token punctuation">(</span>reverse<span class="token punctuation">(</span><span class="token string">'my-borrowed'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertRedirects<span class="token punctuation">(</span>resp<span class="token punctuation">,</span> <span class="token string">'/accounts/login/?next=/catalog/mybooks/'</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_logged_in_uses_correct_template</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        login <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>login<span class="token punctuation">(</span>username<span class="token operator">=</span><span class="token string">'testuser1'</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">'12345'</span><span class="token punctuation">)</span>
        resp <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>get<span class="token punctuation">(</span>reverse<span class="token punctuation">(</span><span class="token string">'my-borrowed'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

        <span class="token comment"># Проверка что пользователь залогинился</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>context<span class="token punctuation">[</span><span class="token string">'user'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'testuser1'</span><span class="token punctuation">)</span>
        <span class="token comment"># Проверка ответа на запрос</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span>resp<span class="token punctuation">.</span>status_code<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>

        <span class="token comment"># Проверка того, что мы используем правильный шаблон</span>
        self<span class="token punctuation">.</span>assertTemplateUsed<span class="token punctuation">(</span>resp<span class="token punctuation">,</span> <span class="token string">'catalog/bookinstance_list_borrowed_user.html'</span><span class="token punctuation">)</span>
</code></pre></div>

<p>Если пользователь не залогирован то, чтобы убедиться в том что отображение перейдёт на страницу входа (логирования), мы используем метод <code>assertRedirects</code>, что продемонстрировано в методе <code>test_redirect_if_not_logged_in()</code>. Затем мы осуществляем вход для пользователя и проверяем что полученный статус <code>status_code</code> равен 200 (успешно). </p>

<p>Остальные тесты проверяют, соответственно, что наше отображение показывает только те книги которые взяты текущим пользователем. Скопируйте код, показанный ниже, в нижнюю часть предыдущего класса.</p>

<div class="code-example"><pre class="brush: python notranslate"><code>    <span class="token keyword">def</span> <span class="token function">test_only_borrowed_books_in_list</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        login <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>login<span class="token punctuation">(</span>username<span class="token operator">=</span><span class="token string">'testuser1'</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">'12345'</span><span class="token punctuation">)</span>
        resp <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>get<span class="token punctuation">(</span>reverse<span class="token punctuation">(</span><span class="token string">'my-borrowed'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

        <span class="token comment">#Проверка, что пользователь залогинился</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>context<span class="token punctuation">[</span><span class="token string">'user'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'testuser1'</span><span class="token punctuation">)</span>
        <span class="token comment">#Check that we got a response "success"</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span>resp<span class="token punctuation">.</span>status_code<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>

        <span class="token comment">#Проверка, что изначально у нас нет книг в списке</span>
        self<span class="token punctuation">.</span>assertTrue<span class="token punctuation">(</span><span class="token string">'bookinstance_list'</span> <span class="token keyword">in</span> resp<span class="token punctuation">.</span>context<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span> <span class="token builtin">len</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>context<span class="token punctuation">[</span><span class="token string">'bookinstance_list'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>

        <span class="token comment">#Теперь все книги "взяты на прокат"</span>
        get_ten_books <span class="token operator">=</span> BookInstance<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">]</span>

        <span class="token keyword">for</span> copy <span class="token keyword">in</span> get_ten_books<span class="token punctuation">:</span>
            copy<span class="token punctuation">.</span>status<span class="token operator">=</span><span class="token string">'o'</span>
            copy<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment">#Проверка, что все забронированные книги в списке</span>
        resp <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>get<span class="token punctuation">(</span>reverse<span class="token punctuation">(</span><span class="token string">'my-borrowed'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token comment">#Проверка, что пользователь залогинился</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>context<span class="token punctuation">[</span><span class="token string">'user'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'testuser1'</span><span class="token punctuation">)</span>
        <span class="token comment">#Проверка успешности ответа</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span>resp<span class="token punctuation">.</span>status_code<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>assertTrue<span class="token punctuation">(</span><span class="token string">'bookinstance_list'</span> <span class="token keyword">in</span> resp<span class="token punctuation">.</span>context<span class="token punctuation">)</span>

        <span class="token comment">#Подтверждение, что все книги принадлежат testuser1 и взяты "на прокат"</span>
        <span class="token keyword">for</span> bookitem <span class="token keyword">in</span> resp<span class="token punctuation">.</span>context<span class="token punctuation">[</span><span class="token string">'bookinstance_list'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span>resp<span class="token punctuation">.</span>context<span class="token punctuation">[</span><span class="token string">'user'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> bookitem<span class="token punctuation">.</span>borrower<span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span><span class="token string">'o'</span><span class="token punctuation">,</span> bookitem<span class="token punctuation">.</span>status<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_pages_ordered_by_due_date</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>

        <span class="token comment">#Изменение статуса на "в прокате"</span>
        <span class="token keyword">for</span> copy <span class="token keyword">in</span> BookInstance<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            copy<span class="token punctuation">.</span>status<span class="token operator">=</span><span class="token string">'o'</span>
            copy<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>

        login <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>login<span class="token punctuation">(</span>username<span class="token operator">=</span><span class="token string">'testuser1'</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">'12345'</span><span class="token punctuation">)</span>
        resp <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>get<span class="token punctuation">(</span>reverse<span class="token punctuation">(</span><span class="token string">'my-borrowed'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

        <span class="token comment">#Пользователь залогинился</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>context<span class="token punctuation">[</span><span class="token string">'user'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'testuser1'</span><span class="token punctuation">)</span>
        <span class="token comment">#Check that we got a response "success"</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span>resp<span class="token punctuation">.</span>status_code<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>

        <span class="token comment">#Подтверждение, что из всего списка показывается только 10 экземпляров</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span> <span class="token builtin">len</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>context<span class="token punctuation">[</span><span class="token string">'bookinstance_list'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span>

        last_date<span class="token operator">=</span><span class="token number">0</span>
        <span class="token keyword">for</span> copy <span class="token keyword">in</span> resp<span class="token punctuation">.</span>context<span class="token punctuation">[</span><span class="token string">'bookinstance_list'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> last_date<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">:</span>
                last_date<span class="token operator">=</span>copy<span class="token punctuation">.</span>due_back
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>assertTrue<span class="token punctuation">(</span>last_date <span class="token operator">&lt;=</span> copy<span class="token punctuation">.</span>due_back<span class="token punctuation">)</span></code></pre></div>

<p>Если хотите, то вы, безусловно, можете добавить тесты проверяющие постраничный вывод!</p>

<h4 id="тестирование_форм_и_отображений">Тестирование форм и отображений</h4>

<p>Процесс тестирования отображений с формами немного более сложен, чем в представленных ранее случаях, поскольку вам надо протестировать большее количество кода: начальное состояние показа формы, показ формы и её данных в случае ошибок, а также показ формы в случае успеха. Хорошей новостью является то, что мы применяем клиент для тестирования практически тем же способом, как мы делали это в случае отображений, которые отвечают только за вывод информации.</p>

<p>В качестве демонстрации давайте напишем некоторые тесты для отображения, которые отвечают за обновление книг(<code>renew_book_librarian()</code>):</p>

<div class="code-example"><pre class="brush: python notranslate"><code><span class="token keyword">from</span> <span class="token punctuation">.</span>forms <span class="token keyword">import</span> RenewBookForm

<span class="token decorator annotation punctuation">@permission_required</span><span class="token punctuation">(</span><span class="token string">'catalog.can_mark_returned'</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">renew_book_librarian</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> pk<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
    Функция отображения обновления экземпляра BookInstance библиотекарем
    """</span>
    book_inst<span class="token operator">=</span>get_object_or_404<span class="token punctuation">(</span>BookInstance<span class="token punctuation">,</span> pk <span class="token operator">=</span> pk<span class="token punctuation">)</span>

    <span class="token comment"># Если это POST-запрос, тогда обработать данные формы</span>
    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">'POST'</span><span class="token punctuation">:</span>

        <span class="token comment"># Создать объект формы и заполнить её данными из запроса (связывание/биндинг):</span>
        form <span class="token operator">=</span> RenewBookForm<span class="token punctuation">(</span>request<span class="token punctuation">.</span>POST<span class="token punctuation">)</span>

        <span class="token comment"># Проверка валидности формы:</span>
        <span class="token keyword">if</span> form<span class="token punctuation">.</span>is_valid<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token comment"># process the data in form.cleaned_data as required (here we just write it to the model due_back field)</span>
            book_inst<span class="token punctuation">.</span>due_back <span class="token operator">=</span> form<span class="token punctuation">.</span>cleaned_data<span class="token punctuation">[</span><span class="token string">'renewal_date'</span><span class="token punctuation">]</span>
            book_inst<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>

            <span class="token comment"># переход по URL-адресу:</span>
            <span class="token keyword">return</span> HttpResponseRedirect<span class="token punctuation">(</span>reverse<span class="token punctuation">(</span><span class="token string">'all-borrowed'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>

    <span class="token comment"># Если это GET-запрос (или что-то ещё), то создаём форму по умолчанию</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        proposed_renewal_date <span class="token operator">=</span> datetime<span class="token punctuation">.</span>date<span class="token punctuation">.</span>today<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>weeks<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span>
        form <span class="token operator">=</span> RenewBookForm<span class="token punctuation">(</span>initial<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'renewal_date'</span><span class="token punctuation">:</span> proposed_renewal_date<span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'catalog/book_renew_librarian.html'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'form'</span><span class="token punctuation">:</span> form<span class="token punctuation">,</span> <span class="token string">'bookinst'</span><span class="token punctuation">:</span>book_inst<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>

<p>Нам надо проверить что к данному отображению имеют доступ только те пользователи, которые имеют разрешение типа <code>can_mark_returned</code>, а кроме того, что пользователи перенаправляются на страницу ошибки HTTP 404  если они пытаются обновить экземпляр книги  <code>BookInstance</code>, который не существует. Мы должны проверить что начальное значение формы соответствует дате через 3 недели в будущем, а также то, что если форма прошла валидацию, то мы переходим на страницу отображения книг "all-borrowed" (забронированных). Для тестов, отвечающих за проверку "провалов", мы также должны удостовериться что они отправляют соответствующие сообщения об ошибках.</p>

<p>В нижнюю часть файла <strong>/catalog/tests/test_views.py</strong> добавьте класс тестирования (показан во фрагменте, ниже). Он создаёт двух пользователей и два экземпляра книги, но только один пользователь получает необходимый доступ к соответствующему отображению. Код, который "присваивает" соответствующий доступ, выделен в коде жирным:</p>

<div class="code-example"><pre class="brush: python notranslate"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>models <span class="token keyword">import</span> Permission <span class="token comment"># Required to grant the permission needed to set a book as returned.</span>

<span class="token keyword">class</span> <span class="token class-name">RenewBookInstancesViewTest</span><span class="token punctuation">(</span>TestCase<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">setUp</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment">#Создание пользователя</span>
        test_user1 <span class="token operator">=</span> User<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create_user<span class="token punctuation">(</span>username<span class="token operator">=</span><span class="token string">'testuser1'</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">'12345'</span><span class="token punctuation">)</span>
        test_user1<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>

        test_user2 <span class="token operator">=</span> User<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create_user<span class="token punctuation">(</span>username<span class="token operator">=</span><span class="token string">'testuser2'</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">'12345'</span><span class="token punctuation">)</span>
        test_user2<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>
        permission <span class="token operator">=</span> Permission<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'Set book as returned'</span><span class="token punctuation">)</span>
        test_user2<span class="token punctuation">.</span>user_permissions<span class="token punctuation">.</span>add<span class="token punctuation">(</span>permission<span class="token punctuation">)</span>
        test_user2<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment">#Создание книги</span>
        test_author <span class="token operator">=</span> Author<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span>first_name<span class="token operator">=</span><span class="token string">'John'</span><span class="token punctuation">,</span> last_name<span class="token operator">=</span><span class="token string">'Smith'</span><span class="token punctuation">)</span>
        test_genre <span class="token operator">=</span> Genre<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'Fantasy'</span><span class="token punctuation">)</span>
        test_language <span class="token operator">=</span> Language<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'English'</span><span class="token punctuation">)</span>
        test_book <span class="token operator">=</span> Book<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">'Book Title'</span><span class="token punctuation">,</span> summary <span class="token operator">=</span> <span class="token string">'My book summary'</span><span class="token punctuation">,</span> isbn<span class="token operator">=</span><span class="token string">'ABCDEFG'</span><span class="token punctuation">,</span> author<span class="token operator">=</span>test_author<span class="token punctuation">,</span> language<span class="token operator">=</span>test_language<span class="token punctuation">,</span><span class="token punctuation">)</span>
        <span class="token comment">#Создание жанра Create genre as a post-step</span>
        genre_objects_for_book <span class="token operator">=</span> Genre<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        test_book<span class="token punctuation">.</span>genre<span class="token operator">=</span>genre_objects_for_book
        test_book<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment">#Создание объекта BookInstance для для пользователя test_user1</span>
        return_date<span class="token operator">=</span> datetime<span class="token punctuation">.</span>date<span class="token punctuation">.</span>today<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>days<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>test_bookinstance1<span class="token operator">=</span>BookInstance<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span>book<span class="token operator">=</span>test_book<span class="token punctuation">,</span>imprint<span class="token operator">=</span><span class="token string">'Unlikely Imprint, 2016'</span><span class="token punctuation">,</span> due_back<span class="token operator">=</span>return_date<span class="token punctuation">,</span> borrower<span class="token operator">=</span>test_user1<span class="token punctuation">,</span> status<span class="token operator">=</span><span class="token string">'o'</span><span class="token punctuation">)</span>

        <span class="token comment">#Создание объекта BookInstance для для пользователя test_user2</span>
        return_date<span class="token operator">=</span> datetime<span class="token punctuation">.</span>date<span class="token punctuation">.</span>today<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>days<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>test_bookinstance2<span class="token operator">=</span>BookInstance<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>create<span class="token punctuation">(</span>book<span class="token operator">=</span>test_book<span class="token punctuation">,</span>imprint<span class="token operator">=</span><span class="token string">'Unlikely Imprint, 2016'</span><span class="token punctuation">,</span> due_back<span class="token operator">=</span>return_date<span class="token punctuation">,</span> borrower<span class="token operator">=</span>test_user2<span class="token punctuation">,</span> status<span class="token operator">=</span><span class="token string">'o'</span><span class="token punctuation">)</span></code></pre></div>

<p>В нижнюю часть класса тестирования добавьте следующие методы (из следующего фрагмента). Они проверяют, что только пользователь с соответствующим доступом (<em>testuser2</em>) имеет доступ к отображению. Мы проверяем все случаи: когда пользователь не залогинился, когда залогинился, но не имеет соответствующего доступа, когда имеет доступ, но не является заёмщиком книги (тест должен быть успешным), а также, что произойдёт если попытаться получить доступ к книге <code>BookInstance</code> которой не существует. Кроме того, мы проверяем то, что используется правильный (необходимый) шаблон.</p>

<div class="code-example"><pre class="brush: python notranslate"><code>    <span class="token keyword">def</span> <span class="token function">test_redirect_if_not_logged_in</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        resp <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>get<span class="token punctuation">(</span>reverse<span class="token punctuation">(</span><span class="token string">'renew-book-librarian'</span><span class="token punctuation">,</span> kwargs<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'pk'</span><span class="token punctuation">:</span>self<span class="token punctuation">.</span>test_bookinstance1<span class="token punctuation">.</span>pk<span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
        <span class="token comment">#Manually check redirect (Can't use assertRedirect, because the redirect URL is unpredictable)</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span> resp<span class="token punctuation">.</span>status_code<span class="token punctuation">,</span><span class="token number">302</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertTrue<span class="token punctuation">(</span> resp<span class="token punctuation">.</span>url<span class="token punctuation">.</span>startswith<span class="token punctuation">(</span><span class="token string">'/accounts/login/'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_redirect_if_logged_in_but_not_correct_permission</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        login <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>login<span class="token punctuation">(</span>username<span class="token operator">=</span><span class="token string">'testuser1'</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">'12345'</span><span class="token punctuation">)</span>
        resp <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>get<span class="token punctuation">(</span>reverse<span class="token punctuation">(</span><span class="token string">'renew-book-librarian'</span><span class="token punctuation">,</span> kwargs<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'pk'</span><span class="token punctuation">:</span>self<span class="token punctuation">.</span>test_bookinstance1<span class="token punctuation">.</span>pk<span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>

        <span class="token comment">#Manually check redirect (Can't use assertRedirect, because the redirect URL is unpredictable)</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span> resp<span class="token punctuation">.</span>status_code<span class="token punctuation">,</span><span class="token number">302</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertTrue<span class="token punctuation">(</span> resp<span class="token punctuation">.</span>url<span class="token punctuation">.</span>startswith<span class="token punctuation">(</span><span class="token string">'/accounts/login/'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_logged_in_with_permission_borrowed_book</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        login <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>login<span class="token punctuation">(</span>username<span class="token operator">=</span><span class="token string">'testuser2'</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">'12345'</span><span class="token punctuation">)</span>
        resp <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>get<span class="token punctuation">(</span>reverse<span class="token punctuation">(</span><span class="token string">'renew-book-librarian'</span><span class="token punctuation">,</span> kwargs<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'pk'</span><span class="token punctuation">:</span>self<span class="token punctuation">.</span>test_bookinstance2<span class="token punctuation">.</span>pk<span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>

        <span class="token comment">#Check that it lets us login - this is our book and we have the right permissions.</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span> resp<span class="token punctuation">.</span>status_code<span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_logged_in_with_permission_another_users_borrowed_book</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        login <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>login<span class="token punctuation">(</span>username<span class="token operator">=</span><span class="token string">'testuser2'</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">'12345'</span><span class="token punctuation">)</span>
        resp <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>get<span class="token punctuation">(</span>reverse<span class="token punctuation">(</span><span class="token string">'renew-book-librarian'</span><span class="token punctuation">,</span> kwargs<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'pk'</span><span class="token punctuation">:</span>self<span class="token punctuation">.</span>test_bookinstance1<span class="token punctuation">.</span>pk<span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>

        <span class="token comment">#Check that it lets us login. We're a librarian, so we can view any users book</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span> resp<span class="token punctuation">.</span>status_code<span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_HTTP404_for_invalid_book_if_logged_in</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">import</span> uuid
        test_uid <span class="token operator">=</span> uuid<span class="token punctuation">.</span>uuid4<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#unlikely UID to match our bookinstance!</span>
        login <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>login<span class="token punctuation">(</span>username<span class="token operator">=</span><span class="token string">'testuser2'</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">'12345'</span><span class="token punctuation">)</span>
        resp <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>get<span class="token punctuation">(</span>reverse<span class="token punctuation">(</span><span class="token string">'renew-book-librarian'</span><span class="token punctuation">,</span> kwargs<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'pk'</span><span class="token punctuation">:</span>test_uid<span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span> resp<span class="token punctuation">.</span>status_code<span class="token punctuation">,</span><span class="token number">404</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_uses_correct_template</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        login <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>login<span class="token punctuation">(</span>username<span class="token operator">=</span><span class="token string">'testuser2'</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">'12345'</span><span class="token punctuation">)</span>
        resp <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>get<span class="token punctuation">(</span>reverse<span class="token punctuation">(</span><span class="token string">'renew-book-librarian'</span><span class="token punctuation">,</span> kwargs<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'pk'</span><span class="token punctuation">:</span>self<span class="token punctuation">.</span>test_bookinstance1<span class="token punctuation">.</span>pk<span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span> resp<span class="token punctuation">.</span>status_code<span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span>

        <span class="token comment">#Check we used correct template</span>
        self<span class="token punctuation">.</span>assertTemplateUsed<span class="token punctuation">(</span>resp<span class="token punctuation">,</span> <span class="token string">'catalog/book_renew_librarian.html'</span><span class="token punctuation">)</span>
</code></pre></div>

<p>Добавьте ещё один тестовый метод, показанный ниже. Он проверяет что начальная дата равна трём неделям в будущем. Заметьте, что мы имеем возможность получить доступ к начальному значению из поля формы (выделено жирным).</p>

<div class="code-example"><pre class="brush: python notranslate"><code>    <span class="token keyword">def</span> <span class="token function">test_form_renewal_date_initially_has_date_three_weeks_in_future</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        login <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>login<span class="token punctuation">(</span>username<span class="token operator">=</span><span class="token string">'testuser2'</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">'12345'</span><span class="token punctuation">)</span>
        resp <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>get<span class="token punctuation">(</span>reverse<span class="token punctuation">(</span><span class="token string">'renew-book-librarian'</span><span class="token punctuation">,</span> kwargs<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'pk'</span><span class="token punctuation">:</span>self<span class="token punctuation">.</span>test_bookinstance1<span class="token punctuation">.</span>pk<span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span> resp<span class="token punctuation">.</span>status_code<span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span>

        date_3_weeks_in_future <span class="token operator">=</span> datetime<span class="token punctuation">.</span>date<span class="token punctuation">.</span>today<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>weeks<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span>resp<span class="token punctuation">.</span>context<span class="token punctuation">[</span><span class="token string">'form'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>initial<span class="token punctuation">[</span><span class="token string">'renewal_date'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> date_3_weeks_in_future <span class="token punctuation">)</span>
</code></pre></div>

<p>Следующий тест (тоже добавьте его в свой класс) проверяет что отображение, в случае успеха, перенаправляет пользователя к списку всех забронированных книг. Здесь мы показываем как при помощи клиента вы можете создать и передать данные в <code>POST</code>-запросе. Данный запрос передаётся вторым аргументом в пост-функцию и представляет из себя словарь пар ключ/значение.</p>

<div class="code-example"><pre class="brush: python notranslate"><code>    <span class="token keyword">def</span> <span class="token function">test_redirects_to_all_borrowed_book_list_on_success</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        login <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>login<span class="token punctuation">(</span>username<span class="token operator">=</span><span class="token string">'testuser2'</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">'12345'</span><span class="token punctuation">)</span>
        valid_date_in_future <span class="token operator">=</span> datetime<span class="token punctuation">.</span>date<span class="token punctuation">.</span>today<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>weeks<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
        resp <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>post<span class="token punctuation">(</span>reverse<span class="token punctuation">(</span><span class="token string">'renew-book-librarian'</span><span class="token punctuation">,</span> kwargs<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'pk'</span><span class="token punctuation">:</span>self<span class="token punctuation">.</span>test_bookinstance1<span class="token punctuation">.</span>pk<span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'renewal_date'</span><span class="token punctuation">:</span>valid_date_in_future<span class="token punctuation">}</span> <span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertRedirects<span class="token punctuation">(</span>resp<span class="token punctuation">,</span> reverse<span class="token punctuation">(</span><span class="token string">'all-borrowed'</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
</code></pre></div>

<div class="warning notecard" id="sect15">
<p>Вместо перехода к отображению <em>all-borrowed</em>, добавленного в качестве <em>домашнего задания</em>, вы можете перенаправить пользователя на домашнюю страницу '/'. В таком случае, исправьте две последние строки тестового кода на код, показанный ниже. Присваивание <code>follow=True</code>, в запросе, гарантирует что запрос вернёт окончательный URL-адрес пункта назначения (следовательно проверяется <code>/catalog/</code>, а не <code>/</code>).</p>

<div class="code-example"><pre class="brush: python notranslate"><code> resp <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>post<span class="token punctuation">(</span>reverse<span class="token punctuation">(</span><span class="token string">'renew-book-librarian'</span><span class="token punctuation">,</span> kwargs<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'pk'</span><span class="token punctuation">:</span>self<span class="token punctuation">.</span>test_bookinstance1<span class="token punctuation">.</span>pk<span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'renewal_date'</span><span class="token punctuation">:</span>valid_date_in_future<span class="token punctuation">}</span><span class="token punctuation">,</span>follow<span class="token operator">=</span><span class="token boolean">True</span> <span class="token punctuation">)</span>
 self<span class="token punctuation">.</span>assertRedirects<span class="token punctuation">(</span>resp<span class="token punctuation">,</span> <span class="token string">'/catalog/'</span><span class="token punctuation">)</span></code></pre></div>
</div>

<p>Скопируйте две последние функции в класс, представленные ниже. Они тоже проверяют  <code>POST</code>-запросы, но для случая неверных дат. Мы используем функцию <code>assertFormError()</code>, чтобы проверить сообщения об ошибках.</p>

<div class="code-example"><pre class="brush: python notranslate"><code>    <span class="token keyword">def</span> <span class="token function">test_form_invalid_renewal_date_past</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        login <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>login<span class="token punctuation">(</span>username<span class="token operator">=</span><span class="token string">'testuser2'</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">'12345'</span><span class="token punctuation">)</span>
        date_in_past <span class="token operator">=</span> datetime<span class="token punctuation">.</span>date<span class="token punctuation">.</span>today<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>weeks<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
        resp <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>post<span class="token punctuation">(</span>reverse<span class="token punctuation">(</span><span class="token string">'renew-book-librarian'</span><span class="token punctuation">,</span> kwargs<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'pk'</span><span class="token punctuation">:</span>self<span class="token punctuation">.</span>test_bookinstance1<span class="token punctuation">.</span>pk<span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'renewal_date'</span><span class="token punctuation">:</span>date_in_past<span class="token punctuation">}</span> <span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span> resp<span class="token punctuation">.</span>status_code<span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertFormError<span class="token punctuation">(</span>resp<span class="token punctuation">,</span> <span class="token string">'form'</span><span class="token punctuation">,</span> <span class="token string">'renewal_date'</span><span class="token punctuation">,</span> <span class="token string">'Invalid date - renewal in past'</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">test_form_invalid_renewal_date_future</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        login <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>login<span class="token punctuation">(</span>username<span class="token operator">=</span><span class="token string">'testuser2'</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">'12345'</span><span class="token punctuation">)</span>
        invalid_date_in_future <span class="token operator">=</span> datetime<span class="token punctuation">.</span>date<span class="token punctuation">.</span>today<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> datetime<span class="token punctuation">.</span>timedelta<span class="token punctuation">(</span>weeks<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">)</span>
        resp <span class="token operator">=</span> self<span class="token punctuation">.</span>client<span class="token punctuation">.</span>post<span class="token punctuation">(</span>reverse<span class="token punctuation">(</span><span class="token string">'renew-book-librarian'</span><span class="token punctuation">,</span> kwargs<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'pk'</span><span class="token punctuation">:</span>self<span class="token punctuation">.</span>test_bookinstance1<span class="token punctuation">.</span>pk<span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'renewal_date'</span><span class="token punctuation">:</span>invalid_date_in_future<span class="token punctuation">}</span> <span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertEqual<span class="token punctuation">(</span> resp<span class="token punctuation">.</span>status_code<span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>assertFormError<span class="token punctuation">(</span>resp<span class="token punctuation">,</span> <span class="token string">'form'</span><span class="token punctuation">,</span> <span class="token string">'renewal_date'</span><span class="token punctuation">,</span> <span class="token string">'Invalid date - renewal more than 4 weeks ahead'</span><span class="token punctuation">)</span>
</code></pre></div>

<p>Такие же способы тестирования могут применяться для проверок других отображений.</p></div><h3 id="шаблоны"><a href="#шаблоны" title="Permalink to Шаблоны">Шаблоны</a></h3><div><p>Django предоставляет API для тестирования, которое проверяет что функции отображения вызывают правильные шаблоны, а также позволяют убедиться, что им передаётся соответствующая информация. Кроме того, в Django имеется возможность использовать сторонние API для проверок того, что ваш HTML показывает то, что надо.</p></div><h2 id="другие_рекомендованные_инструменты_для_тестирования"><a href="#другие_рекомендованные_инструменты_для_тестирования" title="Permalink to Другие рекомендованные инструменты для тестирования">Другие рекомендованные инструменты для тестирования</a></h2><div><p>Django фреймворк для тестирования помогает вам создавать эффективные юнит- и интеграционные тесты — мы рассмотрели только небольшую часть того, что может делать фреймворк <strong>unittest</strong> и совсем не упоминали дополнения Django (например, посмотрите на модуль <a href="https://docs.python.org/3.5/library/unittest.mock-examples.html" class="external" rel=" noopener">unittest.mock</a>, который подключает сторонние библиотеки тестирования).</p>

<p>Из всего множества сторонних инструментов тестирования, мы кратко опишем возможности двух:</p>

<ul>
 <li><a href="http://coverage.readthedocs.io/en/latest/" class="external" rel=" noopener">Coverage</a>: Это инструмент Python, который формирует отчёты о том, какое количество кода выполняется во время проведения тестов. Это полезно для уточнения степени "покрытия" кода тестами.</li>
 <li><a href="/en-US/docs/Learn/Tools_and_testing/Cross_browser_testing/Your_own_automation_environment">Selenium</a> это фреймворк проведения автоматического тестирования в настоящем браузере. Он позволяет вам имитировать взаимодействие пользователя с вашим сайтом (что является следующим шагом в проведении интеграционных тестов).</li>
</ul></div><h2 id="домашняя_работы"><a href="#домашняя_работы" title="Permalink to Домашняя работы">Домашняя работы</a></h2><div><p>Существуют другие модели и отображения, которые мы могли бы протестировать. В качестве простого упражнения, попробуйте создать тестовый вариант для отображения <code>AuthorCreate</code>.</p>

<div class="code-example"><pre class="brush: python notranslate"><code><span class="token keyword">class</span> <span class="token class-name">AuthorCreate</span><span class="token punctuation">(</span>PermissionRequiredMixin<span class="token punctuation">,</span> CreateView<span class="token punctuation">)</span><span class="token punctuation">:</span>
    model <span class="token operator">=</span> Author
    fields <span class="token operator">=</span> <span class="token string">'__all__'</span>
    initial<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'date_of_death'</span><span class="token punctuation">:</span><span class="token string">'12/10/2016'</span><span class="token punctuation">,</span><span class="token punctuation">}</span>
    permission_required <span class="token operator">=</span> <span class="token string">'catalog.can_mark_returned'</span></code></pre></div>

<p>Помните, - вам надо проверить все, что касается вашего кода, или структуры. Это включает в себя: кто имеет доступ к отображению, начальную дату, применяемый шаблон, а также перенаправление из отображения в случае успеха.</p></div><h2 id="итоги"><a href="#итоги" title="Permalink to Итоги">Итоги</a></h2><div><p>Написание тестов не является ни весельем, ни развлечением и, соответственно, при создании сайтов часто остаётся напоследок (или вообще не используется). Но тем не менее, они являются действенным механизмом, который позволяет вам убедиться, что ваш код в находится безопасности, даже если в него добавляются какие-либо изменения. Кроме того, тесты повышают эффективность поддержки вашего кода.</p>

<p>В данном руководстве мы продемонстрировали вам принципы написания тестов для ваших моделей, форм и отображений. Мы кратко перечислили что именно необходимо тестировать, что обычно сложно выявить в самом начале разработки. Существует много аспектов которые необходимо изучить, но даже с тем что мы уже узнали, вы имеете возможность создавать эффективные юнит-тесты для значительного улучшения процесса разработки.</p>

<p>Следующая и последняя часть руководства покажет вам как запустить ваш чудесный (и полностью протестированный!) веб-сайт Django.</p></div><h2 id="смотрите_также"><a href="#смотрите_также" title="Permalink to Смотрите также">Смотрите также</a></h2><div><ul>
 <li><a href="https://docs.djangoproject.com/en/1.10/topics/testing/overview/" class="external" rel=" noopener">Написание и запуск тестов</a> (Django docs)</li>
 <li><a href="https://docs.djangoproject.com/en/1.10/intro/tutorial05/" class="external" rel=" noopener">Написание вашего первого приложения Django, часть 5 &gt; Введение в автоматическое тестирование</a> (Django docs)</li>
 <li><a href="https://docs.djangoproject.com/en/1.10/topics/testing/tools/" class="external" rel=" noopener">Инструменты для тестирования</a> (Django docs)</li>
 <li><a href="https://docs.djangoproject.com/en/1.10/topics/testing/advanced/" class="external" rel=" noopener">Продвинутое тестирование</a> (Django docs)</li>
 <li><a href="http://toastdriven.com/blog/2011/apr/10/guide-to-testing-in-django/" class="external" rel=" noopener">Путеводитель по тестированию в Django</a> (Toast Driven Blog, 2011)</li>
 <li><a href="http://test-driven-django-development.readthedocs.io/en/latest/index.html" class="external" rel=" noopener">Мастерская: Разработка через тесты с Django (TDD)</a> (San Diego Python, 2014)</li>
 <li><a href="https://realpython.com/blog/python/testing-in-django-part-1-best-practices-and-examples/" class="external" rel=" noopener">Тестирование в Django (Часть 1) - Лучшие практики и Примеры </a>(RealPython, 2013)</li>
</ul>

<p></p><ul class="prev-next">
    <li><a class="button minimal" href="/ru/docs/Learn/Server-side/Django/Forms"> Назад </a></li>
    <li><a class="button minimal" href="/ru/docs/Learn/Server-side/Django"> Обзор: Django</a></li>
    <li><a class="button minimal" href="/ru/docs/Learn/Server-side/Django/Deployment"> Далее  </a></li>
</ul><p></p></div></article><aside class="metadata"><div class="metadata-content-container"><div id="on-github" class="on-github"><h3>Found a problem with this page?</h3><ul><li><a href="https://github.com/mdn/translated-content/edit/main/files/ru/learn/server-side/django/testing/index.html" title="You're going to need to sign in to GitHub first (Opens in a new tab)" target="_blank" rel="noopener noreferrer">Edit on <b>GitHub</b></a></li><li><a href="https://github.com/mdn/translated-content/blob/main/files/ru/learn/server-side/django/testing/index.html" title="Folder: ru/learn/server-side/django/testing (Opens in a new tab)" target="_blank" rel="noopener noreferrer">Source on <b>GitHub</b></a></li><li><a href="https://github.com/mdn/translated-content/issues/new?body=MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fru%2Fdocs%2FLearn%2FServer-side%2FDjango%2FTesting%0A%0A%23%23%23%23+What+information+was+incorrect%2C+unhelpful%2C+or+incomplete%3F%0A%0A%0A%23%23%23%23+Specific+section+or+headline%3F%0A%0A%0A%23%23%23%23+What+did+you+expect+to+see%3F%0A%0A%0A%23%23%23%23+Did+you+test+this%3F+If+so%2C+how%3F%0A%0A%0A%3C%21--+Do+not+make+changes+below+this+line+--%3E%0A%3Cdetails%3E%0A%3Csummary%3EMDN+Content+page+report+details%3C%2Fsummary%3E%0A%0A*+Folder%3A+%60ru%2Flearn%2Fserver-side%2Fdjango%2Ftesting%60%0A*+MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fru%2Fdocs%2FLearn%2FServer-side%2FDjango%2FTesting%0A*+GitHub+URL%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Ftranslated-content%2Fblob%2Fmain%2Ffiles%2Fru%2Flearn%2Fserver-side%2Fdjango%2Ftesting%2Findex.html%0A*+Last+commit%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Ftranslated-content%2Fcommit%2F921c46a374ab0a9f4cc809af0370f8c412e54701%0A*+Document+last+modified%3A+2022-10-01T03%3A41%3A16.000Z%0A%0A%3C%2Fdetails%3E&amp;title=Issue+with+%22%D0%A0%D1%83%D0%BA%D0%BE%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%BE+%D1%87%D0%B0%D1%81%D1%82%D1%8C+10%3A+%D0%A2%D0%B5%D1%81%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5+%D0%BF%D1%80%D0%B8%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D0%B9+Djan%E2%80%A6%22%3A+%28short+summary+here+please%29&amp;labels=needs-triage%2Cl10n-ru" title="This will take you to https://github.com/mdn/content to file a new issue" target="_blank" rel="noopener noreferrer">Report a problem with this content on <b>GitHub</b></a></li><li>Want to fix the problem yourself? See<!-- --> <a href="https://github.com/mdn/content/blob/main/README.md" target="_blank" rel="noopener noreferrer">our Contribution guide</a>.</li></ul></div><p class="last-modified-date"><b>Last modified:</b> <time datetime="2022-10-01T03:41:16.000Z">Oct 1, 2022</time>,<!-- --> <a href="/ru/docs/Learn/Server-side/Django/Testing/contributors.txt">by MDN contributors</a></p><form class="language-menu"><fieldset id="select-language"><legend>Change your language</legend><label for="language-selector" class="visually-hidden">Select your preferred language</label> <select id="language-selector" name="language"><option selected="" value="ru">Русский</option><option value="en-US">English (US)</option><option value="es">Español</option><option value="fr">Français</option><option value="ko">한국어</option><option value="pt-BR">Português (do&nbsp;Brasil)</option><option value="zh-CN">中文 (简体)</option><option value="zh-TW">正體中文 (繁體)</option></select> <button type="submit" class="button minimal">Change language</button></fieldset></form></div></aside></main><nav id="sidebar-quicklinks" class="sidebar"><h4>Related Topics</h4><div>

<ol>
  <li data-default-state=""><a href="/ru/docs/Learn/Getting_started_with_the_web"><strong>Новички начинают здесь!</strong></a></li>
  <li class="toggle">
      <details>
          <summary>Начало работы с Вебом</summary>
          <ol>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web">Начало работы с Вебом</a></li>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web/Installing_basic_software">Установка базового программного обеспечения</a></li>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web/What_will_your_website_look_like">Каким должен быть ваш веб-сайт?</a></li>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web/Dealing_with_files">Работа с файлами</a></li>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web/HTML_basics">Основы HTML</a></li>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web/CSS_basics">Основы CSS</a></li>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web/JavaScript_basics">Основы JavaScript</a></li>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web/Publishing_your_website">Публикация вашего веб-сайта</a></li>
            <li><a href="/ru/docs/Learn/Getting_started_with_the_web/How_the_Web_works">Как работает Веб</a></li>
          </ol>
      </details>
  </li>
  <li data-default-state=""><a href="/ru/docs/Learn/HTML"><strong>HTML — структура Веба</strong></a></li>
  <li class="toggle">
      <details>
          <summary>Вступление в HTML</summary>
          <ol>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML">Вступление в HTML</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/Getting_started">Начало работы с HTML</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/The_head_metadata_in_HTML">Что в "шапке"? Метаданные в HTML</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/HTML_text_fundamentals">Тексты в HTML</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/Creating_hyperlinks">Создание гиперссылок</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/Advanced_text_formatting">Продвинутое форматирование текста</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/Document_and_website_structure">Структура документа и веб-сайта</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/Debugging_HTML">Отладка HTML</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/Marking_up_a_letter">Задание: Выделение символа</a></li>
            <li><a href="/ru/docs/Learn/HTML/Introduction_to_HTML/Structuring_a_page_of_content">Задание: Структура страницы</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>Мультимедиа и встраивание</summary>
          <ol>
            <li><a href="/ru/docs/Learn/HTML/Multimedia_and_embedding">Мультимедиа и встраивание</a></li>
            <li><a href="/ru/docs/Learn/HTML/Multimedia_and_embedding/Images_in_HTML">Изображения в HTML</a></li>
            <li><a href="/ru/docs/Learn/HTML/Multimedia_and_embedding/Video_and_audio_content">Видео и аудио контент</a></li>
            <li><a href="/ru/docs/Learn/HTML/Multimedia_and_embedding/Other_embedding_technologies">От object до iframe — другие технологии встраивания</a></li>
            <li><a href="/ru/docs/Learn/HTML/Multimedia_and_embedding/Adding_vector_graphics_to_the_Web">Добавление векторный графики в Веб</a></li>
            <li><a href="/ru/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images">Отзывчивые изображения</a></li>
            <li><a href="/ru/docs/Learn/HTML/Multimedia_and_embedding/Mozilla_splash_page">Задание: Страница о Mozilla</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>HTML tables</summary>
          <ol>
            <li><a href="/ru/docs/Learn/HTML/Tables">HTML tables overview</a></li>
            <li><a href="/ru/docs/Learn/HTML/Tables/Basics">HTML table basics</a></li>
            <li><a href="/ru/docs/Learn/HTML/Tables/Advanced">HTML Table advanced features and accessibility</a></li>
            <li><a href="/ru/docs/Learn/HTML/Tables/Structuring_planet_data">Assessment: Structuring planet data</a></li>
          </ol>
      </details>
  </li>
  <li data-default-state=""><a href="/ru/docs/Learn/CSS"><strong>CSS — стилизирование Веба</strong></a></li>
  <li class="toggle">
      <details>
          <summary>CSS first steps</summary>
          <ol>
            <li><a href="/ru/docs/Learn/CSS/First_steps">CSS first steps overview</a></li>
            <li><a href="/ru/docs/Learn/CSS/First_steps/What_is_CSS">What is CSS?</a></li>
            <li><a href="/ru/docs/Learn/CSS/First_steps/Getting_started">Getting started with CSS</a></li>
            <li><a href="/ru/docs/Learn/CSS/First_steps/How_CSS_is_structured">How CSS is structured</a></li>
            <li><a href="/ru/docs/Learn/CSS/First_steps/How_CSS_works">How CSS works</a></li>
            <li><a href="/ru/docs/Learn/CSS/First_steps/Using_your_new_knowledge">Using your new knowledge</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>CSS building blocks</summary>
          <ol>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks">CSS building blocks overview</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Cascade_and_inheritance">Cascade and inheritance</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Selectors">CSS selectors</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/The_box_model">The box model</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Backgrounds_and_borders">Backgrounds and borders</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Handling_different_text_directions">Handling different text directions</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Overflowing_content">Overflowing content</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Values_and_units">Values and units</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Sizing_items_in_CSS">Sizing items in CSS</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Images_media_form_elements">Images, media, and form elements</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Styling_tables">Styling tables</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Debugging_CSS">Debugging CSS</a></li>
            <li><a href="/ru/docs/Learn/CSS/Building_blocks/Organizing">Organizing your CSS</a></li>
      </ol></details>
  </li>
  <li class="toggle">
      <details>
          <summary>Стилизирование текста</summary>
          <ol>
            <li><a href="/ru/docs/Learn/CSS/Styling_text">Стилизирование текста</a></li>
            <li><a href="/ru/docs/Learn/CSS/Styling_text/Fundamentals">Основы стилизирования текста и шрифта</a></li>
            <li><a href="/ru/docs/Learn/CSS/Styling_text/Styling_lists">Стилизирование списков</a></li>
            <li><a href="/ru/docs/Learn/CSS/Styling_text/Styling_links">Стилизирование ссылок</a></li>
            <li><a href="/ru/docs/Learn/CSS/Styling_text/Web_fonts">Веб-шрифты</a></li>
            <li><a href="/ru/docs/Learn/CSS/Styling_text/Typesetting_a_homepage">Задание: Стилизирование школьного сайта</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>CSS макет</summary>
          <ol>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout">CSS макет</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Introduction">Introduction to CSS layout</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Normal_Flow">Normal Flow</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Flexbox">Flexbox</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Grids">Сетки</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Floats">Float</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Positioning">Позиционирование</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Multiple-column_Layout">Multiple-column Layout</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Responsive_Design">Responsive design</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Media_queries">Beginner's guide to media queries</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Legacy_Layout_Methods">Legacy Layout Methods</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Supporting_Older_Browsers">Supporting Older Browsers</a></li>
            <li><a href="/ru/docs/Learn/CSS/CSS_layout/Fundamental_Layout_Comprehension">Fundamental Layout Comprehension</a></li>
          </ol>
      </details>
  </li>
  <li data-default-state=""><a href="/ru/docs/Learn/JavaScript"><strong>JavaScript — динамический клиентский скриптинг</strong></a></li>
  <li class="toggle">
      <details>
          <summary>Первые шаги в JavaScript</summary>
          <ol>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps">Первые шаги в JavaScript</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/What_is_JavaScript">Что такое JavaScript?</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/A_first_splash">Первое погружение в JavaScript</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/What_went_wrong">Что-то пошло не так? Устранение ошибок JavaScript</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/Variables">Хранение нужной информации — Переменные</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/Math">Основы JavaScript — Числа и операторы</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/Strings">Работа с текстом — Строки в JavaScript</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/Useful_string_methods">Полезные методы для строк</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/Arrays">Массивы</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/First_steps/Silly_story_generator">Задание: Генератор глупых историй</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>Блоки в JavaScript</summary>
          <ol>
            <li><a href="/ru/docs/Learn/JavaScript/Building_blocks">Блоки в JavaScript</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Building_blocks/conditionals">Делаем решения в вашем годе — Условия</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Building_blocks/Looping_code">Повторение кода</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Building_blocks/Functions">Функции — Переиспользуемые блоки кода</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Building_blocks/Build_your_own_function">Создаём свою функцию</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Building_blocks/Return_values">Возвращаемые значения функций</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Building_blocks/Events">Введение в события</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Building_blocks/Image_gallery">Задание: Галерея изображений</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
      <details>
          <summary>Введение в объекты JavaScript</summary>
          <ol>
            <li><a href="/ru/docs/Learn/JavaScript/Objects">Введение в объекты JavaScript</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Objects/Basics">Основы объектов</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Objects/Object_prototypes">Прототипы объектов</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Objects/Object-oriented_programming">Object-oriented programming concepts</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Objects/Classes_in_JavaScript">Classes in JavaScript</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Objects/JSON">Работа с JSON данными</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Objects/Object_building_practice">Практика по созданию объектов</a></li>
            <li><a href="/ru/docs/Learn/JavaScript/Objects/Adding_bouncing_balls_features">Задание: Добавление возможностей в пример с прыгающими шарами</a></li>
          </ol>
      </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Asynchronous JavaScript</summary>
        <ol>
          <li><a href="/ru/docs/Learn/JavaScript/Asynchronous">Asynchronous JavaScript overview</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Asynchronous/Concepts">General asynchronous programming concepts</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Asynchronous/Introducing">Introducing asynchronous JavaScript</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Asynchronous/Timeouts_and_intervals">Cooperative asynchronous Java​Script: Timeouts and intervals</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Asynchronous/Promises">Graceful asynchronous programming with Promises</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Asynchronous/Async_await">Making asynchronous programming easier with async and await</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Asynchronous/Choosing_the_right_approach">Choosing the right approach</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Client-side web APIs</summary>
        <ol>
          <li><a href="/ru/docs/Learn/JavaScript/Client-side_web_APIs">Client-side web APIs</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Client-side_web_APIs/Introduction">Introduction to web APIs</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Client-side_web_APIs/Manipulating_documents">Manipulating documents</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Client-side_web_APIs/Fetching_data">Fetching data from the server</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Client-side_web_APIs/Third_party_APIs">Third party APIs</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Client-side_web_APIs/Drawing_graphics">Drawing graphics</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Client-side_web_APIs/Video_and_audio_APIs">Video and audio APIs</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Client-side_web_APIs/Client-side_storage">Client-side storage</a></li>
        </ol>
    </details>
  </li>
  <li><a href="/ru/docs/Learn/Forms"><strong>Web forms — Working with user data</strong></a></li>
  <li class="toggle">
    <details>
        <summary>Core forms learning pathway</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Forms">Web forms overview</a></li>
          <li><a href="/ru/docs/Learn/Forms/Your_first_form">Your first form</a></li>
          <li><a href="/ru/docs/Learn/Forms/How_to_structure_a_web_form">How to structure a web form</a></li>
          <li><a href="/ru/docs/Learn/Forms/Basic_native_form_controls">Basic native form controls</a></li>
          <li><a href="/ru/docs/Learn/Forms/HTML5_input_types">The HTML5 input types</a></li>
          <li><a href="/ru/docs/Learn/Forms/Other_form_controls">Other form controls</a></li>
          <li><a href="/ru/docs/Learn/Forms/Styling_web_forms">Styling web forms</a></li>
          <li><a href="/ru/docs/Learn/Forms/Advanced_form_styling">Advanced form styling</a></li>
          <li><a href="/ru/docs/Learn/Forms/UI_pseudo-classes">UI pseudo-classes</a></li>
          <li><a href="/ru/docs/Learn/Forms/Form_validation">Client-side form validation</a></li>
          <li><a href="/ru/docs/Learn/Forms/Sending_and_retrieving_form_data">Sending form data</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Advanced forms articles</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Forms/How_to_build_custom_form_controls">How to build custom form controls</a></li>
          <li><a href="/ru/docs/Learn/Forms/Sending_forms_through_JavaScript">Sending forms through JavaScript</a></li>
          <li><a href="/ru/docs/Learn/Forms/Property_compatibility_table_for_form_controls">CSS property compatibility table for form controls</a></li>
        </ol>
    </details>
  </li>
  <li><a href="/ru/docs/Learn/Accessibility"><strong>Accessibility — Make the web usable by everyone</strong></a></li>
  <li class="toggle">
    <details>
        <summary>Accessibility guides</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Accessibility">Accessibility overview</a></li>
          <li><a href="/ru/docs/Learn/Accessibility/What_is_accessibility">What is accessibility?</a></li>
          <li><a href="/ru/docs/Learn/Accessibility/HTML">HTML: A good basis for accessibility</a></li>
          <li><a href="/ru/docs/Learn/Accessibility/CSS_and_JavaScript">CSS and JavaScript accessibility best practices</a></li>
          <li><a href="/ru/docs/Learn/Accessibility/WAI-ARIA_basics">WAI-ARIA basics</a></li>
          <li><a href="/ru/docs/Learn/Accessibility/Multimedia">Accessible multimedia</a></li>
          <li><a href="/ru/docs/Learn/Accessibility/Mobile">Mobile accessibility</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Accessibility assessment</summary>
        <ol>
            <li><a href="/ru/docs/Learn/Accessibility/Accessibility_troubleshooting">Assessment: Accessibility troubleshooting</a></li>
        </ol>
    </details>
  </li>
  <li><a href="/ru/docs/Learn/Tools_and_testing"><strong>Инструменты и тестирование</strong></a></li>
  <li class="toggle">
    <details>
        <summary>Client-side web development tools</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Understanding_client-side_tools">Client-side web development tools index</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Overview">Client-side tooling overview</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Command_line">Command line crash course</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Package_management">Package management basics</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Introducing_complete_toolchain">Introducing a complete toolchain</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Deployment">Deploying our app</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Introduction to client-side frameworks</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Introduction">Client-side frameworks overview</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Main_features">Framework main features</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>React</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_getting_started">Getting started with React</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_todo_list_beginning">Beginning our React todo list</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_components">Componentizing our React app</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_interactivity_events_state">React interactivity: Events and state</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_interactivity_filtering_conditional_rendering">React interactivity: Editing, filtering, conditional rendering</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_accessibility">Accessibility in React</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_resources">React resources</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Ember</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_getting_started">Getting started with Ember</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_structure_componentization">Ember app structure and componentization</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_interactivity_events_state">Ember interactivity: Events, classes and state</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_conditional_footer">Ember Interactivity: Footer functionality, conditional rendering</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_routing">Routing in Ember</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_resources">Ember resources and troubleshooting</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Vue</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_getting_started">Getting started with Vue</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_first_component">Creating our first Vue component</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_rendering_lists">Rendering a list of Vue components</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_methods_events_models">Adding a new todo form: Vue events, methods, and models</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_styling">Styling Vue components with CSS</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_computed_properties">Using Vue computed properties</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_conditional_rendering  ">Vue conditional rendering: editing existing todos</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_refs_focus_management">Focus management with Vue refs</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_resources">Vue resources</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Svelte</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Svelte_getting_started">Getting started with Svelte</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Svelte_Todo_list_beginning">Starting our Svelte Todo list app</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Svelte_variables_props">Dynamic behavior in Svelte: working with variables and props</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Svelte_components">Componentizing our Svelte app</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Svelte_reactivity_lifecycle_accessibility">Advanced Svelte: Reactivity, lifecycle, accessibility</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Svelte_stores">Working with Svelte stores</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Svelte_TypeScript  ">TypeScript support in Svelte</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Svelte_deployment_next">Deployment and next steps</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Angular</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Angular_getting_started">Getting started with Angular</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Angular_todo_list_beginning">Beginning our Angular todo list app</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Angular_styling">Styling our Angular app</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Angular_item_component">Creating an item component</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Angular_filtering">Filtering our to-do items</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Angular_building">Building Angular applications and further resources</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Git and GitHub</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Tools_and_testing/GitHub">Git and GitHub overview</a></li>
          <li><a href="https://guides.github.com/activities/hello-world/">Hello World</a></li>
          <li><a href="https://guides.github.com/introduction/git-handbook/">Git Handbook</a></li>
          <li><a href="https://guides.github.com/activities/forking/">Forking Projects</a></li>
          <li><a href="https://help.github.com/en/github/collaborating-with-issues-and-pull-requests/about-pull-requests">About pull requests</a></li>
          <li><a href="https://guides.github.com/features/issues/">Mastering Issues</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Кроссбраузерное тестирование</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing">Кроссбраузерное тестирование</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/Introduction">Вступление в кроссбраузерное тестирование</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/Testing_strategies">Стратегии выполнения тестирования</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/HTML_and_CSS">Решение частых проблем с HTML и CSS</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/JavaScript">Решение частых проблем с JavaScript</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/Accessibility">Решение частых проблем доступности</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/Feature_detection">Проверка поддержки возможностей</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/Automated_testing">Вступление в автоматическое тестирование</a></li>
          <li><a href="/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/Your_own_automation_environment">Установка вашей автоматической среды тестирования</a></li>
        </ol>
    </details>
  </li>
  <li data-default-state="open"><a href="/ru/docs/Learn/Server-side"><strong>Программирование серверной части сайта</strong></a></li>
  <li class="toggle">
    <details>
        <summary>Первые шаги</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Server-side/First_steps">Первые шаги</a></li>
          <li><a href="/ru/docs/Learn/Server-side/First_steps/Introduction">Вступление в серверное программирование</a></li>
          <li><a href="/ru/docs/Learn/Server-side/First_steps/Client-Server_overview">Клиент-сервер</a></li>
          <li><a href="/ru/docs/Learn/Server-side/First_steps/Web_frameworks">Веб-фреймворки для серверной части</a></li>
          <li><a href="/ru/docs/Learn/Server-side/First_steps/Website_security">Защищённость веб-сайтов</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details open="">
        <summary>Веб-фреймворк Django (Python)</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Server-side/Django">Веб-фреймворк Django (Python)</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Introduction">Вступление</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/development_environment">Установка среды разработки</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Tutorial_local_library_website">Руководство: Сайт местной библиотеки</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/skeleton_website">Руководство часть 2: Создаём набросок сайта</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Models">Руководство часть 3: Использование моделей</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Admin_site">Руководство часть 4: Django панель администратора</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Home_page">Руководство часть 5: Создание нашей домашней страницы</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Generic_views">Руководство часть 6: Списки и представления</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Sessions">Руководство часть 7: Сессии</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Authentication">Руководство часть 8: Аутенфикация и разрешения пользователей</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Forms">Руководство часть 9: Работа с формами</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Testing">Руководство часть 10: Тестирование веб-приложения на Django</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/Deployment">Руководство часть 11: Разворачивание Django на продакшн сервере</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/web_application_security">Защищённость веб-приложения</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Django/django_assessment_blog">Задание: создание мини блога</a></li>
        </ol>
    </details>
  </li>
  <li class="toggle">
    <details>
        <summary>Express Web Framework (node.js/JavaScript)</summary>
        <ol>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs">Express Web Framework (Node.js/JavaScript) overview</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/Introduction">Express/Node introduction</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/development_environment">Setting up a Node (Express) development environment</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/Tutorial_local_library_website">Express tutorial: The Local Library website</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/skeleton_website">Express Tutorial Part 2: Creating a skeleton website</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/mongoose">Express Tutorial Part 3: Using a database (with Mongoose)</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/routes">Express Tutorial Part 4: Routes and controllers</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/Displaying_data">Express Tutorial Part 5: Displaying library data</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/forms">Express Tutorial Part 6: Working with forms</a></li>
          <li><a href="/ru/docs/Learn/Server-side/Express_Nodejs/deployment">Express Tutorial Part 7: Deploying to production</a></li>
        </ol>
    </details>
  </li>
  <li><a href="#"><strong>Дальнейшее чтение</strong></a></li>
  <li class="toggle">
    <details>
        <summary>Общие вопросы</summary>
        <ol>
          <li><a href="/ru/docs/Learn/HTML/Howto">Вопросы по HTML</a></li>
          <li><a href="/ru/docs/Learn/CSS/Howto">Вопросы по CSS</a></li>
          <li><a href="/ru/docs/Learn/JavaScript/Howto">JavaScript questions</a></li>
          <li><a href="/ru/docs/Learn/Common_questions#Web_mechanics">Как работает Веб</a></li>
          <li><a href="/ru/docs/Learn/Common_questions#Tools_and_setup">Инструменты и установка</a></li>
          <li><a href="/ru/docs/Learn/Common_questions#Design_and_accessibility">Дизайн и доступность</a></li>
        </ol>
    </details>
  </li>
</ol>

</div></nav></div><footer id="nav-footer" class="page-footer"><div class="content-container"><div class="page-footer-logo"><a href="/ru/" class="logo" aria-label="MDN Web Docs"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 451.74 135" fill="#fff"><path d="M7.14 8.35v111.06h111.05V8.35zm103.71 56c-.48.92-1 1.79-1.46 2.71a3.44 3.44 0 01-3.54 2 2.4 2.4 0 00-1.55.5c-1.37.9-2.76 1.79-4.18 2.63a7.33 7.33 0 01-6.35.34 29.71 29.71 0 00-10.63-2 11.7 11.7 0 00-9.46 4.31 14.84 14.84 0 00-2.13 4.29c-1.24 3.07-2.3 21.38-2.3 26.05 0 0-17.62-3.42-34.15-20.34l4.31-11.32h-13.5l9.76-10.35h-16.8l9.77-10.34H12.69L30.45 34a40.9 40.9 0 0119.77-10.83c7.1-1.22 8.93-.53 13.31.77l2.43.73.85.25 3.1.95a12.56 12.56 0 006.21.09 11.37 11.37 0 018.25 1 8.24 8.24 0 014.1 6.22 7.29 7.29 0 003.61 5.49 59.45 59.45 0 009.32 4.11c2.27.86 4.54 1.84 6.79 2.72a6.81 6.81 0 012.86 2.06 4.81 4.81 0 011.1 2.73c.14 2 .37 4 .47 6a15.24 15.24 0 01-1.77 8.03zM320.12 39.62a5.42 5.42 0 00-4.53 2.13 7.36 7.36 0 00-1.7 4.43v2.36a6.28 6.28 0 001.7 4.46 5.63 5.63 0 004.3 1.82 5.12 5.12 0 004.57-2.27A9.7 9.7 0 00326 47a8.11 8.11 0 00-1.67-5.52 5.36 5.36 0 00-4.21-1.86zM387.38 39.53a5.52 5.52 0 00-4.7 2.15 8.8 8.8 0 00-1.63 5.49 9.23 9.23 0 001.58 5.45 5.38 5.38 0 004.7 2.25 5.61 5.61 0 004.74-2.2 8.91 8.91 0 001.68-5.59 8.24 8.24 0 00-1.75-5.52 5.76 5.76 0 00-4.62-2.03zM299.47 41.35a4.34 4.34 0 00-4-1.92 4.55 4.55 0 00-3.89 1.73 8.37 8.37 0 00-1.58 4.17h10.48a6.3 6.3 0 00-1.01-3.98zM357.74 30.75H352v23.31h5.72q5.47 0 8.35-3t2.93-8.65q0-5.43-2.88-8.55t-8.38-3.11z"></path><path d="M121.55 8.35v70.8h323V8.35zm42.21 22.45h-4V54h3.68v3.73h-11.25V54h3.31V36.79h-.19l-9.63 19.12h-2.12l-10-19.4h-.19V54h3.45v3.73h-11.15V54h3.68V30.8h-4v-3.73H133l11.66 22.56h.19l11.18-22.56h7.7zm29.12 22.67q-4.11 4.28-11.38 4.28h-14.06v-3.69h3.73V30.75h-3.73v-3.68h13.83q7.59 0 11.66 4.29a15.4 15.4 0 014 11 15.33 15.33 0 01-4.05 11.11zm38.89-22.67h-3.68v27h-2.6L208.08 35h-.19v19h4.67v3.73h-12.22V54h3.49V30.8h-4v-3.73h7.08l16.9 22.09h.19V30.8h-4.58v-3.73h12.32zm43.8 27h-3.31l-7.83-23.18h-.19l-7.55 23.18h-3.35l-8.78-27h-2.65v-3.73H253v3.73h-3.87L255 50.71h.23l6.61-19.91H259v-3.73h11v3.73h-2.78l6.61 20.1h.23l5.43-20.1h-4.15v-3.73h11v3.73h-2.54zm26.71-1.51a9.66 9.66 0 01-6.42 2 10.2 10.2 0 01-7.41-2.74c-1.89-1.82-2.83-4.47-2.83-7.93a12.37 12.37 0 012.64-8.12 9 9 0 017.32-3.21 8.62 8.62 0 016.75 2.69 9.65 9.65 0 012.45 6.52 13.67 13.67 0 01-.28 2.69H290q.29 6.71 6.18 6.7a5.2 5.2 0 003.71-1.18 5.82 5.82 0 001.67-2.83l3.45.71a7.21 7.21 0 01-2.73 4.65zm25.77-1.63c-1.51 2.4-3.92 3.61-7.22 3.61s-5.84-1.29-7.22-3.87c0 .25-.1.82-.21 1.7s-.19 1.44-.22 1.7H309c.16-1 .31-2 .47-3.07a21.42 21.42 0 00.24-3.16v-23h-3.4v-3.3h7.55V40.9a9.76 9.76 0 012.67-3.28 7.33 7.33 0 014.74-1.4 8.48 8.48 0 016.5 2.78q2.55 2.74 2.55 7.74a14.6 14.6 0 01-2.27 7.87zm41.39-1.14q-4.11 4.28-11.37 4.28H344v-3.74h3.73V30.75H344v-3.68h13.83q7.59 0 11.66 4.29a15.41 15.41 0 014.06 11 15.34 15.34 0 01-4.11 11.11zm25.65 1.68a10.53 10.53 0 01-7.9 3.07 10 10 0 01-7.63-3 10.93 10.93 0 01-2.8-7.83 12.13 12.13 0 012.69-7.93q2.69-3.3 8-3.3t8 3.28a12 12 0 012.64 7.76 10.86 10.86 0 01-3 7.9zm22.61.57c-1.4 1.66-3.63 2.5-6.68 2.5a9.58 9.58 0 01-7.15-2.76q-2.72-2.76-2.71-7.91a12.25 12.25 0 012.69-8 9.17 9.17 0 017.5-3.28 15 15 0 013.82.48 10.37 10.37 0 013.5 1.65l.85 5.47-3.35.38-.76-3.54a8.07 8.07 0 00-4.11-1 4.9 4.9 0 00-4.39 2.15 9.93 9.93 0 00-1.41 5.55 8.9 8.9 0 001.5 5.38 5.23 5.23 0 004.44 2c2.92 0 4.67-1.7 5.23-5.1l3.5.71a10.34 10.34 0 01-2.47 5.27zm20.48.75a11.68 11.68 0 01-6.63 1.75 15.52 15.52 0 01-8.26-2.08L424 51l3.26.33-.1 2.74a7 7 0 002.06.66 12.63 12.63 0 002.19.19 8.68 8.68 0 003.66-.75 2.5 2.5 0 001.63-2.36 2.25 2.25 0 00-1.32-2.2 12.65 12.65 0 00-3.28-1 47.39 47.39 0 01-3.9-.82 7.5 7.5 0 01-3.25-1.7 4.67 4.67 0 01-1.33-3.66c0-2.36.88-4 2.62-4.91a12 12 0 015.6-1.37 15 15 0 014.08.55 16.65 16.65 0 013.47 1.39l.47 5.1-3.3.37-.48-3.3a9.5 9.5 0 00-4.06-.9 5.62 5.62 0 00-2.87.66 2.33 2.33 0 00-1.15 2.25 2.13 2.13 0 001.3 2.07 11.91 11.91 0 003.21.92 36.69 36.69 0 013.82.83 7.46 7.46 0 013.21 1.74 4.9 4.9 0 011.3 3.73 5.56 5.56 0 01-2.66 4.91z"></path><path d="M181.17 30.75h-5.71v23.31h5.71q5.47 0 8.36-3t2.88-8.61q0-5.43-2.88-8.55t-8.36-3.15zM121.63 119.32V81.74h114.91v37.58zM153.22 109h-2v-6.85a4.8 4.8 0 00-1.58-4 5.57 5.57 0 00-3.55-1.26 5 5 0 00-4.92 3.26 4.19 4.19 0 00-1.88-2.46 5.82 5.82 0 00-3-.8 4.89 4.89 0 00-4.56 2.56v-2.21h-6.28v3.26h2v8.5h-2v3.23h9.11V109h-2.86v-5.25a4.4 4.4 0 01.69-2.56 2.47 2.47 0 012.21-1q2.57 0 2.56 3.63v8.41h6.29V109h-2v-5.25a4.47 4.47 0 01.67-2.56 2.42 2.42 0 012.19-1q2.63 0 2.63 3.63v8.41h6.28zm9.88-12.07q-4 0-6 2.36a8.41 8.41 0 00-2 5.66 7.25 7.25 0 002.17 5.62 8 8 0 005.65 2 8.54 8.54 0 005.94-2.11 7.27 7.27 0 002.34-5.67 8.21 8.21 0 00-2-5.51q-2.07-2.34-6.1-2.34zm-.1 12.35a3 3 0 01-2.63-1.33 5.68 5.68 0 01-.9-3.26 5 5 0 011-3.28 3.23 3.23 0 012.61-1.18 3.5 3.5 0 012.59 1.08 4.56 4.56 0 011.07 3.31 5.21 5.21 0 01-1 3.41 3.33 3.33 0 01-2.74 1.25zm25-2.3l-3.39-.29-.7 2.32H179l8.32-9.54-.32-2.23h-13.19l-.53 5.25 3.16.34.67-2.36h4.65l-8.25 9.53.44 2.26h13.13zm7.62-9.74h-4.46v5.39h4.46zm0 9.61h-4.46v5.39h4.46zm13.54-17.49h-4.23l-6.48 22.88h4.22zm8.68 0h-4.23l-6.45 22.88h4.19zm15 22.51l-.07-2.26a1.22 1.22 0 01-.56.1c-.69 0-1-.39-1-1.16v-6.49a4.39 4.39 0 00-1.8-3.84 7 7 0 00-4.16-1.28 14.55 14.55 0 00-3.16.3 24.14 24.14 0 00-3.29 1.06l-.56 3.46 3.39.4.5-1.69a2.78 2.78 0 011.08-.37 11.3 11.3 0 011.25-.07c1.19 0 1.89.37 2.09 1.1a8.55 8.55 0 01.3 2.26v.5a8.91 8.91 0 00-1.18-.11h-1.21a12.64 12.64 0 00-4.81.88 3.53 3.53 0 00-2.18 3.64 3.66 3.66 0 001.48 3.33 5.63 5.63 0 003.11 1 4.67 4.67 0 003-.91 6.78 6.78 0 001.8-2 3 3 0 003.33 3 5.54 5.54 0 002.66-.85zm-9.25-2.32a1.69 1.69 0 01-1.36-.52 1.81 1.81 0 01-.43-1.21 1.67 1.67 0 01.86-1.68 4.63 4.63 0 012-.42 7.69 7.69 0 011.07.07l1.06.13a3.58 3.58 0 01-1.08 2.74 3.24 3.24 0 01-2.11.89z"></path></svg></a></div><ul class="link-list-mdn"><li><a href="/ru/docs/Web">Web Technologies</a></li><li><a href="/ru/docs/Learn">Learn Web Development</a></li><li><a href="/ru/docs/MDN/About">About MDN</a></li><li><a href="/ru/docs/MDN/Feedback">Feedback</a></li></ul><ul class="link-list-moz"><li><a href="https://www.mozilla.org/about/" target="_blank" rel="noopener noreferrer">About</a></li><li><a href="https://shop.spreadshirt.com/mdn-store/" target="_blank" rel="noopener noreferrer">MDN Web Docs Store</a></li><li><a href="https://www.mozilla.org/contact/" target="_blank" rel="noopener noreferrer">Contact Us</a></li><li><a href="https://www.mozilla.org/firefox/?utm_source=developer.mozilla.org&amp;utm_campaign=footer&amp;utm_medium=referral" target="_blank" rel="noopener noreferrer">Firefox</a></li></ul><div class="social social-mdn"><h4>MDN</h4><ul><li><a class="social-icon twitter" href="https://twitter.com/mozdevnet" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">MDN on Twitter</span></a></li><li><a class="social-icon github" href="https://github.com/mdn/" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">MDN on Github</span></a></li></ul></div><div class="social social-moz"><h4>Mozilla</h4><ul><li><a class="social-icon twitter" href="https://twitter.com/mozilla" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">Mozilla on Twitter</span></a></li><li><a class="social-icon instagram" href="https://www.instagram.com/mozillagram/" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">Mozilla on Instagram</span></a></li></ul></div><p id="license" class="footer-license">© 2005-<!-- -->2022<!-- --> Mozilla and individual contributors. Content is available under<!-- --> <a href="/docs/MDN/About#Copyrights_and_licenses">these licenses</a>.</p><ul class="footer-legal"><li><a href="https://www.mozilla.org/about/legal/terms/mozilla" target="_blank" rel="noopener noreferrer">Terms</a></li><li><a href="https://www.mozilla.org/privacy/websites/" target="_blank" rel="noopener noreferrer">Privacy</a></li><li><a href="https://www.mozilla.org/privacy/websites/#cookies" target="_blank" rel="noopener noreferrer">Cookies</a></li></ul></div></footer><div class="page-overlay hidden"></div></div><script type="application/json" id="hydration">{"doc":{"isMarkdown":false,"isTranslated":true,"isActive":true,"flaws":{},"title":"Руководство часть 10: Тестирование приложений Django","mdn_url":"/ru/docs/Learn/Server-side/Django/Testing","locale":"ru","native":"Русский","sidebarHTML":"\n\n<ol>\n  <li data-default-state=\"\"><a href=\"/ru/docs/Learn/Getting_started_with_the_web\"><strong>Новички начинают здесь!</strong></a></li>\n  <li class=\"toggle\">\n      <details>\n          <summary>Начало работы с Вебом</summary>\n          <ol>\n            <li><a href=\"/ru/docs/Learn/Getting_started_with_the_web\">Начало работы с Вебом</a></li>\n            <li><a href=\"/ru/docs/Learn/Getting_started_with_the_web/Installing_basic_software\">Установка базового программного обеспечения</a></li>\n            <li><a href=\"/ru/docs/Learn/Getting_started_with_the_web/What_will_your_website_look_like\">Каким должен быть ваш веб-сайт?</a></li>\n            <li><a href=\"/ru/docs/Learn/Getting_started_with_the_web/Dealing_with_files\">Работа с файлами</a></li>\n            <li><a href=\"/ru/docs/Learn/Getting_started_with_the_web/HTML_basics\">Основы HTML</a></li>\n            <li><a href=\"/ru/docs/Learn/Getting_started_with_the_web/CSS_basics\">Основы CSS</a></li>\n            <li><a href=\"/ru/docs/Learn/Getting_started_with_the_web/JavaScript_basics\">Основы JavaScript</a></li>\n            <li><a href=\"/ru/docs/Learn/Getting_started_with_the_web/Publishing_your_website\">Публикация вашего веб-сайта</a></li>\n            <li><a href=\"/ru/docs/Learn/Getting_started_with_the_web/How_the_Web_works\">Как работает Веб</a></li>\n          </ol>\n      </details>\n  </li>\n  <li data-default-state=\"\"><a href=\"/ru/docs/Learn/HTML\"><strong>HTML — структура Веба</strong></a></li>\n  <li class=\"toggle\">\n      <details>\n          <summary>Вступление в HTML</summary>\n          <ol>\n            <li><a href=\"/ru/docs/Learn/HTML/Introduction_to_HTML\">Вступление в HTML</a></li>\n            <li><a href=\"/ru/docs/Learn/HTML/Introduction_to_HTML/Getting_started\">Начало работы с HTML</a></li>\n            <li><a href=\"/ru/docs/Learn/HTML/Introduction_to_HTML/The_head_metadata_in_HTML\">Что в \"шапке\"? Метаданные в HTML</a></li>\n            <li><a href=\"/ru/docs/Learn/HTML/Introduction_to_HTML/HTML_text_fundamentals\">Тексты в HTML</a></li>\n            <li><a href=\"/ru/docs/Learn/HTML/Introduction_to_HTML/Creating_hyperlinks\">Создание гиперссылок</a></li>\n            <li><a href=\"/ru/docs/Learn/HTML/Introduction_to_HTML/Advanced_text_formatting\">Продвинутое форматирование текста</a></li>\n            <li><a href=\"/ru/docs/Learn/HTML/Introduction_to_HTML/Document_and_website_structure\">Структура документа и веб-сайта</a></li>\n            <li><a href=\"/ru/docs/Learn/HTML/Introduction_to_HTML/Debugging_HTML\">Отладка HTML</a></li>\n            <li><a href=\"/ru/docs/Learn/HTML/Introduction_to_HTML/Marking_up_a_letter\">Задание: Выделение символа</a></li>\n            <li><a href=\"/ru/docs/Learn/HTML/Introduction_to_HTML/Structuring_a_page_of_content\">Задание: Структура страницы</a></li>\n          </ol>\n      </details>\n  </li>\n  <li class=\"toggle\">\n      <details>\n          <summary>Мультимедиа и встраивание</summary>\n          <ol>\n            <li><a href=\"/ru/docs/Learn/HTML/Multimedia_and_embedding\">Мультимедиа и встраивание</a></li>\n            <li><a href=\"/ru/docs/Learn/HTML/Multimedia_and_embedding/Images_in_HTML\">Изображения в HTML</a></li>\n            <li><a href=\"/ru/docs/Learn/HTML/Multimedia_and_embedding/Video_and_audio_content\">Видео и аудио контент</a></li>\n            <li><a href=\"/ru/docs/Learn/HTML/Multimedia_and_embedding/Other_embedding_technologies\">От object до iframe — другие технологии встраивания</a></li>\n            <li><a href=\"/ru/docs/Learn/HTML/Multimedia_and_embedding/Adding_vector_graphics_to_the_Web\">Добавление векторный графики в Веб</a></li>\n            <li><a href=\"/ru/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images\">Отзывчивые изображения</a></li>\n            <li><a href=\"/ru/docs/Learn/HTML/Multimedia_and_embedding/Mozilla_splash_page\">Задание: Страница о Mozilla</a></li>\n          </ol>\n      </details>\n  </li>\n  <li class=\"toggle\">\n      <details>\n          <summary>HTML tables</summary>\n          <ol>\n            <li><a href=\"/ru/docs/Learn/HTML/Tables\">HTML tables overview</a></li>\n            <li><a href=\"/ru/docs/Learn/HTML/Tables/Basics\">HTML table basics</a></li>\n            <li><a href=\"/ru/docs/Learn/HTML/Tables/Advanced\">HTML Table advanced features and accessibility</a></li>\n            <li><a href=\"/ru/docs/Learn/HTML/Tables/Structuring_planet_data\">Assessment: Structuring planet data</a></li>\n          </ol>\n      </details>\n  </li>\n  <li data-default-state=\"\"><a href=\"/ru/docs/Learn/CSS\"><strong>CSS — стилизирование Веба</strong></a></li>\n  <li class=\"toggle\">\n      <details>\n          <summary>CSS first steps</summary>\n          <ol>\n            <li><a href=\"/ru/docs/Learn/CSS/First_steps\">CSS first steps overview</a></li>\n            <li><a href=\"/ru/docs/Learn/CSS/First_steps/What_is_CSS\">What is CSS?</a></li>\n            <li><a href=\"/ru/docs/Learn/CSS/First_steps/Getting_started\">Getting started with CSS</a></li>\n            <li><a href=\"/ru/docs/Learn/CSS/First_steps/How_CSS_is_structured\">How CSS is structured</a></li>\n            <li><a href=\"/ru/docs/Learn/CSS/First_steps/How_CSS_works\">How CSS works</a></li>\n            <li><a href=\"/ru/docs/Learn/CSS/First_steps/Using_your_new_knowledge\">Using your new knowledge</a></li>\n          </ol>\n      </details>\n  </li>\n  <li class=\"toggle\">\n      <details>\n          <summary>CSS building blocks</summary>\n          <ol>\n            <li><a href=\"/ru/docs/Learn/CSS/Building_blocks\">CSS building blocks overview</a></li>\n            <li><a href=\"/ru/docs/Learn/CSS/Building_blocks/Cascade_and_inheritance\">Cascade and inheritance</a></li>\n            <li><a href=\"/ru/docs/Learn/CSS/Building_blocks/Selectors\">CSS selectors</a></li>\n            <li><a href=\"/ru/docs/Learn/CSS/Building_blocks/The_box_model\">The box model</a></li>\n            <li><a href=\"/ru/docs/Learn/CSS/Building_blocks/Backgrounds_and_borders\">Backgrounds and borders</a></li>\n            <li><a href=\"/ru/docs/Learn/CSS/Building_blocks/Handling_different_text_directions\">Handling different text directions</a></li>\n            <li><a href=\"/ru/docs/Learn/CSS/Building_blocks/Overflowing_content\">Overflowing content</a></li>\n            <li><a href=\"/ru/docs/Learn/CSS/Building_blocks/Values_and_units\">Values and units</a></li>\n            <li><a href=\"/ru/docs/Learn/CSS/Building_blocks/Sizing_items_in_CSS\">Sizing items in CSS</a></li>\n            <li><a href=\"/ru/docs/Learn/CSS/Building_blocks/Images_media_form_elements\">Images, media, and form elements</a></li>\n            <li><a href=\"/ru/docs/Learn/CSS/Building_blocks/Styling_tables\">Styling tables</a></li>\n            <li><a href=\"/ru/docs/Learn/CSS/Building_blocks/Debugging_CSS\">Debugging CSS</a></li>\n            <li><a href=\"/ru/docs/Learn/CSS/Building_blocks/Organizing\">Organizing your CSS</a></li>\n      </ol></details>\n  </li>\n  <li class=\"toggle\">\n      <details>\n          <summary>Стилизирование текста</summary>\n          <ol>\n            <li><a href=\"/ru/docs/Learn/CSS/Styling_text\">Стилизирование текста</a></li>\n            <li><a href=\"/ru/docs/Learn/CSS/Styling_text/Fundamentals\">Основы стилизирования текста и шрифта</a></li>\n            <li><a href=\"/ru/docs/Learn/CSS/Styling_text/Styling_lists\">Стилизирование списков</a></li>\n            <li><a href=\"/ru/docs/Learn/CSS/Styling_text/Styling_links\">Стилизирование ссылок</a></li>\n            <li><a href=\"/ru/docs/Learn/CSS/Styling_text/Web_fonts\">Веб-шрифты</a></li>\n            <li><a href=\"/ru/docs/Learn/CSS/Styling_text/Typesetting_a_homepage\">Задание: Стилизирование школьного сайта</a></li>\n          </ol>\n      </details>\n  </li>\n  <li class=\"toggle\">\n      <details>\n          <summary>CSS макет</summary>\n          <ol>\n            <li><a href=\"/ru/docs/Learn/CSS/CSS_layout\">CSS макет</a></li>\n            <li><a href=\"/ru/docs/Learn/CSS/CSS_layout/Introduction\">Introduction to CSS layout</a></li>\n            <li><a href=\"/ru/docs/Learn/CSS/CSS_layout/Normal_Flow\">Normal Flow</a></li>\n            <li><a href=\"/ru/docs/Learn/CSS/CSS_layout/Flexbox\">Flexbox</a></li>\n            <li><a href=\"/ru/docs/Learn/CSS/CSS_layout/Grids\">Сетки</a></li>\n            <li><a href=\"/ru/docs/Learn/CSS/CSS_layout/Floats\">Float</a></li>\n            <li><a href=\"/ru/docs/Learn/CSS/CSS_layout/Positioning\">Позиционирование</a></li>\n            <li><a href=\"/ru/docs/Learn/CSS/CSS_layout/Multiple-column_Layout\">Multiple-column Layout</a></li>\n            <li><a href=\"/ru/docs/Learn/CSS/CSS_layout/Responsive_Design\">Responsive design</a></li>\n            <li><a href=\"/ru/docs/Learn/CSS/CSS_layout/Media_queries\">Beginner's guide to media queries</a></li>\n            <li><a href=\"/ru/docs/Learn/CSS/CSS_layout/Legacy_Layout_Methods\">Legacy Layout Methods</a></li>\n            <li><a href=\"/ru/docs/Learn/CSS/CSS_layout/Supporting_Older_Browsers\">Supporting Older Browsers</a></li>\n            <li><a href=\"/ru/docs/Learn/CSS/CSS_layout/Fundamental_Layout_Comprehension\">Fundamental Layout Comprehension</a></li>\n          </ol>\n      </details>\n  </li>\n  <li data-default-state=\"\"><a href=\"/ru/docs/Learn/JavaScript\"><strong>JavaScript — динамический клиентский скриптинг</strong></a></li>\n  <li class=\"toggle\">\n      <details>\n          <summary>Первые шаги в JavaScript</summary>\n          <ol>\n            <li><a href=\"/ru/docs/Learn/JavaScript/First_steps\">Первые шаги в JavaScript</a></li>\n            <li><a href=\"/ru/docs/Learn/JavaScript/First_steps/What_is_JavaScript\">Что такое JavaScript?</a></li>\n            <li><a href=\"/ru/docs/Learn/JavaScript/First_steps/A_first_splash\">Первое погружение в JavaScript</a></li>\n            <li><a href=\"/ru/docs/Learn/JavaScript/First_steps/What_went_wrong\">Что-то пошло не так? Устранение ошибок JavaScript</a></li>\n            <li><a href=\"/ru/docs/Learn/JavaScript/First_steps/Variables\">Хранение нужной информации — Переменные</a></li>\n            <li><a href=\"/ru/docs/Learn/JavaScript/First_steps/Math\">Основы JavaScript — Числа и операторы</a></li>\n            <li><a href=\"/ru/docs/Learn/JavaScript/First_steps/Strings\">Работа с текстом — Строки в JavaScript</a></li>\n            <li><a href=\"/ru/docs/Learn/JavaScript/First_steps/Useful_string_methods\">Полезные методы для строк</a></li>\n            <li><a href=\"/ru/docs/Learn/JavaScript/First_steps/Arrays\">Массивы</a></li>\n            <li><a href=\"/ru/docs/Learn/JavaScript/First_steps/Silly_story_generator\">Задание: Генератор глупых историй</a></li>\n          </ol>\n      </details>\n  </li>\n  <li class=\"toggle\">\n      <details>\n          <summary>Блоки в JavaScript</summary>\n          <ol>\n            <li><a href=\"/ru/docs/Learn/JavaScript/Building_blocks\">Блоки в JavaScript</a></li>\n            <li><a href=\"/ru/docs/Learn/JavaScript/Building_blocks/conditionals\">Делаем решения в вашем годе — Условия</a></li>\n            <li><a href=\"/ru/docs/Learn/JavaScript/Building_blocks/Looping_code\">Повторение кода</a></li>\n            <li><a href=\"/ru/docs/Learn/JavaScript/Building_blocks/Functions\">Функции — Переиспользуемые блоки кода</a></li>\n            <li><a href=\"/ru/docs/Learn/JavaScript/Building_blocks/Build_your_own_function\">Создаём свою функцию</a></li>\n            <li><a href=\"/ru/docs/Learn/JavaScript/Building_blocks/Return_values\">Возвращаемые значения функций</a></li>\n            <li><a href=\"/ru/docs/Learn/JavaScript/Building_blocks/Events\">Введение в события</a></li>\n            <li><a href=\"/ru/docs/Learn/JavaScript/Building_blocks/Image_gallery\">Задание: Галерея изображений</a></li>\n          </ol>\n      </details>\n  </li>\n  <li class=\"toggle\">\n      <details>\n          <summary>Введение в объекты JavaScript</summary>\n          <ol>\n            <li><a href=\"/ru/docs/Learn/JavaScript/Objects\">Введение в объекты JavaScript</a></li>\n            <li><a href=\"/ru/docs/Learn/JavaScript/Objects/Basics\">Основы объектов</a></li>\n            <li><a href=\"/ru/docs/Learn/JavaScript/Objects/Object_prototypes\">Прототипы объектов</a></li>\n            <li><a href=\"/ru/docs/Learn/JavaScript/Objects/Object-oriented_programming\">Object-oriented programming concepts</a></li>\n            <li><a href=\"/ru/docs/Learn/JavaScript/Objects/Classes_in_JavaScript\">Classes in JavaScript</a></li>\n            <li><a href=\"/ru/docs/Learn/JavaScript/Objects/JSON\">Работа с JSON данными</a></li>\n            <li><a href=\"/ru/docs/Learn/JavaScript/Objects/Object_building_practice\">Практика по созданию объектов</a></li>\n            <li><a href=\"/ru/docs/Learn/JavaScript/Objects/Adding_bouncing_balls_features\">Задание: Добавление возможностей в пример с прыгающими шарами</a></li>\n          </ol>\n      </details>\n  </li>\n  <li class=\"toggle\">\n    <details>\n        <summary>Asynchronous JavaScript</summary>\n        <ol>\n          <li><a href=\"/ru/docs/Learn/JavaScript/Asynchronous\">Asynchronous JavaScript overview</a></li>\n          <li><a href=\"/ru/docs/Learn/JavaScript/Asynchronous/Concepts\">General asynchronous programming concepts</a></li>\n          <li><a href=\"/ru/docs/Learn/JavaScript/Asynchronous/Introducing\">Introducing asynchronous JavaScript</a></li>\n          <li><a href=\"/ru/docs/Learn/JavaScript/Asynchronous/Timeouts_and_intervals\">Cooperative asynchronous Java​Script: Timeouts and intervals</a></li>\n          <li><a href=\"/ru/docs/Learn/JavaScript/Asynchronous/Promises\">Graceful asynchronous programming with Promises</a></li>\n          <li><a href=\"/ru/docs/Learn/JavaScript/Asynchronous/Async_await\">Making asynchronous programming easier with async and await</a></li>\n          <li><a href=\"/ru/docs/Learn/JavaScript/Asynchronous/Choosing_the_right_approach\">Choosing the right approach</a></li>\n        </ol>\n    </details>\n  </li>\n  <li class=\"toggle\">\n    <details>\n        <summary>Client-side web APIs</summary>\n        <ol>\n          <li><a href=\"/ru/docs/Learn/JavaScript/Client-side_web_APIs\">Client-side web APIs</a></li>\n          <li><a href=\"/ru/docs/Learn/JavaScript/Client-side_web_APIs/Introduction\">Introduction to web APIs</a></li>\n          <li><a href=\"/ru/docs/Learn/JavaScript/Client-side_web_APIs/Manipulating_documents\">Manipulating documents</a></li>\n          <li><a href=\"/ru/docs/Learn/JavaScript/Client-side_web_APIs/Fetching_data\">Fetching data from the server</a></li>\n          <li><a href=\"/ru/docs/Learn/JavaScript/Client-side_web_APIs/Third_party_APIs\">Third party APIs</a></li>\n          <li><a href=\"/ru/docs/Learn/JavaScript/Client-side_web_APIs/Drawing_graphics\">Drawing graphics</a></li>\n          <li><a href=\"/ru/docs/Learn/JavaScript/Client-side_web_APIs/Video_and_audio_APIs\">Video and audio APIs</a></li>\n          <li><a href=\"/ru/docs/Learn/JavaScript/Client-side_web_APIs/Client-side_storage\">Client-side storage</a></li>\n        </ol>\n    </details>\n  </li>\n  <li><a href=\"/ru/docs/Learn/Forms\"><strong>Web forms — Working with user data</strong></a></li>\n  <li class=\"toggle\">\n    <details>\n        <summary>Core forms learning pathway</summary>\n        <ol>\n          <li><a href=\"/ru/docs/Learn/Forms\">Web forms overview</a></li>\n          <li><a href=\"/ru/docs/Learn/Forms/Your_first_form\">Your first form</a></li>\n          <li><a href=\"/ru/docs/Learn/Forms/How_to_structure_a_web_form\">How to structure a web form</a></li>\n          <li><a href=\"/ru/docs/Learn/Forms/Basic_native_form_controls\">Basic native form controls</a></li>\n          <li><a href=\"/ru/docs/Learn/Forms/HTML5_input_types\">The HTML5 input types</a></li>\n          <li><a href=\"/ru/docs/Learn/Forms/Other_form_controls\">Other form controls</a></li>\n          <li><a href=\"/ru/docs/Learn/Forms/Styling_web_forms\">Styling web forms</a></li>\n          <li><a href=\"/ru/docs/Learn/Forms/Advanced_form_styling\">Advanced form styling</a></li>\n          <li><a href=\"/ru/docs/Learn/Forms/UI_pseudo-classes\">UI pseudo-classes</a></li>\n          <li><a href=\"/ru/docs/Learn/Forms/Form_validation\">Client-side form validation</a></li>\n          <li><a href=\"/ru/docs/Learn/Forms/Sending_and_retrieving_form_data\">Sending form data</a></li>\n        </ol>\n    </details>\n  </li>\n  <li class=\"toggle\">\n    <details>\n        <summary>Advanced forms articles</summary>\n        <ol>\n          <li><a href=\"/ru/docs/Learn/Forms/How_to_build_custom_form_controls\">How to build custom form controls</a></li>\n          <li><a href=\"/ru/docs/Learn/Forms/Sending_forms_through_JavaScript\">Sending forms through JavaScript</a></li>\n          <li><a href=\"/ru/docs/Learn/Forms/Property_compatibility_table_for_form_controls\">CSS property compatibility table for form controls</a></li>\n        </ol>\n    </details>\n  </li>\n  <li><a href=\"/ru/docs/Learn/Accessibility\"><strong>Accessibility — Make the web usable by everyone</strong></a></li>\n  <li class=\"toggle\">\n    <details>\n        <summary>Accessibility guides</summary>\n        <ol>\n          <li><a href=\"/ru/docs/Learn/Accessibility\">Accessibility overview</a></li>\n          <li><a href=\"/ru/docs/Learn/Accessibility/What_is_accessibility\">What is accessibility?</a></li>\n          <li><a href=\"/ru/docs/Learn/Accessibility/HTML\">HTML: A good basis for accessibility</a></li>\n          <li><a href=\"/ru/docs/Learn/Accessibility/CSS_and_JavaScript\">CSS and JavaScript accessibility best practices</a></li>\n          <li><a href=\"/ru/docs/Learn/Accessibility/WAI-ARIA_basics\">WAI-ARIA basics</a></li>\n          <li><a href=\"/ru/docs/Learn/Accessibility/Multimedia\">Accessible multimedia</a></li>\n          <li><a href=\"/ru/docs/Learn/Accessibility/Mobile\">Mobile accessibility</a></li>\n        </ol>\n    </details>\n  </li>\n  <li class=\"toggle\">\n    <details>\n        <summary>Accessibility assessment</summary>\n        <ol>\n            <li><a href=\"/ru/docs/Learn/Accessibility/Accessibility_troubleshooting\">Assessment: Accessibility troubleshooting</a></li>\n        </ol>\n    </details>\n  </li>\n  <li><a href=\"/ru/docs/Learn/Tools_and_testing\"><strong>Инструменты и тестирование</strong></a></li>\n  <li class=\"toggle\">\n    <details>\n        <summary>Client-side web development tools</summary>\n        <ol>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Understanding_client-side_tools\">Client-side web development tools index</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Overview\">Client-side tooling overview</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Command_line\">Command line crash course</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Package_management\">Package management basics</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Introducing_complete_toolchain\">Introducing a complete toolchain</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Understanding_client-side_tools/Deployment\">Deploying our app</a></li>\n        </ol>\n    </details>\n  </li>\n  <li class=\"toggle\">\n    <details>\n        <summary>Introduction to client-side frameworks</summary>\n        <ol>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Introduction\">Client-side frameworks overview</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Main_features\">Framework main features</a></li>\n        </ol>\n    </details>\n  </li>\n  <li class=\"toggle\">\n    <details>\n        <summary>React</summary>\n        <ol>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_getting_started\">Getting started with React</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_todo_list_beginning\">Beginning our React todo list</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_components\">Componentizing our React app</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_interactivity_events_state\">React interactivity: Events and state</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_interactivity_filtering_conditional_rendering\">React interactivity: Editing, filtering, conditional rendering</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_accessibility\">Accessibility in React</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_resources\">React resources</a></li>\n        </ol>\n    </details>\n  </li>\n  <li class=\"toggle\">\n    <details>\n        <summary>Ember</summary>\n        <ol>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_getting_started\">Getting started with Ember</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_structure_componentization\">Ember app structure and componentization</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_interactivity_events_state\">Ember interactivity: Events, classes and state</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_conditional_footer\">Ember Interactivity: Footer functionality, conditional rendering</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_routing\">Routing in Ember</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Ember_resources\">Ember resources and troubleshooting</a></li>\n        </ol>\n    </details>\n  </li>\n  <li class=\"toggle\">\n    <details>\n        <summary>Vue</summary>\n        <ol>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_getting_started\">Getting started with Vue</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_first_component\">Creating our first Vue component</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_rendering_lists\">Rendering a list of Vue components</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_methods_events_models\">Adding a new todo form: Vue events, methods, and models</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_styling\">Styling Vue components with CSS</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_computed_properties\">Using Vue computed properties</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_conditional_rendering  \">Vue conditional rendering: editing existing todos</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_refs_focus_management\">Focus management with Vue refs</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Vue_resources\">Vue resources</a></li>\n        </ol>\n    </details>\n  </li>\n  <li class=\"toggle\">\n    <details>\n        <summary>Svelte</summary>\n        <ol>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Svelte_getting_started\">Getting started with Svelte</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Svelte_Todo_list_beginning\">Starting our Svelte Todo list app</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Svelte_variables_props\">Dynamic behavior in Svelte: working with variables and props</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Svelte_components\">Componentizing our Svelte app</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Svelte_reactivity_lifecycle_accessibility\">Advanced Svelte: Reactivity, lifecycle, accessibility</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Svelte_stores\">Working with Svelte stores</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Svelte_TypeScript  \">TypeScript support in Svelte</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Svelte_deployment_next\">Deployment and next steps</a></li>\n        </ol>\n    </details>\n  </li>\n  <li class=\"toggle\">\n    <details>\n        <summary>Angular</summary>\n        <ol>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Angular_getting_started\">Getting started with Angular</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Angular_todo_list_beginning\">Beginning our Angular todo list app</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Angular_styling\">Styling our Angular app</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Angular_item_component\">Creating an item component</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Angular_filtering\">Filtering our to-do items</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/Angular_building\">Building Angular applications and further resources</a></li>\n        </ol>\n    </details>\n  </li>\n  <li class=\"toggle\">\n    <details>\n        <summary>Git and GitHub</summary>\n        <ol>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/GitHub\">Git and GitHub overview</a></li>\n          <li><a href=\"https://guides.github.com/activities/hello-world/\">Hello World</a></li>\n          <li><a href=\"https://guides.github.com/introduction/git-handbook/\">Git Handbook</a></li>\n          <li><a href=\"https://guides.github.com/activities/forking/\">Forking Projects</a></li>\n          <li><a href=\"https://help.github.com/en/github/collaborating-with-issues-and-pull-requests/about-pull-requests\">About pull requests</a></li>\n          <li><a href=\"https://guides.github.com/features/issues/\">Mastering Issues</a></li>\n        </ol>\n    </details>\n  </li>\n  <li class=\"toggle\">\n    <details>\n        <summary>Кроссбраузерное тестирование</summary>\n        <ol>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Cross_browser_testing\">Кроссбраузерное тестирование</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/Introduction\">Вступление в кроссбраузерное тестирование</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/Testing_strategies\">Стратегии выполнения тестирования</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/HTML_and_CSS\">Решение частых проблем с HTML и CSS</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/JavaScript\">Решение частых проблем с JavaScript</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/Accessibility\">Решение частых проблем доступности</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/Feature_detection\">Проверка поддержки возможностей</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/Automated_testing\">Вступление в автоматическое тестирование</a></li>\n          <li><a href=\"/ru/docs/Learn/Tools_and_testing/Cross_browser_testing/Your_own_automation_environment\">Установка вашей автоматической среды тестирования</a></li>\n        </ol>\n    </details>\n  </li>\n  <li data-default-state=\"open\"><a href=\"/ru/docs/Learn/Server-side\"><strong>Программирование серверной части сайта</strong></a></li>\n  <li class=\"toggle\">\n    <details>\n        <summary>Первые шаги</summary>\n        <ol>\n          <li><a href=\"/ru/docs/Learn/Server-side/First_steps\">Первые шаги</a></li>\n          <li><a href=\"/ru/docs/Learn/Server-side/First_steps/Introduction\">Вступление в серверное программирование</a></li>\n          <li><a href=\"/ru/docs/Learn/Server-side/First_steps/Client-Server_overview\">Клиент-сервер</a></li>\n          <li><a href=\"/ru/docs/Learn/Server-side/First_steps/Web_frameworks\">Веб-фреймворки для серверной части</a></li>\n          <li><a href=\"/ru/docs/Learn/Server-side/First_steps/Website_security\">Защищённость веб-сайтов</a></li>\n        </ol>\n    </details>\n  </li>\n  <li class=\"toggle\">\n    <details open=\"\">\n        <summary>Веб-фреймворк Django (Python)</summary>\n        <ol>\n          <li><a href=\"/ru/docs/Learn/Server-side/Django\">Веб-фреймворк Django (Python)</a></li>\n          <li><a href=\"/ru/docs/Learn/Server-side/Django/Introduction\">Вступление</a></li>\n          <li><a href=\"/ru/docs/Learn/Server-side/Django/development_environment\">Установка среды разработки</a></li>\n          <li><a href=\"/ru/docs/Learn/Server-side/Django/Tutorial_local_library_website\">Руководство: Сайт местной библиотеки</a></li>\n          <li><a href=\"/ru/docs/Learn/Server-side/Django/skeleton_website\">Руководство часть 2: Создаём набросок сайта</a></li>\n          <li><a href=\"/ru/docs/Learn/Server-side/Django/Models\">Руководство часть 3: Использование моделей</a></li>\n          <li><a href=\"/ru/docs/Learn/Server-side/Django/Admin_site\">Руководство часть 4: Django панель администратора</a></li>\n          <li><a href=\"/ru/docs/Learn/Server-side/Django/Home_page\">Руководство часть 5: Создание нашей домашней страницы</a></li>\n          <li><a href=\"/ru/docs/Learn/Server-side/Django/Generic_views\">Руководство часть 6: Списки и представления</a></li>\n          <li><a href=\"/ru/docs/Learn/Server-side/Django/Sessions\">Руководство часть 7: Сессии</a></li>\n          <li><a href=\"/ru/docs/Learn/Server-side/Django/Authentication\">Руководство часть 8: Аутенфикация и разрешения пользователей</a></li>\n          <li><a href=\"/ru/docs/Learn/Server-side/Django/Forms\">Руководство часть 9: Работа с формами</a></li>\n          <li><a href=\"/ru/docs/Learn/Server-side/Django/Testing\">Руководство часть 10: Тестирование веб-приложения на Django</a></li>\n          <li><a href=\"/ru/docs/Learn/Server-side/Django/Deployment\">Руководство часть 11: Разворачивание Django на продакшн сервере</a></li>\n          <li><a href=\"/ru/docs/Learn/Server-side/Django/web_application_security\">Защищённость веб-приложения</a></li>\n          <li><a href=\"/ru/docs/Learn/Server-side/Django/django_assessment_blog\">Задание: создание мини блога</a></li>\n        </ol>\n    </details>\n  </li>\n  <li class=\"toggle\">\n    <details>\n        <summary>Express Web Framework (node.js/JavaScript)</summary>\n        <ol>\n          <li><a href=\"/ru/docs/Learn/Server-side/Express_Nodejs\">Express Web Framework (Node.js/JavaScript) overview</a></li>\n          <li><a href=\"/ru/docs/Learn/Server-side/Express_Nodejs/Introduction\">Express/Node introduction</a></li>\n          <li><a href=\"/ru/docs/Learn/Server-side/Express_Nodejs/development_environment\">Setting up a Node (Express) development environment</a></li>\n          <li><a href=\"/ru/docs/Learn/Server-side/Express_Nodejs/Tutorial_local_library_website\">Express tutorial: The Local Library website</a></li>\n          <li><a href=\"/ru/docs/Learn/Server-side/Express_Nodejs/skeleton_website\">Express Tutorial Part 2: Creating a skeleton website</a></li>\n          <li><a href=\"/ru/docs/Learn/Server-side/Express_Nodejs/mongoose\">Express Tutorial Part 3: Using a database (with Mongoose)</a></li>\n          <li><a href=\"/ru/docs/Learn/Server-side/Express_Nodejs/routes\">Express Tutorial Part 4: Routes and controllers</a></li>\n          <li><a href=\"/ru/docs/Learn/Server-side/Express_Nodejs/Displaying_data\">Express Tutorial Part 5: Displaying library data</a></li>\n          <li><a href=\"/ru/docs/Learn/Server-side/Express_Nodejs/forms\">Express Tutorial Part 6: Working with forms</a></li>\n          <li><a href=\"/ru/docs/Learn/Server-side/Express_Nodejs/deployment\">Express Tutorial Part 7: Deploying to production</a></li>\n        </ol>\n    </details>\n  </li>\n  <li><a href=\"#\"><strong>Дальнейшее чтение</strong></a></li>\n  <li class=\"toggle\">\n    <details>\n        <summary>Общие вопросы</summary>\n        <ol>\n          <li><a href=\"/ru/docs/Learn/HTML/Howto\">Вопросы по HTML</a></li>\n          <li><a href=\"/ru/docs/Learn/CSS/Howto\">Вопросы по CSS</a></li>\n          <li><a href=\"/ru/docs/Learn/JavaScript/Howto\">JavaScript questions</a></li>\n          <li><a href=\"/ru/docs/Learn/Common_questions#Web_mechanics\">Как работает Веб</a></li>\n          <li><a href=\"/ru/docs/Learn/Common_questions#Tools_and_setup\">Инструменты и установка</a></li>\n          <li><a href=\"/ru/docs/Learn/Common_questions#Design_and_accessibility\">Дизайн и доступность</a></li>\n        </ol>\n    </details>\n  </li>\n</ol>\n\n","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<div id=\"sect1\"></div>\n\n<div id=\"sect2\"><ul class=\"prev-next\">\n    <li><a class=\"button minimal\" href=\"/ru/docs/Learn/Server-side/Django/Forms\"> Назад </a></li>\n    <li><a class=\"button minimal\" href=\"/ru/docs/Learn/Server-side/Django\"> Обзор: Django</a></li>\n    <li><a class=\"button minimal\" href=\"/ru/docs/Learn/Server-side/Django/Deployment\"> Далее  </a></li>\n</ul></div>\n\n<p class=\"summary\">Сайты, в процессе развития и разработки, становится все сложнее тестировать вручную. Кроме такого тестирования, сложными становятся внутренние взаимодействия между компонентами - внесение небольшого изменения в одной части приложения влияет на другие. При этом, чтобы все продолжало работать нужно вносить все больше и больше изменений и, желательно так, чтобы не добавлялись новые ошибки. Одним из способов который позволяет смягчить последствия добавления изменений, является внедрение в разработку автоматического тестирования - оно должно просто и надёжно запускаться каждый раз, когда вы вносите изменения в свой код. Данное руководство рассматривает вопросы автоматизации<em> юнит-тестирования</em> вашего сайта при помощи фреймворка Django для тестов.</p>\n\n<table>\n <tbody>\n  <tr>\n   <th scope=\"row\">Требования:</th>\n   <td>Изучить все предыдущие темы руководства, включая <a href=\"/en-US/docs/Learn/Server-side/Django/Forms\">Руководство Django Часть 9: Работа с формами</a>.</td>\n  </tr>\n  <tr>\n   <th scope=\"row\">Цель:</th>\n   <td>Понимать как создавать юнит тесты для сайта на основе Django.</td>\n  </tr>\n </tbody>\n</table>"}},{"type":"prose","value":{"id":"обзор","title":"Обзор","isH3":false,"content":"<p><a href=\"/en-US/docs/Learn/Server-side/Django/Tutorial_local_library_website\">LocalLibrary</a> в настоящий момент содержит страницы для показа списков всех книг, авторов, подробной информации о книгах <code>Book</code> и авторах <code>Author</code>, а также страницу для обновления информации об экземпляре книги <code>BookInstance</code> и, кроме того, страницы для создания, обновления и удаления записей модели <code>Author</code> (и модели <code>Book</code>, в том случае, если вы выполнили домашнее задание в руководстве <a href=\"/en-US/docs/Learn/Server-side/Django/Forms\">работа с формами</a>). Даже в случае небольшого сайта, ручной переход на каждую страницу и <em>беглая</em> проверка того, что все работает как следует, может занять несколько минут. В процессе внесения изменений и роста сайта требуемое время для проведения проверок будет только возрастать. Если бы мы продолжили в том же духе, то в какой-то момент на проведение тестов мы тратили бы больше времени, чем на написание кода и внесение изменений.</p>\n\n<p>Автоматические тесты могут серьёзно помочь нам справиться с этой проблемой! Очевидными преимуществами в таком случае являются значительно меньшие временные затраты на проведение тестов, их подробное выполнение, а кроме того, тесты имеют постоянную функциональность, или последовательность действий  (человек никогда не сможет тестировать так надёжно!). В связи с быстротой их выполнения автоматические тесты можно выполнять более часто, а если они провалятся, то укажут на соответствующее место (где что-то пошло не так как ожидалось).</p>\n\n<p>Кроме того, автоматические тесты могут действовать как первый \"настоящий пользователь\" вашего кода, заставляя вас строго следить за объявлениями и документированием поведения вашего сайта. Тесты часто являются основой для создания примеров вашего кода и документации. По этим причинам иногда некоторые процессы разработки программного обеспечения начинаются с определения тестов и их реализации, а уже после этого следует написание кода который должен иметь соответствующее поведение (так называемая разработка <a href=\"https://en.wikipedia.org/wiki/Test-driven_development\" class=\"external\" rel=\" noopener\">на основе тестов</a> и <a href=\"https://en.wikipedia.org/wiki/Behavior-driven_development\" class=\"external\" rel=\" noopener\">на основе поведения</a>).</p>\n\n<p>Данное руководство показывает процесс создания автоматических тестов в Django при помощи добавления их к разработке сайта <em>LocalLibrary</em>.</p>"}},{"type":"prose","value":{"id":"типы_тестирования","title":"Типы тестирования","isH3":true,"content":"<p>Существует несколько типов, уровней, классификаций тестов и тестовых приёмов. Наиболее важными автоматическими тестами являются:</p>\n\n<dl>\n <dt id=\"юнит-тесты\">Юнит-тесты</dt>\n <dd>Проверяют функциональное поведение для отдельных компонентов, часто классов и функций.</dd>\n <dt id=\"регрессионное_тестирование\"><strong>Регрессионное тестирование</strong></dt>\n <dd>Тесты которые воспроизводят исторические ошибки (баги). Каждый тест вначале запускается для проверки того, что баг был исправлен, а затем перезапускается для того, чтобы убедиться, что он не был внесён снова с появлением новых изменений в коде.</dd>\n <dt id=\"интеграционные_тесты\">Интеграционные тесты</dt>\n <dd>Проверка совместной работы групп компонентов. Данные тесты отвечают за совместную работу между компонентами, не обращая внимания на внутренние процессы в компонентах. Они проводятся как для простых групп компонентов, так и для целых веб-сайтов.</dd>\n</dl>\n\n<div class=\"note notecard\" id=\"sect3\">\n<p><strong>Примечание:  </strong>К другим типам тестов относятся методы чёрного ящика, белого ящика, ручные, автоматические, канареечные (canary), дымные (smoke), соответствия (conformance), принятия (acceptance), функциональные (functional),  системные (system), эффективности (performance), загрузочные (load) и стресс-тесты (stress tests).</p>\n</div>"}},{"type":"prose","value":{"id":"что_django_предоставляет_для_тестирования","title":"Что Django предоставляет для тестирования?","isH3":true,"content":"<p>Тестирование сайта это сложная задача, потому что она состоит их нескольких логических слоёв – от  HTTP-запроса и запроса к моделям, до валидации формы и их обработки, а кроме того, рендеринга шаблонов страниц.</p>\n\n<p>Django предоставляет фреймворк для создания тестов, построенного на основе иерархии классов, которые, в свою очередь, зависят от стандартной библиотеки Python  <code><a href=\"https://docs.python.org/3/library/unittest.html#module-unittest\" title=\"(in Python v3.5)\" class=\"external\" rel=\" noopener\">unittest</a></code>. Несмотря на название, данный фреймворк подходит и для юнит-, и для интеграционного тестирования. Фреймворк Django добавляет методы API и инструменты, которые помогают тестировать как веб так и, специфическое для Django, поведение. Это позволяет вам имитировать URL-запросы, добавление тестовых данных, а также проводить проверку выходных данных ваших приложений. Кроме того, Django предоставляет API (<a href=\"https://docs.djangoproject.com/en/1.10/topics/testing/tools/#liveservertestcase\" class=\"external\" rel=\" noopener\">LiveServerTestCase</a>) и инструменты <a href=\"https://docs.djangoproject.com/en/1.10/topics/testing/advanced/#other-testing-frameworks\" class=\"external\" rel=\" noopener\">для применения различных фреймворков тестирования</a>, например вы можете подключить популярный фреймворк <a href=\"/en-US/docs/Learn/Tools_and_testing/Cross_browser_testing/Your_own_automation_environment\">Selenium</a> для имитации поведения пользователя в реальном браузере.</p>\n\n<p>Для написания теста вы должны наследоваться от любого из классов тестирования Django (или <em>юниттеста</em>)  (<a href=\"https://docs.djangoproject.com/en/1.10/topics/testing/tools/#simpletestcase\" class=\"external\" rel=\" noopener\">SimpleTestCase</a>, <a href=\"https://docs.djangoproject.com/en/1.10/topics/testing/tools/#transactiontestcase\" class=\"external\" rel=\" noopener\">TransactionTestCase</a>, <a href=\"https://docs.djangoproject.com/en/1.10/topics/testing/tools/#testcase\" class=\"external\" rel=\" noopener\">TestCase</a>, <a href=\"https://docs.djangoproject.com/en/1.10/topics/testing/tools/#liveservertestcase\" class=\"external\" rel=\" noopener\">LiveServerTestCase</a>), а затем реализовать отдельные методы проверки кода (тесты это функции-\"утверждения\", которые проверяют, что результатом выражения являются значения <code>True</code> или <code>False</code>, или что два значения равны и так далее). Когда вы запускаете тест, фреймворк выполняет соответствующие тестовые методы в вашем классе-наследнике. Методы тестирования запускаются независимо друг от друга, начиная с метода настроек и/или завершаясь методом разрушения (tear-down), определённом в классе, как показано ниже.</p>\n\n<div class=\"code-example\"><pre class=\"brush: python notranslate\"><code><span class=\"token keyword\">class</span> <span class=\"token class-name\">YourTestClass</span><span class=\"token punctuation\">(</span>TestCase<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">setUp</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># Установки запускаются перед каждым тестом</span>\n        <span class=\"token keyword\">pass</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">tearDown</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># Очистка после каждого метода</span>\n        <span class=\"token keyword\">pass</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_something_that_will_pass</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span>assertFalse<span class=\"token punctuation\">(</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_something_that_will_fail</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        self<span class=\"token punctuation\">.</span>assertTrue<span class=\"token punctuation\">(</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span>\n</code></pre></div>\n\n<p>Самый подходящий базовый класс для большинства тестов это <a href=\"https://docs.djangoproject.com/en/1.10/topics/testing/tools/#testcase\" class=\"external\" rel=\" noopener\">django.test.TestCase</a>.  Этот класс создаёт чистую базу данных перед запуском своих методов, а также запускает каждую функцию тестирования в его собственной транзакции. У данного класса также имеется тестовый <a href=\"https://docs.djangoproject.com/en/1.10/topics/testing/tools/#django.test.Client\" title=\"django.test.Client\" class=\"external\" rel=\" noopener\">Клиент</a>, который вы можете использовать для имитации взаимодействия пользователя с кодом на уровне отображения. В следующих разделах мы сконцентрируемся на юнит-тестах, которые будут созданы на основе класса <a href=\"https://docs.djangoproject.com/en/1.10/topics/testing/tools/#testcase\" class=\"external\" rel=\" noopener\">TestCase</a>.</p>\n\n<div class=\"note notecard\" id=\"sect4\">\n<p><strong>Примечание:</strong> Класс <a href=\"https://docs.djangoproject.com/en/1.10/topics/testing/tools/#testcase\" class=\"external\" rel=\" noopener\">django.test.TestCase</a> очень удобен, но он может приводить к замедленной работе в некоторых случаях (не для каждого теста необходимо настраивать базу данных, или имитировать взаимодействие с отображением). Когда вы познакомитесь с работой данного класса, то сможете заменить некоторые из ваших тестов на более простые классы тестирования.</p>\n</div>"}},{"type":"prose","value":{"id":"что_вы_должны_тестировать","title":"Что вы должны тестировать?","isH3":true,"content":"<p>Вы должны тестировать все аспекты, касающиеся вашего кода, но не библиотеки, или функциональность, предоставляемые Python, или Django.</p>\n\n<p>Например, рассмотрим модель <code>Author</code>, определённую ниже. Вам не нужно проверять тот факт, что <code>first_name</code> и <code>last_name</code> были сохранены в базу данных как <code>CharField</code>, потому что за это отвечает непосредственно Django (хотя конечно, на практике  в течение разработки вы косвенно будете проверять данную функциональность). Тоже касается и, например, проверки того, что поле <code>date_of_birth</code> является датой, поскольку это тоже часть реализации Django.</p>\n\n<p>Вы должны проверить текст для меток (<em>First name, Last_name, Date of birth, Died</em>), и размер поля, выделенного для текста (<em>100 символов</em>), потому что они являются частью вашей разработки и чем-то, что может сломаться/измениться в будущем.</p>\n\n<div class=\"code-example\"><pre class=\"brush: python notranslate\"><code><span class=\"token keyword\">class</span> <span class=\"token class-name\">Author</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    first_name <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span>\n    last_name <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span>\n    date_of_birth <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>DateField<span class=\"token punctuation\">(</span>null<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> blank<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n    date_of_death <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>DateField<span class=\"token punctuation\">(</span><span class=\"token string\">'Died'</span><span class=\"token punctuation\">,</span> null<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> blank<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">get_absolute_url</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> reverse<span class=\"token punctuation\">(</span><span class=\"token string\">'author-detail'</span><span class=\"token punctuation\">,</span> args<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span><span class=\"token builtin\">id</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__str__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> <span class=\"token string\">'%s, %s'</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>last_name<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>first_name<span class=\"token punctuation\">)</span></code></pre></div>\n\n<p>Подобным же образом вы должны убедиться, что методы <code style=\"font-style: normal; font-weight: normal;\">get_absolute_url()</code> и <code style=\"font-style: normal; font-weight: normal;\">__str__()</code> ведут себя как требуется, потому что они являются частью вашей бизнес логики. В случае функции <code style=\"font-style: normal; font-weight: normal;\">get_absolute_url()</code> вы можете быть уверены, что функция из Django <code>reverse()</code> была реализована правильно и, следовательно, вы тестируете только то, чтобы соответствующий вызов в отображении был правильно определён.</p>\n\n<div class=\"note notecard\" id=\"sect5\">\n<p><strong>Примечание:</strong> Проницательные читатели могут заметить, что мы можем некоторым образом ограничить дату рождения и смерти какими-то граничными значениями и выполнять проверку, чтобы дата смерти шла после рождения. В Django данное ограничение может быть добавлено к вашим классам форм (хотя вы и можете определить валидаторы для этих полей, они будут проявлять себя только на уровне форм, а не уровне модели).</p>\n</div>\n\n<p>Ну что же, усвоив данную информацию, давайте перейдём к процессу определения и запуска тестов.</p>"}},{"type":"prose","value":{"id":"обзор_структуры_тестов","title":"Обзор структуры тестов","isH3":false,"content":"<p>Перед тем как мы перейдём к тому \"что тестировать\", давайте кратко взглянем на моменты <em>где</em> и <em>как</em> определяются тесты.</p>\n\n<p>Django использует юнит-тестовый модуль - <a href=\"https://docs.python.org/3/library/unittest.html#unittest-test-discovery\" title=\"(in Python v3.5)\" class=\"external\" rel=\" noopener\">встроенный \"обнаружитель\" тестов</a>, который находит тесты в текущей рабочей директории, в любом файле с шаблонным именем<strong> test*.py</strong>. Предоставляя соответствующие имена файлов, вы можете работать с любой структурой которая вас устраивает. Мы рекомендуем создать пакет для вашего тестирующего кода и, следовательно, отделить файлы моделей, отображений, форм и любые другие, от кода который будет использоваться для тестов. Например:</p>\n\n<pre class=\"notranslate\">catalog/\n  /tests/\n    __init__.py\n    test_models.py\n    test_forms.py\n    test_views.py\n</pre>\n\n<p>В проекте <em>LocalLibrary</em> создайте файловую структуру, указанную выше. Файл <strong>__init__.py</strong> должен быть пустым (так мы говорим Питону, что данная директория является пакетом). Вы можете создать три тестовых файла при помощи копирования и переименования файла-образца <strong>/catalog/tests.py</strong>.</p>\n\n<div class=\"note notecard\" id=\"sect6\">\n<p><strong>Примечание:</strong> Скелет тестового файла <strong>/catalog/tests.py</strong> был создан автоматически когда мы выполняли <a href=\"/en-US/docs/Learn/Server-side/Django/skeleton_website\">построение скелета сайта Django</a>. Является абсолютно \"легальным\" действием - поместить все ваши тесты в данный файл, тем не менее, если вы проводите тесты \"правильно\", то вы очень быстро придёте к очень большому и неуправляемому файлу тестирования.</p>\n\n<p>Можете удалить данный файл, поскольку больше он нам не понадобится.</p>\n</div>\n\n<p>Откройте <strong>/catalog/tests/test_models.py</strong>. Файл должен импортировать <code>django.test.TestCase</code>, как показано ниже:</p>\n\n<div class=\"code-example\"><pre class=\"brush: python notranslate\"><code><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>test <span class=\"token keyword\">import</span> TestCase\n\n<span class=\"token comment\"># Поместите ваш код тестов здесь</span>\n</code></pre></div>\n\n<p>Вы часто будете добавлять соответствующий тестовый класс для каждой модели/отображения/формы с отдельными методами проверки каждой отдельной функциональности. В каких-то случаях вы захотите иметь отдельный класс для тестирования какого-то особого варианта работы, или функциональности, с отдельными функциями тестирования, которые будут проверять элемент/элементы данного варианта (например, мы можем создать отдельный класс тестирования для проверки того, что поле валидно, - функции данного класса будут проверять каждый неверный вариант использования). Опять же, структура файлов и пакетов полностью зависит от вас и будет лучше если вы будете её придерживаться.</p>\n\n<p>Добавьте тестовый класс, показанный ниже, в нижнюю часть файла. Данный класс демонстрирует как создать класс тестирования при помощи наследования от <code>TestCase</code>.</p>\n\n<div class=\"code-example\"><pre class=\"brush: python notranslate\"><code><span class=\"token keyword\">class</span> <span class=\"token class-name\">YourTestClass</span><span class=\"token punctuation\">(</span>TestCase<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token decorator annotation punctuation\">@classmethod</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">setUpTestData</span><span class=\"token punctuation\">(</span>cls<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"setUpTestData: Run once to set up non-modified data for all class methods.\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">pass</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">setUp</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"setUp: Run once for every test method to setup clean data.\"</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">pass</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_false_is_false</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Method: test_false_is_false.\"</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertFalse<span class=\"token punctuation\">(</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_false_is_true</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Method: test_false_is_true.\"</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertTrue<span class=\"token punctuation\">(</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_one_plus_one_equals_two</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Method: test_one_plus_one_equals_two.\"</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span><span class=\"token number\">1</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span></code></pre></div>\n\n<p>Этот класс определяет два метода которые вы можете использовать для дотестовой настройки (например, создание какой-либо модели, или других объектов, которые вам понадобятся):</p>\n\n<ul>\n <li><code>setUpTestData()</code> вызывается каждый раз перед запуском теста на уровне настройки всего класса. Вы должны использовать данный метод для создания объектов, которые не будут модифицироваться/изменяться в каком-либо из тестовых методов.</li>\n <li><code>setUp()</code> вызывается перед каждой тестовой функцией для настройки объектов, которые могут изменяться во время тестов (каждая функция тестирования будет получать \"свежую\" версию данных объектов).</li>\n</ul>\n\n<div class=\"note notecard\" id=\"sect7\">\n<p><strong>Примечание</strong>. Классы тестирования также содержат метод <code>tearDown()</code>, который мы пока не используем. Этот метод не особенно полезен для тестирования баз данных, поскольку базовый класс <code>TestCase</code> автоматически разрывает соединения с ними.</p>\n</div>\n\n<p>Далее идут несколько методов, которые используют функции <code>Assert</code>, проверяющие условия \"истинно\" (true), \"ложно\" (false) или равенство (<code>AssertTrue</code>, <code>AssertFalse</code>, <code>AssertEqual</code>). Если условия не выполняются как ожидалось, то это приводит к провалу теста и выводу соответствующего сообщения об ошибке на консоль.</p>\n\n<p>Функции проверки утверждений <code>AssertTrue</code>, <code>AssertFalse</code>, <code>AssertEqual</code> реализованы в <strong>unittest</strong>.  В данном фреймворке существуют и другие подобные функции, а кроме того, <a href=\"https://docs.djangoproject.com/en/1.10/topics/testing/tools/#assertions\" class=\"external\" rel=\" noopener\">специфические для Django функции</a> проверки, например, перехода из/к отображению (<code>assertRedirects</code>), проверки использования какого-то конкретного шаблона (<code>assertTemplateUsed</code>) и так далее.</p>\n\n<div class=\"note notecard\" id=\"sect8\">\n<p>В обычной ситуации у вас нет необходимости вызывать функции <strong>print()</strong> из методов теста, как во фрагменте выше. Мы поступили так только для того, чтобы вы в консоле увидели порядок вызова тестовых функций класса.</p>\n</div>"}},{"type":"prose","value":{"id":"как_запускать_тесты","title":"Как запускать тесты","isH3":false,"content":"<p>Простейшим способом запуска всех тестов является применение следующей команды:</p>\n\n<div class=\"code-example\"><pre class=\"brush: bash notranslate\"><code>python3 manage.py <span class=\"token builtin class-name\">test</span></code></pre></div>\n\n<p>Таким образом мы найдём в текущей директории все файлы с именем <strong>test*.py</strong> и запустим все тесты (у нас имеются несколько файлов для тестирования, но на данный момент, только <strong>/catalog/tests/test_models.py</strong> содержит какие-либо тесты). По умолчанию, тесты сообщат что-нибудь, только в случае провала.</p>\n\n<p>Запустите тесты из корневой папки сайта <em>LocalLibrary</em>. Вы должны увидеть вывод, который похож на следующий.</p>\n\n<div class=\"code-example\"><pre class=\"brush: bash notranslate\"><code><span class=\"token operator\">&gt;</span>python manage.py <span class=\"token builtin class-name\">test</span>\n\nCreating <span class=\"token builtin class-name\">test</span> database <span class=\"token keyword\">for</span> <span class=\"token builtin class-name\">alias</span> <span class=\"token string\">'default'</span><span class=\"token punctuation\">..</span>.\nsetUpTestData: Run once to <span class=\"token builtin class-name\">set</span> up non-modified data <span class=\"token keyword\">for</span> all class methods.\nsetUp: Run once <span class=\"token keyword\">for</span> every <span class=\"token builtin class-name\">test</span> method to setup clean data.\nMethod: test_false_is_false.\n.setUp: Run once <span class=\"token keyword\">for</span> every <span class=\"token builtin class-name\">test</span> method to setup clean data.\nMethod: test_false_is_true.\n.setUp: Run once <span class=\"token keyword\">for</span> every <span class=\"token builtin class-name\">test</span> method to setup clean data.\nMethod: test_one_plus_one_equals_two.\n<span class=\"token builtin class-name\">.</span>\n<span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span>\nFAIL: test_false_is_true <span class=\"token punctuation\">(</span>catalog.tests.tests_models.YourTestClass<span class=\"token punctuation\">)</span>\n----------------------------------------------------------------------\nTraceback <span class=\"token punctuation\">(</span>most recent call last<span class=\"token punctuation\">)</span>:\n  File <span class=\"token string\">\"D:\\Github\\django_tmp\\library_w_t_2\\locallibrary<span class=\"token entity\" title=\"\\c\">\\c</span>atalog<span class=\"token entity\" title=\"\\t\">\\t</span>ests<span class=\"token entity\" title=\"\\t\">\\t</span>ests_models.py\"</span>, line <span class=\"token number\">22</span>, <span class=\"token keyword\">in</span> test_false_is_true\n    self.assertTrue<span class=\"token punctuation\">(</span>False<span class=\"token punctuation\">)</span>\nAssertionError: False is not <span class=\"token boolean\">true</span>\n\n----------------------------------------------------------------------\nRan <span class=\"token number\">3</span> tests <span class=\"token keyword\">in</span> <span class=\"token number\">0</span>.075s\n\nFAILED <span class=\"token punctuation\">(</span>failures<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\nDestroying <span class=\"token builtin class-name\">test</span> database <span class=\"token keyword\">for</span> <span class=\"token builtin class-name\">alias</span> <span class=\"token string\">'default'</span><span class=\"token punctuation\">..</span>.</code></pre></div>\n\n<p>Как видите, один тест провалился и мы можем точно увидеть в какой именно функции это произошло и почему (так и было задумано, поскольку <code>False</code> не равен <code>True</code>!).</p>\n\n<div class=\"note notecard\" id=\"sect9\">\n<p><strong>Совет: </strong> Самая важная вещь, которую нужно извлечь из тестового выхода выше, заключается в том, что это гораздо более ценно, если вы используете описательные/информативные имена для ваших объектов и методов.</p>\n</div>\n\n<p>Текст выделенный жирным, обычно не должен появляться в тестовом выводе (это результат работы функций <code>print()</code> в наших тестах). Он показывает, что вызов метода  <code>setUpTestData()</code> происходит один раз для всего класса в целом, а вызовы<code>setUp()</code> осуществляются перед каждым методом.</p>\n\n<p>Следующий раздел показывает как запускать отдельные тесты и как контролировать процесс вывода информации.</p>"}},{"type":"prose","value":{"id":"ещё_больше_тестовой_информации","title":"Ещё больше тестовой информации","isH3":true,"content":"<p>Если вы желаете получать больше информации о тестах вы должны изменить значение параметра <em>verbosity</em>. Например, для вывода списка успешных и неуспешных тестов (и всю информацию о том, как прошла настройка базы данных) вы можете установить значение verbosity равным \"2\":</p>\n\n<div class=\"code-example\"><pre class=\"brush: bash notranslate\"><code>python3 manage.py <span class=\"token builtin class-name\">test</span> --verbosity <span class=\"token number\">2</span></code></pre></div>\n\n<p>Доступными значениями для verbosity являются  0, 1 (значение по умолчанию), 2 и 3.</p>"}},{"type":"prose","value":{"id":"запуск_определённых_тестов","title":"Запуск определённых тестов","isH3":true,"content":"<p>Если вы хотите запустить подмножество тестов, тогда вам надо указать полный путь к вашему пакету, модулю/подмодулю, классу наследнику<code>TestCase</code>, или методу:</p>\n\n<div class=\"code-example\"><pre class=\"brush: bash notranslate\"><code>python3 manage.py <span class=\"token builtin class-name\">test</span> catalog.tests   <span class=\"token comment\"># Run the specified module</span>\npython3 manage.py <span class=\"token builtin class-name\">test</span> catalog.tests.test_models  <span class=\"token comment\"># Run the specified module</span>\npython3 manage.py <span class=\"token builtin class-name\">test</span> catalog.tests.test_models.YourTestClass <span class=\"token comment\"># Run the specified class</span>\npython3 manage.py <span class=\"token builtin class-name\">test</span> catalog.tests.test_models.YourTestClass.test_one_plus_one_equals_two  <span class=\"token comment\"># Run the specified method</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"тестирование_locallibrary","title":"Тестирование LocalLibrary","isH3":false,"content":"<p>Теперь, когда мы знаем как запустить наши тесты и что именно мы должны тестировать, давайте рассмотрим некоторые практические примеры.</p>\n\n<div class=\"note notecard\" id=\"sect10\">\n<p><strong>Примечание: </strong>Мы не будем расписывать все тесты, а просто покажем вам пример того, как они должны работать и что ещё вы можете с ними сделать.</p>\n</div>"}},{"type":"prose","value":{"id":"модели","title":"Модели","isH3":true,"content":"<p>Как было отмечено ранее, мы должны тестировать все то, что является частью нашего кода, а не библиотеки/код, которые уже были протестированы командами разработчиков Django, или Python.</p>\n\n<p>Рассмотрим модель <code>Author</code>. Мы должны провести тесты текстовых меток всех полей, поскольку, даже несмотря на то, что не все они определены, у нас есть проект, в котором сказано, что все их значения должны быть заданы. Если мы не проведём их тестирование, тогда мы не будем знать, что данные метки действительно содержат необходимые значения. Мы уверены в том, что Django создаст поле заданной длины, таким образом наши тесты будут проверять нужный нам размер поля, а заодно и его содержимое.</p>\n\n<div class=\"code-example\"><pre class=\"brush: python notranslate\"><code><span class=\"token keyword\">class</span> <span class=\"token class-name\">Author</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    first_name <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span>\n    last_name <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span>\n    date_of_birth <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>DateField<span class=\"token punctuation\">(</span>null<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> blank<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n    date_of_death <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>DateField<span class=\"token punctuation\">(</span><span class=\"token string\">'Died'</span><span class=\"token punctuation\">,</span> null<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> blank<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">get_absolute_url</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> reverse<span class=\"token punctuation\">(</span><span class=\"token string\">'author-detail'</span><span class=\"token punctuation\">,</span> args<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span><span class=\"token builtin\">id</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">__str__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> <span class=\"token string\">'%s, %s'</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>last_name<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>first_name<span class=\"token punctuation\">)</span></code></pre></div>\n\n<p>Откройте файл <strong>/catalog/tests/test_models.py</strong> и замените все его содержимое кодом, приведённом во фрагменте для тестирования модели <code>Author</code> (фрагмент представлен ниже).</p>\n\n<p>В первой строке мы импортируем класс <code>TestCase</code>, а затем наследуемся от него, создавая класс с описательным именем (<code>AuthorModelTest</code>), оно поможет нам идентифицировать места провалов в тестах во время вывода информации на консоль. Затем мы создаём метод <code>setUpTestData()</code>, в котором создаём объект автора, который мы будем использовать в тестах, но нигде не будем изменять.</p>\n\n<div class=\"code-example\"><pre class=\"brush: python notranslate\"><code><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>test <span class=\"token keyword\">import</span> TestCase\n\n<span class=\"token comment\"># Create your tests here.</span>\n\n<span class=\"token keyword\">from</span> catalog<span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> Author\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">AuthorModelTest</span><span class=\"token punctuation\">(</span>TestCase<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token decorator annotation punctuation\">@classmethod</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">setUpTestData</span><span class=\"token punctuation\">(</span>cls<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\">#Set up non-modified objects used by all test methods</span>\n        Author<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span>first_name<span class=\"token operator\">=</span><span class=\"token string\">'Big'</span><span class=\"token punctuation\">,</span> last_name<span class=\"token operator\">=</span><span class=\"token string\">'Bob'</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_first_name_label</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        author<span class=\"token operator\">=</span>Author<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n        field_label <span class=\"token operator\">=</span> author<span class=\"token punctuation\">.</span>_meta<span class=\"token punctuation\">.</span>get_field<span class=\"token punctuation\">(</span><span class=\"token string\">'first_name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>verbose_name\n        self<span class=\"token punctuation\">.</span>assertEquals<span class=\"token punctuation\">(</span>field_label<span class=\"token punctuation\">,</span><span class=\"token string\">'first name'</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_date_of_death_label</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        author<span class=\"token operator\">=</span>Author<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n        field_label <span class=\"token operator\">=</span> author<span class=\"token punctuation\">.</span>_meta<span class=\"token punctuation\">.</span>get_field<span class=\"token punctuation\">(</span><span class=\"token string\">'date_of_death'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>verbose_name\n        self<span class=\"token punctuation\">.</span>assertEquals<span class=\"token punctuation\">(</span>field_label<span class=\"token punctuation\">,</span><span class=\"token string\">'died'</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_first_name_max_length</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        author<span class=\"token operator\">=</span>Author<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n        max_length <span class=\"token operator\">=</span> author<span class=\"token punctuation\">.</span>_meta<span class=\"token punctuation\">.</span>get_field<span class=\"token punctuation\">(</span><span class=\"token string\">'first_name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>max_length\n        self<span class=\"token punctuation\">.</span>assertEquals<span class=\"token punctuation\">(</span>max_length<span class=\"token punctuation\">,</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_object_name_is_last_name_comma_first_name</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        author<span class=\"token operator\">=</span>Author<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n        expected_object_name <span class=\"token operator\">=</span> <span class=\"token string\">'%s, %s'</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>author<span class=\"token punctuation\">.</span>last_name<span class=\"token punctuation\">,</span> author<span class=\"token punctuation\">.</span>first_name<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertEquals<span class=\"token punctuation\">(</span>expected_object_name<span class=\"token punctuation\">,</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>author<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_get_absolute_url</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        author<span class=\"token operator\">=</span>Author<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">#This will also fail if the urlconf is not defined.</span>\n        self<span class=\"token punctuation\">.</span>assertEquals<span class=\"token punctuation\">(</span>author<span class=\"token punctuation\">.</span>get_absolute_url<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token string\">'/catalog/author/1'</span><span class=\"token punctuation\">)</span></code></pre></div>\n\n<p>Тесты полей проверяют значения текстовых меток (<code>verbose_name</code>), включая их ожидаемую длину. Все методы имеют описательные имена, а их логика придерживается одной и той же структуры:</p>\n\n<div class=\"code-example\"><pre class=\"brush: python notranslate\"><code><span class=\"token comment\"># Получение объекта для тестирования</span>\nauthor<span class=\"token operator\">=</span>Author<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># Получение метаданных поля для получения необходимых значений</span>\nfield_label <span class=\"token operator\">=</span> author<span class=\"token punctuation\">.</span>_meta<span class=\"token punctuation\">.</span>get_field<span class=\"token punctuation\">(</span><span class=\"token string\">'first_name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>verbose_name\n\n<span class=\"token comment\"># Сравнить значение с ожидаемым результатом</span>\nself<span class=\"token punctuation\">.</span>assertEquals<span class=\"token punctuation\">(</span>field_label<span class=\"token punctuation\">,</span><span class=\"token string\">'first name'</span><span class=\"token punctuation\">)</span>  </code></pre></div>\n\n<p>Интересно отметить следующее:</p>\n\n<ul>\n <li>Мы не можем получить поле <code>verbose_name</code> напрямую через <code>author.first_name.verbose_name</code>, потому что <code>author.first_name</code> является <em>строкой</em>. Вместо этого, нам надо использовать атрибут <code>_meta</code> объекта автора для получения того экземпляра поля, который будет использоваться для получения дополнительной информации.</li>\n <li>Мы выбрали метод <code>assertEquals(field_label,'first name')</code> вместо  <code>assertTrue(field_label == 'first name')</code>, потому что, в случае провала теста, в выводе будет указано какое именно значение содержит метка и это немного облегчит нам задачу по отладке кода.</li>\n</ul>\n\n<div class=\"note notecard\" id=\"sect11\">\n<p><strong>Примечание:</strong> Тесты для текстовых меток <code>last_name</code> и <code>date_of_birth</code>, а также тест длины поля <code>last_name</code> были опущены. Добавьте свою версию этих тестов,  соблюдая соглашение об именовании и следуя структуре логики, представленной выше.</p>\n</div>\n\n<p>Кроме того, нам надо провести тесты наших собственных методов. Они просто проверяют, что имена объектов имеют следующие значения \"Last Name, First Name\" и что URL-адрес, по которому мы получаем экземпляр <code>Author</code>, такой как ожидается.</p>\n\n<div class=\"code-example\"><pre class=\"brush: python notranslate\"><code><span class=\"token keyword\">def</span> <span class=\"token function\">test_object_name_is_last_name_comma_first_name</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    author<span class=\"token operator\">=</span>Author<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    expected_object_name <span class=\"token operator\">=</span> <span class=\"token string\">'%s, %s'</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>author<span class=\"token punctuation\">.</span>last_name<span class=\"token punctuation\">,</span> author<span class=\"token punctuation\">.</span>first_name<span class=\"token punctuation\">)</span>\n    self<span class=\"token punctuation\">.</span>assertEquals<span class=\"token punctuation\">(</span>expected_object_name<span class=\"token punctuation\">,</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>author<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">test_get_absolute_url</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    author<span class=\"token operator\">=</span>Author<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token builtin\">id</span><span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">#This will also fail if the urlconf is not defined.</span>\n    self<span class=\"token punctuation\">.</span>assertEquals<span class=\"token punctuation\">(</span>author<span class=\"token punctuation\">.</span>get_absolute_url<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token string\">'/catalog/author/1'</span><span class=\"token punctuation\">)</span></code></pre></div>\n\n<p>Теперь запустите тесты. Если вы создали модель Author, в соответствии с разделом о моделях данного руководства, то весьма вероятно, что вы получите сообщение об ошибке для метки <code>date_of_death</code>, как показано ниже. Тест провалился потому что, в соответствии с соглашением Django, первый символ имени метки должен быть в верхнем регистре (Django делает это автоматически).</p>\n\n<div class=\"code-example\"><pre class=\"brush: bash notranslate\"><code><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span><span class=\"token operator\">==</span>\nFAIL: test_date_of_death_label <span class=\"token punctuation\">(</span>catalog.tests.test_models.AuthorModelTest<span class=\"token punctuation\">)</span>\n----------------------------------------------------------------------\nTraceback <span class=\"token punctuation\">(</span>most recent call last<span class=\"token punctuation\">)</span>:\n  File <span class=\"token string\">\"D:\\...\\locallibrary<span class=\"token entity\" title=\"\\c\">\\c</span>atalog<span class=\"token entity\" title=\"\\t\">\\t</span>ests<span class=\"token entity\" title=\"\\t\">\\t</span>est_models.py\"</span>, line <span class=\"token number\">32</span>, <span class=\"token keyword\">in</span> test_date_of_death_label\n    self.assertEquals<span class=\"token punctuation\">(</span>field_label,<span class=\"token string\">'died'</span><span class=\"token punctuation\">)</span>\nAssertionError: <span class=\"token string\">'Died'</span> <span class=\"token operator\">!=</span> <span class=\"token string\">'died'</span>\n- Died\n? ^\n+ died\n? ^</code></pre></div>\n\n<p>Это несущественный баг, но он демонстрирует нам то, что написание тестов может более тщательно проверить все неточности, которые вы можете сделать.</p>\n\n<div class=\"note notecard\" id=\"sect12\">\n<p><strong>Примечание: </strong>Измените значение метки для поля date_of_death (/catalog/models.py) на \"died\" и перезапустите тесты.</p>\n</div>\n\n<p>Тот же подход применяется к тестированию других моделей. Самостоятельно создайте свои собственные тесты для оставшихся моделей.</p>"}},{"type":"prose","value":{"id":"формы","title":"Формы","isH3":true,"content":"<p>Смысл проведения тестов для форм тот же, что и для моделей; надо проверить весь собственный код и другие особенности проекта, но не то, что касается фреймворка, или сторонних библиотек.</p>\n\n<p>В основном это означает, что вы должны протестировать то, что формы имеют соответствующие поля и что они показываются с соответствующими метками и вспомогательными текстами. Вам не надо проверять то, что Django правильно осуществляет валидацию полей (если только вы не создали своё собственное поле и валидацию) — то есть вам не надо проверять что, например, поле ввода электронного адреса принимает только электронного адреса. Но вы должны протестировать каждую дополнительную валидацию, которую вы добавляете для полей и любые сообщения, который ваш код генерирует в случае ошибок.</p>\n\n<p>Рассмотрим форму для обновления книг. Она имеет только одно поле обновления даты, которое будет иметь текстовую метку и вспомогательный текст, который вам надо проверить.</p>\n\n<div class=\"code-example\"><pre class=\"brush: python notranslate\"><code><span class=\"token keyword\">class</span> <span class=\"token class-name\">RenewBookForm</span><span class=\"token punctuation\">(</span>forms<span class=\"token punctuation\">.</span>Form<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"\n    Форма обновления книг для библиотекарей\n    \"\"\"</span>\n    renewal_date <span class=\"token operator\">=</span> forms<span class=\"token punctuation\">.</span>DateField<span class=\"token punctuation\">(</span>help_text<span class=\"token operator\">=</span><span class=\"token string\">\"Enter a date between now and 4 weeks (default 3).\"</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">clean_renewal_date</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        data <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>cleaned_data<span class=\"token punctuation\">[</span><span class=\"token string\">'renewal_date'</span><span class=\"token punctuation\">]</span>\n\n        <span class=\"token comment\">#Проверка, что дата не в прошлом.</span>\n        <span class=\"token keyword\">if</span> data <span class=\"token operator\">&lt;</span> datetime<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span>today<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">raise</span> ValidationError<span class=\"token punctuation\">(</span>_<span class=\"token punctuation\">(</span><span class=\"token string\">'Invalid date - renewal in past'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">#Если дата в \"далёком\" будущем (+4 недели)</span>\n        <span class=\"token keyword\">if</span> data <span class=\"token operator\">&gt;</span> datetime<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span>today<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> datetime<span class=\"token punctuation\">.</span>timedelta<span class=\"token punctuation\">(</span>weeks<span class=\"token operator\">=</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">raise</span> ValidationError<span class=\"token punctuation\">(</span>_<span class=\"token punctuation\">(</span><span class=\"token string\">'Invalid date - renewal more than 4 weeks ahead'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\"># Всегда надо возвращать очищенные данные.</span>\n        <span class=\"token keyword\">return</span> data</code></pre></div>\n\n<p>Откройте файл <strong>/catalog/tests/test_forms.py</strong> и замените весь существующий в нем код, следующим кодом теста для формы <code>RenewBookForm</code>. Мы начали его с импорта нашей формы и некоторых библиотек Python и Django, которые помогут нам провести тесты. Затем, тем же способом как мы делали для моделей, объявляем тестовый класс нашей формы, то есть применяя описательное имя класс наследника <code>TestCase</code>.</p>\n\n<div class=\"code-example\"><pre class=\"brush: python notranslate\"><code><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>test <span class=\"token keyword\">import</span> TestCase\n\n<span class=\"token comment\"># Создайте ваши тесты здесь</span>\n\n<span class=\"token keyword\">import</span> datetime\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>utils <span class=\"token keyword\">import</span> timezone\n<span class=\"token keyword\">from</span> catalog<span class=\"token punctuation\">.</span>forms <span class=\"token keyword\">import</span> RenewBookForm\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">RenewBookFormTest</span><span class=\"token punctuation\">(</span>TestCase<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_renew_form_date_field_label</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        form <span class=\"token operator\">=</span> RenewBookForm<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertTrue<span class=\"token punctuation\">(</span>form<span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">[</span><span class=\"token string\">'renewal_date'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>label <span class=\"token operator\">==</span> <span class=\"token boolean\">None</span> <span class=\"token keyword\">or</span> form<span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">[</span><span class=\"token string\">'renewal_date'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>label <span class=\"token operator\">==</span> <span class=\"token string\">'renewal date'</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_renew_form_date_field_help_text</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        form <span class=\"token operator\">=</span> RenewBookForm<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span>form<span class=\"token punctuation\">.</span>fields<span class=\"token punctuation\">[</span><span class=\"token string\">'renewal_date'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>help_text<span class=\"token punctuation\">,</span><span class=\"token string\">'Enter a date between now and 4 weeks (default 3).'</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_renew_form_date_in_past</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        date <span class=\"token operator\">=</span> datetime<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span>today<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> datetime<span class=\"token punctuation\">.</span>timedelta<span class=\"token punctuation\">(</span>days<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n        form_data <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'renewal_date'</span><span class=\"token punctuation\">:</span> date<span class=\"token punctuation\">}</span>\n        form <span class=\"token operator\">=</span> RenewBookForm<span class=\"token punctuation\">(</span>data<span class=\"token operator\">=</span>form_data<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertFalse<span class=\"token punctuation\">(</span>form<span class=\"token punctuation\">.</span>is_valid<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_renew_form_date_too_far_in_future</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        date <span class=\"token operator\">=</span> datetime<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span>today<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> datetime<span class=\"token punctuation\">.</span>timedelta<span class=\"token punctuation\">(</span>weeks<span class=\"token operator\">=</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> datetime<span class=\"token punctuation\">.</span>timedelta<span class=\"token punctuation\">(</span>days<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n        form_data <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'renewal_date'</span><span class=\"token punctuation\">:</span> date<span class=\"token punctuation\">}</span>\n        form <span class=\"token operator\">=</span> RenewBookForm<span class=\"token punctuation\">(</span>data<span class=\"token operator\">=</span>form_data<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertFalse<span class=\"token punctuation\">(</span>form<span class=\"token punctuation\">.</span>is_valid<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_renew_form_date_today</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        date <span class=\"token operator\">=</span> datetime<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span>today<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        form_data <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'renewal_date'</span><span class=\"token punctuation\">:</span> date<span class=\"token punctuation\">}</span>\n        form <span class=\"token operator\">=</span> RenewBookForm<span class=\"token punctuation\">(</span>data<span class=\"token operator\">=</span>form_data<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertTrue<span class=\"token punctuation\">(</span>form<span class=\"token punctuation\">.</span>is_valid<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_renew_form_date_max</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        date <span class=\"token operator\">=</span> timezone<span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> datetime<span class=\"token punctuation\">.</span>timedelta<span class=\"token punctuation\">(</span>weeks<span class=\"token operator\">=</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span>\n        form_data <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'renewal_date'</span><span class=\"token punctuation\">:</span> date<span class=\"token punctuation\">}</span>\n        form <span class=\"token operator\">=</span> RenewBookForm<span class=\"token punctuation\">(</span>data<span class=\"token operator\">=</span>form_data<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertTrue<span class=\"token punctuation\">(</span>form<span class=\"token punctuation\">.</span>is_valid<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n</code></pre></div>\n\n<p>Первые две функции проверяют текст который должны содержать поля <code>label</code> и <code>help_text</code>. Доступ к полю мы получаем при помощи словаря (то есть, <code>form.fields['renewal_date']</code>). Отметим, что мы должны проверять содержит ли метка значение <code>None</code>, иначе в поле текста метки вы увидите \"<code>None</code>\".</p>\n\n<p>Оставшиеся функции проверяют валидность дат, то есть их нахождение внутри определённого интервала, а также невалидность для значений, которые находятся вне заданного интервала. Для получения исходного значения мы использовали функцию получения текущей даты (<code>datetime.date.today()</code>), а также функцию <code>datetime.timedelta()</code> (которая принимает определённое число дней, или недель). Затем мы просто создали форму, передавая ей наши данные и проверяя её на валидность.</p>\n\n<div class=\"note notecard\" id=\"sect13\">\n<p><strong>Примечание:</strong> В данном примере мы не использовали ни базу данных, ни тестовый клиент. Рассмотрите модификацию этих тестов при помощи класса <a href=\"https://docs.djangoproject.com/en/1.10/topics/testing/tools/#django.test.SimpleTestCase\" class=\"external\" rel=\" noopener\">SimpleTestCase</a>.</p>\n\n<p>Нам также надо бы проверять возникновение ошибок, которые появляются если форма не валидна. Но, обычно, это относится к процессу вывода информации, таким образом, мы позаботимся об этом в следующем разделе.</p>\n</div>\n\n<p>На этом с формами можно закончить; у нас имеются и другие тесты, но они были созданы обобщёнными классами отображения для редактирования! Запустите тесты и убедитесь, что наш код все ещё им соответствует!</p>"}},{"type":"prose","value":{"id":"отображения","title":"Отображения","isH3":true,"content":"<p>Для проверки поведения отображения мы используем тестовый клиент Django <a href=\"https://docs.djangoproject.com/en/1.10/topics/testing/tools/#django.test.Client\" class=\"external\" rel=\" noopener\">Client</a>. Данный класс действует как упрощённый веб-браузер который мы применяем для имитации  <code>GET</code> и <code>POST</code> запросов и проверки ответов. Про ответы мы можем узнать почти все, начиная с низкоуровневого HTTP (итоговые заголовки и коды статусов) и вплоть до применяемых шаблонов, которые используются для HTML-рендера, а также контекста, который передаётся в соответствующий  шаблон. Кроме того, мы можем отследить последовательность перенаправлений (если имеются), проверить URL-адреса и коды статусов на каждом шаге. Все это позволит нам проверить, что каждое отображение выполняет то, что ожидается.</p>\n\n<p>Давайте начнём с одного из простейших отображений которое возвращает список всех авторов. Вы можете его увидеть по URL-адресу <strong>/catalog/authors/</strong> (данный URL-адрес можно найти в разделе приложения catalog,  в файле настроек urls.py по имени  'authors').</p>\n\n<div class=\"code-example\"><pre class=\"brush: python notranslate\"><code><span class=\"token keyword\">class</span> <span class=\"token class-name\">AuthorListView</span><span class=\"token punctuation\">(</span>generic<span class=\"token punctuation\">.</span>ListView<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    model <span class=\"token operator\">=</span> Author\n    paginate_by <span class=\"token operator\">=</span> <span class=\"token number\">10</span>\n</code></pre></div>\n\n<p>Поскольку это обобщённое отображение списка, то почти все за нас делает Django. Если вы доверяете Django, то единственной вещью, которую вам нужно протестировать, является переход к данному отображению по указанному URL-адресу. Таким образом, если вы применяете методику TDD (test-driven development, разработка через тесты), то начните проект с написания тестов, которые будут проверять, что данное отображение выводит всех авторов и, к тому же, например, блоками по 10.</p>\n\n<p>Откройте файл <strong>/catalog/tests/test_views.py</strong> замените все его содержимое на следующий код теста для класса <code>AuthorListView</code>. Как и ранее, мы импортируем нашу модель и некоторые полезные классы. В методе <code>setUpTestData()</code> мы задаём число объектов класса <code>Author</code> которые мы тестируем при постраничном выводе.</p>\n\n<div class=\"code-example\"><pre class=\"brush: python notranslate\"><code><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>test <span class=\"token keyword\">import</span> TestCase\n\n<span class=\"token comment\"># Create your tests here.</span>\n\n<span class=\"token keyword\">from</span> catalog<span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> Author\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> reverse\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">AuthorListViewTest</span><span class=\"token punctuation\">(</span>TestCase<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token decorator annotation punctuation\">@classmethod</span>\n    <span class=\"token keyword\">def</span> <span class=\"token function\">setUpTestData</span><span class=\"token punctuation\">(</span>cls<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\">#Create 13 authors for pagination tests</span>\n        number_of_authors <span class=\"token operator\">=</span> <span class=\"token number\">13</span>\n        <span class=\"token keyword\">for</span> author_num <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>number_of_authors<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            Author<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span>first_name<span class=\"token operator\">=</span><span class=\"token string\">'Christian %s'</span> <span class=\"token operator\">%</span> author_num<span class=\"token punctuation\">,</span> last_name <span class=\"token operator\">=</span> <span class=\"token string\">'Surname %s'</span> <span class=\"token operator\">%</span> author_num<span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_view_url_exists_at_desired_location</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        resp <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'/catalog/authors/'</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>status_code<span class=\"token punctuation\">,</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_view_url_accessible_by_name</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        resp <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>reverse<span class=\"token punctuation\">(</span><span class=\"token string\">'authors'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>status_code<span class=\"token punctuation\">,</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_view_uses_correct_template</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        resp <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>reverse<span class=\"token punctuation\">(</span><span class=\"token string\">'authors'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>status_code<span class=\"token punctuation\">,</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n\n        self<span class=\"token punctuation\">.</span>assertTemplateUsed<span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">,</span> <span class=\"token string\">'catalog/author_list.html'</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_pagination_is_ten</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        resp <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>reverse<span class=\"token punctuation\">(</span><span class=\"token string\">'authors'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>status_code<span class=\"token punctuation\">,</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertTrue<span class=\"token punctuation\">(</span><span class=\"token string\">'is_paginated'</span> <span class=\"token keyword\">in</span> resp<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertTrue<span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">[</span><span class=\"token string\">'is_paginated'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertTrue<span class=\"token punctuation\">(</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">[</span><span class=\"token string\">'author_list'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_lists_all_authors</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\">#Get second page and confirm it has (exactly) remaining 3 items</span>\n        resp <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>reverse<span class=\"token punctuation\">(</span><span class=\"token string\">'authors'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token string\">'?page=2'</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>status_code<span class=\"token punctuation\">,</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertTrue<span class=\"token punctuation\">(</span><span class=\"token string\">'is_paginated'</span> <span class=\"token keyword\">in</span> resp<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertTrue<span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">[</span><span class=\"token string\">'is_paginated'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertTrue<span class=\"token punctuation\">(</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">[</span><span class=\"token string\">'author_list'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">3</span><span class=\"token punctuation\">)</span></code></pre></div>\n\n<p>Все тесты используют клиент (принадлежащего классу <code>TestCase</code>, от которого мы наследовались) для имитации <code>GET</code>-запроса и получения ответа (<code>resp</code>). Первая версия проверяет заданный URL-адрес (заметьте, - просто определённый путь без указания домена), в то время как второй генерирует URL-адрес при помощи его имени, указанного в настройках.</p>\n\n<div class=\"code-example\"><pre class=\"brush: python notranslate\"><code>resp <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'/catalog/authors/'</span><span class=\"token punctuation\">)</span>\nresp <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>reverse<span class=\"token punctuation\">(</span><span class=\"token string\">'authors'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n</code></pre></div>\n\n<p>Когда мы получаем ответ, то мы извлекаем код статуса, используемый шаблон, \"включён\" ли постраничный вывод, количество элементов в подмножестве (на странице) и общее число элементов.</p>\n\n<p>Наиболее интересной переменной является <code>resp.context</code>, которая является объектом контекста, который передаётся шаблону из отображения. Он (объект контекста) очень полезен для тестов, поскольку позволяет нам убедиться, что наш шаблон получает все данные которые ему необходимы. Другими словами мы можем проверить, что мы используем правильный шаблон с данными, которые проделывают долгий путь проверок чтобы соответствовать данному шаблону.</p>\n\n<h4 id=\"отображения_и_регистрация_пользователей\">Отображения и регистрация пользователей</h4>\n\n<p>В некоторых случаях вам нужно провести тесты отображений к которым имеют доступ только зарегистрированные пользователи. Например, <code>LoanedBooksByUserListView</code> очень похоже на наше предыдущее отображение, но доступно только для залогинившихся пользователей и показывает только те записи (<code>BookInstance)</code>, которые соответствуют текущему пользователю, имеют статус 'on loan' (книга взята домой), а также забронированы.</p>\n\n<div class=\"code-example\"><pre class=\"brush: python notranslate\"><code><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>contrib<span class=\"token punctuation\">.</span>auth<span class=\"token punctuation\">.</span>mixins <span class=\"token keyword\">import</span> LoginRequiredMixin\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">LoanedBooksByUserListView</span><span class=\"token punctuation\">(</span>LoginRequiredMixin<span class=\"token punctuation\">,</span>generic<span class=\"token punctuation\">.</span>ListView<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"\n    Обобщённый класс отображения списка взятых книг текущим пользователем\n    \"\"\"</span>\n    model <span class=\"token operator\">=</span> BookInstance\n    template_name <span class=\"token operator\">=</span><span class=\"token string\">'catalog/bookinstance_list_borrowed_user.html'</span>\n    paginate_by <span class=\"token operator\">=</span> <span class=\"token number\">10</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">get_queryset</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">return</span> BookInstance<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>borrower<span class=\"token operator\">=</span>self<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>status__exact<span class=\"token operator\">=</span><span class=\"token string\">'o'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>order_by<span class=\"token punctuation\">(</span><span class=\"token string\">'due_back'</span><span class=\"token punctuation\">)</span></code></pre></div>\n\n<p>Добавьте тестовый код следующего фрагмента в <strong>/catalog/tests/test_views.py</strong>. В нем, для создания нескольких аккаунтов и  объектов <code>BookInstance</code> которые будут использоваться в дальнейших тестах, мы используем метод <code>SetUp()</code> (вместе с соответствующими книгами и другими записями). Половина книг бронируется  тестовыми пользователями, но в начале для них всех мы устанавливаем статус \"доступно\". Использование метода <code>SetUp()</code> предпочтительнее чем <code>setUpTestData()</code>, поскольку в дальнейшем мы будем модифицировать некоторые объекты.</p>\n\n<div class=\"note notecard\" id=\"sect14\">\n<p><strong>Примечание:</strong> Метод <code>setUp()</code> создаёт книгу с заданным языком <code>Language</code>, но <em>ваш</em> код может не включать в себя модель <code>Language</code>, поскольку это было <em>домашним заданием</em>. В таком случае просто закомментируйте соответствующие строки. Поступите также и в следующем разделе, посвящённом <code>RenewBookInstancesViewTest.</code></p>\n</div>\n\n<div class=\"code-example\"><pre class=\"brush: python notranslate\"><code><span class=\"token keyword\">import</span> datetime\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>utils <span class=\"token keyword\">import</span> timezone\n\n<span class=\"token keyword\">from</span> catalog<span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> BookInstance<span class=\"token punctuation\">,</span> Book<span class=\"token punctuation\">,</span> Genre<span class=\"token punctuation\">,</span> Language\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>contrib<span class=\"token punctuation\">.</span>auth<span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> User <span class=\"token comment\"># Необходимо для представления User как borrower</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">LoanedBookInstancesByUserListViewTest</span><span class=\"token punctuation\">(</span>TestCase<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">setUp</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># Создание двух пользователей</span>\n        test_user1 <span class=\"token operator\">=</span> User<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create_user<span class=\"token punctuation\">(</span>username<span class=\"token operator\">=</span><span class=\"token string\">'testuser1'</span><span class=\"token punctuation\">,</span> password<span class=\"token operator\">=</span><span class=\"token string\">'12345'</span><span class=\"token punctuation\">)</span>\n        test_user1<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        test_user2 <span class=\"token operator\">=</span> User<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create_user<span class=\"token punctuation\">(</span>username<span class=\"token operator\">=</span><span class=\"token string\">'testuser2'</span><span class=\"token punctuation\">,</span> password<span class=\"token operator\">=</span><span class=\"token string\">'12345'</span><span class=\"token punctuation\">)</span>\n        test_user2<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\"># Создание книги</span>\n        test_author <span class=\"token operator\">=</span> Author<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span>first_name<span class=\"token operator\">=</span><span class=\"token string\">'John'</span><span class=\"token punctuation\">,</span> last_name<span class=\"token operator\">=</span><span class=\"token string\">'Smith'</span><span class=\"token punctuation\">)</span>\n        test_genre <span class=\"token operator\">=</span> Genre<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">'Fantasy'</span><span class=\"token punctuation\">)</span>\n        test_language <span class=\"token operator\">=</span> Language<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">'English'</span><span class=\"token punctuation\">)</span>\n        test_book <span class=\"token operator\">=</span> Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span>title<span class=\"token operator\">=</span><span class=\"token string\">'Book Title'</span><span class=\"token punctuation\">,</span> summary <span class=\"token operator\">=</span> <span class=\"token string\">'My book summary'</span><span class=\"token punctuation\">,</span> isbn<span class=\"token operator\">=</span><span class=\"token string\">'ABCDEFG'</span><span class=\"token punctuation\">,</span> author<span class=\"token operator\">=</span>test_author<span class=\"token punctuation\">,</span> language<span class=\"token operator\">=</span>test_language<span class=\"token punctuation\">)</span>\n        <span class=\"token comment\"># Create genre as a post-step</span>\n        genre_objects_for_book <span class=\"token operator\">=</span> Genre<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        test_book<span class=\"token punctuation\">.</span>genre<span class=\"token punctuation\">.</span><span class=\"token builtin\">set</span><span class=\"token punctuation\">(</span>genre_objects_for_book<span class=\"token punctuation\">)</span> <span class=\"token comment\"># Присвоение типов many-to-many напрямую недопустимо</span>\n        test_book<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\"># Создание 30 объектов BookInstance</span>\n        number_of_book_copies <span class=\"token operator\">=</span> <span class=\"token number\">30</span>\n        <span class=\"token keyword\">for</span> book_copy <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>number_of_book_copies<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            return_date<span class=\"token operator\">=</span> timezone<span class=\"token punctuation\">.</span>now<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> datetime<span class=\"token punctuation\">.</span>timedelta<span class=\"token punctuation\">(</span>days<span class=\"token operator\">=</span>book_copy<span class=\"token operator\">%</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n            <span class=\"token keyword\">if</span> book_copy <span class=\"token operator\">%</span> <span class=\"token number\">2</span><span class=\"token punctuation\">:</span>\n                the_borrower<span class=\"token operator\">=</span>test_user1\n            <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n                the_borrower<span class=\"token operator\">=</span>test_user2\n            status<span class=\"token operator\">=</span><span class=\"token string\">'m'</span>\n            BookInstance<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span>book<span class=\"token operator\">=</span>test_book<span class=\"token punctuation\">,</span>imprint<span class=\"token operator\">=</span><span class=\"token string\">'Unlikely Imprint, 2016'</span><span class=\"token punctuation\">,</span> due_back<span class=\"token operator\">=</span>return_date<span class=\"token punctuation\">,</span> borrower<span class=\"token operator\">=</span>the_borrower<span class=\"token punctuation\">,</span> status<span class=\"token operator\">=</span>status<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_redirect_if_not_logged_in</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        resp <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>reverse<span class=\"token punctuation\">(</span><span class=\"token string\">'my-borrowed'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertRedirects<span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">,</span> <span class=\"token string\">'/accounts/login/?next=/catalog/mybooks/'</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_logged_in_uses_correct_template</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        login <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>login<span class=\"token punctuation\">(</span>username<span class=\"token operator\">=</span><span class=\"token string\">'testuser1'</span><span class=\"token punctuation\">,</span> password<span class=\"token operator\">=</span><span class=\"token string\">'12345'</span><span class=\"token punctuation\">)</span>\n        resp <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>reverse<span class=\"token punctuation\">(</span><span class=\"token string\">'my-borrowed'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\"># Проверка что пользователь залогинился</span>\n        self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">[</span><span class=\"token string\">'user'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'testuser1'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\"># Проверка ответа на запрос</span>\n        self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>status_code<span class=\"token punctuation\">,</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\"># Проверка того, что мы используем правильный шаблон</span>\n        self<span class=\"token punctuation\">.</span>assertTemplateUsed<span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">,</span> <span class=\"token string\">'catalog/bookinstance_list_borrowed_user.html'</span><span class=\"token punctuation\">)</span>\n</code></pre></div>\n\n<p>Если пользователь не залогирован то, чтобы убедиться в том что отображение перейдёт на страницу входа (логирования), мы используем метод <code>assertRedirects</code>, что продемонстрировано в методе <code>test_redirect_if_not_logged_in()</code>. Затем мы осуществляем вход для пользователя и проверяем что полученный статус <code>status_code</code> равен 200 (успешно). </p>\n\n<p>Остальные тесты проверяют, соответственно, что наше отображение показывает только те книги которые взяты текущим пользователем. Скопируйте код, показанный ниже, в нижнюю часть предыдущего класса.</p>\n\n<div class=\"code-example\"><pre class=\"brush: python notranslate\"><code>    <span class=\"token keyword\">def</span> <span class=\"token function\">test_only_borrowed_books_in_list</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        login <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>login<span class=\"token punctuation\">(</span>username<span class=\"token operator\">=</span><span class=\"token string\">'testuser1'</span><span class=\"token punctuation\">,</span> password<span class=\"token operator\">=</span><span class=\"token string\">'12345'</span><span class=\"token punctuation\">)</span>\n        resp <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>reverse<span class=\"token punctuation\">(</span><span class=\"token string\">'my-borrowed'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\">#Проверка, что пользователь залогинился</span>\n        self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">[</span><span class=\"token string\">'user'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'testuser1'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">#Check that we got a response \"success\"</span>\n        self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>status_code<span class=\"token punctuation\">,</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\">#Проверка, что изначально у нас нет книг в списке</span>\n        self<span class=\"token punctuation\">.</span>assertTrue<span class=\"token punctuation\">(</span><span class=\"token string\">'bookinstance_list'</span> <span class=\"token keyword\">in</span> resp<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">[</span><span class=\"token string\">'bookinstance_list'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\">#Теперь все книги \"взяты на прокат\"</span>\n        get_ten_books <span class=\"token operator\">=</span> BookInstance<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">10</span><span class=\"token punctuation\">]</span>\n\n        <span class=\"token keyword\">for</span> copy <span class=\"token keyword\">in</span> get_ten_books<span class=\"token punctuation\">:</span>\n            copy<span class=\"token punctuation\">.</span>status<span class=\"token operator\">=</span><span class=\"token string\">'o'</span>\n            copy<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\">#Проверка, что все забронированные книги в списке</span>\n        resp <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>reverse<span class=\"token punctuation\">(</span><span class=\"token string\">'my-borrowed'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">#Проверка, что пользователь залогинился</span>\n        self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">[</span><span class=\"token string\">'user'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'testuser1'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">#Проверка успешности ответа</span>\n        self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>status_code<span class=\"token punctuation\">,</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n\n        self<span class=\"token punctuation\">.</span>assertTrue<span class=\"token punctuation\">(</span><span class=\"token string\">'bookinstance_list'</span> <span class=\"token keyword\">in</span> resp<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\">#Подтверждение, что все книги принадлежат testuser1 и взяты \"на прокат\"</span>\n        <span class=\"token keyword\">for</span> bookitem <span class=\"token keyword\">in</span> resp<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">[</span><span class=\"token string\">'bookinstance_list'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>\n            self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">[</span><span class=\"token string\">'user'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> bookitem<span class=\"token punctuation\">.</span>borrower<span class=\"token punctuation\">)</span>\n            self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span><span class=\"token string\">'o'</span><span class=\"token punctuation\">,</span> bookitem<span class=\"token punctuation\">.</span>status<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_pages_ordered_by_due_date</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n        <span class=\"token comment\">#Изменение статуса на \"в прокате\"</span>\n        <span class=\"token keyword\">for</span> copy <span class=\"token keyword\">in</span> BookInstance<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            copy<span class=\"token punctuation\">.</span>status<span class=\"token operator\">=</span><span class=\"token string\">'o'</span>\n            copy<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n        login <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>login<span class=\"token punctuation\">(</span>username<span class=\"token operator\">=</span><span class=\"token string\">'testuser1'</span><span class=\"token punctuation\">,</span> password<span class=\"token operator\">=</span><span class=\"token string\">'12345'</span><span class=\"token punctuation\">)</span>\n        resp <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>reverse<span class=\"token punctuation\">(</span><span class=\"token string\">'my-borrowed'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\">#Пользователь залогинился</span>\n        self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">[</span><span class=\"token string\">'user'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'testuser1'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">#Check that we got a response \"success\"</span>\n        self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>status_code<span class=\"token punctuation\">,</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\">#Подтверждение, что из всего списка показывается только 10 экземпляров</span>\n        self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">[</span><span class=\"token string\">'bookinstance_list'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n\n        last_date<span class=\"token operator\">=</span><span class=\"token number\">0</span>\n        <span class=\"token keyword\">for</span> copy <span class=\"token keyword\">in</span> resp<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">[</span><span class=\"token string\">'bookinstance_list'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">if</span> last_date<span class=\"token operator\">==</span><span class=\"token number\">0</span><span class=\"token punctuation\">:</span>\n                last_date<span class=\"token operator\">=</span>copy<span class=\"token punctuation\">.</span>due_back\n            <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n                self<span class=\"token punctuation\">.</span>assertTrue<span class=\"token punctuation\">(</span>last_date <span class=\"token operator\">&lt;=</span> copy<span class=\"token punctuation\">.</span>due_back<span class=\"token punctuation\">)</span></code></pre></div>\n\n<p>Если хотите, то вы, безусловно, можете добавить тесты проверяющие постраничный вывод!</p>\n\n<h4 id=\"тестирование_форм_и_отображений\">Тестирование форм и отображений</h4>\n\n<p>Процесс тестирования отображений с формами немного более сложен, чем в представленных ранее случаях, поскольку вам надо протестировать большее количество кода: начальное состояние показа формы, показ формы и её данных в случае ошибок, а также показ формы в случае успеха. Хорошей новостью является то, что мы применяем клиент для тестирования практически тем же способом, как мы делали это в случае отображений, которые отвечают только за вывод информации.</p>\n\n<p>В качестве демонстрации давайте напишем некоторые тесты для отображения, которые отвечают за обновление книг(<code>renew_book_librarian()</code>):</p>\n\n<div class=\"code-example\"><pre class=\"brush: python notranslate\"><code><span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span>forms <span class=\"token keyword\">import</span> RenewBookForm\n\n<span class=\"token decorator annotation punctuation\">@permission_required</span><span class=\"token punctuation\">(</span><span class=\"token string\">'catalog.can_mark_returned'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">def</span> <span class=\"token function\">renew_book_librarian</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> pk<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token triple-quoted-string string\">\"\"\"\n    Функция отображения обновления экземпляра BookInstance библиотекарем\n    \"\"\"</span>\n    book_inst<span class=\"token operator\">=</span>get_object_or_404<span class=\"token punctuation\">(</span>BookInstance<span class=\"token punctuation\">,</span> pk <span class=\"token operator\">=</span> pk<span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\"># Если это POST-запрос, тогда обработать данные формы</span>\n    <span class=\"token keyword\">if</span> request<span class=\"token punctuation\">.</span>method <span class=\"token operator\">==</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">:</span>\n\n        <span class=\"token comment\"># Создать объект формы и заполнить её данными из запроса (связывание/биндинг):</span>\n        form <span class=\"token operator\">=</span> RenewBookForm<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>POST<span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\"># Проверка валидности формы:</span>\n        <span class=\"token keyword\">if</span> form<span class=\"token punctuation\">.</span>is_valid<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            <span class=\"token comment\"># process the data in form.cleaned_data as required (here we just write it to the model due_back field)</span>\n            book_inst<span class=\"token punctuation\">.</span>due_back <span class=\"token operator\">=</span> form<span class=\"token punctuation\">.</span>cleaned_data<span class=\"token punctuation\">[</span><span class=\"token string\">'renewal_date'</span><span class=\"token punctuation\">]</span>\n            book_inst<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n            <span class=\"token comment\"># переход по URL-адресу:</span>\n            <span class=\"token keyword\">return</span> HttpResponseRedirect<span class=\"token punctuation\">(</span>reverse<span class=\"token punctuation\">(</span><span class=\"token string\">'all-borrowed'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span>\n\n    <span class=\"token comment\"># Если это GET-запрос (или что-то ещё), то создаём форму по умолчанию</span>\n    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n        proposed_renewal_date <span class=\"token operator\">=</span> datetime<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span>today<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> datetime<span class=\"token punctuation\">.</span>timedelta<span class=\"token punctuation\">(</span>weeks<span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n        form <span class=\"token operator\">=</span> RenewBookForm<span class=\"token punctuation\">(</span>initial<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'renewal_date'</span><span class=\"token punctuation\">:</span> proposed_renewal_date<span class=\"token punctuation\">,</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">return</span> render<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token string\">'catalog/book_renew_librarian.html'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'form'</span><span class=\"token punctuation\">:</span> form<span class=\"token punctuation\">,</span> <span class=\"token string\">'bookinst'</span><span class=\"token punctuation\">:</span>book_inst<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n\n<p>Нам надо проверить что к данному отображению имеют доступ только те пользователи, которые имеют разрешение типа <code>can_mark_returned</code>, а кроме того, что пользователи перенаправляются на страницу ошибки HTTP 404  если они пытаются обновить экземпляр книги  <code>BookInstance</code>, который не существует. Мы должны проверить что начальное значение формы соответствует дате через 3 недели в будущем, а также то, что если форма прошла валидацию, то мы переходим на страницу отображения книг \"all-borrowed\" (забронированных). Для тестов, отвечающих за проверку \"провалов\", мы также должны удостовериться что они отправляют соответствующие сообщения об ошибках.</p>\n\n<p>В нижнюю часть файла <strong>/catalog/tests/test_views.py</strong> добавьте класс тестирования (показан во фрагменте, ниже). Он создаёт двух пользователей и два экземпляра книги, но только один пользователь получает необходимый доступ к соответствующему отображению. Код, который \"присваивает\" соответствующий доступ, выделен в коде жирным:</p>\n\n<div class=\"code-example\"><pre class=\"brush: python notranslate\"><code><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>contrib<span class=\"token punctuation\">.</span>auth<span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> Permission <span class=\"token comment\"># Required to grant the permission needed to set a book as returned.</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">RenewBookInstancesViewTest</span><span class=\"token punctuation\">(</span>TestCase<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">setUp</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\">#Создание пользователя</span>\n        test_user1 <span class=\"token operator\">=</span> User<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create_user<span class=\"token punctuation\">(</span>username<span class=\"token operator\">=</span><span class=\"token string\">'testuser1'</span><span class=\"token punctuation\">,</span> password<span class=\"token operator\">=</span><span class=\"token string\">'12345'</span><span class=\"token punctuation\">)</span>\n        test_user1<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n        test_user2 <span class=\"token operator\">=</span> User<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create_user<span class=\"token punctuation\">(</span>username<span class=\"token operator\">=</span><span class=\"token string\">'testuser2'</span><span class=\"token punctuation\">,</span> password<span class=\"token operator\">=</span><span class=\"token string\">'12345'</span><span class=\"token punctuation\">)</span>\n        test_user2<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        permission <span class=\"token operator\">=</span> Permission<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">'Set book as returned'</span><span class=\"token punctuation\">)</span>\n        test_user2<span class=\"token punctuation\">.</span>user_permissions<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span>permission<span class=\"token punctuation\">)</span>\n        test_user2<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\">#Создание книги</span>\n        test_author <span class=\"token operator\">=</span> Author<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span>first_name<span class=\"token operator\">=</span><span class=\"token string\">'John'</span><span class=\"token punctuation\">,</span> last_name<span class=\"token operator\">=</span><span class=\"token string\">'Smith'</span><span class=\"token punctuation\">)</span>\n        test_genre <span class=\"token operator\">=</span> Genre<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">'Fantasy'</span><span class=\"token punctuation\">)</span>\n        test_language <span class=\"token operator\">=</span> Language<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">'English'</span><span class=\"token punctuation\">)</span>\n        test_book <span class=\"token operator\">=</span> Book<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span>title<span class=\"token operator\">=</span><span class=\"token string\">'Book Title'</span><span class=\"token punctuation\">,</span> summary <span class=\"token operator\">=</span> <span class=\"token string\">'My book summary'</span><span class=\"token punctuation\">,</span> isbn<span class=\"token operator\">=</span><span class=\"token string\">'ABCDEFG'</span><span class=\"token punctuation\">,</span> author<span class=\"token operator\">=</span>test_author<span class=\"token punctuation\">,</span> language<span class=\"token operator\">=</span>test_language<span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">#Создание жанра Create genre as a post-step</span>\n        genre_objects_for_book <span class=\"token operator\">=</span> Genre<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        test_book<span class=\"token punctuation\">.</span>genre<span class=\"token operator\">=</span>genre_objects_for_book\n        test_book<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\">#Создание объекта BookInstance для для пользователя test_user1</span>\n        return_date<span class=\"token operator\">=</span> datetime<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span>today<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> datetime<span class=\"token punctuation\">.</span>timedelta<span class=\"token punctuation\">(</span>days<span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>test_bookinstance1<span class=\"token operator\">=</span>BookInstance<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span>book<span class=\"token operator\">=</span>test_book<span class=\"token punctuation\">,</span>imprint<span class=\"token operator\">=</span><span class=\"token string\">'Unlikely Imprint, 2016'</span><span class=\"token punctuation\">,</span> due_back<span class=\"token operator\">=</span>return_date<span class=\"token punctuation\">,</span> borrower<span class=\"token operator\">=</span>test_user1<span class=\"token punctuation\">,</span> status<span class=\"token operator\">=</span><span class=\"token string\">'o'</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\">#Создание объекта BookInstance для для пользователя test_user2</span>\n        return_date<span class=\"token operator\">=</span> datetime<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span>today<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> datetime<span class=\"token punctuation\">.</span>timedelta<span class=\"token punctuation\">(</span>days<span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>test_bookinstance2<span class=\"token operator\">=</span>BookInstance<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span>book<span class=\"token operator\">=</span>test_book<span class=\"token punctuation\">,</span>imprint<span class=\"token operator\">=</span><span class=\"token string\">'Unlikely Imprint, 2016'</span><span class=\"token punctuation\">,</span> due_back<span class=\"token operator\">=</span>return_date<span class=\"token punctuation\">,</span> borrower<span class=\"token operator\">=</span>test_user2<span class=\"token punctuation\">,</span> status<span class=\"token operator\">=</span><span class=\"token string\">'o'</span><span class=\"token punctuation\">)</span></code></pre></div>\n\n<p>В нижнюю часть класса тестирования добавьте следующие методы (из следующего фрагмента). Они проверяют, что только пользователь с соответствующим доступом (<em>testuser2</em>) имеет доступ к отображению. Мы проверяем все случаи: когда пользователь не залогинился, когда залогинился, но не имеет соответствующего доступа, когда имеет доступ, но не является заёмщиком книги (тест должен быть успешным), а также, что произойдёт если попытаться получить доступ к книге <code>BookInstance</code> которой не существует. Кроме того, мы проверяем то, что используется правильный (необходимый) шаблон.</p>\n\n<div class=\"code-example\"><pre class=\"brush: python notranslate\"><code>    <span class=\"token keyword\">def</span> <span class=\"token function\">test_redirect_if_not_logged_in</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        resp <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>reverse<span class=\"token punctuation\">(</span><span class=\"token string\">'renew-book-librarian'</span><span class=\"token punctuation\">,</span> kwargs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'pk'</span><span class=\"token punctuation\">:</span>self<span class=\"token punctuation\">.</span>test_bookinstance1<span class=\"token punctuation\">.</span>pk<span class=\"token punctuation\">,</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span>\n        <span class=\"token comment\">#Manually check redirect (Can't use assertRedirect, because the redirect URL is unpredictable)</span>\n        self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span> resp<span class=\"token punctuation\">.</span>status_code<span class=\"token punctuation\">,</span><span class=\"token number\">302</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertTrue<span class=\"token punctuation\">(</span> resp<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">.</span>startswith<span class=\"token punctuation\">(</span><span class=\"token string\">'/accounts/login/'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_redirect_if_logged_in_but_not_correct_permission</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        login <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>login<span class=\"token punctuation\">(</span>username<span class=\"token operator\">=</span><span class=\"token string\">'testuser1'</span><span class=\"token punctuation\">,</span> password<span class=\"token operator\">=</span><span class=\"token string\">'12345'</span><span class=\"token punctuation\">)</span>\n        resp <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>reverse<span class=\"token punctuation\">(</span><span class=\"token string\">'renew-book-librarian'</span><span class=\"token punctuation\">,</span> kwargs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'pk'</span><span class=\"token punctuation\">:</span>self<span class=\"token punctuation\">.</span>test_bookinstance1<span class=\"token punctuation\">.</span>pk<span class=\"token punctuation\">,</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\">#Manually check redirect (Can't use assertRedirect, because the redirect URL is unpredictable)</span>\n        self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span> resp<span class=\"token punctuation\">.</span>status_code<span class=\"token punctuation\">,</span><span class=\"token number\">302</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertTrue<span class=\"token punctuation\">(</span> resp<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">.</span>startswith<span class=\"token punctuation\">(</span><span class=\"token string\">'/accounts/login/'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_logged_in_with_permission_borrowed_book</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        login <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>login<span class=\"token punctuation\">(</span>username<span class=\"token operator\">=</span><span class=\"token string\">'testuser2'</span><span class=\"token punctuation\">,</span> password<span class=\"token operator\">=</span><span class=\"token string\">'12345'</span><span class=\"token punctuation\">)</span>\n        resp <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>reverse<span class=\"token punctuation\">(</span><span class=\"token string\">'renew-book-librarian'</span><span class=\"token punctuation\">,</span> kwargs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'pk'</span><span class=\"token punctuation\">:</span>self<span class=\"token punctuation\">.</span>test_bookinstance2<span class=\"token punctuation\">.</span>pk<span class=\"token punctuation\">,</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\">#Check that it lets us login - this is our book and we have the right permissions.</span>\n        self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span> resp<span class=\"token punctuation\">.</span>status_code<span class=\"token punctuation\">,</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_logged_in_with_permission_another_users_borrowed_book</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        login <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>login<span class=\"token punctuation\">(</span>username<span class=\"token operator\">=</span><span class=\"token string\">'testuser2'</span><span class=\"token punctuation\">,</span> password<span class=\"token operator\">=</span><span class=\"token string\">'12345'</span><span class=\"token punctuation\">)</span>\n        resp <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>reverse<span class=\"token punctuation\">(</span><span class=\"token string\">'renew-book-librarian'</span><span class=\"token punctuation\">,</span> kwargs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'pk'</span><span class=\"token punctuation\">:</span>self<span class=\"token punctuation\">.</span>test_bookinstance1<span class=\"token punctuation\">.</span>pk<span class=\"token punctuation\">,</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\">#Check that it lets us login. We're a librarian, so we can view any users book</span>\n        self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span> resp<span class=\"token punctuation\">.</span>status_code<span class=\"token punctuation\">,</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_HTTP404_for_invalid_book_if_logged_in</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">import</span> uuid\n        test_uid <span class=\"token operator\">=</span> uuid<span class=\"token punctuation\">.</span>uuid4<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#unlikely UID to match our bookinstance!</span>\n        login <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>login<span class=\"token punctuation\">(</span>username<span class=\"token operator\">=</span><span class=\"token string\">'testuser2'</span><span class=\"token punctuation\">,</span> password<span class=\"token operator\">=</span><span class=\"token string\">'12345'</span><span class=\"token punctuation\">)</span>\n        resp <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>reverse<span class=\"token punctuation\">(</span><span class=\"token string\">'renew-book-librarian'</span><span class=\"token punctuation\">,</span> kwargs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'pk'</span><span class=\"token punctuation\">:</span>test_uid<span class=\"token punctuation\">,</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span> resp<span class=\"token punctuation\">.</span>status_code<span class=\"token punctuation\">,</span><span class=\"token number\">404</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_uses_correct_template</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        login <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>login<span class=\"token punctuation\">(</span>username<span class=\"token operator\">=</span><span class=\"token string\">'testuser2'</span><span class=\"token punctuation\">,</span> password<span class=\"token operator\">=</span><span class=\"token string\">'12345'</span><span class=\"token punctuation\">)</span>\n        resp <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>reverse<span class=\"token punctuation\">(</span><span class=\"token string\">'renew-book-librarian'</span><span class=\"token punctuation\">,</span> kwargs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'pk'</span><span class=\"token punctuation\">:</span>self<span class=\"token punctuation\">.</span>test_bookinstance1<span class=\"token punctuation\">.</span>pk<span class=\"token punctuation\">,</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span> resp<span class=\"token punctuation\">.</span>status_code<span class=\"token punctuation\">,</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\">#Check we used correct template</span>\n        self<span class=\"token punctuation\">.</span>assertTemplateUsed<span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">,</span> <span class=\"token string\">'catalog/book_renew_librarian.html'</span><span class=\"token punctuation\">)</span>\n</code></pre></div>\n\n<p>Добавьте ещё один тестовый метод, показанный ниже. Он проверяет что начальная дата равна трём неделям в будущем. Заметьте, что мы имеем возможность получить доступ к начальному значению из поля формы (выделено жирным).</p>\n\n<div class=\"code-example\"><pre class=\"brush: python notranslate\"><code>    <span class=\"token keyword\">def</span> <span class=\"token function\">test_form_renewal_date_initially_has_date_three_weeks_in_future</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        login <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>login<span class=\"token punctuation\">(</span>username<span class=\"token operator\">=</span><span class=\"token string\">'testuser2'</span><span class=\"token punctuation\">,</span> password<span class=\"token operator\">=</span><span class=\"token string\">'12345'</span><span class=\"token punctuation\">)</span>\n        resp <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>reverse<span class=\"token punctuation\">(</span><span class=\"token string\">'renew-book-librarian'</span><span class=\"token punctuation\">,</span> kwargs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'pk'</span><span class=\"token punctuation\">:</span>self<span class=\"token punctuation\">.</span>test_bookinstance1<span class=\"token punctuation\">.</span>pk<span class=\"token punctuation\">,</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span> resp<span class=\"token punctuation\">.</span>status_code<span class=\"token punctuation\">,</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n\n        date_3_weeks_in_future <span class=\"token operator\">=</span> datetime<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span>today<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> datetime<span class=\"token punctuation\">.</span>timedelta<span class=\"token punctuation\">(</span>weeks<span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">[</span><span class=\"token string\">'form'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>initial<span class=\"token punctuation\">[</span><span class=\"token string\">'renewal_date'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> date_3_weeks_in_future <span class=\"token punctuation\">)</span>\n</code></pre></div>\n\n<p>Следующий тест (тоже добавьте его в свой класс) проверяет что отображение, в случае успеха, перенаправляет пользователя к списку всех забронированных книг. Здесь мы показываем как при помощи клиента вы можете создать и передать данные в <code>POST</code>-запросе. Данный запрос передаётся вторым аргументом в пост-функцию и представляет из себя словарь пар ключ/значение.</p>\n\n<div class=\"code-example\"><pre class=\"brush: python notranslate\"><code>    <span class=\"token keyword\">def</span> <span class=\"token function\">test_redirects_to_all_borrowed_book_list_on_success</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        login <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>login<span class=\"token punctuation\">(</span>username<span class=\"token operator\">=</span><span class=\"token string\">'testuser2'</span><span class=\"token punctuation\">,</span> password<span class=\"token operator\">=</span><span class=\"token string\">'12345'</span><span class=\"token punctuation\">)</span>\n        valid_date_in_future <span class=\"token operator\">=</span> datetime<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span>today<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> datetime<span class=\"token punctuation\">.</span>timedelta<span class=\"token punctuation\">(</span>weeks<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n        resp <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>post<span class=\"token punctuation\">(</span>reverse<span class=\"token punctuation\">(</span><span class=\"token string\">'renew-book-librarian'</span><span class=\"token punctuation\">,</span> kwargs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'pk'</span><span class=\"token punctuation\">:</span>self<span class=\"token punctuation\">.</span>test_bookinstance1<span class=\"token punctuation\">.</span>pk<span class=\"token punctuation\">,</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'renewal_date'</span><span class=\"token punctuation\">:</span>valid_date_in_future<span class=\"token punctuation\">}</span> <span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertRedirects<span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">,</span> reverse<span class=\"token punctuation\">(</span><span class=\"token string\">'all-borrowed'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span>\n</code></pre></div>\n\n<div class=\"warning notecard\" id=\"sect15\">\n<p>Вместо перехода к отображению <em>all-borrowed</em>, добавленного в качестве <em>домашнего задания</em>, вы можете перенаправить пользователя на домашнюю страницу '/'. В таком случае, исправьте две последние строки тестового кода на код, показанный ниже. Присваивание <code>follow=True</code>, в запросе, гарантирует что запрос вернёт окончательный URL-адрес пункта назначения (следовательно проверяется <code>/catalog/</code>, а не <code>/</code>).</p>\n\n<div class=\"code-example\"><pre class=\"brush: python notranslate\"><code> resp <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>post<span class=\"token punctuation\">(</span>reverse<span class=\"token punctuation\">(</span><span class=\"token string\">'renew-book-librarian'</span><span class=\"token punctuation\">,</span> kwargs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'pk'</span><span class=\"token punctuation\">:</span>self<span class=\"token punctuation\">.</span>test_bookinstance1<span class=\"token punctuation\">.</span>pk<span class=\"token punctuation\">,</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'renewal_date'</span><span class=\"token punctuation\">:</span>valid_date_in_future<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>follow<span class=\"token operator\">=</span><span class=\"token boolean\">True</span> <span class=\"token punctuation\">)</span>\n self<span class=\"token punctuation\">.</span>assertRedirects<span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">,</span> <span class=\"token string\">'/catalog/'</span><span class=\"token punctuation\">)</span></code></pre></div>\n</div>\n\n<p>Скопируйте две последние функции в класс, представленные ниже. Они тоже проверяют  <code>POST</code>-запросы, но для случая неверных дат. Мы используем функцию <code>assertFormError()</code>, чтобы проверить сообщения об ошибках.</p>\n\n<div class=\"code-example\"><pre class=\"brush: python notranslate\"><code>    <span class=\"token keyword\">def</span> <span class=\"token function\">test_form_invalid_renewal_date_past</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        login <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>login<span class=\"token punctuation\">(</span>username<span class=\"token operator\">=</span><span class=\"token string\">'testuser2'</span><span class=\"token punctuation\">,</span> password<span class=\"token operator\">=</span><span class=\"token string\">'12345'</span><span class=\"token punctuation\">)</span>\n        date_in_past <span class=\"token operator\">=</span> datetime<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span>today<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> datetime<span class=\"token punctuation\">.</span>timedelta<span class=\"token punctuation\">(</span>weeks<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n        resp <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>post<span class=\"token punctuation\">(</span>reverse<span class=\"token punctuation\">(</span><span class=\"token string\">'renew-book-librarian'</span><span class=\"token punctuation\">,</span> kwargs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'pk'</span><span class=\"token punctuation\">:</span>self<span class=\"token punctuation\">.</span>test_bookinstance1<span class=\"token punctuation\">.</span>pk<span class=\"token punctuation\">,</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'renewal_date'</span><span class=\"token punctuation\">:</span>date_in_past<span class=\"token punctuation\">}</span> <span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span> resp<span class=\"token punctuation\">.</span>status_code<span class=\"token punctuation\">,</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertFormError<span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">,</span> <span class=\"token string\">'form'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'renewal_date'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Invalid date - renewal in past'</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">def</span> <span class=\"token function\">test_form_invalid_renewal_date_future</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n        login <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>login<span class=\"token punctuation\">(</span>username<span class=\"token operator\">=</span><span class=\"token string\">'testuser2'</span><span class=\"token punctuation\">,</span> password<span class=\"token operator\">=</span><span class=\"token string\">'12345'</span><span class=\"token punctuation\">)</span>\n        invalid_date_in_future <span class=\"token operator\">=</span> datetime<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span>today<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> datetime<span class=\"token punctuation\">.</span>timedelta<span class=\"token punctuation\">(</span>weeks<span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n        resp <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>client<span class=\"token punctuation\">.</span>post<span class=\"token punctuation\">(</span>reverse<span class=\"token punctuation\">(</span><span class=\"token string\">'renew-book-librarian'</span><span class=\"token punctuation\">,</span> kwargs<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'pk'</span><span class=\"token punctuation\">:</span>self<span class=\"token punctuation\">.</span>test_bookinstance1<span class=\"token punctuation\">.</span>pk<span class=\"token punctuation\">,</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token string\">'renewal_date'</span><span class=\"token punctuation\">:</span>invalid_date_in_future<span class=\"token punctuation\">}</span> <span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertEqual<span class=\"token punctuation\">(</span> resp<span class=\"token punctuation\">.</span>status_code<span class=\"token punctuation\">,</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span>\n        self<span class=\"token punctuation\">.</span>assertFormError<span class=\"token punctuation\">(</span>resp<span class=\"token punctuation\">,</span> <span class=\"token string\">'form'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'renewal_date'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Invalid date - renewal more than 4 weeks ahead'</span><span class=\"token punctuation\">)</span>\n</code></pre></div>\n\n<p>Такие же способы тестирования могут применяться для проверок других отображений.</p>"}},{"type":"prose","value":{"id":"шаблоны","title":"Шаблоны","isH3":true,"content":"<p>Django предоставляет API для тестирования, которое проверяет что функции отображения вызывают правильные шаблоны, а также позволяют убедиться, что им передаётся соответствующая информация. Кроме того, в Django имеется возможность использовать сторонние API для проверок того, что ваш HTML показывает то, что надо.</p>"}},{"type":"prose","value":{"id":"другие_рекомендованные_инструменты_для_тестирования","title":"Другие рекомендованные инструменты для тестирования","isH3":false,"content":"<p>Django фреймворк для тестирования помогает вам создавать эффективные юнит- и интеграционные тесты — мы рассмотрели только небольшую часть того, что может делать фреймворк <strong>unittest</strong> и совсем не упоминали дополнения Django (например, посмотрите на модуль <a href=\"https://docs.python.org/3.5/library/unittest.mock-examples.html\" class=\"external\" rel=\" noopener\">unittest.mock</a>, который подключает сторонние библиотеки тестирования).</p>\n\n<p>Из всего множества сторонних инструментов тестирования, мы кратко опишем возможности двух:</p>\n\n<ul>\n <li><a href=\"http://coverage.readthedocs.io/en/latest/\" class=\"external\" rel=\" noopener\">Coverage</a>: Это инструмент Python, который формирует отчёты о том, какое количество кода выполняется во время проведения тестов. Это полезно для уточнения степени \"покрытия\" кода тестами.</li>\n <li><a href=\"/en-US/docs/Learn/Tools_and_testing/Cross_browser_testing/Your_own_automation_environment\">Selenium</a> это фреймворк проведения автоматического тестирования в настоящем браузере. Он позволяет вам имитировать взаимодействие пользователя с вашим сайтом (что является следующим шагом в проведении интеграционных тестов).</li>\n</ul>"}},{"type":"prose","value":{"id":"домашняя_работы","title":"Домашняя работы","isH3":false,"content":"<p>Существуют другие модели и отображения, которые мы могли бы протестировать. В качестве простого упражнения, попробуйте создать тестовый вариант для отображения <code>AuthorCreate</code>.</p>\n\n<div class=\"code-example\"><pre class=\"brush: python notranslate\"><code><span class=\"token keyword\">class</span> <span class=\"token class-name\">AuthorCreate</span><span class=\"token punctuation\">(</span>PermissionRequiredMixin<span class=\"token punctuation\">,</span> CreateView<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    model <span class=\"token operator\">=</span> Author\n    fields <span class=\"token operator\">=</span> <span class=\"token string\">'__all__'</span>\n    initial<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'date_of_death'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'12/10/2016'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">}</span>\n    permission_required <span class=\"token operator\">=</span> <span class=\"token string\">'catalog.can_mark_returned'</span></code></pre></div>\n\n<p>Помните, - вам надо проверить все, что касается вашего кода, или структуры. Это включает в себя: кто имеет доступ к отображению, начальную дату, применяемый шаблон, а также перенаправление из отображения в случае успеха.</p>"}},{"type":"prose","value":{"id":"итоги","title":"Итоги","isH3":false,"content":"<p>Написание тестов не является ни весельем, ни развлечением и, соответственно, при создании сайтов часто остаётся напоследок (или вообще не используется). Но тем не менее, они являются действенным механизмом, который позволяет вам убедиться, что ваш код в находится безопасности, даже если в него добавляются какие-либо изменения. Кроме того, тесты повышают эффективность поддержки вашего кода.</p>\n\n<p>В данном руководстве мы продемонстрировали вам принципы написания тестов для ваших моделей, форм и отображений. Мы кратко перечислили что именно необходимо тестировать, что обычно сложно выявить в самом начале разработки. Существует много аспектов которые необходимо изучить, но даже с тем что мы уже узнали, вы имеете возможность создавать эффективные юнит-тесты для значительного улучшения процесса разработки.</p>\n\n<p>Следующая и последняя часть руководства покажет вам как запустить ваш чудесный (и полностью протестированный!) веб-сайт Django.</p>"}},{"type":"prose","value":{"id":"смотрите_также","title":"Смотрите также","isH3":false,"content":"<ul>\n <li><a href=\"https://docs.djangoproject.com/en/1.10/topics/testing/overview/\" class=\"external\" rel=\" noopener\">Написание и запуск тестов</a> (Django docs)</li>\n <li><a href=\"https://docs.djangoproject.com/en/1.10/intro/tutorial05/\" class=\"external\" rel=\" noopener\">Написание вашего первого приложения Django, часть 5 &gt; Введение в автоматическое тестирование</a> (Django docs)</li>\n <li><a href=\"https://docs.djangoproject.com/en/1.10/topics/testing/tools/\" class=\"external\" rel=\" noopener\">Инструменты для тестирования</a> (Django docs)</li>\n <li><a href=\"https://docs.djangoproject.com/en/1.10/topics/testing/advanced/\" class=\"external\" rel=\" noopener\">Продвинутое тестирование</a> (Django docs)</li>\n <li><a href=\"http://toastdriven.com/blog/2011/apr/10/guide-to-testing-in-django/\" class=\"external\" rel=\" noopener\">Путеводитель по тестированию в Django</a> (Toast Driven Blog, 2011)</li>\n <li><a href=\"http://test-driven-django-development.readthedocs.io/en/latest/index.html\" class=\"external\" rel=\" noopener\">Мастерская: Разработка через тесты с Django (TDD)</a> (San Diego Python, 2014)</li>\n <li><a href=\"https://realpython.com/blog/python/testing-in-django-part-1-best-practices-and-examples/\" class=\"external\" rel=\" noopener\">Тестирование в Django (Часть 1) - Лучшие практики и Примеры </a>(RealPython, 2013)</li>\n</ul>\n\n<p></p><ul class=\"prev-next\">\n    <li><a class=\"button minimal\" href=\"/ru/docs/Learn/Server-side/Django/Forms\"> Назад </a></li>\n    <li><a class=\"button minimal\" href=\"/ru/docs/Learn/Server-side/Django\"> Обзор: Django</a></li>\n    <li><a class=\"button minimal\" href=\"/ru/docs/Learn/Server-side/Django/Deployment\"> Далее  </a></li>\n</ul><p></p>"}}],"toc":[{"text":"Обзор","id":"обзор"},{"text":"Обзор структуры тестов","id":"обзор_структуры_тестов"},{"text":"Как запускать тесты","id":"как_запускать_тесты"},{"text":"Тестирование LocalLibrary","id":"тестирование_locallibrary"},{"text":"Другие рекомендованные инструменты для тестирования","id":"другие_рекомендованные_инструменты_для_тестирования"},{"text":"Домашняя работы","id":"домашняя_работы"},{"text":"Итоги","id":"итоги"},{"text":"Смотрите также","id":"смотрите_также"}],"summary":"Сайты, в процессе развития и разработки, становится все сложнее тестировать вручную. Кроме такого тестирования, сложными становятся внутренние взаимодействия между компонентами - внесение небольшого изменения в одной части приложения влияет на другие. При этом, чтобы все продолжало работать нужно вносить все больше и больше изменений и, желательно так, чтобы не добавлялись новые ошибки. Одним из способов который позволяет смягчить последствия добавления изменений, является внедрение в разработку автоматического тестирования - оно должно просто и надёжно запускаться каждый раз, когда вы вносите изменения в свой код. Данное руководство рассматривает вопросы автоматизации юнит-тестирования вашего сайта при помощи фреймворка Django для тестов.","popularity":0.0014,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Django Tutorial Part 10: Testing a Django web application","locale":"en-US","native":"English (US)"},{"title":"Tutorial de Django Parte 10: Probando una aplicación web Django","locale":"es","native":"Español"},{"title":"Django Tutorial Part 10: Testing a Django web application","locale":"fr","native":"Français"},{"title":"Django 튜토리얼 파트 10: Django 웹 어플리케이션 테스트하기","locale":"ko","native":"한국어"},{"title":"Tutorial Django Parte 10: Testando uma aplicação web Django","locale":"pt-BR","native":"Português (do Brasil)"},{"title":"Django 教程 10: 测试 Django 网页应用","locale":"zh-CN","native":"中文 (简体)"},{"title":"Django Tutorial Part 10: Testing a Django web application","locale":"zh-TW","native":"正體中文 (繁體)"}],"source":{"folder":"ru/learn/server-side/django/testing","github_url":"https://github.com/mdn/translated-content/blob/main/files/ru/learn/server-side/django/testing/index.html","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.html"},"parents":[{"uri":"/ru/docs/Learn","title":"Изучение веб-разработки"},{"uri":"/ru/docs/Learn/Server-side","title":"Серверное программирование веб-сайтов"},{"uri":"/ru/docs/Learn/Server-side/Django","title":"Веб-фреймворк Django (Python)"},{"uri":"/ru/docs/Learn/Server-side/Django/Testing","title":"Руководство часть 10: Тестирование приложений Django"}],"pageTitle":"Руководство часть 10: Тестирование приложений Django - Изучение веб-разработки | MDN","noIndexing":false}}</script></body></html>