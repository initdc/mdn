{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"匹配模式","mdn_url":"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Match_patterns","locale":"zh-CN","native":"中文 (简体)","sidebarHTML":"\n  <ol>\n    <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions\"><strong>浏览器扩展程序</strong></a></li>\n    <li class=\"toggle\">\n      <details>\n        <summary>开始</summary>\n        <ol>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/What_are_WebExtensions\">什么是扩展程序?</a></li>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Your_first_WebExtension\">你的第一个扩展程序</a></li>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Your_second_WebExtension\">你的第二个扩展程序</a></li>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension\">详解扩展程序</a></li>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Examples\">扩展程序示例</a></li>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/What_next_\">接下来呢?</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary>概念</summary>\n        <ol>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Using_the_JavaScript_APIs\">使用 JavaScript APIs</a></li>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Content_scripts\">Content scripts</a></li>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Match_patterns\">匹配样式</a></li>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Working_with_files\">处理文件</a></li>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Internationalization\">国际化</a></li>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Content_Security_Policy\">内容安全举措</a></li>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Native_messaging\">本地消息</a></li>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Differences_between_API_implementations\">API实现之间的差异</a></li>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Chrome_incompatibilities\">Chrome不兼容</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary>用户界面</summary>\n        <ol>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/user_interface\">用户界面</a></li>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/user_interface/Browser_action\">工具栏按钮</a></li>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/user_interface/Page_actions\">地址栏按钮</a></li>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/user_interface/Sidebars\">侧边栏</a></li>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/user_interface/Context_menu_items\">上下文菜单项</a></li>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/user_interface/Options_pages\">选项页面</a></li>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/user_interface/Extension_pages\">扩展页面</a></li>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/user_interface/Notifications\">通知</a></li>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/user_interface/Omnibox\">地址栏建议</a></li>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/user_interface/devtools_panels\">开发人员工具面板</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary>怎么做</summary>\n        <ol>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Intercept_HTTP_requests\">拦截HTTP 请求</a></li>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Modify_a_web_page\">修改网页</a></li>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Safely_inserting_external_content_into_a_page\">插入外部内容</a></li>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Sharing_objects_with_page_scripts\">Share objects with page scripts</a></li>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Add_a_button_to_the_toolbar\">向工具栏添加按钮</a></li>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Implement_a_settings_page\">应用设置页面</a></li>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API\">使用Tabs API</a></li>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Bookmarks_API\">使用Bookmarks API</a></li>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Cookies_API\">使用Cookies API</a></li>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Work_with_contextual_identities\">使用上下文身份</a></li>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Interact_with_the_clipboard\">Interact with the clipboard</a></li>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Build_a_cross_browser_extension\">构建跨浏览器扩展</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Firefox_differentiators\">Firefox的优势</a></summary>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary>JavaScript APIs</summary>\n        <ol><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Browser_support_for_JavaScript_APIs\">Browser support for JavaScript APIs</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/alarms\">alarms</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/bookmarks\">bookmarks</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/browserAction\">browserAction</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/captivePortal\">captivePortal</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/clipboard\">clipboard</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/contentScripts\">contentScripts</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/cookies\">cookies</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/downloads\">downloads</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/find\">find</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/history\">history</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/i18n\">i18n</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/idle\">idle</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/menus\">menus</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/permissions\">permissions</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/proxy\">proxy</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/runtime\">runtime</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/search\">search</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/sessions\">sessions</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/storage\">storage</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/tabs\">tabs</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/types\">types</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/webNavigation\">webNavigation</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/webRequest\">webRequest</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/windows\">windows</a></li></ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n      <summary>Manifest keys</summary>\n        <ol>\n          <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json\">介绍</a></li>\n        </ol>\n      <ol><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_specific_settings\">applications</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_action\">browser_action</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_scripts\">content_scripts</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/default_locale\">default_locale</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/developer\">developer</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/homepage_url\">homepage_url</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/manifest_version\">manifest_version</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/version\">version</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/web_accessible_resources\">web_accessible_resources</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/author\">作者 - author</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/name\">名称 - name</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/background\">后台 - background</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/description\">描述 - description</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions\">权限 - permissions</a></li><li><a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/short_name\">短名称 - short_name</a></li></ol>\n      </details>\n    </li>\n     <li class=\"toggle\">\n      <details>\n        <summary>Extension Workshop</summary>\n        <ol>\n          <li><a href=\"https://extensionworkshop.com/documentation/develop/\">Develop</a></li>\n          <li><a href=\"https://extensionworkshop.com/documentation/publish/\">Publish</a></li>\n          <li><a href=\"https://extensionworkshop.com/documentation/manage/\">Manage</a></li>\n          <li><a href=\"https://extensionworkshop.com/documentation/enterprise/\">Enterprise</a></li>\n        </ol>\n      </details>\n    </li>\n    <li><a href=\"/zh-CN/docs/Mozilla/Add-ons/Contact_us\"><strong>联系我们</strong></a></li>\n    <li class=\"toggle\">\n      <details>\n        <summary>渠道</summary>\n        <ol>\n          <li><a href=\"https://blog.mozilla.org/addons\">Add-ons博客</a></li>\n          <li><a href=\"https://discourse.mozilla.org/c/add-ons\">Add-ons论坛</a></li>\n          <li><a href=\"https://chat.mozilla.org/#/room/%23addons:mozilla.org\">Add-ons chat</a></li>\n        </ol>\n      </details>\n    </li>\n  </ol>\n","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>匹配模式是一种指定网址组的方法：一个匹配模式匹配特定的一组 URL。它们由 WebExtensions 在几个地方使用，最明显的是指定要将<a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Content_scripts\">内容脚本</a>加载到哪些文档中，并指定要向其中添加 <a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/API/webRequest\">webRequest</a> 侦听器的 URL。</p>\n<p>使用匹配模板的 API 通常接收一个匹配模板的列表，当 URL 匹配任何模式时会恰当的运行。看个例子 在 manifest.json 中的 <a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_scripts\"><code>content_scripts</code></a> 关键字。</p>"}},{"type":"prose","value":{"id":"匹配模式结构","title":"匹配模式结构","isH3":false,"content":"<p>所有的匹配模式用一个字符串来定义，而且都是<a href=\"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Match_patterns#all_urls\" aria-current=\"page\">\"&lt;all_urls&gt;\"</a> 模板的一部份，匹配模板包含三个部分：<em>scheme</em>、<em>host</em> 和 <em>path</em>。scheme 和 host 用 <code>://</code> 分隔。</p>\n<pre class=\"notranslate\">&lt;scheme&gt;://&lt;host&gt;&lt;path&gt;\n</pre>"}},{"type":"prose","value":{"id":"方案","title":"方案","isH3":true,"content":"<p><em>scheme</em> 可能以下两种格式之一：</p>\n<table class=\"fullwidth-table standard-table\">\n  <thead>\n    <tr>\n      <th scope=\"col\">Form</th>\n      <th scope=\"col\">Matches</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>\"*\"</td>\n      <td>Only \"http\" and \"https\".</td>\n    </tr>\n    <tr>\n      <td>One of \"http\", \"https\", \"file\", \"ftp\", \"app\".</td>\n      <td>Only the given scheme.</td>\n    </tr>\n  </tbody>\n</table>"}},{"type":"prose","value":{"id":"主机","title":"主机","isH3":true,"content":"<p><em>host</em> 组件可以采取三种形式之一：:</p>\n<table class=\"fullwidth-table standard-table\">\n  <thead>\n    <tr>\n      <th scope=\"col\">Form</th>\n      <th scope=\"col\">Matches</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>\"*\"</td>\n      <td>Any host.</td>\n    </tr>\n    <tr>\n      <td>\"*.\" followed by part of the hostname.</td>\n      <td>The given host and any of its subdomains.</td>\n    </tr>\n    <tr>\n      <td>A complete hostname, without wildcards.</td>\n      <td>Only the given host.</td>\n    </tr>\n  </tbody>\n</table>\n<p>只有当 <em>scheme</em> 是 \"file\" 是 <em>host</em> 可选的</p>\n<p>值得注意的是通配符可能只会在开头显示。</p>"}},{"type":"prose","value":{"id":"路径","title":"路径","isH3":true,"content":"<p><em>path</em> 组件必须以“/”开头。</p>\n<p>之后，它可能随后包含“*”通配符和网址路径中允许的任何字符的任意组合。与 <em>host</em> 不同，<em>path</em> 组件可能在中间或末尾包含“*”通配符，并且“*”通配符可以多次出现。</p>"}},{"type":"prose","value":{"id":"all_urls","title":"&lt;all_urls&gt;","isH3":true,"content":"<p>特殊值“&lt;all_urls&gt;”匹配任何受支持方案下的所有 URL：即，\"http\", \"https\", \"file\", \"ftp\", \"app\"。</p>","titleAsText":"<all_urls>"}},{"type":"prose","value":{"id":"范例","title":"范例","isH3":false,"content":"<table class=\"fullwidth-table standard-table\">\n  <thead>\n    <tr>\n      <th scope=\"col\">Pattern</th>\n      <th scope=\"col\">Example matches</th>\n      <th scope=\"col\">Example non-matches</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>\n        <p><code>&lt;all_urls&gt;</code></p>\n        <p>Match all URLs.</p>\n      </td>\n      <td>\n        <p><code>http://example.org/</code></p>\n        <p><code>ftp://files.somewhere.org/</code></p>\n        <p><code>https://a.org/some/path/</code></p>\n      </td>\n      <td>\n        <p><code>resource://a/b/c/</code><br>(unsupported scheme)</p>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <p><code>*://*.mozilla.org/*</code></p>\n        <p>\n          Match all HTTP and HTTPS URLs that are hosted at \"mozilla.org\" or one\n          of its subdomains.\n        </p>\n      </td>\n      <td>\n        <p><code>http://mozilla.org/</code></p>\n        <p><code>https://mozilla.org/</code></p>\n        <p><code>http://a.mozilla.org/</code></p>\n        <p><code>http://a.b.mozilla.org/</code></p>\n        <p><code>https://b.mozilla.org/path/</code></p>\n      </td>\n      <td>\n        <p><code>ftp://mozilla.org/</code><br>(unmatched scheme)</p>\n        <p><code>http://mozilla.com/</code><br>(unmatched host)</p>\n        <p><code>http://firefox.org/</code><br>(unmatched host)</p>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <p><code>*://mozilla.org/</code></p>\n        <p>\n          Match all HTTP and HTTPS URLs that are hosted at exactly\n          \"mozilla.org/\".\n        </p>\n      </td>\n      <td>\n        <p><code>http://mozilla.org/</code></p>\n        <p><code>https://mozilla.org/</code></p>\n      </td>\n      <td>\n        <p><code>ftp://mozilla.org/</code><br>(unmatched scheme)</p>\n        <p><code>http://a.mozilla.org/</code><br>(unmatched host)</p>\n        <p><code>http://mozilla.org/a</code><br>(unmatched path)</p>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <p><code>ftp://mozilla.org/</code></p>\n        <p>Match only \"ftp://mozilla.org/\".</p>\n      </td>\n      <td><code>ftp://mozilla.org</code></td>\n      <td>\n        <p><code>http://mozilla.org/</code><br>(unmatched scheme)</p>\n        <p><code>ftp://sub.mozilla.org/</code><br>(unmatched host)</p>\n        <p><code>ftp://mozilla.org/path</code><br>(unmatched path)</p>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <p><code>https://*/path</code></p>\n        <p>Match HTTPS URLs on any host, whose path is \"path\".</p>\n      </td>\n      <td>\n        <p><code>https://mozilla.org/path</code></p>\n        <p><code>https://a.mozilla.org/path</code></p>\n        <p><code>https://something.com/path</code></p>\n      </td>\n      <td>\n        <p><code>http://mozilla.org/path</code><br>(unmatched scheme)</p>\n        <p><code>https://mozilla.org/path/</code><br>(unmatched path)</p>\n        <p><code>https://mozilla.org/a</code><br>(unmatched path)</p>\n        <p><code>https://mozilla.org/</code><br>(unmatched path)</p>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <p><code>https://*/path/</code></p>\n        <p>Match HTTPS URLs on any host, whose path is \"path/\".</p>\n      </td>\n      <td>\n        <p><code>https://mozilla.org/path/</code></p>\n        <p><code>https://a.mozilla.org/path/</code></p>\n        <p><code>https://something.com/path</code>/</p>\n      </td>\n      <td>\n        <p><code>http://mozilla.org/path/</code><br>(unmatched scheme)</p>\n        <p><code>https://mozilla.org/path</code><br>(unmatched path)</p>\n        <p><code>https://mozilla.org/a</code><br>(unmatched path)</p>\n        <p><code>https://mozilla.org/</code><br>(unmatched path)</p>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <p><code>https://mozilla.org/*</code></p>\n        <p>Match HTTPS URLs only at \"mozilla.org\", with any path.</p>\n      </td>\n      <td>\n        <p><code>https://mozilla.org/</code></p>\n        <p><code>https://mozilla.org/path</code></p>\n        <p><code>https://mozilla.org/another</code></p>\n        <p><code>https://mozilla.org/path/to/doc</code></p>\n      </td>\n      <td>\n        <p><code>http://mozilla.org/path</code><br>(unmatched scheme)</p>\n        <p><code>https://mozilla.com/path</code><br>(unmatched host)</p>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <p><code>https://mozilla.org/a/b/c/</code></p>\n        <p>Match only this URL.</p>\n      </td>\n      <td><code>https://mozilla.org/a/b/c/</code></td>\n      <td>Anything else.</td>\n    </tr>\n    <tr>\n      <td>\n        <p><code>https://mozilla.org/*/b/*/</code></p>\n        <p>\n          Match HTTPS URLs hosted on \"mozilla.org\", whose path contains a\n          component \"b\" somewhere in the middle.\n        </p>\n      </td>\n      <td>\n        <p><code>https://mozilla.org/a/b/c/</code></p>\n        <p><code>https://mozilla.org/d/b/f/</code></p>\n        <p><code>https://mozilla.org/a/b/c/d/</code></p>\n      </td>\n      <td>\n        <p><code>https://mozilla.org/b/*/</code><br>(unmatched path)</p>\n        <p><code>https://mozilla.org/a/b/</code><br>(unmatched path)</p>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        <p><code>file:///blah/*</code></p>\n        <p>Match any FILE URL whose path begins with \"blah\".</p>\n      </td>\n      <td>\n        <p><code>file:///blah/</code></p>\n        <p><code>file:///blah/bleh</code></p>\n      </td>\n      <td><code>file:///bleh/</code><br>(unmatched path)</td>\n    </tr>\n  </tbody>\n</table>"}},{"type":"prose","value":{"id":"无效匹配模式","title":"无效匹配模式","isH3":true,"content":"<table class=\"fullwidth-table standard-table\">\n  <thead>\n    <tr>\n      <th scope=\"col\">Invalid pattern</th>\n      <th scope=\"col\">Reason</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td><code>resource://path/</code></td>\n      <td>Unsupported scheme.</td>\n    </tr>\n    <tr>\n      <td><code>https://mozilla.org</code></td>\n      <td>No path.</td>\n    </tr>\n    <tr>\n      <td><code>https://mozilla.*.org/</code></td>\n      <td>\"*\" in host must be at the start.</td>\n    </tr>\n    <tr>\n      <td><code>https://*zilla.org/</code></td>\n      <td>\"*\" in host must by the only character or be followed by \".\".</td>\n    </tr>\n    <tr>\n      <td><code>http*://mozilla.org/</code></td>\n      <td>\"*\" in scheme must be the only character.</td>\n    </tr>\n    <tr>\n      <td><code>file://*</code></td>\n      <td>Empty path: this should be \"<code>file:///*</code>\".</td>\n    </tr>\n  </tbody>\n</table>"}},{"type":"prose","value":{"id":"测试匹配模式","title":"测试匹配模式","isH3":false,"content":"<p>当制作扩展时你通常不会跟直接使用匹配模板：通常你讲一个匹配模式传递给 API，然后 API 构造一个匹配模式并且使用他来测试 url。不过如果你正在尝试哪一种匹配模式可以被使用，或者调试一个匹配问题，那么直接创建和测试匹配模板的能力将变得有用，这个模块将解释如何做到这点。</p>\n<p>首先，打开开发者工具设置，并且检查 \"Enable browser chrome and add-on debugging toolboxes\" 被打开：</p><iframe width=\"560\" height=\"315\" src=\"https://www.youtube-nocookie.com/embed/JDEe2fyFpHE\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen=\"\" loading=\"lazy\"></iframe>\n<p>然后打开 \"Browser Console\":</p><iframe width=\"560\" height=\"315\" src=\"https://www.youtube-nocookie.com/embed/mfuBMje6dA4\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen=\"\" loading=\"lazy\"></iframe>\n<p>它给了你一个命令行以使你可以执行一些特权 javascript 代码。</p>\n<div class=\"notecard warning\" id=\"sect1\">\n  <p><strong>警告：</strong> 因为运行在浏览器控制台的代码拥有系统特权，在任何时候都请你小心理解你的代码做了什么</p>\n</div>\n<p>现在粘贴以下代码到命令行然后按下 <kbd>enter</kbd>:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>Cu<span class=\"token punctuation\">.</span><span class=\"token function\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"resource://gre/modules/MatchPattern.jsm\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nCu<span class=\"token punctuation\">.</span><span class=\"token function\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"resource://gre/modules/BrowserUtils.jsm\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>这做了两件事：</p>\n<ul>\n  <li>导入 \"MatchPattern.jsm\": 这是实现了匹配模板的系统模块，特别的，这个模块包含了 <code>MatchPattern</code> 对象。<code>MatchPattern</code> 对象定义了一个 <code>matches()</code> 方法，他需要一个 URL 然后返回 <code>true</code> 或者 <code>false</code>.</li>\n  <li>导入 \"BrowserUtils.jsm\": 包含了一个方法 <code>makeURI()</code>, 他转换一个字符串为一个 <a href=\"/zh-CN/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIURI\" class=\"page-not-created\" title=\"This is a link to an unwritten page\"><code>nsIURI</code></a> 对象。<code>nsIURI</code> 是 <code>matches()</code> 方法需要接受的一个参数。</li>\n</ul>\n<p>现在你可以构造 MatchPattern 对象，构造 URIs，并检查 URIs 是否匹配：</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> match <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MatchPattern</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"*://mozilla.org/\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> uri <span class=\"token operator\">=</span> BrowserUtils<span class=\"token punctuation\">.</span><span class=\"token function\">makeURI</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"https://mozilla.org/\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmatch<span class=\"token punctuation\">.</span><span class=\"token function\">matches</span><span class=\"token punctuation\">(</span>uri<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//        &lt; true</span>\n\nuri <span class=\"token operator\">=</span> BrowserUtils<span class=\"token punctuation\">.</span><span class=\"token function\">makeURI</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"https://mozilla.org/path\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmatch<span class=\"token punctuation\">.</span><span class=\"token function\">matches</span><span class=\"token punctuation\">(</span>uri<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//        &lt; false</span>\n</code></pre></div>"}}],"toc":[{"text":"匹配模式结构","id":"匹配模式结构"},{"text":"范例","id":"范例"},{"text":"测试匹配模式","id":"测试匹配模式"}],"summary":"匹配模式是一种指定网址组的方法：一个匹配模式匹配特定的一组 URL。它们由 WebExtensions 在几个地方使用，最明显的是指定要将内容脚本加载到哪些文档中，并指定要向其中添加 webRequest 侦听器的 URL。","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Match patterns in extension manifests","locale":"en-US","native":"English (US)"},{"title":"Motifs (Match patterns)","locale":"fr","native":"Français"},{"title":"マッチパターン","locale":"ja","native":"日本語"},{"title":"Шаблоны совпадения в расширении","locale":"ru","native":"Русский"}],"source":{"folder":"zh-cn/mozilla/add-ons/webextensions/match_patterns","github_url":"https://github.com/mdn/translated-content/blob/main/files/zh-cn/mozilla/add-ons/webextensions/match_patterns/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/zh-CN/docs/Mozilla","title":"Mozilla"},{"uri":"/zh-CN/docs/Mozilla/Add-ons","title":"附加组件"},{"uri":"/zh-CN/docs/Mozilla/Add-ons/WebExtensions","title":"浏览器扩展"},{"uri":"/zh-CN/docs/Mozilla/Add-ons/WebExtensions/Match_patterns","title":"匹配模式"}],"pageTitle":"匹配模式 - Mozilla | MDN","noIndexing":false}}