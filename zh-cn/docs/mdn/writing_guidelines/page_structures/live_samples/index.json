{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"运行实例","mdn_url":"/zh-CN/docs/MDN/Writing_guidelines/Page_structures/Live_samples","locale":"zh-CN","native":"中文 (简体)","sidebarHTML":"\n  <ol>\n    <li><a href=\"/zh-CN/docs/MDN/About\">关于 MDN</a></li>\n    <li class=\"toggle\">\n        <details>\n            <summary>为 MDN 做贡献</summary>\n            <ol>\n                <li><a href=\"/zh-CN/docs/MDN/Contribute/Getting_started\">初识MDN</a></li>\n                <li><a href=\"/zh-CN/docs/MDN/Contribute\">为 MDN 做贡献</a></li>\n                <li><a href=\"/zh-CN/docs/MDN/Contribute/Howto\">MDN 使用指南</a></li>\n                <li><a href=\"/zh-CN/docs/MDN/Contribute/Localize\">MDN 本地化</a></li>\n                <li><a href=\"/zh-CN/docs/MDN/Guidelines\">Guidelines</a></li>\n                <li><a href=\"/zh-CN/docs/MDN/Structures\">文档结构</a></li>\n             </ol>\n        </details>\n    </li>\n  </ol>\n","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>MDN 支持将文章中的示例代码转化为读者可以实际查看的在线演示。这被称为<em>运行实例</em>，使得用户可以查看代码的实际输出。这使得文档变得更具动态性和指导性。</p>\n<p>运行实例可以包括 HTML、CSS 和 JavaScript 的任意组合。注意，“运行”实例是<em>非交互性</em>的。但是，它们确保了示例展现的输出与示例代码相匹配，因为它仅仅由代码实例生成。</p>"}},{"type":"prose","value":{"id":"运行实例系统如何工作","title":"运行实例系统如何工作","isH3":false,"content":"<p>运行实例系统将所有代码整合为一个集合，再将这个集合融合到一个 HTML 文件中，然后在内联框架 <a href=\"/zh-CN/docs/Web/HTML/Element/iframe\"><code>&lt;iframe&gt;</code></a> 中渲染这个文件。一个运行实例由两个部分构成：</p>\n<ul>\n  <li>一个代码块组成的集合</li>\n  <li>一个调用（创建的框架或链接）以展示该代码块结果的宏</li>\n</ul>\n<p>一个代码块的“集合”，在此上下文中，以标题或块级元素（类似 <a href=\"/zh-CN/docs/Web/HTML/Element/div\"><code>&lt;div&gt;</code></a>）的 id 作为标识。</p>\n<ul>\n  <li>如果 id 属于一个块级元素，该集合将包含此块级元素包含范围内的所有代码。</li>\n  <li>如果 id 属于一个标题，该集合将包含此标题之后到下个同级标题之前的所有代码。请注意，子标题下的代码块也会被包含，如果不希望得到这样的效果，可以使用块级元素的 id。</li>\n</ul>\n<p>宏使用一个特殊的 URL 来取得一个分组中的代码示例，例如：<code>https://yari-demos.prod.mdn.mozit.cloud/en-US/docs/Web/CSS/animation/_sample_.Cylon_Eye.html</code>。总体结构是 <code>https://url-of-page/_sample_.group-id.html</code>，其中的 <code>group-id</code> 指代码所在标题或者块级元素的 id。</p>\n<p>用来展示运行结果的框架（或页面）会运行在沙盒中，在安全条件下实现任何想在 web 上实现的功能。当然，在实践中，代码需要针对包含它的页面，MDN 上运行的随意的内容会被社区移除。</p>\n<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>备注：</strong> <strong>必须</strong>使用宏来展示运行实例的输出。</p>\n</div>\n<p>每个包含示例代码的 <a href=\"/zh-CN/docs/Web/HTML/Element/pre\"><code>&lt;pre&gt;</code></a> 块都有一个 class 指示它由何种语言写成（HTML、CSS 或 JavaScript）。这些 class 的值是“brush: html”、“brush: css”或“brush: js”。这些 class 必须与对应的代码块匹配。</p>\n<p>运行实例系统由很多可用选项，我们会分解开来讲解。</p>"}},{"type":"prose","value":{"id":"运行实例宏","title":"运行实例宏","isH3":true,"content":"<p>你可以用两种宏来展示运行实例：</p>\n<ul>\n  <li><a href=\"https://github.com/mdn/yari/blob/master/kumascript/macros/EmbedLiveSample.ejs\" class=\"external\" rel=\" noopener\"><code>EmbedLiveSample</code></a> 将一个运行实例嵌入到页面中</li>\n  <li><a href=\"https://github.com/mdn/yari/blob/master/kumascript/macros/LiveSampleLink.ejs\" class=\"external\" rel=\" noopener\"><code>LiveSampleLink</code></a> 创建一个链接，在新的页面中打开运行实例</li>\n</ul>\n<p>在很多情况下，可以很方便地在页面中使用 <code>EmbedLiveSample</code> 或 <code>LiveSampleLink</code> 宏。只要代码示例可以通过一个标题的 id 或一个块级元素的 id 的区分开，就可以简单的插入宏来实现功能。</p>\n<h4 id=\"页内运行实例（embedlivesample）宏\">页内运行实例（EmbedLiveSample）宏</h4>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span><span class=\"token function\">EmbedLiveSample</span><span class=\"token punctuation\">(</span>block_ID<span class=\"token punctuation\">,</span> width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">,</span> screenshot_URL<span class=\"token punctuation\">,</span> page_slug<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n</code></pre></div>\n<dl>\n  <dt id=\"block_id\">block_ID</dt>\n  <dd>\n    <p>必需。包含示例代码的标题或块级元素的 id。保证 id 正确的最好的办法是在页面的内容列表中查看 URL，也可以通过查看网页源码的方式检查。</p>\n  </dd>\n  <dt id=\"width\">width</dt>\n  <dd>\n    <p>可选。创建的 <a href=\"/zh-CN/docs/Web/HTML/Element/iframe\"><code>&lt;iframe&gt;</code></a> 元素的宽度，以 <code>px</code> 为单位。若忽略该项，系统会使用一个合理的默认宽度。请注意，如果需要指定该项，那么<em>必须</em>同时指定高度。</p>\n  </dd>\n  <dt id=\"height\">height</dt>\n  <dd>\n    <p>可选。创建的 <a href=\"/zh-CN/docs/Web/HTML/Element/iframe\"><code>&lt;iframe&gt;</code></a> 元素的高度，以 <code>px</code> 为单位。若忽略该项，系统会使用一个合理的默认高度。请注意，如果需要指定该项，那么<em>必须</em>同时指定宽度。如果仅仅指定了高度和宽度中的一个，那么系统会应用默认尺寸。</p>\n  </dd>\n  <dt id=\"screenshot_url\">screenshot_URL</dt>\n  <dd>\n    <p>可选。屏幕截图的 URL，显示了运行实例的效果。对于用户浏览器尚未支持的新技术很有用，他们就可以看到结果的快照。如果指定该项，屏幕截图会带着相关标题显示在运行实例旁边。</p>\n  </dd>\n  <dt id=\"page_slug\">page_slug</dt>\n  <dd>\n    <p>可选。包含示例的页面的代称。若忽略该项，示例将会从宏所在页面获取。</p>\n    <div class=\"notecard warning\" id=\"sect2\">\n      <p><strong>警告：</strong> 这个参数已被弃用。请不要再新的示例中使用它，并将其从你找到的示例中移除。我们正在主动移除对这个参数的使用，在移除了所有的使用后，我们将会移除对它的支持。</p>\n    </div>\n  </dd>\n</dl>\n<h4 id=\"链接运行实例（livesamplelink）宏\">链接运行实例（LiveSampleLink）宏</h4>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span><span class=\"token function\">LiveSampleLink</span><span class=\"token punctuation\">(</span>block_ID<span class=\"token punctuation\">,</span> link_text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n</code></pre></div>\n<dl>\n  <dt id=\"block_id_2\">block_ID</dt>\n  <dd>\n    <p>必需。包含示例代码的标题或块级元素的 id。保证使用正确 id 的最好的办法是在页面的内容目录中查找 URL，也可以通过查看网页源码的方式检查。</p>\n  </dd>\n  <dt id=\"link_text\">link_text</dt>\n  <dd>\n    <p>链接文本。</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"使用运行实例系统","title":"使用运行实例系统","isH3":false,"content":"<p>以下部分描述了一些运行实例系统的常见用例。</p>"}},{"type":"prose","value":{"id":"将代码片段转为运行实例","title":"将代码片段转为运行实例","isH3":true,"content":"<p>一个常见的用例是将 MDN 中已有代码片段转为运行实例。</p>\n<h4 id=\"准备代码示例\">准备代码示例</h4>\n<p>第一步是添加代码片段，或根据内容和标记确认已有片段可以成为运行实例。代码片段必须组成一个完整可运行的示例。比如，如果已有 <code>CSS</code> 片段，那么需要添加一段 <code>HTML</code>。</p>\n<p>每段代码都需要包含在正确标记其语言的 <a href=\"/zh-CN/docs/Web/HTML/Element/pre\"><code>&lt;pre&gt;</code></a> 块中，一个代码块只能包含一种语言。多数情况下，这些步骤都没问题，不过再检查一遍总是好的。当 <code>&lt;pre&gt;</code> 元素 class 的值为 <code>brush:language-type</code>，且 <em>language-type</em> 是该代码块的语言类型（如：<code>html</code>、<code>css</code> 或 <code>js</code>）时，说明这一步已经完成。</p>\n<div class=\"notecard note\" id=\"sect3\">\n  <p><strong>备注：</strong> 每种语言的代码可以分布在几个代码块里，所有代码会被拼接起来。这个特性允许一块代码对应一块简介。这样有利于制作教程，比如代码间夹杂着大量解释性的文本。</p>\n</div>\n<p>所以在确认 <a href=\"/zh-CN/docs/Web/HTML/Element/pre\"><code>&lt;pre&gt;</code></a> 块被正确标记为其所用语言以提供语言的语法高亮之后，你就可以继续了。</p>"}},{"type":"prose","value":{"id":"运行实例演示","title":"运行实例演示","isH3":false,"content":"<p>这部分是使用“插入运行实例模板”按钮插入运行实例标题和代码块的结果。每种语言可以有不止一个代码块。同样也不需要有特定的顺序，所有代码会被混合匹配。</p>\n<p>可以选择删除任何部分。如果不需要脚本，那么删掉脚本的标题和代码块就可以了。同样，也可以在不再被运行实例宏使用的情况下，删掉代码块的标题（“HTML”、“CSS”或“JavaScript”）。</p>\n<p>代码模板插入之后，可以增加一些代码，也可以加入一些注释。</p>"}},{"type":"prose","value":{"id":"html","title":"HTML","isH3":true,"content":"<p>这段 HTML 代码创建了一个段落和几个块级元素（<code>div</code>）以定位和为信息添加样式。</p>\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span>A simple example of the live sample system in action.<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>box<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>item<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Hello world! Welcome to MDN<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"css","title":"CSS","isH3":true,"content":"<p>这段 CSS 代码为 box 和其中的文字添加样式。</p>\n<div class=\"code-example\"><pre class=\"brush: css notranslate\"><code><span class=\"token selector\">.box</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 200px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">border-radius</span><span class=\"token punctuation\">:</span> 6px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span> 20px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">background-color</span><span class=\"token punctuation\">:</span> #ffaabb<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">#item</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">font-weight</span><span class=\"token punctuation\">:</span> bold<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">text-align</span><span class=\"token punctuation\">:</span> center<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">font-family</span><span class=\"token punctuation\">:</span> sans-serif<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">font-size</span><span class=\"token punctuation\">:</span> 1.5em<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"javascript","title":"JavaScript","isH3":true,"content":"<p>这段代码很简单，只是增加了一个点击事件处理器来弹出信息。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> el <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'item'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nel<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Owww, stop poking me!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"结果","title":"结果","isH3":true,"content":"<p>这是通过 <code>{{EmbedLiveSample('运行实例演示')}}</code> 来展示上面运行代码块的结果。</p><iframe class=\"sample-code-frame\" title=\"运行实例演示 sample\" id=\"frame_运行实例演示\" src=\"https://yari-demos.prod.mdn.mozit.cloud/zh-CN/docs/MDN/Writing_guidelines/Page_structures/Live_samples/_sample_.%E8%BF%90%E8%A1%8C%E5%AE%9E%E4%BE%8B%E6%BC%94%E7%A4%BA.html\" loading=\"lazy\"></iframe>\n<p>这是使用外链宏 <code>{{LiveSampleLink('运行实例演示', '运行实例演示链接')}}</code> 来展示实例运行的结果：</p><a href=\"https://yari-demos.prod.mdn.mozit.cloud/zh-CN/docs/MDN/Writing_guidelines/Page_structures/Live_samples/_sample_.%E8%BF%90%E8%A1%8C%E5%AE%9E%E4%BE%8B%E6%BC%94%E7%A4%BA.html\" class=\"external\" rel=\" noopener\">运行实例演示链接</a>"}},{"type":"prose","value":{"id":"关于运行实例的约定","title":"关于运行实例的约定","isH3":false,"content":"<dl>\n  <dt id=\"代码块顺序\">代码块顺序</dt>\n  <dd>\n    <p>添加运行实例时，应对代码块进行排序，以便使第一个代码块对应该示例的主要语言（如果有的话）。例如，在 HTML 参考中添加运行实例时，第一个代码块应该是 HTML；在 CSS 参考中添加时，第一个代码块则应该是 CSS；以此类推。</p>\n  </dd>\n  <dt id=\"标题命名\">标题命名</dt>\n  <dd>\n    <p>在没有歧义的情况下（如，例子位于“示例”部分中），标题应该简明扼要，仅使用相应语言的名称：HTML、CSS、CSS、JavasScript、SVG 等（见上文）。不应使用如“HTML 内容”或“JavaScript 内容”等标题。但是，如果这样的短标题无法明确内容，可以使用更具体的标题。</p>\n  </dd>\n  <dt id=\"使用“结果”块\">使用“结果”块</dt>\n  <dd>\n    <p>在不同的代码块之后，请在最后调用 <code>EmbedLiveSample</code> 宏之前使用“结果”块（见上文）。这样，示例的语义对于阅读器或其它解析页面的工具（如：屏幕阅读器、网络爬虫）都会变得更加清晰。</p>\n  </dd>\n</dl>"}}],"toc":[{"text":"运行实例系统如何工作","id":"运行实例系统如何工作"},{"text":"使用运行实例系统","id":"使用运行实例系统"},{"text":"运行实例演示","id":"运行实例演示"},{"text":"关于运行实例的约定","id":"关于运行实例的约定"}],"summary":"MDN 支持将文章中的示例代码转化为读者可以实际查看的在线演示。这被称为运行实例，使得用户可以查看代码的实际输出。这使得文档变得更具动态性和指导性。","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Live examples","locale":"en-US","native":"English (US)"},{"title":"Cómo convertir códigos de demostración para que estén \"en vivo\"","locale":"es","native":"Español"},{"title":"Comment convertir des exemples de code pour qu'ils soient \"live\"","locale":"fr","native":"Français"},{"title":"ライブサンプル","locale":"ja","native":"日本語"},{"title":"Como converter exemplos de codigos para funcionar \"ao vivo\"","locale":"pt-BR","native":"Português (do Brasil)"},{"title":"Как \"оживить\" примеры кода","locale":"ru","native":"Русский"}],"source":{"folder":"zh-cn/mdn/writing_guidelines/page_structures/live_samples","github_url":"https://github.com/mdn/translated-content/blob/main/files/zh-cn/mdn/writing_guidelines/page_structures/live_samples/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/zh-CN/docs/MDN","title":"MDN 项目"},{"uri":"/zh-CN/docs/MDN/Writing_guidelines","title":"撰写指南"},{"uri":"/zh-CN/docs/MDN/Writing_guidelines/Page_structures","title":"文档结构"},{"uri":"/zh-CN/docs/MDN/Writing_guidelines/Page_structures/Live_samples","title":"运行实例"}],"pageTitle":"运行实例 - MDN 项目 | MDN","noIndexing":false}}