{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"开发式平台","mdn_url":"/zh-CN/docs/Web/API/Push_API","locale":"zh-CN","native":"中文 (简体)","sidebarHTML":"<ol><li><strong><a href=\"/zh-CN/docs/Web/API/Push_API\">Push API</a></strong></li><li class=\"toggle\"><details open=\"\"><summary>指南</summary><ol><li><a href=\"/zh-CN/docs/Web/API/Push_API/Best_Practices\">Web Push API Notifications best practices</a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>接口</summary><ol><li><a href=\"/zh-CN/docs/Web/API/PushManager\"><code>PushManager</code></a></li><li><a href=\"/zh-CN/docs/Web/API/PushSubscription\"><code>PushSubscription</code></a></li><li><a href=\"/zh-CN/docs/Web/API/PushEvent\"><code>PushEvent</code></a></li><li><a href=\"/zh-CN/docs/Web/API/PushMessageData\"><code>PushMessageData</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>属性</summary><ol><li><a href=\"/zh-CN/docs/Web/API/ServiceWorkerRegistration/pushManager\"><code>ServiceWorkerRegistration.pushManager</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>事件</summary><ol><li><a href=\"/zh-CN/docs/Web/API/ServiceWorkerGlobalScope/push_event\"><code>ServiceWorkerGlobalScope</code>: <code>push</code></a></li><li><a href=\"/zh-CN/docs/Web/API/ServiceWorkerGlobalScope/pushsubscriptionchange_event\"><code>ServiceWorkerGlobalScope</code>: <code>pushsubscriptionchange</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<div class=\"notecard experimental\" id=\"sect1\"><p><strong>Experimental:</strong> <strong>这是一个实验中的功能</strong><br>此功能某些浏览器尚在开发中，请参考<a href=\"#browser_compatibility\">浏览器兼容性表格</a>以得到在不同浏览器中适合使用的前缀。由于该功能对应的标准文档可能被重新修订，所以在未来版本的浏览器中该功能的语法和行为可能随之改变。</p></div>\n<p><strong>Push API</strong> 给与了 Web 应用程序接收从服务器发出的推送消息的能力，无论 Web 应用程序是否在用户设备前台，甚至刚加载完成。这样，开发人员就可以向用户投放异步通知和更新，从而让用户能更及时地获取新内容。</p>\n<div class=\"notecard note\" id=\"sect2\">\n  <p><strong>备注：</strong> 本文档涵盖了 W3C Push API 规范; 如果您正在寻找有关 Firefox OS 专有推送机制的文档，请参阅 <a href=\"/zh-CN/docs/Web/API/Simple_Push_API\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">Simple Push</a>.</p>\n</div>"}},{"type":"prose","value":{"id":"push_的概念及用法","title":"Push 的概念及用法","isH3":false,"content":"<p>对于一个应用来说，要想要接收到推送消息，需要有一个被激活的 <a href=\"/en-US/docs/Web/API/Service_Worker_API\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">service worker (en-US)</a>。当 service worker 处于激活状态时，可以使用 <a href=\"/zh-CN/docs/Web/API/PushManager/subscribe\"><code>PushManager.subscribe()</code></a> 来订阅推送通知。</p>\n<p><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PushSubscription\"><code>PushSubscription</code> <small>(en-US)</small></a> 的结果包含了应用需要发送的推送消息的所有信息：端点及发送数据需要的加密密钥。</p>\n<p>Service worker 会在必要的时候启动并接收接下来的推送消息，传递给 <a class=\"page-not-created\" title=\"此文档尚未被撰写，期待你的贡献!\"><code>ServiceWorkerGlobalScope.onpush</code></a> 事件句柄。该方法允许将接收到的推送消息使用在应用上，例如通过显示一条通知（使用 <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/ServiceWorkerRegistration/showNotification\"><code>ServiceWorkerRegistration.showNotification()</code> <small>(en-US)</small></a>）</p>\n<p>每一个订阅对 service worker 来说都是唯一的。同时订阅的端点也是一个唯一的 <a href=\"https://www.w3.org/TR/capability-urls/\" class=\"external\" rel=\" noopener\">功能性 URL</a>：端点的信息是给应用发送信息的全部必要条件。所以端点地址需要保证隐私，否则其他应用也可以向你的应用发送消息。</p>\n<p>激活一个 service worker 来提供推送消息会导致资源消耗的增加，尤其是电池。不同的浏览器对此有不同的方案——目前为止还没有标准的机制。Firefox 允许对发送给应用的推送消息做数量限制（配额）。该限制会在站点每一次被访问之后刷新。相比之下，Chrome 选择不做限制，但要求站点在每一次消息到达后都显示通知，这样可以让用户确认他们仍希望接收消息并确保用户可见性。</p>\n<div class=\"notecard note\" id=\"sect3\">\n  <p><strong>备注：</strong> 从 Gecko 44 开始，当新的通知触发时，每个应用程序允许的推送消息配额不会增加，而另一个仍然可见，持续三秒钟。 这可以处理收到通知突发的情况，而不是所有通知都会产生可见通知。</p>\n</div>\n<div class=\"notecard note\" id=\"sect4\">\n  <p><strong>备注：</strong> 早于 52 的 Chrome 版本要求您在<a href=\"https://developers.google.com/cloud-messaging/\" class=\"external\" rel=\" noopener\">Google Cloud Messaging</a>上设置项目以发送推送消息，并在发送推送通知时使用关联的项目编号和 API 密钥。 它还需要一个应用程序清单，其中包含一些使用此服务的特殊参数。</p>\n</div>"}},{"type":"prose","value":{"id":"接口","title":"接口","isH3":false,"content":"<dl>\n  <dt id=\"pushevent_en-us\"><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PushEvent\"><code>PushEvent</code> <small>(en-US)</small></a></dt>\n  <dd>\n    <p>Represents a push action sent to the <a href=\"/zh-CN/docs/Web/API/ServiceWorkerGlobalScope\">global scope</a> of a <a href=\"/zh-CN/docs/Web/API/ServiceWorker\"><code>ServiceWorker</code></a>. It contains information sent from an application to a <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PushSubscription\"><code>PushSubscription</code> <small>(en-US)</small></a>.</p>\n  </dd>\n  <dt id=\"pushmanager\"><a href=\"/zh-CN/docs/Web/API/PushManager\"><code>PushManager</code></a></dt>\n  <dd>\n    <p>Provides a way to receive notifications from third-party servers as well as request URLs for push notifications. This interface has replaced functionality offered by the obsolete <a class=\"page-not-created\" title=\"此文档尚未被撰写，期待你的贡献!\"><code>PushRegistrationManager</code></a> interface.</p>\n  </dd>\n  <dt id=\"pushmessagedata\"><a href=\"/zh-CN/docs/Web/API/PushMessageData\"><code>PushMessageData</code></a></dt>\n  <dd>\n    <p>Provides access to push data sent by a server, and includes methods to manipulate the received data.</p>\n  </dd>\n  <dt id=\"pushsubscription_en-us\"><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PushSubscription\"><code>PushSubscription</code> <small>(en-US)</small></a></dt>\n  <dd>\n    <p>Provides a subcription's URL endpoint and allows unsubscription from a push service.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"service_worker_additions","title":"Service worker additions","isH3":false,"content":"<p>The following additions to the <a href=\"/zh-CN/docs/Web/API/Service_Worker_API\">Service Worker API</a> have been specified in the Push API spec to provide an entry point for using Push messages. They also monitor and respond to push and subscription change events.</p>\n<dl>\n  <dt id=\"serviceworkerregistration.pushmanager\"><a href=\"/zh-CN/docs/Web/API/ServiceWorkerRegistration/pushManager\"><code>ServiceWorkerRegistration.pushManager</code></a> <span title=\"该属性的值无法更改\" class=\"badge inline readonly\">只读 </span></dt>\n  <dd>\n    <p>Returns a reference to the <a href=\"/zh-CN/docs/Web/API/PushManager\"><code>PushManager</code></a> interface for managing push subscriptions including subscribing, getting an active subscription, and accessing push permission status. This is the entry point into using Push messaging.</p>\n  </dd>\n  <dt id=\"serviceworkerglobalscope.onpush\"><a class=\"page-not-created\" title=\"此文档尚未被撰写，期待你的贡献!\"><code>ServiceWorkerGlobalScope.onpush</code></a></dt>\n  <dd>\n    <p>An event handler fired whenever a <code><a href=\"/zh-CN/docs/Web/Reference/Events/push\" title=\"This is a link to an unwritten page\" class=\"page-not-created\">push</a></code> event occurs; that is, whenever a server push message is received.</p>\n  </dd>\n  <dt id=\"serviceworkerglobalscope.onpushsubscriptionchange\"><a class=\"page-not-created\" title=\"此文档尚未被撰写，期待你的贡献!\"><code>ServiceWorkerGlobalScope.onpushsubscriptionchange</code></a></dt>\n  <dd>\n    <p>An event handler fired whenever a <code><a href=\"/zh-CN/docs/Web/Reference/Events/pushsubscriptionchange\" title=\"This is a link to an unwritten page\" class=\"page-not-created\">pushsubscriptionchange</a></code> event occurs; for example, when a push subscription has been invalidated, or is about to be invalidated (e.g. when a push service sets an expiration time.)</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"示例","title":"示例","isH3":false,"content":"<p>Mozilla's <a href=\"https://serviceworke.rs/\" class=\"external\" rel=\" noopener\">ServiceWorker Cookbook</a> 包含很多关于 Push 有用的示例。</p>"}},{"type":"specifications","value":{"title":"规范","id":"规范","isH3":false,"query":"api.PushEvent,api.PushMessageData","specifications":[]}},{"type":"browser_compatibility","value":{"title":"浏览器兼容性","id":"浏览器兼容性","isH3":false,"data":null,"query":"api.PushEvent,api.PushMessageData","browsers":null}},{"type":"prose","value":{"id":"参见","title":"参见","isH3":false,"content":"<ul>\n  <li><a href=\"https://blog.mozilla.org/services/2016/08/23/sending-vapid-identified-webpush-notifications-via-mozillas-push-service/\" class=\"external\" rel=\" noopener\">Sending VAPID identified WebPush Notifications via Mozilla’s Push Service</a></li>\n  <li><a href=\"https://developers.google.com/web/fundamentals/engage-and-retain/push-notifications/\" class=\"external\" rel=\" noopener\">Web Push Notifications: Timely, Relevant, and Precise</a>, Joseph Medley</li>\n  <li><a href=\"/zh-CN/docs/Web/API/Service_Worker_API\">Service Worker API</a></li>\n</ul>"}}],"toc":[{"text":"Push 的概念及用法","id":"push_的概念及用法"},{"text":"接口","id":"接口"},{"text":"Service worker additions","id":"service_worker_additions"},{"text":"示例","id":"示例"},{"text":"规范","id":"规范"},{"text":"浏览器兼容性","id":"浏览器兼容性"},{"text":"参见","id":"参见"}],"summary":"Push API 给与了 Web 应用程序接收从服务器发出的推送消息的能力，无论 Web 应用程序是否在用户设备前台，甚至刚加载完成。这样，开发人员就可以向用户投放异步通知和更新，从而让用户能更及时地获取新内容。","popularity":0.0003,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Push API","locale":"en-US","native":"English (US)"},{"title":"Push API","locale":"es","native":"Español"},{"title":"Push API","locale":"fr","native":"Français"},{"title":"Push API","locale":"ja","native":"日本語"},{"title":"Push API","locale":"ko","native":"한국어"},{"title":"API Push","locale":"pt-BR","native":"Português (do Brasil)"},{"title":"Push API","locale":"ru","native":"Русский"}],"source":{"folder":"zh-cn/web/api/push_api","github_url":"https://github.com/mdn/translated-content/blob/main/files/zh-cn/web/api/push_api/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/zh-CN/docs/Web","title":"Web 开发技术"},{"uri":"/zh-CN/docs/Web/API","title":"Web API 接口参考"},{"uri":"/zh-CN/docs/Web/API/Push_API","title":"开发式平台"}],"pageTitle":"开发式平台 - Web API 接口参考 | MDN","noIndexing":false}}