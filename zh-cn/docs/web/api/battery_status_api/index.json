{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"Battery Status API","mdn_url":"/zh-CN/docs/Web/API/Battery_Status_API","locale":"zh-CN","native":"中文 (简体)","sidebarHTML":"<ol><li><strong><a href=\"/zh-CN/docs/Web/API/Battery_Status_API\">Battery Status API</a></strong></li><li class=\"toggle\"><details open=\"\"><summary>接口</summary><ol><li><a href=\"/zh-CN/docs/Web/API/BatteryManager\"><code>BatteryManager</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>方法</summary><ol><li><a href=\"/zh-CN/docs/Web/API/Navigator/getBattery\"><code>Navigator.getBattery()</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p><strong>Battery Status API</strong>，更多时候被称之为 <strong>Battery API</strong>, 提供了有关系统充电级别的信息并提供了通过电池等级或者充电状态的改变提醒用户的事件。这个可以在设备电量低的时候调整应用的资源使用状态，或者在电池用尽前保存应用中的修改以防数据丢失。</p>\n<p>Battery Status API 向 <a href=\"/zh-CN/docs/Web/API/Window/navigator\"><code>window.navigator</code></a> 扩展了一个 <a href=\"/zh-CN/docs/Web/API/Navigator/getBattery\"><code>navigator.getBattery</code></a> 方法，其返回了一个 battery promise, 完成后传递一个 <a href=\"/zh-CN/docs/Web/API/BatteryManager\"><code>BatteryManager</code></a> 对象，并提供了一些新的可以操作电池状态的事件。</p>"}},{"type":"prose","value":{"id":"例子","title":"例子","isH3":false,"content":"<p>在这个例子中，我们同时监听放电状态和电池等级和剩余事件的事件（不论是否正在充电还是在使用电池）。这可以通过监听 <code><a href=\"/zh-CN/docs/Web/Reference/Events/chargingchange\" title=\"This is a link to an unwritten page\" class=\"page-not-created\">chargingchange</a></code>, <code><a href=\"/zh-CN/docs/Web/Reference/Events/levelchange\" title=\"This is a link to an unwritten page\" class=\"page-not-created\">levelchange</a></code>, <code><a href=\"/zh-CN/docs/Web/Reference/Events/chargingtimechange\" title=\"This is a link to an unwritten page\" class=\"page-not-created\">chargingtimechange</a></code>, <code><a href=\"/zh-CN/docs/Web/Reference/Events/dischargingtimechange\" title=\"This is a link to an unwritten page\" class=\"page-not-created\">dischargingtimechange</a></code> 事件完成。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>navigator<span class=\"token punctuation\">.</span><span class=\"token function\">getBattery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">battery</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Battery charging? \"</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>battery<span class=\"token punctuation\">.</span>charging <span class=\"token operator\">?</span> <span class=\"token string\">\"Yes\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"No\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Battery level: \"</span> <span class=\"token operator\">+</span> battery<span class=\"token punctuation\">.</span>level <span class=\"token operator\">*</span> <span class=\"token number\">100</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"%\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Battery charging time: \"</span> <span class=\"token operator\">+</span> battery<span class=\"token punctuation\">.</span>chargingTime <span class=\"token operator\">+</span> <span class=\"token string\">\" seconds\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Battery discharging time: \"</span> <span class=\"token operator\">+</span> battery<span class=\"token punctuation\">.</span>dischargingTime <span class=\"token operator\">+</span> <span class=\"token string\">\" seconds\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  battery<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'chargingchange'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Battery charging? \"</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span>battery<span class=\"token punctuation\">.</span>charging <span class=\"token operator\">?</span> <span class=\"token string\">\"Yes\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"No\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  battery<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'levelchange'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Battery level: \"</span> <span class=\"token operator\">+</span> battery<span class=\"token punctuation\">.</span>level <span class=\"token operator\">*</span> <span class=\"token number\">100</span> <span class=\"token operator\">+</span> <span class=\"token string\">\"%\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  battery<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'chargingtimechange'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Battery charging time: \"</span> <span class=\"token operator\">+</span> battery<span class=\"token punctuation\">.</span>chargingTime <span class=\"token operator\">+</span> <span class=\"token string\">\" seconds\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  battery<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dischargingtimechange'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Battery discharging time: \"</span> <span class=\"token operator\">+</span> battery<span class=\"token punctuation\">.</span>dischargingTime <span class=\"token operator\">+</span> <span class=\"token string\">\" seconds\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>另见 <a href=\"https://www.w3.org/TR/battery-status/#examples\" class=\"external\" rel=\" noopener\">标准中的例子</a>.</p>"}},{"type":"specifications","value":{"title":"规范","id":"规范","isH3":false,"specifications":[{"bcdSpecificationURL":"https://w3c.github.io/battery/#the-batterymanager-interface","title":"Battery Status API"}],"query":"api.BatteryManager"}},{"type":"browser_compatibility","value":{"title":"浏览器兼容性","id":"浏览器兼容性","isH3":false,"query":"api.BatteryManager","dataURL":"/zh-CN/docs/Web/API/Battery_Status_API/bcd.json"}},{"type":"prose","value":{"id":"另见","title":"另见","isH3":false,"content":"<ul>\n  <li><a href=\"/zh-CN/docs/Web/Apps/Build/gather_and_modify_data/retrieving_battery_status_information\">Retrieving battery status information - demo &amp; article</a></li>\n  <li><a href=\"https://hacks.mozilla.org/2012/02/using-the-battery-api-part-of-webapi/\" class=\"external\" rel=\" noopener\">Hacks blog post - Using the Battery API</a></li>\n</ul>"}}],"toc":[{"text":"例子","id":"例子"},{"text":"规范","id":"规范"},{"text":"浏览器兼容性","id":"浏览器兼容性"},{"text":"另见","id":"另见"}],"summary":"Battery Status API，更多时候被称之为 Battery API, 提供了有关系统充电级别的信息并提供了通过电池等级或者充电状态的改变提醒用户的事件。这个可以在设备电量低的时候调整应用的资源使用状态，或者在电池用尽前保存应用中的修改以防数据丢失。","popularity":0.0002,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Battery Status API","locale":"en-US","native":"English (US)"},{"title":"API de Estado de Bateria","locale":"es","native":"Español"},{"title":"API Battery Status","locale":"fr","native":"Français"},{"title":"Battery Status API","locale":"ja","native":"日本語"},{"title":"Battery Status API","locale":"ko","native":"한국어"},{"title":"Battery Status API","locale":"pt-BR","native":"Português (do Brasil)"},{"title":"Battery Status API","locale":"zh-TW","native":"正體中文 (繁體)"}],"source":{"folder":"zh-cn/web/api/battery_status_api","github_url":"https://github.com/mdn/translated-content/blob/main/files/zh-cn/web/api/battery_status_api/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/zh-CN/docs/Web","title":"Web 开发技术"},{"uri":"/zh-CN/docs/Web/API","title":"Web API 接口参考"},{"uri":"/zh-CN/docs/Web/API/Battery_Status_API","title":"Battery Status API"}],"pageTitle":"Battery Status API - Web API 接口参考 | MDN","noIndexing":false}}