{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"Selection","mdn_url":"/zh-CN/docs/Web/API/Selection","locale":"zh-CN","native":"中文 (简体)","sidebarHTML":"<ol><li><strong><a href=\"/zh-CN/docs/Web/API/Document_Object_Model\">Document Object Model</a></strong></li><li><strong><a href=\"/zh-CN/docs/Web/API/Selection\"><code>Selection</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>属性</summary><ol><li><a href=\"/zh-CN/docs/Web/API/Selection/anchorNode\"><code>anchorNode</code></a></li><li><a href=\"/zh-CN/docs/Web/API/Selection/anchorOffset\"><code>anchorOffset</code></a></li><li><a href=\"/zh-CN/docs/Web/API/Selection/focusNode\"><code>focusNode</code></a></li><li><a href=\"/zh-CN/docs/Web/API/Selection/focusOffset\"><code>focusOffset</code></a></li><li><a href=\"/zh-CN/docs/Web/API/Selection/isCollapsed\"><code>isCollapsed</code></a></li><li><a href=\"/zh-CN/docs/Web/API/Selection/rangeCount\"><code>rangeCount</code></a></li><li><a href=\"/zh-CN/docs/Web/API/Selection/type\"><code>type</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>方法</summary><ol><li><a href=\"/zh-CN/docs/Web/API/Selection/addRange\"><code>addRange()</code></a></li><li><a href=\"/zh-CN/docs/Web/API/Selection/collapse\"><code>collapse()</code></a></li><li><a href=\"/zh-CN/docs/Web/API/Selection/collapseToEnd\"><code>collapseToEnd()</code></a></li><li><a href=\"/zh-CN/docs/Web/API/Selection/collapseToStart\"><code>collapseToStart()</code></a></li><li><a href=\"/zh-CN/docs/Web/API/Selection/containsNode\"><code>containsNode()</code></a></li><li><a href=\"/zh-CN/docs/Web/API/Selection/deleteFromDocument\"><code>deleteFromDocument()</code></a></li><li><a href=\"/zh-CN/docs/Web/API/Selection/extend\"><code>extend()</code></a></li><li><a href=\"/zh-CN/docs/Web/API/Selection/getRangeAt\"><code>getRangeAt()</code></a></li><li><a href=\"/zh-CN/docs/Web/API/Selection/modify\"><code>modify()</code></a></li><li><a href=\"/zh-CN/docs/Web/API/Selection/removeAllRanges\"><code>removeAllRanges()</code></a></li><li><a href=\"/zh-CN/docs/Web/API/Selection/removeRange\"><code>removeRange()</code></a></li><li><a href=\"/zh-CN/docs/Web/API/Selection/selectAllChildren\"><code>selectAllChildren()</code></a></li><li><a href=\"/zh-CN/docs/Web/API/Selection/setBaseAndExtent\"><code>setBaseAndExtent()</code></a></li><li><a href=\"/zh-CN/docs/Web/API/Selection/toString\"><code>toString()</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>DOM 的相关页面</summary><ol><li><a href=\"/zh-CN/docs/Web/API/AbortController\"><code>AbortController</code></a></li><li><a href=\"/zh-CN/docs/Web/API/AbortSignal\"><code>AbortSignal</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/AbstractRange\"><code>AbstractRange</code> <small>(en-US)</small></a></li><li><a href=\"/zh-CN/docs/Web/API/Attr\"><code>Attr</code></a></li><li><a href=\"/zh-CN/docs/Web/API/CDATASection\"><code>CDATASection</code></a></li><li><a href=\"/zh-CN/docs/Web/API/CharacterData\"><code>CharacterData</code></a></li><li><a href=\"/zh-CN/docs/Web/API/Comment\"><code>Comment</code></a></li><li><a href=\"/zh-CN/docs/Web/API/CustomEvent\"><code>CustomEvent</code></a></li><li><a href=\"/zh-CN/docs/Web/API/DOMError\"><code>DOMError</code></a></li><li><a href=\"/zh-CN/docs/Web/API/DOMException\"><code>DOMException</code></a></li><li><a href=\"/zh-CN/docs/Web/API/DOMImplementation\"><code>DOMImplementation</code></a></li><li><a href=\"/zh-CN/docs/Web/API/DOMParser\"><code>DOMParser</code></a></li><li><a href=\"/zh-CN/docs/Web/API/DOMPoint\"><code>DOMPoint</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DOMPointReadOnly\"><code>DOMPointReadOnly</code> <small>(en-US)</small></a></li><li><a href=\"/zh-CN/docs/Web/API/DOMRect\"><code>DOMRect</code></a></li><li><a href=\"/zh-CN/docs/Web/API/DOMTimeStamp\"><code>DOMTimeStamp</code></a></li><li><a href=\"/zh-CN/docs/Web/API/DOMTokenList\"><code>DOMTokenList</code></a></li><li><a href=\"/zh-CN/docs/Web/API/Document\"><code>Document</code></a></li><li><a href=\"/zh-CN/docs/Web/API/DocumentFragment\"><code>DocumentFragment</code></a></li><li><a href=\"/zh-CN/docs/Web/API/DocumentType\"><code>DocumentType</code></a></li><li><a href=\"/zh-CN/docs/Web/API/Element\"><code>Element</code></a></li><li><a href=\"/zh-CN/docs/Web/API/Event\"><code>Event</code></a></li><li><a href=\"/zh-CN/docs/Web/API/EventTarget\"><code>EventTarget</code></a></li><li><a href=\"/zh-CN/docs/Web/API/HTMLCollection\"><code>HTMLCollection</code></a></li><li><a href=\"/zh-CN/docs/Web/API/MutationObserver\"><code>MutationObserver</code></a></li><li><a href=\"/zh-CN/docs/Web/API/NamedNodeMap\"><code>NamedNodeMap</code></a></li><li><a href=\"/zh-CN/docs/Web/API/Node\"><code>Node</code></a></li><li><a href=\"/zh-CN/docs/Web/API/NodeIterator\"><code>NodeIterator</code></a></li><li><a href=\"/zh-CN/docs/Web/API/NodeList\"><code>NodeList</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/ProcessingInstruction\"><code>ProcessingInstruction</code> <small>(en-US)</small></a></li><li><a href=\"/zh-CN/docs/Web/API/Range\"><code>Range</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/StaticRange\"><code>StaticRange</code> <small>(en-US)</small></a></li><li><a href=\"/zh-CN/docs/Web/API/Text\"><code>Text</code></a></li><li><a href=\"/zh-CN/docs/Web/API/TextDecoder\"><code>TextDecoder</code></a></li><li><a href=\"/zh-CN/docs/Web/API/TextEncoder\"><code>TextEncoder</code></a></li><li><a href=\"/zh-CN/docs/Web/API/TimeRanges\"><code>TimeRanges</code></a></li><li><a href=\"/zh-CN/docs/Web/API/TreeWalker\"><code>TreeWalker</code></a></li><li><a href=\"/zh-CN/docs/Web/API/XMLDocument\"><code>XMLDocument</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<div class=\"notecard experimental\" id=\"sect1\"><p><strong>Experimental:</strong> <strong>这是一个实验中的功能</strong><br>此功能某些浏览器尚在开发中，请参考<a href=\"#browser_compatibility\">浏览器兼容性表格</a>以得到在不同浏览器中适合使用的前缀。由于该功能对应的标准文档可能被重新修订，所以在未来版本的浏览器中该功能的语法和行为可能随之改变。</p></div>\n<p><code>Selection</code> 对象表示用户选择的文本范围或插入符号的当前位置。它代表页面中的文本选区，可能横跨多个元素。文本选区由用户拖拽鼠标经过文字而产生。要获取用于检查或修改的 Selection 对象，请调用 <a href=\"/zh-CN/docs/Web/API/Window/getSelection\"><code>window.getSelection()</code></a>。</p>\n<p>一般来说，插入光标的位置可通过 Selection 获取，这时它被标记为 <code>Collapsed</code>，这表示选区被压缩至一点，即光标位置。但要注意它与 <code>focus</code> 事件或 <a href=\"/zh-CN/docs/Web/API/Document/activeElement\"><code>Document.activeElement</code></a> 等的值没有必然联系。</p>\n<p>用户可能从左到右（与文档方向相同）选择文本或从右到左（与文档方向相反）选择文本。<code>anchor</code> 指向用户开始选择的地方，而 <code>focus</code> 指向用户结束选择的地方。如果你使用鼠标选择文本的话，anchor 就指向你按下鼠标键的地方，而 focus 就指向你松开鼠标键的地方。anchor 和 focus 的概念不能与选区的起始位置和终止位置混淆，因为 anchor 指向的位置可能在 focus 指向的位置的前面，也可能在 focus 指向位置的后面，这取决于你选择文本时鼠标移动的方向（也就是按下鼠标键和松开鼠标键的位置）。</p>\n<p>Selection 对象所对应的是用户所选择的 <a href=\"/zh-CN/docs/Web/API/Range\" title=\"ranges\"><code>ranges</code></a>（区域），俗称拖蓝。默认情况下，该函数只针对一个区域，我们可以这样使用这个函数：</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> selObj <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span><span class=\"token function\">getSelection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> range  <span class=\"token operator\">=</span> selObj<span class=\"token punctuation\">.</span><span class=\"token function\">getRangeAt</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<ul>\n  <li><code>selObj</code> 被赋予一个 Selection 对象</li>\n  <li><code>range</code> 被赋予一个 <a href=\"/zh-CN/docs/Web/API/range\">Range</a> 对象</li>\n</ul>\n<p>调用 <a href=\"/zh-CN/docs/Web/API/Selection/toString\"><code>Selection.toString()</code></a> 方法会返回被选中区域中的<strong>纯文本</strong>。要求变量为字符串的函数会自动对对象进行该处理，例如：</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> selObj <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span><span class=\"token function\">getSelection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nwindow<span class=\"token punctuation\">.</span><span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>selObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"术语表","title":"术语表","isH3":false,"content":"<p>本页面使用的其他关键词汇：</p>\n<dl>\n  <dt id=\"锚点_anchor\">锚点 (anchor)</dt>\n  <dd>\n    <p>锚指的是一个选区的起始点（不同于 HTML 中的锚点链接，译者注）。当我们使用鼠标框选一个区域的时候，锚点就是我们鼠标按下瞬间的那个点。在用户拖动鼠标时，锚点是不会变的。</p>\n  </dd>\n  <dt id=\"焦点_focus\">焦点 (focus)</dt>\n  <dd>\n    <p>选区的焦点是该选区的终点，当您用鼠标框选一个选区的时候，焦点是你的鼠标松开瞬间所记录的那个点。随着用户拖动鼠标，焦点的位置会随着改变。</p>\n  </dd>\n  <dt id=\"范围_range\">范围 (range)</dt>\n  <dd>\n    <p>范围指的是文档中连续的一部分。一个范围包括整个节点，也可以包含节点的一部分，例如文本节点的一部分。用户通常下只能选择一个范围，但是有的时候用户也有可能选择多个范围（例如当用户按下 Control 按键并框选多个区域时，Chrome 中禁止了这个操作，译者注）。“范围”会被作为 <a href=\"/zh-CN/docs/Web/API/Range\"><code>Range</code></a> 对象返回。Range 对象也能通过 DOM 创建、增加、删减。</p>\n  </dd>\n  <dt id=\"可编辑元素_editing_host\">可编辑元素 (editing host)</dt>\n  <dd>\n    <p>一个用户可编辑的元素（例如一个使用 <a href=\"/zh-CN/docs/Web/HTML/Global_attributes#attr-contenteditable\"><code>contenteditable</code></a> 的 HTML 元素，或是在启用了 <a href=\"/zh-CN/docs/Web/API/Document/designMode\" title=\"designMode\"><code>designMode</code></a> 的 <a href=\"/zh-CN/docs/Web/API/Document\"><code>Document</code></a> 的子元素）。详见 <a href=\"#selection_api_在可编辑元素焦点更改方面的行为\">开发者笔记</a>。</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"属性","title":"属性","isH3":false,"content":"<dl>\n  <dt id=\"anchornode\"><a href=\"/zh-CN/docs/Web/API/Selection/anchorNode\" title=\"anchorNode\"><code>anchorNode</code></a><span title=\"该属性的值无法更改\" class=\"badge inline readonly\">只读 </span></dt>\n  <dd>\n    <p>返回该选区起点所在的节点（<a href=\"/zh-CN/docs/Web/API/Node\"><code>Node</code></a>）。</p>\n  </dd>\n  <dt id=\"anchoroffset\"><a href=\"/zh-CN/docs/Web/API/Selection/anchorOffset\" title=\"anchorOffset\"><code>anchorOffset</code></a><span title=\"该属性的值无法更改\" class=\"badge inline readonly\">只读 </span></dt>\n  <dd>\n    <p>返回一个数字，其表示的是选区起点在 <a href=\"/zh-CN/docs/Web/API/Selection/anchorNode\" title=\"anchorNode\"><code>anchorNode</code></a> 中的位置偏移量。</p>\n    <ol>\n      <li>如果 <code>anchorNode</code> 是文本节点，那么返回的就是从该文字节点的第一个字开始，直到被选中的第一个字之间的字数（如果第一个字就被选中，那么偏移量为零）。</li>\n      <li>如果 <code>anchorNode</code> 是一个元素，那么返回的就是在选区第一个节点之前的同级节点总数。(这些节点都是 <code>anchorNode</code> 的子节点)</li>\n    </ol>\n  </dd>\n  <dt id=\"focusnode\"><a href=\"/zh-CN/docs/Web/API/Selection/focusNode\" title=\"focusNode\"><code>focusNode</code></a><span title=\"该属性的值无法更改\" class=\"badge inline readonly\">只读 </span></dt>\n  <dd>\n    <p>返回该选区终点所在的节点。</p>\n  </dd>\n  <dt id=\"focusoffset\"><a href=\"/zh-CN/docs/Web/API/Selection/focusOffset\" title=\"focusOffset\"><code>focusOffset</code></a><span title=\"该属性的值无法更改\" class=\"badge inline readonly\">只读 </span></dt>\n  <dd>\n    <p>返回一个数字，其表示的是选区终点在 <a href=\"/zh-CN/docs/Web/API/Selection/focusNode\" title=\"focusNode\"><code>focusNode</code></a> 中的位置偏移量。</p>\n    <ol>\n      <li>如果 <code>focusNode</code> 是文本节点，那么选区末尾未被选中的第一个字，在该文字节点中是第几个字（从 0 开始计），就返回它。</li>\n      <li>如果 <code>focusNode</code> 是一个元素，那么返回的就是在选区末尾之后第一个节点之前的同级节点总数。</li>\n    </ol>\n  </dd>\n  <dt id=\"iscollapsed\"><a href=\"/zh-CN/docs/Web/API/Selection/isCollapsed\" title=\"isCollapsed\"><code>isCollapsed</code></a><span title=\"该属性的值无法更改\" class=\"badge inline readonly\">只读 </span></dt>\n  <dd>\n    <p>返回一个布尔值，用于判断选区的起始点和终点是否在同一个位置。</p>\n  </dd>\n  <dt id=\"rangecount\"><a href=\"/zh-CN/docs/Web/API/Selection/rangeCount\" title=\"rangeCount\"><code>rangeCount</code></a><span title=\"该属性的值无法更改\" class=\"badge inline readonly\">只读 </span></dt>\n  <dd>\n    <p>返回该选区所包含的连续范围的数量。</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"方法","title":"方法","isH3":false,"content":"<dl>\n  <dt id=\"getrangeat\"><a href=\"/zh-CN/docs/Web/API/Selection/getRangeAt\" title=\"getRangeAt\"><code>getRangeAt</code></a></dt>\n  <dd>\n    <p>返回选区包含的指定区域（<a href=\"/zh-CN/docs/Web/API/Range\"><code>Range</code></a>）的<strong>引用</strong>。</p>\n  </dd>\n  <dt id=\"collapse\"><a href=\"/zh-CN/docs/Web/API/Selection/collapse\" title=\"collapse\"><code>collapse</code></a></dt>\n  <dd>\n    <p>将当前的选区折叠为一个点。</p>\n  </dd>\n  <dt id=\"extend\"><a href=\"/zh-CN/docs/Web/API/Selection/extend\" title=\"extend\"><code>extend</code></a></dt>\n  <dd>\n    <p>将选区的焦点移动到一个特定的位置。</p>\n  </dd>\n  <dt id=\"modify\"><a href=\"/zh-CN/docs/Web/API/Selection/modify\" title=\"modify\"><code>modify</code></a></dt>\n  <dd>\n    <p>修改当前的选区。</p>\n  </dd>\n  <dt id=\"collapsetostart\"><a href=\"/zh-CN/docs/Web/API/Selection/collapseToStart\" title=\"collapseToStart\"><code>collapseToStart</code></a></dt>\n  <dd>\n    <p>将当前的选区折叠到起始点。</p>\n  </dd>\n  <dt id=\"collapsetoend\"><a href=\"/zh-CN/docs/Web/API/Selection/collapseToEnd\" title=\"collapseToEnd\"><code>collapseToEnd</code></a></dt>\n  <dd>\n    <p>将当前的选区折叠到最末尾的一个点。</p>\n  </dd>\n  <dt id=\"selectallchildren\"><a href=\"/zh-CN/docs/Web/API/Selection/selectAllChildren\" title=\"selectAllChildren\"><code>selectAllChildren</code></a></dt>\n  <dd>\n    <p>将某一指定节点的子节点框入选区。</p>\n  </dd>\n  <dt id=\"addrange\"><a href=\"/zh-CN/docs/Web/API/Selection/addRange\" title=\"addRange\"><code>addRange</code></a></dt>\n  <dd>\n    <p>一个区域（<a href=\"/zh-CN/docs/Web/API/Range\"><code>Range</code></a>）对象将被加入选区。</p>\n  </dd>\n  <dt id=\"removerange\"><a href=\"/zh-CN/docs/Web/API/Selection/removeRange\" title=\"removeRange\"><code>removeRange</code></a></dt>\n  <dd>\n    <p>从选区中移除一个区域。</p>\n  </dd>\n  <dt id=\"removeallranges\"><a href=\"/zh-CN/docs/Web/API/Selection/removeAllRanges\" title=\"removeAllRanges\"><code>removeAllRanges</code></a></dt>\n  <dd>\n    <p>将所有的区域都从选区中移除。</p>\n  </dd>\n  <dt id=\"deletefromdocument\"><a href=\"/zh-CN/docs/Web/API/Selection/deleteFromDocument\" title=\"deleteFromDocument\"><code>deleteFromDocument</code></a></dt>\n  <dd>\n    <p>从页面中删除选区中的内容。</p>\n  </dd>\n  <dt id=\"selectionlanguagechange\"><a class=\"page-not-created\" title=\"此文档尚未被撰写，期待你的贡献!\"><code>selectionLanguageChange</code></a></dt>\n  <dd>\n    <p>当键盘的朝向发生改变后修改指针的 Bidi 优先级。</p>\n  </dd>\n  <dt id=\"tostring\"><a href=\"/zh-CN/docs/Web/API/Selection/toString\" title=\"toString\"><code>toString</code></a></dt>\n  <dd>\n    <p>返回当前选区的纯文本内容。</p>\n  </dd>\n  <dt id=\"containsnode\"><a href=\"/zh-CN/docs/Web/API/Selection/containsNode\" title=\"containsNode\"><code>containsNode</code></a></dt>\n  <dd>\n    <p>判断某一个 <a href=\"/zh-CN/docs/Web/API/Node\"><code>Node</code></a> 是否为当前选区的一部分。</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"开发者笔记","title":"开发者笔记","isH3":false,"content":""}},{"type":"prose","value":{"id":"选区的字符串表示","title":"选区的字符串表示","isH3":true,"content":"<p>调用 <a href=\"/zh-CN/docs/Web/API/Selection/toString\"><code>Selection.toString()</code></a> 方法返回包含在选区内的文本，例如：</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> selObj <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span><span class=\"token function\">getSelection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nwindow<span class=\"token punctuation\">.</span><span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>selObj<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>注意，使用选择对象作为 <code>window.alert</code> 的参数将调用对象的 <code>toString</code> 方法。</p>"}},{"type":"prose","value":{"id":"选区中的多个区域","title":"选区中的多个区域","isH3":true,"content":"<p>一个 <code>Selection</code> 对象表示用户选择的 <a href=\"/zh-CN/docs/Web/API/Range\"><code>Range</code></a> 的集合。通常，它只包含一个区域，访问方式如下：</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> selObj <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span><span class=\"token function\">getSelection</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> range  <span class=\"token operator\">=</span> selObj<span class=\"token punctuation\">.</span><span class=\"token function\">getRangeAt</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<ul>\n  <li><code>selObj</code> 是一个 <code>Selection</code> 对象</li>\n  <li><code>range</code> 是一个 <a href=\"/zh-CN/docs/Web/API/Range\"><code>Range</code></a> 对象</li>\n</ul>\n<p><code>getRangeAt</code> 方法返回对象的<strong>引用</strong>，并且对该函数返回的 <code>Range</code> 对象所运行的函数，会直接作用到选区上，并可能影响用户焦点的情况。</p>\n<p>正如 <a href=\"https://www.w3.org/TR/selection-api/#h_note_15\" class=\"external\" rel=\" noopener\">Selection API 规范</a> 所指出的，Selection API 最初由 Netscape 创建，并允许多个区域（例如，允许用户从 <a href=\"/zh-CN/docs/Web/HTML/Element/table\"><code>&lt;table&gt;</code></a> 中选择列）。但是，Gecko 以外的浏览器没有实现多个区域，而且规范还要求选择的内容始终（仅）具有一个范围（允许多个区域可能引起不必要的兼容性问题，例如同时从多处输入，译者注）。</p>"}},{"type":"prose","value":{"id":"selection_及输入焦点","title":"Selection 及输入焦点","isH3":true,"content":"<p>选择和输入焦点（由 <a href=\"/zh-CN/docs/Web/API/Document/activeElement\"><code>Document.activeElement</code></a> 表示）有一个复杂的关系，该关系因浏览器而异。在跨浏览器兼容的代码中，最好分别处理它们。</p>\n<p>Safari 和 Chrome（与 Firefox 不同）目前在以编程方式修改 <code>Selection</code> 时会将包含选区的元素作为焦点；这可能在将来会发生变化（请参见 <a href=\"https://www.w3.org/Bugs/Public/show_bug.cgi?id=14383\" class=\"external\" rel=\" noopener\">W3C Bug 14383</a> 和 <a rel=\"external noopener\" href=\"https://bugs.webkit.org/show_bug.cgi?id=3869\" class=\"external\" title=\"\">WebKit bug 3869</a>）。</p>\n<p>（目前在 WebKit 中，按钮等元素被直接点击不会修改选区，但会将焦点传递，译者注）</p>"}},{"type":"prose","value":{"id":"selection_api_在可编辑元素焦点更改方面的行为","title":"Selection API 在可编辑元素焦点更改方面的行为","isH3":true,"content":"<p>Selection API 有一个共同的行为（即在浏览器之间共通），该行为控制在调用某些方法后<a href=\"#glossary\">可编辑元素</a>（原文 Editing Hosts，可编辑宿主）的焦点行为如何更改。</p>\n<p>其行为如下：</p>\n<ol>\n  <li>如果先前的选区不在可编辑元素内，则可编辑元素将获得焦点。</li>\n  <li>调用一个 Selection API 方法，从而在可编辑元素内产生一个新选区，来创造一个新的 <code>Selection</code> 区域（<a href=\"/zh-CN/docs/Web/API/Range\"><code>Range</code></a>）。</li>\n  <li>然后焦点（此处应指显示的，译者注）移到可编辑元素。</li>\n</ol>\n<p><strong>注意：Selection API 方法只能将焦点移动到可编辑元素，而不能移动到其他可焦点元素（例如<a href=\"/zh-CN/docs/Web/HTML/Element/a\"><code>&lt;a&gt;</code></a>）。</strong></p>\n<p>上述行为适用于使用以下方法产生的选区：</p>\n<ul>\n  <li><a href=\"/zh-CN/docs/Web/API/Selection/collapse\"><code>Selection.collapse()</code></a></li>\n  <li><a href=\"/zh-CN/docs/Web/API/Selection/collapseToStart\"><code>Selection.collapseToStart()</code></a></li>\n  <li><a href=\"/zh-CN/docs/Web/API/Selection/collapseToEnd\"><code>Selection.collapseToEnd()</code></a></li>\n  <li><a href=\"/zh-CN/docs/Web/API/Selection/extend\"><code>Selection.extend()</code></a></li>\n  <li><a href=\"/zh-CN/docs/Web/API/Selection/selectAllChildren\"><code>Selection.selectAllChildren()</code></a></li>\n  <li><a href=\"/zh-CN/docs/Web/API/Selection/addRange\"><code>Selection.addRange()</code></a></li>\n  <li><a href=\"/zh-CN/docs/Web/API/Selection/setBaseAndExtent\"><code>Selection.setBaseAndExtent()</code></a></li>\n</ul>\n<p>以及在 <a href=\"/zh-CN/docs/Web/API/Range\"><code>Range</code></a> 使用以下方法修改时：</p>\n<ul>\n  <li><a href=\"/zh-CN/docs/Web/API/Range/setStart\"><code>Range.setStart()</code></a></li>\n  <li><a href=\"/zh-CN/docs/Web/API/Range/setEnd\"><code>Range.setEnd()</code></a></li>\n  <li><a href=\"/zh-CN/docs/Web/API/Range/setStartBefore\"><code>Range.setStartBefore()</code></a></li>\n  <li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Range/setStartAfter\"><code>Range.setStartAfter()</code> <small>(en-US)</small></a></li>\n  <li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Range/setEndBefore\"><code>Range.setEndBefore()</code> <small>(en-US)</small></a></li>\n  <li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Range/setEndAfter\"><code>Range.setEndAfter()</code> <small>(en-US)</small></a></li>\n  <li><a href=\"/zh-CN/docs/Web/API/Range/collapse\"><code>Range.collapse()</code></a></li>\n  <li><a href=\"/zh-CN/docs/Web/API/Range/selectNode\"><code>Range.selectNode()</code></a></li>\n  <li><a href=\"/zh-CN/docs/Web/API/Range/selectNodeContents\"><code>Range.selectNodeContents()</code></a></li>\n</ul>"}},{"type":"specifications","value":{"title":"规范","id":"规范","isH3":false,"specifications":[{"bcdSpecificationURL":"https://w3c.github.io/selection-api/#selection-interface","title":"Selection API"}],"query":"api.Selection"}},{"type":"browser_compatibility","value":{"title":"浏览器兼容性","id":"浏览器兼容性","isH3":false,"query":"api.Selection","dataURL":"/zh-CN/docs/Web/API/Selection/bcd.json"}},{"type":"prose","value":{"id":"参见","title":"参见","isH3":false,"content":"<ul>\n  <li><a href=\"/zh-CN/docs/Web/API/Window/getSelection\"><code>window.getSelection</code></a>，<a href=\"/zh-CN/docs/Web/API/Document/getSelection\"><code>document.getSelection</code></a>及<a href=\"/zh-CN/docs/Web/API/Range\"><code>Range</code></a></li>\n  <li>HTML5 DOM Range <a href=\"https://html5.org/specs/dom-range.html#selection\" class=\"external\" rel=\" noopener\">Interface Selection</a></li>\n  <li><a href=\"http://lxr.mozilla.org/mozilla/source/content/base/public/nsISelection.idl\" class=\"external\" rel=\" noopener\">IDL definition in Mozilla cross-reference</a></li>\n  <li><a href=\"http://www.zhihu.com/question/20874144\" class=\"external\" rel=\" noopener\">目前 CSS 实现竖排文本较为通用的方式是什么？</a>（页内搜索\"Bidi\"可了解 Bidi 优先顺序）</li>\n</ul>"}}],"toc":[{"text":"术语表","id":"术语表"},{"text":"属性","id":"属性"},{"text":"方法","id":"方法"},{"text":"开发者笔记","id":"开发者笔记"},{"text":"规范","id":"规范"},{"text":"浏览器兼容性","id":"浏览器兼容性"},{"text":"参见","id":"参见"}],"summary":"Selection 对象表示用户选择的文本范围或插入符号的当前位置。它代表页面中的文本选区，可能横跨多个元素。文本选区由用户拖拽鼠标经过文字而产生。要获取用于检查或修改的 Selection 对象，请调用 window.getSelection()。","popularity":0.0012,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Selection","locale":"en-US","native":"English (US)"},{"title":"Selection","locale":"es","native":"Español"},{"title":"selection","locale":"fr","native":"Français"},{"title":"Selection","locale":"ja","native":"日本語"},{"title":"Selection","locale":"ko","native":"한국어"},{"title":"Seleção","locale":"pt-BR","native":"Português (do Brasil)"},{"title":"Selection","locale":"ru","native":"Русский"}],"source":{"folder":"zh-cn/web/api/selection","github_url":"https://github.com/mdn/translated-content/blob/main/files/zh-cn/web/api/selection/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/zh-CN/docs/Web","title":"Web 开发技术"},{"uri":"/zh-CN/docs/Web/API","title":"Web API 接口参考"},{"uri":"/zh-CN/docs/Web/API/Selection","title":"Selection"}],"pageTitle":"Selection - Web API 接口参考 | MDN","noIndexing":false}}