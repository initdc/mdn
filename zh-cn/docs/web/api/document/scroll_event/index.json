{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"Document: scroll event","mdn_url":"/zh-CN/docs/Web/API/Document/scroll_event","locale":"zh-CN","native":"中文 (简体)","sidebarHTML":"","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>文档视图或者一个元素在滚动时，会触发元素的 <strong><code>scroll</code></strong> 事件。</p>\n<table class=\"properties\">\n  <thead></thead>\n  <tbody>\n    <tr>\n      <th>Bubbles</th>\n      <td>Yes</td>\n    </tr>\n    <tr>\n      <th>Cancelable</th>\n      <td>No</td>\n    </tr>\n    <tr>\n      <th>Interface</th>\n      <td><a href=\"/zh-CN/docs/Web/API/Event\"><code>Event</code></a></td>\n    </tr>\n    <tr>\n      <th>Event handler property</th>\n      <td><a href=\"/zh-CN/docs/Web/API/Element/scroll_event\" title=\"onscroll\"><code>onscroll</code></a></td>\n    </tr>\n  </tbody>\n</table>\n<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>备注：</strong> 在 iOS UIWebViews 中，滚动进行时不会触发 <code>scroll</code> 事件；只有当滚动结束后事件才会被触发。参见 <a href=\"https://github.com/twbs/bootstrap/issues/16202\" class=\"external\" rel=\" noopener\">Bootstrap issue #16202</a>。Safari 和 WKWebViews 则没有这个问题。</p>\n</div>"}},{"type":"prose","value":{"id":"示例","title":"示例","isH3":false,"content":""}},{"type":"prose","value":{"id":"scroll_事件节流","title":"Scroll 事件节流","isH3":true,"content":"<p>由于 <code>scroll</code> 事件可被高频触发，事件处理程序不应该执行高性能消耗的操作，如 DOM 操作。而更推荐的做法是使用 <a href=\"/zh-CN/docs/Web/API/Window/requestAnimationFrame\" title=\"requestAnimationFrame()\"><code>requestAnimationFrame()</code></a>、<a href=\"/zh-CN/docs/Web/API/setTimeout\"><code>setTimeout()</code></a> 或 <a href=\"/zh-CN/docs/Web/API/CustomEvent\"><code>CustomEvent</code></a> 给事件节流，如下所述。</p>\n<p>然而需要注意的是，输入事件和动画帧常常以差不多的频率被触发，因此以下优化常常不必要。这个例子使用 <code>requestAnimationFrame</code> 优化 <code>scroll</code> 事件。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// 参见：http://www.html5rocks.com/en/tutorials/speed/animations/</span>\n\n<span class=\"token keyword\">let</span> last_known_scroll_position <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">let</span> ticking <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">scroll_pos</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 根据滚动位置做的事</span>\n<span class=\"token punctuation\">}</span>\n\nwindow<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'scroll'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  last_known_scroll_position <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>scrollY<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>ticking<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span>last_known_scroll_position<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      ticking <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    ticking <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>在 <a href=\"/zh-CN/docs/Web/API/Window/resize_event\"><code>resize</code></a> 事件页面中查看更多类似的例子。</p>"}},{"type":"specifications","value":{"title":"规范","id":"规范","isH3":false,"specifications":[{"bcdSpecificationURL":"https://drafts.csswg.org/cssom-view/#eventdef-document-scroll","title":"CSSOM View Module"}],"query":"api.Document.scroll_event"}},{"type":"browser_compatibility","value":{"title":"浏览器兼容性","id":"浏览器兼容性","isH3":false,"query":"api.Document.scroll_event","dataURL":"/zh-CN/docs/Web/API/Document/scroll_event/bcd.json"}},{"type":"prose","value":{"id":"参见","title":"参见","isH3":false,"content":"<ul>\n  <li><a href=\"/zh-CN/docs/Web/API/Element/scroll_event\">Element: <code>scroll</code> event</a></li>\n</ul>"}}],"toc":[{"text":"示例","id":"示例"},{"text":"规范","id":"规范"},{"text":"浏览器兼容性","id":"浏览器兼容性"},{"text":"参见","id":"参见"}],"summary":"文档视图或者一个元素在滚动时，会触发元素的 scroll 事件。","popularity":0.0008,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Document: scroll event","locale":"en-US","native":"English (US)"},{"title":"scroll","locale":"es","native":"Español"},{"title":"scroll","locale":"fr","native":"Français"},{"title":"Document: scroll event","locale":"ja","native":"日本語"},{"title":"scroll","locale":"ko","native":"한국어"},{"title":"Document: событие scroll","locale":"ru","native":"Русский"},{"title":"Document: scroll事件","locale":"zh-TW","native":"正體中文 (繁體)"}],"source":{"folder":"zh-cn/web/api/document/scroll_event","github_url":"https://github.com/mdn/translated-content/blob/main/files/zh-cn/web/api/document/scroll_event/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/zh-CN/docs/Web","title":"Web 开发技术"},{"uri":"/zh-CN/docs/Web/API","title":"Web API 接口参考"},{"uri":"/zh-CN/docs/Web/API/Document","title":"Document"},{"uri":"/zh-CN/docs/Web/API/Document/scroll_event","title":"Document: scroll event"}],"pageTitle":"Document: scroll event - Web API 接口参考 | MDN","noIndexing":false}}