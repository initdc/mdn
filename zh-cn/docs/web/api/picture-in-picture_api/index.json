{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"画中画（Picture-in-Picture）API","mdn_url":"/zh-CN/docs/Web/API/Picture-in-Picture_API","locale":"zh-CN","native":"中文 (简体)","sidebarHTML":"<ol><li><strong><a href=\"/zh-CN/docs/Web/API/Picture-in-Picture_API\">Picture-in-Picture API</a></strong></li><li class=\"toggle\"><details open=\"\"><summary>接口</summary><ol><li><a href=\"/zh-CN/docs/Web/API/PictureInPictureWindow\"><code>PictureInPictureWindow</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>属性</summary><ol><li><a href=\"/zh-CN/docs/Web/API/HTMLVideoElement/autoPictureInPicture\"><code>HTMLVideoElement.autoPictureInPicture</code></a></li><li><a href=\"/zh-CN/docs/Web/API/HTMLVideoElement/disablePictureInPicture\"><code>HTMLVideoElement.disablePictureInPicture</code></a></li><li><a href=\"/zh-CN/docs/Web/API/Document/pictureInPictureEnabled\"><code>Document.pictureInPictureEnabled</code></a></li><li><a href=\"/zh-CN/docs/Web/API/Document/pictureInPictureElement\"><code>Document.pictureInPictureElement</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>方法</summary><ol><li><a href=\"/zh-CN/docs/Web/API/HTMLVideoElement/requestPictureInPicture\"><code>HTMLVideoElement.requestPictureInPicture()</code></a></li><li><a href=\"/zh-CN/docs/Web/API/Document/exitPictureInPicture\"><code>Document.exitPictureInPicture()</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>事件</summary><ol><li><a href=\"/zh-CN/docs/Web/API/HTMLVideoElement/enterpictureinpicture_event\"><code>HTMLVideoElement</code>: <code>enterpictureinpicture</code></a></li><li><a href=\"/zh-CN/docs/Web/API/HTMLVideoElement/leavepictureinpicture_event\"><code>HTMLVideoElement</code>: <code>leavepictureinpicture</code></a></li><li><a href=\"/zh-CN/docs/Web/API/PictureInPictureWindow/resize_event\"><code>PictureInPictureWindow</code>: <code>resize</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p><strong>画中画 API</strong> 允许网站总是在其它窗口之上创建一个浮动的视频，以便用户在其他内容站点或者设备上的应用程序交互时可以继续播放媒体。</p>"}},{"type":"prose","value":{"id":"接口","title":"接口","isH3":false,"content":"<dl>\n  <dt id=\"pictureinpicturewindow\"><a href=\"/zh-CN/docs/Web/API/PictureInPictureWindow\"><code>PictureInPictureWindow</code></a></dt>\n  <dd>\n    <p>表示浮动的视频窗口；包含 <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PictureInPictureWindow/width\"><code>width</code> <small>(en-US)</small></a> 和 <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PictureInPictureWindow/height\"><code>height</code> <small>(en-US)</small></a> 属性，以及一个 <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PictureInPictureWindow/resize_event\"><code>onresize</code> <small>(en-US)</small></a> 事件处理器属性。</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"方法","title":"方法","isH3":false,"content":"<p>画中画 API 添加了 <a href=\"/zh-CN/docs/Web/API/HTMLVideoElement\"><code>HTMLVideoElement</code></a> 和 <a href=\"/zh-CN/docs/Web/API/Document\"><code>Document</code></a> 接口的方法，以便允许切换浮动视频窗口。</p>"}},{"type":"prose","value":{"id":"htmlvideoelement_接口的方法","title":"HTMLVideoElement 接口的方法","isH3":true,"content":"<dl>\n  <dt id=\"htmlvideoelement.requestpictureinpicture\"><a href=\"/zh-CN/docs/Web/API/HTMLVideoElement/requestPictureInPicture\"><code>HTMLVideoElement.requestPictureInPicture()</code></a></dt>\n  <dd>\n    <p>请求用户代理将视频切换为画中画模式。</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"document_接口的方法","title":"Document 接口的方法","isH3":true,"content":"<dl>\n  <dt id=\"document.exitpictureinpicture\"><a href=\"/zh-CN/docs/Web/API/Document/exitPictureInPicture\"><code>Document.exitPictureInPicture()</code></a></dt>\n  <dd>\n    <p>请求用户代理将元素由画中画模式切换回到它的原始盒子。</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"属性","title":"属性","isH3":false,"content":"<p><em>画中画 API 添加了</em> <a href=\"/zh-CN/docs/Web/API/HTMLVideoElement\"><code>HTMLVideoElement</code></a>、<a href=\"/zh-CN/docs/Web/API/Document\"><code>Document</code></a> 和 <a href=\"/zh-CN/docs/Web/API/ShadowRoot\"><code>ShadowRoot</code></a> 接口的属性，这些属性用于决定浮动的视频窗口是否是受支持和可用的、当前画中画模式是否处于激活状态并且哪个视频是浮动的。</p>"}},{"type":"prose","value":{"id":"htmlvideoelement_接口的属性","title":"HTMLVideoElement 接口的属性","isH3":true,"content":"<dl>\n  <dt id=\"htmlvideoelement.autopictureinpicture\"><a href=\"/zh-CN/docs/Web/API/HTMLVideoElement/autoPictureInPicture\"><code>HTMLVideoElement.autoPictureInPicture</code></a></dt>\n  <dd>\n    <p>当用户切换标签页和（或）应用程序时，<code>autoPictureInPicture</code> 属性将自动进入或离开视频元素的画中画模式。</p>\n  </dd>\n  <dt id=\"htmlvideoelement.disablepictureinpicture\"><a href=\"/zh-CN/docs/Web/API/HTMLVideoElement/disablePictureInPicture\"><code>HTMLVideoElement.disablePictureInPicture</code></a></dt>\n  <dd>\n    <p><code>disablePictureInPicture</code> 属性将指示用户代理是否应该向用户建议画中画的功能。</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"document_接口的属性","title":"Document 接口的属性","isH3":true,"content":"<dl>\n  <dt id=\"document.pictureinpictureenabled\"><a href=\"/zh-CN/docs/Web/API/Document/pictureInPictureEnabled\"><code>Document.pictureInPictureEnabled</code></a></dt>\n  <dd>\n    <p><code>pictureInPictureEnabled</code> 属性告诉你是否可以使用画中画模式。如果画中画模式因任何原因不可用（例如<a href=\"/zh-CN/docs/Web/HTTP/Headers/Feature-Policy/picture-in-picture\"><code>\"画中画\"</code>功能</a> 不被接受，或者不支持画中画模式），则是 <code>false</code> 。</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"document_或_shadowroot_接口的属性","title":"Document 或 ShadowRoot 接口的属性","isH3":true,"content":"<dl>\n  <dt id=\"document.pictureinpictureelement\"><a href=\"/zh-CN/docs/Web/API/Document/pictureInPictureElement\"><code>Document.pictureInPictureElement</code></a> / <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/ShadowRoot/pictureInPictureElement\"><code>ShadowRoot.pictureInPictureElement</code> <small>(en-US)</small></a></dt>\n  <dd>\n    <p><code>pictureInPictureElement</code> 属性告诉你当前在浮动窗口（或影子 DOM）显示哪个 <a href=\"/zh-CN/docs/Web/API/Element\"><code>Element</code></a>。如果为 <code>null</code>，则此文档（或影子 DOM）没有节点处于画中画模式。</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"事件","title":"事件","isH3":false,"content":"<p><em>画中画 API 定义了三个事件，它们可以用来检测画中画模式何时被切换或者浮动窗口大小何时被调整。</em></p>\n<dl>\n  <dt id=\"enterpictureinpicture\"><a href=\"/zh-CN/docs/Web/API/HTMLVideoElement/enterpictureinpicture_event\" title=\"enterpictureinpicture\"><code>enterpictureinpicture</code></a></dt>\n  <dd>\n    <p>当 <a href=\"/zh-CN/docs/Web/API/HTMLVideoElement\"><code>HTMLVideoElement</code></a> 进入画中画模式时触发该事件。</p>\n  </dd>\n  <dt id=\"leavepictureinpicture\"><a href=\"/zh-CN/docs/Web/API/HTMLVideoElement/leavepictureinpicture_event\" title=\"leavepictureinpicture\"><code>leavepictureinpicture</code></a></dt>\n  <dd>\n    <p>当 <a href=\"/zh-CN/docs/Web/API/HTMLVideoElement\"><code>HTMLVideoElement</code></a> 离开画中画模式时触发该事件。</p>\n  </dd>\n  <dt id=\"resize_en-us\"><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PictureInPictureWindow/resize_event\"><code>resize</code> <small>(en-US)</small></a></dt>\n  <dd>\n    <p>当 <a href=\"/zh-CN/docs/Web/API/PictureInPictureWindow\"><code>PictureInPictureWindow</code></a> 大小改变时触发该事件。</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"控制样式","title":"控制样式","isH3":false,"content":"<p><a href=\"/zh-CN/docs/Web/CSS\">CSS</a> <a href=\"/zh-CN/docs/Web/CSS/Pseudo-classes\">伪类</a> <a href=\"/zh-CN/docs/Web/CSS/:picture-in-picture\"><code>:picture-in-picture</code></a> 匹配当前进入画中画模式的视频元素，并允许你配置样式表，以便视频在画中画或者传统播放模式来回切换时自动调整内容的大小、样式或布局。</p>"}},{"type":"prose","value":{"id":"控制访问权限","title":"控制访问权限","isH3":false,"content":"<p>可以使用 <a href=\"/zh-CN/docs/Web/HTTP/Feature_Policy\">Feature Policy</a> 控制画中画的可用性。全屏模式的功能由字符串 <code>\"picture-in-picture\"</code> 标识，默认的允许列表的值是 <code>\"self\"</code>，意味着在顶级文档上下文以及从最顶层文档相同的来源加载的嵌套浏览上下文中允许画中画模式。</p>\n<p>参见<a href=\"/zh-CN/docs/Web/HTTP/Feature_Policy/Using_Feature_Policy\">使用 Feature Policy</a>，了解关于使用 Feature Policy 控制对 API 访问的更多信息。</p>"}},{"type":"prose","value":{"id":"示例","title":"示例","isH3":false,"content":"<p>在此示例中，视频被展示在 web 页面。点击下面的按钮可以让用户切换浮动视频窗口。</p><iframe width=\"100%\" height=\"350\" src=\"https://mdn.github.io/dom-examples/picture-in-picture/index.html\" loading=\"lazy\"></iframe>"}},{"type":"prose","value":{"id":"切换画中画模式","title":"切换画中画模式","isH3":true,"content":"<p>当使用者点击“Toggle Picture-in-Picture”按钮时，这段代码将会由一个点击处理程序调用：</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">togglePictureInPicture</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span>pictureInPictureElement<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      document<span class=\"token punctuation\">.</span><span class=\"token function\">exitPictureInPicture</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span>pictureInPictureEnabled<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      video<span class=\"token punctuation\">.</span><span class=\"token function\">requestPictureInPicture</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>该块首先会查询 <a href=\"/zh-CN/docs/Web/API/Document\" title=\"document\"><code>document</code></a> <code>pictureInPictureElement</code> 属性的值。</p>\n<p>如果值不是 <code>null</code>，则它是当前处于画中画模式并在浮动窗口的元素。我们调用 <a href=\"/zh-CN/docs/Web/API/Document/exitPictureInPicture\" title=\"document.exitPictureInPicture()\"><code>document.exitPictureInPicture()</code></a> 将视频带进它初始的盒子。</p>\n<p>如果值是 <code>null</code>，浮动窗口没有视频。所以我们可以请求视频进入画中画模式。我们可以在 <a href=\"/zh-CN/docs/Web/HTML/Element/video\"><code>&lt;video&gt;</code></a> 元素上调用 <a href=\"/zh-CN/docs/Web/API/HTMLVideoElement/requestPictureInPicture\"><code>HTMLVideoElement.requestPictureInPicture()</code></a> 来实现。</p>"}},{"type":"specifications","value":{"title":"规范","id":"规范","isH3":false,"specifications":[{"bcdSpecificationURL":"https://w3c.github.io/picture-in-picture/#interface-picture-in-picture-window","title":"Picture-in-Picture"}],"query":"api.PictureInPictureWindow"}},{"type":"browser_compatibility","value":{"title":"浏览器兼容性","id":"浏览器兼容性","isH3":false,"query":"api.PictureInPictureWindow","dataURL":"/zh-CN/docs/Web/API/Picture-in-Picture_API/bcd.json"}},{"type":"prose","value":{"id":"参见","title":"参见","isH3":false,"content":"<ul>\n  <li><a href=\"/zh-CN/docs/Web/API/HTMLVideoElement/requestPictureInPicture\"><code>HTMLVideoElement.requestPictureInPicture()</code></a></li>\n  <li><a href=\"/zh-CN/docs/Web/API/HTMLVideoElement/autoPictureInPicture\"><code>HTMLVideoElement.autoPictureInPicture</code></a></li>\n  <li><a href=\"/zh-CN/docs/Web/API/HTMLVideoElement/disablePictureInPicture\"><code>HTMLVideoElement.disablePictureInPicture</code></a></li>\n  <li><a href=\"/zh-CN/docs/Web/API/Document/pictureInPictureEnabled\"><code>Document.pictureInPictureEnabled</code></a></li>\n  <li><a href=\"/zh-CN/docs/Web/API/Document/exitPictureInPicture\"><code>Document.exitPictureInPicture()</code></a></li>\n  <li><a href=\"/zh-CN/docs/Web/API/Document/pictureInPictureElement\"><code>Document.pictureInPictureElement</code></a></li>\n  <li><a href=\"/zh-CN/docs/Web/CSS/:picture-in-picture\"><code>:picture-in-picture</code></a></li>\n</ul>"}}],"toc":[{"text":"接口","id":"接口"},{"text":"方法","id":"方法"},{"text":"属性","id":"属性"},{"text":"事件","id":"事件"},{"text":"控制样式","id":"控制样式"},{"text":"控制访问权限","id":"控制访问权限"},{"text":"示例","id":"示例"},{"text":"规范","id":"规范"},{"text":"浏览器兼容性","id":"浏览器兼容性"},{"text":"参见","id":"参见"}],"summary":"画中画 API 允许网站总是在其它窗口之上创建一个浮动的视频，以便用户在其他内容站点或者设备上的应用程序交互时可以继续播放媒体。","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Picture-in-Picture API","locale":"en-US","native":"English (US)"}],"source":{"folder":"zh-cn/web/api/picture-in-picture_api","github_url":"https://github.com/mdn/translated-content/blob/main/files/zh-cn/web/api/picture-in-picture_api/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/zh-CN/docs/Web","title":"Web 开发技术"},{"uri":"/zh-CN/docs/Web/API","title":"Web API 接口参考"},{"uri":"/zh-CN/docs/Web/API/Picture-in-Picture_API","title":"画中画（Picture-in-Picture）API"}],"pageTitle":"画中画（Picture-in-Picture）API - Web API 接口参考 | MDN","noIndexing":false}}