{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"resize","mdn_url":"/zh-CN/docs/Web/API/Window/resize_event","locale":"zh-CN","native":"中文 (简体)","sidebarHTML":"","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>文档视图调整大小时会触发 <strong>resize</strong> 事件。</p>"}},{"type":"prose","value":{"id":"基本信息","title":"基本信息","isH3":false,"content":"<dl>\n  <dt id=\"规范\">规范</dt>\n  <dd>\n    <p><a href=\"https://www.w3.org/TR/DOM-Level-3-Events/#event-type-resize\" class=\"external\" rel=\" noopener\">DOM L3</a>, <a href=\"https://www.w3.org/TR/cssom-view/#resizing-viewports\" class=\"external\" rel=\" noopener\">CSSOM View</a></p>\n  </dd>\n  <dt id=\"接口\">接口</dt>\n  <dd>\n    <p>UIEvent</p>\n  </dd>\n  <dt id=\"是否冒泡\">是否冒泡</dt>\n  <dd>\n    <p>否</p>\n  </dd>\n  <dt id=\"是否可取消默认\">是否可取消默认</dt>\n  <dd>\n    <p>否</p>\n  </dd>\n  <dt id=\"事件目标\">事件目标</dt>\n  <dd>\n    <p>defaultView (window)</p>\n  </dd>\n  <dt id=\"默认行为\">默认行为</dt>\n  <dd>\n    <p>None</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"属性","title":"属性","isH3":false,"content":"<table>\n  <thead>\n    <tr>\n      <th>Property</th>\n      <th>Type</th>\n      <th>Description</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td><code>target</code> <span title=\"该属性的值无法更改\" class=\"badge inline readonly\">只读 </span></td>\n      <td><a href=\"/zh-CN/docs/Web/API/EventTarget\"><code>EventTarget</code></a></td>\n      <td>The event target (the topmost target in the DOM tree).</td>\n    </tr>\n    <tr>\n      <td><code>type</code> <span title=\"该属性的值无法更改\" class=\"badge inline readonly\">只读 </span></td>\n      <td><a href=\"/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String\"><code>DOMString</code></a></td>\n      <td>The type of event.</td>\n    </tr>\n    <tr>\n      <td><code>bubbles</code> <span title=\"该属性的值无法更改\" class=\"badge inline readonly\">只读 </span></td>\n      <td><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">Boolean (en-US)</a></td>\n      <td>Whether the event normally bubbles or not.</td>\n    </tr>\n    <tr>\n      <td><code>cancelable</code> <span title=\"该属性的值无法更改\" class=\"badge inline readonly\">只读 </span></td>\n      <td><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">Boolean (en-US)</a></td>\n      <td>Whether the event is cancellable or not.</td>\n    </tr>\n    <tr>\n      <td><code>view</code> <span title=\"该属性的值无法更改\" class=\"badge inline readonly\">只读 </span></td>\n      <td><a href=\"/zh-CN/docs/Web/API/WindowProxy\" class=\"page-not-created\" title=\"This is a link to an unwritten page\"><code>WindowProxy</code></a></td>\n      <td><a href=\"/zh-CN/docs/Web/API/Document/defaultView\"><code>document.defaultView</code></a> (<code>window</code> of the document)</td>\n    </tr>\n    <tr>\n      <td><code>detail</code> <span title=\"该属性的值无法更改\" class=\"badge inline readonly\">只读 </span></td>\n      <td><code>long</code> (<code>float</code>)</td>\n      <td>0.</td>\n    </tr>\n  </tbody>\n</table>"}},{"type":"prose","value":{"id":"案例","title":"案例","isH3":false,"content":"<p>由于 resize 事件可以以较高的速率触发，因此事件处理程序不应该执行计算开销很大的操作 (如 DOM 修改)。相反，建议使用<a href=\"/zh-CN/docs/Web/API/Window/requestAnimationFrame\">requestAnimationFrame</a>, <a href=\"/en-US/docs/Web/API/setTimeout\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">setTimeout (en-US)</a> or <a href=\"/zh-CN/docs/Web/API/CustomEvent\">customEvent</a>, 比如：</p>"}},{"type":"prose","value":{"id":"requestanimationframe_customevent","title":"requestAnimationFrame + customEvent","isH3":true,"content":"<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token punctuation\">;</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> <span class=\"token function-variable function\">throttle</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">type<span class=\"token punctuation\">,</span> name<span class=\"token punctuation\">,</span> obj</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        obj <span class=\"token operator\">=</span> obj <span class=\"token operator\">||</span> window<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">var</span> running <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">var</span> <span class=\"token function-variable function\">func</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>running<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n            running <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n             <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                obj<span class=\"token punctuation\">.</span><span class=\"token function\">dispatchEvent</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">CustomEvent</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                running <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n        obj<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">,</span> func<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">/* init - you can init any event */</span>\n    <span class=\"token function\">throttle</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"resize\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"optimizedResize\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// handle event</span>\nwindow<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"optimizedResize\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Resource conscious resize callback!\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"requestanimationframe","title":"requestAnimationFrame","isH3":true,"content":"<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> optimizedResize <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">var</span> callbacks <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        running <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// fired on resize event</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">resize</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>running<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            running <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>requestAnimationFrame<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                window<span class=\"token punctuation\">.</span><span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>runCallbacks<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>runCallbacks<span class=\"token punctuation\">,</span> <span class=\"token number\">66</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// run the actual callbacks</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">runCallbacks</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n        callbacks<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">callback</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        running <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// adds callback to loop</span>\n    <span class=\"token keyword\">function</span> <span class=\"token function\">addCallback</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">callback</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>callback<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            callbacks<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>callback<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// public method to add additional callback</span>\n        <span class=\"token function-variable function\">add</span><span class=\"token operator\">:</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">callback</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>callbacks<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'resize'</span><span class=\"token punctuation\">,</span> resize<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n            <span class=\"token function\">addCallback</span><span class=\"token punctuation\">(</span>callback<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// start process</span>\noptimizedResize<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Resource conscious resize callback!'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"settimeout","title":"setTimeout","isH3":true,"content":"<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"resize\"</span><span class=\"token punctuation\">,</span> resizeThrottler<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">var</span> resizeTimeout<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">resizeThrottler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ignore resize events as long as an actualResizeHandler execution is in the queue</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> <span class=\"token operator\">!</span>resizeTimeout <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      resizeTimeout <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        resizeTimeout <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">actualResizeHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n       <span class=\"token comment\">// The actualResizeHandler will execute at a rate of 15fps</span>\n       <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">66</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">function</span> <span class=\"token function\">actualResizeHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// handle the resize event</span>\n    <span class=\"token operator\">...</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}}],"toc":[{"text":"基本信息","id":"基本信息"},{"text":"属性","id":"属性"},{"text":"案例","id":"案例"}],"summary":"文档视图调整大小时会触发 resize 事件。","popularity":0.0007,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Window: resize event","locale":"en-US","native":"English (US)"},{"title":"GlobalEventHandlers.onresize","locale":"es","native":"Español"},{"title":"GlobalEventHandlers.onresize","locale":"fr","native":"Français"},{"title":"Window: resize イベント","locale":"ja","native":"日本語"},{"title":"resize","locale":"ko","native":"한국어"},{"title":"resize","locale":"pt-BR","native":"Português (do Brasil)"},{"title":"resize","locale":"ru","native":"Русский"}],"source":{"folder":"zh-cn/web/api/window/resize_event","github_url":"https://github.com/mdn/translated-content/blob/main/files/zh-cn/web/api/window/resize_event/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/zh-CN/docs/Web","title":"Web 开发技术"},{"uri":"/zh-CN/docs/Web/API","title":"Web API 接口参考"},{"uri":"/zh-CN/docs/Web/API/Window","title":"Window"},{"uri":"/zh-CN/docs/Web/API/Window/resize_event","title":"resize"}],"pageTitle":"resize - Web API 接口参考 | MDN","noIndexing":false}}