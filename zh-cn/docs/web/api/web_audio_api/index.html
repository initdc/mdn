<!DOCTYPE html><html lang="en-US" prefix="og: https://ogp.me/ns#"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="/favicon-48x48.97046865.png"><link rel="apple-touch-icon" href="/apple-touch-icon.0ea0fa02.png"><meta name="theme-color" content="#ffffff"><link rel="manifest" href="/manifest.56b1cedc.json"><link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="MDN Web Docs"><script>Array.prototype.flat&&Array.prototype.includes||document.write('<script src="https://polyfill.io/v3/polyfill.min.js?features=Array.prototype.flat%2Ces6"><\/script>')</script><title>Web Audio API - Web API 接口参考 | MDN</title><link rel="preload" as="font" type="font/woff2" crossorigin="" href="/static/media/ZillaSlab-Bold.subset.0beac26b.woff2"><link rel="alternate" title="Web Audio API" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Audio_API" hreflang="zh"><link rel="alternate" title="Web Audio API" href="https://developer.mozilla.org/zh-TW/docs/Web/API/Web_Audio_API" hreflang="zh"><link rel="alternate" title="Web Audio API" href="https://developer.mozilla.org/ru/docs/Web/API/Web_Audio_API" hreflang="ru"><link rel="alternate" title="API Web Áudio" href="https://developer.mozilla.org/pt-BR/docs/Web/API/Web_Audio_API" hreflang="pt"><link rel="alternate" title="Web Audio API" href="https://developer.mozilla.org/ko/docs/Web/API/Web_Audio_API" hreflang="ko"><link rel="alternate" title="Web Audio API" href="https://developer.mozilla.org/ja/docs/Web/API/Web_Audio_API" hreflang="ja"><link rel="alternate" title="Web Audio API" href="https://developer.mozilla.org/fr/docs/Web/API/Web_Audio_API" hreflang="fr"><link rel="alternate" title="Web Audio API" href="https://developer.mozilla.org/es/docs/Web/API/Web_Audio_API" hreflang="es"><link rel="alternate" title="Web Audio API" href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API" hreflang="en"><meta name="description" content="Web Audio API 提供了在 Web 上控制音频的一个非常有效通用的系统，允许开发者来自选音频源，对音频添加特效，使音频可视化，添加空间效果（如平移），等等。"><meta property="og:url" content="https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Audio_API"><meta property="og:title" content="Web Audio API - Web API 接口参考 | MDN"><meta property="og:description" content="Web Audio API 提供了在 Web 上控制音频的一个非常有效通用的系统，允许开发者来自选音频源，对音频添加特效，使音频可视化，添加空间效果（如平移），等等。"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://developer.mozilla.org/mdn-social-share.0ca9dbda.png"><meta property="twitter:card" content="summary_large_image"><meta name="robots" content="index, follow"><link rel="canonical" href="https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Audio_API"><style media="print">.breadcrumbs-container,.document-toc-container,.language-menu,.language-toggle,.on-github,.page-footer,.page-header-main,nav.sidebar,ul.prev-next{display:none!important}.main-page-content,.main-page-content pre{padding:2px}.main-page-content pre{border-left-width:2px}</style><link href="/static/css/main.55b68e13.chunk.css" rel="stylesheet"><script src="/static/js/runtime-main.4bb4c356.js" defer=""></script><script src="/static/js/4.a756dea3.chunk.js" defer=""></script><script src="/static/js/main.d4d565e0.chunk.js" defer=""></script></head><body><div id="root"><ul id="nav-access" class="a11y-nav"><li><a id="skip-main" href="#content">Skip to main content</a></li><li><a id="skip-search" href="#main-q">Skip to search</a></li><li><a id="skip-select-language" href="#select-language">Skip to select language</a></li></ul><div class="page-wrapper document-page"><header class="page-header"><a href="/zh-CN/" class="logo" aria-label="MDN Web Docs"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 451.74 135"><path d="M7.14 8.35v111.06h111.05V8.35zm103.71 56c-.48.92-1 1.79-1.46 2.71a3.44 3.44 0 01-3.54 2 2.4 2.4 0 00-1.55.5c-1.37.9-2.76 1.79-4.18 2.63a7.33 7.33 0 01-6.35.34 29.71 29.71 0 00-10.63-2 11.7 11.7 0 00-9.46 4.31 14.84 14.84 0 00-2.13 4.29c-1.24 3.07-2.3 21.38-2.3 26.05 0 0-17.62-3.42-34.15-20.34l4.31-11.32h-13.5l9.76-10.35h-16.8l9.77-10.34H12.69L30.45 34a40.9 40.9 0 0119.77-10.83c7.1-1.22 8.93-.53 13.31.77l2.43.73.85.25 3.1.95a12.56 12.56 0 006.21.09 11.37 11.37 0 018.25 1 8.24 8.24 0 014.1 6.22 7.29 7.29 0 003.61 5.49 59.45 59.45 0 009.32 4.11c2.27.86 4.54 1.84 6.79 2.72a6.81 6.81 0 012.86 2.06 4.81 4.81 0 011.1 2.73c.14 2 .37 4 .47 6a15.24 15.24 0 01-1.77 8.03zM320.12 39.62a5.42 5.42 0 00-4.53 2.13 7.36 7.36 0 00-1.7 4.43v2.36a6.28 6.28 0 001.7 4.46 5.63 5.63 0 004.3 1.82 5.12 5.12 0 004.57-2.27A9.7 9.7 0 00326 47a8.11 8.11 0 00-1.67-5.52 5.36 5.36 0 00-4.21-1.86zM387.38 39.53a5.52 5.52 0 00-4.7 2.15 8.8 8.8 0 00-1.63 5.49 9.23 9.23 0 001.58 5.45 5.38 5.38 0 004.7 2.25 5.61 5.61 0 004.74-2.2 8.91 8.91 0 001.68-5.59 8.24 8.24 0 00-1.75-5.52 5.76 5.76 0 00-4.62-2.03zM299.47 41.35a4.34 4.34 0 00-4-1.92 4.55 4.55 0 00-3.89 1.73 8.37 8.37 0 00-1.58 4.17h10.48a6.3 6.3 0 00-1.01-3.98zM357.74 30.75H352v23.31h5.72q5.47 0 8.35-3t2.93-8.65q0-5.43-2.88-8.55t-8.38-3.11z"></path><path d="M121.55 8.35v70.8h323V8.35zm42.21 22.45h-4V54h3.68v3.73h-11.25V54h3.31V36.79h-.19l-9.63 19.12h-2.12l-10-19.4h-.19V54h3.45v3.73h-11.15V54h3.68V30.8h-4v-3.73H133l11.66 22.56h.19l11.18-22.56h7.7zm29.12 22.67q-4.11 4.28-11.38 4.28h-14.06v-3.69h3.73V30.75h-3.73v-3.68h13.83q7.59 0 11.66 4.29a15.4 15.4 0 014 11 15.33 15.33 0 01-4.05 11.11zm38.89-22.67h-3.68v27h-2.6L208.08 35h-.19v19h4.67v3.73h-12.22V54h3.49V30.8h-4v-3.73h7.08l16.9 22.09h.19V30.8h-4.58v-3.73h12.32zm43.8 27h-3.31l-7.83-23.18h-.19l-7.55 23.18h-3.35l-8.78-27h-2.65v-3.73H253v3.73h-3.87L255 50.71h.23l6.61-19.91H259v-3.73h11v3.73h-2.78l6.61 20.1h.23l5.43-20.1h-4.15v-3.73h11v3.73h-2.54zm26.71-1.51a9.66 9.66 0 01-6.42 2 10.2 10.2 0 01-7.41-2.74c-1.89-1.82-2.83-4.47-2.83-7.93a12.37 12.37 0 012.64-8.12 9 9 0 017.32-3.21 8.62 8.62 0 016.75 2.69 9.65 9.65 0 012.45 6.52 13.67 13.67 0 01-.28 2.69H290q.29 6.71 6.18 6.7a5.2 5.2 0 003.71-1.18 5.82 5.82 0 001.67-2.83l3.45.71a7.21 7.21 0 01-2.73 4.65zm25.77-1.63c-1.51 2.4-3.92 3.61-7.22 3.61s-5.84-1.29-7.22-3.87c0 .25-.1.82-.21 1.7s-.19 1.44-.22 1.7H309c.16-1 .31-2 .47-3.07a21.42 21.42 0 00.24-3.16v-23h-3.4v-3.3h7.55V40.9a9.76 9.76 0 012.67-3.28 7.33 7.33 0 014.74-1.4 8.48 8.48 0 016.5 2.78q2.55 2.74 2.55 7.74a14.6 14.6 0 01-2.27 7.87zm41.39-1.14q-4.11 4.28-11.37 4.28H344v-3.74h3.73V30.75H344v-3.68h13.83q7.59 0 11.66 4.29a15.41 15.41 0 014.06 11 15.34 15.34 0 01-4.11 11.11zm25.65 1.68a10.53 10.53 0 01-7.9 3.07 10 10 0 01-7.63-3 10.93 10.93 0 01-2.8-7.83 12.13 12.13 0 012.69-7.93q2.69-3.3 8-3.3t8 3.28a12 12 0 012.64 7.76 10.86 10.86 0 01-3 7.9zm22.61.57c-1.4 1.66-3.63 2.5-6.68 2.5a9.58 9.58 0 01-7.15-2.76q-2.72-2.76-2.71-7.91a12.25 12.25 0 012.69-8 9.17 9.17 0 017.5-3.28 15 15 0 013.82.48 10.37 10.37 0 013.5 1.65l.85 5.47-3.35.38-.76-3.54a8.07 8.07 0 00-4.11-1 4.9 4.9 0 00-4.39 2.15 9.93 9.93 0 00-1.41 5.55 8.9 8.9 0 001.5 5.38 5.23 5.23 0 004.44 2c2.92 0 4.67-1.7 5.23-5.1l3.5.71a10.34 10.34 0 01-2.47 5.27zm20.48.75a11.68 11.68 0 01-6.63 1.75 15.52 15.52 0 01-8.26-2.08L424 51l3.26.33-.1 2.74a7 7 0 002.06.66 12.63 12.63 0 002.19.19 8.68 8.68 0 003.66-.75 2.5 2.5 0 001.63-2.36 2.25 2.25 0 00-1.32-2.2 12.65 12.65 0 00-3.28-1 47.39 47.39 0 01-3.9-.82 7.5 7.5 0 01-3.25-1.7 4.67 4.67 0 01-1.33-3.66c0-2.36.88-4 2.62-4.91a12 12 0 015.6-1.37 15 15 0 014.08.55 16.65 16.65 0 013.47 1.39l.47 5.1-3.3.37-.48-3.3a9.5 9.5 0 00-4.06-.9 5.62 5.62 0 00-2.87.66 2.33 2.33 0 00-1.15 2.25 2.13 2.13 0 001.3 2.07 11.91 11.91 0 003.21.92 36.69 36.69 0 013.82.83 7.46 7.46 0 013.21 1.74 4.9 4.9 0 011.3 3.73 5.56 5.56 0 01-2.66 4.91z"></path><path d="M181.17 30.75h-5.71v23.31h5.71q5.47 0 8.36-3t2.88-8.61q0-5.43-2.88-8.55t-8.36-3.15zM121.63 119.32V81.74h114.91v37.58zM153.22 109h-2v-6.85a4.8 4.8 0 00-1.58-4 5.57 5.57 0 00-3.55-1.26 5 5 0 00-4.92 3.26 4.19 4.19 0 00-1.88-2.46 5.82 5.82 0 00-3-.8 4.89 4.89 0 00-4.56 2.56v-2.21h-6.28v3.26h2v8.5h-2v3.23h9.11V109h-2.86v-5.25a4.4 4.4 0 01.69-2.56 2.47 2.47 0 012.21-1q2.57 0 2.56 3.63v8.41h6.29V109h-2v-5.25a4.47 4.47 0 01.67-2.56 2.42 2.42 0 012.19-1q2.63 0 2.63 3.63v8.41h6.28zm9.88-12.07q-4 0-6 2.36a8.41 8.41 0 00-2 5.66 7.25 7.25 0 002.17 5.62 8 8 0 005.65 2 8.54 8.54 0 005.94-2.11 7.27 7.27 0 002.34-5.67 8.21 8.21 0 00-2-5.51q-2.07-2.34-6.1-2.34zm-.1 12.35a3 3 0 01-2.63-1.33 5.68 5.68 0 01-.9-3.26 5 5 0 011-3.28 3.23 3.23 0 012.61-1.18 3.5 3.5 0 012.59 1.08 4.56 4.56 0 011.07 3.31 5.21 5.21 0 01-1 3.41 3.33 3.33 0 01-2.74 1.25zm25-2.3l-3.39-.29-.7 2.32H179l8.32-9.54-.32-2.23h-13.19l-.53 5.25 3.16.34.67-2.36h4.65l-8.25 9.53.44 2.26h13.13zm7.62-9.74h-4.46v5.39h4.46zm0 9.61h-4.46v5.39h4.46zm13.54-17.49h-4.23l-6.48 22.88h4.22zm8.68 0h-4.23l-6.45 22.88h4.19zm15 22.51l-.07-2.26a1.22 1.22 0 01-.56.1c-.69 0-1-.39-1-1.16v-6.49a4.39 4.39 0 00-1.8-3.84 7 7 0 00-4.16-1.28 14.55 14.55 0 00-3.16.3 24.14 24.14 0 00-3.29 1.06l-.56 3.46 3.39.4.5-1.69a2.78 2.78 0 011.08-.37 11.3 11.3 0 011.25-.07c1.19 0 1.89.37 2.09 1.1a8.55 8.55 0 01.3 2.26v.5a8.91 8.91 0 00-1.18-.11h-1.21a12.64 12.64 0 00-4.81.88 3.53 3.53 0 00-2.18 3.64 3.66 3.66 0 001.48 3.33 5.63 5.63 0 003.11 1 4.67 4.67 0 003-.91 6.78 6.78 0 001.8-2 3 3 0 003.33 3 5.54 5.54 0 002.66-.85zm-9.25-2.32a1.69 1.69 0 01-1.36-.52 1.81 1.81 0 01-.43-1.21 1.67 1.67 0 01.86-1.68 4.63 4.63 0 012-.42 7.69 7.69 0 011.07.07l1.06.13a3.58 3.58 0 01-1.08 2.74 3.24 3.24 0 01-2.11.89z"></path></svg></a><button type="button" class="ghost main-menu-toggle" aria-haspopup="true" aria-label="Show Menu"></button><div class="page-header-main "><nav class="main-nav" aria-label="Main menu"><ul class="main-menu nojs"><li class="top-level-entry-container"><button id="technologies-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">Technologies</button><ul class="technologies " role="menu" aria-labelledby="technologies-button"><li role="none"><a tabindex="-1" href="/zh-CN/docs/Web" role="menuitem">Technologies Overview</a></li><li role="none"><a tabindex="-1" href="/zh-CN/docs/Web/HTML" role="menuitem">HTML</a></li><li role="none"><a tabindex="-1" href="/zh-CN/docs/Web/CSS" role="menuitem">CSS</a></li><li role="none"><a tabindex="-1" href="/zh-CN/docs/Web/JavaScript" role="menuitem">JavaScript</a></li><li role="none"><a tabindex="-1" href="/zh-CN/docs/Web/Guide/Graphics" role="menuitem">Graphics</a></li><li role="none"><a tabindex="-1" href="/zh-CN/docs/Web/HTTP" role="menuitem">HTTP</a></li><li role="none"><a tabindex="-1" href="/zh-CN/docs/Web/API" role="menuitem">APIs</a></li><li role="none"><a tabindex="-1" href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions" role="menuitem">Browser Extensions</a></li><li role="none"><a tabindex="-1" href="/zh-CN/docs/Web/MathML" role="menuitem">MathML</a></li></ul></li><li class="top-level-entry-container"><button id="references-guides-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">References &amp; Guides</button><ul class="references-guides " role="menu" aria-labelledby="references-guides-button"><li role="none"><a tabindex="-1" href="/zh-CN/docs/Learn" role="menuitem">Learn web development</a></li><li role="none"><a tabindex="-1" href="/zh-CN/docs/Web/Tutorials" role="menuitem">Tutorials</a></li><li role="none"><a tabindex="-1" href="/zh-CN/docs/Web/Reference" role="menuitem">References</a></li><li role="none"><a tabindex="-1" href="/zh-CN/docs/Web/Guide" role="menuitem">Developer Guides</a></li><li role="none"><a tabindex="-1" href="/zh-CN/docs/Web/Accessibility" role="menuitem">Accessibility</a></li><li role="none"><a tabindex="-1" href="/zh-CN/docs/Games" role="menuitem">Game development</a></li><li role="none"><a tabindex="-1" href="/zh-CN/docs/Web" role="menuitem">...more docs</a></li></ul></li><li class="top-level-entry-container"><button id="feedback-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">Feedback</button><ul class="feedback " role="menu" aria-labelledby="feedback-button"><li role="none"><a tabindex="-1" href="/zh-CN/docs/MDN/Contribute/Feedback" role="menuitem">Send Feedback</a></li><li role="none"><a tabindex="-1" href="/zh-CN/docs/MDN/Contribute" role="menuitem">Contribute to MDN</a></li><li role="none"><a tabindex="-1" target="_blank" rel="noopener noreferrer" href="https://github.com/mdn/content/issues/new" role="menuitem">Report a content issue<!-- --> 🌐</a></li><li role="none"><a tabindex="-1" target="_blank" rel="noopener noreferrer" href="https://github.com/mdn/yari/issues/new" role="menuitem">Report a platform issue<!-- --> 🌐</a></li></ul></li></ul></nav><div class="header-search"><form action="/zh-CN/search" class="search-form search-widget" role="search"><label for="main-q" class="visually-hidden">Search MDN</label><input type="search" name="q" id="main-q" class="search-input-field" placeholder="Site search... (Press &quot;/&quot; to focus)" pattern="(.|\s)*\S(.|\s)*" required="" value=""><input type="submit" class="ghost search-button" value="" aria-label="Search"></form></div><div class="auth-container"></div></div></header><div class="breadcrumb-locale-container"><nav class="breadcrumbs-container" aria-label="Breadcrumb navigation"><ol typeof="BreadcrumbList" vocab="https://schema.org/" aria-label="breadcrumbs"><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="/zh-CN/docs/Web"><span property="name">Web 开发技术</span></a><meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb-penultimate" property="item" typeof="WebPage" href="/zh-CN/docs/Web/API"><span property="name">Web API 接口参考</span></a><meta property="position" content="2"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb-current-page" property="item" typeof="WebPage" href="/zh-CN/docs/Web/API/Web_Audio_API"><span property="name">Web Audio API</span></a><meta property="position" content="3"></li></ol></nav><ul class="language-toggle"><li><a href="#select-language" class="language-icon"><span class="show-desktop">Change language</span></a></li><li><a class="view-in-english" href="/en-US/docs/Web/API/Web_Audio_API"><span class="show-desktop">View in</span> English</a></li></ul></div><div class="localized-content-note notecard inline neutral"><a href="/en-US/docs/MDN/Contribute/Localize#active_locales">This page was translated from English by the community. Learn more and join the MDN Web Docs community.</a></div><aside class="document-toc-container"><section class="document-toc"><header><h2>Table of contents</h2><button type="button" class="ghost toc-trigger-mobile" aria-controls="toc-entries" aria-expanded="false">Table of contents</button></header><ul id="toc-entries"><li><a href="#web_audio_概念与使用">Web audio 概念与使用</a></li><li><a href="#web_audio_api_接口">Web Audio API 接口</a></li><li><a href="#过时的接口">过时的接口</a></li><li><a href="#示例">示例</a></li><li><a href="#规范">规范</a></li><li><a href="#浏览器兼容性">浏览器兼容性</a></li><li><a href="#相关链接">相关链接</a></li></ul></section></aside><main id="content" class="main-content" role="main"><article class="main-page-content" lang="zh-CN"><h1>Web Audio API</h1><div><p>Web Audio API 提供了在 Web 上控制音频的一个非常有效通用的系统，允许开发者来自选音频源，对音频添加特效，使音频可视化，添加空间效果（如平移），等等。</p></div><h2 id="web_audio_概念与使用"><a href="#web_audio_概念与使用" title="Permalink to Web audio 概念与使用">Web audio 概念与使用</a></h2><div><p>Web Audio API 使用户可以在<strong>音频上下文</strong>(AudioContext) 中进行音频操作，具有<strong>模块化路由</strong>的特点。在<strong>音频节点</strong>上操作进行基础的音频， 它们连接在一起构成<strong>音频路由图</strong>。即使在单个上下文中也支持多源，尽管这些音频源具有多种不同类型通道布局。这种模块化设计提供了灵活创建动态效果的复合音频的方法。</p>
<p>音频节点通过它们的输入输出相互连接，形成一个链或者一个简单的网。一般来说，这个链或网起始于一个或多个音频源。音频源可以提供一个片段一个片段的音频采样数据（以数组的方式），一般，一秒钟的音频数据可以被切分成几万个这样的片段。这些片段可以是经过一些数学运算得到 （比如<a href="/zh-CN/docs/Web/API/OscillatorNode"><code>OscillatorNode</code></a>），也可以是音频或视频的文件读出来的（比如<a href="/zh-CN/docs/Web/API/AudioBufferSourceNode"><code>AudioBufferSourceNode</code></a>和<a href="/zh-CN/docs/Web/API/MediaElementAudioSourceNode"><code>MediaElementAudioSourceNode</code></a>），又或者是音频流（<a href="/zh-CN/docs/Web/API/MediaStreamAudioSourceNode"><code>MediaStreamAudioSourceNode</code></a>）。其实，音频文件本身就是声音的采样数据，这些采样数据可以来自麦克风，也可以来自电子乐器，然后混合成一个单一的复杂的波形。</p>
<p>这些节点的输出可以连接到其它节点的输入上，然后新节点可以对接收到的采样数据再进行其它的处理，再形成一个结果流。一个最常见的操作是通过把输入的采样数据放大来达到扩音器的作用（缩小就是一个弱音器）（参见<a href="/zh-CN/docs/Web/API/GainNode"><code>GainNode</code></a>）。声音处理完成之后，可以连接到一个目的地（<a href="/zh-CN/docs/Web/API/BaseAudioContext/destination"><code>AudioContext.destination</code></a>），这个目的地负责把声音数据传输给扬声器或者耳机。注意，只有当用户期望听到声音时，才需要进行最后一个这个连接。</p>
<p>一个简单而典型的 web audio 流程如下：</p>
<ol>
  <li>创建音频上下文</li>
  <li>在音频上下文里创建源 — 例如 <code>&lt;audio&gt;</code>, 振荡器，流</li>
  <li>创建效果节点，例如混响、双二阶滤波器、平移、压缩</li>
  <li>为音频选择一个目的地，例如你的系统扬声器</li>
  <li>连接源到效果器，对目的地进行效果输出</li>
</ol>
<p>
  <img src="https://mdn.mozillademos.org/files/12241/webaudioAPI_en.svg" alt="A simple box diagram with an outer box labeled Audio context, and three inner boxes labeled Sources, Effects and Destination. The three inner boxes have arrow between them pointing from left to right, indicating the flow of audio information." loading="lazy">
</p>
<p>使用这个 API，时间可以被非常精确地控制，几乎没有延迟，这样开发人员可以准确地响应事件，并且可以针对采样数据进行编程，甚至是较高的采样率。这样，鼓点和节拍是准确无误的。</p>
<p>Web Audio API 也使我们能够控制音频的<em>空间化</em>。在基于<em>源 - 侦听器模型</em>的系统中，它允许控制<em>平移模型</em>和处理<em>距离引起的衰减</em>或移动源（移动侦听）引起的<em>多普勒效应</em>。</p>
<div class="notecard note" id="sect1">
  <p><strong>备注：</strong> 你可以阅读我们关于 Web Audio API 的文章来了解更多细节 <a href="/zh-CN/docs/Web/API/Web_Audio_API/Basic_concepts_behind_Web_Audio_API">Web Audio API 背后的基本概念</a>。</p>
</div></div><h2 id="web_audio_api_接口"><a href="#web_audio_api_接口" title="Permalink to Web Audio API 接口">Web Audio API 接口</a></h2><div><p>Web Audio API 共有一系列接口和相关的事件，我们已经把它们分成了九类功能。</p></div><h3 id="通用音频图定义"><a href="#通用音频图定义" title="Permalink to 通用音频图定义">通用音频图定义</a></h3><div><p>Web Audio API 中与生成音频图相关的定义与通用容器。</p>
<dl>
  <dt id="audiocontext"><a href="/zh-CN/docs/Web/API/AudioContext"><code>AudioContext</code></a></dt>
  <dd>
    <p><strong><code>AudioContext</code></strong> 接口代表由音频模块构成的音频处理图。音频上下文控制其所包含节点的创建和音频处理、解码。使用其它接口前你必需创建一个<code>音频上下文</code>，一切操作都在这个环境里进行。</p>
  </dd>
  <dt id="audionode"><a href="/zh-CN/docs/Web/API/AudioNode"><code>AudioNode</code></a></dt>
  <dd>
    <p><strong><code>音频节点</code></strong> 接口是一个音频处理模块， 例如音频源（<a href="/zh-CN/docs/Web/HTML/Element/audio"><code>&lt;audio&gt;</code></a>或<a href="/zh-CN/docs/Web/HTML/Element/video"><code>&lt;video&gt;</code></a>），音频输出、中间处理模块（例如：滤波器 <a href="/zh-CN/docs/Web/API/BiquadFilterNode"><code>BiquadFilterNode</code></a> 或者音量控制器 <a href="/zh-CN/docs/Web/API/GainNode"><code>GainNode</code></a>）。</p>
  </dd>
  <dt id="audioparam"><a href="/zh-CN/docs/Web/API/AudioParam"><code>AudioParam</code></a></dt>
  <dd>
    <p><strong><code>AudioParam</code></strong> 接口代表音频相关的参数，比如一个 <a href="/zh-CN/docs/Web/API/AudioNode"><code>AudioNode</code></a>的参数。它可以设置为特定值或值的变化，并且可以在指定的时间之后以指定模式变更。</p>
  </dd>
  <dt id="ended"><code><a href="/en-US/docs/Web/API/HTMLMediaElement/ended_event" title="Currently only available in English (US)" class="only-in-en-us">ended (en-US)</a></code>结束事件</dt>
  <dd>
    <p>当媒体播放停止时，会触发<code>ended</code>事件。</p>
  </dd>
</dl></div><h3 id="定义音频源"><a href="#定义音频源" title="Permalink to 定义音频源">定义音频源</a></h3><div><p>Web Audio API 使用的音频源接口。</p>
<dl>
  <dt id="oscillatornode"><a href="/zh-CN/docs/Web/API/OscillatorNode"><code>OscillatorNode</code></a></dt>
  <dd>
    <p><strong><code>OscillatorNode</code></strong> 接口代表一种随时间变化的波形，比如正弦波形或三角波形。类型是<a href="/zh-CN/docs/Web/API/AudioNode"><code>AudioNode</code></a>，功能是音频处理模块，可以产生指定<em>频率</em>的波形。</p>
  </dd>
  <dt id="audiobuffer"><a href="/zh-CN/docs/Web/API/AudioBuffer"><code>AudioBuffer</code></a></dt>
  <dd>
    <p><strong><code>AudioBuffer</code></strong> 代表内存中的一段音频数据，可以通过<a href="/zh-CN/docs/Web/API/BaseAudioContext/decodeAudioData"><code>AudioContext.decodeAudioData()</code></a>方法从音频文件创建，也可以通过<a href="/zh-CN/docs/Web/API/BaseAudioContext/createBuffer"><code>AudioContext.createBuffer()</code></a>方法从原始数据创建。当音频数据被解码成这种格式之后，就可以被放入一个<a href="/zh-CN/docs/Web/API/AudioBufferSourceNode"><code>AudioBufferSourceNode</code></a>中使用。</p>
  </dd>
  <dt id="audiobuffersourcenode"><a href="/zh-CN/docs/Web/API/AudioBufferSourceNode"><code>AudioBufferSourceNode</code></a></dt>
  <dd>
    <p><strong><code>AudioBufferSourceNode</code></strong> 表示由内存音频数据组成的音频源，音频数据存储在<a href="/zh-CN/docs/Web/API/AudioBuffer"><code>AudioBuffer</code></a>中。这是一个作为音频源的<a href="/zh-CN/docs/Web/API/AudioNode"><code>AudioNode</code></a>。</p>
  </dd>
  <dt id="mediaelementaudiosourcenode"><a href="/zh-CN/docs/Web/API/MediaElementAudioSourceNode"><code>MediaElementAudioSourceNode</code></a></dt>
  <dd>
    <p><strong><code>MediaElementAudioSourceNode</code></strong> 接口表示由 HTML5 <a href="/zh-CN/docs/Web/HTML/Element/audio"><code>&lt;audio&gt;</code></a>或<a href="/zh-CN/docs/Web/HTML/Element/video"><code>&lt;video&gt;</code></a>元素生成的音频源。这是一个作为音频源的<a href="/zh-CN/docs/Web/API/AudioNode"><code>AudioNode</code></a>。</p>
  </dd>
  <dt id="mediastreamaudiosourcenode"><a href="/zh-CN/docs/Web/API/MediaStreamAudioSourceNode"><code>MediaStreamAudioSourceNode</code></a></dt>
  <dd>
    <p><strong><code>MediaStreamAudioSourceNode</code></strong> 接口表示由 WebRTC <a href="/zh-CN/docs/Web/API/MediaStream"><code>MediaStream</code></a>（如网络摄像头或麦克风）生成的音频源。这是一个作为音频源的<a href="/zh-CN/docs/Web/API/AudioNode"><code>AudioNode</code></a>。</p>
  </dd>
</dl></div><h3 id="定义音效"><a href="#定义音效" title="Permalink to 定义音效">定义音效</a></h3><div><p>应用到音频源上的音效。</p>
<dl>
  <dt id="biquadfilternode"><a href="/zh-CN/docs/Web/API/BiquadFilterNode"><code>BiquadFilterNode</code></a></dt>
  <dd>
    <p><strong><code>BiquadFilterNode</code></strong> 接口表示一个简单的低阶滤波器。它是一个<a href="/zh-CN/docs/Web/API/AudioNode"><code>AudioNode</code></a>，可以表示不同种类的滤波器、调音器或图形均衡器。<code>BiquadFilterNode</code> 总是只有一个输入和一个输出。</p>
  </dd>
  <dt id="convolvernode"><a href="/zh-CN/docs/Web/API/ConvolverNode"><code>ConvolverNode</code></a></dt>
  <dd>
    <p><strong><code>ConvolverNode</code></strong> 接口是一个<a href="/zh-CN/docs/Web/API/AudioNode"><code>AudioNode</code></a>，对给定的 AudioBuffer 执行线性卷积，通常用于实现混响效果。</p>
  </dd>
  <dt id="delaynode_en-us"><a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/DelayNode"><code>DelayNode</code> <small>(en-US)</small></a></dt>
  <dd>
    <p><strong><code>DelayNode</code></strong> 接口表示<a href="http://en.wikipedia.org/wiki/Digital_delay_line" class="external" rel=" noopener">延迟线</a>；是<a href="/zh-CN/docs/Web/API/AudioNode"><code>AudioNode</code></a> 类型的音频处理模块，使输入的数据延时输出。</p>
  </dd>
  <dt id="dynamicscompressornode"><a href="/zh-CN/docs/Web/API/DynamicsCompressorNode"><code>DynamicsCompressorNode</code></a></dt>
  <dd>
    <p><strong><code>DynamicsCompressorNode</code></strong> 提供了一个压缩效果，当多个音频在同时播放并且混合的时候，可以通过它降低音量最大的部分的音量来帮助避免发生削波和失真。</p>
  </dd>
  <dt id="gainnode"><a href="/zh-CN/docs/Web/API/GainNode"><code>GainNode</code></a></dt>
  <dd>
    <p><strong><code>GainNode</code></strong> 接口用于音量变化。它是一个 <a href="/zh-CN/docs/Web/API/AudioNode"><code>AudioNode</code></a> 类型的音频处理模块，输入后应用<em>增益</em> 效果，然后输出。</p>
  </dd>
  <dt id="stereopannernode_en-us"><a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/StereoPannerNode"><code>StereoPannerNode</code> <small>(en-US)</small></a></dt>
  <dd>
    <p><strong><code>StereoPannerNode</code></strong> 接口表示一个简单立体声控制节点，用来左右移动音频流。</p>
  </dd>
  <dt id="waveshapernode"><a href="/zh-CN/docs/Web/API/WaveShaperNode"><code>WaveShaperNode</code></a></dt>
  <dd>
    <p><strong><code>WaveShaperNode</code></strong> 接口表示一个非线性的扭曲。它是<a href="/zh-CN/docs/Web/API/AudioNode"><code>AudioNode</code></a>类型，可以利用曲线来对信号进行扭曲。除了一些效果明显的扭曲，还常被用来给声音添加温暖的感觉。</p>
  </dd>
  <dt id="periodicwave"><a href="/zh-CN/docs/Web/API/PeriodicWave"><code>PeriodicWave</code></a></dt>
  <dd>
    <p>用来定义周期性的波形，可被用来重塑 <a href="/zh-CN/docs/Web/API/OscillatorNode"><code>OscillatorNode</code></a>的输出。</p>
  </dd>
</dl></div><h3 id="定义音频目的地"><a href="#定义音频目的地" title="Permalink to 定义音频目的地">定义音频目的地</a></h3><div><p>在你处理完音频之后，这些接口定义了输出到哪里。</p>
<dl>
  <dt id="audiodestinationnode"><a href="/zh-CN/docs/Web/API/AudioDestinationNode"><code>AudioDestinationNode</code></a></dt>
  <dd>
    <p><strong><code>AudioDestinationNode</code></strong> 定义了最后音频要输出到哪里，通常是输出到你的扬声器。</p>
  </dd>
  <dt id="mediastreamaudiodestinationnode_en-us"><a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/MediaStreamAudioDestinationNode"><code>MediaStreamAudioDestinationNode</code> <small>(en-US)</small></a></dt>
  <dd>
    <p><strong><code>MediaStreamAudioDestinationNode</code></strong> 定义了使用 <a href="/en-US/docs/Web/API/WebRTC_API" class="only-in-en-us" title="Currently only available in English (US)">WebRTC (en-US)</a> 的<a href="/zh-CN/docs/Web/API/MediaStream"><code>MediaStream</code></a>（只包含单个 AudioMediaStreamTrack）应该连接的目的地，AudioMediaStreamTrack 的使用方式和从<a href="/zh-CN/docs/Web/API/MediaDevices/getUserMedia" title="getUserMedia()"><code>getUserMedia()</code></a>中得到<a href="/zh-CN/docs/Web/API/MediaStream"><code>MediaStream</code></a>相似。这个接口是<a href="/zh-CN/docs/Web/API/AudioNode"><code>AudioNode</code></a>类型的音频目的地。</p>
  </dd>
</dl></div><h3 id="数据分析和可视化"><a href="#数据分析和可视化" title="Permalink to 数据分析和可视化">数据分析和可视化</a></h3><div><p>如果你想从音频里提取时间、频率或者其它数据，你需要 AnalyserNode。</p>
<dl>
  <dt id="analysernode"><a href="/zh-CN/docs/Web/API/AnalyserNode"><code>AnalyserNode</code></a></dt>
  <dd>
    <p><strong><code>AnalyserNode</code></strong> 表示一个可以提供实时频率分析与时域分析的切点，这些分析数据可以用做数据分析和可视化。</p>
  </dd>
</dl></div><h3 id="分离、合并声道"><a href="#分离、合并声道" title="Permalink to 分离、合并声道">分离、合并声道</a></h3><div><p>你将使用这些接口来拆分、合并声道。</p>
<dl>
  <dt id="channelsplitternode_en-us"><a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/ChannelSplitterNode"><code>ChannelSplitterNode</code> <small>(en-US)</small></a></dt>
  <dd>
    <p><strong><code>ChannelSplitterNode</code></strong> 可以把输入流的每个声道输出到一个独立的输出流。</p>
  </dd>
  <dt id="channelmergernode"><a href="/zh-CN/docs/Web/API/ChannelMergerNode"><code>ChannelMergerNode</code></a></dt>
  <dd>
    <p><strong><code>ChannelMergerNode</code></strong> 用于把一组输入流合成到一个输出流。输出流的每一个声道对应一个输入流。</p>
  </dd>
</dl></div><h3 id="声音空间效果"><a href="#声音空间效果" title="Permalink to 声音空间效果">声音空间效果</a></h3><div><p>这些接口用来添加空间平移效果到音频源。</p>
<dl>
  <dt id="audiolistener"><a href="/zh-CN/docs/Web/API/AudioListener"><code>AudioListener</code></a></dt>
  <dd>
    <p>**<code>AudioListener</code>**代表场景中正在听声音的人的位置和朝向。</p>
  </dd>
  <dt id="pannernode_en-us"><a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/PannerNode"><code>PannerNode</code> <small>(en-US)</small></a></dt>
  <dd>
    <p><strong><code>PannerNode</code></strong> 用于表示场景是声音的空间行为。它是<a href="/zh-CN/docs/Web/API/AudioNode"><code>AudioNode</code></a>类型的音频处理模块，这个节点用于表示右手笛卡尔坐标系里声源的位置信息，运动信息（通过一个速度向量表示），方向信息（通过一个方向圆锥表示）。</p>
  </dd>
</dl></div><h3 id="使用_javascript_处理音频"><a href="#使用_javascript_处理音频" title="Permalink to 使用 JavaScript 处理音频">使用 JavaScript 处理音频</a></h3><div><p>可以编写 JavaScript 代码来处理音频数据。当然，这需要用到下面的接口和事件。</p>
<div class="notecard note" id="sect2">
  <p><strong>备注：</strong> 这些功能在 Web Audio API 的 2014 年 8 月 9 日版本中已经标记为不推荐的，这些功能很快会被<a href="#audio_workers">Audio_Workers</a>代替。</p>
</div>
<dl>
  <dt id="scriptprocessornode"><a href="/zh-CN/docs/Web/API/ScriptProcessorNode"><code>ScriptProcessorNode</code></a></dt>
  <dd>
    <p><strong><code>ScriptProcessorNode</code></strong> 接口用于通过 JavaScript 代码生成，处理，分析音频。它是一个<a href="/zh-CN/docs/Web/API/AudioNode"><code>AudioNode</code></a>类型的音频处理模块，但是它与两个缓冲区相连接，一个缓冲区里包含当前的输入数据，另一个缓冲区里包含着输出数据。每当新的音频数据被放入输入缓冲区，就会产生一个<a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/AudioProcessingEvent"><code>AudioProcessingEvent</code> <small>(en-US)</small></a>事件，当这个事件处理结束时，输出缓冲区里应该写好了新数据。</p>
  </dd>
  <dt id="audioprocess"><code><a href="/en-US/docs/Web/API/ScriptProcessorNode/audioprocess_event" title="Currently only available in English (US)" class="only-in-en-us">audioprocess (en-US)</a></code> (event)</dt>
  <dd>
    <p>当一个 Web Audio API <a href="/zh-CN/docs/Web/API/ScriptProcessorNode"><code>ScriptProcessorNode</code></a>已经准备好进行处理时，这个事件回调会被调用。</p>
  </dd>
  <dt id="audioprocessingevent_en-us"><a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/AudioProcessingEvent"><code>AudioProcessingEvent</code> <small>(en-US)</small></a></dt>
  <dd>
    <p>当<a href="/zh-CN/docs/Web/API/ScriptProcessorNode"><code>ScriptProcessorNode</code></a>的输入流数据准备好了时，<code>AudioProcessingEvent</code>事件会产生。</p>
  </dd>
</dl></div><h3 id="离线（后台）音频处理"><a href="#离线（后台）音频处理" title="Permalink to 离线（后台）音频处理">离线（后台）音频处理</a></h3><div><p>在后台进行音频的快速处理也是可以的。仅仅生成包含音频数据的<a href="/zh-CN/docs/Web/API/AudioBuffer"><code>AudioBuffer</code></a>，而不在扬声器里播放它。</p>
<dl>
  <dt id="offlineaudiocontext"><a href="/zh-CN/docs/Web/API/OfflineAudioContext"><code>OfflineAudioContext</code></a></dt>
  <dd>
    <p><strong><code>OfflineAudioContext</code></strong> 离线音频上下文也是音频上下文<a href="/zh-CN/docs/Web/API/AudioContext"><code>AudioContext</code></a>，也表示把<a href="/zh-CN/docs/Web/API/AudioNode"><code>AudioNode</code></a>连接到一起的一个音频处理图。但是，与一个标准的音频上下文相比，离线上下文不能把音频渲染到扬声器，仅仅是把音频渲染到一个缓冲区。</p>
  </dd>
  <dt id="complete"><code><a href="/en-US/docs/Web/API/OfflineAudioContext/complete_event" title="Currently only available in English (US)" class="only-in-en-us">complete (en-US)</a></code> (event)</dt>
  <dd>
    <p>Complete 事件，当离线音频上下文被终止时产生。</p>
  </dd>
  <dt id="offlineaudiocompletionevent_en-us"><a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/OfflineAudioCompletionEvent"><code>OfflineAudioCompletionEvent</code> <small>(en-US)</small></a></dt>
  <dd>
    <p><code>OfflineAudioCompletionEvent</code>表示上下文被终止时的事件。</p>
  </dd>
</dl></div><h3 id="音频工作者"><a href="#音频工作者" title="Permalink to 音频工作者">音频工作者</a></h3><div><p>在了解这一部分内容之前，你可以先了解一个新的 WebWorker 方面的内容。音频工作者提供了一种可以在一个<a href="/zh-CN/docs/Web/API/Web_Workers_API/Using_web_workers">WebWorker</a>上下文中直接进行音频处理的方式。现在已经定义了一些这部分功能的新接口，接口定义是在 2014 年的 8 月 29 日文档中。到目前为止，还没有浏览器已经对这些接口进行了实现。当这些接口被实现后，<a href="/zh-CN/docs/Web/API/ScriptProcessorNode"><code>ScriptProcessorNode</code></a>和<a href="/zh-CN/docs/Web/API/Web_Audio_API#Audio_processing_via_JavaScript" aria-current="page">前文</a>中提到的其它接口都会被替代。</p>
<dl>
  <dt id="audioworkernode"><a class="page-not-created" title="此文档尚未被撰写，期待你的贡献!"><code>AudioWorkerNode</code></a></dt>
  <dd>
    <p>AudioWorkerNode 也是<a href="/zh-CN/docs/Web/API/AudioNode"><code>AudioNode</code></a>类型，但是它用于与工作者线程合作来直接完成音频的生成，处理或分析等操作。</p>
  </dd>
  <dt id="audioworkerglobalscope"><a class="page-not-created" title="此文档尚未被撰写，期待你的贡献!"><code>AudioWorkerGlobalScope</code></a></dt>
  <dd>
    <p><code>AudioWorkerGlobalScope</code> 继承于 <code>DedicatedWorkerGlobalScope</code>。代表一个工作者上下文。这个工作者上下文里运行着对音频进行处理的脚本。设计这个接口的目的，是为了直接通过编写 JavaScript 代码，来完成对音频数据的生成，处理，分析工作。</p>
  </dd>
  <dt id="audioprocessevent"><a class="page-not-created" title="此文档尚未被撰写，期待你的贡献!"><code>AudioProcessEvent</code></a></dt>
  <dd>
    <p>这是一个事件对象。这个对象会被分发给<a class="page-not-created" title="此文档尚未被撰写，期待你的贡献!"><code>AudioWorkerGlobalScope</code></a>对象来进行处理。</p>
  </dd>
</dl></div><h2 id="过时的接口"><a href="#过时的接口" title="Permalink to 过时的接口">过时的接口</a></h2><div><p>下面介绍到的这些接口定义于比较老的 Web Audio API 标准，现在已经过时了，而且已经被新接口取代。</p>
<dl>
  <dt id="javascriptnode"><a class="page-not-created" title="此文档尚未被撰写，期待你的贡献!"><code>JavaScriptNode</code></a></dt>
  <dd>
    <p>用于通过编写 JavaScript 代码直接处理音频数据，现在已经被<a href="/zh-CN/docs/Web/API/ScriptProcessorNode"><code>ScriptProcessorNode</code></a>取代。</p>
  </dd>
  <dt id="wavetablenode"><a class="page-not-created" title="此文档尚未被撰写，期待你的贡献!"><code>WaveTableNode</code></a></dt>
  <dd>
    <p>用于定义一个周期性波形，现在已经被<a href="/zh-CN/docs/Web/API/PeriodicWave"><code>PeriodicWave</code></a>取代。</p>
  </dd>
</dl></div><h2 id="示例"><a href="#示例" title="Permalink to 示例">示例</a></h2><div><p>下面的这个示例使用了较多的 Web Audio API 接口，可以通过访问<a href="https://mdn.github.io/voice-change-o-matic/" class="external" rel=" noopener">网址</a>来查看它的时时运行情况，也可以访问 GitHub 上它的<a href="https://github.com/mdn/voice-change-o-matic" class="external" rel=" noopener">源代码</a>。这个示例里会对声音的音量进行改变，打开页面时，可以先把扬声器的音量调小一些。</p>
<p>Web Audio API 接口在下面的代码里已经高亮显示。</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">var</span> audioCtx <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>AudioContext <span class="token operator">||</span> window<span class="token punctuation">.</span>webkitAudioContext<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// define audio context</span>
<span class="token comment">// Webkit/blink browsers need prefix, Safari won't work without window.</span>

<span class="token keyword">var</span> voiceSelect <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"voice"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// select box for selecting voice effect options</span>
<span class="token keyword">var</span> visualSelect <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"visual"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// select box for selecting audio visualization options</span>
<span class="token keyword">var</span> mute <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.mute'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// mute button</span>
<span class="token keyword">var</span> drawVisual<span class="token punctuation">;</span> <span class="token comment">// requestAnimationFrame</span>

<span class="token keyword">var</span> analyser <span class="token operator">=</span> audioCtx<span class="token punctuation">.</span><span class="token function">createAnalyser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> distortion <span class="token operator">=</span> audioCtx<span class="token punctuation">.</span><span class="token function">createWaveShaper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> gainNode <span class="token operator">=</span> audioCtx<span class="token punctuation">.</span><span class="token function">createGain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> biquadFilter <span class="token operator">=</span> audioCtx<span class="token punctuation">.</span><span class="token function">createBiquadFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">makeDistortionCurve</span><span class="token punctuation">(</span><span class="token parameter">amount</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// function to make curve shape for distortion/wave shaper node to use</span>
  <span class="token keyword">var</span> k <span class="token operator">=</span> <span class="token keyword">typeof</span> amount <span class="token operator">===</span> <span class="token string">'number'</span> <span class="token operator">?</span> amount <span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
    n_samples <span class="token operator">=</span> <span class="token number">44100</span><span class="token punctuation">,</span>
    curve <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">(</span>n_samples<span class="token punctuation">)</span><span class="token punctuation">,</span>
    deg <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">,</span>
    i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    x<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n_samples<span class="token punctuation">;</span> <span class="token operator">++</span>i <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    x <span class="token operator">=</span> i <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">/</span> n_samples <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
    curve<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span> <span class="token number">3</span> <span class="token operator">+</span> k <span class="token punctuation">)</span> <span class="token operator">*</span> x <span class="token operator">*</span> <span class="token number">20</span> <span class="token operator">*</span> deg <span class="token operator">/</span> <span class="token punctuation">(</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">+</span> k <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> curve<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

navigator<span class="token punctuation">.</span><span class="token function">getUserMedia</span> <span class="token punctuation">(</span>
  <span class="token comment">// constraints - only audio needed for this app</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">audio</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// Success callback</span>
  <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">stream</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    source <span class="token operator">=</span> audioCtx<span class="token punctuation">.</span><span class="token function">createMediaStreamSource</span><span class="token punctuation">(</span>stream<span class="token punctuation">)</span><span class="token punctuation">;</span>
    source<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>analyser<span class="token punctuation">)</span><span class="token punctuation">;</span>
    analyser<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>distortion<span class="token punctuation">)</span><span class="token punctuation">;</span>
    distortion<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>biquadFilter<span class="token punctuation">)</span><span class="token punctuation">;</span>
    biquadFilter<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>gainNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    gainNode<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>audioCtx<span class="token punctuation">.</span>destination<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// connecting the different audio graph nodes together</span>

    <span class="token function">visualize</span><span class="token punctuation">(</span>stream<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">voiceChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// Error callback</span>
  <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'The following gUM error occured: '</span> <span class="token operator">+</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">visualize</span><span class="token punctuation">(</span><span class="token parameter">stream</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token constant">WIDTH</span> <span class="token operator">=</span> canvas<span class="token punctuation">.</span>width<span class="token punctuation">;</span>
  <span class="token constant">HEIGHT</span> <span class="token operator">=</span> canvas<span class="token punctuation">.</span>height<span class="token punctuation">;</span>

  <span class="token keyword">var</span> visualSetting <span class="token operator">=</span> visualSelect<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>visualSetting<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span><span class="token punctuation">(</span>visualSetting <span class="token operator">==</span> <span class="token string">"sinewave"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    analyser<span class="token punctuation">.</span>fftSize <span class="token operator">=</span> <span class="token number">2048</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> bufferLength <span class="token operator">=</span> analyser<span class="token punctuation">.</span>frequencyBinCount<span class="token punctuation">;</span> <span class="token comment">// half the FFT value</span>
    <span class="token keyword">var</span> dataArray <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span>bufferLength<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// create an array to store the data</span>

    canvasCtx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token constant">WIDTH</span><span class="token punctuation">,</span> <span class="token constant">HEIGHT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

      drawVisual <span class="token operator">=</span> <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>draw<span class="token punctuation">)</span><span class="token punctuation">;</span>

      analyser<span class="token punctuation">.</span><span class="token function">getByteTimeDomainData</span><span class="token punctuation">(</span>dataArray<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// get waveform data and put it into the array created above</span>

      canvasCtx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'rgb(200, 200, 200)'</span><span class="token punctuation">;</span> <span class="token comment">// draw wave with canvas</span>
      canvasCtx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token constant">WIDTH</span><span class="token punctuation">,</span> <span class="token constant">HEIGHT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      canvasCtx<span class="token punctuation">.</span>lineWidth <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
      canvasCtx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">'rgb(0, 0, 0)'</span><span class="token punctuation">;</span>

      canvasCtx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">var</span> sliceWidth <span class="token operator">=</span> <span class="token constant">WIDTH</span> <span class="token operator">*</span> <span class="token number">1.0</span> <span class="token operator">/</span> bufferLength<span class="token punctuation">;</span>
      <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> bufferLength<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">var</span> v <span class="token operator">=</span> dataArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token number">128.0</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> y <span class="token operator">=</span> v <span class="token operator">*</span> <span class="token constant">HEIGHT</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          canvasCtx<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          canvasCtx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        x <span class="token operator">+=</span> sliceWidth<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      canvasCtx<span class="token punctuation">.</span><span class="token function">lineTo</span><span class="token punctuation">(</span>canvas<span class="token punctuation">.</span>width<span class="token punctuation">,</span> canvas<span class="token punctuation">.</span>height<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      canvasCtx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>visualSetting <span class="token operator">==</span> <span class="token string">"off"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    canvasCtx<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token constant">WIDTH</span><span class="token punctuation">,</span> <span class="token constant">HEIGHT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    canvasCtx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">"red"</span><span class="token punctuation">;</span>
    canvasCtx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token constant">WIDTH</span><span class="token punctuation">,</span> <span class="token constant">HEIGHT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">voiceChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  distortion<span class="token punctuation">.</span>curve <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Float32Array</span><span class="token punctuation">;</span>
  biquadFilter<span class="token punctuation">.</span>gain<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// reset the effects each time the voiceChange function is run</span>

  <span class="token keyword">var</span> voiceSetting <span class="token operator">=</span> voiceSelect<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>voiceSetting<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span><span class="token punctuation">(</span>voiceSetting <span class="token operator">==</span> <span class="token string">"distortion"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    distortion<span class="token punctuation">.</span>curve <span class="token operator">=</span> <span class="token function">makeDistortionCurve</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// apply distortion to sound using waveshaper node</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>voiceSetting <span class="token operator">==</span> <span class="token string">"biquad"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    biquadFilter<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">"lowshelf"</span><span class="token punctuation">;</span>
    biquadFilter<span class="token punctuation">.</span>frequency<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>
    biquadFilter<span class="token punctuation">.</span>gain<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">;</span> <span class="token comment">// apply lowshelf filter to sounds using biquad</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>voiceSetting <span class="token operator">==</span> <span class="token string">"off"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Voice settings turned off"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// do nothing, as off option was chosen</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token comment">// event listeners to change visualize and voice settings</span>

visualSelect<span class="token punctuation">.</span><span class="token function-variable function">onchange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  window<span class="token punctuation">.</span><span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span>drawVisual<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">visualize</span><span class="token punctuation">(</span>stream<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

voiceSelect<span class="token punctuation">.</span><span class="token function-variable function">onchange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">voiceChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

mute<span class="token punctuation">.</span>onclick <span class="token operator">=</span> voiceMute<span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">voiceMute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// toggle to mute and unmute sound</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>mute<span class="token punctuation">.</span>id <span class="token operator">==</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    gainNode<span class="token punctuation">.</span>gain<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// gain set to 0 to mute sound</span>
    mute<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token string">"activated"</span><span class="token punctuation">;</span>
    mute<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">"Unmute"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    gainNode<span class="token punctuation">.</span>gain<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// gain set to 1 to unmute sound</span>
    mute<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
    mute<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">"Mute"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div><h2 id="规范"><a href="#规范" title="Permalink to 规范">规范</a></h2><table class="standard-table"><thead><tr><th scope="col">Specification</th></tr></thead><tbody><tr><td><a href="https://webaudio.github.io/web-audio-api/#AudioContext">Web Audio API<!-- --> <br><small># <!-- -->AudioContext</small></a></td></tr></tbody></table><h2 id="浏览器兼容性"><a href="#浏览器兼容性" title="Permalink to 浏览器兼容性">浏览器兼容性</a></h2><p>BCD tables only load in the browser</p><h2 id="相关链接"><a href="#相关链接" title="Permalink to 相关链接">相关链接</a></h2><div><ul>
  <li><a href="/zh-CN/docs/Web/API/Web_Audio_API/Using_Web_Audio_API">Using the Web Audio API</a></li>
  <li><a href="/zh-CN/docs/Web/API/Web_Audio_API/Visualizations_with_Web_Audio_API">Visualizations with Web Audio API</a></li>
  <li><a href="https://mdn.github.io/voice-change-o-matic/" class="external" rel=" noopener">Voice-change-O-matic example</a></li>
  <li><a href="https://mdn.github.io/violent-theremin/" class="external" rel=" noopener">Violent Theremin example</a></li>
  <li><a href="/en-US/docs/Web/API/Web_Audio_API/Web_audio_spatialization_basics" class="only-in-en-us" title="Currently only available in English (US)">Web audio spatialisation basics (en-US)</a></li>
  <li><a href="https://www.html5rocks.com/tutorials/webaudio/positional_audio/" class="external" rel=" noopener">Mixing Positional Audio and WebGL</a></li>
  <li><a href="https://www.html5rocks.com/tutorials/webaudio/games/" class="external" rel=" noopener">Developing Game Audio with the Web Audio API</a></li>
  <li><a href="/en-US/docs/Web/API/Web_Audio_API/Migrating_from_webkitAudioContext" class="only-in-en-us" title="Currently only available in English (US)">Porting webkitAudioContext code to standards based AudioContext (en-US)</a></li>
  <li><a href="https://github.com/bit101/tones" class="external" rel=" noopener">Tones</a>: a simple library for playing specific tones/notes using the Web Audio API.</li>
  <li><a href="https://github.com/goldfire/howler.js/" class="external" rel=" noopener">howler.js</a>: a JS audio library that defaults to <a href="https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html" class="external" rel=" noopener">Web Audio API</a> and falls back to <a href="https://www.whatwg.org/specs/web-apps/current-work/#the-audio-element" class="external" rel=" noopener">HTML5 Audio</a>, as well as providing other useful features.</li>
</ul></div><h3 id="quicklinks"><a href="#quicklinks" title="Permalink to Quicklinks">Quicklinks</a></h3><div><ol>
  <li><strong>Guides</strong>
    <ol>
      <li><a href="/zh-CN/docs/Web/API/Web_Audio_API/Basic_concepts_behind_Web_Audio_API">Basic concepts behind Web Audio API</a></li>
      <li><a href="/zh-CN/docs/Web/API/Web_Audio_API/Using_Web_Audio_API">Using the Web Audio API</a></li>
      <li><a href="/zh-CN/docs/Web/API/Web_Audio_API/Visualizations_with_Web_Audio_API">Visualizations with Web Audio API</a></li>
      <li><a href="/en-US/docs/Web/API/Web_Audio_API/Web_audio_spatialization_basics" class="only-in-en-us" title="Currently only available in English (US)">Web audio spatialisation basics (en-US)</a></li>
      <li><a href="/en-US/docs/Web/API/Web_Audio_API/Migrating_from_webkitAudioContext" class="only-in-en-us" title="Currently only available in English (US)">Porting webkitAudioContext code to standards based AudioContext (en-US)</a></li>
    </ol>
  </li>
  <li><strong>Examples</strong>
    <ol>
      <li><a href="https://mdn.github.io/voice-change-o-matic/" class="external" rel=" noopener">Voice-change-O-matic</a></li>
      <li><a href="https://mdn.github.io/violent-theremin/" class="external" rel=" noopener">Violent Theremin</a></li>
    </ol>
  </li>
  <li><strong>Interfaces</strong>
    <ol>
      <li><a href="/zh-CN/docs/Web/API/AnalyserNode"><code>AnalyserNode</code></a></li>
      <li><a href="/zh-CN/docs/Web/API/AudioBuffer"><code>AudioBuffer</code></a></li>
      <li><a href="/zh-CN/docs/Web/API/AudioBufferSourceNode"><code>AudioBufferSourceNode</code></a></li>
      <li><a href="/zh-CN/docs/Web/API/AudioContext"><code>AudioContext</code></a></li>
      <li><a href="/zh-CN/docs/Web/API/AudioDestinationNode"><code>AudioDestinationNode</code></a></li>
      <li><a href="/zh-CN/docs/Web/API/AudioListener"><code>AudioListener</code></a></li>
      <li><a href="/zh-CN/docs/Web/API/AudioNode"><code>AudioNode</code></a></li>
      <li><a href="/zh-CN/docs/Web/API/AudioParam"><code>AudioParam</code></a></li>
      <li><code><a href="/en-US/docs/Web/API/ScriptProcessorNode/audioprocess_event" title="Currently only available in English (US)" class="only-in-en-us">audioprocess (en-US)</a></code> (event)</li>
      <li><a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/AudioProcessingEvent"><code>AudioProcessingEvent</code> <small>(en-US)</small></a></li>
      <li><a href="/zh-CN/docs/Web/API/BiquadFilterNode"><code>BiquadFilterNode</code></a></li>
      <li><a href="/zh-CN/docs/Web/API/ChannelMergerNode"><code>ChannelMergerNode</code></a></li>
      <li><a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/ChannelSplitterNode"><code>ChannelSplitterNode</code> <small>(en-US)</small></a></li>
      <li><code><a href="/en-US/docs/Web/API/OfflineAudioContext/complete_event" title="Currently only available in English (US)" class="only-in-en-us">complete (en-US)</a></code> (event)</li>
      <li><a href="/zh-CN/docs/Web/API/ConvolverNode"><code>ConvolverNode</code></a></li>
      <li><a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/DelayNode"><code>DelayNode</code> <small>(en-US)</small></a></li>
      <li><a href="/zh-CN/docs/Web/API/DynamicsCompressorNode"><code>DynamicsCompressorNode</code></a></li>
      <li><code><a href="/en-US/docs/Web/API/HTMLMediaElement/ended_event" title="Currently only available in English (US)" class="only-in-en-us">ended (en-US)</a></code> (event)</li>
      <li><a href="/zh-CN/docs/Web/API/GainNode"><code>GainNode</code></a></li>
      <li><a href="/zh-CN/docs/Web/API/MediaElementAudioSourceNode"><code>MediaElementAudioSourceNode</code></a></li>
      <li><a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/MediaStreamAudioDestinationNode"><code>MediaStreamAudioDestinationNode</code> <small>(en-US)</small></a></li>
      <li><a href="/zh-CN/docs/Web/API/MediaStreamAudioSourceNode"><code>MediaStreamAudioSourceNode</code></a></li>
      <li><a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/OfflineAudioCompletionEvent"><code>OfflineAudioCompletionEvent</code> <small>(en-US)</small></a></li>
      <li><a href="/zh-CN/docs/Web/API/OfflineAudioContext"><code>OfflineAudioContext</code></a></li>
      <li><a href="/zh-CN/docs/Web/API/OscillatorNode"><code>OscillatorNode</code></a></li>
      <li><a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/PannerNode"><code>PannerNode</code> <small>(en-US)</small></a></li>
      <li><a class="page-not-created" title="此文档尚未被撰写，期待你的贡献!"><code>PeriodicWaveNode</code></a></li>
      <li><a href="/zh-CN/docs/Web/API/ScriptProcessorNode"><code>ScriptProcessorNode</code></a></li>
      <li><a href="/zh-CN/docs/Web/API/WaveShaperNode"><code>WaveShaperNode</code></a></li>
    </ol>
  </li>
</ol></div></article><aside class="metadata"><div class="metadata-content-container"><div id="on-github" class="on-github"><h3>Found a problem with this page?</h3><ul><li><a href="https://github.com/mdn/translated-content/edit/main/files/zh-cn/web/api/web_audio_api/index.md" title="You're going to need to sign in to GitHub first (Opens in a new tab)" target="_blank" rel="noopener noreferrer">Edit on <b>GitHub</b></a></li><li><a href="https://github.com/mdn/translated-content/blob/main/files/zh-cn/web/api/web_audio_api/index.md" title="Folder: zh-cn/web/api/web_audio_api (Opens in a new tab)" target="_blank" rel="noopener noreferrer">Source on <b>GitHub</b></a></li><li><a href="https://github.com/mdn/translated-content/issues/new?body=MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FWeb_Audio_API%0A%0A%23%23%23%23+What+information+was+incorrect%2C+unhelpful%2C+or+incomplete%3F%0A%0A%0A%23%23%23%23+Specific+section+or+headline%3F%0A%0A%0A%23%23%23%23+What+did+you+expect+to+see%3F%0A%0A%0A%23%23%23%23+Did+you+test+this%3F+If+so%2C+how%3F%0A%0A%0A%3C%21--+Do+not+make+changes+below+this+line+--%3E%0A%3Cdetails%3E%0A%3Csummary%3EMDN+Content+page+report+details%3C%2Fsummary%3E%0A%0A*+Folder%3A+%60zh-cn%2Fweb%2Fapi%2Fweb_audio_api%60%0A*+MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FWeb_Audio_API%0A*+GitHub+URL%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Ftranslated-content%2Fblob%2Fmain%2Ffiles%2Fzh-cn%2Fweb%2Fapi%2Fweb_audio_api%2Findex.md%0A*+Last+commit%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Ftranslated-content%2Fcommit%2F921c46a374ab0a9f4cc809af0370f8c412e54701%0A*+Document+last+modified%3A+2022-10-01T03%3A41%3A16.000Z%0A%0A%3C%2Fdetails%3E&amp;title=Issue+with+%22Web+Audio+API%22%3A+%28short+summary+here+please%29&amp;labels=needs-triage%2Cl10n-zh" title="This will take you to https://github.com/mdn/content to file a new issue" target="_blank" rel="noopener noreferrer">Report a problem with this content on <b>GitHub</b></a></li><li>Want to fix the problem yourself? See<!-- --> <a href="https://github.com/mdn/content/blob/main/README.md" target="_blank" rel="noopener noreferrer">our Contribution guide</a>.</li></ul></div><p class="last-modified-date"><b>Last modified:</b> <time datetime="2022-10-01T03:41:16.000Z">Oct 1, 2022</time>,<!-- --> <a href="/zh-CN/docs/Web/API/Web_Audio_API/contributors.txt">by MDN contributors</a></p><form class="language-menu"><fieldset id="select-language"><legend>Change your language</legend><label for="language-selector" class="visually-hidden">Select your preferred language</label> <select id="language-selector" name="language"><option selected="" value="zh-CN">中文 (简体)</option><option value="en-US">English (US)</option><option value="es">Español</option><option value="fr">Français</option><option value="ja">日本語</option><option value="ko">한국어</option><option value="pt-BR">Português (do&nbsp;Brasil)</option><option value="ru">Русский</option><option value="zh-TW">正體中文 (繁體)</option></select> <button type="submit" class="button minimal">Change language</button></fieldset></form></div></aside></main></div><footer id="nav-footer" class="page-footer"><div class="content-container"><div class="page-footer-logo"><a href="/zh-CN/" class="logo" aria-label="MDN Web Docs"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 451.74 135" fill="#fff"><path d="M7.14 8.35v111.06h111.05V8.35zm103.71 56c-.48.92-1 1.79-1.46 2.71a3.44 3.44 0 01-3.54 2 2.4 2.4 0 00-1.55.5c-1.37.9-2.76 1.79-4.18 2.63a7.33 7.33 0 01-6.35.34 29.71 29.71 0 00-10.63-2 11.7 11.7 0 00-9.46 4.31 14.84 14.84 0 00-2.13 4.29c-1.24 3.07-2.3 21.38-2.3 26.05 0 0-17.62-3.42-34.15-20.34l4.31-11.32h-13.5l9.76-10.35h-16.8l9.77-10.34H12.69L30.45 34a40.9 40.9 0 0119.77-10.83c7.1-1.22 8.93-.53 13.31.77l2.43.73.85.25 3.1.95a12.56 12.56 0 006.21.09 11.37 11.37 0 018.25 1 8.24 8.24 0 014.1 6.22 7.29 7.29 0 003.61 5.49 59.45 59.45 0 009.32 4.11c2.27.86 4.54 1.84 6.79 2.72a6.81 6.81 0 012.86 2.06 4.81 4.81 0 011.1 2.73c.14 2 .37 4 .47 6a15.24 15.24 0 01-1.77 8.03zM320.12 39.62a5.42 5.42 0 00-4.53 2.13 7.36 7.36 0 00-1.7 4.43v2.36a6.28 6.28 0 001.7 4.46 5.63 5.63 0 004.3 1.82 5.12 5.12 0 004.57-2.27A9.7 9.7 0 00326 47a8.11 8.11 0 00-1.67-5.52 5.36 5.36 0 00-4.21-1.86zM387.38 39.53a5.52 5.52 0 00-4.7 2.15 8.8 8.8 0 00-1.63 5.49 9.23 9.23 0 001.58 5.45 5.38 5.38 0 004.7 2.25 5.61 5.61 0 004.74-2.2 8.91 8.91 0 001.68-5.59 8.24 8.24 0 00-1.75-5.52 5.76 5.76 0 00-4.62-2.03zM299.47 41.35a4.34 4.34 0 00-4-1.92 4.55 4.55 0 00-3.89 1.73 8.37 8.37 0 00-1.58 4.17h10.48a6.3 6.3 0 00-1.01-3.98zM357.74 30.75H352v23.31h5.72q5.47 0 8.35-3t2.93-8.65q0-5.43-2.88-8.55t-8.38-3.11z"></path><path d="M121.55 8.35v70.8h323V8.35zm42.21 22.45h-4V54h3.68v3.73h-11.25V54h3.31V36.79h-.19l-9.63 19.12h-2.12l-10-19.4h-.19V54h3.45v3.73h-11.15V54h3.68V30.8h-4v-3.73H133l11.66 22.56h.19l11.18-22.56h7.7zm29.12 22.67q-4.11 4.28-11.38 4.28h-14.06v-3.69h3.73V30.75h-3.73v-3.68h13.83q7.59 0 11.66 4.29a15.4 15.4 0 014 11 15.33 15.33 0 01-4.05 11.11zm38.89-22.67h-3.68v27h-2.6L208.08 35h-.19v19h4.67v3.73h-12.22V54h3.49V30.8h-4v-3.73h7.08l16.9 22.09h.19V30.8h-4.58v-3.73h12.32zm43.8 27h-3.31l-7.83-23.18h-.19l-7.55 23.18h-3.35l-8.78-27h-2.65v-3.73H253v3.73h-3.87L255 50.71h.23l6.61-19.91H259v-3.73h11v3.73h-2.78l6.61 20.1h.23l5.43-20.1h-4.15v-3.73h11v3.73h-2.54zm26.71-1.51a9.66 9.66 0 01-6.42 2 10.2 10.2 0 01-7.41-2.74c-1.89-1.82-2.83-4.47-2.83-7.93a12.37 12.37 0 012.64-8.12 9 9 0 017.32-3.21 8.62 8.62 0 016.75 2.69 9.65 9.65 0 012.45 6.52 13.67 13.67 0 01-.28 2.69H290q.29 6.71 6.18 6.7a5.2 5.2 0 003.71-1.18 5.82 5.82 0 001.67-2.83l3.45.71a7.21 7.21 0 01-2.73 4.65zm25.77-1.63c-1.51 2.4-3.92 3.61-7.22 3.61s-5.84-1.29-7.22-3.87c0 .25-.1.82-.21 1.7s-.19 1.44-.22 1.7H309c.16-1 .31-2 .47-3.07a21.42 21.42 0 00.24-3.16v-23h-3.4v-3.3h7.55V40.9a9.76 9.76 0 012.67-3.28 7.33 7.33 0 014.74-1.4 8.48 8.48 0 016.5 2.78q2.55 2.74 2.55 7.74a14.6 14.6 0 01-2.27 7.87zm41.39-1.14q-4.11 4.28-11.37 4.28H344v-3.74h3.73V30.75H344v-3.68h13.83q7.59 0 11.66 4.29a15.41 15.41 0 014.06 11 15.34 15.34 0 01-4.11 11.11zm25.65 1.68a10.53 10.53 0 01-7.9 3.07 10 10 0 01-7.63-3 10.93 10.93 0 01-2.8-7.83 12.13 12.13 0 012.69-7.93q2.69-3.3 8-3.3t8 3.28a12 12 0 012.64 7.76 10.86 10.86 0 01-3 7.9zm22.61.57c-1.4 1.66-3.63 2.5-6.68 2.5a9.58 9.58 0 01-7.15-2.76q-2.72-2.76-2.71-7.91a12.25 12.25 0 012.69-8 9.17 9.17 0 017.5-3.28 15 15 0 013.82.48 10.37 10.37 0 013.5 1.65l.85 5.47-3.35.38-.76-3.54a8.07 8.07 0 00-4.11-1 4.9 4.9 0 00-4.39 2.15 9.93 9.93 0 00-1.41 5.55 8.9 8.9 0 001.5 5.38 5.23 5.23 0 004.44 2c2.92 0 4.67-1.7 5.23-5.1l3.5.71a10.34 10.34 0 01-2.47 5.27zm20.48.75a11.68 11.68 0 01-6.63 1.75 15.52 15.52 0 01-8.26-2.08L424 51l3.26.33-.1 2.74a7 7 0 002.06.66 12.63 12.63 0 002.19.19 8.68 8.68 0 003.66-.75 2.5 2.5 0 001.63-2.36 2.25 2.25 0 00-1.32-2.2 12.65 12.65 0 00-3.28-1 47.39 47.39 0 01-3.9-.82 7.5 7.5 0 01-3.25-1.7 4.67 4.67 0 01-1.33-3.66c0-2.36.88-4 2.62-4.91a12 12 0 015.6-1.37 15 15 0 014.08.55 16.65 16.65 0 013.47 1.39l.47 5.1-3.3.37-.48-3.3a9.5 9.5 0 00-4.06-.9 5.62 5.62 0 00-2.87.66 2.33 2.33 0 00-1.15 2.25 2.13 2.13 0 001.3 2.07 11.91 11.91 0 003.21.92 36.69 36.69 0 013.82.83 7.46 7.46 0 013.21 1.74 4.9 4.9 0 011.3 3.73 5.56 5.56 0 01-2.66 4.91z"></path><path d="M181.17 30.75h-5.71v23.31h5.71q5.47 0 8.36-3t2.88-8.61q0-5.43-2.88-8.55t-8.36-3.15zM121.63 119.32V81.74h114.91v37.58zM153.22 109h-2v-6.85a4.8 4.8 0 00-1.58-4 5.57 5.57 0 00-3.55-1.26 5 5 0 00-4.92 3.26 4.19 4.19 0 00-1.88-2.46 5.82 5.82 0 00-3-.8 4.89 4.89 0 00-4.56 2.56v-2.21h-6.28v3.26h2v8.5h-2v3.23h9.11V109h-2.86v-5.25a4.4 4.4 0 01.69-2.56 2.47 2.47 0 012.21-1q2.57 0 2.56 3.63v8.41h6.29V109h-2v-5.25a4.47 4.47 0 01.67-2.56 2.42 2.42 0 012.19-1q2.63 0 2.63 3.63v8.41h6.28zm9.88-12.07q-4 0-6 2.36a8.41 8.41 0 00-2 5.66 7.25 7.25 0 002.17 5.62 8 8 0 005.65 2 8.54 8.54 0 005.94-2.11 7.27 7.27 0 002.34-5.67 8.21 8.21 0 00-2-5.51q-2.07-2.34-6.1-2.34zm-.1 12.35a3 3 0 01-2.63-1.33 5.68 5.68 0 01-.9-3.26 5 5 0 011-3.28 3.23 3.23 0 012.61-1.18 3.5 3.5 0 012.59 1.08 4.56 4.56 0 011.07 3.31 5.21 5.21 0 01-1 3.41 3.33 3.33 0 01-2.74 1.25zm25-2.3l-3.39-.29-.7 2.32H179l8.32-9.54-.32-2.23h-13.19l-.53 5.25 3.16.34.67-2.36h4.65l-8.25 9.53.44 2.26h13.13zm7.62-9.74h-4.46v5.39h4.46zm0 9.61h-4.46v5.39h4.46zm13.54-17.49h-4.23l-6.48 22.88h4.22zm8.68 0h-4.23l-6.45 22.88h4.19zm15 22.51l-.07-2.26a1.22 1.22 0 01-.56.1c-.69 0-1-.39-1-1.16v-6.49a4.39 4.39 0 00-1.8-3.84 7 7 0 00-4.16-1.28 14.55 14.55 0 00-3.16.3 24.14 24.14 0 00-3.29 1.06l-.56 3.46 3.39.4.5-1.69a2.78 2.78 0 011.08-.37 11.3 11.3 0 011.25-.07c1.19 0 1.89.37 2.09 1.1a8.55 8.55 0 01.3 2.26v.5a8.91 8.91 0 00-1.18-.11h-1.21a12.64 12.64 0 00-4.81.88 3.53 3.53 0 00-2.18 3.64 3.66 3.66 0 001.48 3.33 5.63 5.63 0 003.11 1 4.67 4.67 0 003-.91 6.78 6.78 0 001.8-2 3 3 0 003.33 3 5.54 5.54 0 002.66-.85zm-9.25-2.32a1.69 1.69 0 01-1.36-.52 1.81 1.81 0 01-.43-1.21 1.67 1.67 0 01.86-1.68 4.63 4.63 0 012-.42 7.69 7.69 0 011.07.07l1.06.13a3.58 3.58 0 01-1.08 2.74 3.24 3.24 0 01-2.11.89z"></path></svg></a></div><ul class="link-list-mdn"><li><a href="/zh-CN/docs/Web">Web Technologies</a></li><li><a href="/zh-CN/docs/Learn">Learn Web Development</a></li><li><a href="/zh-CN/docs/MDN/About">About MDN</a></li><li><a href="/zh-CN/docs/MDN/Feedback">Feedback</a></li></ul><ul class="link-list-moz"><li><a href="https://www.mozilla.org/about/" target="_blank" rel="noopener noreferrer">About</a></li><li><a href="https://shop.spreadshirt.com/mdn-store/" target="_blank" rel="noopener noreferrer">MDN Web Docs Store</a></li><li><a href="https://www.mozilla.org/contact/" target="_blank" rel="noopener noreferrer">Contact Us</a></li><li><a href="https://www.mozilla.org/firefox/?utm_source=developer.mozilla.org&amp;utm_campaign=footer&amp;utm_medium=referral" target="_blank" rel="noopener noreferrer">Firefox</a></li></ul><div class="social social-mdn"><h4>MDN</h4><ul><li><a class="social-icon twitter" href="https://twitter.com/mozdevnet" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">MDN on Twitter</span></a></li><li><a class="social-icon github" href="https://github.com/mdn/" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">MDN on Github</span></a></li></ul></div><div class="social social-moz"><h4>Mozilla</h4><ul><li><a class="social-icon twitter" href="https://twitter.com/mozilla" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">Mozilla on Twitter</span></a></li><li><a class="social-icon instagram" href="https://www.instagram.com/mozillagram/" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">Mozilla on Instagram</span></a></li></ul></div><p id="license" class="footer-license">© 2005-<!-- -->2022<!-- --> Mozilla and individual contributors. Content is available under<!-- --> <a href="/docs/MDN/About#Copyrights_and_licenses">these licenses</a>.</p><ul class="footer-legal"><li><a href="https://www.mozilla.org/about/legal/terms/mozilla" target="_blank" rel="noopener noreferrer">Terms</a></li><li><a href="https://www.mozilla.org/privacy/websites/" target="_blank" rel="noopener noreferrer">Privacy</a></li><li><a href="https://www.mozilla.org/privacy/websites/#cookies" target="_blank" rel="noopener noreferrer">Cookies</a></li></ul></div></footer><div class="page-overlay hidden"></div></div><script type="application/json" id="hydration">{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"Web Audio API","mdn_url":"/zh-CN/docs/Web/API/Web_Audio_API","locale":"zh-CN","native":"中文 (简体)","sidebarHTML":"","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>Web Audio API 提供了在 Web 上控制音频的一个非常有效通用的系统，允许开发者来自选音频源，对音频添加特效，使音频可视化，添加空间效果（如平移），等等。</p>"}},{"type":"prose","value":{"id":"web_audio_概念与使用","title":"Web audio 概念与使用","isH3":false,"content":"<p>Web Audio API 使用户可以在<strong>音频上下文</strong>(AudioContext) 中进行音频操作，具有<strong>模块化路由</strong>的特点。在<strong>音频节点</strong>上操作进行基础的音频， 它们连接在一起构成<strong>音频路由图</strong>。即使在单个上下文中也支持多源，尽管这些音频源具有多种不同类型通道布局。这种模块化设计提供了灵活创建动态效果的复合音频的方法。</p>\n<p>音频节点通过它们的输入输出相互连接，形成一个链或者一个简单的网。一般来说，这个链或网起始于一个或多个音频源。音频源可以提供一个片段一个片段的音频采样数据（以数组的方式），一般，一秒钟的音频数据可以被切分成几万个这样的片段。这些片段可以是经过一些数学运算得到 （比如<a href=\"/zh-CN/docs/Web/API/OscillatorNode\"><code>OscillatorNode</code></a>），也可以是音频或视频的文件读出来的（比如<a href=\"/zh-CN/docs/Web/API/AudioBufferSourceNode\"><code>AudioBufferSourceNode</code></a>和<a href=\"/zh-CN/docs/Web/API/MediaElementAudioSourceNode\"><code>MediaElementAudioSourceNode</code></a>），又或者是音频流（<a href=\"/zh-CN/docs/Web/API/MediaStreamAudioSourceNode\"><code>MediaStreamAudioSourceNode</code></a>）。其实，音频文件本身就是声音的采样数据，这些采样数据可以来自麦克风，也可以来自电子乐器，然后混合成一个单一的复杂的波形。</p>\n<p>这些节点的输出可以连接到其它节点的输入上，然后新节点可以对接收到的采样数据再进行其它的处理，再形成一个结果流。一个最常见的操作是通过把输入的采样数据放大来达到扩音器的作用（缩小就是一个弱音器）（参见<a href=\"/zh-CN/docs/Web/API/GainNode\"><code>GainNode</code></a>）。声音处理完成之后，可以连接到一个目的地（<a href=\"/zh-CN/docs/Web/API/BaseAudioContext/destination\"><code>AudioContext.destination</code></a>），这个目的地负责把声音数据传输给扬声器或者耳机。注意，只有当用户期望听到声音时，才需要进行最后一个这个连接。</p>\n<p>一个简单而典型的 web audio 流程如下：</p>\n<ol>\n  <li>创建音频上下文</li>\n  <li>在音频上下文里创建源 — 例如 <code>&lt;audio&gt;</code>, 振荡器，流</li>\n  <li>创建效果节点，例如混响、双二阶滤波器、平移、压缩</li>\n  <li>为音频选择一个目的地，例如你的系统扬声器</li>\n  <li>连接源到效果器，对目的地进行效果输出</li>\n</ol>\n<p>\n  <img src=\"https://mdn.mozillademos.org/files/12241/webaudioAPI_en.svg\" alt=\"A simple box diagram with an outer box labeled Audio context, and three inner boxes labeled Sources, Effects and Destination. The three inner boxes have arrow between them pointing from left to right, indicating the flow of audio information.\" loading=\"lazy\">\n</p>\n<p>使用这个 API，时间可以被非常精确地控制，几乎没有延迟，这样开发人员可以准确地响应事件，并且可以针对采样数据进行编程，甚至是较高的采样率。这样，鼓点和节拍是准确无误的。</p>\n<p>Web Audio API 也使我们能够控制音频的<em>空间化</em>。在基于<em>源 - 侦听器模型</em>的系统中，它允许控制<em>平移模型</em>和处理<em>距离引起的衰减</em>或移动源（移动侦听）引起的<em>多普勒效应</em>。</p>\n<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>备注：</strong> 你可以阅读我们关于 Web Audio API 的文章来了解更多细节 <a href=\"/zh-CN/docs/Web/API/Web_Audio_API/Basic_concepts_behind_Web_Audio_API\">Web Audio API 背后的基本概念</a>。</p>\n</div>"}},{"type":"prose","value":{"id":"web_audio_api_接口","title":"Web Audio API 接口","isH3":false,"content":"<p>Web Audio API 共有一系列接口和相关的事件，我们已经把它们分成了九类功能。</p>"}},{"type":"prose","value":{"id":"通用音频图定义","title":"通用音频图定义","isH3":true,"content":"<p>Web Audio API 中与生成音频图相关的定义与通用容器。</p>\n<dl>\n  <dt id=\"audiocontext\"><a href=\"/zh-CN/docs/Web/API/AudioContext\"><code>AudioContext</code></a></dt>\n  <dd>\n    <p><strong><code>AudioContext</code></strong> 接口代表由音频模块构成的音频处理图。音频上下文控制其所包含节点的创建和音频处理、解码。使用其它接口前你必需创建一个<code>音频上下文</code>，一切操作都在这个环境里进行。</p>\n  </dd>\n  <dt id=\"audionode\"><a href=\"/zh-CN/docs/Web/API/AudioNode\"><code>AudioNode</code></a></dt>\n  <dd>\n    <p><strong><code>音频节点</code></strong> 接口是一个音频处理模块， 例如音频源（<a href=\"/zh-CN/docs/Web/HTML/Element/audio\"><code>&lt;audio&gt;</code></a>或<a href=\"/zh-CN/docs/Web/HTML/Element/video\"><code>&lt;video&gt;</code></a>），音频输出、中间处理模块（例如：滤波器 <a href=\"/zh-CN/docs/Web/API/BiquadFilterNode\"><code>BiquadFilterNode</code></a> 或者音量控制器 <a href=\"/zh-CN/docs/Web/API/GainNode\"><code>GainNode</code></a>）。</p>\n  </dd>\n  <dt id=\"audioparam\"><a href=\"/zh-CN/docs/Web/API/AudioParam\"><code>AudioParam</code></a></dt>\n  <dd>\n    <p><strong><code>AudioParam</code></strong> 接口代表音频相关的参数，比如一个 <a href=\"/zh-CN/docs/Web/API/AudioNode\"><code>AudioNode</code></a>的参数。它可以设置为特定值或值的变化，并且可以在指定的时间之后以指定模式变更。</p>\n  </dd>\n  <dt id=\"ended\"><code><a href=\"/en-US/docs/Web/API/HTMLMediaElement/ended_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">ended (en-US)</a></code>结束事件</dt>\n  <dd>\n    <p>当媒体播放停止时，会触发<code>ended</code>事件。</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"定义音频源","title":"定义音频源","isH3":true,"content":"<p>Web Audio API 使用的音频源接口。</p>\n<dl>\n  <dt id=\"oscillatornode\"><a href=\"/zh-CN/docs/Web/API/OscillatorNode\"><code>OscillatorNode</code></a></dt>\n  <dd>\n    <p><strong><code>OscillatorNode</code></strong> 接口代表一种随时间变化的波形，比如正弦波形或三角波形。类型是<a href=\"/zh-CN/docs/Web/API/AudioNode\"><code>AudioNode</code></a>，功能是音频处理模块，可以产生指定<em>频率</em>的波形。</p>\n  </dd>\n  <dt id=\"audiobuffer\"><a href=\"/zh-CN/docs/Web/API/AudioBuffer\"><code>AudioBuffer</code></a></dt>\n  <dd>\n    <p><strong><code>AudioBuffer</code></strong> 代表内存中的一段音频数据，可以通过<a href=\"/zh-CN/docs/Web/API/BaseAudioContext/decodeAudioData\"><code>AudioContext.decodeAudioData()</code></a>方法从音频文件创建，也可以通过<a href=\"/zh-CN/docs/Web/API/BaseAudioContext/createBuffer\"><code>AudioContext.createBuffer()</code></a>方法从原始数据创建。当音频数据被解码成这种格式之后，就可以被放入一个<a href=\"/zh-CN/docs/Web/API/AudioBufferSourceNode\"><code>AudioBufferSourceNode</code></a>中使用。</p>\n  </dd>\n  <dt id=\"audiobuffersourcenode\"><a href=\"/zh-CN/docs/Web/API/AudioBufferSourceNode\"><code>AudioBufferSourceNode</code></a></dt>\n  <dd>\n    <p><strong><code>AudioBufferSourceNode</code></strong> 表示由内存音频数据组成的音频源，音频数据存储在<a href=\"/zh-CN/docs/Web/API/AudioBuffer\"><code>AudioBuffer</code></a>中。这是一个作为音频源的<a href=\"/zh-CN/docs/Web/API/AudioNode\"><code>AudioNode</code></a>。</p>\n  </dd>\n  <dt id=\"mediaelementaudiosourcenode\"><a href=\"/zh-CN/docs/Web/API/MediaElementAudioSourceNode\"><code>MediaElementAudioSourceNode</code></a></dt>\n  <dd>\n    <p><strong><code>MediaElementAudioSourceNode</code></strong> 接口表示由 HTML5 <a href=\"/zh-CN/docs/Web/HTML/Element/audio\"><code>&lt;audio&gt;</code></a>或<a href=\"/zh-CN/docs/Web/HTML/Element/video\"><code>&lt;video&gt;</code></a>元素生成的音频源。这是一个作为音频源的<a href=\"/zh-CN/docs/Web/API/AudioNode\"><code>AudioNode</code></a>。</p>\n  </dd>\n  <dt id=\"mediastreamaudiosourcenode\"><a href=\"/zh-CN/docs/Web/API/MediaStreamAudioSourceNode\"><code>MediaStreamAudioSourceNode</code></a></dt>\n  <dd>\n    <p><strong><code>MediaStreamAudioSourceNode</code></strong> 接口表示由 WebRTC <a href=\"/zh-CN/docs/Web/API/MediaStream\"><code>MediaStream</code></a>（如网络摄像头或麦克风）生成的音频源。这是一个作为音频源的<a href=\"/zh-CN/docs/Web/API/AudioNode\"><code>AudioNode</code></a>。</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"定义音效","title":"定义音效","isH3":true,"content":"<p>应用到音频源上的音效。</p>\n<dl>\n  <dt id=\"biquadfilternode\"><a href=\"/zh-CN/docs/Web/API/BiquadFilterNode\"><code>BiquadFilterNode</code></a></dt>\n  <dd>\n    <p><strong><code>BiquadFilterNode</code></strong> 接口表示一个简单的低阶滤波器。它是一个<a href=\"/zh-CN/docs/Web/API/AudioNode\"><code>AudioNode</code></a>，可以表示不同种类的滤波器、调音器或图形均衡器。<code>BiquadFilterNode</code> 总是只有一个输入和一个输出。</p>\n  </dd>\n  <dt id=\"convolvernode\"><a href=\"/zh-CN/docs/Web/API/ConvolverNode\"><code>ConvolverNode</code></a></dt>\n  <dd>\n    <p><strong><code>ConvolverNode</code></strong> 接口是一个<a href=\"/zh-CN/docs/Web/API/AudioNode\"><code>AudioNode</code></a>，对给定的 AudioBuffer 执行线性卷积，通常用于实现混响效果。</p>\n  </dd>\n  <dt id=\"delaynode_en-us\"><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DelayNode\"><code>DelayNode</code> <small>(en-US)</small></a></dt>\n  <dd>\n    <p><strong><code>DelayNode</code></strong> 接口表示<a href=\"http://en.wikipedia.org/wiki/Digital_delay_line\" class=\"external\" rel=\" noopener\">延迟线</a>；是<a href=\"/zh-CN/docs/Web/API/AudioNode\"><code>AudioNode</code></a> 类型的音频处理模块，使输入的数据延时输出。</p>\n  </dd>\n  <dt id=\"dynamicscompressornode\"><a href=\"/zh-CN/docs/Web/API/DynamicsCompressorNode\"><code>DynamicsCompressorNode</code></a></dt>\n  <dd>\n    <p><strong><code>DynamicsCompressorNode</code></strong> 提供了一个压缩效果，当多个音频在同时播放并且混合的时候，可以通过它降低音量最大的部分的音量来帮助避免发生削波和失真。</p>\n  </dd>\n  <dt id=\"gainnode\"><a href=\"/zh-CN/docs/Web/API/GainNode\"><code>GainNode</code></a></dt>\n  <dd>\n    <p><strong><code>GainNode</code></strong> 接口用于音量变化。它是一个 <a href=\"/zh-CN/docs/Web/API/AudioNode\"><code>AudioNode</code></a> 类型的音频处理模块，输入后应用<em>增益</em> 效果，然后输出。</p>\n  </dd>\n  <dt id=\"stereopannernode_en-us\"><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/StereoPannerNode\"><code>StereoPannerNode</code> <small>(en-US)</small></a></dt>\n  <dd>\n    <p><strong><code>StereoPannerNode</code></strong> 接口表示一个简单立体声控制节点，用来左右移动音频流。</p>\n  </dd>\n  <dt id=\"waveshapernode\"><a href=\"/zh-CN/docs/Web/API/WaveShaperNode\"><code>WaveShaperNode</code></a></dt>\n  <dd>\n    <p><strong><code>WaveShaperNode</code></strong> 接口表示一个非线性的扭曲。它是<a href=\"/zh-CN/docs/Web/API/AudioNode\"><code>AudioNode</code></a>类型，可以利用曲线来对信号进行扭曲。除了一些效果明显的扭曲，还常被用来给声音添加温暖的感觉。</p>\n  </dd>\n  <dt id=\"periodicwave\"><a href=\"/zh-CN/docs/Web/API/PeriodicWave\"><code>PeriodicWave</code></a></dt>\n  <dd>\n    <p>用来定义周期性的波形，可被用来重塑 <a href=\"/zh-CN/docs/Web/API/OscillatorNode\"><code>OscillatorNode</code></a>的输出。</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"定义音频目的地","title":"定义音频目的地","isH3":true,"content":"<p>在你处理完音频之后，这些接口定义了输出到哪里。</p>\n<dl>\n  <dt id=\"audiodestinationnode\"><a href=\"/zh-CN/docs/Web/API/AudioDestinationNode\"><code>AudioDestinationNode</code></a></dt>\n  <dd>\n    <p><strong><code>AudioDestinationNode</code></strong> 定义了最后音频要输出到哪里，通常是输出到你的扬声器。</p>\n  </dd>\n  <dt id=\"mediastreamaudiodestinationnode_en-us\"><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/MediaStreamAudioDestinationNode\"><code>MediaStreamAudioDestinationNode</code> <small>(en-US)</small></a></dt>\n  <dd>\n    <p><strong><code>MediaStreamAudioDestinationNode</code></strong> 定义了使用 <a href=\"/en-US/docs/Web/API/WebRTC_API\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">WebRTC (en-US)</a> 的<a href=\"/zh-CN/docs/Web/API/MediaStream\"><code>MediaStream</code></a>（只包含单个 AudioMediaStreamTrack）应该连接的目的地，AudioMediaStreamTrack 的使用方式和从<a href=\"/zh-CN/docs/Web/API/MediaDevices/getUserMedia\" title=\"getUserMedia()\"><code>getUserMedia()</code></a>中得到<a href=\"/zh-CN/docs/Web/API/MediaStream\"><code>MediaStream</code></a>相似。这个接口是<a href=\"/zh-CN/docs/Web/API/AudioNode\"><code>AudioNode</code></a>类型的音频目的地。</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"数据分析和可视化","title":"数据分析和可视化","isH3":true,"content":"<p>如果你想从音频里提取时间、频率或者其它数据，你需要 AnalyserNode。</p>\n<dl>\n  <dt id=\"analysernode\"><a href=\"/zh-CN/docs/Web/API/AnalyserNode\"><code>AnalyserNode</code></a></dt>\n  <dd>\n    <p><strong><code>AnalyserNode</code></strong> 表示一个可以提供实时频率分析与时域分析的切点，这些分析数据可以用做数据分析和可视化。</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"分离、合并声道","title":"分离、合并声道","isH3":true,"content":"<p>你将使用这些接口来拆分、合并声道。</p>\n<dl>\n  <dt id=\"channelsplitternode_en-us\"><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/ChannelSplitterNode\"><code>ChannelSplitterNode</code> <small>(en-US)</small></a></dt>\n  <dd>\n    <p><strong><code>ChannelSplitterNode</code></strong> 可以把输入流的每个声道输出到一个独立的输出流。</p>\n  </dd>\n  <dt id=\"channelmergernode\"><a href=\"/zh-CN/docs/Web/API/ChannelMergerNode\"><code>ChannelMergerNode</code></a></dt>\n  <dd>\n    <p><strong><code>ChannelMergerNode</code></strong> 用于把一组输入流合成到一个输出流。输出流的每一个声道对应一个输入流。</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"声音空间效果","title":"声音空间效果","isH3":true,"content":"<p>这些接口用来添加空间平移效果到音频源。</p>\n<dl>\n  <dt id=\"audiolistener\"><a href=\"/zh-CN/docs/Web/API/AudioListener\"><code>AudioListener</code></a></dt>\n  <dd>\n    <p>**<code>AudioListener</code>**代表场景中正在听声音的人的位置和朝向。</p>\n  </dd>\n  <dt id=\"pannernode_en-us\"><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PannerNode\"><code>PannerNode</code> <small>(en-US)</small></a></dt>\n  <dd>\n    <p><strong><code>PannerNode</code></strong> 用于表示场景是声音的空间行为。它是<a href=\"/zh-CN/docs/Web/API/AudioNode\"><code>AudioNode</code></a>类型的音频处理模块，这个节点用于表示右手笛卡尔坐标系里声源的位置信息，运动信息（通过一个速度向量表示），方向信息（通过一个方向圆锥表示）。</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"使用_javascript_处理音频","title":"使用 JavaScript 处理音频","isH3":true,"content":"<p>可以编写 JavaScript 代码来处理音频数据。当然，这需要用到下面的接口和事件。</p>\n<div class=\"notecard note\" id=\"sect2\">\n  <p><strong>备注：</strong> 这些功能在 Web Audio API 的 2014 年 8 月 9 日版本中已经标记为不推荐的，这些功能很快会被<a href=\"#audio_workers\">Audio_Workers</a>代替。</p>\n</div>\n<dl>\n  <dt id=\"scriptprocessornode\"><a href=\"/zh-CN/docs/Web/API/ScriptProcessorNode\"><code>ScriptProcessorNode</code></a></dt>\n  <dd>\n    <p><strong><code>ScriptProcessorNode</code></strong> 接口用于通过 JavaScript 代码生成，处理，分析音频。它是一个<a href=\"/zh-CN/docs/Web/API/AudioNode\"><code>AudioNode</code></a>类型的音频处理模块，但是它与两个缓冲区相连接，一个缓冲区里包含当前的输入数据，另一个缓冲区里包含着输出数据。每当新的音频数据被放入输入缓冲区，就会产生一个<a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/AudioProcessingEvent\"><code>AudioProcessingEvent</code> <small>(en-US)</small></a>事件，当这个事件处理结束时，输出缓冲区里应该写好了新数据。</p>\n  </dd>\n  <dt id=\"audioprocess\"><code><a href=\"/en-US/docs/Web/API/ScriptProcessorNode/audioprocess_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">audioprocess (en-US)</a></code> (event)</dt>\n  <dd>\n    <p>当一个 Web Audio API <a href=\"/zh-CN/docs/Web/API/ScriptProcessorNode\"><code>ScriptProcessorNode</code></a>已经准备好进行处理时，这个事件回调会被调用。</p>\n  </dd>\n  <dt id=\"audioprocessingevent_en-us\"><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/AudioProcessingEvent\"><code>AudioProcessingEvent</code> <small>(en-US)</small></a></dt>\n  <dd>\n    <p>当<a href=\"/zh-CN/docs/Web/API/ScriptProcessorNode\"><code>ScriptProcessorNode</code></a>的输入流数据准备好了时，<code>AudioProcessingEvent</code>事件会产生。</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"离线（后台）音频处理","title":"离线（后台）音频处理","isH3":true,"content":"<p>在后台进行音频的快速处理也是可以的。仅仅生成包含音频数据的<a href=\"/zh-CN/docs/Web/API/AudioBuffer\"><code>AudioBuffer</code></a>，而不在扬声器里播放它。</p>\n<dl>\n  <dt id=\"offlineaudiocontext\"><a href=\"/zh-CN/docs/Web/API/OfflineAudioContext\"><code>OfflineAudioContext</code></a></dt>\n  <dd>\n    <p><strong><code>OfflineAudioContext</code></strong> 离线音频上下文也是音频上下文<a href=\"/zh-CN/docs/Web/API/AudioContext\"><code>AudioContext</code></a>，也表示把<a href=\"/zh-CN/docs/Web/API/AudioNode\"><code>AudioNode</code></a>连接到一起的一个音频处理图。但是，与一个标准的音频上下文相比，离线上下文不能把音频渲染到扬声器，仅仅是把音频渲染到一个缓冲区。</p>\n  </dd>\n  <dt id=\"complete\"><code><a href=\"/en-US/docs/Web/API/OfflineAudioContext/complete_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">complete (en-US)</a></code> (event)</dt>\n  <dd>\n    <p>Complete 事件，当离线音频上下文被终止时产生。</p>\n  </dd>\n  <dt id=\"offlineaudiocompletionevent_en-us\"><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/OfflineAudioCompletionEvent\"><code>OfflineAudioCompletionEvent</code> <small>(en-US)</small></a></dt>\n  <dd>\n    <p><code>OfflineAudioCompletionEvent</code>表示上下文被终止时的事件。</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"音频工作者","title":"音频工作者","isH3":true,"content":"<p>在了解这一部分内容之前，你可以先了解一个新的 WebWorker 方面的内容。音频工作者提供了一种可以在一个<a href=\"/zh-CN/docs/Web/API/Web_Workers_API/Using_web_workers\">WebWorker</a>上下文中直接进行音频处理的方式。现在已经定义了一些这部分功能的新接口，接口定义是在 2014 年的 8 月 29 日文档中。到目前为止，还没有浏览器已经对这些接口进行了实现。当这些接口被实现后，<a href=\"/zh-CN/docs/Web/API/ScriptProcessorNode\"><code>ScriptProcessorNode</code></a>和<a href=\"/zh-CN/docs/Web/API/Web_Audio_API#Audio_processing_via_JavaScript\" aria-current=\"page\">前文</a>中提到的其它接口都会被替代。</p>\n<dl>\n  <dt id=\"audioworkernode\"><a class=\"page-not-created\" title=\"此文档尚未被撰写，期待你的贡献!\"><code>AudioWorkerNode</code></a></dt>\n  <dd>\n    <p>AudioWorkerNode 也是<a href=\"/zh-CN/docs/Web/API/AudioNode\"><code>AudioNode</code></a>类型，但是它用于与工作者线程合作来直接完成音频的生成，处理或分析等操作。</p>\n  </dd>\n  <dt id=\"audioworkerglobalscope\"><a class=\"page-not-created\" title=\"此文档尚未被撰写，期待你的贡献!\"><code>AudioWorkerGlobalScope</code></a></dt>\n  <dd>\n    <p><code>AudioWorkerGlobalScope</code> 继承于 <code>DedicatedWorkerGlobalScope</code>。代表一个工作者上下文。这个工作者上下文里运行着对音频进行处理的脚本。设计这个接口的目的，是为了直接通过编写 JavaScript 代码，来完成对音频数据的生成，处理，分析工作。</p>\n  </dd>\n  <dt id=\"audioprocessevent\"><a class=\"page-not-created\" title=\"此文档尚未被撰写，期待你的贡献!\"><code>AudioProcessEvent</code></a></dt>\n  <dd>\n    <p>这是一个事件对象。这个对象会被分发给<a class=\"page-not-created\" title=\"此文档尚未被撰写，期待你的贡献!\"><code>AudioWorkerGlobalScope</code></a>对象来进行处理。</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"过时的接口","title":"过时的接口","isH3":false,"content":"<p>下面介绍到的这些接口定义于比较老的 Web Audio API 标准，现在已经过时了，而且已经被新接口取代。</p>\n<dl>\n  <dt id=\"javascriptnode\"><a class=\"page-not-created\" title=\"此文档尚未被撰写，期待你的贡献!\"><code>JavaScriptNode</code></a></dt>\n  <dd>\n    <p>用于通过编写 JavaScript 代码直接处理音频数据，现在已经被<a href=\"/zh-CN/docs/Web/API/ScriptProcessorNode\"><code>ScriptProcessorNode</code></a>取代。</p>\n  </dd>\n  <dt id=\"wavetablenode\"><a class=\"page-not-created\" title=\"此文档尚未被撰写，期待你的贡献!\"><code>WaveTableNode</code></a></dt>\n  <dd>\n    <p>用于定义一个周期性波形，现在已经被<a href=\"/zh-CN/docs/Web/API/PeriodicWave\"><code>PeriodicWave</code></a>取代。</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"示例","title":"示例","isH3":false,"content":"<p>下面的这个示例使用了较多的 Web Audio API 接口，可以通过访问<a href=\"https://mdn.github.io/voice-change-o-matic/\" class=\"external\" rel=\" noopener\">网址</a>来查看它的时时运行情况，也可以访问 GitHub 上它的<a href=\"https://github.com/mdn/voice-change-o-matic\" class=\"external\" rel=\" noopener\">源代码</a>。这个示例里会对声音的音量进行改变，打开页面时，可以先把扬声器的音量调小一些。</p>\n<p>Web Audio API 接口在下面的代码里已经高亮显示。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> audioCtx <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>AudioContext <span class=\"token operator\">||</span> window<span class=\"token punctuation\">.</span>webkitAudioContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// define audio context</span>\n<span class=\"token comment\">// Webkit/blink browsers need prefix, Safari won't work without window.</span>\n\n<span class=\"token keyword\">var</span> voiceSelect <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"voice\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// select box for selecting voice effect options</span>\n<span class=\"token keyword\">var</span> visualSelect <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"visual\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// select box for selecting audio visualization options</span>\n<span class=\"token keyword\">var</span> mute <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.mute'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// mute button</span>\n<span class=\"token keyword\">var</span> drawVisual<span class=\"token punctuation\">;</span> <span class=\"token comment\">// requestAnimationFrame</span>\n\n<span class=\"token keyword\">var</span> analyser <span class=\"token operator\">=</span> audioCtx<span class=\"token punctuation\">.</span><span class=\"token function\">createAnalyser</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> distortion <span class=\"token operator\">=</span> audioCtx<span class=\"token punctuation\">.</span><span class=\"token function\">createWaveShaper</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> gainNode <span class=\"token operator\">=</span> audioCtx<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> biquadFilter <span class=\"token operator\">=</span> audioCtx<span class=\"token punctuation\">.</span><span class=\"token function\">createBiquadFilter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">makeDistortionCurve</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">amount</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// function to make curve shape for distortion/wave shaper node to use</span>\n  <span class=\"token keyword\">var</span> k <span class=\"token operator\">=</span> <span class=\"token keyword\">typeof</span> amount <span class=\"token operator\">===</span> <span class=\"token string\">'number'</span> <span class=\"token operator\">?</span> amount <span class=\"token operator\">:</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span>\n    n_samples <span class=\"token operator\">=</span> <span class=\"token number\">44100</span><span class=\"token punctuation\">,</span>\n    curve <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Float32Array</span><span class=\"token punctuation\">(</span>n_samples<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    deg <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token constant\">PI</span> <span class=\"token operator\">/</span> <span class=\"token number\">180</span><span class=\"token punctuation\">,</span>\n    i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    x<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span> <span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> n_samples<span class=\"token punctuation\">;</span> <span class=\"token operator\">++</span>i <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    x <span class=\"token operator\">=</span> i <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">/</span> n_samples <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    curve<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span> <span class=\"token number\">3</span> <span class=\"token operator\">+</span> k <span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> x <span class=\"token operator\">*</span> <span class=\"token number\">20</span> <span class=\"token operator\">*</span> deg <span class=\"token operator\">/</span> <span class=\"token punctuation\">(</span> Math<span class=\"token punctuation\">.</span><span class=\"token constant\">PI</span> <span class=\"token operator\">+</span> k <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">abs</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">return</span> curve<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nnavigator<span class=\"token punctuation\">.</span><span class=\"token function\">getUserMedia</span> <span class=\"token punctuation\">(</span>\n  <span class=\"token comment\">// constraints - only audio needed for this app</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">audio</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// Success callback</span>\n  <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">stream</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    source <span class=\"token operator\">=</span> audioCtx<span class=\"token punctuation\">.</span><span class=\"token function\">createMediaStreamSource</span><span class=\"token punctuation\">(</span>stream<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    source<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>analyser<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    analyser<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>distortion<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    distortion<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>biquadFilter<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    biquadFilter<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>gainNode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    gainNode<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>audioCtx<span class=\"token punctuation\">.</span>destination<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// connecting the different audio graph nodes together</span>\n\n    <span class=\"token function\">visualize</span><span class=\"token punctuation\">(</span>stream<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">voiceChange</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// Error callback</span>\n  <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'The following gUM error occured: '</span> <span class=\"token operator\">+</span> err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">visualize</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">stream</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">WIDTH</span> <span class=\"token operator\">=</span> canvas<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">;</span>\n  <span class=\"token constant\">HEIGHT</span> <span class=\"token operator\">=</span> canvas<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">var</span> visualSetting <span class=\"token operator\">=</span> visualSelect<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>visualSetting<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>visualSetting <span class=\"token operator\">==</span> <span class=\"token string\">\"sinewave\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    analyser<span class=\"token punctuation\">.</span>fftSize <span class=\"token operator\">=</span> <span class=\"token number\">2048</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">var</span> bufferLength <span class=\"token operator\">=</span> analyser<span class=\"token punctuation\">.</span>frequencyBinCount<span class=\"token punctuation\">;</span> <span class=\"token comment\">// half the FFT value</span>\n    <span class=\"token keyword\">var</span> dataArray <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Uint8Array</span><span class=\"token punctuation\">(</span>bufferLength<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// create an array to store the data</span>\n\n    canvasCtx<span class=\"token punctuation\">.</span><span class=\"token function\">clearRect</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">WIDTH</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">HEIGHT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n      drawVisual <span class=\"token operator\">=</span> <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>draw<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      analyser<span class=\"token punctuation\">.</span><span class=\"token function\">getByteTimeDomainData</span><span class=\"token punctuation\">(</span>dataArray<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// get waveform data and put it into the array created above</span>\n\n      canvasCtx<span class=\"token punctuation\">.</span>fillStyle <span class=\"token operator\">=</span> <span class=\"token string\">'rgb(200, 200, 200)'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// draw wave with canvas</span>\n      canvasCtx<span class=\"token punctuation\">.</span><span class=\"token function\">fillRect</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">WIDTH</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">HEIGHT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      canvasCtx<span class=\"token punctuation\">.</span>lineWidth <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n      canvasCtx<span class=\"token punctuation\">.</span>strokeStyle <span class=\"token operator\">=</span> <span class=\"token string\">'rgb(0, 0, 0)'</span><span class=\"token punctuation\">;</span>\n\n      canvasCtx<span class=\"token punctuation\">.</span><span class=\"token function\">beginPath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">var</span> sliceWidth <span class=\"token operator\">=</span> <span class=\"token constant\">WIDTH</span> <span class=\"token operator\">*</span> <span class=\"token number\">1.0</span> <span class=\"token operator\">/</span> bufferLength<span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">var</span> x <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> bufferLength<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n        <span class=\"token keyword\">var</span> v <span class=\"token operator\">=</span> dataArray<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">/</span> <span class=\"token number\">128.0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">var</span> y <span class=\"token operator\">=</span> v <span class=\"token operator\">*</span> <span class=\"token constant\">HEIGHT</span><span class=\"token operator\">/</span><span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          canvasCtx<span class=\"token punctuation\">.</span><span class=\"token function\">moveTo</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n          canvasCtx<span class=\"token punctuation\">.</span><span class=\"token function\">lineTo</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n\n        x <span class=\"token operator\">+=</span> sliceWidth<span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n      canvasCtx<span class=\"token punctuation\">.</span><span class=\"token function\">lineTo</span><span class=\"token punctuation\">(</span>canvas<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">,</span> canvas<span class=\"token punctuation\">.</span>height<span class=\"token operator\">/</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      canvasCtx<span class=\"token punctuation\">.</span><span class=\"token function\">stroke</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>visualSetting <span class=\"token operator\">==</span> <span class=\"token string\">\"off\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    canvasCtx<span class=\"token punctuation\">.</span><span class=\"token function\">clearRect</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">WIDTH</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">HEIGHT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    canvasCtx<span class=\"token punctuation\">.</span>fillStyle <span class=\"token operator\">=</span> <span class=\"token string\">\"red\"</span><span class=\"token punctuation\">;</span>\n    canvasCtx<span class=\"token punctuation\">.</span><span class=\"token function\">fillRect</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">WIDTH</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">HEIGHT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">voiceChange</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  distortion<span class=\"token punctuation\">.</span>curve <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Float32Array</span><span class=\"token punctuation\">;</span>\n  biquadFilter<span class=\"token punctuation\">.</span>gain<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// reset the effects each time the voiceChange function is run</span>\n\n  <span class=\"token keyword\">var</span> voiceSetting <span class=\"token operator\">=</span> voiceSelect<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>voiceSetting<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>voiceSetting <span class=\"token operator\">==</span> <span class=\"token string\">\"distortion\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    distortion<span class=\"token punctuation\">.</span>curve <span class=\"token operator\">=</span> <span class=\"token function\">makeDistortionCurve</span><span class=\"token punctuation\">(</span><span class=\"token number\">400</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// apply distortion to sound using waveshaper node</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>voiceSetting <span class=\"token operator\">==</span> <span class=\"token string\">\"biquad\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    biquadFilter<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">\"lowshelf\"</span><span class=\"token punctuation\">;</span>\n    biquadFilter<span class=\"token punctuation\">.</span>frequency<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">;</span>\n    biquadFilter<span class=\"token punctuation\">.</span>gain<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token number\">25</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// apply lowshelf filter to sounds using biquad</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>voiceSetting <span class=\"token operator\">==</span> <span class=\"token string\">\"off\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Voice settings turned off\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// do nothing, as off option was chosen</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// event listeners to change visualize and voice settings</span>\n\nvisualSelect<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onchange</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  window<span class=\"token punctuation\">.</span><span class=\"token function\">cancelAnimationFrame</span><span class=\"token punctuation\">(</span>drawVisual<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">visualize</span><span class=\"token punctuation\">(</span>stream<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nvoiceSelect<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onchange</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">voiceChange</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nmute<span class=\"token punctuation\">.</span>onclick <span class=\"token operator\">=</span> voiceMute<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">voiceMute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// toggle to mute and unmute sound</span>\n  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>mute<span class=\"token punctuation\">.</span>id <span class=\"token operator\">==</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    gainNode<span class=\"token punctuation\">.</span>gain<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// gain set to 0 to mute sound</span>\n    mute<span class=\"token punctuation\">.</span>id <span class=\"token operator\">=</span> <span class=\"token string\">\"activated\"</span><span class=\"token punctuation\">;</span>\n    mute<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token string\">\"Unmute\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    gainNode<span class=\"token punctuation\">.</span>gain<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// gain set to 1 to unmute sound</span>\n    mute<span class=\"token punctuation\">.</span>id <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n    mute<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> <span class=\"token string\">\"Mute\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"specifications","value":{"title":"规范","id":"规范","isH3":false,"specifications":[{"bcdSpecificationURL":"https://webaudio.github.io/web-audio-api/#AudioContext","title":"Web Audio API"}],"query":"api.AudioContext"}},{"type":"browser_compatibility","value":{"title":"浏览器兼容性","id":"浏览器兼容性","isH3":false,"query":"api.AudioContext","dataURL":"/zh-CN/docs/Web/API/Web_Audio_API/bcd.json"}},{"type":"prose","value":{"id":"相关链接","title":"相关链接","isH3":false,"content":"<ul>\n  <li><a href=\"/zh-CN/docs/Web/API/Web_Audio_API/Using_Web_Audio_API\">Using the Web Audio API</a></li>\n  <li><a href=\"/zh-CN/docs/Web/API/Web_Audio_API/Visualizations_with_Web_Audio_API\">Visualizations with Web Audio API</a></li>\n  <li><a href=\"https://mdn.github.io/voice-change-o-matic/\" class=\"external\" rel=\" noopener\">Voice-change-O-matic example</a></li>\n  <li><a href=\"https://mdn.github.io/violent-theremin/\" class=\"external\" rel=\" noopener\">Violent Theremin example</a></li>\n  <li><a href=\"/en-US/docs/Web/API/Web_Audio_API/Web_audio_spatialization_basics\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">Web audio spatialisation basics (en-US)</a></li>\n  <li><a href=\"https://www.html5rocks.com/tutorials/webaudio/positional_audio/\" class=\"external\" rel=\" noopener\">Mixing Positional Audio and WebGL</a></li>\n  <li><a href=\"https://www.html5rocks.com/tutorials/webaudio/games/\" class=\"external\" rel=\" noopener\">Developing Game Audio with the Web Audio API</a></li>\n  <li><a href=\"/en-US/docs/Web/API/Web_Audio_API/Migrating_from_webkitAudioContext\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">Porting webkitAudioContext code to standards based AudioContext (en-US)</a></li>\n  <li><a href=\"https://github.com/bit101/tones\" class=\"external\" rel=\" noopener\">Tones</a>: a simple library for playing specific tones/notes using the Web Audio API.</li>\n  <li><a href=\"https://github.com/goldfire/howler.js/\" class=\"external\" rel=\" noopener\">howler.js</a>: a JS audio library that defaults to <a href=\"https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html\" class=\"external\" rel=\" noopener\">Web Audio API</a> and falls back to <a href=\"https://www.whatwg.org/specs/web-apps/current-work/#the-audio-element\" class=\"external\" rel=\" noopener\">HTML5 Audio</a>, as well as providing other useful features.</li>\n</ul>"}},{"type":"prose","value":{"id":"quicklinks","title":"Quicklinks","isH3":true,"content":"<ol>\n  <li><strong>Guides</strong>\n    <ol>\n      <li><a href=\"/zh-CN/docs/Web/API/Web_Audio_API/Basic_concepts_behind_Web_Audio_API\">Basic concepts behind Web Audio API</a></li>\n      <li><a href=\"/zh-CN/docs/Web/API/Web_Audio_API/Using_Web_Audio_API\">Using the Web Audio API</a></li>\n      <li><a href=\"/zh-CN/docs/Web/API/Web_Audio_API/Visualizations_with_Web_Audio_API\">Visualizations with Web Audio API</a></li>\n      <li><a href=\"/en-US/docs/Web/API/Web_Audio_API/Web_audio_spatialization_basics\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">Web audio spatialisation basics (en-US)</a></li>\n      <li><a href=\"/en-US/docs/Web/API/Web_Audio_API/Migrating_from_webkitAudioContext\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">Porting webkitAudioContext code to standards based AudioContext (en-US)</a></li>\n    </ol>\n  </li>\n  <li><strong>Examples</strong>\n    <ol>\n      <li><a href=\"https://mdn.github.io/voice-change-o-matic/\" class=\"external\" rel=\" noopener\">Voice-change-O-matic</a></li>\n      <li><a href=\"https://mdn.github.io/violent-theremin/\" class=\"external\" rel=\" noopener\">Violent Theremin</a></li>\n    </ol>\n  </li>\n  <li><strong>Interfaces</strong>\n    <ol>\n      <li><a href=\"/zh-CN/docs/Web/API/AnalyserNode\"><code>AnalyserNode</code></a></li>\n      <li><a href=\"/zh-CN/docs/Web/API/AudioBuffer\"><code>AudioBuffer</code></a></li>\n      <li><a href=\"/zh-CN/docs/Web/API/AudioBufferSourceNode\"><code>AudioBufferSourceNode</code></a></li>\n      <li><a href=\"/zh-CN/docs/Web/API/AudioContext\"><code>AudioContext</code></a></li>\n      <li><a href=\"/zh-CN/docs/Web/API/AudioDestinationNode\"><code>AudioDestinationNode</code></a></li>\n      <li><a href=\"/zh-CN/docs/Web/API/AudioListener\"><code>AudioListener</code></a></li>\n      <li><a href=\"/zh-CN/docs/Web/API/AudioNode\"><code>AudioNode</code></a></li>\n      <li><a href=\"/zh-CN/docs/Web/API/AudioParam\"><code>AudioParam</code></a></li>\n      <li><code><a href=\"/en-US/docs/Web/API/ScriptProcessorNode/audioprocess_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">audioprocess (en-US)</a></code> (event)</li>\n      <li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/AudioProcessingEvent\"><code>AudioProcessingEvent</code> <small>(en-US)</small></a></li>\n      <li><a href=\"/zh-CN/docs/Web/API/BiquadFilterNode\"><code>BiquadFilterNode</code></a></li>\n      <li><a href=\"/zh-CN/docs/Web/API/ChannelMergerNode\"><code>ChannelMergerNode</code></a></li>\n      <li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/ChannelSplitterNode\"><code>ChannelSplitterNode</code> <small>(en-US)</small></a></li>\n      <li><code><a href=\"/en-US/docs/Web/API/OfflineAudioContext/complete_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">complete (en-US)</a></code> (event)</li>\n      <li><a href=\"/zh-CN/docs/Web/API/ConvolverNode\"><code>ConvolverNode</code></a></li>\n      <li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/DelayNode\"><code>DelayNode</code> <small>(en-US)</small></a></li>\n      <li><a href=\"/zh-CN/docs/Web/API/DynamicsCompressorNode\"><code>DynamicsCompressorNode</code></a></li>\n      <li><code><a href=\"/en-US/docs/Web/API/HTMLMediaElement/ended_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">ended (en-US)</a></code> (event)</li>\n      <li><a href=\"/zh-CN/docs/Web/API/GainNode\"><code>GainNode</code></a></li>\n      <li><a href=\"/zh-CN/docs/Web/API/MediaElementAudioSourceNode\"><code>MediaElementAudioSourceNode</code></a></li>\n      <li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/MediaStreamAudioDestinationNode\"><code>MediaStreamAudioDestinationNode</code> <small>(en-US)</small></a></li>\n      <li><a href=\"/zh-CN/docs/Web/API/MediaStreamAudioSourceNode\"><code>MediaStreamAudioSourceNode</code></a></li>\n      <li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/OfflineAudioCompletionEvent\"><code>OfflineAudioCompletionEvent</code> <small>(en-US)</small></a></li>\n      <li><a href=\"/zh-CN/docs/Web/API/OfflineAudioContext\"><code>OfflineAudioContext</code></a></li>\n      <li><a href=\"/zh-CN/docs/Web/API/OscillatorNode\"><code>OscillatorNode</code></a></li>\n      <li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PannerNode\"><code>PannerNode</code> <small>(en-US)</small></a></li>\n      <li><a class=\"page-not-created\" title=\"此文档尚未被撰写，期待你的贡献!\"><code>PeriodicWaveNode</code></a></li>\n      <li><a href=\"/zh-CN/docs/Web/API/ScriptProcessorNode\"><code>ScriptProcessorNode</code></a></li>\n      <li><a href=\"/zh-CN/docs/Web/API/WaveShaperNode\"><code>WaveShaperNode</code></a></li>\n    </ol>\n  </li>\n</ol>"}}],"toc":[{"text":"Web audio 概念与使用","id":"web_audio_概念与使用"},{"text":"Web Audio API 接口","id":"web_audio_api_接口"},{"text":"过时的接口","id":"过时的接口"},{"text":"示例","id":"示例"},{"text":"规范","id":"规范"},{"text":"浏览器兼容性","id":"浏览器兼容性"},{"text":"相关链接","id":"相关链接"}],"summary":"Web Audio API 提供了在 Web 上控制音频的一个非常有效通用的系统，允许开发者来自选音频源，对音频添加特效，使音频可视化，添加空间效果（如平移），等等。","popularity":0.0012,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Web Audio API","locale":"en-US","native":"English (US)"},{"title":"Web Audio API","locale":"es","native":"Español"},{"title":"Web Audio API","locale":"fr","native":"Français"},{"title":"Web Audio API","locale":"ja","native":"日本語"},{"title":"Web Audio API","locale":"ko","native":"한국어"},{"title":"API Web Áudio","locale":"pt-BR","native":"Português (do Brasil)"},{"title":"Web Audio API","locale":"ru","native":"Русский"},{"title":"Web Audio API","locale":"zh-TW","native":"正體中文 (繁體)"}],"source":{"folder":"zh-cn/web/api/web_audio_api","github_url":"https://github.com/mdn/translated-content/blob/main/files/zh-cn/web/api/web_audio_api/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/zh-CN/docs/Web","title":"Web 开发技术"},{"uri":"/zh-CN/docs/Web/API","title":"Web API 接口参考"},{"uri":"/zh-CN/docs/Web/API/Web_Audio_API","title":"Web Audio API"}],"pageTitle":"Web Audio API - Web API 接口参考 | MDN","noIndexing":false}}</script></body></html>