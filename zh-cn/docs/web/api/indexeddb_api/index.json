{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"IndexedDB","mdn_url":"/zh-CN/docs/Web/API/IndexedDB_API","locale":"zh-CN","native":"中文 (简体)","sidebarHTML":"<ol><li><strong><a href=\"/zh-CN/docs/Web/API/IndexedDB_API\">IndexedDB API</a></strong></li><li class=\"toggle\"><details open=\"\"><summary>指南</summary><ol><li><a href=\"/zh-CN/docs/Web/API/IndexedDB_API/Using_IndexedDB\">Using IndexedDB</a></li><li><a href=\"/zh-CN/docs/Web/API/IndexedDB_API/Basic_Terminology\">IndexedDB key characteristics and basic terminology</a></li><li><a href=\"/zh-CN/docs/Web/API/IndexedDB_API/Browser_storage_limits_and_eviction_criteria\">Browser storage limits and eviction criteria</a></li><li><a href=\"/zh-CN/docs/Web/API/IndexedDB_API/Checking_when_a_deadline_is_due\">Checking when a deadline is due</a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>接口</summary><ol><li><a href=\"/zh-CN/docs/Web/API/IDBCursor\"><code>IDBCursor</code></a></li><li><a href=\"/zh-CN/docs/Web/API/IDBCursorWithValue\"><code>IDBCursorWithValue</code></a></li><li><a href=\"/zh-CN/docs/Web/API/IDBDatabase\"><code>IDBDatabase</code></a></li><li><a href=\"/zh-CN/docs/Web/API/IDBFactory\"><code>IDBFactory</code></a></li><li><a href=\"/zh-CN/docs/Web/API/IDBIndex\"><code>IDBIndex</code></a></li><li><a href=\"/zh-CN/docs/Web/API/IDBKeyRange\"><code>IDBKeyRange</code></a></li><li><a href=\"/zh-CN/docs/Web/API/IDBObjectStore\"><code>IDBObjectStore</code></a></li><li><a href=\"/zh-CN/docs/Web/API/IDBOpenDBRequest\"><code>IDBOpenDBRequest</code></a></li><li><a href=\"/zh-CN/docs/Web/API/IDBRequest\"><code>IDBRequest</code></a></li><li><a href=\"/zh-CN/docs/Web/API/IDBTransaction\"><code>IDBTransaction</code></a></li><li><a href=\"/zh-CN/docs/Web/API/IDBVersionChangeEvent\"><code>IDBVersionChangeEvent</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>IndexedDB 是一种底层 API，用于在客户端存储大量的结构化数据（也包括文件/二进制大型对象（blobs））。该 API 使用索引实现对数据的高性能搜索。虽然 <a href=\"/zh-CN/docs/Web/API/Web_Storage_API\">Web Storage</a> 在存储较少量的数据很有用，但对于存储更大量的结构化数据来说力不从心。而 IndexedDB 提供了这种场景的解决方案。本页面 MDN IndexedDB 的主要引导页 - 这里，我们提供了完整的 API 参考和使用指南，浏览器支持细节，以及关键概念的一些解释的链接。</p><div class=\"notecard note\" id=\"sect1\">\n  <p><strong>Note:</strong> 此特性在 <a href=\"/zh-CN/docs/Web/API/Web_Workers_API\">Web Worker</a> 中可用</p>\n</div>\n<div class=\"notecard note\" id=\"sect2\">\n  <p><strong>备注：</strong> IndexedDB API 是强大的，但对于简单的情况可能看起来太复杂。如果你更喜欢一个简单的 API，请尝试 <a href=\"https://localforage.github.io/localForage/\" class=\"external\" rel=\" noopener\">localForage</a>、<a href=\"https://www.dexie.org/\" class=\"external\" rel=\" noopener\">dexie.js</a>、<a href=\"https://pouchdb.com/\" class=\"external\" rel=\" noopener\">PouchDB</a>、<a href=\"https://www.npmjs.com/package/idb\" class=\"external\" rel=\" noopener\">idb</a>、<a href=\"https://www.npmjs.com/package/idb-keyval\" class=\"external\" rel=\" noopener\">idb-keyval</a>、<a href=\"https://jsstore.net/\" class=\"external\" rel=\" noopener\">JsStore</a> 或者 <a href=\"https://github.com/google/lovefield\" class=\"external\" rel=\" noopener\">lovefield</a> 之类的库，这些库使 IndexedDB 对开发者来说更加友好。</p>\n</div>"}},{"type":"prose","value":{"id":"关键概念和用法","title":"关键概念和用法","isH3":false,"content":"<p>IndexedDB 是一个事务型数据库系统，类似于基于 SQL 的 RDBMS。 然而，不像 RDBMS 使用固定列表，IndexedDB 是一个基于 JavaScript 的面向对象数据库。IndexedDB 允许您存储和检索用<strong>键</strong>索引的对象；可以存储<a href=\"/zh-CN/docs/Web/API/Web_Workers_API/Structured_clone_algorithm\">结构化克隆算法</a>支持的任何对象。您只需要指定数据库模式，打开与数据库的连接，然后检索和更新一系列<strong>事务</strong>。</p>\n<ul>\n  <li>阅读更多关于 <a href=\"/en-US/docs/Web/API/IndexedDB_API/Basic_Terminology\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">IndexedDB 背后的概念 (en-US)</a>。</li>\n  <li>从<a href=\"/zh-CN/docs/Web/API/IndexedDB_API/Using_IndexedDB\">使用 IndexedDB</a> 指南的第一准则中学习异步使用 IndexedDB。</li>\n  <li>同时使用 IndexedDB 储存离线数据和 Service Workers 储存离线资源，其简述请查看 <a href=\"/zh-CN/docs/Web/Progressive_web_apps/Offline_Service_workers\">Service Workers 制作离线 PWA</a>。</li>\n</ul>\n<div class=\"notecard note\" id=\"sect3\">\n  <p><strong>备注：</strong> 正如大多数的 web 储存解决方案一样，IndexedDB 也遵守<a href=\"/zh-CN/docs/Web/Security/Same-origin_policy\">同源策略</a>。因此当你在某个域名下操作储存数据的时候，你不能操作其他域名下的数据。</p>\n</div>"}},{"type":"prose","value":{"id":"同步和异步（synchronous、asynchronous）","title":"同步和异步（Synchronous、asynchronous）","isH3":true,"content":"<p>使用 IndexedDB 执行的操作是异步执行的，以免阻塞应用程序。IndexedDB 最初包括同步和异步 API。同步 API 仅用于 <a href=\"/zh-CN/docs/Web/API/Web_Workers_API/Using_web_workers\">Web Workers</a>，且已从规范中移除，因为尚不清晰是否需要。但如果 Web 开发人员有足够的需求，可以重新引入同步 API。</p>"}},{"type":"prose","value":{"id":"储存限制和回收标准","title":"储存限制和回收标准","isH3":true,"content":"<p>有许多 Web 技术在客户端（即本地磁盘）存储各种数据。IndexedDB 是最常见的一个。浏览器计算分配给 Web 数据存储的空间以及达到该限制时要删除的内容的过程并不简单，并且在浏览器之间有所不同。<a href=\"/zh-CN/docs/Web/API/IndexedDB_API/Browser_storage_limits_and_eviction_criteria\">浏览器存储限制和回收标准</a>尝试解释这是如何工作的，至少在火狐的情况下是如此。</p>"}},{"type":"prose","value":{"id":"接口","title":"接口","isH3":false,"content":"<p>为了获取数据库的访问权限，需要在 <a href=\"/zh-CN/docs/Web/DOM/Window\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">window</a> 对象的 <a href=\"/en-US/docs/Web/API/indexedDB\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">indexedDB (en-US)</a> 属性上调用 <a href=\"/zh-CN/docs/Web/API/IDBFactory/open\">open()</a> 方法。该方法返回一个 <a href=\"/zh-CN/docs/Web/API/IDBRequest\"><code>IDBRequest</code></a> 对象；异步操作通过在 <a href=\"/zh-CN/docs/Web/API/IDBRequest\"><code>IDBRequest</code></a> 对象上触发事件来和调用程序进行通信。</p>"}},{"type":"prose","value":{"id":"连接数据库","title":"连接数据库","isH3":true,"content":"<dl>\n  <dt id=\"idbenvironment\"><a class=\"page-not-created\" title=\"此文档尚未被撰写，期待你的贡献!\"><code>IDBEnvironment</code></a></dt>\n  <dd>\n    <p>提供 IndexedDB 功能。它由 <a href=\"/zh-CN/docs/Web/API/Window\"><code>window</code></a> 和 <a href=\"/zh-CN/docs/Web/API/Worker\"><code>worker</code></a> 实现，这个接口不再是 2.0 规范的一部分。</p>\n  </dd>\n  <dt id=\"idbfactory\"><a href=\"/zh-CN/docs/Web/API/IDBFactory\"><code>IDBFactory</code></a></dt>\n  <dd>\n    <p>提供数据库访问。这是全局对象 <a href=\"/zh-CN/docs/Web/API/indexedDB\"><code>indexedDB</code></a> 实现的接口，因此是 API 的入口。</p>\n  </dd>\n  <dt id=\"idbopendbrequest\"><a href=\"/zh-CN/docs/Web/API/IDBOpenDBRequest\"><code>IDBOpenDBRequest</code></a></dt>\n  <dd>\n    <p>表示一个打开数据库的请求。</p>\n  </dd>\n  <dt id=\"idbdatabase\"><a href=\"/zh-CN/docs/Web/API/IDBDatabase\"><code>IDBDatabase</code></a></dt>\n  <dd>\n    <p>表示一个数据库连接。这是在数据库中获取事务的唯一方式。</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"接收和修改数据","title":"接收和修改数据","isH3":true,"content":"<dl>\n  <dt id=\"idbtransaction\"><a href=\"/zh-CN/docs/Web/API/IDBTransaction\"><code>IDBTransaction</code></a></dt>\n  <dd>\n    <p>表示一个事务。在数据库上创建一个事务，指定作用域（例如要访问的存储对象），并确定所需的访问类型（只读或读写）。</p>\n  </dd>\n  <dt id=\"idbrequest\"><a href=\"/zh-CN/docs/Web/API/IDBRequest\"><code>IDBRequest</code></a></dt>\n  <dd>\n    <p>处理数据库请求并提供对结果访问的通用接口。</p>\n  </dd>\n  <dt id=\"idbobjectstore\"><a href=\"/zh-CN/docs/Web/API/IDBObjectStore\"><code>IDBObjectStore</code></a></dt>\n  <dd>\n    <p>表示允许访问通过主键查找的 IndexedDB 数据库中的一组数据的对象存储区。</p>\n  </dd>\n  <dt id=\"idbindex\"><a href=\"/zh-CN/docs/Web/API/IDBIndex\"><code>IDBIndex</code></a></dt>\n  <dd>\n    <p>也是为了允许访问 IndexedDB 数据库中的数据子集，但使用索引来检索记录而不是主键。这有时比使用 <a href=\"/zh-CN/docs/Web/API/IDBObjectStore\">IDBObjectStore</a> 更快。</p>\n  </dd>\n  <dt id=\"idbcursor\"><a href=\"/zh-CN/docs/Web/API/IDBCursor\"><code>IDBCursor</code></a></dt>\n  <dd>\n    <p>迭代对象存储和索引。</p>\n  </dd>\n  <dt id=\"idbcursorwithvalue_en-us\"><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBCursorWithValue\"><code>IDBCursorWithValue</code> <small>(en-US)</small></a></dt>\n  <dd>\n    <p>迭代对象存储和索引并返回游标的当前值。</p>\n  </dd>\n  <dt id=\"idbkeyrange\"><a href=\"/zh-CN/docs/Web/API/IDBKeyRange\"><code>IDBKeyRange</code></a></dt>\n  <dd>\n    <p>定义可用于从特定范围内的数据库检索数据的键范围。</p>\n  </dd>\n  <dt id=\"idblocaleawarekeyrange_en-us\"><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBLocaleAwareKeyRange\"><code>IDBLocaleAwareKeyRange</code> <small>(en-US)</small></a> <svg class=\"icon icon-nonstandard\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-nonstandard\"></use>\n</svg></dt>\n  <dd>\n    <p>定义一个键范围，可用于从特定范围内的数据库中检索数据，并根据为特定索引指定的语言环境的规则进行排序（详见 <a href=\"/en-US/docs/Web/API/IDBObjectStore/createIndex\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">createIndex() (en-US)</a> 的参数）。这个接口不再是 2.0 规范的一部分。</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"自定义事件接口","title":"自定义事件接口","isH3":true,"content":"<p>此规范使用以下自定义接口触发事件：</p>\n<dl>\n  <dt id=\"idbversionchangeevent_en-us\"><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBVersionChangeEvent\"><code>IDBVersionChangeEvent</code> <small>(en-US)</small></a></dt>\n  <dd>\n    <p>作为 <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/IDBOpenDBRequest/upgradeneeded_event\"><code>IDBOpenDBRequest.onupgradeneeded</code> <small>(en-US)</small></a> 事件的处理程序的结果，<code>IDBVersionChangeEvent</code> 接口表示数据库的版本已经发生了改变。</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"过时的接口","title":"过时的接口","isH3":true,"content":"<p>规范的早期版本还定义了这些现在已删除的接口。这些文档便于您需要更新以前编写的代码：</p>\n<dl>\n  <dt id=\"idbversionchangerequest\"><a class=\"page-not-created\" title=\"此文档尚未被撰写，期待你的贡献!\"><code>IDBVersionChangeRequest</code></a> <svg class=\"icon icon-deprecated\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-deprecated\"></use>\n</svg></dt>\n  <dd>\n    <p>表示更改数据库版本的请求。改变数据库版本的方法已经改变了（通过调用<a href=\"/zh-CN/docs/Web/API/IDBFactory/open\"><code>IDBFactory.open</code></a> 而非<a class=\"page-not-created\" title=\"此文档尚未被撰写，期待你的贡献!\"><code>IDBDatabase.setVersion</code></a>），接口<a href=\"/zh-CN/docs/Web/API/IDBOpenDBRequest\"><code>IDBOpenDBRequest</code></a> 现在拥有<a class=\"page-not-created\" title=\"此文档尚未被撰写，期待你的贡献!\"><code>IDBVersionChangeRequest</code></a>。</p>\n  </dd>\n  <dt id=\"idbdatabaseexception\"><a class=\"page-not-created\" title=\"此文档尚未被撰写，期待你的贡献!\"><code>IDBDatabaseException</code></a> <svg class=\"icon icon-deprecated\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-deprecated\"></use>\n</svg></dt>\n  <dd>\n    <p>表示执行数据库操作时可能遇到的异常情况。</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"示例","title":"示例","isH3":false,"content":"<ul>\n  <li><a href=\"https://marco-c.github.io/eLibri/\" class=\"external\" rel=\" noopener\">eLibri:</a> 由 IndexedDB Mozilla DevDerby 的获奖者 Marco Castelluccio 编写的一个功能强大的图书馆和电子书阅读器应用。</li>\n  <li><a href=\"https://github.com/chrisdavidmills/to-do-notifications/tree/gh-pages\" class=\"external\" rel=\" noopener\">To-do Notifications</a> (<a href=\"https://mdn.github.io/to-do-notifications/\" class=\"external\" rel=\" noopener\">view example live</a>): 参考文档中示例的应用程序。</li>\n  <li><a href=\"https://hacks.mozilla.org/2012/02/storing-images-and-files-in-indexeddb/\" class=\"external\" rel=\" noopener\">Storing images and files in IndexedDB</a></li>\n</ul>"}},{"type":"specifications","value":{"title":"规范","id":"规范","isH3":false,"specifications":[{"bcdSpecificationURL":"https://w3c.github.io/IndexedDB/","title":"Indexed Database API 3.0"}],"query":"undefined"}},{"type":"prose","value":{"id":"参见","title":"参见","isH3":false,"content":"<ul>\n  <li><a href=\"https://localforage.github.io/localForage/\" class=\"external\" rel=\" noopener\">localForage</a>：一个简单的 Polyfill，提供了简单的客户端数据存储的值语法。它在后台使用 IndexedDB，并在不支持 IndexedDB 的浏览器中回退到 WebSQL 或 localStorage。</li>\n  <li><a href=\"https://www.dexie.org/\" class=\"external\" rel=\" noopener\">Dexie.js</a>：IndexedDB 的包装，通过简单的语法，可以更快地进行代码开发。</li>\n  <li><a href=\"https://github.com/erikolson186/zangodb\" class=\"external\" rel=\" noopener\">ZangoDB</a>：类似 MongoDB 的 IndexedDB 接口，支持 MongoDB 的大多数熟悉的过滤、投影、排序、更新和聚合功能。</li>\n  <li><a href=\"https://jsstore.net/\" class=\"external\" rel=\" noopener\">JsStore</a>：一个带有 SQL 语法的 IndexedDB 包装器。</li>\n  <li><a href=\"https://github.com/mWater/minimongo\" class=\"external\" rel=\" noopener\">MiniMongo</a>：由 localstorage 支持的客户端内存中的 mongodb，通过 http 进行服务器同步。MeteorJS 使用 MiniMongo。</li>\n  <li><a href=\"https://pouchdb.com/\" class=\"external\" rel=\" noopener\">PouchDB</a>：使用 IndexedDB 在浏览器中实现 CouchDB 的客户端。</li>\n  <li><a href=\"https://www.npmjs.com/package/idb\" class=\"external\" rel=\" noopener\">idb</a>：一个微小的（〜1.15k）库，大多 API 与 IndexedDB 类似，但做了一些小的改进，让数据库的可用性得到了大大的提升。</li>\n  <li><a href=\"https://www.npmjs.com/package/idb-keyval\" class=\"external\" rel=\" noopener\">idb-keyval</a>：使用 IndexedDB 实现的超级简单且小巧的（~600B）基于 Promise 的键值对存储。</li>\n  <li><a href=\"https://www.npmjs.com/package/@sifrr/storage\" class=\"external\" rel=\" noopener\">sifrr-storage</a>：一个非常小的（~2kB）基于 Promise 的客户端键值数据库。基于 IndexedDB、localStorage、WebSQL 和 Cookies 实现。它可以自动选择上述支持的数据库，并按照优先顺序使用。</li>\n  <li><a href=\"https://github.com/google/lovefield\" class=\"external\" rel=\" noopener\">lovefield</a>：Lovefield 是一个用于 Web App 的关系型数据库，使用 JavaScript 编写，可以在不同的浏览器环境中运行，提供了类似 SQL 的 API，速度快、安全且易用。</li>\n</ul>"}}],"toc":[{"text":"关键概念和用法","id":"关键概念和用法"},{"text":"接口","id":"接口"},{"text":"示例","id":"示例"},{"text":"规范","id":"规范"},{"text":"参见","id":"参见"}],"summary":"IndexedDB 是一种底层 API，用于在客户端存储大量的结构化数据（也包括文件/二进制大型对象（blobs））。该 API 使用索引实现对数据的高性能搜索。虽然 Web Storage 在存储较少量的数据很有用，但对于存储更大量的结构化数据来说力不从心。而 IndexedDB 提供了这种场景的解决方案。本页面 MDN IndexedDB 的主要引导页 - 这里，我们提供了完整的 API 参考和使用指南，浏览器支持细节，以及关键概念的一些解释的链接。","popularity":0.0023,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"IndexedDB API","locale":"en-US","native":"English (US)"},{"title":"IndexedDB","locale":"es","native":"Español"},{"title":"IndexedDB","locale":"fr","native":"Français"},{"title":"IndexedDB API","locale":"ja","native":"日本語"},{"title":"IndexedDB API","locale":"ko","native":"한국어"},{"title":"IndexedDB","locale":"pt-BR","native":"Português (do Brasil)"},{"title":"IndexedDB","locale":"ru","native":"Русский"},{"title":"IndexedDB","locale":"zh-TW","native":"正體中文 (繁體)"}],"source":{"folder":"zh-cn/web/api/indexeddb_api","github_url":"https://github.com/mdn/translated-content/blob/main/files/zh-cn/web/api/indexeddb_api/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/zh-CN/docs/Web","title":"Web 开发技术"},{"uri":"/zh-CN/docs/Web/API","title":"Web API 接口参考"},{"uri":"/zh-CN/docs/Web/API/IndexedDB_API","title":"IndexedDB"}],"pageTitle":"IndexedDB - Web API 接口参考 | MDN","noIndexing":false}}