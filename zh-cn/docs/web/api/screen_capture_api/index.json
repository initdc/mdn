{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"屏幕捕捉 API","mdn_url":"/zh-CN/docs/Web/API/Screen_Capture_API","locale":"zh-CN","native":"中文 (简体)","sidebarHTML":"<ol><li><strong><a href=\"/zh-CN/docs/Web/API/Screen_Capture_API\">Screen Capture API</a></strong></li><li class=\"toggle\"><details open=\"\"><summary>指南</summary><ol><li><a href=\"/zh-CN/docs/Web/API/Screen_Capture_API/Using_Screen_Capture\">Using the Screen Capture API</a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>属性</summary><ol><li><a href=\"/zh-CN/docs/Web/API/MediaTrackConstraints/cursor\"><code>MediaTrackConstraints.cursor</code></a></li><li><a href=\"/zh-CN/docs/Web/API/MediaTrackConstraints/displaySurface\"><code>MediaTrackConstraints.displaySurface</code></a></li><li><a href=\"/zh-CN/docs/Web/API/MediaTrackConstraints/logicalSurface\"><code>MediaTrackConstraints.logicalSurface</code></a></li><li><a href=\"/zh-CN/docs/Web/API/MediaTrackSettings/cursor\"><code>MediaTrackSettings.cursor</code></a></li><li><a href=\"/zh-CN/docs/Web/API/MediaTrackSettings/displaySurface\"><code>MediaTrackSettings.displaySurface</code></a></li><li><a href=\"/zh-CN/docs/Web/API/MediaTrackSettings/logicalSurface\"><code>MediaTrackSettings.logicalSurface</code></a></li><li><a href=\"/zh-CN/docs/Web/API/MediaTrackSupportedConstraints/cursor\"><code>MediaTrackSupportedConstraints.cursor</code></a></li><li><a href=\"/zh-CN/docs/Web/API/MediaTrackSupportedConstraints/displaySurface\"><code>MediaTrackSupportedConstraints.displaySurface</code></a></li><li><a href=\"/zh-CN/docs/Web/API/MediaTrackSupportedConstraints/logicalSurface\"><code>MediaTrackSupportedConstraints.logicalSurface</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>方法</summary><ol><li><a href=\"/zh-CN/docs/Web/API/MediaDevices/getDisplayMedia\"><code>MediaDevices.getDisplayMedia()</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>屏幕捕获 API 对现有的媒体捕获和流 API 进行了补充，让用户选择一个屏幕或屏幕的一部分（如一个窗口）作为媒体流进行捕获。然后，该流可以被记录或通过网络与他人共享。</p>"}},{"type":"prose","value":{"id":"屏幕捕捉_api_的概念和用法","title":"屏幕捕捉 API 的概念和用法","isH3":false,"content":"<p>屏幕捕捉 API 使用起来相对简单。其唯一的方法是<a href=\"/zh-CN/docs/Web/API/MediaDevices/getDisplayMedia\"><code>MediaDevices.getDisplayMedia()</code></a>，它的任务是以捕获的形式要求用户选择一个屏幕或屏幕的一部分的<a href=\"/zh-CN/docs/Web/API/MediaStream\"><code>MediaStream</code></a>。</p>\n<p>要开始从屏幕上捕捉视频，你需要在 <code>getDisplayMedia()</code> 的实例上调用 <code>Media</code> <code>navigator.mediaDevices</code>：</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>captureStream <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> navigator<span class=\"token punctuation\">.</span>mediaDevices<span class=\"token punctuation\">.</span><span class=\"token function\">getDisplayMedia</span><span class=\"token punctuation\">(</span>displayMediaOptions<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>The <a href=\"/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise\"><code>Promise</code></a> returned by <code>getDisplayMedia()</code> resolves to a <a href=\"/zh-CN/docs/Web/API/MediaStream\"><code>MediaStream</code></a> which streams the captured media.</p>\n<p>See the article <a href=\"/zh-CN/docs/Web/API/Screen_Capture_API/Using_Screen_Capture\">Using the Screen Capture API</a> for a more in-depth look at how to use the API to capture screen contents as a stream.</p>"}},{"type":"prose","value":{"id":"增加现有接口","title":"增加现有接口","isH3":false,"content":"<p>屏幕捕捉 API 没有自己的任何接口，而是在现有的 <a href=\"/zh-CN/docs/Web/API/MediaDevices\"><code>MediaDevices</code></a> 接口上添加了一个方法。</p>"}},{"type":"prose","value":{"id":"mediadevices_接口","title":"MediaDevices 接口","isH3":true,"content":"<dl>\n  <dt id=\"mediadevices.getdisplaymedia\"><a href=\"/zh-CN/docs/Web/API/MediaDevices/getDisplayMedia\"><code>MediaDevices.getDisplayMedia()</code></a></dt>\n  <dd>\n    <p>The <code>getDisplayMedia()</code> method is added to the <code>MediaDevices</code> interface. Similar to <a href=\"/zh-CN/docs/Web/API/MediaDevices/getUserMedia\" title=\"getUserMedia()\"><code>getUserMedia()</code></a>, this method creates a promise that resolves with a <a href=\"/zh-CN/docs/Web/API/MediaStream\"><code>MediaStream</code></a> containing the display area selected by the user, in a format that matches the specified options.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"additions_to_existing_dictionaries","title":"Additions to existing dictionaries","isH3":false,"content":"<p>The Screen Capture API adds properties to the following dictionaries defined by other specifications.</p>"}},{"type":"prose","value":{"id":"mediatrackconstraints","title":"MediaTrackConstraints","isH3":true,"content":"<dl>\n  <dt id=\"mediatrackconstraints.cursor_en-us\"><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/MediaTrackConstraints\"><code>MediaTrackConstraints.cursor</code> <small>(en-US)</small></a></dt>\n  <dd>\n    <p>A <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/MediaTrackConstraints\"><code>ConstrainDOMString</code> <small>(en-US)</small></a> indicating whether or not the cursor should be included in the captured display surface's stream, and if it should always be visible or if it should only be visible while the mouse is in motion.</p>\n  </dd>\n  <dt id=\"mediatrackconstraints.displaysurface_en-us\"><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/MediaTrackConstraints/displaySurface\"><code>MediaTrackConstraints.displaySurface</code> <small>(en-US)</small></a></dt>\n  <dd>\n    <p>A <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/MediaTrackConstraints\"><code>ConstrainDOMString</code> <small>(en-US)</small></a> indicating what type of display surface is to be captured. The value is one of <code>application</code>, <code>browser</code>, <code>monitor</code>, or <code>window</code>.</p>\n  </dd>\n  <dt id=\"mediatrackconstraints.logicalsurface_en-us\"><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/MediaTrackConstraints/logicalSurface\"><code>MediaTrackConstraints.logicalSurface</code> <small>(en-US)</small></a></dt>\n  <dd>\n    <p>Indicates whether or not the video in the stream represents a logical display surface (that is, one which may not be entirely visible onscreen, or may be completely offscreen). A value of <code>true</code> indicates a logical display surface is to be captured.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"mediatracksettings","title":"MediaTrackSettings","isH3":true,"content":"<dl>\n  <dt id=\"mediatracksettings.cursor_en-us\"><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/MediaTrackSettings/cursor\"><code>MediaTrackSettings.cursor</code> <small>(en-US)</small></a></dt>\n  <dd>\n    <p>A string which indicates whether or not the display surface currently being captured includes the mouse cursor, and if so, whether it's only visible while the mouse is in motion or if it's always visible. The value is one of <code>always</code>, <code>motion</code>, or <code>never</code>.</p>\n  </dd>\n  <dt id=\"mediatracksettings.displaysurface_en-us\"><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/MediaTrackSettings/displaySurface\"><code>MediaTrackSettings.displaySurface</code> <small>(en-US)</small></a></dt>\n  <dd>\n    <p>A string indicating what type of display surface is currently being captured. The value is one of <code>application</code>, <code>browser</code>, <code>monitor</code>, or <code>window</code>.</p>\n  </dd>\n  <dt id=\"mediatracksettings.logicalsurface_en-us\"><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/MediaTrackSettings/logicalSurface\"><code>MediaTrackSettings.logicalSurface</code> <small>(en-US)</small></a></dt>\n  <dd>\n    <p>A Boolean value which is <code>true</code> if the video being captured doesn't directly correspond to a single onscreen display area.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"mediatracksupportedconstraints","title":"MediaTrackSupportedConstraints","isH3":true,"content":"<dl>\n  <dt id=\"mediatracksupportedconstraints.cursor_en-us\"><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/MediaTrackSupportedConstraints\"><code>MediaTrackSupportedConstraints.cursor</code> <small>(en-US)</small></a></dt>\n  <dd>\n    <p>A Boolean which is <code>true</code> if the user agent and device support the <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/MediaTrackConstraints\"><code>MediaTrackConstraints.cursor</code> <small>(en-US)</small></a> constraint.</p>\n  </dd>\n  <dt id=\"mediatracksupportedconstraints.displaysurface_en-us\"><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/MediaTrackSupportedConstraints/displaySurface\"><code>MediaTrackSupportedConstraints.displaySurface</code> <small>(en-US)</small></a></dt>\n  <dd>\n    <p>A Boolean which is <code>true</code> if the current environment supports the <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/MediaTrackConstraints/displaySurface\"><code>MediaTrackConstraints.displaySurface</code> <small>(en-US)</small></a> constraint.</p>\n  </dd>\n  <dt id=\"mediatracksupportedconstraints.logicalsurface_en-us\"><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/MediaTrackSupportedConstraints/logicalSurface\"><code>MediaTrackSupportedConstraints.logicalSurface</code> <small>(en-US)</small></a></dt>\n  <dd>\n    <p>A Boolean which is <code>true</code> if the current environment supports the constraint <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/MediaTrackConstraints/logicalSurface\"><code>MediaTrackConstraints.logicalSurface</code> <small>(en-US)</small></a>.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"dictionaries","title":"Dictionaries","isH3":false,"content":"<p>The following dictionaries are defined by the Screen Capture API.</p>\n<dl>\n  <dt id=\"cursorcaptureconstraint\"><code>CursorCaptureConstraint</code></dt>\n  <dd>\n    <p>An enumerated string type used to provide the value for the <code>cursor</code> property for the settings and constraints. The possible values are <code>always</code>, <code>motion</code>, and <code>never</code>.</p>\n  </dd>\n  <dt id=\"displaycapturesurfacetype\"><code>DisplayCaptureSurfaceType</code></dt>\n  <dd>\n    <p>An enumerated string type which is used to identify the kind of display surface to capture. This type is used for the <code>displaySurface</code> property in the constraints and settings objects, and has the possible values <code>application</code>, <code>browser</code>, <code>monitor</code>, and <code>window</code>.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"feature_policy_validation","title":"Feature Policy validation","isH3":false,"content":"<p><a href=\"/zh-CN/docs/Glossary/User_agent\">User agents</a> that support Feature Policy (either using HTTP's <a href=\"/zh-CN/docs/Web/HTTP/Headers/Feature-Policy\"><code>Feature-Policy</code></a> header or the <a href=\"/zh-CN/docs/Web/HTML/Element/iframe\"><code>&lt;iframe&gt;</code></a> attribute <a href=\"/zh-CN/docs/Web/HTML/Element/iframe#attr-allow\"><code>allow</code></a>) can specify a desire to use the Screen Capture API using the policy control directive <code>display-capture</code>:</p>\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>iframe</span> <span class=\"token attr-name\">allow</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>display-capture<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/some-other-document.html<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<p>The default allow list is <code>self</code>, which lets the any content within the document use Screen Capture.</p>\n<p>See <a href=\"/zh-CN/docs/Web/HTTP/Feature_Policy/Using_Feature_Policy\">Using Feature Policy</a> for a more in-depth explanation of how Feature Policy is used.</p>"}},{"type":"specifications","value":{"title":"规范","id":"规范","isH3":false,"specifications":[{"bcdSpecificationURL":"https://w3c.github.io/mediacapture-screen-share/#dom-mediadevices-getdisplaymedia","title":"Screen Capture"}],"query":"api.MediaDevices.getDisplayMedia"}},{"type":"browser_compatibility","value":{"title":"浏览器兼容性","id":"浏览器兼容性","isH3":false,"query":"api.MediaDevices.getDisplayMedia","dataURL":"/zh-CN/docs/Web/API/Screen_Capture_API/bcd.json"}},{"type":"prose","value":{"id":"参见","title":"参见","isH3":false,"content":"<ul>\n  <li><a href=\"/zh-CN/docs/Web/API/Screen_Capture_API/Using_Screen_Capture\">Using the Screen Capture API</a></li>\n  <li><a href=\"/zh-CN/docs/Web/API/MediaDevices/getDisplayMedia\"><code>MediaDevices.getDisplayMedia()</code></a></li>\n</ul>"}}],"toc":[{"text":"屏幕捕捉 API 的概念和用法","id":"屏幕捕捉_api_的概念和用法"},{"text":"增加现有接口","id":"增加现有接口"},{"text":"Additions to existing dictionaries","id":"additions_to_existing_dictionaries"},{"text":"Dictionaries","id":"dictionaries"},{"text":"Feature Policy validation","id":"feature_policy_validation"},{"text":"规范","id":"规范"},{"text":"浏览器兼容性","id":"浏览器兼容性"},{"text":"参见","id":"参见"}],"summary":"屏幕捕获 API 对现有的媒体捕获和流 API 进行了补充，让用户选择一个屏幕或屏幕的一部分（如一个窗口）作为媒体流进行捕获。然后，该流可以被记录或通过网络与他人共享。","popularity":0.0003,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Screen Capture API","locale":"en-US","native":"English (US)"},{"title":"Screen Capture API","locale":"fr","native":"Français"},{"title":"画面キャプチャ API","locale":"ja","native":"日本語"},{"title":"Screen Capture API","locale":"ru","native":"Русский"}],"source":{"folder":"zh-cn/web/api/screen_capture_api","github_url":"https://github.com/mdn/translated-content/blob/main/files/zh-cn/web/api/screen_capture_api/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/zh-CN/docs/Web","title":"Web 开发技术"},{"uri":"/zh-CN/docs/Web/API","title":"Web API 接口参考"},{"uri":"/zh-CN/docs/Web/API/Screen_Capture_API","title":"屏幕捕捉 API"}],"pageTitle":"屏幕捕捉 API - Web API 接口参考 | MDN","noIndexing":false}}