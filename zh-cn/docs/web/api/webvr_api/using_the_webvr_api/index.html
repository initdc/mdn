<!DOCTYPE html><html lang="en-US" prefix="og: https://ogp.me/ns#"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="/favicon-48x48.97046865.png"><link rel="apple-touch-icon" href="/apple-touch-icon.0ea0fa02.png"><meta name="theme-color" content="#ffffff"><link rel="manifest" href="/manifest.56b1cedc.json"><link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="MDN Web Docs"><script>Array.prototype.flat&&Array.prototype.includes||document.write('<script src="https://polyfill.io/v3/polyfill.min.js?features=Array.prototype.flat%2Ces6"><\/script>')</script><title>Using the WebVR API - Web API 接口参考 | MDN</title><link rel="preload" as="font" type="font/woff2" crossorigin="" href="/static/media/ZillaSlab-Bold.subset.0beac26b.woff2"><link rel="alternate" title="Using the WebVR API" href="https://developer.mozilla.org/zh-CN/docs/Web/API/WebVR_API/Using_the_WebVR_API" hreflang="zh"><link rel="alternate" title="Использование WebVR API" href="https://developer.mozilla.org/ru/docs/Web/API/WebVR_API/Using_the_WebVR_API" hreflang="ru"><link rel="alternate" title="Using the WebVR API" href="https://developer.mozilla.org/pt-BR/docs/Web/API/WebVR_API/Using_the_WebVR_API" hreflang="pt"><link rel="alternate" title="WebVR APIの使い方" href="https://developer.mozilla.org/ja/docs/Web/API/WebVR_API/Using_the_WebVR_API" hreflang="ja"><link rel="alternate" title="Uso de la API de WebVR" href="https://developer.mozilla.org/es/docs/Web/API/WebVR_API/Using_the_WebVR_API" hreflang="es"><link rel="alternate" title="Using the WebVR API" href="https://developer.mozilla.org/en-US/docs/Web/API/WebVR_API/Using_the_WebVR_API" hreflang="en"><meta name="description" content="The WebVR API is a fantastic addition to the web developer's toolkit, allowing access to virtual reality hardware such as the Oculus Rift, and converting outputted movement and orientation data into view rendering updates on a web app. But how do you get started in developing VR apps for the Web? This article will guide you through the basics.
  WebVR API 对于 web 开发者来说，是一个令人心动的功能包，允许你连接到类似于Oculus Rift 这样的虚拟现实硬件，并且能够在你的 web app 中，将从硬件获取到的位置移动数据和姿态角数据，实时更新你的渲染显示输出。具体要如何在 Web 上开始开发你的 VR app 呢？这篇文章将会提供基础的引导信息。"><meta property="og:url" content="https://developer.mozilla.org/zh-CN/docs/Web/API/WebVR_API/Using_the_WebVR_API"><meta property="og:title" content="Using the WebVR API - Web API 接口参考 | MDN"><meta property="og:description" content="The WebVR API is a fantastic addition to the web developer's toolkit, allowing access to virtual reality hardware such as the Oculus Rift, and converting outputted movement and orientation data into view rendering updates on a web app. But how do you get started in developing VR apps for the Web? This article will guide you through the basics.
  WebVR API 对于 web 开发者来说，是一个令人心动的功能包，允许你连接到类似于Oculus Rift 这样的虚拟现实硬件，并且能够在你的 web app 中，将从硬件获取到的位置移动数据和姿态角数据，实时更新你的渲染显示输出。具体要如何在 Web 上开始开发你的 VR app 呢？这篇文章将会提供基础的引导信息。"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://developer.mozilla.org/mdn-social-share.0ca9dbda.png"><meta property="twitter:card" content="summary_large_image"><meta name="robots" content="index, follow"><link rel="canonical" href="https://developer.mozilla.org/zh-CN/docs/Web/API/WebVR_API/Using_the_WebVR_API"><style media="print">.breadcrumbs-container,.document-toc-container,.language-menu,.language-toggle,.on-github,.page-footer,.page-header-main,nav.sidebar,ul.prev-next{display:none!important}.main-page-content,.main-page-content pre{padding:2px}.main-page-content pre{border-left-width:2px}</style><link href="/static/css/main.55b68e13.chunk.css" rel="stylesheet"><script src="/static/js/runtime-main.4bb4c356.js" defer=""></script><script src="/static/js/4.a756dea3.chunk.js" defer=""></script><script src="/static/js/main.d4d565e0.chunk.js" defer=""></script></head><body><div id="root"><ul id="nav-access" class="a11y-nav"><li><a id="skip-main" href="#content">Skip to main content</a></li><li><a id="skip-search" href="#main-q">Skip to search</a></li><li><a id="skip-select-language" href="#select-language">Skip to select language</a></li></ul><div class="page-wrapper document-page"><header class="page-header"><a href="/zh-CN/" class="logo" aria-label="MDN Web Docs"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 451.74 135"><path d="M7.14 8.35v111.06h111.05V8.35zm103.71 56c-.48.92-1 1.79-1.46 2.71a3.44 3.44 0 01-3.54 2 2.4 2.4 0 00-1.55.5c-1.37.9-2.76 1.79-4.18 2.63a7.33 7.33 0 01-6.35.34 29.71 29.71 0 00-10.63-2 11.7 11.7 0 00-9.46 4.31 14.84 14.84 0 00-2.13 4.29c-1.24 3.07-2.3 21.38-2.3 26.05 0 0-17.62-3.42-34.15-20.34l4.31-11.32h-13.5l9.76-10.35h-16.8l9.77-10.34H12.69L30.45 34a40.9 40.9 0 0119.77-10.83c7.1-1.22 8.93-.53 13.31.77l2.43.73.85.25 3.1.95a12.56 12.56 0 006.21.09 11.37 11.37 0 018.25 1 8.24 8.24 0 014.1 6.22 7.29 7.29 0 003.61 5.49 59.45 59.45 0 009.32 4.11c2.27.86 4.54 1.84 6.79 2.72a6.81 6.81 0 012.86 2.06 4.81 4.81 0 011.1 2.73c.14 2 .37 4 .47 6a15.24 15.24 0 01-1.77 8.03zM320.12 39.62a5.42 5.42 0 00-4.53 2.13 7.36 7.36 0 00-1.7 4.43v2.36a6.28 6.28 0 001.7 4.46 5.63 5.63 0 004.3 1.82 5.12 5.12 0 004.57-2.27A9.7 9.7 0 00326 47a8.11 8.11 0 00-1.67-5.52 5.36 5.36 0 00-4.21-1.86zM387.38 39.53a5.52 5.52 0 00-4.7 2.15 8.8 8.8 0 00-1.63 5.49 9.23 9.23 0 001.58 5.45 5.38 5.38 0 004.7 2.25 5.61 5.61 0 004.74-2.2 8.91 8.91 0 001.68-5.59 8.24 8.24 0 00-1.75-5.52 5.76 5.76 0 00-4.62-2.03zM299.47 41.35a4.34 4.34 0 00-4-1.92 4.55 4.55 0 00-3.89 1.73 8.37 8.37 0 00-1.58 4.17h10.48a6.3 6.3 0 00-1.01-3.98zM357.74 30.75H352v23.31h5.72q5.47 0 8.35-3t2.93-8.65q0-5.43-2.88-8.55t-8.38-3.11z"></path><path d="M121.55 8.35v70.8h323V8.35zm42.21 22.45h-4V54h3.68v3.73h-11.25V54h3.31V36.79h-.19l-9.63 19.12h-2.12l-10-19.4h-.19V54h3.45v3.73h-11.15V54h3.68V30.8h-4v-3.73H133l11.66 22.56h.19l11.18-22.56h7.7zm29.12 22.67q-4.11 4.28-11.38 4.28h-14.06v-3.69h3.73V30.75h-3.73v-3.68h13.83q7.59 0 11.66 4.29a15.4 15.4 0 014 11 15.33 15.33 0 01-4.05 11.11zm38.89-22.67h-3.68v27h-2.6L208.08 35h-.19v19h4.67v3.73h-12.22V54h3.49V30.8h-4v-3.73h7.08l16.9 22.09h.19V30.8h-4.58v-3.73h12.32zm43.8 27h-3.31l-7.83-23.18h-.19l-7.55 23.18h-3.35l-8.78-27h-2.65v-3.73H253v3.73h-3.87L255 50.71h.23l6.61-19.91H259v-3.73h11v3.73h-2.78l6.61 20.1h.23l5.43-20.1h-4.15v-3.73h11v3.73h-2.54zm26.71-1.51a9.66 9.66 0 01-6.42 2 10.2 10.2 0 01-7.41-2.74c-1.89-1.82-2.83-4.47-2.83-7.93a12.37 12.37 0 012.64-8.12 9 9 0 017.32-3.21 8.62 8.62 0 016.75 2.69 9.65 9.65 0 012.45 6.52 13.67 13.67 0 01-.28 2.69H290q.29 6.71 6.18 6.7a5.2 5.2 0 003.71-1.18 5.82 5.82 0 001.67-2.83l3.45.71a7.21 7.21 0 01-2.73 4.65zm25.77-1.63c-1.51 2.4-3.92 3.61-7.22 3.61s-5.84-1.29-7.22-3.87c0 .25-.1.82-.21 1.7s-.19 1.44-.22 1.7H309c.16-1 .31-2 .47-3.07a21.42 21.42 0 00.24-3.16v-23h-3.4v-3.3h7.55V40.9a9.76 9.76 0 012.67-3.28 7.33 7.33 0 014.74-1.4 8.48 8.48 0 016.5 2.78q2.55 2.74 2.55 7.74a14.6 14.6 0 01-2.27 7.87zm41.39-1.14q-4.11 4.28-11.37 4.28H344v-3.74h3.73V30.75H344v-3.68h13.83q7.59 0 11.66 4.29a15.41 15.41 0 014.06 11 15.34 15.34 0 01-4.11 11.11zm25.65 1.68a10.53 10.53 0 01-7.9 3.07 10 10 0 01-7.63-3 10.93 10.93 0 01-2.8-7.83 12.13 12.13 0 012.69-7.93q2.69-3.3 8-3.3t8 3.28a12 12 0 012.64 7.76 10.86 10.86 0 01-3 7.9zm22.61.57c-1.4 1.66-3.63 2.5-6.68 2.5a9.58 9.58 0 01-7.15-2.76q-2.72-2.76-2.71-7.91a12.25 12.25 0 012.69-8 9.17 9.17 0 017.5-3.28 15 15 0 013.82.48 10.37 10.37 0 013.5 1.65l.85 5.47-3.35.38-.76-3.54a8.07 8.07 0 00-4.11-1 4.9 4.9 0 00-4.39 2.15 9.93 9.93 0 00-1.41 5.55 8.9 8.9 0 001.5 5.38 5.23 5.23 0 004.44 2c2.92 0 4.67-1.7 5.23-5.1l3.5.71a10.34 10.34 0 01-2.47 5.27zm20.48.75a11.68 11.68 0 01-6.63 1.75 15.52 15.52 0 01-8.26-2.08L424 51l3.26.33-.1 2.74a7 7 0 002.06.66 12.63 12.63 0 002.19.19 8.68 8.68 0 003.66-.75 2.5 2.5 0 001.63-2.36 2.25 2.25 0 00-1.32-2.2 12.65 12.65 0 00-3.28-1 47.39 47.39 0 01-3.9-.82 7.5 7.5 0 01-3.25-1.7 4.67 4.67 0 01-1.33-3.66c0-2.36.88-4 2.62-4.91a12 12 0 015.6-1.37 15 15 0 014.08.55 16.65 16.65 0 013.47 1.39l.47 5.1-3.3.37-.48-3.3a9.5 9.5 0 00-4.06-.9 5.62 5.62 0 00-2.87.66 2.33 2.33 0 00-1.15 2.25 2.13 2.13 0 001.3 2.07 11.91 11.91 0 003.21.92 36.69 36.69 0 013.82.83 7.46 7.46 0 013.21 1.74 4.9 4.9 0 011.3 3.73 5.56 5.56 0 01-2.66 4.91z"></path><path d="M181.17 30.75h-5.71v23.31h5.71q5.47 0 8.36-3t2.88-8.61q0-5.43-2.88-8.55t-8.36-3.15zM121.63 119.32V81.74h114.91v37.58zM153.22 109h-2v-6.85a4.8 4.8 0 00-1.58-4 5.57 5.57 0 00-3.55-1.26 5 5 0 00-4.92 3.26 4.19 4.19 0 00-1.88-2.46 5.82 5.82 0 00-3-.8 4.89 4.89 0 00-4.56 2.56v-2.21h-6.28v3.26h2v8.5h-2v3.23h9.11V109h-2.86v-5.25a4.4 4.4 0 01.69-2.56 2.47 2.47 0 012.21-1q2.57 0 2.56 3.63v8.41h6.29V109h-2v-5.25a4.47 4.47 0 01.67-2.56 2.42 2.42 0 012.19-1q2.63 0 2.63 3.63v8.41h6.28zm9.88-12.07q-4 0-6 2.36a8.41 8.41 0 00-2 5.66 7.25 7.25 0 002.17 5.62 8 8 0 005.65 2 8.54 8.54 0 005.94-2.11 7.27 7.27 0 002.34-5.67 8.21 8.21 0 00-2-5.51q-2.07-2.34-6.1-2.34zm-.1 12.35a3 3 0 01-2.63-1.33 5.68 5.68 0 01-.9-3.26 5 5 0 011-3.28 3.23 3.23 0 012.61-1.18 3.5 3.5 0 012.59 1.08 4.56 4.56 0 011.07 3.31 5.21 5.21 0 01-1 3.41 3.33 3.33 0 01-2.74 1.25zm25-2.3l-3.39-.29-.7 2.32H179l8.32-9.54-.32-2.23h-13.19l-.53 5.25 3.16.34.67-2.36h4.65l-8.25 9.53.44 2.26h13.13zm7.62-9.74h-4.46v5.39h4.46zm0 9.61h-4.46v5.39h4.46zm13.54-17.49h-4.23l-6.48 22.88h4.22zm8.68 0h-4.23l-6.45 22.88h4.19zm15 22.51l-.07-2.26a1.22 1.22 0 01-.56.1c-.69 0-1-.39-1-1.16v-6.49a4.39 4.39 0 00-1.8-3.84 7 7 0 00-4.16-1.28 14.55 14.55 0 00-3.16.3 24.14 24.14 0 00-3.29 1.06l-.56 3.46 3.39.4.5-1.69a2.78 2.78 0 011.08-.37 11.3 11.3 0 011.25-.07c1.19 0 1.89.37 2.09 1.1a8.55 8.55 0 01.3 2.26v.5a8.91 8.91 0 00-1.18-.11h-1.21a12.64 12.64 0 00-4.81.88 3.53 3.53 0 00-2.18 3.64 3.66 3.66 0 001.48 3.33 5.63 5.63 0 003.11 1 4.67 4.67 0 003-.91 6.78 6.78 0 001.8-2 3 3 0 003.33 3 5.54 5.54 0 002.66-.85zm-9.25-2.32a1.69 1.69 0 01-1.36-.52 1.81 1.81 0 01-.43-1.21 1.67 1.67 0 01.86-1.68 4.63 4.63 0 012-.42 7.69 7.69 0 011.07.07l1.06.13a3.58 3.58 0 01-1.08 2.74 3.24 3.24 0 01-2.11.89z"></path></svg></a><button type="button" class="ghost main-menu-toggle" aria-haspopup="true" aria-label="Show Menu"></button><div class="page-header-main "><nav class="main-nav" aria-label="Main menu"><ul class="main-menu nojs"><li class="top-level-entry-container"><button id="technologies-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">Technologies</button><ul class="technologies " role="menu" aria-labelledby="technologies-button"><li role="none"><a tabindex="-1" href="/zh-CN/docs/Web" role="menuitem">Technologies Overview</a></li><li role="none"><a tabindex="-1" href="/zh-CN/docs/Web/HTML" role="menuitem">HTML</a></li><li role="none"><a tabindex="-1" href="/zh-CN/docs/Web/CSS" role="menuitem">CSS</a></li><li role="none"><a tabindex="-1" href="/zh-CN/docs/Web/JavaScript" role="menuitem">JavaScript</a></li><li role="none"><a tabindex="-1" href="/zh-CN/docs/Web/Guide/Graphics" role="menuitem">Graphics</a></li><li role="none"><a tabindex="-1" href="/zh-CN/docs/Web/HTTP" role="menuitem">HTTP</a></li><li role="none"><a tabindex="-1" href="/zh-CN/docs/Web/API" role="menuitem">APIs</a></li><li role="none"><a tabindex="-1" href="/zh-CN/docs/Mozilla/Add-ons/WebExtensions" role="menuitem">Browser Extensions</a></li><li role="none"><a tabindex="-1" href="/zh-CN/docs/Web/MathML" role="menuitem">MathML</a></li></ul></li><li class="top-level-entry-container"><button id="references-guides-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">References &amp; Guides</button><ul class="references-guides " role="menu" aria-labelledby="references-guides-button"><li role="none"><a tabindex="-1" href="/zh-CN/docs/Learn" role="menuitem">Learn web development</a></li><li role="none"><a tabindex="-1" href="/zh-CN/docs/Web/Tutorials" role="menuitem">Tutorials</a></li><li role="none"><a tabindex="-1" href="/zh-CN/docs/Web/Reference" role="menuitem">References</a></li><li role="none"><a tabindex="-1" href="/zh-CN/docs/Web/Guide" role="menuitem">Developer Guides</a></li><li role="none"><a tabindex="-1" href="/zh-CN/docs/Web/Accessibility" role="menuitem">Accessibility</a></li><li role="none"><a tabindex="-1" href="/zh-CN/docs/Games" role="menuitem">Game development</a></li><li role="none"><a tabindex="-1" href="/zh-CN/docs/Web" role="menuitem">...more docs</a></li></ul></li><li class="top-level-entry-container"><button id="feedback-button" type="button" class="top-level-entry" aria-haspopup="menu" aria-expanded="false">Feedback</button><ul class="feedback " role="menu" aria-labelledby="feedback-button"><li role="none"><a tabindex="-1" href="/zh-CN/docs/MDN/Contribute/Feedback" role="menuitem">Send Feedback</a></li><li role="none"><a tabindex="-1" href="/zh-CN/docs/MDN/Contribute" role="menuitem">Contribute to MDN</a></li><li role="none"><a tabindex="-1" target="_blank" rel="noopener noreferrer" href="https://github.com/mdn/content/issues/new" role="menuitem">Report a content issue<!-- --> 🌐</a></li><li role="none"><a tabindex="-1" target="_blank" rel="noopener noreferrer" href="https://github.com/mdn/yari/issues/new" role="menuitem">Report a platform issue<!-- --> 🌐</a></li></ul></li></ul></nav><div class="header-search"><form action="/zh-CN/search" class="search-form search-widget" role="search"><label for="main-q" class="visually-hidden">Search MDN</label><input type="search" name="q" id="main-q" class="search-input-field" placeholder="Site search... (Press &quot;/&quot; to focus)" pattern="(.|\s)*\S(.|\s)*" required="" value=""><input type="submit" class="ghost search-button" value="" aria-label="Search"></form></div><div class="auth-container"></div></div></header><div class="breadcrumb-locale-container"><nav class="breadcrumbs-container" aria-label="Breadcrumb navigation"><ol typeof="BreadcrumbList" vocab="https://schema.org/" aria-label="breadcrumbs"><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="/zh-CN/docs/Web"><span property="name">Web 开发技术</span></a><meta property="position" content="1"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb" property="item" typeof="WebPage" href="/zh-CN/docs/Web/API"><span property="name">Web API 接口参考</span></a><meta property="position" content="2"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb-penultimate" property="item" typeof="WebPage" href="/zh-CN/docs/Web/API/WebVR_API"><span property="name">WebVR API</span></a><meta property="position" content="3"></li><li property="itemListElement" typeof="ListItem"><a class="breadcrumb-current-page" property="item" typeof="WebPage" href="/zh-CN/docs/Web/API/WebVR_API/Using_the_WebVR_API"><span property="name">Using the WebVR API</span></a><meta property="position" content="4"></li></ol></nav><ul class="language-toggle"><li><a href="#select-language" class="language-icon"><span class="show-desktop">Change language</span></a></li><li><a class="view-in-english" href="/en-US/docs/Web/API/WebVR_API/Using_the_WebVR_API"><span class="show-desktop">View in</span> English</a></li></ul></div><div class="localized-content-note notecard inline neutral"><a href="/en-US/docs/MDN/Contribute/Localize#active_locales">This page was translated from English by the community. Learn more and join the MDN Web Docs community.</a></div><aside class="document-toc-container"><section class="document-toc"><header><h2>Table of contents</h2><button type="button" class="ghost toc-trigger-mobile" aria-controls="toc-entries" aria-expanded="false">Table of contents</button></header><ul id="toc-entries"><li><a href="#起步">起步</a></li><li><a href="#introducing_a_simple_demo简单示例介绍">Introducing a simple demo<br>简单示例介绍</a></li><li><a href="#how_does_the_app_workapp_是怎样工作的呢？">How does the app work?<br>app 是怎样工作的呢？</a></li><li><a href="#calibrating_field_of_view_and_device_orientation_对_fov_与设备姿态进行归零显示">Calibrating field of view and device orientation 对 FOV 与设备姿态进行归零显示</a></li></ul></section></aside><main id="content" class="main-content" role="main"><article class="main-page-content" lang="zh-CN"><h1>Using the WebVR API</h1><div><p>
  The <a href="/zh-CN/docs/Web/API/WebVR_API">WebVR API</a> is a fantastic addition to the web developer's toolkit, allowing access to virtual reality hardware such as the <a href="https://developer.oculus.com/" class="external" rel=" noopener">Oculus Rift</a>, and converting outputted movement and orientation data into view rendering updates on a web app. But how do you get started in developing VR apps for the Web? This article will guide you through the basics.
  <a href="/zh-CN/docs/Web/API/WebVR_API">WebVR API</a> 对于 web 开发者来说，是一个令人心动的功能包，允许你连接到类似于<a href="https://developer.oculus.com/" class="external" rel=" noopener">Oculus Rift</a> 这样的虚拟现实硬件，并且能够在你的 web app 中，将从硬件获取到的位置移动数据和姿态角数据，实时更新你的渲染显示输出。具体要如何在 Web 上开始开发你的 VR app 呢？这篇文章将会提供基础的引导信息。
</p>
<div class="notecard note" id="sect1">
  <p>
    <strong>备注：</strong> Currently WebVR is at an experimental stage (you can find the <a href="http://mozvr.github.io/webvr-spec/webvr.html" class="external" rel=" noopener">latest spec here</a>); it currently works best in Firefox Nightly/Developer Edition, with some aspects of it also working in Google Chrome. Read <a href="http://blog.tojicode.com/2014/07/bringing-vr-to-chrome.html" class="external" rel=" noopener">Bringing VR to Chrome</a> by Brandon Jones for more details on that.
    注意：当前 WebVR 还是体验实验阶段（你可以从<a href="http://mozvr.github.io/webvr-spec/webvr.html" class="external" rel=" noopener">这里</a>找到最新规格说明）；它已经在 Firefox Nightly/Developer Edition 的版本上工作的很好了，部分功能也在 Google Chrome 上可以正常工作了。详细请访问由 Brandon Jones 在 <a href="http://blog.tojicode.com/2014/07/bringing-vr-to-chrome.html" class="external" rel=" noopener">Bringing VR to Chrome</a>提供的更多内容。
  </p>
</div></div><h2 id="起步"><a href="#起步" title="Permalink to 起步">起步</a></h2><div><p>
  To get started, you need to have your VR hardware set up as recommended in the owner's manual, and your computer set up as indicated in <a href="/zh-CN/docs/Web/API/WebVR_API/WebVR_environment_setup" class="page-not-created" title="This is a link to an unwritten page">WebVR environment setup</a>. A dedicated GPU is recommended for smoother performance.
  你需要先准备好一个已经配置好 VR 硬件，并且还需要完成 <a href="/zh-CN/docs/Web/API/WebVR_API/WebVR_environment_setup" class="page-not-created" title="This is a link to an unwritten page">WebVR 环境的安装</a>。 当然，若想要保证很平滑的体验，你需要配置一个足够好的 GPU 显卡。
</p>
<p>
  You also need to have <a href="https://nightly.mozilla.org/" class="external" rel=" noopener">Firefox Nightly</a> (or <a href="https://www.mozilla.org/en-US/firefox/developer/" class="external" rel=" noopener">Developer Edition</a>) installed, along with the <a href="http://www.mozvr.com/downloads/webvr-addon-0.1.0.xpi" class="external" rel=" noopener">WebVR Enabler Add-on</a>
  安装好 <a href="https://nightly.mozilla.org/" class="external" rel=" noopener">Firefox Nightly</a> (或 <a href="https://www.mozilla.org/en-US/firefox/developer/" class="external" rel=" noopener">Developer Edition</a>)，以及 <a href="http://www.mozvr.com/downloads/webvr-addon-0.1.0.xpi" class="external" rel=" noopener">WebVR Enabler Add-on</a>
</p>
<p>
  Once your environment is set up, try visiting one of our <a href="http://mozvr.com/projects/" class="external" rel=" noopener">MozVR projects</a> and clicking on the "Enter VR" button to test it out.
  设置好环境后，请尝试访问我们直接可在线运行的工程项目 <a href="http://mozvr.com/projects/" class="external" rel=" noopener">MozVR projects</a> ，点击“Enter VR” 按钮，就可以开始测试你的环境了。
</p>
<div class="notecard note" id="sect2">
  <p>
    <strong>备注：</strong> For more in depth information, be sure to check out <a href="/zh-CN/docs/Web/API/WebVR_API/WebVR_environment_setup" class="page-not-created" title="This is a link to an unwritten page">WebVR environment setup</a>.
    注意：更深层次的信息，请 check out <a href="/zh-CN/docs/Web/API/WebVR_API/WebVR_environment_setup" class="page-not-created" title="This is a link to an unwritten page">WebVR environment setup</a> 以获取更详细的内容。
  </p>
</div>
<div class="notecard note" id="sect3">
  <p>
    <strong>备注：</strong> There are also cheaper options available such as using a mobile device for the head mounted display (in this case you won't have a position sensor available, so you might have to fake the orientation data using the <a href="/zh-CN/docs/Web/Apps/Build/gather_and_modify_data/responding_to_device_orientation_changes">deviceorientation API</a> instead perhaps.)
    注意：你也可以使用更便宜的方式，比如使用一个手机设备来实现头部显示功能（只是这种情况下，你将没有空间位置追踪传感器相关的功能，将只能使用姿态角数据相关的 API <a href="/zh-CN/docs/Web/Apps/Build/gather_and_modify_data/responding_to_device_orientation_changes">deviceorientation API</a> 。）
  </p>
</div></div><h2 id="introducing_a_simple_demo简单示例介绍"><a href="#introducing_a_simple_demo简单示例介绍" title="Permalink to Introducing a simple demo简单示例介绍">Introducing a simple demo<br>简单示例介绍</a></h2><div><p>
  There are a number of WebVR demos available at the <a href="https://github.com/MozVR/" class="external" rel=" noopener">MozVR team repo</a>, and the <a href="https://github.com/mdn/webvr-tests" class="external" rel=" noopener">MDN webvr-tests repo</a>, but the main one we will be focusing on in this article is our <a href="https://github.com/mdn/webvr-tests/tree/gh-pages/positionsensorvrdevice" class="external" rel=" noopener">positionsensorvrdevice</a> demo (<a href="https://mdn.github.io/webvr-tests/positionsensorvrdevice/" class="external" rel=" noopener">view it live</a>):
  在<a href="https://github.com/MozVR/" class="external" rel=" noopener">MozVR team repo</a>和<a href="https://github.com/mdn/webvr-tests" class="external" rel=" noopener">MDN webvr-tests repo</a>提供了一定数量的 WebVR 示例，在这篇文章里，我们将着重关注我们的 <a href="https://github.com/mdn/webvr-tests/tree/gh-pages/positionsensorvrdevice" class="external" rel=" noopener">positionsensorvrdevice</a> 提供的示例 (点此访问 live <a href="https://mdn.github.io/webvr-tests/positionsensorvrdevice/" class="external" rel=" noopener">view it live</a>)
</p>
<p>
  <img src="https://mdn.mozillademos.org/files/10797/vrpositionsensor-demo.png" alt="" loading="lazy">
</p>
<p>
  This is a simple 2.5D demo showing a Firefox logo seen on a left and right eye view, rendered on <a href="/zh-CN/docs/Web/HTML/Element/canvas">HTML5 Canvas</a>. When you view the demo with a VR HMD and click the canvas, the demo will go fullscreen, and you'll be able to approach the Firefox logo. It will move realistically as you move your head towards and away from it, up and down and side to side, and rotate your head in any direction.
  这是一个简单的 2.5D 的示例，在左右眼两个区域，以<a href="/zh-CN/docs/Web/HTML/Element/canvas">HTML5 Canvas</a>的方式，同时渲染了 Firefox 的 LOGO。当你使用 VR 头显来观看这个示例时，点击画面，这个 DEMO 就会切换到全屏形式，可以尝试靠近 Firefox 图标。将会非常真实地同步你的头部运动后应该看到的内容，包括可以上下移动、左右移动、转动你的头部看想看的方向。
</p>
<p>
  The demo was deliberately kept simple so that you can easily see what is going on with the WebVR code. The API is simple enough that you can easily apply WebVR-controlled movement to any app you like, from simple DOM-based interfaces to complex WebGL scenes.
  这个示例程序特意做成足够地简单，以便于你可以更容易地了解 WebVR 代码的工作过程。从代码中你可以看到，这些 API 足够的简单，你可以轻松地将这些 WebVR 控制移动和转动的能力，移植到新的应用功能中，比如一个简单的使用 WebGL 来显示的基于 DOM 接口的应用。
</p></div><h2 id="how_does_the_app_workapp_是怎样工作的呢？"><a href="#how_does_the_app_workapp_是怎样工作的呢？" title="Permalink to How does the app work?app 是怎样工作的呢？">How does the app work?<br>app 是怎样工作的呢？</a></h2><div><p>
  In this section we'll go through the different parts of the code that make the app work, so you can see what's required at a basic level.
  本章节，我们将通过不同形式的代码来运行，从而你可以了解到哪些东西是最基础的。
</p></div><h3 id="accessing_the_vr_devices连接并访问_vr_设备"><a href="#accessing_the_vr_devices连接并访问_vr_设备" title="Permalink to Accessing the VR devices连接并访问 VR 设备">Accessing the VR devices<br>连接并访问 VR 设备</a></h3><div><p>
  The first thing to do is get a programmatic reference to the VR hardware connected to your computer. This is done using <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/Navigator/getVRDisplays"><code>Navigator.getVRDevices</code> <small>(en-US)</small></a>, which returns a promise that resolves to an array of all the vr devices connected to your computer.
  首先，你需要获取连接到你当前电脑的 VR 硬件的程序对象的引用。通过调用<a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/Navigator/getVRDisplays"><code>Navigator.getVRDevices</code> <small>(en-US)</small></a>这个 API，可以获取到已经连接到当前电脑的 VR 设备的数组。
</p>
<p>
  There are two kinds of object that may be returned:
  可能返回两种类型的对象：
</p>
<ul>
  <li><a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/PositionSensorVRDevice"><code>PositionSensorVRDevice</code> <small>(en-US)</small></a>: A position sensor camera.</li>
  <li><a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/PositionSensorVRDevice"><code>PositionSensorVRDevice</code> <small>(en-US)</small></a>：带空间位置定位的传感器摄像头。</li>
  <li><a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/HMDVRDevice"><code>HMDVRDevice</code> <small>(en-US)</small></a>: A VR head mounted display.</li>
  <li><a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/HMDVRDevice"><code>HMDVRDevice</code> <small>(en-US)</small></a>：VR 头显设备。</li>
</ul>
<p>
  You can see some very simple code showing the kind of basic device information that can be returned in our <a href="https://github.com/mdn/webvr-tests/tree/gh-pages/vrdevice" class="external" rel=" noopener">vrdevice demo</a>.
  在 <a href="https://github.com/mdn/webvr-tests/tree/gh-pages/vrdevice" class="external" rel=" noopener">vrdevice demo</a> 中，使用简单代码即可以获取设备基础信息。
</p>
<p>
  However, what you really want is something that grabs a pair of devices (perhaps many pairs in multiplayer VR games of the future). The following code taken from the WebVR spec (and also used in the <a href="https://github.com/mdn/webvr-tests/tree/gh-pages/positionsensorvrdevice" class="external" rel=" noopener">positionsensorvrdevice</a> demo) does the trick pretty well:
  当然，若你需要同时获取多套 VR 设备的信息（可能是将来多个玩家的多套设备），WebVR 说明书中包含的以下代码会更适合你来参考（在 <a href="https://github.com/mdn/webvr-tests/tree/gh-pages/positionsensorvrdevice" class="external" rel=" noopener">positionsensorvrdevice</a> 示例代码中也有使用这段代码逻辑）。
</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">var</span> gHMD<span class="token punctuation">,</span> gPositionSensor<span class="token punctuation">;</span>

navigator<span class="token punctuation">.</span><span class="token function">getVRDevices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">devices</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> devices<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>devices<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">HMDVRDevice</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      gHMD <span class="token operator">=</span> devices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>gHMD<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> devices<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>devices<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">PositionSensorVRDevice</span> <span class="token operator">&amp;&amp;</span> devices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>hardwareUnitId <span class="token operator">===</span> gHMD<span class="token punctuation">.</span>hardwareUnitId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        gPositionSensor <span class="token operator">=</span> devices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>
  Here we grab the first instance we find of an <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/HMDVRDevice"><code>HMDVRDevice</code> <small>(en-US)</small></a> and store it in the <code>gHMD</code> variable. Next, we grab the first instance we find of a <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/PositionSensorVRDevice"><code>PositionSensorVRDevice</code> <small>(en-US)</small></a> and store it in the <code>gPositionSensor</code> variable, but only if its <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/VRDisplay"><code>VRDevice.hardWareUnitId</code> <small>(en-US)</small></a> property matches that of the <code>gHMD</code> object. Separate devices that are part of the same overall hardware unit will share a hardware unit ID — this is how you check that you've got references to two matching devices.
  这段代码，先获取第一个找到 <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/HMDVRDevice"><code>HMDVRDevice</code> <small>(en-US)</small></a> 类型的对象引用，赋值给 gHMD 变量。若获取到了，然后，再找到一个 <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/PositionSensorVRDevice"><code>PositionSensorVRDevice</code> <small>(en-US)</small></a> 类型的对象引用，并且它与 gHMD 的 <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/VRDisplay"><code>VRDevice.hardWareUnitId</code> <small>(en-US)</small></a> 属性值相同时，即找到配对的对象，赋值给<code>gPositionSensor 变量。同一套设备单元中的多个分离的设备会共享他们的</code> hardware unit ID，可以依此来检测两个设备对象是否是同一套。
</p></div><h3 id="initialising_the_app_初始化_app"><a href="#initialising_the_app_初始化_app" title="Permalink to Initialising the app 初始化 APP">Initialising the app 初始化 APP</a></h3><div><p>
  The scene is rendered on a <a href="/zh-CN/docs/Web/HTML/Element/canvas"><code>&lt;canvas&gt;</code></a> element, created and placed as follows:
  场景最终是通过 <a href="/zh-CN/docs/Web/HTML/Element/canvas"><code>&lt;canvas&gt;</code></a> 标记元素来显示。canvas 画布可通过以下 JS 代码来创建。
</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">var</span> myCanvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> ctx <span class="token operator">=</span> myCanvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> body <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>myCanvas<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>
  Next, we create a new <a href="/zh-CN/docs/Web/API/HTMLImageElement">image</a> and use a <code><a href="/en-US/docs/Web/API/Window/load_event" title="Currently only available in English (US)" class="only-in-en-us">load (en-US)</a></code> event to check that the image is loaded before running <code>draw()</code>, the <a href="/zh-CN/docs/Games/Anatomy#building_a_main_loop_in_javascript">main loop</a> for our app:
  然后，我们在主渲染循环控制中，先创建一个图片对象，并且在 draw() 方法运行前，监听 <code><a href="/en-US/docs/Web/API/Window/load_event" title="Currently only available in English (US)" class="only-in-en-us">load (en-US)</a></code> 事件回调，以检查图片是否已经被正常装载成功。
</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">var</span> image <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
image<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'firefox.png'</span><span class="token punctuation">;</span>
image<span class="token punctuation">.</span>onload <span class="token operator">=</span> draw<span class="token punctuation">;</span>
</code></pre></div></div><h3 id="the_main_loop_渲染显示主循环"><a href="#the_main_loop_渲染显示主循环" title="Permalink to The main loop 渲染显示主循环">The main loop 渲染显示主循环</a></h3><div><p>
  <code>draw()</code> looks like this:
  draw() 方法的实现代码参考如下：
</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token constant">WIDTH</span> <span class="token operator">=</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">;</span>
  <span class="token constant">HEIGHT</span> <span class="token operator">=</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">;</span>
  lCtrOffset <span class="token operator">=</span> <span class="token constant">WIDTH</span><span class="token operator">*</span><span class="token number">0.25</span><span class="token punctuation">;</span>
  rCtrOffset <span class="token operator">=</span> <span class="token constant">WIDTH</span><span class="token operator">*</span><span class="token number">0.25</span><span class="token punctuation">;</span>

  myCanvas<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token constant">WIDTH</span><span class="token punctuation">;</span>
  myCanvas<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token constant">HEIGHT</span><span class="token punctuation">;</span>

  <span class="token function">setView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">drawImages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">drawCrosshairs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>draw<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>
  The <a href="/zh-CN/docs/Web/API/Window">window</a> <code>WIDTH</code> and <code>HEIGHT</code> is resampled on each frame then used to set:
  在控制每一帧显示输出时，都有重新获取 <a href="/zh-CN/docs/Web/API/Window">window</a> 窗口当前的宽、高，并依此来调整输出显示：
</p>
<ul>
  <li>A left and right offset value used to keep the image drawn relative to the center of the left and right eye view. Because we are drawing two half-width copies of the scene, the center of each copy is actually a quarter of the total canvas width in from the edge, in each case.</li>
  <li>The <a href="/zh-CN/docs/Web/API/HTMLCanvasElement/width">width</a> and <a href="/zh-CN/docs/Web/API/HTMLCanvasElement/height">height</a> of the canvas.</li>
</ul>
<p>This is done so that the scene will resize correctly whenever the browser window is resized by the user.</p>
<p>Next in the loop we run three functions:</p>
<ul>
  <li><code>setView()</code> retrieves position and orientation information from the VR hardware, ready for use in drawing the updated image positions in the scene.</li>
  <li><code>drawImages()</code> actually draws the updated image positions in the scene.</li>
  <li><code>drawCrosshairs()</code> draws the crosshairs that remain in the center of the scene at all times.</li>
</ul>
<p>You'll learn more about these later on.</p>
<p>Finally for the loop, we run <a href="/zh-CN/docs/Web/API/Window/requestAnimationFrame">requestAnimationFrame(draw)</a> so that the <code>draw()</code> loop is continually run.</p></div><h3 id="retrieving_position_and_orientation_information_提取位置与姿态"><a href="#retrieving_position_and_orientation_information_提取位置与姿态" title="Permalink to Retrieving position and orientation information 提取位置与姿态">Retrieving position and orientation information 提取位置与姿态</a></h3><div><p>Now lets study the <code>setView()</code> function in detail. We'll step through each part of the code, explaining what it all does:</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">function</span> <span class="token function">setView</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> posState <span class="token operator">=</span> gPositionSensor<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>First we call <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/PositionSensorVRDevice/getState"><code>PositionSensorVRDevice.getState</code> <small>(en-US)</small></a> on the reference to our position sensor. This method returns everything you might want to know about the current state of the HMD — accessible through a <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/VRPose"><code>VRPositionState</code> <small>(en-US)</small></a> object — including its position, orientation, and more advanced information such as linear and angular velocity/acceleration.</p>
<div class="code-example"><pre class="brush: js notranslate"><code>  <span class="token keyword">if</span><span class="token punctuation">(</span>posState<span class="token punctuation">.</span>hasPosition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    posPara<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'Position: x'</span> <span class="token operator">+</span> <span class="token function">roundToTwo</span><span class="token punctuation">(</span>posState<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" y"</span>
                                <span class="token operator">+</span> <span class="token function">roundToTwo</span><span class="token punctuation">(</span>posState<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" z"</span>
                                <span class="token operator">+</span> <span class="token function">roundToTwo</span><span class="token punctuation">(</span>posState<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>
    xPos <span class="token operator">=</span> <span class="token operator">-</span>posState<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x <span class="token operator">*</span> <span class="token constant">WIDTH</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
    yPos <span class="token operator">=</span> posState<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y <span class="token operator">*</span> <span class="token constant">HEIGHT</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">-</span>posState<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z <span class="token operator">&gt;</span> <span class="token number">0.01</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      zPos <span class="token operator">=</span> <span class="token operator">-</span>posState<span class="token punctuation">.</span>position<span class="token punctuation">.</span>z<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      zPos <span class="token operator">=</span> <span class="token number">0.01</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div>
<p>In the next part, we first check to make sure valid position information is available for the HMD using <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/VRPose/position"><code>VRPositionState.hasPosition</code> <small>(en-US)</small></a>, so that we don't return an error and stop the app working (if the HMD is switched off, or not pointing at the position sensor.)</p>
<p>Then we output the current position information to a paragraph in the app UI for information purposes (rounded to two decimal places using a custom function to make it more readable.)</p>
<p>Last up, we set our <code>xPos</code>, <code>yPos</code>, and <code>zPos</code> variables relative to the position information stored in <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/VRPose/position"><code>VRPositionState.position</code> <small>(en-US)</small></a>. You'll notice that we have used an <code>if ... else</code> block to make sure the <code>zPos</code> value stays at 0.01 or above — the app was throwing an error if it went below 0.</p>
<div class="code-example"><pre class="brush: js notranslate"><code>  <span class="token keyword">if</span><span class="token punctuation">(</span>posState<span class="token punctuation">.</span>hasOrientation<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    orientPara<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'Orientation: x'</span> <span class="token operator">+</span> <span class="token function">roundToTwo</span><span class="token punctuation">(</span>posState<span class="token punctuation">.</span>orientation<span class="token punctuation">.</span>x<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" y"</span>
                                <span class="token operator">+</span> <span class="token function">roundToTwo</span><span class="token punctuation">(</span>posState<span class="token punctuation">.</span>orientation<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" z"</span>
                                <span class="token operator">+</span> <span class="token function">roundToTwo</span><span class="token punctuation">(</span>posState<span class="token punctuation">.</span>orientation<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>
    xOrient <span class="token operator">=</span> posState<span class="token punctuation">.</span>orientation<span class="token punctuation">.</span>x <span class="token operator">*</span> <span class="token constant">WIDTH</span><span class="token punctuation">;</span>
    yOrient <span class="token operator">=</span> <span class="token operator">-</span>posState<span class="token punctuation">.</span>orientation<span class="token punctuation">.</span>y <span class="token operator">*</span> <span class="token constant">HEIGHT</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>
    zOrient <span class="token operator">=</span> posState<span class="token punctuation">.</span>orientation<span class="token punctuation">.</span>z <span class="token operator">*</span> <span class="token number">180</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>
</code></pre></div>
<p>Next, we use a similar process to update the scene according to the HMD's orientation — check that valid orientation data is available using <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/VRPose/orientation"><code>VRPositionState.hasOrientation</code> <small>(en-US)</small></a>, display orientation data in the UI for informational purposes, and then set the <code>xOrient</code>, <code>yOrient</code>, and <code>zOrient</code> values relative to the orientation information stored in <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/VRPose/orientation"><code>VRPositionState.orientation</code> <small>(en-US)</small></a>.</p>
<pre class="notranslate">  timePara.textContent = 'Timestamp: ' + Math.floor(posState.timeStamp);
}
</pre>
<p>Finally, we output the current timeStamp stored in <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/VRPose/timeStamp"><code>VRPositionState.timeStamp</code> <small>(en-US)</small></a> to the UI for information. This value can be useful for determining if position data has been updated, and what order updates have occured in.</p></div><h3 id="updating_the_scene_更新场景输出画画"><a href="#updating_the_scene_更新场景输出画画" title="Permalink to Updating the scene 更新场景输出画画">Updating the scene 更新场景输出画画</a></h3><div><p>The <code>xPos</code>, <code>yPos</code>, <code>zPos</code>, <code>xOrient</code>, <code>yOrient</code> and <code>zOrient</code> value retrieved by <code>setView()</code> are all used as modifiers for updating the scene rendering done by <code>drawImages()</code>. We'll look at how below, although we'll only walk through the code for drawing the left eye view (the other is very similar, but shifted over to the right):</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">function</span> <span class="token function">drawImages</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  ctx<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">'white'</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token constant">WIDTH</span><span class="token punctuation">,</span><span class="token constant">HEIGHT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>First we draw a white <a href="/zh-CN/docs/Web/API/CanvasRenderingContext2D/fillRect" title="fillRect()"><code>fillRect()</code></a> to clear the scene before the next frame is drawn.</p>
<div class="code-example"><pre class="brush: js notranslate"><code>  ctx<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">beginPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token constant">WIDTH</span><span class="token operator">/</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token constant">HEIGHT</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">rect</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token constant">WIDTH</span><span class="token operator">/</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token constant">HEIGHT</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token constant">WIDTH</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token constant">HEIGHT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Next, we save the context state with <a href="/zh-CN/docs/Web/API/CanvasRenderingContext2D/save" title="save()"><code>save()</code></a> so we can treat the left eye view as a separate image and not have its code affect the right eye view.</p>
<p>We then <a href="/zh-CN/docs/Web/API/CanvasRenderingContext2D/beginPath" title="begin a path"><code>begin a path</code></a>, <a href="/zh-CN/docs/Web/API/CanvasRenderingContext2D/translate" title="translate the canvas"><code>translate the canvas</code></a> so that the origin is now in the center of the left eye view (a quarter of the width across and half the height down) — which is needed so that the rotation works correctly (rotation happens around the origin of the canvas) — and draw a <a href="/zh-CN/docs/Web/API/CanvasRenderingContext2D/rect" title="rect()"><code>rect()</code></a> around the whole left eye view.</p>
<p>Note that the <code>rect()</code> has to be drawn starting from minus a quarter of the width and minus half the height, because of the translation applied earlier.</p>
<pre class="notranslate">  ctx.clip();
</pre>
<p>Now we <a href="/zh-CN/docs/Web/API/CanvasRenderingContext2D/clip" title="clip()"><code>clip()</code></a> the canvas. Because we called this just after the <code>rect()</code> was drawn, anything else that we do on the canvas will be constrained inside the <code>rect()</code>, with any overflow hidden until a <code>restore()</code> call is made (see later on.) This ensures that the whole left eye view will remain separate from the right eye view.</p>
<div class="code-example"><pre class="brush: js notranslate"><code>  ctx<span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span>zOrient <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span> <span class="token operator">/</span> <span class="token number">180</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>A rotation is now applied to the image, related to the current value of <code>zOrient</code>, so that the scene rotates as you rotate your head.</p>
<div class="code-example"><pre class="brush: js notranslate"><code>  ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token constant">WIDTH</span><span class="token operator">/</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token operator">+</span>lCtrOffset<span class="token operator">-</span><span class="token punctuation">(</span><span class="token punctuation">(</span>image<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">/</span>zPos<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">+</span>xPos<span class="token operator">-</span>yOrient<span class="token punctuation">,</span><span class="token operator">-</span><span class="token punctuation">(</span><span class="token punctuation">(</span>image<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">/</span>zPos<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">+</span>yPos<span class="token operator">+</span>xOrient<span class="token punctuation">,</span>image<span class="token punctuation">.</span>width<span class="token operator">*</span>zPos<span class="token punctuation">,</span>image<span class="token punctuation">.</span>height<span class="token operator">*</span>zPos<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Now for the actual image drawing! This rather nasty line of code needs breaking down, so here it is, argument by argument:</p>
<ul>
  <li><code>image</code>: The image to be drawn</li>
  <li><code>-(WIDTH/4)+lCtrOffset-((image.width)/(2*(1/zPos)))+xPos-yOrient</code>: The horizontal coordinate of the image origin. This first needs to be reduced by <code>WIDTH/4</code> to compensate for the translation done earlier. Then, we add the left center offset to put it back in the middle, then we subtract the image width divided by 2 times the reciprocal of <code>zPos</code> — so as the image is drawn smaller/larger the amount subtracted will get smaller/larger, again keeping the image in the center. Finally, we add the <code>xPos</code> and subtract the <code>yOrient</code> values to update the image position as the HMD is moved or rotated horizontally (rotation around the y axis moves the image horizontally.)</li>
  <li><code>-((image.height)/(2*(1/zPos)))+yPos+xOrient</code>: The vertical coordinate of the image origin. In this case the "subtract HEIGHT/2" and "add right center offset" exactly cancel each other out, so I've just removed them from the equation. That just leaves subtracting the image width divided by 2 times the reciprocal of zPos to keep the image in the center, as above, and modifying the drawn position by <code>yPos</code> and <code>xOrient</code>.</li>
  <li><code>image.width*zPos</code>: The width to draw the image; this is modified by <code>zPos</code> so it will be drawn bigger as you get closer to it.</li>
  <li><code>image.height*zPos</code>: The height to draw the image; this is modified by <code>zPos</code> so it will be drawn bigger as you get closer to it.</li>
</ul>
<div class="code-example"><pre class="brush: js notranslate"><code>  ctx<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">"black"</span><span class="token punctuation">;</span>
  ctx<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Next we draw a black <a href="/zh-CN/docs/Web/API/CanvasRenderingContext2D/stroke" title="stroke()"><code>stroke()</code></a> around the left eye view, just to aid the view separation a bit more.</p>
<div class="code-example"><pre class="brush: js notranslate"><code>  ctx<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Finally, we <a href="/zh-CN/docs/Web/API/CanvasRenderingContext2D/restore" title="restore()"><code>restore()</code></a> the canvas so we can then go on to draw the right eye view.</p>
<div class="code-example"><pre class="brush: js notranslate"><code>  <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre></div>
<div class="notecard note" id="sect4">
  <p><strong>备注：</strong> We are kind of cheating here, using a 2D canvas to approximate a 3D scene. But it keeps things simple for learning purposes. You can use the position and orientation data discussed above to modify the view rendering on any app written with web technologies. For example, our <a href="https://github.com/mdn/webvr-tests/tree/gh-pages/3Dpositionorientation" class="external" rel=" noopener">3Dpositionorientation</a> demo uses very similar code to that shown above to control the view of a WebGL scene created using <a href="https://threejs.org/" class="external" rel=" noopener">Three.js</a>.</p>
</div>
<div class="notecard note" id="sect5">
  <p><strong>备注：</strong> The <a href="https://github.com/mdn/webvr-tests/blob/gh-pages/positionsensorvrdevice/index.html#L106-L119" class="external" rel=" noopener">code for <code>drawCrosshairs()</code></a> is very simple in comparison to <code>drawImages()</code>, so we'll leave you to study that for yourself if you're interested!</p>
</div></div><h3 id="fullscreen_全屏控制"><a href="#fullscreen_全屏控制" title="Permalink to Fullscreen 全屏控制">Fullscreen 全屏控制</a></h3><div><p>The VR effect is much more effective if you set your app runnning in <a href="/en-US/docs/Web/API/Fullscreen_API" class="only-in-en-us" title="Currently only available in English (US)">fullscreen mode (en-US)</a> — this generally means setting your <a href="/zh-CN/docs/Web/HTML/Element/canvas"><code>&lt;canvas&gt;</code></a> element to fullscreen when a specific event occurs — such as double-clicking the display or pressing a specific button.</p>
<p>In this case I have just kept things simple, running a <code>fullScreen()</code> function when the canvas is clicked:</p>
<div class="code-example"><pre class="brush: js notranslate"><code>myCanvas<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span>fullScreen<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>The <code>fullScreen()</code> function checks which version of the <code>requestFullscreen()</code> method is present on the canvas (this will differ by browser) and then calls the appropriate one, for maximum compatibility:</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">function</span> <span class="token function">fullScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>myCanvas<span class="token punctuation">.</span>requestFullscreen<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    myCanvas<span class="token punctuation">.</span><span class="token function">requestFullscreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>myCanvas<span class="token punctuation">.</span>msRequestFullscreen<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    myCanvas<span class="token punctuation">.</span><span class="token function">msRequestFullscreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>myCanvas<span class="token punctuation">.</span>mozRequestFullScreen<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    myCanvas<span class="token punctuation">.</span><span class="token function">mozRequestFullScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>myCanvas<span class="token punctuation">.</span>webkitRequestFullscreen<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    myCanvas<span class="token punctuation">.</span><span class="token function">webkitRequestFullscreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div><h2 id="calibrating_field_of_view_and_device_orientation_对_fov_与设备姿态进行归零显示"><a href="#calibrating_field_of_view_and_device_orientation_对_fov_与设备姿态进行归零显示" title="Permalink to Calibrating field of view and device orientation 对 FOV 与设备姿态进行归零显示">Calibrating field of view and device orientation 对 FOV 与设备姿态进行归零显示</a></h2><div><p>I've not given much thought to this in my current demo, but in commercial apps you'll need to do some user calibration to make sure your app is working for the user and their particular VR hardware. The WebVR API has a number of features to aid in this.</p>
<p>First of all, you can use the <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/PositionSensorVRDevice/resetSensor"><code>PositionSensorVRDevice.resetSensor</code> <small>(en-US)</small></a> method to reset the HMD position orientation. Effectively what it does is to set the current position/orientation of the headset to 0. So you need to ensure it is held in a sensible 0 position before running the function. In our positionsensorvrdevice demo, you can play with it using our "Reset Sensor" button:</p>
<div class="code-example"><pre class="brush: html notranslate"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>Reset Sensor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div>
<div class="code-example"><pre class="brush: js notranslate"><code>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  gPositionSensor<span class="token punctuation">.</span><span class="token function">resetSensor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>The other thing to calibrate is the field of view (FOV) of your headset — how much of the scene can be seen in the up, right, down and left directions. This information can be retrieved for each eye separately using the <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/HMDVRDevice/getEyeParameters"><code>HMDVRDevice.getEyeParameters</code> <small>(en-US)</small></a> method, which returns parameters for each eye separately (you need to call it twice, once with a parameter of <code>left</code>, and once with a parameter of <code>right</code>.) This returns a <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/VREyeParameters"><code>VREyeParameters</code> <small>(en-US)</small></a> object for each eye.</p>
<p>As an example, you could retrieve the current field of view for an eye using <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/VREyeParameters/fieldOfView"><code>VREyeParameters.currentFieldOfView</code> <small>(en-US)</small></a>. This returns a <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/VRFieldOfView"><code>VRFieldOfView</code> <small>(en-US)</small></a> object containing four properties:</p>
<ul>
  <li><a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/VRFieldOfView/upDegrees"><code>upDegrees</code> <small>(en-US)</small></a>: The number of degrees upwards that the field of view extends in.</li>
  <li><a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/VRFieldOfView/rightDegrees"><code>rightDegrees</code> <small>(en-US)</small></a>: The number of degrees to the right that the field of view extends in.</li>
  <li><a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/VRFieldOfView/downDegrees"><code>downDegrees</code> <small>(en-US)</small></a>: The number of degrees downwards that the field of view extends in.</li>
  <li><a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/VRFieldOfView/leftDegrees"><code>leftDegrees</code> <small>(en-US)</small></a>: The number of degrees to the left that the field of view extends in.</li>
</ul>
<p>The field of view created is a pyramid shape, the apex of which is emanating from the eye.</p>
<p>You could check whether the user has a suitable field of view for your app, and if not, set a new field of view using <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/HMDVRDevice/setFieldOfView"><code>HMDVRDevice.setFieldOfView</code> <small>(en-US)</small></a> method. A simple function to handle this might look like so:</p>
<div class="code-example"><pre class="brush: js notranslate"><code><span class="token keyword">function</span> <span class="token function">setCustomFOV</span><span class="token punctuation">(</span><span class="token parameter">up<span class="token punctuation">,</span>right<span class="token punctuation">,</span>down<span class="token punctuation">,</span>left</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> testFOV <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VRFieldOfView</span><span class="token punctuation">(</span>up<span class="token punctuation">,</span>right<span class="token punctuation">,</span>down<span class="token punctuation">,</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>

  gHMD<span class="token punctuation">.</span><span class="token function">setFieldOfView</span><span class="token punctuation">(</span>testFOV<span class="token punctuation">,</span>testFOV<span class="token punctuation">,</span><span class="token number">0.01</span><span class="token punctuation">,</span><span class="token number">10000.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>This function accepts the four degree values as arguments, then creates a new <a class="only-in-en-us" title="Currently only available in English (US)" href="/en-US/docs/Web/API/VRFieldOfView"><code>VRFieldOfView</code> <small>(en-US)</small></a> object using the VRFieldOfView() constructor. This is then fed into <code>setFieldOfView()</code> as the first two arguments (the FOV for the left eye and the right eye). The third and fourth arguments are the <code>zNear</code> and <code>zFar</code> values — how close and far away from the eye an object can be in the direction of the FOV and still be inside it.</p></div></article><aside class="metadata"><div class="metadata-content-container"><div id="on-github" class="on-github"><h3>Found a problem with this page?</h3><ul><li><a href="https://github.com/mdn/translated-content/edit/main/files/zh-cn/web/api/webvr_api/using_the_webvr_api/index.md" title="You're going to need to sign in to GitHub first (Opens in a new tab)" target="_blank" rel="noopener noreferrer">Edit on <b>GitHub</b></a></li><li><a href="https://github.com/mdn/translated-content/blob/main/files/zh-cn/web/api/webvr_api/using_the_webvr_api/index.md" title="Folder: zh-cn/web/api/webvr_api/using_the_webvr_api (Opens in a new tab)" target="_blank" rel="noopener noreferrer">Source on <b>GitHub</b></a></li><li><a href="https://github.com/mdn/translated-content/issues/new?body=MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FWebVR_API%2FUsing_the_WebVR_API%0A%0A%23%23%23%23+What+information+was+incorrect%2C+unhelpful%2C+or+incomplete%3F%0A%0A%0A%23%23%23%23+Specific+section+or+headline%3F%0A%0A%0A%23%23%23%23+What+did+you+expect+to+see%3F%0A%0A%0A%23%23%23%23+Did+you+test+this%3F+If+so%2C+how%3F%0A%0A%0A%3C%21--+Do+not+make+changes+below+this+line+--%3E%0A%3Cdetails%3E%0A%3Csummary%3EMDN+Content+page+report+details%3C%2Fsummary%3E%0A%0A*+Folder%3A+%60zh-cn%2Fweb%2Fapi%2Fwebvr_api%2Fusing_the_webvr_api%60%0A*+MDN+URL%3A+https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FWebVR_API%2FUsing_the_WebVR_API%0A*+GitHub+URL%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Ftranslated-content%2Fblob%2Fmain%2Ffiles%2Fzh-cn%2Fweb%2Fapi%2Fwebvr_api%2Fusing_the_webvr_api%2Findex.md%0A*+Last+commit%3A+https%3A%2F%2Fgithub.com%2Fmdn%2Ftranslated-content%2Fcommit%2F921c46a374ab0a9f4cc809af0370f8c412e54701%0A*+Document+last+modified%3A+2022-10-01T03%3A41%3A16.000Z%0A%0A%3C%2Fdetails%3E&amp;title=Issue+with+%22Using+the+WebVR+API%22%3A+%28short+summary+here+please%29&amp;labels=needs-triage%2Cl10n-zh" title="This will take you to https://github.com/mdn/content to file a new issue" target="_blank" rel="noopener noreferrer">Report a problem with this content on <b>GitHub</b></a></li><li>Want to fix the problem yourself? See<!-- --> <a href="https://github.com/mdn/content/blob/main/README.md" target="_blank" rel="noopener noreferrer">our Contribution guide</a>.</li></ul></div><p class="last-modified-date"><b>Last modified:</b> <time datetime="2022-10-01T03:41:16.000Z">Oct 1, 2022</time>,<!-- --> <a href="/zh-CN/docs/Web/API/WebVR_API/Using_the_WebVR_API/contributors.txt">by MDN contributors</a></p><form class="language-menu"><fieldset id="select-language"><legend>Change your language</legend><label for="language-selector" class="visually-hidden">Select your preferred language</label> <select id="language-selector" name="language"><option selected="" value="zh-CN">中文 (简体)</option><option value="en-US">English (US)</option><option value="es">Español</option><option value="ja">日本語</option><option value="pt-BR">Português (do&nbsp;Brasil)</option><option value="ru">Русский</option></select> <button type="submit" class="button minimal">Change language</button></fieldset></form></div></aside></main></div><footer id="nav-footer" class="page-footer"><div class="content-container"><div class="page-footer-logo"><a href="/zh-CN/" class="logo" aria-label="MDN Web Docs"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 451.74 135" fill="#fff"><path d="M7.14 8.35v111.06h111.05V8.35zm103.71 56c-.48.92-1 1.79-1.46 2.71a3.44 3.44 0 01-3.54 2 2.4 2.4 0 00-1.55.5c-1.37.9-2.76 1.79-4.18 2.63a7.33 7.33 0 01-6.35.34 29.71 29.71 0 00-10.63-2 11.7 11.7 0 00-9.46 4.31 14.84 14.84 0 00-2.13 4.29c-1.24 3.07-2.3 21.38-2.3 26.05 0 0-17.62-3.42-34.15-20.34l4.31-11.32h-13.5l9.76-10.35h-16.8l9.77-10.34H12.69L30.45 34a40.9 40.9 0 0119.77-10.83c7.1-1.22 8.93-.53 13.31.77l2.43.73.85.25 3.1.95a12.56 12.56 0 006.21.09 11.37 11.37 0 018.25 1 8.24 8.24 0 014.1 6.22 7.29 7.29 0 003.61 5.49 59.45 59.45 0 009.32 4.11c2.27.86 4.54 1.84 6.79 2.72a6.81 6.81 0 012.86 2.06 4.81 4.81 0 011.1 2.73c.14 2 .37 4 .47 6a15.24 15.24 0 01-1.77 8.03zM320.12 39.62a5.42 5.42 0 00-4.53 2.13 7.36 7.36 0 00-1.7 4.43v2.36a6.28 6.28 0 001.7 4.46 5.63 5.63 0 004.3 1.82 5.12 5.12 0 004.57-2.27A9.7 9.7 0 00326 47a8.11 8.11 0 00-1.67-5.52 5.36 5.36 0 00-4.21-1.86zM387.38 39.53a5.52 5.52 0 00-4.7 2.15 8.8 8.8 0 00-1.63 5.49 9.23 9.23 0 001.58 5.45 5.38 5.38 0 004.7 2.25 5.61 5.61 0 004.74-2.2 8.91 8.91 0 001.68-5.59 8.24 8.24 0 00-1.75-5.52 5.76 5.76 0 00-4.62-2.03zM299.47 41.35a4.34 4.34 0 00-4-1.92 4.55 4.55 0 00-3.89 1.73 8.37 8.37 0 00-1.58 4.17h10.48a6.3 6.3 0 00-1.01-3.98zM357.74 30.75H352v23.31h5.72q5.47 0 8.35-3t2.93-8.65q0-5.43-2.88-8.55t-8.38-3.11z"></path><path d="M121.55 8.35v70.8h323V8.35zm42.21 22.45h-4V54h3.68v3.73h-11.25V54h3.31V36.79h-.19l-9.63 19.12h-2.12l-10-19.4h-.19V54h3.45v3.73h-11.15V54h3.68V30.8h-4v-3.73H133l11.66 22.56h.19l11.18-22.56h7.7zm29.12 22.67q-4.11 4.28-11.38 4.28h-14.06v-3.69h3.73V30.75h-3.73v-3.68h13.83q7.59 0 11.66 4.29a15.4 15.4 0 014 11 15.33 15.33 0 01-4.05 11.11zm38.89-22.67h-3.68v27h-2.6L208.08 35h-.19v19h4.67v3.73h-12.22V54h3.49V30.8h-4v-3.73h7.08l16.9 22.09h.19V30.8h-4.58v-3.73h12.32zm43.8 27h-3.31l-7.83-23.18h-.19l-7.55 23.18h-3.35l-8.78-27h-2.65v-3.73H253v3.73h-3.87L255 50.71h.23l6.61-19.91H259v-3.73h11v3.73h-2.78l6.61 20.1h.23l5.43-20.1h-4.15v-3.73h11v3.73h-2.54zm26.71-1.51a9.66 9.66 0 01-6.42 2 10.2 10.2 0 01-7.41-2.74c-1.89-1.82-2.83-4.47-2.83-7.93a12.37 12.37 0 012.64-8.12 9 9 0 017.32-3.21 8.62 8.62 0 016.75 2.69 9.65 9.65 0 012.45 6.52 13.67 13.67 0 01-.28 2.69H290q.29 6.71 6.18 6.7a5.2 5.2 0 003.71-1.18 5.82 5.82 0 001.67-2.83l3.45.71a7.21 7.21 0 01-2.73 4.65zm25.77-1.63c-1.51 2.4-3.92 3.61-7.22 3.61s-5.84-1.29-7.22-3.87c0 .25-.1.82-.21 1.7s-.19 1.44-.22 1.7H309c.16-1 .31-2 .47-3.07a21.42 21.42 0 00.24-3.16v-23h-3.4v-3.3h7.55V40.9a9.76 9.76 0 012.67-3.28 7.33 7.33 0 014.74-1.4 8.48 8.48 0 016.5 2.78q2.55 2.74 2.55 7.74a14.6 14.6 0 01-2.27 7.87zm41.39-1.14q-4.11 4.28-11.37 4.28H344v-3.74h3.73V30.75H344v-3.68h13.83q7.59 0 11.66 4.29a15.41 15.41 0 014.06 11 15.34 15.34 0 01-4.11 11.11zm25.65 1.68a10.53 10.53 0 01-7.9 3.07 10 10 0 01-7.63-3 10.93 10.93 0 01-2.8-7.83 12.13 12.13 0 012.69-7.93q2.69-3.3 8-3.3t8 3.28a12 12 0 012.64 7.76 10.86 10.86 0 01-3 7.9zm22.61.57c-1.4 1.66-3.63 2.5-6.68 2.5a9.58 9.58 0 01-7.15-2.76q-2.72-2.76-2.71-7.91a12.25 12.25 0 012.69-8 9.17 9.17 0 017.5-3.28 15 15 0 013.82.48 10.37 10.37 0 013.5 1.65l.85 5.47-3.35.38-.76-3.54a8.07 8.07 0 00-4.11-1 4.9 4.9 0 00-4.39 2.15 9.93 9.93 0 00-1.41 5.55 8.9 8.9 0 001.5 5.38 5.23 5.23 0 004.44 2c2.92 0 4.67-1.7 5.23-5.1l3.5.71a10.34 10.34 0 01-2.47 5.27zm20.48.75a11.68 11.68 0 01-6.63 1.75 15.52 15.52 0 01-8.26-2.08L424 51l3.26.33-.1 2.74a7 7 0 002.06.66 12.63 12.63 0 002.19.19 8.68 8.68 0 003.66-.75 2.5 2.5 0 001.63-2.36 2.25 2.25 0 00-1.32-2.2 12.65 12.65 0 00-3.28-1 47.39 47.39 0 01-3.9-.82 7.5 7.5 0 01-3.25-1.7 4.67 4.67 0 01-1.33-3.66c0-2.36.88-4 2.62-4.91a12 12 0 015.6-1.37 15 15 0 014.08.55 16.65 16.65 0 013.47 1.39l.47 5.1-3.3.37-.48-3.3a9.5 9.5 0 00-4.06-.9 5.62 5.62 0 00-2.87.66 2.33 2.33 0 00-1.15 2.25 2.13 2.13 0 001.3 2.07 11.91 11.91 0 003.21.92 36.69 36.69 0 013.82.83 7.46 7.46 0 013.21 1.74 4.9 4.9 0 011.3 3.73 5.56 5.56 0 01-2.66 4.91z"></path><path d="M181.17 30.75h-5.71v23.31h5.71q5.47 0 8.36-3t2.88-8.61q0-5.43-2.88-8.55t-8.36-3.15zM121.63 119.32V81.74h114.91v37.58zM153.22 109h-2v-6.85a4.8 4.8 0 00-1.58-4 5.57 5.57 0 00-3.55-1.26 5 5 0 00-4.92 3.26 4.19 4.19 0 00-1.88-2.46 5.82 5.82 0 00-3-.8 4.89 4.89 0 00-4.56 2.56v-2.21h-6.28v3.26h2v8.5h-2v3.23h9.11V109h-2.86v-5.25a4.4 4.4 0 01.69-2.56 2.47 2.47 0 012.21-1q2.57 0 2.56 3.63v8.41h6.29V109h-2v-5.25a4.47 4.47 0 01.67-2.56 2.42 2.42 0 012.19-1q2.63 0 2.63 3.63v8.41h6.28zm9.88-12.07q-4 0-6 2.36a8.41 8.41 0 00-2 5.66 7.25 7.25 0 002.17 5.62 8 8 0 005.65 2 8.54 8.54 0 005.94-2.11 7.27 7.27 0 002.34-5.67 8.21 8.21 0 00-2-5.51q-2.07-2.34-6.1-2.34zm-.1 12.35a3 3 0 01-2.63-1.33 5.68 5.68 0 01-.9-3.26 5 5 0 011-3.28 3.23 3.23 0 012.61-1.18 3.5 3.5 0 012.59 1.08 4.56 4.56 0 011.07 3.31 5.21 5.21 0 01-1 3.41 3.33 3.33 0 01-2.74 1.25zm25-2.3l-3.39-.29-.7 2.32H179l8.32-9.54-.32-2.23h-13.19l-.53 5.25 3.16.34.67-2.36h4.65l-8.25 9.53.44 2.26h13.13zm7.62-9.74h-4.46v5.39h4.46zm0 9.61h-4.46v5.39h4.46zm13.54-17.49h-4.23l-6.48 22.88h4.22zm8.68 0h-4.23l-6.45 22.88h4.19zm15 22.51l-.07-2.26a1.22 1.22 0 01-.56.1c-.69 0-1-.39-1-1.16v-6.49a4.39 4.39 0 00-1.8-3.84 7 7 0 00-4.16-1.28 14.55 14.55 0 00-3.16.3 24.14 24.14 0 00-3.29 1.06l-.56 3.46 3.39.4.5-1.69a2.78 2.78 0 011.08-.37 11.3 11.3 0 011.25-.07c1.19 0 1.89.37 2.09 1.1a8.55 8.55 0 01.3 2.26v.5a8.91 8.91 0 00-1.18-.11h-1.21a12.64 12.64 0 00-4.81.88 3.53 3.53 0 00-2.18 3.64 3.66 3.66 0 001.48 3.33 5.63 5.63 0 003.11 1 4.67 4.67 0 003-.91 6.78 6.78 0 001.8-2 3 3 0 003.33 3 5.54 5.54 0 002.66-.85zm-9.25-2.32a1.69 1.69 0 01-1.36-.52 1.81 1.81 0 01-.43-1.21 1.67 1.67 0 01.86-1.68 4.63 4.63 0 012-.42 7.69 7.69 0 011.07.07l1.06.13a3.58 3.58 0 01-1.08 2.74 3.24 3.24 0 01-2.11.89z"></path></svg></a></div><ul class="link-list-mdn"><li><a href="/zh-CN/docs/Web">Web Technologies</a></li><li><a href="/zh-CN/docs/Learn">Learn Web Development</a></li><li><a href="/zh-CN/docs/MDN/About">About MDN</a></li><li><a href="/zh-CN/docs/MDN/Feedback">Feedback</a></li></ul><ul class="link-list-moz"><li><a href="https://www.mozilla.org/about/" target="_blank" rel="noopener noreferrer">About</a></li><li><a href="https://shop.spreadshirt.com/mdn-store/" target="_blank" rel="noopener noreferrer">MDN Web Docs Store</a></li><li><a href="https://www.mozilla.org/contact/" target="_blank" rel="noopener noreferrer">Contact Us</a></li><li><a href="https://www.mozilla.org/firefox/?utm_source=developer.mozilla.org&amp;utm_campaign=footer&amp;utm_medium=referral" target="_blank" rel="noopener noreferrer">Firefox</a></li></ul><div class="social social-mdn"><h4>MDN</h4><ul><li><a class="social-icon twitter" href="https://twitter.com/mozdevnet" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">MDN on Twitter</span></a></li><li><a class="social-icon github" href="https://github.com/mdn/" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">MDN on Github</span></a></li></ul></div><div class="social social-moz"><h4>Mozilla</h4><ul><li><a class="social-icon twitter" href="https://twitter.com/mozilla" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">Mozilla on Twitter</span></a></li><li><a class="social-icon instagram" href="https://www.instagram.com/mozillagram/" target="_blank" rel="noopener noreferrer"><span class="visually-hidden">Mozilla on Instagram</span></a></li></ul></div><p id="license" class="footer-license">© 2005-<!-- -->2022<!-- --> Mozilla and individual contributors. Content is available under<!-- --> <a href="/docs/MDN/About#Copyrights_and_licenses">these licenses</a>.</p><ul class="footer-legal"><li><a href="https://www.mozilla.org/about/legal/terms/mozilla" target="_blank" rel="noopener noreferrer">Terms</a></li><li><a href="https://www.mozilla.org/privacy/websites/" target="_blank" rel="noopener noreferrer">Privacy</a></li><li><a href="https://www.mozilla.org/privacy/websites/#cookies" target="_blank" rel="noopener noreferrer">Cookies</a></li></ul></div></footer><div class="page-overlay hidden"></div></div><script type="application/json" id="hydration">{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"Using the WebVR API","mdn_url":"/zh-CN/docs/Web/API/WebVR_API/Using_the_WebVR_API","locale":"zh-CN","native":"中文 (简体)","sidebarHTML":"","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>\n  The <a href=\"/zh-CN/docs/Web/API/WebVR_API\">WebVR API</a> is a fantastic addition to the web developer's toolkit, allowing access to virtual reality hardware such as the <a href=\"https://developer.oculus.com/\" class=\"external\" rel=\" noopener\">Oculus Rift</a>, and converting outputted movement and orientation data into view rendering updates on a web app. But how do you get started in developing VR apps for the Web? This article will guide you through the basics.\n  <a href=\"/zh-CN/docs/Web/API/WebVR_API\">WebVR API</a> 对于 web 开发者来说，是一个令人心动的功能包，允许你连接到类似于<a href=\"https://developer.oculus.com/\" class=\"external\" rel=\" noopener\">Oculus Rift</a> 这样的虚拟现实硬件，并且能够在你的 web app 中，将从硬件获取到的位置移动数据和姿态角数据，实时更新你的渲染显示输出。具体要如何在 Web 上开始开发你的 VR app 呢？这篇文章将会提供基础的引导信息。\n</p>\n<div class=\"notecard note\" id=\"sect1\">\n  <p>\n    <strong>备注：</strong> Currently WebVR is at an experimental stage (you can find the <a href=\"http://mozvr.github.io/webvr-spec/webvr.html\" class=\"external\" rel=\" noopener\">latest spec here</a>); it currently works best in Firefox Nightly/Developer Edition, with some aspects of it also working in Google Chrome. Read <a href=\"http://blog.tojicode.com/2014/07/bringing-vr-to-chrome.html\" class=\"external\" rel=\" noopener\">Bringing VR to Chrome</a> by Brandon Jones for more details on that.\n    注意：当前 WebVR 还是体验实验阶段（你可以从<a href=\"http://mozvr.github.io/webvr-spec/webvr.html\" class=\"external\" rel=\" noopener\">这里</a>找到最新规格说明）；它已经在 Firefox Nightly/Developer Edition 的版本上工作的很好了，部分功能也在 Google Chrome 上可以正常工作了。详细请访问由 Brandon Jones 在 <a href=\"http://blog.tojicode.com/2014/07/bringing-vr-to-chrome.html\" class=\"external\" rel=\" noopener\">Bringing VR to Chrome</a>提供的更多内容。\n  </p>\n</div>"}},{"type":"prose","value":{"id":"起步","title":"起步","isH3":false,"content":"<p>\n  To get started, you need to have your VR hardware set up as recommended in the owner's manual, and your computer set up as indicated in <a href=\"/zh-CN/docs/Web/API/WebVR_API/WebVR_environment_setup\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">WebVR environment setup</a>. A dedicated GPU is recommended for smoother performance.\n  你需要先准备好一个已经配置好 VR 硬件，并且还需要完成 <a href=\"/zh-CN/docs/Web/API/WebVR_API/WebVR_environment_setup\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">WebVR 环境的安装</a>。 当然，若想要保证很平滑的体验，你需要配置一个足够好的 GPU 显卡。\n</p>\n<p>\n  You also need to have <a href=\"https://nightly.mozilla.org/\" class=\"external\" rel=\" noopener\">Firefox Nightly</a> (or <a href=\"https://www.mozilla.org/en-US/firefox/developer/\" class=\"external\" rel=\" noopener\">Developer Edition</a>) installed, along with the <a href=\"http://www.mozvr.com/downloads/webvr-addon-0.1.0.xpi\" class=\"external\" rel=\" noopener\">WebVR Enabler Add-on</a>\n  安装好 <a href=\"https://nightly.mozilla.org/\" class=\"external\" rel=\" noopener\">Firefox Nightly</a> (或 <a href=\"https://www.mozilla.org/en-US/firefox/developer/\" class=\"external\" rel=\" noopener\">Developer Edition</a>)，以及 <a href=\"http://www.mozvr.com/downloads/webvr-addon-0.1.0.xpi\" class=\"external\" rel=\" noopener\">WebVR Enabler Add-on</a>\n</p>\n<p>\n  Once your environment is set up, try visiting one of our <a href=\"http://mozvr.com/projects/\" class=\"external\" rel=\" noopener\">MozVR projects</a> and clicking on the \"Enter VR\" button to test it out.\n  设置好环境后，请尝试访问我们直接可在线运行的工程项目 <a href=\"http://mozvr.com/projects/\" class=\"external\" rel=\" noopener\">MozVR projects</a> ，点击“Enter VR” 按钮，就可以开始测试你的环境了。\n</p>\n<div class=\"notecard note\" id=\"sect2\">\n  <p>\n    <strong>备注：</strong> For more in depth information, be sure to check out <a href=\"/zh-CN/docs/Web/API/WebVR_API/WebVR_environment_setup\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">WebVR environment setup</a>.\n    注意：更深层次的信息，请 check out <a href=\"/zh-CN/docs/Web/API/WebVR_API/WebVR_environment_setup\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">WebVR environment setup</a> 以获取更详细的内容。\n  </p>\n</div>\n<div class=\"notecard note\" id=\"sect3\">\n  <p>\n    <strong>备注：</strong> There are also cheaper options available such as using a mobile device for the head mounted display (in this case you won't have a position sensor available, so you might have to fake the orientation data using the <a href=\"/zh-CN/docs/Web/Apps/Build/gather_and_modify_data/responding_to_device_orientation_changes\">deviceorientation API</a> instead perhaps.)\n    注意：你也可以使用更便宜的方式，比如使用一个手机设备来实现头部显示功能（只是这种情况下，你将没有空间位置追踪传感器相关的功能，将只能使用姿态角数据相关的 API <a href=\"/zh-CN/docs/Web/Apps/Build/gather_and_modify_data/responding_to_device_orientation_changes\">deviceorientation API</a> 。）\n  </p>\n</div>"}},{"type":"prose","value":{"id":"introducing_a_simple_demo简单示例介绍","title":"Introducing a simple demo<br>简单示例介绍","isH3":false,"content":"<p>\n  There are a number of WebVR demos available at the <a href=\"https://github.com/MozVR/\" class=\"external\" rel=\" noopener\">MozVR team repo</a>, and the <a href=\"https://github.com/mdn/webvr-tests\" class=\"external\" rel=\" noopener\">MDN webvr-tests repo</a>, but the main one we will be focusing on in this article is our <a href=\"https://github.com/mdn/webvr-tests/tree/gh-pages/positionsensorvrdevice\" class=\"external\" rel=\" noopener\">positionsensorvrdevice</a> demo (<a href=\"https://mdn.github.io/webvr-tests/positionsensorvrdevice/\" class=\"external\" rel=\" noopener\">view it live</a>):\n  在<a href=\"https://github.com/MozVR/\" class=\"external\" rel=\" noopener\">MozVR team repo</a>和<a href=\"https://github.com/mdn/webvr-tests\" class=\"external\" rel=\" noopener\">MDN webvr-tests repo</a>提供了一定数量的 WebVR 示例，在这篇文章里，我们将着重关注我们的 <a href=\"https://github.com/mdn/webvr-tests/tree/gh-pages/positionsensorvrdevice\" class=\"external\" rel=\" noopener\">positionsensorvrdevice</a> 提供的示例 (点此访问 live <a href=\"https://mdn.github.io/webvr-tests/positionsensorvrdevice/\" class=\"external\" rel=\" noopener\">view it live</a>)\n</p>\n<p>\n  <img src=\"https://mdn.mozillademos.org/files/10797/vrpositionsensor-demo.png\" alt=\"\" loading=\"lazy\">\n</p>\n<p>\n  This is a simple 2.5D demo showing a Firefox logo seen on a left and right eye view, rendered on <a href=\"/zh-CN/docs/Web/HTML/Element/canvas\">HTML5 Canvas</a>. When you view the demo with a VR HMD and click the canvas, the demo will go fullscreen, and you'll be able to approach the Firefox logo. It will move realistically as you move your head towards and away from it, up and down and side to side, and rotate your head in any direction.\n  这是一个简单的 2.5D 的示例，在左右眼两个区域，以<a href=\"/zh-CN/docs/Web/HTML/Element/canvas\">HTML5 Canvas</a>的方式，同时渲染了 Firefox 的 LOGO。当你使用 VR 头显来观看这个示例时，点击画面，这个 DEMO 就会切换到全屏形式，可以尝试靠近 Firefox 图标。将会非常真实地同步你的头部运动后应该看到的内容，包括可以上下移动、左右移动、转动你的头部看想看的方向。\n</p>\n<p>\n  The demo was deliberately kept simple so that you can easily see what is going on with the WebVR code. The API is simple enough that you can easily apply WebVR-controlled movement to any app you like, from simple DOM-based interfaces to complex WebGL scenes.\n  这个示例程序特意做成足够地简单，以便于你可以更容易地了解 WebVR 代码的工作过程。从代码中你可以看到，这些 API 足够的简单，你可以轻松地将这些 WebVR 控制移动和转动的能力，移植到新的应用功能中，比如一个简单的使用 WebGL 来显示的基于 DOM 接口的应用。\n</p>","titleAsText":"Introducing a simple demo简单示例介绍"}},{"type":"prose","value":{"id":"how_does_the_app_workapp_是怎样工作的呢？","title":"How does the app work?<br>app 是怎样工作的呢？","isH3":false,"content":"<p>\n  In this section we'll go through the different parts of the code that make the app work, so you can see what's required at a basic level.\n  本章节，我们将通过不同形式的代码来运行，从而你可以了解到哪些东西是最基础的。\n</p>","titleAsText":"How does the app work?app 是怎样工作的呢？"}},{"type":"prose","value":{"id":"accessing_the_vr_devices连接并访问_vr_设备","title":"Accessing the VR devices<br>连接并访问 VR 设备","isH3":true,"content":"<p>\n  The first thing to do is get a programmatic reference to the VR hardware connected to your computer. This is done using <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Navigator/getVRDisplays\"><code>Navigator.getVRDevices</code> <small>(en-US)</small></a>, which returns a promise that resolves to an array of all the vr devices connected to your computer.\n  首先，你需要获取连接到你当前电脑的 VR 硬件的程序对象的引用。通过调用<a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/Navigator/getVRDisplays\"><code>Navigator.getVRDevices</code> <small>(en-US)</small></a>这个 API，可以获取到已经连接到当前电脑的 VR 设备的数组。\n</p>\n<p>\n  There are two kinds of object that may be returned:\n  可能返回两种类型的对象：\n</p>\n<ul>\n  <li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PositionSensorVRDevice\"><code>PositionSensorVRDevice</code> <small>(en-US)</small></a>: A position sensor camera.</li>\n  <li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PositionSensorVRDevice\"><code>PositionSensorVRDevice</code> <small>(en-US)</small></a>：带空间位置定位的传感器摄像头。</li>\n  <li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/HMDVRDevice\"><code>HMDVRDevice</code> <small>(en-US)</small></a>: A VR head mounted display.</li>\n  <li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/HMDVRDevice\"><code>HMDVRDevice</code> <small>(en-US)</small></a>：VR 头显设备。</li>\n</ul>\n<p>\n  You can see some very simple code showing the kind of basic device information that can be returned in our <a href=\"https://github.com/mdn/webvr-tests/tree/gh-pages/vrdevice\" class=\"external\" rel=\" noopener\">vrdevice demo</a>.\n  在 <a href=\"https://github.com/mdn/webvr-tests/tree/gh-pages/vrdevice\" class=\"external\" rel=\" noopener\">vrdevice demo</a> 中，使用简单代码即可以获取设备基础信息。\n</p>\n<p>\n  However, what you really want is something that grabs a pair of devices (perhaps many pairs in multiplayer VR games of the future). The following code taken from the WebVR spec (and also used in the <a href=\"https://github.com/mdn/webvr-tests/tree/gh-pages/positionsensorvrdevice\" class=\"external\" rel=\" noopener\">positionsensorvrdevice</a> demo) does the trick pretty well:\n  当然，若你需要同时获取多套 VR 设备的信息（可能是将来多个玩家的多套设备），WebVR 说明书中包含的以下代码会更适合你来参考（在 <a href=\"https://github.com/mdn/webvr-tests/tree/gh-pages/positionsensorvrdevice\" class=\"external\" rel=\" noopener\">positionsensorvrdevice</a> 示例代码中也有使用这段代码逻辑）。\n</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> gHMD<span class=\"token punctuation\">,</span> gPositionSensor<span class=\"token punctuation\">;</span>\n\nnavigator<span class=\"token punctuation\">.</span><span class=\"token function\">getVRDevices</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">devices</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> devices<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> <span class=\"token operator\">++</span>i<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>devices<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">HMDVRDevice</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      gHMD <span class=\"token operator\">=</span> devices<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>gHMD<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> devices<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> <span class=\"token operator\">++</span>i<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>devices<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">PositionSensorVRDevice</span> <span class=\"token operator\">&amp;&amp;</span> devices<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>hardwareUnitId <span class=\"token operator\">===</span> gHMD<span class=\"token punctuation\">.</span>hardwareUnitId<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        gPositionSensor <span class=\"token operator\">=</span> devices<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>\n  Here we grab the first instance we find of an <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/HMDVRDevice\"><code>HMDVRDevice</code> <small>(en-US)</small></a> and store it in the <code>gHMD</code> variable. Next, we grab the first instance we find of a <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PositionSensorVRDevice\"><code>PositionSensorVRDevice</code> <small>(en-US)</small></a> and store it in the <code>gPositionSensor</code> variable, but only if its <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/VRDisplay\"><code>VRDevice.hardWareUnitId</code> <small>(en-US)</small></a> property matches that of the <code>gHMD</code> object. Separate devices that are part of the same overall hardware unit will share a hardware unit ID — this is how you check that you've got references to two matching devices.\n  这段代码，先获取第一个找到 <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/HMDVRDevice\"><code>HMDVRDevice</code> <small>(en-US)</small></a> 类型的对象引用，赋值给 gHMD 变量。若获取到了，然后，再找到一个 <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PositionSensorVRDevice\"><code>PositionSensorVRDevice</code> <small>(en-US)</small></a> 类型的对象引用，并且它与 gHMD 的 <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/VRDisplay\"><code>VRDevice.hardWareUnitId</code> <small>(en-US)</small></a> 属性值相同时，即找到配对的对象，赋值给<code>gPositionSensor 变量。同一套设备单元中的多个分离的设备会共享他们的</code> hardware unit ID，可以依此来检测两个设备对象是否是同一套。\n</p>","titleAsText":"Accessing the VR devices连接并访问 VR 设备"}},{"type":"prose","value":{"id":"initialising_the_app_初始化_app","title":"Initialising the app 初始化 APP","isH3":true,"content":"<p>\n  The scene is rendered on a <a href=\"/zh-CN/docs/Web/HTML/Element/canvas\"><code>&lt;canvas&gt;</code></a> element, created and placed as follows:\n  场景最终是通过 <a href=\"/zh-CN/docs/Web/HTML/Element/canvas\"><code>&lt;canvas&gt;</code></a> 标记元素来显示。canvas 画布可通过以下 JS 代码来创建。\n</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> myCanvas <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'canvas'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> ctx <span class=\"token operator\">=</span> myCanvas<span class=\"token punctuation\">.</span><span class=\"token function\">getContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">'2d'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> body <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'body'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nbody<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>myCanvas<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>\n  Next, we create a new <a href=\"/zh-CN/docs/Web/API/HTMLImageElement\">image</a> and use a <code><a href=\"/en-US/docs/Web/API/Window/load_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">load (en-US)</a></code> event to check that the image is loaded before running <code>draw()</code>, the <a href=\"/zh-CN/docs/Games/Anatomy#building_a_main_loop_in_javascript\">main loop</a> for our app:\n  然后，我们在主渲染循环控制中，先创建一个图片对象，并且在 draw() 方法运行前，监听 <code><a href=\"/en-US/docs/Web/API/Window/load_event\" title=\"Currently only available in English (US)\" class=\"only-in-en-us\">load (en-US)</a></code> 事件回调，以检查图片是否已经被正常装载成功。\n</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> image <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Image</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nimage<span class=\"token punctuation\">.</span>src <span class=\"token operator\">=</span> <span class=\"token string\">'firefox.png'</span><span class=\"token punctuation\">;</span>\nimage<span class=\"token punctuation\">.</span>onload <span class=\"token operator\">=</span> draw<span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"the_main_loop_渲染显示主循环","title":"The main loop 渲染显示主循环","isH3":true,"content":"<p>\n  <code>draw()</code> looks like this:\n  draw() 方法的实现代码参考如下：\n</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">WIDTH</span> <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>innerWidth<span class=\"token punctuation\">;</span>\n  <span class=\"token constant\">HEIGHT</span> <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>innerHeight<span class=\"token punctuation\">;</span>\n  lCtrOffset <span class=\"token operator\">=</span> <span class=\"token constant\">WIDTH</span><span class=\"token operator\">*</span><span class=\"token number\">0.25</span><span class=\"token punctuation\">;</span>\n  rCtrOffset <span class=\"token operator\">=</span> <span class=\"token constant\">WIDTH</span><span class=\"token operator\">*</span><span class=\"token number\">0.25</span><span class=\"token punctuation\">;</span>\n\n  myCanvas<span class=\"token punctuation\">.</span>width <span class=\"token operator\">=</span> <span class=\"token constant\">WIDTH</span><span class=\"token punctuation\">;</span>\n  myCanvas<span class=\"token punctuation\">.</span>height <span class=\"token operator\">=</span> <span class=\"token constant\">HEIGHT</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">setView</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">drawImages</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">drawCrosshairs</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>draw<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>\n  The <a href=\"/zh-CN/docs/Web/API/Window\">window</a> <code>WIDTH</code> and <code>HEIGHT</code> is resampled on each frame then used to set:\n  在控制每一帧显示输出时，都有重新获取 <a href=\"/zh-CN/docs/Web/API/Window\">window</a> 窗口当前的宽、高，并依此来调整输出显示：\n</p>\n<ul>\n  <li>A left and right offset value used to keep the image drawn relative to the center of the left and right eye view. Because we are drawing two half-width copies of the scene, the center of each copy is actually a quarter of the total canvas width in from the edge, in each case.</li>\n  <li>The <a href=\"/zh-CN/docs/Web/API/HTMLCanvasElement/width\">width</a> and <a href=\"/zh-CN/docs/Web/API/HTMLCanvasElement/height\">height</a> of the canvas.</li>\n</ul>\n<p>This is done so that the scene will resize correctly whenever the browser window is resized by the user.</p>\n<p>Next in the loop we run three functions:</p>\n<ul>\n  <li><code>setView()</code> retrieves position and orientation information from the VR hardware, ready for use in drawing the updated image positions in the scene.</li>\n  <li><code>drawImages()</code> actually draws the updated image positions in the scene.</li>\n  <li><code>drawCrosshairs()</code> draws the crosshairs that remain in the center of the scene at all times.</li>\n</ul>\n<p>You'll learn more about these later on.</p>\n<p>Finally for the loop, we run <a href=\"/zh-CN/docs/Web/API/Window/requestAnimationFrame\">requestAnimationFrame(draw)</a> so that the <code>draw()</code> loop is continually run.</p>"}},{"type":"prose","value":{"id":"retrieving_position_and_orientation_information_提取位置与姿态","title":"Retrieving position and orientation information 提取位置与姿态","isH3":true,"content":"<p>Now lets study the <code>setView()</code> function in detail. We'll step through each part of the code, explaining what it all does:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">setView</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> posState <span class=\"token operator\">=</span> gPositionSensor<span class=\"token punctuation\">.</span><span class=\"token function\">getState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>First we call <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PositionSensorVRDevice/getState\"><code>PositionSensorVRDevice.getState</code> <small>(en-US)</small></a> on the reference to our position sensor. This method returns everything you might want to know about the current state of the HMD — accessible through a <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/VRPose\"><code>VRPositionState</code> <small>(en-US)</small></a> object — including its position, orientation, and more advanced information such as linear and angular velocity/acceleration.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>posState<span class=\"token punctuation\">.</span>hasPosition<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    posPara<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token string\">'Position: x'</span> <span class=\"token operator\">+</span> <span class=\"token function\">roundToTwo</span><span class=\"token punctuation\">(</span>posState<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\" y\"</span>\n                                <span class=\"token operator\">+</span> <span class=\"token function\">roundToTwo</span><span class=\"token punctuation\">(</span>posState<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\" z\"</span>\n                                <span class=\"token operator\">+</span> <span class=\"token function\">roundToTwo</span><span class=\"token punctuation\">(</span>posState<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">.</span>z<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    xPos <span class=\"token operator\">=</span> <span class=\"token operator\">-</span>posState<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">.</span>x <span class=\"token operator\">*</span> <span class=\"token constant\">WIDTH</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n    yPos <span class=\"token operator\">=</span> posState<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">.</span>y <span class=\"token operator\">*</span> <span class=\"token constant\">HEIGHT</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>posState<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">.</span>z <span class=\"token operator\">&gt;</span> <span class=\"token number\">0.01</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      zPos <span class=\"token operator\">=</span> <span class=\"token operator\">-</span>posState<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">.</span>z<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      zPos <span class=\"token operator\">=</span> <span class=\"token number\">0.01</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>In the next part, we first check to make sure valid position information is available for the HMD using <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/VRPose/position\"><code>VRPositionState.hasPosition</code> <small>(en-US)</small></a>, so that we don't return an error and stop the app working (if the HMD is switched off, or not pointing at the position sensor.)</p>\n<p>Then we output the current position information to a paragraph in the app UI for information purposes (rounded to two decimal places using a custom function to make it more readable.)</p>\n<p>Last up, we set our <code>xPos</code>, <code>yPos</code>, and <code>zPos</code> variables relative to the position information stored in <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/VRPose/position\"><code>VRPositionState.position</code> <small>(en-US)</small></a>. You'll notice that we have used an <code>if ... else</code> block to make sure the <code>zPos</code> value stays at 0.01 or above — the app was throwing an error if it went below 0.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>  <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>posState<span class=\"token punctuation\">.</span>hasOrientation<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    orientPara<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">=</span> <span class=\"token string\">'Orientation: x'</span> <span class=\"token operator\">+</span> <span class=\"token function\">roundToTwo</span><span class=\"token punctuation\">(</span>posState<span class=\"token punctuation\">.</span>orientation<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\" y\"</span>\n                                <span class=\"token operator\">+</span> <span class=\"token function\">roundToTwo</span><span class=\"token punctuation\">(</span>posState<span class=\"token punctuation\">.</span>orientation<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\" z\"</span>\n                                <span class=\"token operator\">+</span> <span class=\"token function\">roundToTwo</span><span class=\"token punctuation\">(</span>posState<span class=\"token punctuation\">.</span>orientation<span class=\"token punctuation\">.</span>z<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    xOrient <span class=\"token operator\">=</span> posState<span class=\"token punctuation\">.</span>orientation<span class=\"token punctuation\">.</span>x <span class=\"token operator\">*</span> <span class=\"token constant\">WIDTH</span><span class=\"token punctuation\">;</span>\n    yOrient <span class=\"token operator\">=</span> <span class=\"token operator\">-</span>posState<span class=\"token punctuation\">.</span>orientation<span class=\"token punctuation\">.</span>y <span class=\"token operator\">*</span> <span class=\"token constant\">HEIGHT</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n    zOrient <span class=\"token operator\">=</span> posState<span class=\"token punctuation\">.</span>orientation<span class=\"token punctuation\">.</span>z <span class=\"token operator\">*</span> <span class=\"token number\">180</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Next, we use a similar process to update the scene according to the HMD's orientation — check that valid orientation data is available using <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/VRPose/orientation\"><code>VRPositionState.hasOrientation</code> <small>(en-US)</small></a>, display orientation data in the UI for informational purposes, and then set the <code>xOrient</code>, <code>yOrient</code>, and <code>zOrient</code> values relative to the orientation information stored in <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/VRPose/orientation\"><code>VRPositionState.orientation</code> <small>(en-US)</small></a>.</p>\n<pre class=\"notranslate\">  timePara.textContent = 'Timestamp: ' + Math.floor(posState.timeStamp);\n}\n</pre>\n<p>Finally, we output the current timeStamp stored in <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/VRPose/timeStamp\"><code>VRPositionState.timeStamp</code> <small>(en-US)</small></a> to the UI for information. This value can be useful for determining if position data has been updated, and what order updates have occured in.</p>"}},{"type":"prose","value":{"id":"updating_the_scene_更新场景输出画画","title":"Updating the scene 更新场景输出画画","isH3":true,"content":"<p>The <code>xPos</code>, <code>yPos</code>, <code>zPos</code>, <code>xOrient</code>, <code>yOrient</code> and <code>zOrient</code> value retrieved by <code>setView()</code> are all used as modifiers for updating the scene rendering done by <code>drawImages()</code>. We'll look at how below, although we'll only walk through the code for drawing the left eye view (the other is very similar, but shifted over to the right):</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">drawImages</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  ctx<span class=\"token punctuation\">.</span>fillStyle <span class=\"token operator\">=</span> <span class=\"token string\">'white'</span><span class=\"token punctuation\">;</span>\n  ctx<span class=\"token punctuation\">.</span><span class=\"token function\">fillRect</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token constant\">WIDTH</span><span class=\"token punctuation\">,</span><span class=\"token constant\">HEIGHT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>First we draw a white <a href=\"/zh-CN/docs/Web/API/CanvasRenderingContext2D/fillRect\" title=\"fillRect()\"><code>fillRect()</code></a> to clear the scene before the next frame is drawn.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>  ctx<span class=\"token punctuation\">.</span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  ctx<span class=\"token punctuation\">.</span><span class=\"token function\">beginPath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  ctx<span class=\"token punctuation\">.</span><span class=\"token function\">translate</span><span class=\"token punctuation\">(</span><span class=\"token constant\">WIDTH</span><span class=\"token operator\">/</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token constant\">HEIGHT</span><span class=\"token operator\">/</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  ctx<span class=\"token punctuation\">.</span><span class=\"token function\">rect</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token punctuation\">(</span><span class=\"token constant\">WIDTH</span><span class=\"token operator\">/</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token operator\">-</span><span class=\"token punctuation\">(</span><span class=\"token constant\">HEIGHT</span><span class=\"token operator\">/</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token constant\">WIDTH</span><span class=\"token operator\">/</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token constant\">HEIGHT</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Next, we save the context state with <a href=\"/zh-CN/docs/Web/API/CanvasRenderingContext2D/save\" title=\"save()\"><code>save()</code></a> so we can treat the left eye view as a separate image and not have its code affect the right eye view.</p>\n<p>We then <a href=\"/zh-CN/docs/Web/API/CanvasRenderingContext2D/beginPath\" title=\"begin a path\"><code>begin a path</code></a>, <a href=\"/zh-CN/docs/Web/API/CanvasRenderingContext2D/translate\" title=\"translate the canvas\"><code>translate the canvas</code></a> so that the origin is now in the center of the left eye view (a quarter of the width across and half the height down) — which is needed so that the rotation works correctly (rotation happens around the origin of the canvas) — and draw a <a href=\"/zh-CN/docs/Web/API/CanvasRenderingContext2D/rect\" title=\"rect()\"><code>rect()</code></a> around the whole left eye view.</p>\n<p>Note that the <code>rect()</code> has to be drawn starting from minus a quarter of the width and minus half the height, because of the translation applied earlier.</p>\n<pre class=\"notranslate\">  ctx.clip();\n</pre>\n<p>Now we <a href=\"/zh-CN/docs/Web/API/CanvasRenderingContext2D/clip\" title=\"clip()\"><code>clip()</code></a> the canvas. Because we called this just after the <code>rect()</code> was drawn, anything else that we do on the canvas will be constrained inside the <code>rect()</code>, with any overflow hidden until a <code>restore()</code> call is made (see later on.) This ensures that the whole left eye view will remain separate from the right eye view.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>  ctx<span class=\"token punctuation\">.</span><span class=\"token function\">rotate</span><span class=\"token punctuation\">(</span>zOrient <span class=\"token operator\">*</span> Math<span class=\"token punctuation\">.</span><span class=\"token constant\">PI</span> <span class=\"token operator\">/</span> <span class=\"token number\">180</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>A rotation is now applied to the image, related to the current value of <code>zOrient</code>, so that the scene rotates as you rotate your head.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>  ctx<span class=\"token punctuation\">.</span><span class=\"token function\">drawImage</span><span class=\"token punctuation\">(</span>image<span class=\"token punctuation\">,</span><span class=\"token operator\">-</span><span class=\"token punctuation\">(</span><span class=\"token constant\">WIDTH</span><span class=\"token operator\">/</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span>lCtrOffset<span class=\"token operator\">-</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>image<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">)</span><span class=\"token operator\">/</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token operator\">*</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token operator\">/</span>zPos<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span>xPos<span class=\"token operator\">-</span>yOrient<span class=\"token punctuation\">,</span><span class=\"token operator\">-</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>image<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span><span class=\"token operator\">/</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token operator\">*</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token operator\">/</span>zPos<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span>yPos<span class=\"token operator\">+</span>xOrient<span class=\"token punctuation\">,</span>image<span class=\"token punctuation\">.</span>width<span class=\"token operator\">*</span>zPos<span class=\"token punctuation\">,</span>image<span class=\"token punctuation\">.</span>height<span class=\"token operator\">*</span>zPos<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Now for the actual image drawing! This rather nasty line of code needs breaking down, so here it is, argument by argument:</p>\n<ul>\n  <li><code>image</code>: The image to be drawn</li>\n  <li><code>-(WIDTH/4)+lCtrOffset-((image.width)/(2*(1/zPos)))+xPos-yOrient</code>: The horizontal coordinate of the image origin. This first needs to be reduced by <code>WIDTH/4</code> to compensate for the translation done earlier. Then, we add the left center offset to put it back in the middle, then we subtract the image width divided by 2 times the reciprocal of <code>zPos</code> — so as the image is drawn smaller/larger the amount subtracted will get smaller/larger, again keeping the image in the center. Finally, we add the <code>xPos</code> and subtract the <code>yOrient</code> values to update the image position as the HMD is moved or rotated horizontally (rotation around the y axis moves the image horizontally.)</li>\n  <li><code>-((image.height)/(2*(1/zPos)))+yPos+xOrient</code>: The vertical coordinate of the image origin. In this case the \"subtract HEIGHT/2\" and \"add right center offset\" exactly cancel each other out, so I've just removed them from the equation. That just leaves subtracting the image width divided by 2 times the reciprocal of zPos to keep the image in the center, as above, and modifying the drawn position by <code>yPos</code> and <code>xOrient</code>.</li>\n  <li><code>image.width*zPos</code>: The width to draw the image; this is modified by <code>zPos</code> so it will be drawn bigger as you get closer to it.</li>\n  <li><code>image.height*zPos</code>: The height to draw the image; this is modified by <code>zPos</code> so it will be drawn bigger as you get closer to it.</li>\n</ul>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>  ctx<span class=\"token punctuation\">.</span>strokeStyle <span class=\"token operator\">=</span> <span class=\"token string\">\"black\"</span><span class=\"token punctuation\">;</span>\n  ctx<span class=\"token punctuation\">.</span><span class=\"token function\">stroke</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Next we draw a black <a href=\"/zh-CN/docs/Web/API/CanvasRenderingContext2D/stroke\" title=\"stroke()\"><code>stroke()</code></a> around the left eye view, just to aid the view separation a bit more.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>  ctx<span class=\"token punctuation\">.</span><span class=\"token function\">restore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Finally, we <a href=\"/zh-CN/docs/Web/API/CanvasRenderingContext2D/restore\" title=\"restore()\"><code>restore()</code></a> the canvas so we can then go on to draw the right eye view.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>  <span class=\"token operator\">...</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<div class=\"notecard note\" id=\"sect4\">\n  <p><strong>备注：</strong> We are kind of cheating here, using a 2D canvas to approximate a 3D scene. But it keeps things simple for learning purposes. You can use the position and orientation data discussed above to modify the view rendering on any app written with web technologies. For example, our <a href=\"https://github.com/mdn/webvr-tests/tree/gh-pages/3Dpositionorientation\" class=\"external\" rel=\" noopener\">3Dpositionorientation</a> demo uses very similar code to that shown above to control the view of a WebGL scene created using <a href=\"https://threejs.org/\" class=\"external\" rel=\" noopener\">Three.js</a>.</p>\n</div>\n<div class=\"notecard note\" id=\"sect5\">\n  <p><strong>备注：</strong> The <a href=\"https://github.com/mdn/webvr-tests/blob/gh-pages/positionsensorvrdevice/index.html#L106-L119\" class=\"external\" rel=\" noopener\">code for <code>drawCrosshairs()</code></a> is very simple in comparison to <code>drawImages()</code>, so we'll leave you to study that for yourself if you're interested!</p>\n</div>"}},{"type":"prose","value":{"id":"fullscreen_全屏控制","title":"Fullscreen 全屏控制","isH3":true,"content":"<p>The VR effect is much more effective if you set your app runnning in <a href=\"/en-US/docs/Web/API/Fullscreen_API\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">fullscreen mode (en-US)</a> — this generally means setting your <a href=\"/zh-CN/docs/Web/HTML/Element/canvas\"><code>&lt;canvas&gt;</code></a> element to fullscreen when a specific event occurs — such as double-clicking the display or pressing a specific button.</p>\n<p>In this case I have just kept things simple, running a <code>fullScreen()</code> function when the canvas is clicked:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>myCanvas<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span>fullScreen<span class=\"token punctuation\">,</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>The <code>fullScreen()</code> function checks which version of the <code>requestFullscreen()</code> method is present on the canvas (this will differ by browser) and then calls the appropriate one, for maximum compatibility:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">fullScreen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>myCanvas<span class=\"token punctuation\">.</span>requestFullscreen<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    myCanvas<span class=\"token punctuation\">.</span><span class=\"token function\">requestFullscreen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>myCanvas<span class=\"token punctuation\">.</span>msRequestFullscreen<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    myCanvas<span class=\"token punctuation\">.</span><span class=\"token function\">msRequestFullscreen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>myCanvas<span class=\"token punctuation\">.</span>mozRequestFullScreen<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    myCanvas<span class=\"token punctuation\">.</span><span class=\"token function\">mozRequestFullScreen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>myCanvas<span class=\"token punctuation\">.</span>webkitRequestFullscreen<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    myCanvas<span class=\"token punctuation\">.</span><span class=\"token function\">webkitRequestFullscreen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"calibrating_field_of_view_and_device_orientation_对_fov_与设备姿态进行归零显示","title":"Calibrating field of view and device orientation 对 FOV 与设备姿态进行归零显示","isH3":false,"content":"<p>I've not given much thought to this in my current demo, but in commercial apps you'll need to do some user calibration to make sure your app is working for the user and their particular VR hardware. The WebVR API has a number of features to aid in this.</p>\n<p>First of all, you can use the <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/PositionSensorVRDevice/resetSensor\"><code>PositionSensorVRDevice.resetSensor</code> <small>(en-US)</small></a> method to reset the HMD position orientation. Effectively what it does is to set the current position/orientation of the headset to 0. So you need to ensure it is held in a sensible 0 position before running the function. In our positionsensorvrdevice demo, you can play with it using our \"Reset Sensor\" button:</p>\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span><span class=\"token punctuation\">&gt;</span></span>Reset Sensor<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onclick</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  gPositionSensor<span class=\"token punctuation\">.</span><span class=\"token function\">resetSensor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>The other thing to calibrate is the field of view (FOV) of your headset — how much of the scene can be seen in the up, right, down and left directions. This information can be retrieved for each eye separately using the <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/HMDVRDevice/getEyeParameters\"><code>HMDVRDevice.getEyeParameters</code> <small>(en-US)</small></a> method, which returns parameters for each eye separately (you need to call it twice, once with a parameter of <code>left</code>, and once with a parameter of <code>right</code>.) This returns a <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/VREyeParameters\"><code>VREyeParameters</code> <small>(en-US)</small></a> object for each eye.</p>\n<p>As an example, you could retrieve the current field of view for an eye using <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/VREyeParameters/fieldOfView\"><code>VREyeParameters.currentFieldOfView</code> <small>(en-US)</small></a>. This returns a <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/VRFieldOfView\"><code>VRFieldOfView</code> <small>(en-US)</small></a> object containing four properties:</p>\n<ul>\n  <li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/VRFieldOfView/upDegrees\"><code>upDegrees</code> <small>(en-US)</small></a>: The number of degrees upwards that the field of view extends in.</li>\n  <li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/VRFieldOfView/rightDegrees\"><code>rightDegrees</code> <small>(en-US)</small></a>: The number of degrees to the right that the field of view extends in.</li>\n  <li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/VRFieldOfView/downDegrees\"><code>downDegrees</code> <small>(en-US)</small></a>: The number of degrees downwards that the field of view extends in.</li>\n  <li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/VRFieldOfView/leftDegrees\"><code>leftDegrees</code> <small>(en-US)</small></a>: The number of degrees to the left that the field of view extends in.</li>\n</ul>\n<p>The field of view created is a pyramid shape, the apex of which is emanating from the eye.</p>\n<p>You could check whether the user has a suitable field of view for your app, and if not, set a new field of view using <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/HMDVRDevice/setFieldOfView\"><code>HMDVRDevice.setFieldOfView</code> <small>(en-US)</small></a> method. A simple function to handle this might look like so:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">setCustomFOV</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">up<span class=\"token punctuation\">,</span>right<span class=\"token punctuation\">,</span>down<span class=\"token punctuation\">,</span>left</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">var</span> testFOV <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">VRFieldOfView</span><span class=\"token punctuation\">(</span>up<span class=\"token punctuation\">,</span>right<span class=\"token punctuation\">,</span>down<span class=\"token punctuation\">,</span>left<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  gHMD<span class=\"token punctuation\">.</span><span class=\"token function\">setFieldOfView</span><span class=\"token punctuation\">(</span>testFOV<span class=\"token punctuation\">,</span>testFOV<span class=\"token punctuation\">,</span><span class=\"token number\">0.01</span><span class=\"token punctuation\">,</span><span class=\"token number\">10000.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>This function accepts the four degree values as arguments, then creates a new <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/VRFieldOfView\"><code>VRFieldOfView</code> <small>(en-US)</small></a> object using the VRFieldOfView() constructor. This is then fed into <code>setFieldOfView()</code> as the first two arguments (the FOV for the left eye and the right eye). The third and fourth arguments are the <code>zNear</code> and <code>zFar</code> values — how close and far away from the eye an object can be in the direction of the FOV and still be inside it.</p>"}}],"toc":[{"text":"起步","id":"起步"},{"text":"Introducing a simple demo<br>简单示例介绍","id":"introducing_a_simple_demo简单示例介绍"},{"text":"How does the app work?<br>app 是怎样工作的呢？","id":"how_does_the_app_workapp_是怎样工作的呢？"},{"text":"Calibrating field of view and device orientation 对 FOV 与设备姿态进行归零显示","id":"calibrating_field_of_view_and_device_orientation_对_fov_与设备姿态进行归零显示"}],"summary":"The WebVR API is a fantastic addition to the web developer's toolkit, allowing access to virtual reality hardware such as the Oculus Rift, and converting outputted movement and orientation data into view rendering updates on a web app. But how do you get started in developing VR apps for the Web? This article will guide you through the basics.\n  WebVR API 对于 web 开发者来说，是一个令人心动的功能包，允许你连接到类似于Oculus Rift 这样的虚拟现实硬件，并且能够在你的 web app 中，将从硬件获取到的位置移动数据和姿态角数据，实时更新你的渲染显示输出。具体要如何在 Web 上开始开发你的 VR app 呢？这篇文章将会提供基础的引导信息。","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Using the WebVR API","locale":"en-US","native":"English (US)"},{"title":"Uso de la API de WebVR","locale":"es","native":"Español"},{"title":"WebVR APIの使い方","locale":"ja","native":"日本語"},{"title":"Using the WebVR API","locale":"pt-BR","native":"Português (do Brasil)"},{"title":"Использование WebVR API","locale":"ru","native":"Русский"}],"source":{"folder":"zh-cn/web/api/webvr_api/using_the_webvr_api","github_url":"https://github.com/mdn/translated-content/blob/main/files/zh-cn/web/api/webvr_api/using_the_webvr_api/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/zh-CN/docs/Web","title":"Web 开发技术"},{"uri":"/zh-CN/docs/Web/API","title":"Web API 接口参考"},{"uri":"/zh-CN/docs/Web/API/WebVR_API","title":"WebVR API"},{"uri":"/zh-CN/docs/Web/API/WebVR_API/Using_the_WebVR_API","title":"Using the WebVR API"}],"pageTitle":"Using the WebVR API - Web API 接口参考 | MDN","noIndexing":false}}</script></body></html>