{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"SubtleCrypto.decrypt()","mdn_url":"/zh-CN/docs/Web/API/SubtleCrypto/decrypt","locale":"zh-CN","native":"中文 (简体)","sidebarHTML":"<ol><li><strong><a href=\"/zh-CN/docs/Web/API/Web_Crypto_API\">Web Crypto API</a></strong></li><li><strong><a href=\"/zh-CN/docs/Web/API/SubtleCrypto\"><code>SubtleCrypto</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>方法</summary><ol><li><em><code>decrypt()</code></em></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/SubtleCrypto/deriveBits\"><code>deriveBits()</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/SubtleCrypto/deriveKey\"><code>deriveKey()</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/SubtleCrypto/digest\"><code>digest()</code> <small>(en-US)</small></a></li><li><a href=\"/zh-CN/docs/Web/API/SubtleCrypto/encrypt\"><code>encrypt()</code></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/SubtleCrypto/exportKey\"><code>exportKey()</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/SubtleCrypto/generateKey\"><code>generateKey()</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/SubtleCrypto/importKey\"><code>importKey()</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/SubtleCrypto/sign\"><code>sign()</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/SubtleCrypto/unwrapKey\"><code>unwrapKey()</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/SubtleCrypto/verify\"><code>verify()</code> <small>(en-US)</small></a></li><li><a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/SubtleCrypto/wrapKey\"><code>wrapKey()</code> <small>(en-US)</small></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Web Crypto API 的相关页面</summary><ol><li><a href=\"/zh-CN/docs/Web/API/Crypto\"><code>Crypto</code></a></li><li><a href=\"/zh-CN/docs/Web/API/CryptoKey\"><code>CryptoKey</code></a></li><li><a href=\"/zh-CN/docs/Web/API/crypto_property\"><code>crypto_property</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p><strong><code>SubtleCrypto.decrypt()</code></strong> 以加密数据、算法和密钥为参数返回一个包含明文的 <a href=\"/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise\"><code>Promise</code></a> 对象。</p>"}},{"type":"prose","value":{"id":"语法","title":"语法","isH3":false,"content":"<div class=\"code-example\"><pre class=\"brush: plain notranslate\">var result = crypto.subtle.decrypt(algorithm, key, data);\n</pre></div>"}},{"type":"prose","value":{"id":"属性","title":"属性","isH3":true,"content":"<ul>\n  <li><em><code>algorithm</code></em> 是一个对象，用于指定解密函数及其参数。当没有参数时，<em>algorithm</em> 也可以是包含了算法名称的 <a href=\"/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String\"><code>DOMString</code></a> 对象。支持的值<a href=\"https://www.w3.org/TR/WebCryptoAPI/#algorithm-overview\" class=\"external\" rel=\" noopener\">¹</a> 如下：\n    <ul>\n      <li><code>{\"name\": \"AES-CBC\", iv}</code> <code>iv</code> 与 <a href=\"/zh-CN/docs/Web/API/SubtleCrypto/encrypt\"><code>SubtleCrypto.encrypt()</code></a> 中描述的相同。</li>\n      <li><code>{\"name\": \"AES-CTR\", counter, length}</code> <code>counter</code> 和<code>length</code> 与 <a href=\"/zh-CN/docs/Web/API/SubtleCrypto/encrypt\"><code>SubtleCrypto.encrypt()</code></a> 中描述的相同</li>\n      <li><code>{\"name\": \"AES-GCM\", iv[, additionalData, tagLength]}</code> <code>iv</code>， <code>additionalData</code>和 <code>tagLength</code> 与 <a href=\"/zh-CN/docs/Web/API/SubtleCrypto/encrypt\"><code>SubtleCrypto.encrypt()</code></a> 中描述的相同。</li>\n      <li><code>{\"name\": \"RSA-OAEP\"[, label]}</code> <code>label</code> 与 <a href=\"/zh-CN/docs/Web/API/SubtleCrypto/encrypt\"><code>SubtleCrypto.encrypt()</code></a> 中描述的相同。</li>\n    </ul>\n  </li>\n  <li><code>key</code> 是一个包含了密钥的 <a href=\"/zh-CN/docs/Web/API/CryptoKey\"><code>CryptoKey</code></a> 对象，用于解密。</li>\n  <li><em><code>data</code></em> 是一个包含了待解密的密文的 <a class=\"page-not-created\" title=\"此文档尚未被撰写，期待你的贡献!\"><code>BufferSource</code></a> 对象。</li>\n</ul>"}},{"type":"prose","value":{"id":"返回值","title":"返回值","isH3":true,"content":"<ul>\n  <li><code>result</code> 是一个 <a href=\"/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise\"><code>Promise</code></a> 对象，它会返回由<a href=\"/zh-CN/docs/Glossary/Ciphertext\">ciphertext</a> 解密的得来的 <a href=\"/zh-CN/docs/Glossary/Plaintext\">plaintext</a>。</li>\n</ul>"}},{"type":"prose","value":{"id":"异常","title":"异常","isH3":true,"content":"<p>Promise 将会在以下的异常被触发时返回 rejected：</p>\n<dl>\n  <dt id=\"invalidaccesserror\">InvalidAccessError</dt>\n  <dd>\n    <p>当提供的密钥无法执行请求的操作时（如：解密算法无效，或对指定的解密算法提供了无效的密钥）。</p>\n  </dd>\n  <dt id=\"operationerror\">OperationError</dt>\n  <dd>\n    <p>因特定的操作原因导致操作失败时（如：算法的参数大小无效，或解密结果失败）。</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"实例","title":"实例","isH3":false,"content":"<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">decryptText</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">ctBuffer<span class=\"token punctuation\">,</span> iv<span class=\"token punctuation\">,</span> password</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> pwUtf8 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TextEncoder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">encode</span><span class=\"token punctuation\">(</span>password<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> pwHash <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> crypto<span class=\"token punctuation\">.</span>subtle<span class=\"token punctuation\">.</span><span class=\"token function\">digest</span><span class=\"token punctuation\">(</span><span class=\"token string\">'SHA-256'</span><span class=\"token punctuation\">,</span> pwUtf8<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> alg <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'AES-GCM'</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">iv</span><span class=\"token operator\">:</span> iv <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> key <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> crypto<span class=\"token punctuation\">.</span>subtle<span class=\"token punctuation\">.</span><span class=\"token function\">importKey</span><span class=\"token punctuation\">(</span><span class=\"token string\">'raw'</span><span class=\"token punctuation\">,</span> pwHash<span class=\"token punctuation\">,</span> alg<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'decrypt'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> ptBuffer <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> crypto<span class=\"token punctuation\">.</span>subtle<span class=\"token punctuation\">.</span><span class=\"token function\">decrypt</span><span class=\"token punctuation\">(</span>alg<span class=\"token punctuation\">,</span> key<span class=\"token punctuation\">,</span> ctBuffer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> plaintext <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TextDecoder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">decode</span><span class=\"token punctuation\">(</span>ptBuffer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> plaintext<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p><code>iv</code> 的含义在 <a href=\"/zh-CN/docs/Web/API/SubtleCrypto/encrypt\"><code>SubtleCrypto.encrypt()</code></a> 中可以找到。<code>ctBuffer</code> 是 <a href=\"/zh-CN/docs/Web/API/SubtleCrypto/encrypt\"><code>SubtleCrypto.encrypt()</code></a> 返回的密文。</p>"}},{"type":"specifications","value":{"title":"规范","id":"规范","isH3":false,"specifications":[{"bcdSpecificationURL":"https://w3c.github.io/webcrypto/#SubtleCrypto-method-decrypt","title":"Web Cryptography API"}],"query":"api.SubtleCrypto.decrypt"}},{"type":"browser_compatibility","value":{"title":"浏览器支持","id":"浏览器支持","isH3":false,"query":"api.SubtleCrypto.decrypt","dataURL":"/zh-CN/docs/Web/API/SubtleCrypto/decrypt/bcd.json"}},{"type":"prose","value":{"id":"另请参见","title":"另请参见","isH3":false,"content":"<ul>\n  <li><a href=\"/zh-CN/docs/Web/API/Crypto\"><code>Crypto</code></a> 与 <a href=\"/zh-CN/docs/Web/API/Crypto/subtle\"><code>Crypto.subtle</code></a>。</li>\n  <li><a href=\"/zh-CN/docs/Web/API/SubtleCrypto\"><code>SubtleCrypto</code></a> 包含了该接口。</li>\n</ul>"}}],"toc":[{"text":"语法","id":"语法"},{"text":"实例","id":"实例"},{"text":"规范","id":"规范"},{"text":"浏览器支持","id":"浏览器支持"},{"text":"另请参见","id":"另请参见"}],"summary":"SubtleCrypto.decrypt() 以加密数据、算法和密钥为参数返回一个包含明文的 Promise 对象。","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"SubtleCrypto.decrypt()","locale":"en-US","native":"English (US)"}],"source":{"folder":"zh-cn/web/api/subtlecrypto/decrypt","github_url":"https://github.com/mdn/translated-content/blob/main/files/zh-cn/web/api/subtlecrypto/decrypt/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/zh-CN/docs/Web","title":"Web 开发技术"},{"uri":"/zh-CN/docs/Web/API","title":"Web API 接口参考"},{"uri":"/zh-CN/docs/Web/API/SubtleCrypto","title":"SubtleCrypto"},{"uri":"/zh-CN/docs/Web/API/SubtleCrypto/decrypt","title":"SubtleCrypto.decrypt()"}],"pageTitle":"SubtleCrypto.decrypt() - Web API 接口参考 | MDN","noIndexing":false}}