{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"dns-prefetch","mdn_url":"/zh-CN/docs/Web/Performance/dns-prefetch","locale":"zh-CN","native":"中文 (简体)","sidebarHTML":"","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p><strong><code>DNS-prefetch</code></strong> (<strong>DNS 预获取</strong>) 是尝试在请求资源之前解析域名。这可能是后面要加载的文件，也可能是用户尝试打开的链接目标。</p>"}},{"type":"prose","value":{"id":"为什么要使用_dns-prefetch","title":"为什么要使用 dns-prefetch?","isH3":false,"content":"<p>当浏览器从（第三方）服务器请求资源时，必须先将该<a href=\"/zh-CN/docs/Web/HTTP/CORS\">跨域</a>域名解析为 IP 地址，然后浏览器才能发出请求。此过程称为 DNS 解析。DNS 缓存可以帮助减少此延迟，而 DNS 解析可以导致请求增加明显的延迟。对于打开了与许多第三方的连接的网站，此延迟可能会大大降低加载性能。</p>\n<p><code>dns-prefetch</code> 可帮助开发人员掩盖 DNS 解析延迟。 <a href=\"/zh-CN/docs/Web/HTML/Element/link\">HTML <code>&lt;link&gt;</code>元素</a> 通过 dns-prefetch 的 <a href=\"/en-US/docs/Web/HTML/Attributes/rel\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">rel 属性 (en-US)</a>值提供此功能。然后在 <a href=\"/zh-CN/docs/Web/HTML/Attributes\">href 属性</a>中指要<a href=\"/zh-CN/docs/Web/HTTP/CORS\">跨域</a>的域名：</p>"}},{"type":"prose","value":{"id":"句法","title":"句法","isH3":false,"content":"<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dns-prefetch<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://fonts.googleapis.com/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"例子","title":"例子","isH3":false,"content":"<div class=\"code-example\"><pre class=\"brush: plain notranslate\">&lt;html&gt;\n  &lt;head&gt;\n    &lt;link rel=\"dns-prefetch\" href=\"https://fonts.gstatic.com/\"&gt;\n    &lt;!-- and all other head elements --&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;!-- your page content --&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</pre></div>\n<p>每当站点引用跨域域上的资源时，都应在<a href=\"/zh-CN/docs/Web/HTML/Element/head\">&lt;head&gt;元素</a>中放置 dns-prefetch 提示，但是要记住一些注意事项。</p>"}},{"type":"prose","value":{"id":"最佳实践","title":"最佳实践","isH3":false,"content":"<p>请记住以下三点：</p>\n<p>首先，<code>dns-prefetch</code> 仅对<a href=\"/zh-CN/docs/Web/HTTP/CORS\">跨域</a>域上的 DNS 查找有效，因此请避免使用它来指向您的站点或域。这是因为，到浏览器看到提示时，您站点域背后的 IP 已经被解析。</p>\n<p>其次，还可以通过使用 <a href=\"/zh-CN/docs/Web/HTTP/Headers/Link\">HTTP 链接字段</a>将 <code>dns-prefetch</code>（以及其他资源提示）指定为 <a href=\"/zh-CN/docs/Web/HTTP/Headers\">HTTP 标头</a>：</p>\n<div class=\"code-example\"><pre class=\"brush: plain notranslate\">Link: &lt;https://fonts.gstatic.com/&gt;; rel=dns-prefetch\n</pre></div>\n<p>第三，考虑将 <code>dns-prefetch</code> 与 <code>preconnect(</code>预连接<code>)</code>提示配对。尽管 <code>dns-prefetch</code> 仅执行 DNS 查找，但<code>preconnect</code> 会建立与服务器的连接。如果站点是通过 HTTPS 服务的，则此过程包括 DNS 解析，建立 TCP 连接以及执行 TLS 握手。将两者结合起来可提供进一步减少<a href=\"/zh-CN/docs/Web/HTTP/CORS\">跨域请求</a>的感知延迟的机会。您可以安全地将它们一起使用，如下所示：</p>\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>preconnect<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://fonts.gstatic.com/<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">crossorigin</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span> <span class=\"token attr-name\">rel</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dns-prefetch<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://fonts.gstatic.com/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>备注：</strong> 如果页面需要建立与许多第三方域的连接，则将它们预先连接会适得其反。 <code>preconnect</code> 提示最好仅用于最关键的连接。对于其他的，只需使用 <code>&lt;link rel=\"dns-prefetch\"&gt;</code> 即可节省第一步的时间-DNS 查找。</p>\n</div>\n<p>配对这些提示的逻辑是因为对 dns-prefetch 的支持比对预连接的支持要好。不支持预连接的浏览器仍然可以通过回退到 dns-prefetch 来获得更多好处。由于这是 HTML 功能，因此非常容错。如果不支持的浏览器遇到 dns-prefetch 提示（或任何其他资源提示），则您的网站不会中断。您只是不会获得它提供的好处。</p>\n<p>一些资源（如字体）以匿名模式加载。在这种情况下，应使用预连接提示设置 <a href=\"/zh-CN/docs/Web/HTTP/CORS\">crossorigin</a> 属性。如果您省略它，则浏览器将仅执行 DNS 查找。</p>"}},{"type":"prose","value":{"id":"查看更多","title":"查看更多","isH3":false,"content":"<ul>\n  <li><a href=\"/zh-CN/docs/Web/HTML/Element/link\">&lt;link&gt;</a></li>\n  <li><a href=\"/en-US/docs/Web/HTML/Attributes/rel\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">HTML attribute: rel (en-US)</a></li>\n  <li><a href=\"/zh-CN/docs/Web/HTML/Attributes/crossorigin\">crossorigin</a></li>\n  <li><a href=\"/zh-CN/docs/Web/HTTP/CORS\">Cross-Origin Resource Sharing (CORS)</a></li>\n  <li><a href=\"/zh-CN/docs/Web/HTTP/Headers\">HTTP headers</a></li>\n  <li><a href=\"/zh-CN/docs/Web/HTTP/Headers/Link\">HTTP header Link</a></li>\n</ul>"}}],"toc":[{"text":"为什么要使用 dns-prefetch?","id":"为什么要使用_dns-prefetch"},{"text":"句法","id":"句法"},{"text":"例子","id":"例子"},{"text":"最佳实践","id":"最佳实践"},{"text":"查看更多","id":"查看更多"}],"summary":"DNS-prefetch (DNS 预获取) 是尝试在请求资源之前解析域名。这可能是后面要加载的文件，也可能是用户尝试打开的链接目标。","popularity":0.0004,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Using dns-prefetch","locale":"en-US","native":"English (US)"},{"title":"Использование dns-prefetch","locale":"ru","native":"Русский"}],"source":{"folder":"zh-cn/web/performance/dns-prefetch","github_url":"https://github.com/mdn/translated-content/blob/main/files/zh-cn/web/performance/dns-prefetch/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/zh-CN/docs/Web","title":"Web 开发技术"},{"uri":"/zh-CN/docs/Web/Performance","title":"Web 性能"},{"uri":"/zh-CN/docs/Web/Performance/dns-prefetch","title":"dns-prefetch"}],"pageTitle":"dns-prefetch - Web 性能 | MDN","noIndexing":false}}