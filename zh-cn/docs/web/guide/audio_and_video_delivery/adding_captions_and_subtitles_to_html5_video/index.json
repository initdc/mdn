{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"Adding captions and subtitles to HTML5 video","mdn_url":"/zh-CN/docs/Web/Guide/Audio_and_video_delivery/Adding_captions_and_subtitles_to_HTML5_video","locale":"zh-CN","native":"中文 (简体)","sidebarHTML":"","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>在其他文章中我们学会了如何使用<a href=\"/zh-CN/docs/Web/API/HTMLMediaElement\"><code>HTMLMediaElement</code></a> 和 <a href=\"/zh-CN/docs/Web/API/Window/fullScreen\"><code>Window.fullScreen</code></a> API <a href=\"/zh-CN/docs/Web/Apps/Build/Manipulating_media/cross_browser_video_player\">创建视频播放器</a>以及如何给视频播放器 <a href=\"/zh-CN/docs/Web/Apps/Build/Manipulating_media/Video_player_styling_basics\">添加样式</a>. 本文将介绍如何用 <a class=\"only-in-en-us\" title=\"Currently only available in English (US)\" href=\"/en-US/docs/Web/API/WebVTT_API\"><code>the WebVTT format</code> <small>(en-US)</small></a> 和 <a href=\"/zh-CN/docs/Web/HTML/Element/track\"><code>&lt;track&gt;</code></a> 元素为视频添加字幕和翻译</p>"}},{"type":"prose","value":{"id":"案例","title":"案例","isH3":false,"content":"<p>下面所展示的视频来自<a href=\"https://www.blender.org/foundation/\" class=\"external\" rel=\" noopener\">Blender Foundation</a>的 <a href=\"https://www.sintel.org/\" class=\"external\" rel=\" noopener\">Sintel open movie</a></p>\n<p>\n  <img src=\"/en-US/docs/Web/Guide/Audio_and_video_delivery/Adding_captions_and_subtitles_to_HTML5_video/video-player-with-captions.png\" alt=\"Video player with stand controls such as play, stop, volume, and captions on and off. The video playing shows a scene of a man holding a spear-like weapon, and a caption reads &quot;Esta hoja tiene pasado oscuro.&quot;\" width=\"593\" height=\"365\" loading=\"lazy\">\n</p>\n<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>备注：</strong> 观众老爷可以点击这里 <a href=\"https://github.com/iandevlin/iandevlin.github.io/tree/master/mdn/video-player-with-captions\" class=\"external\" rel=\" noopener\">查看 Github 源码</a>, 或者<a href=\"http://iandevlin.github.io/mdn/video-player-with-captions/\" class=\"external\" rel=\" noopener\">浏览在线视频</a>.</p>\n</div>"}},{"type":"prose","value":{"id":"html5_视频字幕","title":"HTML5 视频字幕","isH3":false,"content":"<p>在学习如何向视频添加字幕之前，我们应该了解下面这些事情</p>"}},{"type":"prose","value":{"id":"标题和副标题","title":"标题和副标题","isH3":true,"content":"<p><a href=\"https://web.archive.org/web/20160117160743/http://screenfont.ca/learn/\" class=\"external\" rel=\" noopener\">标题和副标题不是一回事</a>：它们有明显不同的受众，传达的信息也不同，如果你不确定它们是什么，建议你仔细阅读这些差异。然而，它们在技术上是以相同的方式实现的，因此本文中的内容将同时适用于这两者。</p>\n<p>在这篇文章中，我们将提到文本轨道作为字幕显示，因为它们的内容是针对影片使用的语言有困难的人，而不是聋哑人或有听力障碍的人。</p>"}},{"type":"prose","value":{"id":"track_元素","title":"&lt;track&gt; 元素","isH3":true,"content":"<p>HTML5 allows us to specify subtitles for a video using the <a href=\"/zh-CN/docs/Web/HTML/Element/track\"><code>&lt;track&gt;</code></a> element. The various attributes of this element allow us to specify such things as the type of content that we're adding, the language it's in, and of course a reference to the text file that contains the actual subtitle information.</p>","titleAsText":"<track> 元素"}},{"type":"prose","value":{"id":"webvtt","title":"WebVTT","isH3":true,"content":"<p>The files that contain the actual subtitle data are simple text files that follow a specified format, in this case the <a href=\"/en-US/docs/Web/API/WebVTT_API\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">Web Video Text Tracks (en-US)</a> (WebVTT) format. The <a href=\"https://dev.w3.org/html5/webvtt/\" class=\"external\" rel=\" noopener\">WebVTT specification</a> is still being worked on, but major parts of it are stable so we can use it today.</p>\n<p>Video providers (such as the <a href=\"https://www.blender.org/foundation/\" class=\"external\" rel=\" noopener\">Blender Foundation</a>) provide captions and subtitles in a text format with their videos, but they're usually in the SubRip Text (SRT) format. These can be easily converted to WebVTT using an online converter such as <a href=\"https://atelier.u-sub.net/srt2vtt/\" class=\"external\" rel=\" noopener\">srt2vtt</a>.</p>"}},{"type":"prose","value":{"id":"修改_html_和_css","title":"修改 HTML 和 CSS","isH3":false,"content":"<p>This section summarises the modifications made to the previous article's code in order to facilitate the addition of subtitles to the video. If you are not interested in this, and just want to get straight into the JavaScript and more relevant CSS, skip to the <a href=\"#%E4%BD%BF%E7%94%A8%E5%AD%97%E5%B9%95\">Subtitle implementation</a> section.</p>\n<p>In this example we are using a different video, <a href=\"https://www.sintel.org/\" class=\"external\" rel=\" noopener\">Sintel</a>, as it actually has some speech in it and therefore is better for illustrating how subtitles work!</p>"}},{"type":"prose","value":{"id":"html_标签","title":"HTML 标签","isH3":true,"content":"<p>As mentioned above, we need to make use of the new HTML5 <code>&lt;track&gt;</code> element to add our subtitle files to the HTML5 video. We actually have our subtitles in three different languages — English, German, and Spanish — so we will reference all three of the relevant VTT files by adding <code>&lt;track&gt;</code> elements inside our HTML5 <code>&lt;video&gt;</code> element:</p>\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>video</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>video<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">controls</span> <span class=\"token attr-name\">preload</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>metadata<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>source</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>video/sintel-short.mp4<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>video/mp4<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>source</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>video/sintel-short.webm<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>video/webm<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>track</span> <span class=\"token attr-name\">label</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>English<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">kind</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>subtitles<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">srclang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>en<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>captions/vtt/sintel-en.vtt<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">default</span><span class=\"token punctuation\">&gt;</span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>track</span> <span class=\"token attr-name\">label</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Deutsch<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">kind</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>subtitles<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">srclang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>de<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>captions/vtt/sintel-de.vtt<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>track</span> <span class=\"token attr-name\">label</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Español<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">kind</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>subtitles<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">srclang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>es<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>captions/vtt/sintel-es.vtt<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>video</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<p>As you can see, each <code>&lt;track&gt;</code> element has the following attributes set:</p>\n<ul>\n  <li><code>kind</code> is given a value of <code>subtitles</code>, indicating the type of content the files contain</li>\n  <li><code>label</code> is given a value indicating which language that subtitle set is for — for example <code>English</code> or <code>Deutsch</code> — these labels will appear in the user interface to allow the user to easily select which subtitle language they want to see.</li>\n  <li><code>src</code> is assigned a valid URL pointing to the relevant WebVTT subtitle file in each case.</li>\n  <li><code>srclang</code> indicates what language each subtitle files' contents are in.</li>\n  <li>The <code>default</code> attribute is set on the English <code>&lt;track&gt;</code> element, indicating to the browser that this is the default subtitle file definition to use when subtitles have been turned on and the user has not made a specific selection.</li>\n</ul>\n<p>In addition to adding the <code>&lt;track&gt;</code> elements, we have also added a new button to control the subtitles menu that we will build. As a consequence, the video controls now look as follows:</p>\n<div class=\"code-example\"><pre class=\"brush: html notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>video-controls<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>controls<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-state</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>hidden<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>playpause<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-state</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>play<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Play/Pause<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stop<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-state</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>stop<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Stop<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>progress<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>progress</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>progress<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">min</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n         <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>progress-bar<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">&gt;</span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>progress</span><span class=\"token punctuation\">&gt;</span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>mute<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-state</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>mute<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Mute/Unmute<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>volinc<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-state</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>volup<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Vol+<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>voldec<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-state</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>voldown<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Vol-<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>fs<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-state</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>go-fullscreen<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>Fullscreen<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>subtitles<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-state</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>subtitles<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>CC<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"修改_css","title":"修改 CSS","isH3":true,"content":"<p>The video controls have undergone some minor changes in order to make space for the extra button, but these are relatively straightforward.</p>\n<p>No image is used for the captions button, so it is simply styled as:</p>\n<div class=\"code-example\"><pre class=\"brush: css notranslate\"><code><span class=\"token selector\">.controls button[data-state=\"subtitles\"]</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">height</span><span class=\"token punctuation\">:</span>85%<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">text-indent</span><span class=\"token punctuation\">:</span>0<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">font-size</span><span class=\"token punctuation\">:</span>16px<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">font-size</span><span class=\"token punctuation\">:</span>1rem<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">font-weight</span><span class=\"token punctuation\">:</span>bold<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">color</span><span class=\"token punctuation\">:</span>#666<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">background</span><span class=\"token punctuation\">:</span>#000<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">border-radius</span><span class=\"token punctuation\">:</span>2px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>There are also other CSS changes that are specific to some extra JavaScript implementation, but these will be mentioned at the appropriate place below.</p>"}},{"type":"prose","value":{"id":"使用字幕","title":"使用字幕","isH3":false,"content":"<p>A lot of what we do to access the video subtitles revolves around JavaScript. Similar to the video controls, if a browser supports HTML5 video subtitles, there will be a button provided within the native control set to access them. However, since we have defined our own video controls, this button is hidden, and we need to define our own.</p>\n<p>Browsers do vary as to what they support, so we will be attempting to bring a more unified UI to each browser where possible. There's more on browser compatibility issues later on.</p>"}},{"type":"prose","value":{"id":"初始化","title":"初始化","isH3":true,"content":"<p>As with all the other buttons, one of the first things we need to do is store a handle to the subtitles' button:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> subtitles <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'subtitles'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>We also initially turn off all subtitles, in case the browser turns any of them on by default:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> video<span class=\"token punctuation\">.</span>textTracks<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   video<span class=\"token punctuation\">.</span>textTracks<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>mode <span class=\"token operator\">=</span> <span class=\"token string\">'hidden'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>The <code>video.textTracks</code> property contains an array of all the text tracks attached to the video. We loop through each one and set its <code>mode</code> to <code>hidden</code>.</p>\n<p>Note: The <a href=\"https://dev.w3.org/html5/webvtt/#api\" class=\"external\" rel=\" noopener\">WebVTT API</a> gives us access to all the text tracks that are defined for an HTML5 video using the <code>&lt;track&gt;</code> element.</p>"}},{"type":"prose","value":{"id":"创建标题菜单","title":"创建标题菜单","isH3":true,"content":"<p>Our aim is to use the <code>subtitles</code> button we added earlier to display a menu that allows users to choose which language they want the subtitles displayed in, or to turn them off entirely.</p>\n<p>We have added the button, but before we make it do anything, we need to build the menu that goes with it. This menu is built dynamically, so that languages can be added or removed later by simply editing the <code>&lt;track&gt;</code> elements within the video's markup.</p>\n<p>All we need to do is to go through the video's <code>textTracks</code>, reading their properties and building the menu up from there:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> subtitlesMenu<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>video<span class=\"token punctuation\">.</span>textTracks<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">var</span> df <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createDocumentFragment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">var</span> subtitlesMenu <span class=\"token operator\">=</span> df<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'ul'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   subtitlesMenu<span class=\"token punctuation\">.</span>className <span class=\"token operator\">=</span> <span class=\"token string\">'subtitles-menu'</span><span class=\"token punctuation\">;</span>\n   subtitlesMenu<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span><span class=\"token function\">createMenuItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'subtitles-off'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Off'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> video<span class=\"token punctuation\">.</span>textTracks<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      subtitlesMenu<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span><span class=\"token function\">createMenuItem</span><span class=\"token punctuation\">(</span><span class=\"token string\">'subtitles-'</span> <span class=\"token operator\">+</span> video<span class=\"token punctuation\">.</span>textTracks<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>language<span class=\"token punctuation\">,</span> video<span class=\"token punctuation\">.</span>textTracks<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>language<span class=\"token punctuation\">,</span> video<span class=\"token punctuation\">.</span>textTracks<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>label<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n   videoContainer<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>subtitlesMenu<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>This code creates a <a href=\"/zh-CN/docs/Web/API/DocumentFragment\"><code>documentFragment</code></a>, which is used to hold an unordered list containing our subtitles menu. First of all an option is added to allow the user to switch all subtitles off, and then buttons are added for each text track, reading the language and label from each one.</p>\n<p>The creation of each list item and button is done by the <code>createMenuItem()</code> function, which is defined as follows:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> subtitleMenuButtons <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> <span class=\"token function-variable function\">createMenuItem</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">id<span class=\"token punctuation\">,</span> lang<span class=\"token punctuation\">,</span> label</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">var</span> listItem <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'li'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">var</span> button <span class=\"token operator\">=</span> listItem<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   button<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   button<span class=\"token punctuation\">.</span>className <span class=\"token operator\">=</span> <span class=\"token string\">'subtitles-button'</span><span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>lang<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&gt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> button<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'lang'</span><span class=\"token punctuation\">,</span> lang<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   button<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> label<span class=\"token punctuation\">;</span>\n   button<span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data-state'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'inactive'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   button<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">createTextNode</span><span class=\"token punctuation\">(</span>label<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   button<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Set all buttons to inactive</span>\n      subtitleMenuButtons<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">,</span> a</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n         subtitleMenuButtons<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data-state'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'inactive'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token comment\">// Find the language to activate</span>\n      <span class=\"token keyword\">var</span> lang <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'lang'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">var</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> video<span class=\"token punctuation\">.</span>textTracks<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n         <span class=\"token comment\">// For the 'subtitles-off' button, the first condition will never match so all will subtitles be turned off</span>\n         <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>video<span class=\"token punctuation\">.</span>textTracks<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>language <span class=\"token operator\">==</span> lang<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            video<span class=\"token punctuation\">.</span>textTracks<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>mode <span class=\"token operator\">=</span> <span class=\"token string\">'showing'</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data-state'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'active'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n         <span class=\"token punctuation\">}</span>\n         <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            video<span class=\"token punctuation\">.</span>textTracks<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>mode <span class=\"token operator\">=</span> <span class=\"token string\">'hidden'</span><span class=\"token punctuation\">;</span>\n         <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n      subtitlesMenu<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>display <span class=\"token operator\">=</span> <span class=\"token string\">'none'</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   subtitleMenuButtons<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>button<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token keyword\">return</span> listItem<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>This function builds the required <a href=\"/zh-CN/docs/Web/HTML/Element/li\"><code>&lt;li&gt;</code></a> and <a href=\"/zh-CN/docs/Web/HTML/Element/button\"><code>&lt;button&gt;</code></a> elements, and returns them so they can be added to the subtitles menu list. It also sets up the required event listeners on the button to toggle the relevant subtitle set on or off. This is done by simply setting the required subtlte's <code>mode</code> attribute to <code>showing</code>, and setting the others to <code>hidden</code>.</p>\n<p>Once the menu is built, it is then inserted into the DOM at the bottom of the videoContainer.</p>\n<p>Initially the menu is hidden by default, so an event listener needs to be added to our subtitles button to toggle it:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>subtitles<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>subtitlesMenu<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      subtitlesMenu<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>display <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>subtitlesMenu<span class=\"token punctuation\">.</span>style<span class=\"token punctuation\">.</span>display <span class=\"token operator\">==</span> <span class=\"token string\">'block'</span> <span class=\"token operator\">?</span> <span class=\"token string\">'none'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'block'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n   <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"css_代码","title":"CSS 代码","isH3":true,"content":"<p>We also added some rudimentary styling for the newly created subtitles menu:</p>\n<div class=\"code-example\"><pre class=\"brush: css notranslate\"><code><span class=\"token selector\">.subtitles-menu</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">display</span><span class=\"token punctuation\">:</span>none<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">position</span><span class=\"token punctuation\">:</span>absolute<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">bottom</span><span class=\"token punctuation\">:</span>14.8%<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">right</span><span class=\"token punctuation\">:</span>20px<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">background</span><span class=\"token punctuation\">:</span>#666<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">list-style-type</span><span class=\"token punctuation\">:</span>none<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">margin</span><span class=\"token punctuation\">:</span>0<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span>0<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">width</span><span class=\"token punctuation\">:</span>100px<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span>10px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.subtitles-menu li</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span>0<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">text-align</span><span class=\"token punctuation\">:</span>center<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.subtitles-menu li button</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">border</span><span class=\"token punctuation\">:</span>none<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">background</span><span class=\"token punctuation\">:</span>#000<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">color</span><span class=\"token punctuation\">:</span>#fff<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">cursor</span><span class=\"token punctuation\">:</span>pointer<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">width</span><span class=\"token punctuation\">:</span>90%<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">padding</span><span class=\"token punctuation\">:</span>2px 5px<span class=\"token punctuation\">;</span>\n    <span class=\"token property\">border-radius</span><span class=\"token punctuation\">:</span>2px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"为字幕添加样式","title":"为字幕添加样式","isH3":false,"content":"<p>One of the less well known about and supported features of WebVTT is the ability to style the individual subtitles (something called text cues) via <a href=\"https://dev.w3.org/html5/webvtt/#css-extensions\" class=\"external\" rel=\" noopener\">CSS Extensions</a>.</p>\n<p>The <code>::cue</code> pseudo-element is the key to targetting individual text track cues for styling, as it matches any defined cue. There are only a handful of CSS properties that can be applied to a text cue:</p>\n<ul>\n  <li><a href=\"/zh-CN/docs/Web/CSS/color\"><code>color</code></a></li>\n  <li><a href=\"/zh-CN/docs/Web/CSS/opacity\"><code>opacity</code></a></li>\n  <li><a href=\"/zh-CN/docs/Web/CSS/visibility\"><code>visibility</code></a></li>\n  <li><a href=\"/zh-CN/docs/Web/CSS/text-decoration\"><code>text-decoration</code></a></li>\n  <li><a href=\"/zh-CN/docs/Web/CSS/text-shadow\"><code>text-shadow</code></a></li>\n  <li><a href=\"/zh-CN/docs/Web/CSS/background\"><code>background</code></a> shorthand properties</li>\n  <li><a href=\"/zh-CN/docs/Web/CSS/outline\"><code>outline</code></a> shorthand properties</li>\n  <li><a href=\"/zh-CN/docs/Web/CSS/font\"><code>font</code></a> shorthand properties, including <a href=\"/zh-CN/docs/Web/CSS/line-height\"><code>line-height</code></a></li>\n  <li><a href=\"/zh-CN/docs/Web/CSS/white-space\"><code>white-space</code></a></li>\n</ul>\n<p>For example, to change the text colour of the text track cues you can write:</p>\n<div class=\"code-example\"><pre class=\"brush: css notranslate\"><code><span class=\"token selector\">::cue</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token property\">color</span><span class=\"token punctuation\">:</span>#ccc<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>If the WebVTT file uses <a href=\"https://dev.w3.org/html5/webvtt/#dfn-webvtt-cue-voice-span\" class=\"external\" rel=\" noopener\">voice spans</a>, which allow cues to be defined as having a particular \"voice\":</p>\n<div class=\"code-example\"><pre class=\"brush: plain notranslate\">0\n00:00:00.000 --&gt; 00:00:12.000\n&lt;v Test&gt;[Test]&lt;/v&gt;\n</pre></div>\n<p>Then this specific 'voice' will be stylable like so:</p>\n<div class=\"code-example\"><pre class=\"brush: css notranslate\"><code><span class=\"token selector\">::cue(v[voice='Test'])</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token property\">color</span><span class=\"token punctuation\">:</span>#fff<span class=\"token punctuation\">;</span>\n   <span class=\"token property\">background</span><span class=\"token punctuation\">:</span>#0095dd<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<div class=\"notecard note\" id=\"sect2\">\n  <p><strong>备注：</strong> Some of the styling of cues with ::cue currently works on Chrome, Opera, and Safari, but not yet on Firefox.</p>\n</div>"}},{"type":"prose","value":{"id":"浏览器兼容","title":"浏览器兼容","isH3":false,"content":"<p><a href=\"http://caniuse.com/webvtt\" class=\"external\" rel=\" noopener\">Browser support for WebVTT and the <code>&lt;track&gt;</code> element</a> is fairly good, although some browsers differ slightly in their implementation.</p>"}},{"type":"prose","value":{"id":"internet_explorer","title":"Internet Explorer","isH3":true,"content":"<p>Internet Explorer 10+ subtitles are enabled by default, and the default controls contain a button and a menu that offers the same functionality as the menu we just built. The <code>default</code> attribute is also supported.</p>\n<div class=\"notecard note\" id=\"sect3\">\n  <p><strong>备注：</strong> IE will completely ignore WebVTT files unless you define the MIME type. This can easily be done by adding an <code>.htaccess</code> file to an appropriate directory that contains <code>AddType text/vtt .vtt</code>.</p>\n</div>"}},{"type":"prose","value":{"id":"safari","title":"Safari","isH3":true,"content":"<p>Safari 6.1+ has similar support to Internet Explorer 10+, displaying a menu with the different available options, with the addition of an \"Auto\" option, which allows the browser to choose.</p>"}},{"type":"prose","value":{"id":"chrome_and_opera","title":"Chrome and Opera","isH3":true,"content":"<p>These browsers have similar implementations again: subtitles are enabled by default and the default control set contains a 'cc' button that turns subtitles on and off. Chrome and Opera ignore the <code>default</code> attribute on the <code>&lt;track&gt;</code> element and will instead try to match the browser's language to the subtitle's language.</p>"}},{"type":"prose","value":{"id":"firefox","title":"Firefox","isH3":true,"content":"<p>Firefox's implementation was completely broken due to a <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=981280\" class=\"external\" rel=\" noopener\">bug</a>, leading to Mozilla turning off WebVTT support by default (you can turn it on via the <code>media.webvtt.enabled</code> flag.) However, <del>this bug looks to have been fixed and WebVTT support re-enabled as of Gecko 31, so this will not be a problem for Firefox final release users for much longer (on Gecko 29 as of the time of this writing)</del> this has been fixed as of Firefox 31, and everything works as it should.</p>"}},{"type":"prose","value":{"id":"plugins","title":"Plugins","isH3":false,"content":"<p>If, after reading through this article you decide that you can't be bothered to do all of this and want someone else to do it for you, there are plenty of plugins out there that offer caption and subtitle support that you can use.</p>\n<dl>\n  <dt id=\"plyr.io\"><a href=\"https://plyr.io\" class=\"external\" rel=\" noopener\">plyr.io</a></dt>\n  <dd>\n    <p>This modern video player implements subtitles in both SRT and WebVTT file formats.</p>\n  </dd>\n  <dt id=\"playr\"><a href=\"https://www.delphiki.com/html5/playr/\" class=\"external\" rel=\" noopener\">playr</a></dt>\n  <dd>\n    <p>This small plugin implements subtitles, captions, and chapters as well as both WebVTT and SRT file formats.</p>\n  </dd>\n  <dt id=\"flowplayer\"><a href=\"https://flowplayer.org/player/\" class=\"external\" rel=\" noopener\">Flowplayer</a></dt>\n  <dd>\n    <p>HTML5 player supporting WebVTT.</p>\n  </dd>\n  <dt id=\"jwplayer\"><a href=\"https://www.jwplayer.com/\" class=\"external\" rel=\" noopener\">jwplayer</a></dt>\n  <dd>\n    <p>This video player is very extensive and does a lot more than simply support video captions. It supports the WebVTT, SRT and DFXP formats.</p>\n  </dd>\n  <dt id=\"mediaelement.js\"><a href=\"http://mediaelementjs.com/\" class=\"external\" rel=\" noopener\">MediaElement.js</a></dt>\n  <dd>\n    <p>Another complete video player that also support video captions, albeit only in SRT format.</p>\n  </dd>\n  <dt id=\"leanback_player\"><a href=\"https://www.leanbackplayer.com/\" class=\"external\" rel=\" noopener\">LeanBack Player</a></dt>\n  <dd>\n    <p>Yet another video player that supports WebVTT captions as well as providing other standard player functionality.</p>\n  </dd>\n  <dt id=\"sublimevideo\"><a href=\"https://sublimevideo.net\" class=\"external\" rel=\" noopener\">SublimeVideo</a></dt>\n  <dd>\n    <p>This player also supports captions through WebVTT and SRT files.</p>\n  </dd>\n  <dt id=\"video.js\"><a href=\"https://www.videojs.com/\" class=\"external\" rel=\" noopener\">Video.js</a></dt>\n  <dd>\n    <p>Supports WebVTT video subtitles.</p>\n  </dd>\n  <dt id=\"radiant_media_player\"><a href=\"https://www.radiantmediaplayer.com\" class=\"external\" rel=\" noopener\">Radiant Media Player</a></dt>\n  <dd>\n    <p>Supports multi-languages WebVTT closed captions</p>\n  </dd>\n</dl>\n<div class=\"notecard note\" id=\"sect4\">\n  <p><strong>备注：</strong> You can find an excellent list of HTML5 Video Players and their current \"state\" at <a href=\"https://praegnanz.de/html5video/\" class=\"external\" rel=\" noopener\">HTML5 Video Player Comparison</a>.</p>\n</div>"}}],"toc":[{"text":"案例","id":"案例"},{"text":"HTML5 视频字幕","id":"html5_视频字幕"},{"text":"修改 HTML 和 CSS","id":"修改_html_和_css"},{"text":"使用字幕","id":"使用字幕"},{"text":"为字幕添加样式","id":"为字幕添加样式"},{"text":"浏览器兼容","id":"浏览器兼容"},{"text":"Plugins","id":"plugins"}],"summary":"在其他文章中我们学会了如何使用HTMLMediaElement 和 Window.fullScreen API 创建视频播放器以及如何给视频播放器 添加样式. 本文将介绍如何用 the WebVTT format (en-US) 和 <track> 元素为视频添加字幕和翻译","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Adding captions and subtitles to HTML video","locale":"en-US","native":"English (US)"},{"title":"HTML5 の動画へのキャプションと字幕の追加","locale":"ja","native":"日本語"},{"title":"HTML5 영상에 캡션과 자막 붙이기","locale":"ko","native":"한국어"},{"title":"Adding captions and subtitles to HTML5 video","locale":"ru","native":"Русский"}],"source":{"folder":"zh-cn/web/guide/audio_and_video_delivery/adding_captions_and_subtitles_to_html5_video","github_url":"https://github.com/mdn/translated-content/blob/main/files/zh-cn/web/guide/audio_and_video_delivery/adding_captions_and_subtitles_to_html5_video/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/zh-CN/docs/Web","title":"Web 开发技术"},{"uri":"/zh-CN/docs/Web/Guide","title":"Web 开发者指南"},{"uri":"/zh-CN/docs/Web/Guide/Audio_and_video_delivery","title":"Audio and Video Delivery"},{"uri":"/zh-CN/docs/Web/Guide/Audio_and_video_delivery/Adding_captions_and_subtitles_to_HTML5_video","title":"Adding captions and subtitles to HTML5 video"}],"pageTitle":"Adding captions and subtitles to HTML5 video - Web 开发者指南 | MDN","noIndexing":false}}