{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"CORS errors","mdn_url":"/zh-CN/docs/Web/HTTP/CORS/Errors","locale":"zh-CN","native":"中文 (简体)","sidebarHTML":"","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p><a href=\"/zh-CN/docs/Web/HTTP/CORS\">Cross-Origin Resource Sharing</a> (<a href=\"/zh-CN/docs/Glossary/CORS\">CORS</a>) 是一种允许服务器放宽同源策略的标准。这用于明确允许一些跨源请求，同时拒绝其他请求。例如，如果站点提供外界嵌入的服务，则可能需要放宽同源策略（<a href=\"/zh-CN/docs/Web/Security/Same-origin_policy\">same-origin policy</a>）。设置这样的 CORS 配置并不一定容易，并且可能存在一些挑战。在这些页面中，我们将研究一些常见的 CORS 错误消息以及如何解决它们。</p>\n<p>如果未正确设置 CORS 配置，浏览器控制台将显示错误，例如<code>\"Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at $somesite\"（</code>跨源请求已阻止：同源策略禁止在某些站点上读取远程资源”），表示请求因违反 CORS 安全性而被阻止规则。但这可能不一定是设置错误。因为用户的 Web 应用程序和远程外部服务可能故意禁止该请求。如果要使端点可用，则需要进行一些调试才能成功。</p>"}},{"type":"prose","value":{"id":"确定问题","title":"确定问题","isH3":false,"content":"<p>要了解 CORS 配置的基本问题，您需要找出哪个请求有问题以及原因。步骤如下：</p>\n<ol>\n  <li>打开有问题的网站并打开开发者工具（<a href=\"https://firefox-source-docs.mozilla.org/devtools-user/index.html\" class=\"external\" rel=\" noopener\">Developer Tools</a>）。</li>\n  <li>尝试重现失败的事务并检查控制台（ <a href=\"https://firefox-source-docs.mozilla.org/devtools-user/web_console/index.html\" class=\"external\" rel=\" noopener\">console</a>）是否看到 CORS 违规错误消息。它可能看起来像这样：</li>\n</ol>\n<p>\n  <img src=\"/en-US/docs/Web/HTTP/CORS/Errors/cors-error2.png\" alt=\"Firefox console showing CORS error\" width=\"911\" height=\"129\" loading=\"lazy\">\n</p>\n<p>错误消息的文本将类似于以下内容：</p>\n<div class=\"code-example\"><pre class=\"brush: plain notranslate\">Cross-Origin Request Blocked: The Same Origin Policy disallows\nreading the remote resource at https://some-url-here. (Reason:\nadditional information here).\n</pre></div>\n<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>备注：</strong> 出于安全原因，JavaScript 代码无法给出有关 CORS 请求出错的详细信息。所有代码都知道发生了错误。确定具体问题的唯一方法是查看浏览器的控制台以获取详细信息。</p>\n</div>"}},{"type":"prose","value":{"id":"cors_错误信息","title":"CORS 错误信息","isH3":false,"content":"<p>当请求因 CORS 失败时，Firefox 的控制台会在其控制台中显示消息。错误文本的一部分是“原因”消息，它提供了对出错的更深入的了解。消息的原因如下：</p>\n<ul>\n  <li><a href=\"/zh-CN/docs/Web/HTTP/CORS/Errors/CORSDisabled\">原因：CORS 被禁用</a></li>\n  <li><a href=\"/zh-CN/docs/Web/HTTP/CORS/Errors/CORSDidNotSucceed\">原因：CORS 请求未成功</a></li>\n  <li><a href=\"/zh-CN/docs/Web/HTTP/CORS/Errors/CORSOriginHeaderNotAdded\">原因：CORS 头字段“Origin”未被添加</a></li>\n  <li><a href=\"/zh-CN/docs/Web/HTTP/CORS/Errors/CORSExternalRedirectNotAllowed\">原因：CORS 不允许请求外部重定向</a></li>\n  <li><a href=\"/zh-CN/docs/Web/HTTP/CORS/Errors/CORSRequestNotHttp\">Reason: CORS request not http</a></li>\n  <li><a href=\"/zh-CN/docs/Web/HTTP/CORS/Errors/CORSMissingAllowOrigin\">Reason: CORS header ‘Access-Control-Allow-Origin’ missing</a></li>\n  <li><a href=\"/zh-CN/docs/Web/HTTP/CORS/Errors/CORSAllowOriginNotMatchingOrigin\">Reason: CORS header ‘Access-Control-Allow-Origin’ does not match ‘xyz’</a></li>\n  <li><a href=\"/zh-CN/docs/Web/HTTP/CORS/Errors/CORSNotSupportingCredentials\">Reason: Credential is not supported if the CORS header ‘Access-Control-Allow-Origin’ is ‘*’</a></li>\n  <li><a href=\"/zh-CN/docs/Web/HTTP/CORS/Errors/CORSMethodNotFound\">Reason: Did not find method in CORS header ‘Access-Control-Allow-Methods’</a></li>\n  <li><a href=\"/zh-CN/docs/Web/HTTP/CORS/Errors/CORSMIssingAllowCredentials\">Reason: expected ‘true’ in CORS header ‘Access-Control-Allow-Credentials’</a></li>\n  <li><a href=\"/zh-CN/docs/Web/HTTP/CORS/Errors/CORSPreflightDidNotSucceed\">Reason: CORS preflight channel did not succeed</a></li>\n  <li><a href=\"/zh-CN/docs/Web/HTTP/CORS/Errors/CORSInvalidAllowMethod\">Reason: invalid token ‘xyz’ in CORS header ‘Access-Control-Allow-Methods’</a></li>\n  <li><a href=\"/zh-CN/docs/Web/HTTP/CORS/Errors/CORSInvalidAllowHeader\">Reason: invalid token ‘xyz’ in CORS header ‘Access-Control-Allow-Headers’</a></li>\n  <li><a href=\"/zh-CN/docs/Web/HTTP/CORS/Errors/CORSMissingAllowHeaderFromPreflight\">Reason: missing token ‘xyz’ in CORS header ‘Access-Control-Allow-Headers’ from CORS preflight channel</a></li>\n  <li><a href=\"/zh-CN/docs/Web/HTTP/CORS/Errors/CORSMultipleAllowOriginNotAllowed\">Reason: Multiple CORS header ‘Access-Control-Allow-Origin’ not allowed</a></li>\n</ul>"}},{"type":"prose","value":{"id":"参见","title":"参见","isH3":false,"content":"<ul>\n  <li>Glossary: <a href=\"/zh-CN/docs/Glossary/CORS\">CORS</a></li>\n  <li><a href=\"/zh-CN/docs/Web/HTTP/CORS\">CORS introduction</a></li>\n  <li><a href=\"/en-US/docs/Web/HTTP/CORS\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">Server-side CORS settings (en-US)</a></li>\n  <li><a href=\"/zh-CN/docs/Web/HTML/CORS_enabled_image\">CORS enabled image</a></li>\n  <li><a href=\"/zh-CN/docs/Web/HTML/Attributes/crossorigin\">CORS settings attributes</a></li>\n  <li><a href=\"https://www.test-cors.org\" class=\"external\" rel=\" noopener\">https://www.test-cors.org</a> – page to test CORS requests</li>\n</ul>"}}],"toc":[{"text":"确定问题","id":"确定问题"},{"text":"CORS 错误信息","id":"cors_错误信息"},{"text":"参见","id":"参见"}],"summary":"Cross-Origin Resource Sharing (CORS) 是一种允许服务器放宽同源策略的标准。这用于明确允许一些跨源请求，同时拒绝其他请求。例如，如果站点提供外界嵌入的服务，则可能需要放宽同源策略（same-origin policy）。设置这样的 CORS 配置并不一定容易，并且可能存在一些挑战。在这些页面中，我们将研究一些常见的 CORS 错误消息以及如何解决它们。","popularity":0.0014,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"CORS errors","locale":"en-US","native":"English (US)"},{"title":"CORS errors","locale":"es","native":"Español"},{"title":"CORS errors","locale":"fr","native":"Français"},{"title":"CORS のエラー","locale":"ja","native":"日本語"},{"title":"CORS errors","locale":"ko","native":"한국어"},{"title":"CORS errors","locale":"pt-BR","native":"Português (do Brasil)"},{"title":"CORS errors","locale":"ru","native":"Русский"},{"title":"CORS errors","locale":"zh-TW","native":"正體中文 (繁體)"}],"source":{"folder":"zh-cn/web/http/cors/errors","github_url":"https://github.com/mdn/translated-content/blob/main/files/zh-cn/web/http/cors/errors/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/zh-CN/docs/Web","title":"Web 开发技术"},{"uri":"/zh-CN/docs/Web/HTTP","title":"HTTP"},{"uri":"/zh-CN/docs/Web/HTTP/CORS","title":"跨源资源共享（CORS）"},{"uri":"/zh-CN/docs/Web/HTTP/CORS/Errors","title":"CORS errors"}],"pageTitle":"CORS errors - HTTP | MDN","noIndexing":false}}