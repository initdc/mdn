{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"SameSite cookies","mdn_url":"/zh-CN/docs/Web/HTTP/Headers/Set-Cookie/SameSite","locale":"zh-CN","native":"中文 (简体)","sidebarHTML":"","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p><strong><code>SameSite</code></strong> 是 HTTP 响应头 <a href=\"/zh-CN/docs/Web/HTTP/Headers/Set-Cookie\"><code>Set-Cookie</code></a> 的属性之一。它允许您声明该 Cookie 是否仅限于第一方或者同一站点上下文。</p>"}},{"type":"prose","value":{"id":"值","title":"值","isH3":false,"content":"<p><code>SameSite</code> 接受下面三个值：</p>"}},{"type":"prose","value":{"id":"lax","title":"<code>Lax</code>","isH3":true,"content":"<p>Cookies 允许与顶级导航一起发送，并将与第三方网站发起的 GET 请求一起发送。这是浏览器中的默认值。</p>","titleAsText":"Lax"}},{"type":"prose","value":{"id":"strict","title":"<code>Strict</code>","isH3":true,"content":"<p>Cookies 只会在第一方上下文中发送，不会与第三方网站发起的请求一起发送。</p>","titleAsText":"Strict"}},{"type":"prose","value":{"id":"none","title":"<code>None</code>","isH3":true,"content":"<p>Cookie 将在所有上下文中发送，即允许跨站发送。</p>\n<p>以前 <code>None</code> 是默认值，但最近的浏览器版本将 <code>Lax</code> 作为默认值，以便对某些类型的跨站请求伪造（<a href=\"/zh-CN/docs/Glossary/CSRF\">CSRF</a>）攻击具有相当强的防御能力。</p>\n<p>使用 <code>None</code> 时，需在最新的浏览器版本中使用 <a href=\"/zh-CN/docs/Web/HTTP/Headers/Set-Cookie\"><code>Secure</code></a> 属性。更多信息见下文。</p>","titleAsText":"None"}},{"type":"prose","value":{"id":"针对常见警告信息的解决办法","title":"针对常见警告信息的解决办法","isH3":false,"content":""}},{"type":"prose","value":{"id":"samesitenone_需要_secure","title":"<code>SameSite=None</code> 需要 <code>Secure</code>","isH3":true,"content":"<p>如果没有设置 <code>Secure</code> 属性，控制台中可能会出现以下警告：</p>\n<blockquote>\n  <p>\n    Some cookies are misusing the “sameSite“ attribute, so it won’t work as expected.\n    Cookie “<em>myCookie</em>” rejected because it has the “sameSite=none” attribute but is missing the “secure” attribute.\n  </p>\n</blockquote>\n<p>出现此警告是因为需要 <code>SameSite=None</code> 但未标记 <code>Secure</code> 的任何 cookie 都将被拒绝。</p>\n<div class=\"code-example\"><pre class=\"brush: plain example-bad notranslate\">Set-Cookie: flavor=choco; SameSite=None\n</pre></div>\n<p>要解决此问题，必须将 <code>Secure</code> 属性添加到 <code>SameSite=None</code> cookies 中。</p>\n<div class=\"code-example\"><pre class=\"brush: plain example-good notranslate\">Set-Cookie: flavor=choco; SameSite=None; Secure\n</pre></div>\n<p><a href=\"/zh-CN/docs/Web/HTTP/Headers/Set-Cookie\"><code>Secure</code></a> cookie 仅通过 HTTPS 协议加密发送到服务器。请注意，不安全站点（<code>http:</code>）无法使用 <code>Secure</code> 指令设置 cookies。</p>","titleAsText":"SameSite=None 需要 Secure"}},{"type":"prose","value":{"id":"没有_samesite_属性的_cookies_默认为_samesitelax","title":"没有 <code>SameSite</code> 属性的 Cookies 默认为 <code>SameSite=Lax</code>","isH3":true,"content":"<p>最新版本的现代浏览器为 cookies 的 <code>SameSite</code> 提供了更安全的默认值，因此控制台中可能会显示以下消息：</p>\n<blockquote>\n  <p>\n    Some cookies are misusing the “sameSite“ attribute, so it won’t work as expected.\n    Cookie “<em>myCookie</em>” has “sameSite” policy set to “lax” because it is missing a “sameSite” attribute, and “sameSite=lax” is the default value for this attribute.\n  </p>\n</blockquote>\n<p>出现警告是因为未显式指定 cookie 的 <code>SameSite</code> 属性：</p>\n<div class=\"code-example\"><pre class=\"brush: plain example-bad notranslate\">Set-Cookie: flavor=choco\n</pre></div>\n<p>虽然您可以依赖现代浏览器自动应用 <code>SameSite=Lax</code>，但您应该显式地指定它，以便清楚地传达您的意图，即要如何将 <code>SameSite</code> 属性应用到您的 cookie。这也将改善跨浏览器的体验，因为并不是所有浏览器都默认为 <code>Lax</code>。</p>\n<div class=\"code-example\"><pre class=\"brush: plain example-good notranslate\">Set-Cookie: flavor=choco; SameSite=Lax\n</pre></div>","titleAsText":"没有 SameSite 属性的 Cookies 默认为 SameSite=Lax"}},{"type":"prose","value":{"id":"示例","title":"<strong>示例</strong>","isH3":false,"content":"<div class=\"code-example\"><pre class=\"brush: plain notranslate\">RewriteEngine on\nRewriteBase \"/\"\nRewriteCond \"%{HTTP_HOST}\"       \"^example\\.org$\" [NC]\nRewriteRule \"^(.*)\"              \"https://www.example.org/index.html\" [R=301,L,QSA]\nRewriteRule \"^(.*)\\.ht$\"         \"index.php?nav=$1 [NC,L,QSA,CO=RewriteRule;01;https://www.example.org;30/;SameSite=None;Secure]\nRewriteRule \"^(.*)\\.htm$\"        \"index.php?nav=$1 [NC,L,QSA,CO=RewriteRule;02;https://www.example.org;30/;SameSite=None;Secure]\nRewriteRule \"^(.*)\\.html$\"       \"index.php?nav=$1 [NC,L,QSA,CO=RewriteRule;03;https://www.example.org;30/;SameSite=None;Secure]\n[...]\nRewriteRule \"^admin/(.*)\\.html$\" \"admin/index.php?nav=$1 [NC,L,QSA,CO=RewriteRule;09;https://www.example.org:30/;SameSite=Strict;Secure]\n</pre></div>","titleAsText":"示例"}},{"type":"specifications","value":{"title":"规范","id":"规范","isH3":false,"specifications":[{"bcdSpecificationURL":"https://httpwg.org/specs/rfc6265.html#sane-set-cookie","title":"HTTP State Management Mechanism"},{"bcdSpecificationURL":"https://httpwg.org/http-extensions/draft-ietf-httpbis-rfc6265bis.html#name-the-samesite-attribute","title":"Cookies: HTTP State Management Mechanism"}],"query":"http.headers.Set-Cookie.SameSite"}},{"type":"browser_compatibility","value":{"title":"浏览器兼容性","id":"浏览器兼容性","isH3":false,"query":"http.headers.Set-Cookie.SameSite","dataURL":"/zh-CN/docs/Web/HTTP/Headers/Set-Cookie/SameSite/bcd.json"}},{"type":"prose","value":{"id":"另请参阅","title":"另请参阅","isH3":false,"content":"<ul>\n  <li><a href=\"/zh-CN/docs/Web/HTTP/Cookies\">HTTP cookies</a></li>\n  <li><a href=\"/zh-CN/docs/Web/HTTP/Headers/Cookie\"><code>Cookie</code></a></li>\n  <li><a href=\"/zh-CN/docs/Web/API/Document/cookie\"><code>Document.cookie</code></a></li>\n</ul>"}}],"toc":[{"text":"值","id":"值"},{"text":"针对常见警告信息的解决办法","id":"针对常见警告信息的解决办法"},{"text":"<strong>示例</strong>","id":"示例"},{"text":"规范","id":"规范"},{"text":"浏览器兼容性","id":"浏览器兼容性"},{"text":"另请参阅","id":"另请参阅"}],"summary":"SameSite 是 HTTP 响应头 Set-Cookie 的属性之一。它允许您声明该 Cookie 是否仅限于第一方或者同一站点上下文。","popularity":0.0013,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"SameSite cookies","locale":"en-US","native":"English (US)"},{"title":"SameSite cookies","locale":"fr","native":"Français"},{"title":"SameSite cookies","locale":"ja","native":"日本語"},{"title":"SameSite cookies","locale":"pt-BR","native":"Português (do Brasil)"}],"source":{"folder":"zh-cn/web/http/headers/set-cookie/samesite","github_url":"https://github.com/mdn/translated-content/blob/main/files/zh-cn/web/http/headers/set-cookie/samesite/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/zh-CN/docs/Web","title":"Web 开发技术"},{"uri":"/zh-CN/docs/Web/HTTP","title":"HTTP"},{"uri":"/zh-CN/docs/Web/HTTP/Headers","title":"HTTP Headers"},{"uri":"/zh-CN/docs/Web/HTTP/Headers/Set-Cookie","title":"Set-Cookie"},{"uri":"/zh-CN/docs/Web/HTTP/Headers/Set-Cookie/SameSite","title":"SameSite cookies"}],"pageTitle":"SameSite cookies - HTTP | MDN","noIndexing":false}}