{"doc":{"isMarkdown":true,"isTranslated":true,"isActive":true,"flaws":{},"title":"安全上下文","mdn_url":"/zh-CN/docs/Web/Security/Secure_Contexts","locale":"zh-CN","native":"中文 (简体)","sidebarHTML":"\n<ol><li><a href=\"/zh-CN/docs/Web/Security/Certificate_Transparency\">HTTP Public Key Pinning (HPKP)</a></li><li><a href=\"/zh-CN/docs/Web/Security/Subresource_Integrity\">Subresource Integrity</a></li><li><a href=\"/zh-CN/docs/Web/Security/Transport_Layer_Security\">传输层安全协议</a></li><li><a href=\"/zh-CN/docs/Web/Security/Secure_Contexts\">安全上下文</a></li><li><a href=\"/zh-CN/docs/Web/Security/Weak_Signature_Algorithm\">弱签名算法</a></li><li><a href=\"/zh-CN/docs/Web/Security/Same-origin_policy\">浏览器的同源策略</a></li><li><a href=\"/zh-CN/docs/Web/Security/Securing_your_site\">确保你的站点安全</a><ol><li><a href=\"/zh-CN/docs/Web/Security/Securing_your_site\">确保你的站点安全</a></li><li><a href=\"/zh-CN/docs/Web/Security/Securing_your_site/Turning_off_form_autocompletion\">如何关闭表单自动填充</a></li></ol></li></ol>\n","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p><strong>安全上下文</strong>是 <code>Window</code> 与 <code>Worker</code> 中满足了最低标准的身份验证和机密性的概念。许多 Web API 仅能在安全上下文中访问。安全上下文的主要目标是防止<a href=\"https://zh.wikipedia.org/wiki/%E4%B8%AD%E9%97%B4%E4%BA%BA%E6%94%BB%E5%87%BB\" class=\"external\" rel=\" noopener\">中间人攻击者</a>访问强大的接口，从而导致更加严重的破坏。</p>"}},{"type":"prose","value":{"id":"为什么要限制某些功能？","title":"为什么要限制某些功能？","isH3":false,"content":"<p>有些 API 是非常强大的，能给攻击者更强的能力以及更多的操作：</p>\n<ul>\n  <li>侵犯用户隐私。</li>\n  <li>获得对用户计算机的低级访问权限。</li>\n  <li>获得对数据的访问权限，例如用户凭证。</li>\n</ul>"}},{"type":"prose","value":{"id":"上下文何时是安全的？","title":"上下文何时是安全的？","isH3":false,"content":"<p>当一个上下文满足<a href=\"https://w3c.github.io/webappsec-secure-contexts/\" class=\"external\" rel=\" noopener\">安全上下文</a>规范中定义的某些最低限度的认证和保密标准时，它是安全的。当一个特定的文档是<a href=\"https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context\" class=\"external\" rel=\" noopener\">顶层浏览上下文</a>（基本上是一个包含窗口或标签）的<a href=\"https://html.spec.whatwg.org/multipage/browsers.html#active-document\" class=\"external\" rel=\" noopener\">活动文档</a>时，它是在一个安全的上下文中。</p>\n<p>例如，在 <a href=\"/zh-CN/docs/Web/HTML/Element/iframe\"><code>&lt;iframe&gt;</code></a> 中的文档即使通过 TLS 进行传输，如果它有一个父节点没有通过 TLS 进行传输，其上下文也<strong>不会</strong>视为安全。</p>\n<p>然而，需要引起注意的是，如果某个不安全上下文创建了新窗口（无论是否指定 <a href=\"/zh-CN/docs/Web/API/Window/open\">noopener</a> 参数），那么创建新窗口的文档不安全的事实不会影响新窗口的安全性。这是因为，确定一个特定的文档是否在安全上下文中，仅仅需要考虑与之相关的顶层浏览上下文，而与是否碰巧使用了非安全的上下文来创建它无关。</p>\n<p>本地传递的资源，如那些带有 <code>http://127.0.0.1</code>、<code>http://localhost</code> 和 <code>http://*.localhost</code> 网址（如 <code>http://dev.whatever.localhost/</code>）和 <code>file://</code> 网址的资源也是认为经过安全传递的。</p>\n<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>备注：</strong> Firefox 84 及更新的版本支持 <code>http://localhost</code> 和 <code>http://*.localhost</code> URL 作为信任的源，而早期版本不支持这样做，因为还没有保证 <code>localhost</code> 映射到本地或回环地址上。</p>\n</div>\n<p>非本地资源要被认为是安全的，必须满足以下标准：</p>\n<ul>\n  <li>必须通过 <code>https://</code> 或 <code>wss://</code> URL 提供服务</li>\n  <li>用于传送资源的网络信道的安全属性不能是废弃的</li>\n</ul>"}},{"type":"prose","value":{"id":"特性检测","title":"特性检测","isH3":false,"content":"<p>页面可以通过暴露在全局范围的 <a href=\"/zh-CN/docs/Web/API/isSecureContext\"><code>isSecureContext</code></a> 布尔属性值真假来判断它是否处于安全上下文中。</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>isSecureContext<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 页面在安全上下文中，所以 service worker 可用</span>\n  navigator<span class=\"token punctuation\">.</span>serviceWorker<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/offline-worker.js\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// …</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"specifications","value":{"title":"规范","id":"规范","isH3":false,"specifications":[{"bcdSpecificationURL":"https://w3c.github.io/webappsec-secure-contexts/","title":"Secure Contexts"}],"query":"undefined"}},{"type":"prose","value":{"id":"参见","title":"参见","isH3":false,"content":"<ul>\n  <li><a href=\"/en-US/docs/Web/Security/Secure_Contexts/features_restricted_to_secure_contexts\" class=\"only-in-en-us\" title=\"Currently only available in English (US)\">仅在安全上下文中可用的平台特性 (en-US)</a>——只在安全上下文中可用的特性列表</li>\n  <li><a href=\"/zh-CN/docs/Web/API/isSecureContext\"><code>isSecureContext</code></a></li>\n  <li><a href=\"https://permission.site\" class=\"external\" rel=\" noopener\">https://permission.site</a>——一个允许你检查你的浏览器在 HTTP 和 HTTPS 上采用何种 API 权限检查的网站</li>\n  <li><a href=\"/zh-CN/docs/Web/HTTP/Headers/Strict-Transport-Security\">Strict-Transport-Security</a> HTTP 标头</li>\n</ul>"}}],"toc":[{"text":"为什么要限制某些功能？","id":"为什么要限制某些功能？"},{"text":"上下文何时是安全的？","id":"上下文何时是安全的？"},{"text":"特性检测","id":"特性检测"},{"text":"规范","id":"规范"},{"text":"参见","id":"参见"}],"summary":"安全上下文是 Window 与 Worker 中满足了最低标准的身份验证和机密性的概念。许多 Web API 仅能在安全上下文中访问。安全上下文的主要目标是防止中间人攻击者访问强大的接口，从而导致更加严重的破坏。","popularity":0,"modified":"2022-10-01T03:41:16.000Z","other_translations":[{"title":"Secure contexts","locale":"en-US","native":"English (US)"},{"title":"Secure Contexts","locale":"fr","native":"Français"},{"title":"安全なコンテキスト","locale":"ja","native":"日本語"}],"source":{"folder":"zh-cn/web/security/secure_contexts","github_url":"https://github.com/mdn/translated-content/blob/main/files/zh-cn/web/security/secure_contexts/index.md","last_commit_url":"https://github.com/mdn/translated-content/commit/921c46a374ab0a9f4cc809af0370f8c412e54701","filename":"index.md"},"parents":[{"uri":"/zh-CN/docs/Web","title":"Web 开发技术"},{"uri":"/zh-CN/docs/Web/Security","title":"Web 安全"},{"uri":"/zh-CN/docs/Web/Security/Secure_Contexts","title":"安全上下文"}],"pageTitle":"安全上下文 - Web 安全 | MDN","noIndexing":false}}