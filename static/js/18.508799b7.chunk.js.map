{"version":3,"sources":["document/forms/manage.tsx"],"names":["DocumentDelete","slug","locale","a","window","confirm","fetch","encodeURIComponent","method","headers","response","ok","alert","statusText","type","onClick","DocumentMove","newSlug","prompt","DocumentManage","documentURL","useDocumentURL","useParams","fetchURL","URLSearchParams","url","toString","data","useSWR","Error","status","json","className","role","metadata","to"],"mappings":"4NAOA,SAASA,EAAT,GAA2C,IAAjBC,EAAgB,EAAhBA,KAAMC,EAAU,EAAVA,OAAU,4CACxC,4BAAAC,EAAA,yDAEKC,OAAOC,QACN,uEAHN,iEAQyBC,MAAM,mBAAD,OACPC,mBAAmBN,GAAQ,IADpB,mBACkCC,GAC5D,CACEM,OAAQ,SACRC,QAAS,CAAE,eAAgB,sBAZjC,QAQQC,EARR,QAeeC,GACXP,OAAOQ,MAAM,iCAEbR,OAAOQ,MAAP,yCAA+CF,EAASG,aAlB5D,4CADwC,sBAuBxC,OACE,gCACE,wBAAQC,KAAK,SAASC,QAzBc,2CAyBpC,oBAGCd,EAJH,8BASJ,SAASe,EAAT,GAAyC,IAAjBf,EAAgB,EAAhBA,KAAMC,EAAU,EAAVA,OAAU,4CACtC,8BAAAC,EAAA,yDACQc,EAAUb,OAAOc,OACrB,qEAFJ,iEAOyBZ,MAAM,wBAAD,OACFC,mBACtBN,GAAQ,IAFgB,oBAGbgB,EAHa,mBAGKf,GAC/B,CACEM,OAAQ,QAZd,QAOQE,EAPR,QAeeC,GACXP,OAAOQ,MAAM,+BAEbR,OAAOQ,MAAP,yCAA+CF,EAASG,aAlB5D,4CADsC,sBAuBtC,OACE,gCACE,wBAAQC,KAAK,SAASC,QAzBY,2CAyBlC,kBAGCd,EAJH,8BASW,SAASkB,IACtB,IAAMC,EAAcC,cACZnB,EAAWoB,cAAXpB,OACFqB,EAAQ,qBAAiB,IAAIC,gBAAgB,CACjDC,IAAKL,IACJM,YACKC,EAASC,YAAOL,EAAD,uCAAW,WAAOE,GAAP,eAAAtB,EAAA,sEACTG,MAAMmB,GADG,WAC1Bf,EAD0B,QAElBC,GAFkB,sBAGxB,IAAIkB,MAAJ,UAAanB,EAASoB,OAAtB,eAAmCL,IAHX,uBAKnBf,EAASqB,OALU,mFAAX,uDAAfJ,KAQR,OACGA,GACC,uBAAMK,UAAU,yCAAyCC,KAAK,OAA9D,UACE,yCACUN,EAAKO,SAASjC,KACtB,cAAC,IAAD,CAAMkC,GAAIf,EAAaY,UAAU,QAAjC,sBAIF,cAAChC,EAAD,CAAsBC,KAAM0B,EAAKO,SAASjC,KAAMC,WAChD,cAACc,EAAD,CAAoBf,KAAM0B,EAAKO,SAASjC,KAAMC,eAGhD,uBAAM8B,UAAU,yCAAyCC,KAAK,OAA9D,UACG,IADH,iBAEY,S","file":"static/js/18.508799b7.chunk.js","sourcesContent":["import { useDocumentURL } from \"../hooks\";\nimport { useParams } from \"react-router\";\nimport { Link } from \"react-router-dom\";\nimport useSWR from \"swr\";\n\nimport \"./manage.scss\";\n\nfunction DocumentDelete({ slug, locale }) {\n  async function deleteDocument() {\n    if (\n      !window.confirm(\n        \"Are you sure you want to delete this document and all its children?\"\n      )\n    ) {\n      return;\n    }\n    const response = await fetch(\n      `/_document?slug=${encodeURIComponent(slug || \"\")}&locale=${locale}`,\n      {\n        method: \"DELETE\",\n        headers: { \"Content-Type\": \"application/json\" },\n      }\n    );\n    if (response.ok) {\n      window.alert(\"Document successfully deleted\");\n    } else {\n      window.alert(`Error while deleting document: ${response.statusText}`);\n    }\n  }\n\n  return (\n    <div>\n      <button type=\"button\" onClick={deleteDocument}>\n        delete\n      </button>\n      {slug} and all of its children\n    </div>\n  );\n}\n\nfunction DocumentMove({ slug, locale }) {\n  async function moveDocument() {\n    const newSlug = window.prompt(\n      \"Are you sure you want to move this document and all its children?\"\n    );\n    if (!newSlug) {\n      return;\n    }\n    const response = await fetch(\n      `/_document/move?slug=${encodeURIComponent(\n        slug || \"\"\n      )}&newSlug=${newSlug}&locale=${locale}`,\n      {\n        method: \"put\",\n      }\n    );\n    if (response.ok) {\n      window.alert(\"Document successfully moved\");\n    } else {\n      window.alert(`Error while deleting document: ${response.statusText}`);\n    }\n  }\n\n  return (\n    <div>\n      <button type=\"button\" onClick={moveDocument}>\n        move\n      </button>\n      {slug} and all of its children\n    </div>\n  );\n}\n\nexport default function DocumentManage() {\n  const documentURL = useDocumentURL();\n  const { locale } = useParams();\n  const fetchURL = `/_document?${new URLSearchParams({\n    url: documentURL,\n  }).toString()}`;\n  const { data } = useSWR(fetchURL, async (url) => {\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(`${response.status} on ${url}`);\n    }\n    return await response.json();\n  });\n\n  return (\n    (data && (\n      <main className=\"page-content-container document-manage\" role=\"main\">\n        <h2>\n          Manage {data.metadata.slug}\n          <Link to={documentURL} className=\"close\">\n            close\n          </Link>\n        </h2>\n        <DocumentDelete {...{ slug: data.metadata.slug, locale }} />\n        <DocumentMove {...{ slug: data.metadata.slug, locale }} />\n      </main>\n    )) || (\n      <main className=\"page-content-container document-manage\" role=\"main\">\n        {\" \"}\n        Loading â€¦{\" \"}\n      </main>\n    )\n  );\n}\n"],"sourceRoot":""}