{"version":3,"sources":["sitemap/index.tsx"],"names":["Sitemap","location","useLocation","navigate","useNavigate","locale","useLocale","pathname","endsWith","slice","searchPathname","replace","toLowerCase","React","useEffect","document","title","useSWR","url","a","fetch","response","ok","Error","status","json","revalidateOnFocus","data","error","useState","docs","setDocs","theseDocs","sort","b","localeCompare","Map","childCounts","setChildCounts","counts","split","root","forEach","portion","i","push","key","join","set","get","thisDoc","setThisDoc","newThisDoc","find","doc","searchFilter","setSearchFilter","searchSubmitted","setSearchSubmitted","filtered","setFiltered","depth","length","newFiltered","filter","startsWith","highlightIndex","setHighlightIndex","slug","opening","setOpening","editorOpeningError","setEditorOpeningError","openInYourEditor","console","log","sp","URLSearchParams","toString","statusText","text","body","unsetOpeningTimer","setTimeout","clearTimeout","id","className","Breadcrumb","FilterForm","onUpdate","submitted","onGoUp","parentPathname","onChangeHighlight","direction","nextNumber","GoBackUp","ShowTree","parentPath","parentBasename","to","hideTip","setHideTip","countBackspaces","setCountBackspaces","inputRef","useRef","focusSearch","useCallback","event","current","target","tagName","trim","s","blur","focus","window","addEventListener","removeEventListener","prefixPathname","onSubmit","preventDefault","type","ref","value","onChange","onFocus","onBlur","isReadOnly","CRUD_MODE_HOSTNAMES","includes","hostname","map","last","undefined","CRUD_MODE","href","role","aria-label","onClick","countChild","toLocaleString"],"mappings":"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","file":"static/js/19.445b08c7.chunk.js","sourcesContent":["import React from \"react\";\nimport { Link, useNavigate, useLocation } from \"react-router-dom\";\nimport useSWR from \"swr\";\n\nimport { CRUD_MODE, CRUD_MODE_HOSTNAMES } from \"../constants\";\nimport { useLocale } from \"../hooks\";\nimport { Loading } from \"../ui/atoms/loading\";\nimport { PageContentContainer } from \"../ui/atoms/page-content\";\n\nimport \"./index.scss\";\n\ninterface SearchIndexDoc {\n  url: string;\n  title: string;\n}\n\nexport default function Sitemap() {\n  const location = useLocation();\n  const navigate = useNavigate();\n  const locale = useLocale();\n\n  // Because you can load this app with something like `/en-us/_sitemap/Web/`\n  // we have to pretend that didn't happen and force it to be `/en-US/_sitemap/Web`\n  const pathname = location.pathname.endsWith(\"/\")\n    ? location.pathname.slice(0, -1)\n    : location.pathname;\n\n  // `pathname` is going to be something like `/en-US/_sitemap/Web/Foo`.\n  // Transform that to be just `en-us/docs/web/foo`.\n  const searchPathname = pathname\n    .replace(`/${locale}/_sitemap`, `/${locale}/docs`)\n    .toLowerCase();\n\n  React.useEffect(() => {\n    document.title = \"Sitemap\";\n  }, []);\n\n  const { data, error } = useSWR<SearchIndexDoc[] | null, Error | null>(\n    `/${locale}/search-index.json`,\n    async (url) => {\n      const response = await fetch(url);\n      if (!response.ok) {\n        throw new Error(`${response.status} on ${response.url}`);\n      }\n      return (await response.json()) as SearchIndexDoc[];\n    },\n    {\n      revalidateOnFocus: false,\n    }\n  );\n\n  const [docs, setDocs] = React.useState<SearchIndexDoc[] | null>(null);\n  React.useEffect(() => {\n    if (data) {\n      const theseDocs = [...data].sort((a, b) => a.url.localeCompare(b.url));\n      setDocs(theseDocs);\n    }\n  }, [data]);\n\n  const [childCounts, setChildCounts] = React.useState<Map<string, number>>(\n    new Map()\n  );\n  React.useEffect(() => {\n    const counts = new Map<string, number>();\n    if (docs) {\n      for (const { url } of docs) {\n        const split = url.split(\"/\");\n        const root = split.slice(0, 3);\n        split.slice(3).forEach((portion, i) => {\n          root.push(portion);\n          const key = root.join(\"/\");\n          counts.set(key, (counts.get(key) || 0) + 1);\n        });\n      }\n      setChildCounts(counts);\n    }\n  }, [docs]);\n\n  const [thisDoc, setThisDoc] = React.useState<SearchIndexDoc | null>(null);\n  React.useEffect(() => {\n    if (docs) {\n      const newThisDoc = docs.find((doc) => {\n        return doc.url.toLowerCase() === searchPathname;\n      });\n      setThisDoc(newThisDoc || null);\n    }\n  }, [searchPathname, docs]);\n\n  const [searchFilter, setSearchFilter] = React.useState(\"\");\n  React.useEffect(() => {\n    setSearchFilter(\"\");\n  }, [pathname]);\n  const [searchSubmitted, setSearchSubmitted] = React.useState(false);\n\n  const [filtered, setFiltered] = React.useState<SearchIndexDoc[] | null>(null);\n  React.useEffect(() => {\n    if (docs) {\n      const depth = searchPathname.split(\"/\").length;\n      const newFiltered = docs.filter((doc) => {\n        if (\n          doc.url.toLowerCase().startsWith(searchPathname) &&\n          depth + 1 === doc.url.split(\"/\").length\n        ) {\n          const baseName = doc.url.split(\"/\").slice(-1)[0].toLowerCase();\n          if (!baseName.startsWith(searchFilter.toLowerCase())) {\n            return false;\n          }\n          return true;\n        }\n        return false;\n      });\n      setFiltered(newFiltered);\n    }\n  }, [searchPathname, docs, searchFilter]);\n\n  const [highlightIndex, setHighlightIndex] = React.useState(0);\n  React.useEffect(() => {\n    setHighlightIndex(0);\n  }, [searchFilter]);\n\n  React.useEffect(() => {\n    if (searchSubmitted) {\n      if (filtered && filtered.length >= 1) {\n        const slug = filtered[highlightIndex].url.split(\"/\").slice(3);\n        setSearchFilter(\"\");\n        setSearchSubmitted(false);\n        navigate(`/${locale}/_sitemap/${slug.join(\"/\")}`);\n      }\n    }\n  }, [locale, filtered, searchSubmitted, navigate, highlightIndex]);\n\n  function changeHighlight(direction: \"up\" | \"down\") {\n    if (direction === \"up\") {\n      let nextNumber = highlightIndex - 1;\n      if (filtered) {\n        nextNumber =\n          ((nextNumber % filtered.length) + filtered.length) % filtered.length;\n      }\n      setHighlightIndex(nextNumber);\n    } else {\n      let nextNumber = highlightIndex + 1;\n      if (filtered) {\n        nextNumber = nextNumber % filtered.length;\n      }\n      setHighlightIndex(nextNumber);\n    }\n  }\n\n  const [opening, setOpening] = React.useState<string | null>(null);\n  const [editorOpeningError, setEditorOpeningError] =\n    React.useState<Error | null>(null);\n  React.useEffect(() => {\n    let unsetOpeningTimer: ReturnType<typeof setTimeout>;\n    if (opening) {\n      unsetOpeningTimer = setTimeout(() => {\n        setOpening(null);\n      }, 3000);\n    }\n    return () => {\n      if (unsetOpeningTimer) {\n        clearTimeout(unsetOpeningTimer);\n      }\n    };\n  }, [opening]);\n\n  async function openInYourEditor(url: string) {\n    console.log(`Going to try to open ${url} in your editor`);\n    setOpening(url);\n    const sp = new URLSearchParams();\n    sp.set(\"url\", url);\n    try {\n      const response = await fetch(`/_open?${sp.toString()}`);\n      if (!response.ok) {\n        if (response.status >= 500) {\n          setEditorOpeningError(\n            new Error(`${response.status}: ${response.statusText}`)\n          );\n        } else {\n          const body = await response.text();\n          setEditorOpeningError(new Error(`${response.status}: ${body}`));\n        }\n      }\n    } catch (err: any) {\n      setEditorOpeningError(err);\n    }\n  }\n\n  return (\n    <PageContentContainer>\n      <div id=\"sitemap\">\n        {error && (\n          <div className=\"notecard error\">\n            <h4>Error</h4>\n            <p>\n              <code>{error.toString()}</code>\n            </p>\n          </div>\n        )}\n\n        {editorOpeningError && (\n          <div className=\"notecard error\">\n            <h4>Error opening in your editor</h4>\n            <p>\n              <code>{editorOpeningError.toString()}</code>\n            </p>\n          </div>\n        )}\n\n        {!data && !error && <Loading />}\n        <div className=\"opening-in-your-editor\">\n          {opening && (\n            <>\n              Opening{\" \"}\n              <code>{opening.slice(opening.length - 50, opening.length)}</code>{\" \"}\n              in your editor...\n            </>\n          )}\n        </div>\n        {filtered && (\n          <Breadcrumb\n            pathname={pathname}\n            thisDoc={thisDoc}\n            openInYourEditor={openInYourEditor}\n          />\n        )}\n        {filtered && (\n          <FilterForm\n            pathname={pathname}\n            searchFilter={searchFilter}\n            onUpdate={(text: string, submitted: boolean) => {\n              setSearchFilter(text);\n              setSearchSubmitted(submitted);\n            }}\n            onGoUp={() => {\n              // Navigate to the parent! ...if possible\n              const split = pathname.split(\"/\");\n              if (split.length >= 4) {\n                const parentPathname = split.slice(0, -1);\n                navigate(parentPathname.join(\"/\"));\n              }\n            }}\n            onChangeHighlight={changeHighlight}\n          />\n        )}\n        {filtered &&\n          filtered.length === 0 &&\n          (searchFilter ? (\n            <em>nothing found</em>\n          ) : (\n            <em>has no further sub-documents</em>\n          ))}\n        {filtered && !searchFilter && <GoBackUp pathname={pathname} />}\n        {filtered && filtered.length > 0 && (\n          <ShowTree\n            filtered={filtered}\n            childCounts={childCounts}\n            highlightIndex={highlightIndex}\n            openInYourEditor={openInYourEditor}\n          />\n        )}\n        <p className=\"footer-note\">\n          Note, this sitemap only shows documents. Not any other applications.\n        </p>\n      </div>\n    </PageContentContainer>\n  );\n}\n\nfunction GoBackUp({ pathname }: { pathname: string }) {\n  const parentPath = pathname.split(\"/\").slice(0, -1);\n  if (parentPath.length <= 2) {\n    return null;\n  }\n  const parentBasename = parentPath[parentPath.length - 1];\n\n  return (\n    <p>\n      <Link to={parentPath.join(\"/\")}>\n        ↖️ Back up to{\" \"}\n        {parentPath.length <= 3 ? <em>root</em> : <code>{parentBasename}</code>}\n      </Link>\n    </p>\n  );\n}\n\nfunction FilterForm({\n  pathname,\n  searchFilter,\n  onUpdate,\n  onGoUp,\n  onChangeHighlight,\n}: {\n  pathname: string;\n  searchFilter: string;\n  onUpdate: (text: string, submitted: boolean) => void;\n  onGoUp: () => void;\n  onChangeHighlight: (s: \"up\" | \"down\") => void;\n}) {\n  const [hideTip, setHideTip] = React.useState(false);\n\n  const [countBackspaces, setCountBackspaces] = React.useState(0);\n  React.useEffect(() => {\n    if (countBackspaces >= 2) {\n      setCountBackspaces(0);\n      onGoUp();\n    }\n  }, [countBackspaces, onGoUp]);\n\n  const inputRef = React.useRef<null | HTMLInputElement>(null);\n\n  const focusSearch = React.useCallback(\n    (event: KeyboardEvent) => {\n      if (inputRef.current && event.target) {\n        const target = event.target as HTMLElement;\n\n        if (target === inputRef.current) {\n          if (event.key === \"ArrowDown\") {\n            onChangeHighlight(\"down\");\n          } else if (event.key === \"ArrowUp\") {\n            onChangeHighlight(\"up\");\n          }\n        }\n\n        if (target.tagName === \"INPUT\" || target.tagName === \"TEXTAREA\") {\n          if (event.key === \"Backspace\" && event.target === inputRef.current) {\n            if (!searchFilter.trim()) {\n              setCountBackspaces((s) => s + 1);\n            }\n          } else {\n            setCountBackspaces(0);\n          }\n\n          if (event.key === \"Escape\") {\n            inputRef.current.blur();\n          }\n        } else {\n          if (event.key === \"T\" || event.key === \"t\") {\n            inputRef.current.focus();\n            setCountBackspaces(0);\n          }\n        }\n      }\n    },\n    [onChangeHighlight, searchFilter]\n  );\n\n  React.useEffect(() => {\n    window.document.addEventListener(\"keyup\", focusSearch);\n    return () => {\n      window.document.removeEventListener(\"keyup\", focusSearch);\n    };\n  }, [focusSearch]);\n  const prefixPathname = pathname.replace(`/_sitemap`, \"/docs\");\n\n  return (\n    <form\n      className=\"filter-form\"\n      onSubmit={(event) => {\n        event.preventDefault();\n        onUpdate(searchFilter.trim(), true);\n      }}\n    >\n      <code>{prefixPathname}</code>/\n      <input\n        type=\"search\"\n        ref={inputRef}\n        value={searchFilter}\n        onChange={(event) => {\n          onUpdate(event.target.value, false);\n        }}\n        onFocus={() => {\n          setHideTip(true);\n        }}\n        onBlur={() => {\n          setHideTip(false);\n        }}\n      />{\" \"}\n      {!hideTip && (\n        <small className=\"keyboard-tip\">\n          Tip! press <kbd>t</kbd> on your keyboard to focus on search filter\n        </small>\n      )}\n    </form>\n  );\n}\n\nfunction Breadcrumb({\n  pathname,\n  thisDoc,\n  openInYourEditor,\n}: {\n  pathname: string;\n  thisDoc: SearchIndexDoc | null;\n  openInYourEditor: (url: string) => void;\n}) {\n  const locale = useLocale();\n  const split = pathname.split(\"/\").slice(3);\n  const root = pathname.split(\"/\").slice(0, 2);\n  root.push(\"_sitemap\");\n\n  const isReadOnly = !CRUD_MODE_HOSTNAMES.includes(window.location.hostname);\n\n  return (\n    <>\n      <ul className=\"breadcrumb\">\n        <li className=\"first\">\n          {split.length ? <Link to={root.join(\"/\")}>root</Link> : <em>root</em>}\n        </li>\n        {split.map((portion, i) => {\n          const last = i === split.length - 1;\n          root.push(portion);\n          return (\n            <li key={`${portion}${i}`} className={last ? \"last\" : undefined}>\n              {last ? (\n                <code>{portion}</code>\n              ) : (\n                <Link to={root.join(\"/\")}>\n                  <code>{portion}</code>\n                </Link>\n              )}\n            </li>\n          );\n        })}\n        <li className=\"this-doc\">\n          <b>Go to:</b>{\" \"}\n          {thisDoc ? (\n            <>\n              <Link to={thisDoc.url}>\n                <em>{thisDoc.title}</em>\n              </Link>{\" \"}\n              {CRUD_MODE && !isReadOnly && (\n                <small>\n                  (\n                  <a\n                    href={thisDoc.url}\n                    role=\"img\"\n                    aria-label=\"Editor pen\"\n                    onClick={(event) => {\n                      event.preventDefault();\n                      openInYourEditor(thisDoc.url);\n                    }}\n                    title=\"Open in your editor\"\n                  >\n                    Edit\n                  </a>\n                  )\n                </small>\n              )}\n            </>\n          ) : (\n            <Link to={`/${locale}/`}>Home page</Link>\n          )}\n        </li>\n      </ul>\n    </>\n  );\n}\n\nfunction ShowTree({\n  filtered,\n  childCounts,\n  highlightIndex,\n  openInYourEditor,\n}: {\n  filtered: SearchIndexDoc[];\n  childCounts: Map<string, number>;\n  highlightIndex: number;\n  openInYourEditor: (url: string) => void;\n}) {\n  const locale = useLocale();\n  const isReadOnly = !CRUD_MODE_HOSTNAMES.includes(window.location.hostname);\n  return (\n    <div className=\"tree\">\n      <ul>\n        {filtered.map((doc, i) => {\n          const countChild = childCounts.get(doc.url) || 0;\n          return (\n            <li\n              key={doc.url}\n              className={highlightIndex === i ? \"highlight\" : undefined}\n            >\n              <Link\n                to={doc.url.replace(\"/docs/\", \"/_sitemap/\")}\n                title={doc.title}\n              >\n                <code>{doc.url.replace(`/${locale}/docs`, \"\")}</code>\n              </Link>{\" \"}\n              <small>\n                (\n                {countChild === 1\n                  ? \"1 document\"\n                  : `${countChild.toLocaleString()} documents`}\n                {\" | \"}\n                <Link to={doc.url} title={`Go to: ${doc.title}`}>\n                  View\n                </Link>\n                {!isReadOnly && \" | \"}\n                {!isReadOnly && (\n                  <Link\n                    to={doc.url}\n                    title={`Edit: ${doc.title}`}\n                    onClick={(event) => {\n                      event.preventDefault();\n                      openInYourEditor(doc.url);\n                    }}\n                  >\n                    Edit\n                  </Link>\n                )}\n                )\n              </small>\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n}\n"],"sourceRoot":""}