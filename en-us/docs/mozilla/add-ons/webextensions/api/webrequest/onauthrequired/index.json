{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"webRequest.onAuthRequired","mdn_url":"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/onAuthRequired","locale":"en-US","native":"English (US)","sidebarHTML":"\n  <ol>\n    <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions\"><strong>Browser extensions</strong></a></li>\n    <li class=\"toggle\">\n      <details>\n        <summary>Getting started</summary>\n        <ol>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/What_are_WebExtensions\">What are extensions?</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Your_first_WebExtension\">Your first extension</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Your_second_WebExtension\">Your second extension</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension\">Anatomy of an extension</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Examples\">Example extensions</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/What_next_\">What next?</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary>Concepts</summary>\n        <ol>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Using_the_JavaScript_APIs\">Using the JavaScript APIs</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Content_scripts\">Content scripts</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Match_patterns\">Match patterns</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Working_with_files\">Working with files</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Internationalization\">Internationalization</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Content_Security_Policy\">Content Security Policy</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Native_messaging\">Native messaging</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Differences_between_API_implementations\">Differences between API implementations</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Chrome_incompatibilities\">Chrome incompatibilities</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary>User interface</summary>\n        <ol>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface\">User Interface</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Browser_action\">Toolbar button</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Page_actions\">Address bar button</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Sidebars\">Sidebars</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Context_menu_items\">Context menu items</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Options_pages\">Options page</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Extension_pages\">Extension pages</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Notifications\">Notifications</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Omnibox\">Address bar suggestions</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/devtools_panels\">Developer tools panels</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary>How to</summary>\n        <ol>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Intercept_HTTP_requests\">Intercept HTTP requests</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Modify_a_web_page\">Modify a web page</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Safely_inserting_external_content_into_a_page\">Insert external content</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Sharing_objects_with_page_scripts\">Share objects with page scripts</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Add_a_button_to_the_toolbar\">Add a button to the toolbar</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Implement_a_settings_page\">Implement a settings page</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Working_with_the_Tabs_API\">Work with the Tabs API</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Bookmarks_API\">Work with the Bookmarks API</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Work_with_the_Cookies_API\">Work with the Cookies API</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Work_with_contextual_identities\">Work with contextual identities</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Interact_with_the_clipboard\">Interact with the clipboard</a></li>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Build_a_cross_browser_extension\">Build a cross-browser extension</a></li>\n        </ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n        <summary><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Firefox_differentiators\">Firefox differentiators</a></summary>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details open=\"\">\n        <summary>JavaScript APIs</summary>\n        <ol><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/Browser_support_for_JavaScript_APIs\">Browser support for JavaScript APIs</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/action\">action</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/alarms\">alarms</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/bookmarks\">bookmarks</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/browserAction\">browserAction</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/browserSettings\">browserSettings</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/browsingData\">browsingData</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/captivePortal\">captivePortal</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/clipboard\">clipboard</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/commands\">commands</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/contentScripts\">contentScripts</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/contextualIdentities\">contextualIdentities</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/cookies\">cookies</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/devtools\">devtools</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/dns\">dns</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/downloads\">downloads</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/events\">events</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/extension\">extension</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/extensionTypes\">extensionTypes</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/find\">find</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/history\">history</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/i18n\">i18n</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/identity\">identity</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/idle\">idle</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/management\">management</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/menus\">menus</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/notifications\">notifications</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/omnibox\">omnibox</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/pageAction\">pageAction</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/permissions\">permissions</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/pkcs11\">pkcs11</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/privacy\">privacy</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/proxy\">proxy</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/runtime\">runtime</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/scripting\">scripting</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/search\">search</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/sessions\">sessions</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/sidebarAction\">sidebarAction</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/storage\">storage</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs\">tabs</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/theme\">theme</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/topSites\">topSites</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/types\">types</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/userScripts\">userScripts</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webNavigation\">webNavigation</a></li><li class=\"webextension-api-sidebar\"><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest\">webRequest</a><ol><li data-default-state=\"open\"><a href=\"#\"><strong>Methods</strong></a><ol><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/filterResponseData\"><code>filterResponseData()</code></a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/getSecurityInfo\"><code>getSecurityInfo()</code></a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/handlerBehaviorChanged\"><code>handlerBehaviorChanged()</code></a></li></ol></li><li data-default-state=\"open\"><a href=\"#\"><strong>Properties</strong></a><ol><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/MAX_HANDLER_BEHAVIOR_CHANGED_CALLS_PER_10_MINUTES\"><code>MAX_HANDLER_BEHAVIOR_CHANGED_CALLS_PER_10_MINUTES</code></a></li></ol></li><li data-default-state=\"open\"><a href=\"#\"><strong>Types</strong></a><ol><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/BlockingResponse\"><code>BlockingResponse</code></a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/CertificateInfo\"><code>CertificateInfo</code></a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/HttpHeaders\"><code>HttpHeaders</code></a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/RequestFilter\"><code>RequestFilter</code></a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/ResourceType\"><code>ResourceType</code></a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/SecurityInfo\"><code>SecurityInfo</code></a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/StreamFilter\"><code>StreamFilter</code></a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/UploadData\"><code>UploadData</code></a></li></ol></li><li data-default-state=\"open\"><a href=\"#\"><strong>Events</strong></a><ol><li><em><code>onAuthRequired</code></em></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/onBeforeRedirect\"><code>onBeforeRedirect</code></a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/onBeforeRequest\"><code>onBeforeRequest</code></a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/onBeforeSendHeaders\"><code>onBeforeSendHeaders</code></a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/onCompleted\"><code>onCompleted</code></a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/onErrorOccurred\"><code>onErrorOccurred</code></a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/onHeadersReceived\"><code>onHeadersReceived</code></a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/onResponseStarted\"><code>onResponseStarted</code></a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/onSendHeaders\"><code>onSendHeaders</code></a></li></ol></li></ol></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/windows\">windows</a></li></ol>\n      </details>\n    </li>\n    <li class=\"toggle\">\n      <details>\n      <summary>Manifest keys</summary>\n        <ol>\n          <li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json\">Introduction</a></li>\n        </ol>\n      <ol><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/action\">action</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/author\">author</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/background\">background</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_action\">browser_action</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_specific_settings\">browser_specific_settings</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/chrome_settings_overrides\">chrome_settings_overrides</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/chrome_url_overrides\">chrome_url_overrides</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/commands\">commands</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_scripts\">content_scripts</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_security_policy\">content_security_policy</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/default_locale\">default_locale</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/description\">description</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/developer\">developer</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/devtools_page\">devtools_page</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/dictionaries\">dictionaries</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/externally_connectable\">externally_connectable</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/homepage_url\">homepage_url</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/host_permissions\">host_permissions</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/icons\">icons</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/incognito\">incognito</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/manifest_version\">manifest_version</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/name\">name</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/offline_enabled\">offline_enabled</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/omnibox\">omnibox</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/optional_permissions\">optional_permissions</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/options_page\">options_page</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/options_ui\">options_ui</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/page_action\">page_action</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions\">permissions</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/protocol_handlers\">protocol_handlers</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/short_name\">short_name</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/sidebar_action\">sidebar_action</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/storage\">storage</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/theme\">theme</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/theme_experiment\">theme_experiment</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/user_scripts\">user_scripts</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/version\">version</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/version_name\">version_name</a></li><li><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/web_accessible_resources\">web_accessible_resources</a></li></ol>\n      </details>\n    </li>\n     <li class=\"toggle\">\n      <details>\n        <summary>Extension Workshop</summary>\n        <ol>\n          <li><a href=\"https://extensionworkshop.com/documentation/develop/\">Develop</a></li>\n          <li><a href=\"https://extensionworkshop.com/documentation/publish/\">Publish</a></li>\n          <li><a href=\"https://extensionworkshop.com/documentation/manage/\">Manage</a></li>\n          <li><a href=\"https://extensionworkshop.com/documentation/enterprise/\">Enterprise</a></li>\n        </ol>\n      </details>\n    </li>\n    <li><a href=\"/en-US/docs/Mozilla/Add-ons/Contact_us\"><strong>Contact us</strong></a></li>\n    <li class=\"toggle\">\n      <details>\n        <summary>Channels</summary>\n        <ol>\n          <li><a href=\"https://blog.mozilla.org/addons\">Add-ons blog</a></li>\n          <li><a href=\"https://discourse.mozilla.org/c/add-ons\">Add-ons forum</a></li>\n          <li><a href=\"https://chat.mozilla.org/#/room/%23addons:mozilla.org\">Add-ons chat</a></li>\n        </ol>\n      </details>\n    </li>\n  </ol>\n","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>Fired when the server sends a <code>401</code> or <code>407</code> status code (that is, when the server is asking the client to provide authentication credentials, such as a username and password).</p>\n<p>The listener can respond in one of four different ways:</p>\n<dl>\n  <dt id=\"take_no_action\">Take no action</dt>\n  <dd>\n    <p>The listener can do nothing, just observing the request. If this happens, it will have no effect on the handling of the request, and the browser will probably just ask the user to log in.</p>\n  </dd>\n  <dt id=\"cancel_the_request\">Cancel the request</dt>\n  <dd>\n    <p>The listener can cancel the request. If they do this, then authentication will fail, and the user will not be asked to log in. Extensions can cancel requests as follows:</p>\n    <ul>\n      <li>in addListener, pass <code>\"blocking\"</code> in the <code>extraInfoSpec</code> parameter</li>\n      <li>in the listener itself, return an object with a <code>cancel</code> property set to <code>true</code></li>\n    </ul>\n  </dd>\n  <dt id=\"provide_credentials_synchronously\">Provide credentials synchronously</dt>\n  <dd>\n    <p>If credentials are available synchronously, the extension can supply them synchronously. If the extension does this, then the browser will attempt to log in with the given credentials. The listener can provide credentials synchronously as follows:</p>\n    <ul>\n      <li>in addListener, pass <code>\"blocking\"</code> in the <code>extraInfoSpec</code> parameter</li>\n      <li>in the listener, return an object with an <code>authCredentials</code> property set to the credentials to supply</li>\n    </ul>\n  </dd>\n  <dt id=\"provide_credentials_asynchronously\">Provide credentials asynchronously</dt>\n  <dd>\n    <p>The extension might need to fetch credentials asynchronously. For example, the extension might need to fetch credentials from storage, or ask the user. In this case, the listener can supply credentials asynchronously as follows:</p>\n    <ul>\n      <li>in addListener, pass <code>\"blocking\"</code> in the <code>extraInfoSpec</code> parameter</li>\n      <li>in the listener, return a <code>Promise</code> that is resolved with an object containing an <code>authCredentials</code> property, set to the credentials to supply</li>\n    </ul>\n  </dd>\n</dl>\n<p>See <a href=\"#examples\">Examples</a>.</p>\n<p>If you use <code>\"blocking\"</code> you must have the <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions#api_permissions\">\"webRequestBlocking\" API permission</a> in your <code>manifest.json</code>.</p>\n<p>If your extension provides bad credentials, then the listener will be called again. For this reason, take care not to enter an infinite loop by repeatedly providing bad credentials.</p>"}},{"type":"prose","value":{"id":"proxy_authorization","title":"Proxy authorization","isH3":false,"content":"<p>In general, Firefox does not fire <code>webRequest</code> events for system requests, such as browser or extension upgrades, or search engine queries. To enable proxy authorization to work smoothly for system requests, from version 57 Firefox implements an exception to this.</p>\n<p>If an extension has the <code>\"webRequest\"</code>, <code>\"webRequestBlocking\"</code>, <code>\"proxy\"</code>, and <code>\"&lt;all_urls&gt;\"</code> permissions, then it will be able to use <code>onAuthRequired</code> to supply credentials for proxy authorization (but not for normal web authorization). The listener will not be able to cancel system requests or make any other modifications to any system requests.</p>"}},{"type":"prose","value":{"id":"syntax","title":"Syntax","isH3":false,"content":"<div class=\"code-example\"><pre class=\"brush: js-nolint notranslate\">browser.webRequest.onAuthRequired.addListener(\n  listener,                    // function\n  filter,                      //  object\n  extraInfoSpec                //  optional array of strings\n)\nbrowser.webRequest.onAuthRequired.removeListener(listener)\nbrowser.webRequest.onAuthRequired.hasListener(listener)\n</pre></div>\n<p>Events have three functions:</p>\n<dl>\n  <dt id=\"addlistenercallback_filter_extrainfospec\"><code>addListener(callback, filter, extraInfoSpec)</code></dt>\n  <dd>\n    <p>Adds a listener to this event.</p>\n  </dd>\n  <dt id=\"removelistenerlistener\"><code>removeListener(listener)</code></dt>\n  <dd>\n    <p>Stop listening to this event. The <code>listener</code> argument is the listener to remove.</p>\n  </dd>\n  <dt id=\"haslistenerlistener\"><code>hasListener(listener)</code></dt>\n  <dd>\n    <p>Check whether <code>listener</code> is registered for this event. Returns <code>true</code> if it is listening, <code>false</code> otherwise.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"addlistener_syntax","title":"addListener syntax","isH3":false,"content":""}},{"type":"prose","value":{"id":"parameters","title":"Parameters","isH3":true,"content":"<dl>\n  <dt id=\"callback\"><code>callback</code></dt>\n  <dd>\n    <p>A function that will be called when this event occurs. The function will be passed the following arguments:</p>\n    <dl>\n      <dt id=\"details\"><code>details</code></dt>\n      <dd>\n        <p><a href=\"#details\"><code>object</code></a>. Details about the request. See <a href=\"#details_2\"><code>details</code></a> below.</p>\n      </dd>\n    </dl>\n    <p>Returns: <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/BlockingResponse\"><code>webRequest.BlockingResponse</code></a> or a <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\"><code>Promise</code></a>.</p>\n    <ul>\n      <li>To handle the request synchronously, include <code>\"blocking\"</code> in the <code>extraInfoSpec</code> parameter and return a <code>BlockingResponse</code> object, with its <code>cancel</code> or its <code>authCredentials</code> properties set.</li>\n      <li>To handle the request asynchronously, include <code>\"blocking\"</code> in the <code>extraInfoSpec</code> parameter and return a <code>Promise</code> that is resolved with a <code>BlockingResponse</code> object, with its <code>cancel</code> or its <code>authCredentials</code> properties set.</li>\n    </ul>\n  </dd>\n  <dt id=\"filter\"><code>filter</code></dt>\n  <dd>\n    <p><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/RequestFilter\"><code>webRequest.RequestFilter</code></a>. A filter that restricts the events that will be sent to this listener.</p>\n  </dd>\n  <dt id=\"extrainfospec\"><code>extraInfoSpec</code> <span class=\"badge inline optional\">Optional</span></dt>\n  <dd>\n    <p><code>array</code> of <code>string</code>. Extra options for the event. You can pass any of the following values:</p>\n    <ul>\n      <li><code>\"blocking\"</code>: make the request block, so you can cancel the request or supply authentication credentials</li>\n      <li><code>\"responseHeaders\"</code>: include <code>responseHeaders</code> in the <code>details</code> object passed to the listener</li>\n    </ul>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"additional_objects","title":"Additional objects","isH3":false,"content":""}},{"type":"prose","value":{"id":"details_2","title":"details","isH3":true,"content":"<dl>\n  <dt id=\"challenger\"><code>challenger</code></dt>\n  <dd>\n    <p><code>object</code>. The server requesting authentication. This is an object with the following properties:</p>\n    <dl>\n      <dt id=\"host\"><code>host</code></dt>\n      <dd>\n        <p><code>string</code>. The server's <a href=\"https://en.wikipedia.org/wiki/Hostname#Internet_hostnames\" class=\"external\" rel=\" noopener\">hostname</a>.</p>\n        <div class=\"notecard warning\" id=\"sect1\">\n          <p><strong>Warning:</strong> Unlike Chrome, Firefox will return the requested host instead of the proxy requesting the authentication, even if <code>isProxy</code> is <code>true</code>.</p>\n        </div>\n      </dd>\n      <dt id=\"port\"><code>port</code></dt>\n      <dd>\n        <p><code>integer</code>. The server's port number.</p>\n      </dd>\n    </dl>\n  </dd>\n  <dt id=\"cookiestoreid\"><code>cookieStoreId</code></dt>\n  <dd>\n    <p><code>string</code>. If the request is from a tab open in a contextual identity, the cookie store ID of the contextual identity.</p>\n  </dd>\n  <dt id=\"frameid\"><code>frameId</code></dt>\n  <dd>\n    <p><code>integer</code>. This is <code>0</code> if the request happens in the main frame; a positive value is the ID of a subframe in which the request happens. If the document of a (sub-)frame is loaded (<code>type</code> is <code>main_frame</code> or <code>sub_frame</code>), <code>frameId</code> indicates the ID of this frame, not the ID of the outer frame. Frame IDs are unique within a tab.</p>\n  </dd>\n  <dt id=\"incognito\"><code>incognito</code></dt>\n  <dd>\n    <p><code>boolean</code>. Whether the request is from a private browsing window.</p>\n  </dd>\n  <dt id=\"isproxy\"><code>isProxy</code></dt>\n  <dd>\n    <p><code>boolean</code>. <code>true</code> for <code>Proxy-Authenticate</code>, <code>false</code> for <code>WWW-Authenticate</code>.</p>\n    <div class=\"notecard note\" id=\"sect2\">\n      <p><strong>Note:</strong> <code>webRequest.onAuthRequired</code> is only called for HTTP and HTTPS/SSL proxy servers requiring authentication, and not for SOCKS proxy servers requiring authentication.</p>\n    </div>\n  </dd>\n  <dt id=\"method\"><code>method</code></dt>\n  <dd>\n    <p><code>string</code>. Standard HTTP method (For example, <code>\"GET\"</code> or <code>\"POST\"</code>).</p>\n  </dd>\n  <dt id=\"parentframeid\"><code>parentFrameId</code></dt>\n  <dd>\n    <p><code>integer</code>. ID of the frame that contains the frame which sent the request. Set to <code>-1</code> if no parent frame exists.</p>\n  </dd>\n  <dt id=\"proxyinfo\"><code>proxyInfo</code></dt>\n  <dd>\n    <p><code>object</code>. This property is present only if the request is being proxied. It contains the following properties:</p>\n    <dl>\n      <dt id=\"host_2\"><code>host</code></dt>\n      <dd>\n        <p><code>string</code>. The hostname of the proxy server.</p>\n      </dd>\n      <dt id=\"port_2\"><code>port</code></dt>\n      <dd>\n        <p><code>integer</code>. The port number of the proxy server.</p>\n      </dd>\n      <dt id=\"type\"><code>type</code></dt>\n      <dd>\n        <p><code>string</code>. The type of proxy server. One of:</p>\n        <ul>\n          <li><code>\"http\"</code>: HTTP proxy (or SSL CONNECT for HTTPS)</li>\n          <li><code>\"https\"</code>: HTTP proxying over TLS connection to proxy</li>\n          <li><code>\"socks\"</code>: SOCKS v5 proxy</li>\n          <li><code>\"socks4\"</code>: SOCKS v4 proxy</li>\n          <li><code>\"direct\"</code>: no proxy</li>\n          <li><code>\"unknown\"</code>: unknown proxy</li>\n        </ul>\n      </dd>\n      <dt id=\"username\"><code>username</code></dt>\n      <dd>\n        <p><code>string</code>. Username for the proxy service.</p>\n      </dd>\n      <dt id=\"proxydns\"><code>proxyDNS</code></dt>\n      <dd>\n        <p><code>boolean</code>. True if the proxy will perform domain name resolution based on the hostname supplied, meaning that the client should not do its own DNS lookup.</p>\n      </dd>\n      <dt id=\"failovertimeout\"><code>failoverTimeout</code></dt>\n      <dd>\n        <p><code>integer</code>. Failover timeout in seconds. If the connection fails to connect the proxy server after this number of seconds, the next proxy server in the array returned from <a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/proxy#findproxyforurl()_return_value\">FindProxyForURL()</a> will be used.</p>\n      </dd>\n    </dl>\n  </dd>\n  <dt id=\"realm\"><code>realm</code> <span class=\"badge inline optional\">Optional</span></dt>\n  <dd>\n    <p><code>string</code>. The authentication <a href=\"https://datatracker.ietf.org/doc/html/rfc1945#section-11\" class=\"external\" rel=\" noopener\">realm</a> provided by the server, if there is one.</p>\n  </dd>\n  <dt id=\"requestid\"><code>requestId</code></dt>\n  <dd>\n    <p><code>string</code>. The ID of the request. Request IDs are unique within a browser session, so you can use them to relate different events associated with the same request.</p>\n  </dd>\n  <dt id=\"responseheaders\"><code>responseHeaders</code> <span class=\"badge inline optional\">Optional</span></dt>\n  <dd>\n    <p><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/HttpHeaders\"><code>webRequest.HttpHeaders</code></a>. The HTTP response headers that were received along with this response.</p>\n  </dd>\n  <dt id=\"scheme\"><code>scheme</code></dt>\n  <dd>\n    <p><code>string</code>. The authentication scheme: <code>\"basic\"</code> or <code>\"digest</code>\".</p>\n  </dd>\n  <dt id=\"statuscode\"><code>statusCode</code></dt>\n  <dd>\n    <p><code>integer</code>. Standard HTTP status code returned by the server.</p>\n  </dd>\n  <dt id=\"statusline\"><code>statusLine</code></dt>\n  <dd>\n    <p><code>string</code>. HTTP status line of the response or the <code>'HTTP/0.9 200 OK'</code> string for HTTP/0.9 responses (i.e., responses that lack a status line) or an empty string if there are no headers.</p>\n  </dd>\n  <dt id=\"tabid\"><code>tabId</code></dt>\n  <dd>\n    <p><code>integer</code>. ID of the tab in which the request takes place. Set to <code>-1</code> if the request isn't related to a tab.</p>\n  </dd>\n  <dt id=\"thirdparty\"><code>thirdParty</code></dt>\n  <dd>\n    <p><code>boolean</code>. Indicates whether the request and its content window hierarchy are third party.</p>\n  </dd>\n  <dt id=\"timestamp\"><code>timeStamp</code></dt>\n  <dd>\n    <p><code>number</code>. The time when this event fired, in <a href=\"https://en.wikipedia.org/wiki/Unix_time\" class=\"external\" rel=\" noopener\">milliseconds since the epoch</a>.</p>\n  </dd>\n  <dt id=\"type_2\"><code>type</code></dt>\n  <dd>\n    <p><a href=\"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/ResourceType\"><code>webRequest.ResourceType</code></a>. The type of resource being requested: for example, <code>\"image\"</code>, <code>\"script\"</code>, <code>\"stylesheet\"</code>.</p>\n  </dd>\n  <dt id=\"url\"><code>url</code></dt>\n  <dd>\n    <p><code>string</code>. Target of the request.</p>\n  </dd>\n  <dt id=\"urlclassification\"><code>urlClassification</code></dt>\n  <dd>\n    <p><code>object</code>. The type of tracking associated with the request, if with the request has been classified by <a href=\"https://support.mozilla.org/en-US/kb/enhanced-tracking-protection-firefox-desktop\" class=\"external\" rel=\" noopener\">Firefox Tracking Protection</a>. This is an object with the following properties:</p>\n    <dl>\n      <dt id=\"firstparty\"><code>firstParty</code></dt>\n      <dd>\n        <p><code>array</code> of <code>strings</code>. Classification flags for the request's first party.</p>\n      </dd>\n      <dt id=\"thirdparty_2\"><code>thirdParty</code></dt>\n      <dd>\n        <p><code>array</code> of <code>strings</code>. Classification flags for the request or its window hierarchy's third parties.</p>\n      </dd>\n    </dl>\n    <p>The classification flags include:</p>\n    <ul>\n      <li><code>fingerprinting</code> and <code>fingerprinting_content</code>: indicates the request is involved in fingerprinting. <code>fingerprinting_content</code> indicates the request is loaded from an origin that has been found to fingerprint but is not considered to participate in tracking, such as a payment provider.</li>\n      <li><code>cryptomining</code> and <code>cryptomining_content</code>: similar to the fingerprinting category but for cryptomining resources.</li>\n      <li><code>tracking</code>, <code>tracking_ad</code>, <code>tracking_analytics</code>, <code>tracking_social</code>, and <code>tracking_content</code>: indicates the request is involved in tracking. <code>tracking</code> is any generic tracking request, the <code>ad</code>, <code>analytics</code>, <code>social</code>, and <code>content</code> suffixes identify the type of tracker.</li>\n      <li><code>any_basic_tracking</code>: a meta flag that combines any tracking and fingerprinting flags, excluding <code>tracking_content</code> and <code>fingerprinting_content</code>.</li>\n      <li><code>any_strict_tracking</code>: a meta flag that combines any tracking and fingerprinting flags, including <code>tracking_content</code> and <code>fingerprinting_content</code>.</li>\n      <li><code>any_social_tracking</code>: a meta flag that combines any social tracking flags.</li>\n    </ul>\n  </dd>\n</dl>"}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"browser_compatibility","isH3":false,"query":"webextensions.api.webRequest.onAuthRequired","dataURL":"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/onAuthRequired/bcd.json"}},{"type":"prose","value":{"id":"examples","title":"Examples","isH3":false,"content":"<p>This code just observes authentication requests for the target URL:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> target <span class=\"token operator\">=</span> <span class=\"token string\">\"https://intranet.company.com/\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">observe</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">requestDetails</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">observing: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>requestDetails<span class=\"token punctuation\">.</span>requestId<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nbrowser<span class=\"token punctuation\">.</span>webRequest<span class=\"token punctuation\">.</span>onAuthRequired<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span>\n  observe<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">urls</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>target<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>This code cancels authentication requests for the target URL:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> target <span class=\"token operator\">=</span> <span class=\"token string\">\"https://intranet.company.com/\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">cancel</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">requestDetails</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">canceling: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>requestDetails<span class=\"token punctuation\">.</span>requestId<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">cancel</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nbrowser<span class=\"token punctuation\">.</span>webRequest<span class=\"token punctuation\">.</span>onAuthRequired<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span>\n  cancel<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">urls</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>target<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span><span class=\"token string\">\"blocking\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>This code supplies credentials synchronously. It has to keep track of outstanding requests, to ensure that it doesn't repeatedly try to submit bad credentials:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> target <span class=\"token operator\">=</span> <span class=\"token string\">\"https://intranet.company.com/\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> myCredentials <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">username</span><span class=\"token operator\">:</span> <span class=\"token string\">\"me@company.com\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">password</span><span class=\"token operator\">:</span> <span class=\"token string\">\"zDR$ERHGDFy\"</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> pendingRequests <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// A request has completed.</span>\n<span class=\"token comment\">// We can stop worrying about it.</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">completed</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">requestDetails</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">completed: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>requestDetails<span class=\"token punctuation\">.</span>requestId<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> index <span class=\"token operator\">=</span> pendingRequests<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>requestDetails<span class=\"token punctuation\">.</span>requestId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>index <span class=\"token operator\">&gt;</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    pendingRequests<span class=\"token punctuation\">.</span><span class=\"token function\">splice</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">provideCredentialsSync</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">requestDetails</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// If we have seen this request before, then</span>\n  <span class=\"token comment\">// assume our credentials were bad, and give up.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>pendingRequests<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>requestDetails<span class=\"token punctuation\">.</span>requestId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">bad credentials for: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>requestDetails<span class=\"token punctuation\">.</span>requestId<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">cancel</span><span class=\"token operator\">:</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  pendingRequests<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>requestDetails<span class=\"token punctuation\">.</span>requestId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">providing credentials for: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>requestDetails<span class=\"token punctuation\">.</span>requestId<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">authCredentials</span><span class=\"token operator\">:</span> myCredentials<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nbrowser<span class=\"token punctuation\">.</span>webRequest<span class=\"token punctuation\">.</span>onAuthRequired<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span>\n    provideCredentialsSync<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">urls</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>target<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string\">\"blocking\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nbrowser<span class=\"token punctuation\">.</span>webRequest<span class=\"token punctuation\">.</span>onCompleted<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span>\n  completed<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">urls</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>target<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nbrowser<span class=\"token punctuation\">.</span>webRequest<span class=\"token punctuation\">.</span>onErrorOccurred<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span>\n  completed<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">urls</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>target<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>This code supplies credentials asynchronously, fetching them from storage. It also has to keep track of outstanding requests, to ensure that it doesn't repeatedly try to submit bad credentials:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> target <span class=\"token operator\">=</span> <span class=\"token string\">\"https://httpbin.org/basic-auth/*\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> pendingRequests <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/*\n* A request has completed. We can stop worrying about it.\n*/</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">completed</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">requestDetails</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">completed: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>requestDetails<span class=\"token punctuation\">.</span>requestId<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> index <span class=\"token operator\">=</span> pendingRequests<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>requestDetails<span class=\"token punctuation\">.</span>requestId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>index <span class=\"token operator\">&gt;</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    pendingRequests<span class=\"token punctuation\">.</span><span class=\"token function\">splice</span><span class=\"token punctuation\">(</span>index<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">provideCredentialsAsync</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">requestDetails</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// If we have seen this request before,</span>\n  <span class=\"token comment\">// then assume our credentials were bad,</span>\n  <span class=\"token comment\">// and give up.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>pendingRequests<span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>requestDetails<span class=\"token punctuation\">.</span>requestId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">bad credentials for: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>requestDetails<span class=\"token punctuation\">.</span>requestId<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">cancel</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    pendingRequests<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>requestDetails<span class=\"token punctuation\">.</span>requestId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">providing credentials for: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>requestDetails<span class=\"token punctuation\">.</span>requestId<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// we can return a promise that will be resolved</span>\n    <span class=\"token comment\">// with the stored credentials</span>\n    <span class=\"token keyword\">return</span> browser<span class=\"token punctuation\">.</span>storage<span class=\"token punctuation\">.</span>local<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nbrowser<span class=\"token punctuation\">.</span>webRequest<span class=\"token punctuation\">.</span>onAuthRequired<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span>\n    provideCredentialsAsync<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">urls</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>target<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span><span class=\"token string\">\"blocking\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nbrowser<span class=\"token punctuation\">.</span>webRequest<span class=\"token punctuation\">.</span>onCompleted<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span>\n  completed<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">urls</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>target<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nbrowser<span class=\"token punctuation\">.</span>webRequest<span class=\"token punctuation\">.</span>onErrorOccurred<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span>\n  completed<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span><span class=\"token literal-property property\">urls</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>target<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"example_extensions","title":"Example extensions","isH3":true,"content":"<ul><li><a href=\"https://github.com/mdn/webextensions-examples/tree/master/stored-credentials\" class=\"external\" rel=\" noopener\">stored-credentials</a></li></ul>\n<div class=\"notecard note\" id=\"sect3\">\n  <p><strong>Note:</strong> This API is based on Chromium's <a href=\"https://developer.chrome.com/docs/extensions/reference/webRequest/#event-onAuthRequired\" class=\"external\" rel=\" noopener\"><code>chrome.webRequest</code></a> API. This documentation is derived from <a href=\"https://chromium.googlesource.com/chromium/src/+/master/extensions/common/api/web_request.json\" class=\"external\" rel=\" noopener\"><code>web_request.json</code></a> in the Chromium code.</p>\n  <p>Microsoft Edge compatibility data is supplied by Microsoft Corporation and is included here under the Creative Commons Attribution 3.0 United States License.</p>\n</div><!--\n// Copyright 2015 The Chromium Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n//    * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n//    * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n//    * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n-->"}}],"toc":[{"text":"Proxy authorization","id":"proxy_authorization"},{"text":"Syntax","id":"syntax"},{"text":"addListener syntax","id":"addlistener_syntax"},{"text":"Additional objects","id":"additional_objects"},{"text":"Browser compatibility","id":"browser_compatibility"},{"text":"Examples","id":"examples"}],"summary":"Fired when the server sends a 401 or 407 status code (that is, when the server is asking the client to provide authentication credentials, such as a username and password).","popularity":0.0002,"modified":"2022-09-13T05:04:34.000Z","other_translations":[{"title":"webRequest.onAuthRequired","locale":"fr","native":"Franais"}],"source":{"folder":"en-us/mozilla/add-ons/webextensions/api/webrequest/onauthrequired","github_url":"https://github.com/mdn/content/blob/style/old/files/en-us/mozilla/add-ons/webextensions/api/webrequest/onauthrequired/index.md","last_commit_url":"https://github.com/mdn/content/commit/fae225dc7876dd22800d39dffff0d663ee7808aa","filename":"index.md"},"parents":[{"uri":"/en-US/docs/Mozilla","title":"Mozilla"},{"uri":"/en-US/docs/Mozilla/Add-ons","title":"Add-ons"},{"uri":"/en-US/docs/Mozilla/Add-ons/WebExtensions","title":"Browser Extensions"},{"uri":"/en-US/docs/Mozilla/Add-ons/WebExtensions/API","title":"JavaScript APIs"},{"uri":"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest","title":"webRequest"},{"uri":"/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/onAuthRequired","title":"webRequest.onAuthRequired"}],"pageTitle":"webRequest.onAuthRequired - Mozilla | MDN","noIndexing":false}}