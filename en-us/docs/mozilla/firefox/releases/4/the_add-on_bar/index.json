{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"The add-on bar","mdn_url":"/en-US/docs/Mozilla/Firefox/Releases/4/The_add-on_bar","locale":"en-US","native":"English (US)","sidebarHTML":"\n  <ol>\n    <li class=\"toggle\">\n        <details>\n            <summary>Firefox developer release notes</summary>\n            <ol>\n              <li><a href=\"/en-US/docs/Mozilla/Firefox/Releases\">Firefox developer release notes</a></li>\n            </ol>\n        </details>\n    </li>\n    <li class=\"toggle\">\n        <details>\n            <summary>Add-ons</summary>\n            <ol>\n              <li><a href=\"/en-US/Add-ons/WebExtensions\">Browser extensions</a></li>\n              <li><a href=\"/en-US/Add-ons/Themes\">Themes</a></li>\n            </ol>\n        </details>\n    </li>\n    <li class=\"toggle\">\n        <details>\n            <summary>Firefox internals</summary>\n            <ol>\n              <li><a href=\"/en-US/docs/Mozilla/\">Mozilla project</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/Gecko\">Gecko</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/Firefox/Headless_mode\">Headless mode</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/JavaScript_code_modules\">JavaScript code modules</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/js-ctypes\">JS-ctypes</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/MathML_Project\">MathML project</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/MFBT\">MFBT</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/Projects\">Mozilla projects</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/Preferences\">Preference system</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/WebIDL_bindings\">WebIDL bindings</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/Tech/XPCOM\">XPCOM</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/Tech/XUL\">XUL</a></li>\n            </ol>\n        </details>\n    </li>\n    <li class=\"toggle\">\n        <details>\n            <summary>Building and contributing</summary>\n            <ol>\n              <li><a href=\"/en-US/docs/Mozilla/Developer_guide/Build_Instructions\">Build instructions</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/Developer_guide/Build_Instructions/Configuring_Build_Options\">Configuring build options</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/Developer_guide/Build_Instructions/How_Mozilla_s_build_system_works\">How the build system works</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/Developer_guide/Source_Code/Mercurial\">Mozilla source code</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/Localization\">Localization</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/Mercurial\">Mercurial</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/QA\">Quality assurance</a></li>\n              <li><a href=\"/en-US/docs/Mozilla/Using_Mozilla_code_in_other_projects\">Using Mozilla code in other projects</a></li>\n            </ol>\n        </details>\n    </li>\n  </ol>\n","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>Firefox 4 eliminates the status bar from the bottom of the browser window in favor of a new toolbar located at the bottom of the window. This new toolbar, with the ID \"addon-bar\", is a standard XUL <code>&lt;toolbar&gt;</code>; add-ons can insert content into it, and the user can drag buttons into it while customizing their toolbars. This is the primary difference between the add-on bar and the old status bar; you can now put any XUL element into it, since it's a standard toolbar.</p>\n<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>Note:</strong> For the time being, there is a status bar shim included so that add-ons that expect the status bar to be present will still work.</p>\n</div>"}},{"type":"prose","value":{"id":"adding_an_element_to_the_add-on_bar","title":"Adding an element to the add-on bar","isH3":false,"content":"<p>The add-on bar is an XUL toolbar with the ID \"addon-bar\". The code below locates the most-recently used window and adds a new item to the add-on bar that displays the text \"Hello world!\" using an XUL <code>&lt;label&gt;</code> element.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// Find the most recently used window</span>\n\n<span class=\"token keyword\">var</span> mediator <span class=\"token operator\">=</span> Components<span class=\"token punctuation\">.</span>classes<span class=\"token punctuation\">[</span>\n  <span class=\"token string\">\"@mozilla.org/appshell/window-mediator;1\"</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">getService</span><span class=\"token punctuation\">(</span>Components<span class=\"token punctuation\">.</span>interfaces<span class=\"token punctuation\">.</span>nsIWindowMediator<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> doc <span class=\"token operator\">=</span> mediator<span class=\"token punctuation\">.</span><span class=\"token function\">getMostRecentWindow</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"navigator:browser\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>document<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Get the add-on bar for that window</span>\n\n<span class=\"token keyword\">var</span> addonBar <span class=\"token operator\">=</span> doc<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"addon-bar\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Construct the new toolbar item</span>\n\n<span class=\"token keyword\">var</span> newItem <span class=\"token operator\">=</span> doc<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"toolbaritem\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">var</span> itemLabel <span class=\"token operator\">=</span> doc<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"label\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Add the item to the toolbar and set its text label</span>\n\nnewItem<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>itemLabel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\naddonBar<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>newItem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nitemLabel<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token string\">\"Hello world!\"</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>To add the button only once, create a bool pref to check if it is the first run. <a href=\"https://stackoverflow.com/questions/4978188/how-do-i-detect-a-first-run-in-firefox-a-addon/4978512#4978512\" class=\"external\" rel=\" noopener\">For example</a>:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">var</span> firstrun <span class=\"token operator\">=</span> Services<span class=\"token punctuation\">.</span>prefs<span class=\"token punctuation\">.</span><span class=\"token function\">getBoolPref</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"extensions.YOUREXT.firstrun\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">var</span> curVersion <span class=\"token operator\">=</span> <span class=\"token string\">\"0.0.0\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>firstrun<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  Services<span class=\"token punctuation\">.</span>prefs<span class=\"token punctuation\">.</span><span class=\"token function\">setBoolPref</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"extensions.YOUREXT.firstrun\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  Services<span class=\"token punctuation\">.</span>prefs<span class=\"token punctuation\">.</span><span class=\"token function\">setCharPref</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"extensions.YOUREXT.installedVersion\"</span><span class=\"token punctuation\">,</span> curVersion<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">/* Code related to firstrun */</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> installedVersion <span class=\"token operator\">=</span> Services<span class=\"token punctuation\">.</span>prefs<span class=\"token punctuation\">.</span><span class=\"token function\">getCharPref</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">\"extensions.YOUREXT.installedVersion\"</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>curVersion <span class=\"token operator\">&gt;</span> installedVersion<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      Services<span class=\"token punctuation\">.</span>prefs<span class=\"token punctuation\">.</span><span class=\"token function\">setCharPref</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string\">\"extensions.YOUREXT.installedVersion\"</span><span class=\"token punctuation\">,</span>\n        curVersion\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token comment\">/* Code related to upgrade */</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>ex<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/* Code related to a reinstall */</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"how_to_use_one_overlay_per_firefox_version","title":"How to use one overlay per Firefox version","isH3":false,"content":"<p>Adding support for the add-on bar while staying compatible with Firefox 3.6 and older will require using two overlays. The <a href=\"/en-US/docs/Chrome_Registration\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">chrome.manifest</a> file can specify which file is used by which Firefox version by using <a href=\"/en-US/docs/Chrome_Registration#manifest_flags\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">manifest flags</a>:</p>\n<pre class=\"notranslate\">overlay chrome://browser/content/browser.xul chrome://myaddon/content/myaddon/overlayold.xul application={ec8030f7-c20a-464f-9b0e-13a3a9e97384} appversion&lt;4.0\noverlay chrome://browser/content/browser.xul chrome://myaddon/content/myaddon/overlay.xul application={ec8030f7-c20a-464f-9b0e-13a3a9e97384} appversion&gt;=4.0\n</pre>\n<p>Note: the appversion has to be at least 2 digits long or it won't work with versions of Gecko before 1.8.0.13 and 1.8.1.5.</p>"}},{"type":"prose","value":{"id":"adding_a_button_by_default","title":"Adding a button by default","isH3":true,"content":"<p>See: <a href=\"/en-US/docs/Code_snippets/Toolbar#adding_button_by_default\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">Adding a button by default</a></p>"}},{"type":"prose","value":{"id":"appearance_differences","title":"Appearance differences","isH3":false,"content":"<ul>\n  <li>Since the browser no longer occupies a large percentage of the bar with status information, the entire area is available for add-ons to use.</li>\n  <li>The add-on bar is empty and hidden by default; the user must elect to make it visible.</li>\n  <li>If a restartless add-on installs itself to the add-on bar directly and the bar is not already visible, the bar becomes visible automatically.</li>\n  <li>If uninstalling a restartless add-on makes the number of items in the add-on bar become zero, the bar is hidden automatically.</li>\n</ul>"}},{"type":"prose","value":{"id":"see_also","title":"See also","isH3":false,"content":"<ul>\n  <li>The <a href=\"https://mike.kaply.com/2011/01/25/the-firefox-4-add-on-bar-for-developers/\" class=\"external\" rel=\" noopener\">Firefox 4 add-on bar for developers</a>, by Mike Kaply</li>\n</ul>"}}],"toc":[{"text":"Adding an element to the add-on bar","id":"adding_an_element_to_the_add-on_bar"},{"text":"How to use one overlay per Firefox version","id":"how_to_use_one_overlay_per_firefox_version"},{"text":"Appearance differences","id":"appearance_differences"},{"text":"See also","id":"see_also"}],"summary":"Firefox 4 eliminates the status bar from the bottom of the browser window in favor of a new toolbar located at the bottom of the window. This new toolbar, with the ID \"addon-bar\", is a standard XUL <toolbar>; add-ons can insert content into it, and the user can drag buttons into it while customizing their toolbars. This is the primary difference between the add-on bar and the old status bar; you can now put any XUL element into it, since it's a standard toolbar.","popularity":0,"modified":"2022-09-21T07:29:59.000Z","other_translations":[{"title":"アドオンバー","locale":"ja","native":"日本語"}],"source":{"folder":"en-us/mozilla/firefox/releases/4/the_add-on_bar","github_url":"https://github.com/mdn/content/blob/style/old/files/en-us/mozilla/firefox/releases/4/the_add-on_bar/index.md","last_commit_url":"https://github.com/mdn/content/commit/78ef1310a76394c4e0bdce456982abc3856790c0","filename":"index.md"},"parents":[{"uri":"/en-US/docs/Mozilla","title":"Mozilla"},{"uri":"/en-US/docs/Mozilla/Firefox","title":"Firefox"},{"uri":"/en-US/docs/Mozilla/Firefox/Releases","title":"Firefox release notes for developers"},{"uri":"/en-US/docs/Mozilla/Firefox/Releases/4","title":"Firefox 4 for developers"},{"uri":"/en-US/docs/Mozilla/Firefox/Releases/4/The_add-on_bar","title":"The add-on bar"}],"pageTitle":"The add-on bar - Mozilla | MDN","noIndexing":false}}