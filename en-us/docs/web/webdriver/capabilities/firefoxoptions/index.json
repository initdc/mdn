{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"firefoxOptions","mdn_url":"/en-US/docs/Web/WebDriver/Capabilities/firefoxOptions","locale":"en-US","native":"English (US)","sidebarHTML":"\n<ol><li><a href=\"/en-US/docs/Web/WebDriver/Capabilities/acceptInsecureCerts\">acceptInsecureCerts</a></li><li><a href=\"/en-US/docs/Web/WebDriver/Capabilities/firefoxOptions\">firefoxOptions</a></li><li><a href=\"/en-US/docs/Web/WebDriver/Capabilities/webSocketUrl\">webSocketUrl</a></li></ol>\n","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>\n  The <strong><code>moz:firefoxOptions</code> capability</strong> is a namespaced set of\n  capabilities specific to <a href=\"https://www.mozilla.org/en-US/firefox/\" class=\"external\" rel=\" noopener\">Firefox</a>. It is used to control the\n  behavior of Firefox and can be used as a member of\n  <a href=\"/en-US/docs/Web/WebDriver/Capabilities#alwaysmatch\"><code>alwaysMatch</code></a> or as a member of one of the\n  <a href=\"/en-US/docs/Web/WebDriver/Capabilities#firstmatch\"><code>firstMatch</code></a> entries.\n</p>\n<p>It is used to define options which control how Firefox gets started and run.</p>\n<p><code>moz:firefoxOptions</code> is a JSON Object which may contain any of the following fields:</p>\n<h5 id=\"binary_string\"><code>binary</code> (string)</h5>\n<p>Absolute path to the custom Firefox binary to use.</p>\n<p>\n  On macOS you may either give the path to the application bundle, i.e. <code>/Applications/Firefox.app</code>, or the\n  absolute path to the executable binary inside this bundle, for example\n  <code>/Applications/Firefox.app/Contents/MacOS/firefox-bin</code>.\n</p>\n<p>\n  geckodriver will attempt to deduce the default location of Firefox on the current system if left undefined. The\n  default locations of Firefox are:\n</p>\n<table class=\"standard-table\">\n  <thead>\n    <tr>\n      <th scope=\"col\">System</th>\n      <th scope=\"col\">Default location</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>macOS</td>\n      <td>\n        <ol>\n          <li><code>/Applications/Firefox.app/Contents/MacOS/firefox-bin</code></li>\n          <li><code>$HOME/Applications/Firefox.app/Contents/MacOS/firefox-bin</code></li>\n        </ol>\n      </td>\n    </tr>\n    <tr>\n      <td>Linux<br>BSD</td>\n      <td>\n        <p>\n          First <code>firefox</code> found on the system path. This is\n          equivalent to the output of running\n          <a href=\"https://manpages.debian.org/stretch/debianutils/which.1.en.html\" class=\"external\" rel=\" noopener\">which(1)</a>:\n        </p>\n        <div class=\"code-example\"><pre class=\"brush: plain notranslate\">% which firefox\n/usr/bin/firefox\n</pre></div>\n      </td>\n    </tr>\n    <tr>\n      <td>Windows</td>\n      <td>\n        <p>From the Window system registry:</p>\n        <ol>\n          <li><code>HKEY_LOCAL_MACHINE\\SOFTWARE WOW6432Node\\Mozilla\\Mozilla\nFirefox\\[VERSION]\\Main\\PathToExe</code></li>\n          <li><code>HKEY_LOCAL_MACHINE\\SOFTWARE\\Mozilla\\Mozilla\nFirefox\\[VERSION]\\Main\\PathToExe</code></li>\n        </ol>\n      </td>\n    </tr>\n  </tbody>\n</table>\n<h5 id=\"args_array_of_strings\"><code>args</code> (array of strings)</h5>\n<p>\n  Command line arguments to pass to the Firefox binary. These must include the leading dash (<code>-</code>) where\n  required, e.g. <code>[\"-headless\"]</code>.\n</p>\n<p>\n  To have geckodriver pick up an existing <a href=\"#profile\">profile</a> on the local filesystem, you may pass\n  <code>[\"-profile\", \"/path/to/profile\"]</code>. But if a profile has to be transferred to a target machine it is\n  recommended to use the <code>profile</code> entry.\n</p>\n<h5 id=\"profile_string\"><code>profile</code> (string)</h5>\n<p>\n  Base64-encoded ZIP of a profile directory to use for the Firefox instance. This may be used to e.g. install\n  extensions or custom certificates, but for setting custom preferences we recommend using the <code>prefs</code> (<a href=\"#prefs\">Preferences Object</a>) entry instead.\n</p>\n<p>\n  Profiles are created in the systems temporary folder. This is also where the encoded profile is extracted when\n  <code>profile</code> is provided. By default geckodriver will create a new profile in this location.\n</p>\n<p>\n  The effective profile in use by the WebDriver session is returned to the user in the <code>moz:profile</code>\n  capability in the <a href=\"/en-US/docs/Web/WebDriver/Commands/NewSession\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">new session response</a>.\n</p>\n<p>\n  To have geckodriver pick up an existing profile on the filesystem, please set the <code>args</code> field to\n  <code>{\"args\": [\"-profile\", \"/path/to/your/profile\"]}</code>. Note that if you use a remote client targeting a server\n  on a different system, the profile must already exist on the target system.\n</p>\n<h5 id=\"log_log_object\"><code>log</code> (Log object)</h5>\n<p>\n  To increase the logging verbosity of geckodriver and Firefox, you may pass a <a href=\"#log\"><code>log</code></a>\n  object that may look like <code>{\"log\": {\"level\": \"trace\"}}</code> to include all trace-level logs and above\n</p>\n<h5 id=\"prefs_preferences_object\"><code>prefs</code> (Preferences object)</h5>\n<p>Map of preference name to preference value, which can be a string, a boolean or an integer.</p>\n<h5 id=\"env_env_object\"><code>env</code> (Env object)</h5>\n<p>Map of environment variable name to environment variable value, both of which must be strings.</p>"}},{"type":"prose","value":{"id":"android","title":"Android","isH3":true,"content":"<p>Starting with geckodriver 0.26.0 additional capabilities exist if Firefox or an application embedding <a href=\"https://wiki.mozilla.org/Mobile/GeckoView\" class=\"external\" rel=\" noopener\">GeckoView</a> has to be controlled on Android:</p>\n<h4 id=\"androidpackage_string_required\"><code>androidPackage</code> (string, required)</h4>\n<p>\n  The package name of Firefox, e.g. <code>org.mozilla.firefox</code>,\n  <code>org.mozilla.firefox_beta,</code> or <code>org.mozilla.fennec</code> depending on the release\n  channel, or the package name of the application embedding GeckoView, e.g. <code>org.mozilla.geckoview_example</code>.\n</p>\n<h4 id=\"androidactivity_string_optional\"><code>androidActivity</code> (string, optional)</h4>\n<p>\n  The fully qualified class name of the activity to be launched, e.g. <code>.GeckoViewActivity</code>. If not\n  specified, the package's default activity will be used.\n</p>\n<h4 id=\"androiddeviceserial_string_optional\"><code>androidDeviceSerial</code> (string, optional)</h4>\n<p>\n  The serial number of the device on which to launch the application. If not specified and multiple devices are\n  attached, an error will be returned.\n</p>\n<h4 id=\"androidintentarguments_array_of_strings_optional\"><code>androidIntentArguments</code> (array of strings, optional)</h4>\n<p>\n  Arguments to launch the intent with. Under the hood, geckodriver uses <a href=\"https://developer.android.com/studio/command-line/adb#am\" class=\"external\" rel=\" noopener\">Android am</a> to start the Android application\n  under test. The given intent arguments are appended to the <code>am start</code> command. See Android's <a href=\"https://developer.android.com/studio/command-line/adb#IntentSpec\" class=\"external\" rel=\" noopener\">specification for intent arguments</a> for\n  details. This allows to control how the application is launched and to include optional extras for enabling and\n  disabling features. For example, to launch with the view action and a specified URL before navigating as part of a\n  test, include:\n</p>\n<div class=\"code-example\"><pre class=\"brush: json notranslate\"><code><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"androidIntentArguments\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"-a\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"android.intent.action.VIEW\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"-d\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"https://example.com\"</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>For example, to specify a boolean extra that can be processed with <a href=\"https://developer.android.com/reference/android/content/Intent#getBooleanExtra(java.lang.String,%20boolean)\" class=\"external\" rel=\" noopener\">android.content.Intent.getBooleanExtra</a>, include:</p>\n<div class=\"code-example\"><pre class=\"brush: json notranslate\"><code><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"androidIntentArguments\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"--ez\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"customBooleanFlagName\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"true\"</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"log_object","title":"Log object","isH3":true,"content":"<p>A JSON Object that may have any of these fields:</p>\n<h4 id=\"level_string\"><code>level</code> (string)</h4>\n<p>\n  Set the level of verbosity of geckodriver and Firefox. Available levels are <code>trace</code>, <code>debug</code>,\n  <code>config</code>, <code>info</code>, <code>warn</code>, <code>error</code>, and <code>fatal</code>. If left\n  undefined the default is <code>info</code>. The value is treated case-insensitively.\n</p>"}},{"type":"prose","value":{"id":"preferences_object","title":"Preferences object","isH3":true,"content":"<p>\n  A JSON Object with one entry per preference to set. The preference will be written to the <a href=\"#profile\">profile</a> before starting Firefox. A full list of available preferences is available from visiting\n  \"about:config\" in your Firefox browser. Some of these are documented in <a href=\"https://searchfox.org/mozilla-central/source/modules/libpref/init/all.js\" class=\"external\" rel=\" noopener\">this source</a> file.\n</p>\n<p>An example of a preference object:</p>\n<div class=\"code-example\"><pre class=\"brush: json notranslate\"><code><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"dom.ipc.processCount\"</span><span class=\"token operator\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"javascript.options.showInConsole\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"env_object","title":"Env object","isH3":true,"content":"<p>\n  A JSON Object with one entry per environment variable to set. On Desktop, the Firefox under test will launch with\n  given variable in its environment. On Android, the GeckoView-based App will have the given variable added to the\n  <code>env</code> block in its configuration YAML.\n</p>\n<p>An example of an env object:</p>\n<div class=\"code-example\"><pre class=\"brush: json notranslate\"><code><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"MOZ_LOG\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"nsHttp:5\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"MOZ_LOG_FILE\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/mnt/sdcard/log\"</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"example","title":"Example","isH3":false,"content":"<p>\n  The following is an example of a full <a href=\"/en-US/docs/Web/WebDriver/Capabilities\">capabilities object</a> that\n  selects a specific Firefox binary to run with a prepared <a href=\"#profile\">profile</a> from the filesystem in <a href=\"https://hacks.mozilla.org/2017/12/using-headless-mode-in-firefox/\" class=\"external\" rel=\" noopener\">headless mode</a>. It also increases the number of IPC processes\n  through a preference, turns off chrome errors/warnings in the console, and enables more verbose logging:\n</p>\n<div class=\"code-example\"><pre class=\"brush: json notranslate\"><code><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"capabilities\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"alwaysMatch\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"moz:firefoxOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"binary\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/usr/local/firefox/bin/firefox\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"args\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"-headless\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"-profile\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"/path/to/my/profile\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"prefs\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"dom.ipc.processCount\"</span><span class=\"token operator\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"javascript.options.showInConsole\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"log\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token property\">\"level\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"trace\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"env\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"MOZ_LOG\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"nsHttp:5\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"MOZ_LOG_FILE\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/path/to/my/profile/log\"</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>\n  The <a href=\"#firefoxoptions\"><code>moz:firefoxOptions</code></a> must be placed—as above—inside\n  <a href=\"/en-US/docs/Web/WebDriver/Capabilities#alwaysmatch\"><code>alwaysMatch</code></a>, or in one of the\n  <a href=\"/en-US/docs/Web/WebDriver/Capabilities#firstmatch\"><code>firstMatch</code></a> <a href=\"/en-US/docs/Web/WebDriver/Capabilities\">capabilities objects</a> as seen here:\n</p>\n<div class=\"code-example\"><pre class=\"brush: json notranslate\"><code><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"capabilities\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"firstMatch\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span><span class=\"token property\">\"moz:firefoxOptions\"</span><span class=\"token operator\">:</span> …<span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"android_2","title":"Android","isH3":true,"content":"<p>This runs the GeckoView example application as installed on the first Android emulator running on the host machine:</p>\n<div class=\"code-example\"><pre class=\"brush: json notranslate\"><code><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"capabilities\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"alwaysMatch\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token property\">\"moz:firefoxOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"androidPackage\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"org.mozilla.geckoview_example\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"androidActivity\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"org.mozilla.geckoview_example.GeckoView\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"androidDeviceSerial\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"emulator-5554\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"androidIntentArguments\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token string\">\"-d\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"http://example.org\"</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"env\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token property\">\"MOZ_LOG\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"nsHttp:5\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token property\">\"MOZ_LOG_FILE\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/mnt/sdcard/log\"</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"see_also","title":"See also","isH3":false,"content":"<ul>\n  <li><a href=\"https://firefox-source-docs.mozilla.org/testing/geckodriver/Capabilities.html\" class=\"external\" rel=\" noopener\">geckodriver's documentation on supported Firefox capabilities</a></li>\n  <li>\n    <a href=\"https://chromedriver.chromium.org/capabilities\" class=\"external\" rel=\" noopener\">Chrome-specific WebDriver capabilities</a>\n    (<code>goog:chromeOptions)</code>\n  </li>\n  <li><a href=\"/en-US/docs/Web/WebDriver/Capabilities\">List of WebDriver capabilities</a></li>\n  <li><a href=\"/en-US/docs/Web/WebDriver/Commands/NewSession\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">New Session</a> command</li>\n</ul>"}}],"toc":[{"text":"Example","id":"example"},{"text":"See also","id":"see_also"}],"summary":"The moz:firefoxOptions capability is a namespaced set of\n  capabilities specific to Firefox. It is used to control the\n  behavior of Firefox and can be used as a member of\n  alwaysMatch or as a member of one of the\n  firstMatch entries.","popularity":0.0015,"modified":"2022-09-05T05:13:03.000Z","source":{"folder":"en-us/web/webdriver/capabilities/firefoxoptions","github_url":"https://github.com/mdn/content/blob/style/old/files/en-us/web/webdriver/capabilities/firefoxoptions/index.md","last_commit_url":"https://github.com/mdn/content/commit/871c718c5bfb53edb3f3c1598f7d19569ce0ef49","filename":"index.md"},"parents":[{"uri":"/en-US/docs/Web","title":"Web technology for developers"},{"uri":"/en-US/docs/Web/WebDriver","title":"WebDriver"},{"uri":"/en-US/docs/Web/WebDriver/Capabilities","title":"Capabilities"},{"uri":"/en-US/docs/Web/WebDriver/Capabilities/firefoxOptions","title":"firefoxOptions"}],"pageTitle":"firefoxOptions - WebDriver | MDN","noIndexing":false}}