{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"Stale element reference","mdn_url":"/en-US/docs/Web/WebDriver/Errors/StaleElementReference","locale":"en-US","native":"English (US)","sidebarHTML":"\n<ol><li><a href=\"/en-US/docs/Web/WebDriver/Errors/InsecureCertificate\">Insecure certificate</a></li><li><a href=\"/en-US/docs/Web/WebDriver/Errors/InvalidArgument\">Invalid argument</a></li><li><a href=\"/en-US/docs/Web/WebDriver/Errors/InvalidCookieDomain\">Invalid cookie domain</a></li><li><a href=\"/en-US/docs/Web/WebDriver/Errors/InvalidSelector\">Invalid selector</a></li><li><a href=\"/en-US/docs/Web/WebDriver/Errors/InvalidSessionID\">Invalid session ID</a></li><li><a href=\"/en-US/docs/Web/WebDriver/Errors/JavaScriptError\">JavaScript error</a></li><li><a href=\"/en-US/docs/Web/WebDriver/Errors/ScriptTimeout\">Script timeout</a></li><li><a href=\"/en-US/docs/Web/WebDriver/Errors/StaleElementReference\">Stale element reference</a></li><li><a href=\"/en-US/docs/Web/WebDriver/Errors/UnknownCommand\">Unknown command</a></li><li><a href=\"/en-US/docs/Web/WebDriver/Errors/UnknownError\">Unknown error</a></li><li><a href=\"/en-US/docs/Web/WebDriver/Errors/UnknownMethod\">Unknown method</a></li></ol>\n","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>The <strong>stale element reference</strong> error is a <a href=\"/en-US/docs/Web/WebDriver/Errors\">WebDriver error</a> that occurs because the referenced <a href=\"/en-US/docs/Web/WebDriver/WebElement\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">web element</a> is no longer attached to the <a href=\"/en-US/docs/Glossary/DOM\">DOM</a>.</p>\n<p>\n  Every DOM element is represented in WebDriver by a unique identifying reference, known as a <em><a href=\"/en-US/docs/Web/WebDriver/WebElement\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">web element</a></em>.\n  The web element reference is a <a href=\"/en-US/docs/Glossary/UUID\">UUID</a> used to execute commands targeting specific elements, such as <a href=\"/en-US/docs/Web/WebDriver/Commands/GetElementTagName\">getting an element's tag name</a> and <a href=\"/en-US/docs/Web/WebDriver/Commands/GetElementProperty\">retrieving a property</a> off an element.\n</p>\n<p>When an element is no longer attached to the DOM, i.e. it has been removed from the document or the document has changed, it is said to be <em>stale</em>. Staleness occurs for example when you have a web element reference and the document it was retrieved from navigates.</p>"}},{"type":"prose","value":{"id":"examples","title":"Examples","isH3":false,"content":""}},{"type":"prose","value":{"id":"document_navigation","title":"Document navigation","isH3":true,"content":"<p>Upon navigation, all web element references to the previous document will be discarded along with the document. This will cause any subsequent interaction with the <a href=\"/en-US/docs/Web/WebDriver/WebElement\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">web element</a> to fail with the stale element reference error:</p>\n<div class=\"code-example\"><pre class=\"brush: python notranslate\"><code><span class=\"token keyword\">import</span> urllib\n\n<span class=\"token keyword\">from</span> selenium <span class=\"token keyword\">import</span> webdriver\n<span class=\"token keyword\">from</span> selenium<span class=\"token punctuation\">.</span>common <span class=\"token keyword\">import</span> exceptions\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">inline</span><span class=\"token punctuation\">(</span>doc<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">\"data:text/html;charset=utf-8,{}\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>urllib<span class=\"token punctuation\">.</span>quote<span class=\"token punctuation\">(</span>doc<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\nsession <span class=\"token operator\">=</span> webdriver<span class=\"token punctuation\">.</span>Firefox<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nsession<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>inline<span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;strong&gt;foo&lt;/strong&gt;\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nfoo <span class=\"token operator\">=</span> session<span class=\"token punctuation\">.</span>find_element_by_css_selector<span class=\"token punctuation\">(</span><span class=\"token string\">\"strong\"</span><span class=\"token punctuation\">)</span>\n\nsession<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>inline<span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;i&gt;bar&lt;/i&gt;\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    foo<span class=\"token punctuation\">.</span>tag_name\n<span class=\"token keyword\">except</span> exceptions<span class=\"token punctuation\">.</span>StaleElementReferenceException <span class=\"token keyword\">as</span> e<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span>\n</code></pre></div>\n<p>Output:</p>\n<pre class=\"notranslate\">StaleElementReferenceException: The element reference of e75a1764-ff73-40fa-93c1-08cb90394b65 is stale either the element is no longer attached to the DOM, it is not in the current frame context, or the document has been refreshed\n</pre>"}},{"type":"prose","value":{"id":"node_removal","title":"Node removal","isH3":true,"content":"<p>When a document node is removed from the DOM, its web element reference will be invalidated. This will also cause any subsequent interaction with the <a href=\"/en-US/docs/Web/WebDriver/WebElement\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">web element</a> to fail with the stale element reference error:</p>\n<div class=\"code-example\"><pre class=\"brush: python notranslate\"><code><span class=\"token keyword\">import</span> urllib\n\n<span class=\"token keyword\">from</span> selenium <span class=\"token keyword\">import</span> webdriver\n<span class=\"token keyword\">from</span> selenium<span class=\"token punctuation\">.</span>common <span class=\"token keyword\">import</span> exceptions\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">inline</span><span class=\"token punctuation\">(</span>doc<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">return</span> <span class=\"token string\">\"data:text/html;charset=utf-8,{}\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>urllib<span class=\"token punctuation\">.</span>quote<span class=\"token punctuation\">(</span>doc<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\nsession <span class=\"token operator\">=</span> webdriver<span class=\"token punctuation\">.</span>Firefox<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nsession<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>inline<span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;button&gt;foo&lt;/button&gt;\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nbutton <span class=\"token operator\">=</span> session<span class=\"token punctuation\">.</span>find_element_by_css_selector<span class=\"token punctuation\">(</span><span class=\"token string\">\"button\"</span><span class=\"token punctuation\">)</span>\nsession<span class=\"token punctuation\">.</span>execute_script<span class=\"token punctuation\">(</span><span class=\"token triple-quoted-string string\">\"\"\"\n    let [button] = arguments;\n    button.remove();\n    \"\"\"</span><span class=\"token punctuation\">,</span> script_args<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>button<span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    button<span class=\"token punctuation\">.</span>click<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> exceptions<span class=\"token punctuation\">.</span>StaleElementReferenceException <span class=\"token keyword\">as</span> e<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span>\n</code></pre></div>\n<p>Output:</p>\n<pre class=\"notranslate\">StaleElementReferenceException: The element reference of e75a1764-ff73-40fa-93c1-08cb90394b65 is stale either the element is no longer attached to the DOM, it is not in the current frame context, or the document has been refreshed\n</pre>"}},{"type":"prose","value":{"id":"see_also","title":"See also","isH3":false,"content":"<ul>\n  <li><a href=\"/en-US/docs/Web/WebDriver/WebElement\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">WebElement</a></li>\n  <li>Associated commands:\n    <ul>\n      <li><a href=\"/en-US/docs/Web/WebDriver/Commands/FindElement\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">Find Element</a></li>\n      <li><a href=\"/en-US/docs/Web/WebDriver/Commands/FindElements\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">Find Elements</a></li>\n      <li><a href=\"/en-US/docs/Web/WebDriver/Commands/FindElementFromElement\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">Find Element From Element</a></li>\n      <li><a href=\"/en-US/docs/Web/WebDriver/Commands/FindElementsFromElement\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">Find Elements From Element</a></li>\n    </ul>\n  </li>\n</ul>"}}],"toc":[{"text":"Examples","id":"examples"},{"text":"See also","id":"see_also"}],"summary":"The stale element reference error is a WebDriver error that occurs because the referenced web element is no longer attached to the DOM.","popularity":0.0015,"modified":"2022-09-05T02:59:05.000Z","source":{"folder":"en-us/web/webdriver/errors/staleelementreference","github_url":"https://github.com/mdn/content/blob/style/old/files/en-us/web/webdriver/errors/staleelementreference/index.md","last_commit_url":"https://github.com/mdn/content/commit/a9005b03657fb1332dfa66515ff4f42f5a8bb56b","filename":"index.md"},"parents":[{"uri":"/en-US/docs/Web","title":"Web technology for developers"},{"uri":"/en-US/docs/Web/WebDriver","title":"WebDriver"},{"uri":"/en-US/docs/Web/WebDriver/Errors","title":"WebDriver errors"},{"uri":"/en-US/docs/Web/WebDriver/Errors/StaleElementReference","title":"Stale element reference"}],"pageTitle":"Stale element reference - WebDriver | MDN","noIndexing":false}}