{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"Atomics.compareExchange()","mdn_url":"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Atomics/compareExchange","locale":"en-US","native":"English (US)","sidebarHTML":"<ol><li><strong><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects\">Standard built-in objects</a></strong></li><li><strong><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Atomics\"><code>Atomics</code></a></strong></li><li data-default-state=\"open\"><a href=\"#\"><strong>Methods</strong></a><ol><li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Atomics/add\"><code>Atomics.add()</code></a></li><li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Atomics/and\"><code>Atomics.and()</code></a></li><li><em><code>Atomics.compareExchange()</code></em></li><li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Atomics/exchange\"><code>Atomics.exchange()</code></a></li><li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Atomics/isLockFree\"><code>Atomics.isLockFree()</code></a></li><li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Atomics/load\"><code>Atomics.load()</code></a></li><li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Atomics/notify\"><code>Atomics.notify()</code></a></li><li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Atomics/or\"><code>Atomics.or()</code></a></li><li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Atomics/store\"><code>Atomics.store()</code></a></li><li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Atomics/sub\"><code>Atomics.sub()</code></a></li><li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Atomics/wait\"><code>Atomics.wait()</code></a></li><li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Atomics/waitAsync\"><code>Atomics.waitAsync()</code></a></li><li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Atomics/xor\"><code>Atomics.xor()</code></a></li></ol></li><li><strong>Inheritance:</strong></li><li><strong><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object\"><code>Object</code></a></strong></li><li><a href=\"#\"><strong>Properties</strong></a><ol><li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/constructor\"><code>Object.prototype.constructor</code></a></li><li><svg class=\"icon icon-deprecated\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-deprecated\"></use>\n</svg><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/proto\"><code>Object.prototype.__proto__</code></a></li></ol></li><li><a href=\"#\"><strong>Methods</strong></a><ol><li><svg class=\"icon icon-deprecated\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-deprecated\"></use>\n</svg><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/__defineGetter__\"><code>Object.prototype.__defineGetter__()</code></a></li><li><svg class=\"icon icon-deprecated\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-deprecated\"></use>\n</svg><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/__defineSetter__\"><code>Object.prototype.__defineSetter__()</code></a></li><li><svg class=\"icon icon-deprecated\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-deprecated\"></use>\n</svg><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/__lookupGetter__\"><code>Object.prototype.__lookupGetter__()</code></a></li><li><svg class=\"icon icon-deprecated\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-deprecated\"></use>\n</svg><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/__lookupSetter__\"><code>Object.prototype.__lookupSetter__()</code></a></li><li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwnProperty\"><code>Object.prototype.hasOwnProperty()</code></a></li><li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/isPrototypeOf\"><code>Object.prototype.isPrototypeOf()</code></a></li><li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/propertyIsEnumerable\"><code>Object.prototype.propertyIsEnumerable()</code></a></li><li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf\"><code>Object.setPrototypeOf()</code></a></li><li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/toLocaleString\"><code>Object.prototype.toLocaleString()</code></a></li><li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/toString\"><code>Object.prototype.toString()</code></a></li><li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/valueOf\"><code>Object.prototype.valueOf()</code></a></li></ol></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>\n  The static\n  <strong><code>Atomics.compareExchange()</code></strong>\n  method exchanges a given replacement value at a given position in the array, if a given\n  expected value equals the old value. It returns the old value at that position whether\n  it was equal to the expected value or not. This atomic operation guarantees that no\n  other write happens until the modified value is written back.\n</p><iframe class=\"interactive\" height=\"490\" src=\"https://interactive-examples.mdn.mozilla.net/pages/js/atomics-compareexchange.html\" title=\"MDN Web Docs Interactive Example\" loading=\"lazy\"></iframe>"}},{"type":"prose","value":{"id":"syntax","title":"Syntax","isH3":false,"content":"<div class=\"code-example\"><pre class=\"brush: js-nolint notranslate\">Atomics.compareExchange(typedArray, index, expectedValue, replacementValue)\n</pre></div>"}},{"type":"prose","value":{"id":"parameters","title":"Parameters","isH3":true,"content":"<dl>\n  <dt id=\"typedarray\"><code>typedArray</code></dt>\n  <dd>\n    <p>\n      An integer typed array. One of <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int8Array\"><code>Int8Array</code></a>, <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array\"><code>Uint8Array</code></a>,\n      <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int16Array\"><code>Int16Array</code></a>, <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint16Array\"><code>Uint16Array</code></a>, <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int32Array\"><code>Int32Array</code></a>,\n      <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint32Array\"><code>Uint32Array</code></a>, <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt64Array\"><code>BigInt64Array</code></a>, or\n      <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigUint64Array\"><code>BigUint64Array</code></a>.\n    </p>\n  </dd>\n  <dt id=\"index\"><code>index</code></dt>\n  <dd>\n    <p>\n      The position in the <code>typedArray</code> to exchange a\n      <code>value</code>.\n    </p>\n  </dd>\n  <dt id=\"expectedvalue\"><code>expectedValue</code></dt>\n  <dd>\n    <p>The value to check for equality.</p>\n  </dd>\n  <dt id=\"replacementvalue\"><code>replacementValue</code></dt>\n  <dd>\n    <p>The number to exchange.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"return_value","title":"Return value","isH3":true,"content":"<p>\n  The old value at the given position\n  (<code>typedArray[index]</code>).\n</p>"}},{"type":"prose","value":{"id":"exceptions","title":"Exceptions","isH3":true,"content":"<ul>\n  <li>\n    Throws a <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError\"><code>TypeError</code></a>, if <code>typedArray</code> is not one\n    of the allowed integer types.\n  </li>\n  <li>\n    Throws a <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/RangeError\"><code>RangeError</code></a>, if <code>index</code> is out of bounds\n    in the <code>typedArray</code>.\n  </li>\n</ul>"}},{"type":"prose","value":{"id":"examples","title":"Examples","isH3":false,"content":""}},{"type":"prose","value":{"id":"using_compareexchange","title":"Using compareExchange()","isH3":true,"content":"<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> sab <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SharedArrayBuffer</span><span class=\"token punctuation\">(</span><span class=\"token number\">1024</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> ta <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Uint8Array</span><span class=\"token punctuation\">(</span>sab<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nta<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">7</span><span class=\"token punctuation\">;</span>\n\nAtomics<span class=\"token punctuation\">.</span><span class=\"token function\">compareExchange</span><span class=\"token punctuation\">(</span>ta<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span><span class=\"token punctuation\">,</span> <span class=\"token number\">12</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// returns 7, the old value</span>\nAtomics<span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span>ta<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 12</span>\n</code></pre></div>"}},{"type":"specifications","value":{"title":"Specifications","id":"specifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://tc39.es/ecma262/multipage/structured-data.html#sec-atomics.compareexchange","title":"ECMAScript Language Specification"}],"query":"javascript.builtins.Atomics.compareExchange"}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"browser_compatibility","isH3":false,"query":"javascript.builtins.Atomics.compareExchange","dataURL":"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Atomics/compareExchange/bcd.json"}},{"type":"prose","value":{"id":"see_also","title":"See also","isH3":false,"content":"<ul>\n  <li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Atomics\"><code>Atomics</code></a></li>\n  <li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Atomics/exchange\"><code>Atomics.exchange()</code></a></li>\n</ul>"}}],"toc":[{"text":"Syntax","id":"syntax"},{"text":"Examples","id":"examples"},{"text":"Specifications","id":"specifications"},{"text":"Browser compatibility","id":"browser_compatibility"},{"text":"See also","id":"see_also"}],"summary":"The static\n  Atomics.compareExchange()\n  method exchanges a given replacement value at a given position in the array, if a given\n  expected value equals the old value. It returns the old value at that position whether\n  it was equal to the expected value or not. This atomic operation guarantees that no\n  other write happens until the modified value is written back.","popularity":0.0002,"modified":"2022-09-13T07:01:32.000Z","other_translations":[{"title":"Atomics.compareExchange()","locale":"fr","native":"Français"},{"title":"Atomics.compareExchange()","locale":"ja","native":"日本語"},{"title":"Atomics.compareExchange()","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"en-us/web/javascript/reference/global_objects/atomics/compareexchange","github_url":"https://github.com/mdn/content/blob/style/old/files/en-us/web/javascript/reference/global_objects/atomics/compareexchange/index.md","last_commit_url":"https://github.com/mdn/content/commit/87a9f73c410c9b9e91300695c8aa4931367243fb","filename":"index.md"},"parents":[{"uri":"/en-US/docs/Web","title":"Web technology for developers"},{"uri":"/en-US/docs/Web/JavaScript","title":"JavaScript"},{"uri":"/en-US/docs/Web/JavaScript/Reference","title":"JavaScript reference"},{"uri":"/en-US/docs/Web/JavaScript/Reference/Global_Objects","title":"Standard built-in objects"},{"uri":"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Atomics","title":"Atomics"},{"uri":"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Atomics/compareExchange","title":"Atomics.compareExchange()"}],"pageTitle":"Atomics.compareExchange() - JavaScript | MDN","noIndexing":false}}