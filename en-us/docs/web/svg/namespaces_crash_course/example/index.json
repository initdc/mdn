{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"Example","mdn_url":"/en-US/docs/Web/SVG/Namespaces_Crash_Course/Example","locale":"en-US","native":"English (US)","sidebarHTML":"","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>In this example, we use <a href=\"/en-US/docs/Glossary/XHTML\">XHTML</a>, <a href=\"/en-US/docs/Web/SVG\">SVG</a>, <a href=\"/en-US/docs/Web/JavaScript\">JavaScript</a>, and the <a href=\"/en-US/docs/Web/API/Document_Object_Model\">DOM</a> to animate a swarm of \"motes\". These motes are governed by two simple principles. First, each mote tries to move towards the mouse cursor, and second each mote tries to move away from the average mote position. Combined, we get this very natural-looking behavior.</p>\n<p>This is done completely in W3C Standards–XHTML, SVG, and JavaScript–no Flash or any vendor-specific extensions. This example should work in Firefox 1.5 and above.</p>\n<p><a href=\"https://media.prod.mdn.mozit.cloud/samples/svg/swarm-of-motes.xhtml\" class=\"external\" rel=\" noopener\">View the example</a></p>\n<div class=\"code-example\"><pre class=\"brush: xml notranslate\"><code><span class=\"token prolog\">&lt;?xml version='1.0'?&gt;</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">xmlns</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/1999/xhtml<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>svg</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/2000/svg<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">&gt;</span></span>A swarm of motes<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>style</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token cdata\">&lt;![CDATA[\n    label, input\n    {\n      width: 150px;\n      display: block;\n      float: left;\n      margin-bottom: 10px;\n    }\n    label\n    {\n      text-align: right;\n      width: 75px;\n      padding-right: 20px;\n    }\n    br\n    {\n      clear: left;\n    }\n  ]]&gt;</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>style</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span> <span class=\"token attr-name\">onload</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>update()<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">svg:</span>svg</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>display<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>400<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">height</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>300<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">&gt;</span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">svg:</span>circle</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>cursor<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">cx</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>200<span class=\"token punctuation\">'</span></span>\n<span class=\"token attr-name\">cy</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>150<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">r</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>7<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">fill</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>#0000ff<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">fill-opacity</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>0.5<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">/&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">svg:</span>svg</span><span class=\"token punctuation\">&gt;</span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span>A swarm of motes, governed by two simple principles.\n    First, each mote tries to move towards the cursor, and\n    second each mote tries to move away from the average\n    mote position. Combined, we get this very natural\n    looking behavior.\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span>\n    This is done completely in W3C Standards–XHTML,\n    SVG and JavaScript–no flash or any vendor specific\n    extensions. Currently, this will work in Mozilla Firefox\n    version 1.5 and above.\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n    (C) 2006 <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>emailme<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>#<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">&gt;</span></span>Nick Johnson<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">&gt;</span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>text/javascript<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token cdata\">&lt;![CDATA[\n      // foil spam bots\n      let email = '@riovia.net';\n      email ='nick' + email;\n      document.getElementById('emailme').href = 'mailto:'+email;\n    ]]&gt;</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span>\n    This software is free for you to use in any way whatsoever,\n    and comes with no warranty at all.\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">action</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">onsubmit</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>return false;<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">&gt;</span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">&gt;</span></span>Number of motes:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>num_motes<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>5<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">/&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">/&gt;</span></span>\n\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">&gt;</span></span>Max. Velocity:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>max_velocity<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>15<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">/&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">/&gt;</span></span>\n\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">&gt;</span></span>Attraction to cursor:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>attract_cursor<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>6<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">/&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">/&gt;</span></span>\n\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">&gt;</span></span>Repulsion from peers:<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>repel_peer<span class=\"token punctuation\">'</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>5<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">/&gt;</span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>br</span><span class=\"token punctuation\">/&gt;</span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">&gt;</span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">&gt;</span></span>\n\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>text/javascript<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token cdata\">&lt;![CDATA[\n\n    // Array of motes\n    let motes;\n\n    // Get the display element.\n    function Display() {\n      return document.getElementById('display');\n    }\n\n    // Determine dimensions of the display element.\n    // Return this as a 2-tuple (x,y) in an array\n    function Dimensions() {\n      // Our Rendering Element\n      const display = Display();\n      const width = parseInt(display.getAttributeNS(null, 'width'));\n      const height = parseInt(display.getAttributeNS(null, 'height'));\n\n      return [width, height];\n    }\n\n    // This is called by mouse move events\n    const mouse_x = 200;\n    const mouse_y = 150;\n    function OnMouseMove(evt) {\n      mouse_x = evt.clientX;\n      mouse_y = evt.clientY;\n\n      const widget = document.getElementById('cursor');\n      widget.setAttributeNS(null,'cx',mouse_x);\n      widget.setAttributeNS(null,'cy',mouse_y);\n    }\n    document.onmousemove = OnMouseMove;\n\n    // Determine (x,y) of the cursor\n    function Cursor() {\n      return [mouse_x, mouse_y];\n    }\n\n    // Determine average (x,y) of the swarm\n    function AverageMotePosition() {\n      if (!motes || motes.length === 0) {\n        return [0, 0];\n      }\n\n      const sum_x = 0;\n      const sum_y = 0;\n      for (const mote of motes) {\n        sum_x += mote.x;\n        sum_y += mote.y;\n      }\n\n      return [sum_x / motes.length, sum_y / motes.length];\n    }\n\n    // A nicer, integer random\n    function Rand(modulo)\n    {\n      return Math.round(Math.random() * (modulo - 1));\n    }\n\n    // Class Mote\n    function Mote() {\n      // Dimensions of drawing area.\n      const dims = Dimensions();\n      const width = dims[0];\n      const height = dims[1];\n\n      // Choose a random coordinate to start at.\n      this.x = Rand(width);\n      this.y = Rand(height);\n\n      // Nil initial velocity.\n      this.vx = this.vy = 0;\n\n      // A visual element, initially none\n      this.elt = null;\n    }\n\n    // Turn this into a class.\n    new Mote();\n\n    // Mote::applyForce() — Adjust velocity\n    // towards the given position.\n    // Warning: Pseudo-physics — not really\n    // governed by any /real/ physical principles.\n    Mote.prototype.applyForce = function (pos, mag) {\n      if (pos[0] &gt; this.x) {\n        this.vx += mag;\n      } else if (pos[0] &lt; this.x) {\n        this.vx -= mag;\n      }\n\n      if (pos[1] &gt; this.y) {\n        this.vy += mag;\n      } else if (pos[1] &lt; this.y) {\n        this.vy -= mag;\n      }\n    }\n\n    // Mote::capVelocity() — Apply an upper limit\n    // on mote velocity.\n    Mote.prototype.capVelocity = function () {\n      const max = parseInt(document.getElementById('max_velocity').value);\n\n      if (max &lt; this.vx) {\n        this.vx = max;\n      } else if (-max &gt; this.vx) {\n        this.vx = -max;\n      }\n\n      if (max &lt; this.vy) {\n        this.vy = max;\n      } else if (-max &gt; this.vy) {\n        this.vy = -max;\n      }\n    }\n\n    // Mote::capPosition() — Apply an upper/lower limit\n    // on mote position.\n    Mote.prototype.capPosition = function () {\n      const dims = Dimensions();\n      if (this.x &lt; 0) {\n        this.x = 0;\n      } else if (this.x &gt;= dims[0]) {\n        this.x = dims[0] - 1;\n      }\n\n      if (this.y &lt; 0) {\n        this.y = 0;\n      } else if (this.y &gt;= dims[1]) {\n        this.y = dims[1] - 1;\n      }\n    }\n\n    // Mote::move() — move a mote, update the screen.\n    Mote.prototype.move = function () {\n      // Apply attraction to cursor.\n      const attract = parseInt(document.getElementById('attract_cursor').value);\n      const cursor = Cursor();\n      this.applyForce(cursor, attract);\n\n      // Apply repulsion from average mote position.\n      const repel = parseInt(document.getElementById('repel_peer').value);\n      const average = AverageMotePosition();\n      this.applyForce(average, -repel);\n\n      // Add some randomness to the velocity.\n      this.vx += Rand(3) - 1;\n      this.vy += Rand(3) - 1;\n\n      // Put an upper limit on velocity.\n      this.capVelocity();\n\n      // Apply velocity.\n      const old_x = this.x;\n      const old_y = this.y;\n      this.x += this.vx;\n      this.y += this.vy;\n      this.capPosition();\n\n      // Draw it.\n      if (this.elt === null) {\n        const svg = 'http://www.w3.org/2000/svg';\n        this.elt = document.createElementNS(svg, 'line');\n        this.elt.setAttributeNS(null, 'stroke', 'green');\n        this.elt.setAttributeNS(null, 'stroke-width', '3');\n        this.elt.setAttributeNS(null, 'stroke-opacity', '0.5');\n        Display().appendChild(this.elt);\n      }\n\n      this.elt.setAttributeNS(null, 'x1', old_x);\n      this.elt.setAttributeNS(null, 'y1', old_y);\n\n      this.elt.setAttributeNS(null, 'x2', this.x);\n      this.elt.setAttributeNS(null, 'y2', this.y);\n    }\n\n    function update() {\n      // First call?\n      if (!motes) {\n        motes = [];\n      }\n\n      // How many motes should there be?\n      let num = parseInt( document.getElementById('num_motes').value );\n      if ( num &lt; 0 ) {\n        num = 0;\n      }\n\n      // Make sure we have exactly that many...\n      // Too few?\n      while (motes.length &lt; num) {\n        motes.push(new Mote());\n      }\n\n      // Or too many?\n      if (num === 0) {\n        motes = [];\n      } else if (motes.length &gt; num) {\n        motes = motes.slice(0, num - 1);\n      }\n\n      // Move a random mote\n      if (motes.length &gt; 0) {\n        motes[Rand(motes.length)].move();\n      }\n\n      // And do this again in 1/100 sec\n      setTimeout('update()', 10);\n    }\n  ]]&gt;</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">&gt;</span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">&gt;</span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>"}}],"toc":[],"summary":"In this example, we use XHTML, SVG, JavaScript, and the DOM to animate a swarm of \"motes\". These motes are governed by two simple principles. First, each mote tries to move towards the mouse cursor, and second each mote tries to move away from the average mote position. Combined, we get this very natural-looking behavior.","popularity":0,"modified":"2022-09-20T02:49:59.000Z","other_translations":[{"title":"例","locale":"ja","native":"日本語"}],"source":{"folder":"en-us/web/svg/namespaces_crash_course/example","github_url":"https://github.com/mdn/content/blob/style/old/files/en-us/web/svg/namespaces_crash_course/example/index.md","last_commit_url":"https://github.com/mdn/content/commit/309b7e313af4aebde03f5825ec530db614e2bb16","filename":"index.md"},"parents":[{"uri":"/en-US/docs/Web","title":"Web technology for developers"},{"uri":"/en-US/docs/Web/SVG","title":"SVG: Scalable Vector Graphics"},{"uri":"/en-US/docs/Web/SVG/Namespaces_Crash_Course","title":"Namespaces crash course"},{"uri":"/en-US/docs/Web/SVG/Namespaces_Crash_Course/Example","title":"Example"}],"pageTitle":"Example - SVG: Scalable Vector Graphics | MDN","noIndexing":false}}