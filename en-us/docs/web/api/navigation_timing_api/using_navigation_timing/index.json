{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"Using Navigation Timing","mdn_url":"/en-US/docs/Web/API/Navigation_timing_API/Using_Navigation_Timing","locale":"en-US","native":"English (US)","sidebarHTML":"<ol><li><strong><a href=\"/en-US/docs/Web/API/Navigation_timing_API\">Navigation timing API</a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Guides</summary><ol><li><a href=\"/en-US/docs/Web/API/Navigation_timing_API/Using_Navigation_Timing\">Using Navigation Timing</a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Interfaces</summary><ol><li><a href=\"/en-US/docs/Web/API/Performance\"><code>Performance</code></a></li><li><a href=\"/en-US/docs/Web/API/PerformanceNavigation\"><code>PerformanceNavigation</code></a></li><li><a href=\"/en-US/docs/Web/API/PerformanceTiming\"><code>PerformanceTiming</code></a></li><li><a href=\"/en-US/docs/Web/API/PerformanceNavigationTiming\"><code>PerformanceNavigationTiming</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Properties</summary><ol><li><a href=\"/en-US/docs/Web/API/performance_property\"><code>performance_property</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>The Navigation Timing API lets you easily obtain detailed and highly accurate timing information to help isolate performance problems with your site's code or resources.</p>\n<p>Unlike other tools or libraries, the <a href=\"/en-US/docs/Web/API/Navigation_timing_API\">Navigation Timing API</a> lets you gather information that only the browser can provide at a level of accuracy much improved over other techniques. It also offers the advantage of being able to provide timing information as perceived by the user rather than data that has no correlation to what the user experiences.</p>"}},{"type":"prose","value":{"id":"collecting_timing_information","title":"Collecting timing information","isH3":false,"content":"<p>Using the API is as simple as obtaining the <a href=\"/en-US/docs/Web/API/Performance\"><code>Performance</code></a> object using <a href=\"/en-US/docs/Web/API/performance_property\"><code>window.performance</code></a> and looking up what you need within the object returned. For example, to measure the perceived loading time for a page:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"load\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> now <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> loadingTime <span class=\"token operator\">=</span> now <span class=\"token operator\">-</span> performance<span class=\"token punctuation\">.</span>timing<span class=\"token punctuation\">.</span>navigationStart<span class=\"token punctuation\">;</span>\n\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".output\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>innerText <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>loadingTime<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> ms</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>This code, executed when the <a href=\"/en-US/docs/Web/API/Window/load_event\" title=\"load\"><code>load</code></a> event occurs, subtracts from the current time the time at which the navigation whose timing was recorded began (<a href=\"/en-US/docs/Web/API/PerformanceTiming/navigationStart\" title=\"performance.timing.navigationStart\"><code>performance.timing.navigationStart</code></a>), and outputs that information to the screen by inserting it into an element.</p>\n<div class=\"code-example\"><pre class=\"brush: html hidden notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>output<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<div class=\"code-example\"><pre class=\"brush: css hidden notranslate\"><code><span class=\"token selector\">.output</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 1px solid #bbb<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">font</span><span class=\"token punctuation\">:</span> 16px <span class=\"token string\">\"Open Sans\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Helvetica\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Arial\"</span><span class=\"token punctuation\">,</span> sans-serif<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>In tandem with appropriate HTML and CSS, the result is:</p><iframe class=\"sample-code-frame\" title=\"Collecting timing information sample\" id=\"frame_collecting_timing_information\" width=\"500\" height=\"80\" src=\"https://yari-demos.prod.mdn.mozit.cloud/en-US/docs/Web/API/Navigation_timing_API/Using_Navigation_Timing/_sample_.collecting_timing_information.html\" loading=\"lazy\"></iframe>\n<p>The values listed are for the <a href=\"/en-US/docs/Web/HTML/Element/iframe\"><code>&lt;iframe&gt;</code></a> in which the sample is presented above.</p>\n<p>For a list of the available timing values you can look for in <a href=\"/en-US/docs/Web/API/PerformanceTiming\"><code>PerformanceTiming</code></a>, see the <a href=\"/en-US/docs/Web/API/PerformanceTiming\"><code>PerformanceTiming</code></a> interface's <a href=\"/en-US/docs/Web/API/PerformanceTiming#properties\">Properties</a> section.</p>"}},{"type":"prose","value":{"id":"determining_navigation_type","title":"Determining navigation type","isH3":false,"content":"<p>To put the timing information obtained from <a href=\"/en-US/docs/Web/API/PerformanceTiming\"><code>PerformanceTiming</code></a> into the correct perspective, you need to know more about what sort of load operation occurred. In particular, you need to know:</p>\n<ul>\n  <li>Was this a load or a reload?</li>\n  <li>Was this a navigation or a move forward or backward through history?</li>\n  <li>How many (if any) redirects were required in order to complete the navigation?</li>\n</ul>\n<p>This information is provided by the <a href=\"/en-US/docs/Web/API/Performance/navigation\"><code>Performance.navigation</code></a> property, which returns a <a href=\"/en-US/docs/Web/API/PerformanceNavigation\"><code>PerformanceNavigation</code></a> object that includes the needed information.</p>\n<p>Let's add this information to the example above. The new code looks like this:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>window<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"load\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> now <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getTime</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> loadingTime <span class=\"token operator\">=</span> now <span class=\"token operator\">-</span> performance<span class=\"token punctuation\">.</span>timing<span class=\"token punctuation\">.</span>navigationStart<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">let</span> output <span class=\"token operator\">=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Load time: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>loadingTime<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> ms&lt;br/&gt;</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  output <span class=\"token operator\">+=</span> <span class=\"token string\">\"Navigation type: \"</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">switch</span><span class=\"token punctuation\">(</span>performance<span class=\"token punctuation\">.</span>navigation<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">case</span> PerformanceNavigation<span class=\"token punctuation\">.</span><span class=\"token constant\">TYPE_NAVIGATE</span><span class=\"token operator\">:</span>\n        output <span class=\"token operator\">+=</span> <span class=\"token string\">\"Navigation\"</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">case</span> PerformanceNavigation<span class=\"token punctuation\">.</span><span class=\"token constant\">TYPE_RELOAD</span><span class=\"token operator\">:</span>\n        output <span class=\"token operator\">+=</span> <span class=\"token string\">\"Reload\"</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">case</span> PerformanceNavigation<span class=\"token punctuation\">.</span><span class=\"token constant\">TYPE_BACK_FORWARD</span><span class=\"token operator\">:</span>\n        output <span class=\"token operator\">+=</span> <span class=\"token string\">\"History\"</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span>\n        output <span class=\"token operator\">+=</span> <span class=\"token string\">\"Unknown\"</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  output <span class=\"token operator\">+=</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">&lt;br/&gt;Redirects: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>performance<span class=\"token punctuation\">.</span>navigation<span class=\"token punctuation\">.</span>redirectCount<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".output\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">=</span> output<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>This amends the previous example by looking at the contents of the <code>performance.navigation</code> object. <a href=\"/en-US/docs/Web/API/PerformanceNavigation/type\" title=\"performance.navigation.type\"><code>performance.navigation.type</code></a> indicates what kind of load operation took place: a navigation, a reload, or a shift through the browser's history. We also obtain the number of redirects that were incurred during the navigation from <a href=\"/en-US/docs/Web/API/PerformanceNavigation/redirectCount\" title=\"performance.navigation.redirectCount\"><code>performance.navigation.redirectCount</code></a>. This information is output to the screen just like the page load time was previously: by inserting it into the element with class <code>\"output\"</code>.</p>\n<div class=\"code-example\"><pre class=\"brush: html hidden notranslate\"><code><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>output<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">&gt;</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">&gt;</span></span>\n</code></pre></div>\n<div class=\"code-example\"><pre class=\"brush: css hidden notranslate\"><code><span class=\"token selector\">.output</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">border</span><span class=\"token punctuation\">:</span> 1px solid #bbb<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">font</span><span class=\"token punctuation\">:</span> 16px <span class=\"token string\">\"Open Sans\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Helvetica\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"Arial\"</span><span class=\"token punctuation\">,</span> sans-serif<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>With this code in place, the result looks like this:</p><iframe class=\"sample-code-frame\" title=\"Determining navigation type sample\" id=\"frame_determining_navigation_type\" width=\"500\" height=\"120\" src=\"https://yari-demos.prod.mdn.mozit.cloud/en-US/docs/Web/API/Navigation_timing_API/Using_Navigation_Timing/_sample_.determining_navigation_type.html\" loading=\"lazy\"></iframe>\n<p>The values listed are for the <a href=\"/en-US/docs/Web/HTML/Element/iframe\"><code>&lt;iframe&gt;</code></a> in which the sample is presented.</p>"}},{"type":"prose","value":{"id":"see_also","title":"See also","isH3":false,"content":"<ul>\n  <li><a href=\"/en-US/docs/Web/API/Navigation_timing_API\">Navigation Timing API</a></li>\n  <li><a href=\"/en-US/docs/Web/API/performance_property\"><code>window.performance</code></a></li>\n  <li><a href=\"/en-US/docs/Web/API/Performance\"><code>Performance</code></a>, <a href=\"/en-US/docs/Web/API/PerformanceTiming\"><code>PerformanceTiming</code></a>, and <a href=\"/en-US/docs/Web/API/PerformanceNavigation\"><code>PerformanceNavigation</code></a></li>\n</ul>"}}],"toc":[{"text":"Collecting timing information","id":"collecting_timing_information"},{"text":"Determining navigation type","id":"determining_navigation_type"},{"text":"See also","id":"see_also"}],"summary":"The Navigation Timing API lets you easily obtain detailed and highly accurate timing information to help isolate performance problems with your site's code or resources.","popularity":0.0002,"modified":"2022-09-13T19:34:57.000Z","other_translations":[{"title":"Using Navigation Timing","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"en-us/web/api/navigation_timing_api/using_navigation_timing","github_url":"https://github.com/mdn/content/blob/style/old/files/en-us/web/api/navigation_timing_api/using_navigation_timing/index.md","last_commit_url":"https://github.com/mdn/content/commit/a36633398f827c87eb593f9647ed00bf33fd5b34","filename":"index.md"},"parents":[{"uri":"/en-US/docs/Web","title":"Web technology for developers"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/Navigation_timing_API","title":"Navigation Timing API"},{"uri":"/en-US/docs/Web/API/Navigation_timing_API/Using_Navigation_Timing","title":"Using Navigation Timing"}],"pageTitle":"Using Navigation Timing - Web APIs | MDN","noIndexing":false}}