{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"Animation.replaceState","mdn_url":"/en-US/docs/Web/API/Animation/replaceState","locale":"en-US","native":"English (US)","sidebarHTML":"<ol><li><strong><a href=\"/en-US/docs/Web/API/Web_Animations_API\">Web Animations API</a></strong></li><li><strong><a href=\"/en-US/docs/Web/API/Animation\"><code>Animation</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Constructor</summary><ol><li><a href=\"/en-US/docs/Web/API/Animation/Animation\"><code>Animation()</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Properties</summary><ol><li><a href=\"/en-US/docs/Web/API/Animation/currentTime\"><code>currentTime</code></a></li><li><a href=\"/en-US/docs/Web/API/Animation/effect\"><code>effect</code></a></li><li><a href=\"/en-US/docs/Web/API/Animation/finished\"><code>finished</code></a></li><li><a href=\"/en-US/docs/Web/API/Animation/id\"><code>id</code></a></li><li><a href=\"/en-US/docs/Web/API/Animation/pending\"><code>pending</code></a></li><li><a href=\"/en-US/docs/Web/API/Animation/playbackRate\"><code>playbackRate</code></a></li><li><a href=\"/en-US/docs/Web/API/Animation/playState\"><code>playState</code></a></li><li><a href=\"/en-US/docs/Web/API/Animation/ready\"><code>ready</code></a></li><li><em><code>replaceState</code></em></li><li><a href=\"/en-US/docs/Web/API/Animation/startTime\"><code>startTime</code></a></li><li><a href=\"/en-US/docs/Web/API/Animation/timeline\"><code>timeline</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Methods</summary><ol><li><a href=\"/en-US/docs/Web/API/Animation/cancel\"><code>cancel()</code></a></li><li><a href=\"/en-US/docs/Web/API/Animation/commitStyles\"><code>commitStyles()</code></a></li><li><a href=\"/en-US/docs/Web/API/Animation/finish\"><code>finish()</code></a></li><li><a href=\"/en-US/docs/Web/API/Animation/pause\"><code>pause()</code></a></li><li><a href=\"/en-US/docs/Web/API/Animation/persist\"><code>persist()</code></a></li><li><a href=\"/en-US/docs/Web/API/Animation/play\"><code>play()</code></a></li><li><a href=\"/en-US/docs/Web/API/Animation/reverse\"><code>reverse()</code></a></li><li><a href=\"/en-US/docs/Web/API/Animation/updatePlaybackRate\"><code>updatePlaybackRate()</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Events</summary><ol><li><a href=\"/en-US/docs/Web/API/Animation/cancel_event\"><code>cancel</code></a></li><li><a href=\"/en-US/docs/Web/API/Animation/finish_event\"><code>finish</code></a></li><li><a href=\"/en-US/docs/Web/API/Animation/remove_event\"><code>remove</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Inheritance:</summary><ol><li><a href=\"/en-US/docs/Web/API/EventTarget\"><code>EventTarget</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Related pages for Web Animations</summary><ol><li><a href=\"/en-US/docs/Web/API/AnimationEffect\"><code>AnimationEffect</code></a></li><li><a href=\"/en-US/docs/Web/API/AnimationEvent\"><code>AnimationEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/AnimationPlaybackEvent\"><code>AnimationPlaybackEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/AnimationTimeline\"><code>AnimationTimeline</code></a></li><li><a href=\"/en-US/docs/Web/API/Document/getAnimations\"><code>Document.getAnimations()</code></a></li><li><a href=\"/en-US/docs/Web/API/Document/timeline\"><code>Document.timeline</code></a></li><li><a href=\"/en-US/docs/Web/API/DocumentTimeline\"><code>DocumentTimeline</code></a></li><li><a href=\"/en-US/docs/Web/API/Element/animate\"><code>Element.animate()</code></a></li><li><a href=\"/en-US/docs/Web/API/KeyframeEffect\"><code>KeyframeEffect</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>The read-only <strong><code>Animation.replaceState</code></strong> property of the <a href=\"/en-US/docs/Web/API/Web_Animations_API\">Web Animations API</a> returns the <a href=\"https://drafts.csswg.org/web-animations-1/#animation-replace-state\" class=\"external\" rel=\" noopener\">replace state</a> of the animation. This will be <code>active</code> if the animation has been removed, or <code>persisted</code> if <a href=\"/en-US/docs/Web/API/Animation/persist\"><code>Animation.persist()</code></a> has been invoked on it.</p>"}},{"type":"prose","value":{"id":"value","title":"Value","isH3":false,"content":"<p>A string that represents the replace state of the animation. The value can be one of:</p>\n<dl>\n  <dt id=\"active\"><code>active</code></dt>\n  <dd>\n    <p>The initial value of the animation's replace state; when the animation has been removed by the browser's <a href=\"/en-US/docs/Web/API/Animation#automatically_removing_filling_animations\">Automatically removing filling animations</a> behavior.</p>\n  </dd>\n  <dt id=\"persisted\"><code>persisted</code></dt>\n  <dd>\n    <p>The animation has been explicitly persisted by invoking <a href=\"/en-US/docs/Web/API/Animation/persist\"><code>Animation.persist()</code></a> on it.</p>\n  </dd>\n  <dt id=\"removed\"><code>removed</code></dt>\n  <dd>\n    <p>The animation has been explicitly removed.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"examples","title":"Examples","isH3":false,"content":"<p>In our simple <a href=\"https://mdn.github.io/dom-examples/web-animations-api/replace-indefinite-animations.html\" class=\"external\" rel=\" noopener\">replace indefinite animations demo</a>, you can see the following code:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> divElem <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"div\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\ndocument<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"mousemove\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">evt</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> anim <span class=\"token operator\">=</span> divElem<span class=\"token punctuation\">.</span><span class=\"token function\">animate</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">transform</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">translate(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>evt<span class=\"token punctuation\">.</span>clientX<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px, </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>evt<span class=\"token punctuation\">.</span>clientY<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px)</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">duration</span><span class=\"token operator\">:</span> <span class=\"token number\">500</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">fill</span><span class=\"token operator\">:</span> <span class=\"token string\">\"forwards\"</span> <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  anim<span class=\"token punctuation\">.</span><span class=\"token function\">commitStyles</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">//anim.persist()</span>\n\n  anim<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onremove</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Animation removed\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>anim<span class=\"token punctuation\">.</span>replaceState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Here we have a <code>&lt;div&gt;</code> element, and an event listener that fires the event handler code whenever the mouse moves. The event handler sets up an animation that animates the <code>&lt;div&gt;</code> element to the position of the mouse pointer. This could result in a huge animations list, which could create a memory leak. For this reason, modern browsers automatically remove overriding forward filling animations.</p>\n<p>You can see the <code>replaceState</code> of the animation being logged at the end of the handler. This will be <code>active</code> for each animation by default, or <code>persisted</code> if the <code>persist()</code> call is uncommented.</p>"}},{"type":"specifications","value":{"title":"Specifications","id":"specifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://drafts.csswg.org/web-animations-1/#dom-animation-replacestate","title":"Web Animations"}],"query":"api.Animation.replaceState"}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"browser_compatibility","isH3":false,"query":"api.Animation.replaceState","dataURL":"/en-US/docs/Web/API/Animation/replaceState/bcd.json"}},{"type":"prose","value":{"id":"see_also","title":"See also","isH3":false,"content":"<ul>\n  <li><a href=\"/en-US/docs/Web/API/Web_Animations_API\">Web Animations API</a></li>\n  <li><a href=\"/en-US/docs/Web/API/Animation\"><code>Animation</code></a></li>\n</ul>"}}],"toc":[{"text":"Value","id":"value"},{"text":"Examples","id":"examples"},{"text":"Specifications","id":"specifications"},{"text":"Browser compatibility","id":"browser_compatibility"},{"text":"See also","id":"see_also"}],"summary":"The read-only Animation.replaceState property of the Web Animations API returns the replace state of the animation. This will be active if the animation has been removed, or persisted if Animation.persist() has been invoked on it.","popularity":0,"modified":"2022-09-14T13:55:15.000Z","source":{"folder":"en-us/web/api/animation/replacestate","github_url":"https://github.com/mdn/content/blob/style/old/files/en-us/web/api/animation/replacestate/index.md","last_commit_url":"https://github.com/mdn/content/commit/02e1bfcad5fd0de845fb033d331c3c027afa2d6e","filename":"index.md"},"parents":[{"uri":"/en-US/docs/Web","title":"Web technology for developers"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/Animation","title":"Animation"},{"uri":"/en-US/docs/Web/API/Animation/replaceState","title":"Animation.replaceState"}],"pageTitle":"Animation.replaceState - Web APIs | MDN","noIndexing":false}}