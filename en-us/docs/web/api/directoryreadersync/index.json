{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"DirectoryReaderSync","mdn_url":"/en-US/docs/Web/API/DirectoryReaderSync","locale":"en-US","native":"English (US)","sidebarHTML":"<ol><li><strong><a href=\"/en-US/docs/Web/API/File_and_Directory_Entries_API\">File and Directory Entries API</a></strong></li><li><strong><a href=\"/en-US/docs/Web/API/DirectoryReaderSync\"><code>DirectoryReaderSync</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Related pages for File and Directory Entries API</summary><ol><li><a href=\"/en-US/docs/Web/API/FileSystem\"><code>FileSystem</code></a></li><li><a href=\"/en-US/docs/Web/API/FileSystemDirectoryEntry\"><code>FileSystemDirectoryEntry</code></a></li><li><a href=\"/en-US/docs/Web/API/FileSystemDirectoryReader\"><code>FileSystemDirectoryReader</code></a></li><li><a href=\"/en-US/docs/Web/API/FileSystemEntry\"><code>FileSystemEntry</code></a></li><li><a href=\"/en-US/docs/Web/API/FileSystemFileEntry\"><code>FileSystemFileEntry</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<div class=\"notecard warning\" id=\"sect1\"><p><strong>Non-standard:</strong> This feature is non-standard and is not on a standards track. Do not use it on production sites facing the Web: it will not work for every user. There may also be large incompatibilities between implementations and the behavior may change in the future.</p></div><div class=\"notecard deprecated\" id=\"sect2\"><p><strong>Deprecated:</strong> This feature is no longer recommended. Though some browsers might still support it, it may have already been removed from the relevant web standards, may be in the process of being dropped, or may only be kept for compatibility purposes. Avoid using it, and update existing code if possible; see the <a href=\"#browser_compatibility\">compatibility table</a> at the bottom of this page to guide your decision. Be aware that this feature may cease to work at any time.</p></div>\n<p>The <code>DirectoryReaderSync</code> interface lets you read the entries in a directory.</p>\n<div class=\"notecard warning\" id=\"sect3\">\n  <p>\n    <strong>Warning:</strong> This interface is deprecated and is no more on the standard track.\n    <em>Do not use it anymore.</em> Use the <a href=\"/en-US/docs/Web/API/File_and_Directory_Entries_API\">File and Directory Entries API</a> instead.\n  </p>\n</div>"}},{"type":"prose","value":{"id":"basic_concepts","title":"Basic concepts","isH3":false,"content":"<p>Before you call the only method in this interface, <a href=\"#readentries\"><code>readEntries()</code></a>, create the <a href=\"/en-US/docs/Web/API/DirectoryEntrySync\"><code>DirectoryEntrySync</code></a> object. But DirectoryEntrySync (as well as <a href=\"/en-US/docs/Web/API/FileEntrySync\"><code>FileEntrySync</code></a>) is not a data type that you can pass between a calling app and Web Worker thread. It's not a big deal, because you don't really need to have the main app and the worker thread see the same JavaScript object; you just need them to access the same files. You can do that by passing a list of <code>filesystem:</code> URLs—which are just strings—instead of a list of entries. You can also use the <code>filesystem:</code> URL to look up the entry with <code>resolveLocalFileSystemURL()</code>. That gets you back to a DirectoryEntrySync (as well as FileEntrySync) object.</p>"}},{"type":"prose","value":{"id":"example","title":"Example","isH3":true,"content":"<p>In the following code snippet from <a href=\"https://web.dev/filesystem-sync/\" class=\"external\" rel=\" noopener\">HTML5Rocks (web.dev)</a>, we create Web Workers and pass data from it to the main app.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// Taking care of the browser-specific prefixes.</span>\nwindow<span class=\"token punctuation\">.</span>resolveLocalFileSystemURL <span class=\"token operator\">=</span>\n  window<span class=\"token punctuation\">.</span>resolveLocalFileSystemURL <span class=\"token operator\">||</span> window<span class=\"token punctuation\">.</span>webkitResolveLocalFileSystemURL<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Create web workers</span>\n<span class=\"token keyword\">const</span> worker <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Worker</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"worker.js\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nworker<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onmessage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> urls <span class=\"token operator\">=</span> e<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>entries<span class=\"token punctuation\">;</span>\n  urls<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">url</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">resolveLocalFileSystemURL</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">fileEntry</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Print out file's name.</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>fileEntry<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nworker<span class=\"token punctuation\">.</span><span class=\"token function\">postMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">cmd</span><span class=\"token operator\">:</span> <span class=\"token string\">\"list\"</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>The following is <code>worker.js</code> code that gets the contents of the directory.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// worker.js</span>\n\n<span class=\"token comment\">// Taking care of the browser-specific prefixes.</span>\nself<span class=\"token punctuation\">.</span>requestFileSystemSync <span class=\"token operator\">=</span>\n  self<span class=\"token punctuation\">.</span>webkitRequestFileSystemSync <span class=\"token operator\">||</span> self<span class=\"token punctuation\">.</span>requestFileSystemSync<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Global for holding the list of entry file system URLs.</span>\n<span class=\"token keyword\">const</span> paths <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">getAllEntries</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">dirReader</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> entries <span class=\"token operator\">=</span> dirReader<span class=\"token punctuation\">.</span><span class=\"token function\">readEntries</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> entry <span class=\"token keyword\">of</span> entries<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Stash this entry's filesystem in URL</span>\n    paths<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>entry<span class=\"token punctuation\">.</span><span class=\"token function\">toURL</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// If this is a directory, traverse.</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>entry<span class=\"token punctuation\">.</span>isDirectory<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">getAllEntries</span><span class=\"token punctuation\">(</span>entry<span class=\"token punctuation\">.</span><span class=\"token function\">createReader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Forward the error to main app.</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">onError</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">postMessage</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">ERROR: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>e<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nself<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onmessage</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> cmd <span class=\"token operator\">=</span> e<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>cmd<span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Ignore everything else except our 'list' command.</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>cmd <span class=\"token operator\">||</span> cmd <span class=\"token operator\">!==</span> <span class=\"token string\">\"list\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> fs <span class=\"token operator\">=</span> <span class=\"token function\">requestFileSystemSync</span><span class=\"token punctuation\">(</span><span class=\"token constant\">TEMPORARY</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1024</span> <span class=\"token operator\">*</span> <span class=\"token number\">1024</span> <span class=\"token comment\">/*1MB*/</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">getAllEntries</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span>root<span class=\"token punctuation\">.</span><span class=\"token function\">createReader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    self<span class=\"token punctuation\">.</span><span class=\"token function\">postMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">entries</span><span class=\"token operator\">:</span> paths<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">onError</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"method","title":"Method","isH3":false,"content":""}},{"type":"prose","value":{"id":"readentries","title":"readEntries()","isH3":true,"content":"<p>Returns a list of entries from a specific directory. Call this method until an empty array is returned.</p>\n<h4 id=\"syntax\">Syntax</h4>\n<pre class=\"notranslate\">readEntries()\n</pre>\n<h5 id=\"return_value\">Return value</h5>\n<p>Array containing <a href=\"/en-US/docs/Web/API/FileEntrySync\"><code>FileEntrySync</code></a> and <a href=\"/en-US/docs/Web/API/DirectoryEntrySync\"><code>DirectoryEntrySync</code></a></p>\n<h5 id=\"parameter\">Parameter</h5>\n<p>None</p>\n<h5 id=\"exceptions\">Exceptions</h5>\n<p>This method can raise a <a href=\"/en-US/docs/Web/API/DOMException\">DOMException</a> with the following codes:</p>\n<table>\n  <thead>\n    <tr>\n      <th>Exception</th>\n      <th>Description</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td><code>NOT_FOUND_ERR</code></td>\n      <td>The directory does not exist.</td>\n    </tr>\n    <tr>\n      <td><code>INVALID_STATE_ERR</code></td>\n      <td>The directory has been modified since the first call to readEntries was processed.</td>\n    </tr>\n    <tr>\n      <td><code>SECURITY_ERR</code></td>\n      <td>The browser determined that it was not safe to look up the metadata.</td>\n    </tr>\n  </tbody>\n</table>"}},{"type":"prose","value":{"id":"specifications","title":"Specifications","isH3":false,"content":"<p>This feature is not part of any specification anymore. It is no longer on track to become a standard.</p>"}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"browser_compatibility","isH3":false,"query":"api.DirectoryReaderSync","dataURL":"/en-US/docs/Web/API/DirectoryReaderSync/bcd.json"}},{"type":"prose","value":{"id":"see_also","title":"See also","isH3":false,"content":"<ul>\n  <li><a href=\"/en-US/docs/Web/API/File_and_Directory_Entries_API\">File and Directory Entries API</a></li>\n  <li><a href=\"/en-US/docs/Web/API/File_and_Directory_Entries_API/Introduction\">Introduction to the File and Directory Entries API</a></li>\n</ul>"}}],"toc":[{"text":"Basic concepts","id":"basic_concepts"},{"text":"Method","id":"method"},{"text":"Specifications","id":"specifications"},{"text":"Browser compatibility","id":"browser_compatibility"},{"text":"See also","id":"see_also"}],"summary":"The DirectoryReaderSync interface lets you read the entries in a directory.","popularity":0.0002,"modified":"2022-09-09T05:10:34.000Z","source":{"folder":"en-us/web/api/directoryreadersync","github_url":"https://github.com/mdn/content/blob/style/old/files/en-us/web/api/directoryreadersync/index.md","last_commit_url":"https://github.com/mdn/content/commit/1511e914c6b1ce6f88056bfefd48a6aa585cebce","filename":"index.md"},"parents":[{"uri":"/en-US/docs/Web","title":"Web technology for developers"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/DirectoryReaderSync","title":"DirectoryReaderSync"}],"pageTitle":"DirectoryReaderSync - Web APIs | MDN","noIndexing":false}}