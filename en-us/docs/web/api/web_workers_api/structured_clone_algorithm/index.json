{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"The structured clone algorithm","mdn_url":"/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm","locale":"en-US","native":"English (US)","sidebarHTML":"<ol><li><strong><a href=\"/en-US/docs/Web/API/Web_Workers_API\">Web Workers API</a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Guides</summary><ol><li><a href=\"/en-US/docs/Web/API/Web_Workers_API/Using_web_workers\">Using Web Workers</a></li><li><a href=\"/en-US/docs/Web/API/Web_Workers_API/Functions_and_classes_available_to_workers\">Functions and classes available to Web Workers</a></li><li><a href=\"/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm\">The structured clone algorithm</a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Interfaces</summary><ol><li><a href=\"/en-US/docs/Web/API/DedicatedWorkerGlobalScope\"><code>DedicatedWorkerGlobalScope</code></a></li><li><a href=\"/en-US/docs/Web/API/ServiceWorker\"><code>ServiceWorker</code></a></li><li><a href=\"/en-US/docs/Web/API/SharedWorker\"><code>SharedWorker</code></a></li><li><a href=\"/en-US/docs/Web/API/SharedWorkerGlobalScope\"><code>SharedWorkerGlobalScope</code></a></li><li><a href=\"/en-US/docs/Web/API/Worker\"><code>Worker</code></a></li><li><a href=\"/en-US/docs/Web/API/WorkerGlobalScope\"><code>WorkerGlobalScope</code></a></li><li><a href=\"/en-US/docs/Web/API/WorkerLocation\"><code>WorkerLocation</code></a></li><li><a href=\"/en-US/docs/Web/API/WorkerNavigator\"><code>WorkerNavigator</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>\n  The <strong>structured clone algorithm</strong> copies complex JavaScript objects.\n  It is used internally when invoking <a href=\"/en-US/docs/Web/API/structuredClone\"><code>structuredClone()</code></a>, to transfer data between <a href=\"/en-US/docs/Web/API/Worker\">Workers</a> via <a href=\"/en-US/docs/Web/API/Worker/postMessage\" title=\"postMessage()\"><code>postMessage()</code></a>, storing objects with <a href=\"/en-US/docs/Glossary/IndexedDB\">IndexedDB</a>, or copying objects for <a href=\"#see_also\">other APIs</a>.\n</p>\n<p>It clones by recursing through the input object while maintaining a map of previously visited references, to avoid infinitely traversing cycles.</p>"}},{"type":"prose","value":{"id":"things_that_dont_work_with_structured_clone","title":"Things that don't work with structured clone","isH3":false,"content":"<ul>\n  <li><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function\"><code>Function</code></a> objects cannot be duplicated by the structured clone algorithm; attempting to throws a <code>DataCloneError</code> exception.</li>\n  <li>Cloning DOM nodes likewise throws a <code>DataCloneError</code> exception.</li>\n  <li>Certain object properties are not preserved:\n    <ul>\n      <li>The <code>lastIndex</code> property of <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp\"><code>RegExp</code></a> objects is not preserved.</li>\n      <li>\n        Property descriptors, setters, getters, and similar metadata-like features are not duplicated.\n        For example, if an object is marked readonly with a <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptor\">property descriptor</a>, it will be read/write in the duplicate, since that's the default.\n      </li>\n      <li>The prototype chain is not walked or duplicated.</li>\n    </ul>\n  </li>\n</ul>"}},{"type":"prose","value":{"id":"supported_types","title":"Supported types","isH3":false,"content":"<table class=\"no-markdown\">\n  <thead>\n    <tr>\n      <th scope=\"col\">Object type</th>\n      <th scope=\"col\">Notes</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/JavaScript/Data_structures#primitive_values\">All primitive types</a></td>\n      <td>However, not symbols.</td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean\"><code>Boolean</code></a> objects</td>\n      <td></td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/String\"><code>String</code></a> objects</td>\n      <td></td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date\"><code>Date</code></a></td>\n      <td></td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp\"><code>RegExp</code></a></td>\n      <td><code>lastIndex</code> is not preserved.</td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/API/Blob\"><code>Blob</code></a></td>\n      <td></td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/API/File\"><code>File</code></a></td>\n      <td></td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/API/FileList\"><code>FileList</code></a></td>\n      <td></td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer\"><code>ArrayBuffer</code></a></td>\n      <td></td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray\"><code>TypedArray</code></a></td>\n      <td></td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView\"><code>DataView</code></a></td>\n      <td></td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/API/ImageBitmap\"><code>ImageBitmap</code></a></td>\n      <td></td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/API/ImageData\"><code>ImageData</code></a></td>\n      <td></td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/API/DOMPoint\"><code>DOMPoint</code></a></td>\n      <td></td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/API/DOMPointReadOnly\"><code>DOMPointReadOnly</code></a></td>\n      <td></td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/API/DOMRect\"><code>DOMRect</code></a></td>\n      <td></td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/API/DOMRectReadOnly\"><code>DOMRectReadOnly</code></a></td>\n      <td></td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/API/DOMQuad\"><code>DOMQuad</code></a></td>\n      <td></td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/API/DOMMatrix\"><code>DOMMatrix</code></a></td>\n      <td></td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/API/DOMMatrixReadOnly\"><code>DOMMatrixReadOnly</code></a></td>\n      <td></td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array\"><code>Array</code></a></td>\n      <td></td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object\"><code>Object</code></a></td>\n      <td><strong>Only</strong> plain objects (e.g. from object literals)</td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map\"><code>Map</code></a></td>\n      <td></td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set\"><code>Set</code></a></td>\n      <td></td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/API/DOMException\"><code>DOMException</code></a></td>\n      <td>\n        Browsers must serialize the properties <a href=\"/en-US/docs/Web/API/DOMException/name\" title=\"name\"><code>name</code></a> and <a href=\"/en-US/docs/Web/API/DOMException/message\" title=\"message\"><code>message</code></a>.\n        Other attributes may also be serialized/cloned.\n      </td>\n    </tr>\n    <tr>\n      <td><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error\">Native <code>Error</code> types</a></td>\n      <td>\n        <p>The error name must be one of: <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error\"><code>Error</code></a>, <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/EvalError\"><code>EvalError</code></a>, <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/RangeError\"><code>RangeError</code></a>, <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/ReferenceError\"><code>ReferenceError</code></a>, <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/SyntaxError\"><code>SyntaxError</code></a>, <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError\"><code>TypeError</code></a>, <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/URIError\"><code>URIError</code></a> (or will be set to \"Error\").</p>\n        <p>Browsers must serialize the properties <code>name</code> and <code>message</code>, and are expected to serialize other \"interesting\" properties of the errors such as <code>stack</code>, <code>cause</code>, etc.</p>\n        <p><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/AggregateError\"><code>AggregateError</code></a> support is expected to be added to the specification in <a href=\"https://github.com/whatwg/html/pull/5749\" class=\"external\" rel=\" noopener\">whatwg/html#5749</a> (and is already supported in some browsers).</p>\n      </td>\n    </tr>\n  </tbody>\n</table>"}},{"type":"prose","value":{"id":"see_also","title":"See also","isH3":false,"content":"<ul>\n  <li><a href=\"https://html.spec.whatwg.org/multipage/infrastructure.html#safe-passing-of-structured-data\" class=\"external\" rel=\" noopener\">HTML Specification: Safe passing of structured data</a></li>\n  <li><a href=\"/en-US/docs/Glossary/Transferable_objects\">Transferable objects</a></li>\n  <li><a href=\"/en-US/docs/Web/API/structuredClone\"><code>structuredClone()</code></a></li>\n  <li><a href=\"/en-US/docs/Web/API/Window/history\"><code>window.history</code></a></li>\n  <li><a href=\"/en-US/docs/Web/API/Window/postMessage\"><code>window.postMessage()</code></a></li>\n  <li><a href=\"/en-US/docs/Web/API/Web_Workers_API\">Web Workers</a></li>\n  <li><a href=\"/en-US/docs/Web/API/IndexedDB_API\">IndexedDB</a></li>\n</ul>"}}],"toc":[{"text":"Things that don't work with structured clone","id":"things_that_dont_work_with_structured_clone"},{"text":"Supported types","id":"supported_types"},{"text":"See also","id":"see_also"}],"summary":"The structured clone algorithm copies complex JavaScript objects.\n  It is used internally when invoking structuredClone(), to transfer data between Workers via postMessage(), storing objects with IndexedDB, or copying objects for other APIs.","popularity":0.0058,"modified":"2022-09-28T11:12:51.000Z","other_translations":[{"title":"L’algorithme de clonage structuré","locale":"fr","native":"Français"},{"title":"構造化複製アルゴリズム","locale":"ja","native":"日本語"},{"title":"The structured clone algorithm","locale":"ko","native":"한국어"},{"title":"Алгоритм структурированного клонирования","locale":"ru","native":"Русский"},{"title":"结构化克隆算法","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"en-us/web/api/web_workers_api/structured_clone_algorithm","github_url":"https://github.com/mdn/content/blob/style/old/files/en-us/web/api/web_workers_api/structured_clone_algorithm/index.md","last_commit_url":"https://github.com/mdn/content/commit/35fdf6bab17763f62167c624156e965b319856fd","filename":"index.md"},"parents":[{"uri":"/en-US/docs/Web","title":"Web technology for developers"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/Web_Workers_API","title":"Web Workers API"},{"uri":"/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm","title":"The structured clone algorithm"}],"pageTitle":"The structured clone algorithm - Web APIs | MDN","noIndexing":false}}