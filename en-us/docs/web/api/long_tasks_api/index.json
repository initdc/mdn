{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"Long Tasks API","mdn_url":"/en-US/docs/Web/API/Long_Tasks_API","locale":"en-US","native":"English (US)","sidebarHTML":"","body":[{"type":"prose","value":{"id":"motivation","title":"Motivation","isH3":false,"content":"<p>\n  The experimental Long Tasks API gives us visibility into tasks that take 50 milliseconds or more.\n  The 50 ms threshold comes from the <a href=\"https://web.dev/rail/\" class=\"external\" rel=\" noopener\">RAIL Model</a>, in particular the <a href=\"https://web.dev/rail/#response:-process-events-in-under-50ms\" class=\"external\" rel=\" noopener\">\"Response: process events in under 50 ms\"</a> section.\n</p>\n<p>Tasks that block the main thread for 50 ms or more cause, among other issues:</p>\n<ul>\n  <li>Delayed \"<a href=\"/en-US/docs/Glossary/Time_to_interactive\">Time to interactive</a>\".</li>\n  <li>High/variable input latency.</li>\n  <li>High/variable event handling latency.</li>\n  <li>Janky animations and scrolling.</li>\n</ul>"}},{"type":"prose","value":{"id":"concepts","title":"Concepts","isH3":false,"content":"<p>Some key terms or ideas that are utilized by the Long Tasks API.</p>"}},{"type":"prose","value":{"id":"long_task","title":"Long task","isH3":true,"content":"<p>Any uninterrupted period where the main UI thread is busy for 50 ms or longer. Common examples include:</p>\n<ul>\n  <li>Long running event handlers.</li>\n  <li>Expensive reflows and other re-renders.</li>\n  <li>Work the browser does between different turns of the event loop that exceeds 50 ms.</li>\n</ul>"}},{"type":"prose","value":{"id":"culprit_browsing_context_container","title":"Culprit browsing context container","isH3":true,"content":"<p>The \"culprit browsing context container\", or \"the container\" for short, is the top level page, iframe, embed or object that the task occurred within.</p>"}},{"type":"prose","value":{"id":"attributions","title":"Attributions","isH3":true,"content":"<p>A list of containers that the task occurred within. For tasks that don't occur within the top level page, the <code>containerId</code>, <code>containerName</code> and <code>containerSrc</code> fields may provide information as to the source of the task.</p>"}},{"type":"prose","value":{"id":"usage","title":"Usage","isH3":false,"content":"<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> observer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PerformanceObserver</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">list</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> perfEntries <span class=\"token operator\">=</span> list<span class=\"token punctuation\">.</span><span class=\"token function\">getEntries</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    perfEntries<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">entry</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Process long task notifications:</span>\n      <span class=\"token comment\">// report back for analytics and monitoring</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Register observer for long task notifications</span>\nobserver<span class=\"token punctuation\">.</span><span class=\"token function\">observe</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token literal-property property\">entryTypes</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"longtask\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Long script execution after this will result in queueing</span>\n<span class=\"token comment\">// and receiving \"longtask\" entries in the observer.</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"interfaces","title":"Interfaces","isH3":false,"content":"<dl>\n  <dt id=\"performancelongtasktiming\"><a href=\"/en-US/docs/Web/API/PerformanceLongTaskTiming\"><code>PerformanceLongTaskTiming</code></a></dt>\n  <dd>\n    <p>Reports instances of long tasks.</p>\n  </dd>\n  <dt id=\"taskattributiontiming\"><a href=\"/en-US/docs/Web/API/TaskAttributionTiming\"><code>TaskAttributionTiming</code></a></dt>\n  <dd>\n    <p>Returns information about the work involved in a long task and its associate frame context.</p>\n  </dd>\n</dl>"}},{"type":"specifications","value":{"title":"Specifications","id":"specifications","isH3":false,"query":"api.PerformanceLongTaskTiming,api.TaskAttributionTiming","specifications":[]}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"browser_compatibility","isH3":false,"data":null,"query":"api.PerformanceLongTaskTiming,api.TaskAttributionTiming","browsers":null}},{"type":"prose","value":{"id":"see_also","title":"See also","isH3":false,"content":"<ul>\n  <li><a href=\"https://github.com/w3c/longtasks\" class=\"external\" rel=\" noopener\">GitHub repository</a> contains documentation and some code samples.</li>\n  <li><a href=\"https://calendar.perfplanet.com/2017/tracking-cpu-with-long-tasks-api/\" class=\"external\" rel=\" noopener\">PerfPlanet article</a> on Long Tasks API from 20th December 2017.</li>\n</ul>"}}],"toc":[{"text":"Motivation","id":"motivation"},{"text":"Concepts","id":"concepts"},{"text":"Usage","id":"usage"},{"text":"Interfaces","id":"interfaces"},{"text":"Specifications","id":"specifications"},{"text":"Browser compatibility","id":"browser_compatibility"},{"text":"See also","id":"see_also"}],"summary":"The experimental Long Tasks API gives us visibility into tasks that take 50 milliseconds or more.\n  The 50 ms threshold comes from the RAIL Model, in particular the \"Response: process events in under 50 ms\" section.","popularity":0.0009,"modified":"2022-09-09T05:14:42.000Z","other_translations":[{"title":"Long Tasks API","locale":"ja","native":"日本語"},{"title":"Long Tasks API","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"en-us/web/api/long_tasks_api","github_url":"https://github.com/mdn/content/blob/style/old/files/en-us/web/api/long_tasks_api/index.md","last_commit_url":"https://github.com/mdn/content/commit/277e5969c63b97cfb55ab4a0e612e8040810f49b","filename":"index.md"},"parents":[{"uri":"/en-US/docs/Web","title":"Web technology for developers"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/Long_Tasks_API","title":"Long Tasks API"}],"pageTitle":"Long Tasks API - Web APIs | MDN","noIndexing":false}}