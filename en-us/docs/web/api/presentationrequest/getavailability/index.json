{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"PresentationRequest.getAvailability()","mdn_url":"/en-US/docs/Web/API/PresentationRequest/getAvailability","locale":"en-US","native":"English (US)","sidebarHTML":"<ol><li><strong><a href=\"/en-US/docs/Web/API/Presentation_API\">Presentation API</a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Interfaces</summary><ol><li><a href=\"/en-US/docs/Web/API/Presentation\"><code>Presentation</code></a></li><li><a href=\"/en-US/docs/Web/API/PresentationAvailability\"><code>PresentationAvailability</code></a></li><li><a href=\"/en-US/docs/Web/API/PresentationDeviceInfoManager\"><code>PresentationDeviceInfoManager</code></a></li><li><a href=\"/en-US/docs/Web/API/PresentationRequest\"><code>PresentationRequest</code></a></li><li><a href=\"/en-US/docs/Web/API/PresentationSession\"><code>PresentationSession</code></a></li><li><a href=\"/en-US/docs/Web/API/PresentationSessionConnectEvent\"><code>PresentationSessionConnectEvent</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Properties</summary><ol><li><a href=\"/en-US/docs/Web/API/Navigator/presentation\"><code>Navigator.presentation</code></a></li><li><a href=\"/en-US/docs/Web/API/Navigator/mozPresentationDeviceInfo\"><code>Navigator.mozPresentationDeviceInfo</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>When the <code>getAvailability()</code> method is called, the user agent <em>MUST</em> run the following steps:</p>\n<dl>\n  <dt id=\"input\">Input</dt>\n  <dd>\n    <p><em>presentationUrls</em>, a list of <a href=\"https://www.w3.org/TR/presentation-api/#dfn-presentation-request-urls\" class=\"external\" rel=\" noopener\">presentation request URLs</a></p>\n  </dd>\n  <dt id=\"output\">Output</dt>\n  <dd>\n    <p><em>P</em>, a <a href=\"https://www.w3.org/TR/presentation-api/#dfn-promise\" class=\"external\" rel=\" noopener\">Promise</a></p>\n  </dd>\n</dl>\n<ol>\n  <li>If one of the following conditions is true:\n    <ul>\n      <li>The result of running the <a href=\"https://www.w3.org/TR/presentation-api/#dfn-prohibits-mixed-security-contexts-algorithm\" class=\"external\" rel=\" noopener\">prohibits mixed security contexts algorithm</a> on the document's <a href=\"https://www.w3.org/TR/presentation-api/#dfn-settings-object\" class=\"external\" rel=\" noopener\">settings object</a> is <code>\"Prohibits Mixed Security Contexts\"</code> and <em>presentationUrl</em> is an <a href=\"https://www.w3.org/TR/presentation-api/#dfn-a-priori-unauthenticated-url\" class=\"external\" rel=\" noopener\">a priori unauthenticated URL</a>.</li>\n      <li>The document object's <a href=\"https://www.w3.org/TR/presentation-api/#dfn-active-sandboxing-flag-set\" class=\"external\" rel=\" noopener\">active sandboxing flag set</a> has the <a href=\"https://www.w3.org/TR/presentation-api/#sandboxed-presentation-browsing-context-flag\" class=\"external\" rel=\" noopener\">sandboxed presentation browsing context flag</a> set.</li>\n    </ul>Run the following substeps:\n    <ol>\n      <li>Return a <a href=\"https://www.w3.org/TR/presentation-api/#dfn-promise\" class=\"external\" rel=\" noopener\">Promise</a> rejected with a <code>SecurityError</code> <a href=\"/en-US/docs/Web/API/DOMException\"><code>DOMException</code></a>.</li>\n      <li>Abort these steps.</li>\n    </ol>\n  </li>\n  <li>Let <em>P</em> be a new <a href=\"https://www.w3.org/TR/presentation-api/#dfn-promise\" class=\"external\" rel=\" noopener\">Promise</a>.</li>\n  <li>Return <em>P</em>, but continue running these steps <a href=\"https://www.w3.org/TR/presentation-api/#dfn-in-parallel\" class=\"external\" rel=\" noopener\">in parallel</a>.</li>\n  <li>If the user agent is unable to <a href=\"https://www.w3.org/TR/presentation-api/#dfn-monitor-the-list-of-available-presentation-displays\" class=\"external\" rel=\" noopener\">monitor the list of available presentation displays</a> for the entire duration of the <a href=\"https://www.w3.org/TR/presentation-api/#dfn-controlling-browsing-context\" class=\"external\" rel=\" noopener\">controlling browsing context</a> (e.g., because the user has disabled this feature), then:\n    <ol>\n      <li><a href=\"https://www.w3.org/TR/presentation-api/#dfn-resolving-a-promise\" class=\"external\" rel=\" noopener\">Resolve</a> <em>P</em> with a new <code>PresentationAvailability</code> object with its <code>value</code> property set to <code>false</code>.</li>\n      <li>Abort all the remaining steps.</li>\n    </ol>\n  </li>\n  <li>If the user agent is unable to continuously <a href=\"https://www.w3.org/TR/presentation-api/#dfn-monitor-the-list-of-available-presentation-displays\" class=\"external\" rel=\" noopener\">monitor the list of available presentation displays</a> but can find presentation displays in order to start a connection, then:\n    <ol>\n      <li><a href=\"https://www.w3.org/TR/presentation-api/#dfn-rejecting-a-promise\" class=\"external\" rel=\" noopener\">Reject</a> <em>P</em> with a <code>NotSupportedError</code> <a href=\"/en-US/docs/Web/API/DOMException\"><code>DOMException</code></a>.</li>\n      <li>Abort all the remaining steps.</li>\n    </ol>\n  </li>\n  <li>If there exists a tuple (<em>A</em>, <em>presentationUrls</em>) in the <a href=\"https://www.w3.org/TR/presentation-api/#dfn-set-of-availability-objects\" class=\"external\" rel=\" noopener\">set of availability objects</a>, then:\n    <ol>\n      <li><a href=\"https://www.w3.org/TR/presentation-api/#dfn-resolving-a-promise\" class=\"external\" rel=\" noopener\">Resolve</a> <em>P</em> with <em>A</em>.</li>\n      <li>Abort all the remaining steps.</li>\n    </ol>\n  </li>\n  <li>Let <em>A</em> be a new <code>PresentationAvailability</code> object with its <code>value</code> property set as follows:\n    <ol>\n      <li><code>false</code> if the <a href=\"https://www.w3.org/TR/presentation-api/#dfn-list-of-available-presentation-displays\" class=\"external\" rel=\" noopener\">list of available presentation displays</a> is empty.</li>\n      <li><code>true</code> if there is at least one <a href=\"https://www.w3.org/TR/presentation-api/#dfn-compatible-presentation-display\" class=\"external\" rel=\" noopener\">compatible presentation display</a> for some member of <em>presentationUrls</em>. Meaning there is an entry <em>(presentationUrl, display)</em> in the <a href=\"https://www.w3.org/TR/presentation-api/#dfn-list-of-available-presentation-displays\" class=\"external\" rel=\" noopener\">list of available presentation displays</a> for some <em>presentationUrl</em> in <em>presentationUrls</em>.</li>\n      <li><code>false</code> otherwise.</li>\n    </ol>\n  </li>\n  <li>Create a tuple (<em>A</em>, <em>presentationUrls</em>) and add it to the <a href=\"https://www.w3.org/TR/presentation-api/#dfn-set-of-availability-objects\" class=\"external\" rel=\" noopener\">set of availability objects</a>.</li>\n  <li>Run the algorithm to <a href=\"https://www.w3.org/TR/presentation-api/#dfn-monitor-the-list-of-available-presentation-displays\" class=\"external\" rel=\" noopener\">monitor the list of available presentation displays</a>.</li>\n  <li><a href=\"https://www.w3.org/TR/presentation-api/#dfn-resolving-a-promise\" class=\"external\" rel=\" noopener\">Resolve</a> <em>P</em> with <em>A</em>.</li>\n</ol>"}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"browser_compatibility","isH3":false,"query":"api.PresentationRequest.getAvailability","dataURL":"/en-US/docs/Web/API/PresentationRequest/getAvailability/bcd.json"}}],"toc":[{"text":"Browser compatibility","id":"browser_compatibility"}],"summary":"When the getAvailability() method is called, the user agent MUST run the following steps:","popularity":0,"modified":"2022-09-11T19:36:48.000Z","source":{"folder":"en-us/web/api/presentationrequest/getavailability","github_url":"https://github.com/mdn/content/blob/style/old/files/en-us/web/api/presentationrequest/getavailability/index.md","last_commit_url":"https://github.com/mdn/content/commit/20a58f1383da377a634b48902bff9b4fde9227c3","filename":"index.md"},"parents":[{"uri":"/en-US/docs/Web","title":"Web technology for developers"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/PresentationRequest","title":"PresentationRequest"},{"uri":"/en-US/docs/Web/API/PresentationRequest/getAvailability","title":"PresentationRequest.getAvailability()"}],"pageTitle":"PresentationRequest.getAvailability() - Web APIs | MDN","noIndexing":false}}