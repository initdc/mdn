{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"XRView.transform","mdn_url":"/en-US/docs/Web/API/XRView/transform","locale":"en-US","native":"English (US)","sidebarHTML":"<ol><li><strong><a href=\"/en-US/docs/Web/API/WebXR_Device_API\">WebXR Device API</a></strong></li><li><strong><a href=\"/en-US/docs/Web/API/XRView\"><code>XRView</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Properties</summary><ol><li><svg class=\"icon icon-experimental\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-experimental\"></use>\n</svg><a href=\"/en-US/docs/Web/API/XRView/eye\"><code>eye</code></a></li><li><svg class=\"icon icon-experimental\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-experimental\"></use>\n</svg><a href=\"/en-US/docs/Web/API/XRView/isFirstPersonObserver\"><code>isFirstPersonObserver</code></a></li><li><svg class=\"icon icon-experimental\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-experimental\"></use>\n</svg><a href=\"/en-US/docs/Web/API/XRView/projectionMatrix\"><code>projectionMatrix</code></a></li><li><svg class=\"icon icon-experimental\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-experimental\"></use>\n</svg><a href=\"/en-US/docs/Web/API/XRView/recommendedViewportScale\"><code>recommendedViewportScale</code></a></li><li><svg class=\"icon icon-experimental\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-experimental\"></use>\n</svg><em><code>transform</code></em></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Methods</summary><ol><li><svg class=\"icon icon-experimental\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-experimental\"></use>\n</svg><a href=\"/en-US/docs/Web/API/XRView/requestViewportScale\"><code>requestViewportScale()</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Related pages for WebXR Device API</summary><ol><li><a href=\"/en-US/docs/Web/API/Navigator/xr\"><code>Navigator.xr</code></a></li><li><a href=\"/en-US/docs/Web/API/WebGLRenderingContext/makeXRCompatible\"><code>WebGLRenderingContext.makeXRCompatible()</code></a></li><li><a href=\"/en-US/docs/Web/API/XRAnchor\"><code>XRAnchor</code></a></li><li><a href=\"/en-US/docs/Web/API/XRBoundedReferenceSpace\"><code>XRBoundedReferenceSpace</code></a></li><li><a href=\"/en-US/docs/Web/API/XRCPUDepthInformation\"><code>XRCPUDepthInformation</code></a></li><li><a href=\"/en-US/docs/Web/API/XRDepthInformation\"><code>XRDepthInformation</code></a></li><li><a href=\"/en-US/docs/Web/API/XRFrame\"><code>XRFrame</code></a></li><li><a href=\"/en-US/docs/Web/API/XRInputSource\"><code>XRInputSource</code></a></li><li><a href=\"/en-US/docs/Web/API/XRInputSourceArray\"><code>XRInputSourceArray</code></a></li><li><a href=\"/en-US/docs/Web/API/XRInputSourceEvent\"><code>XRInputSourceEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/XRInputSourcesChangeEvent\"><code>XRInputSourcesChangeEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/XRPose\"><code>XRPose</code></a></li><li><a href=\"/en-US/docs/Web/API/XRReferenceSpace\"><code>XRReferenceSpace</code></a></li><li><a href=\"/en-US/docs/Web/API/XRReferenceSpaceEvent\"><code>XRReferenceSpaceEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/XRRenderState\"><code>XRRenderState</code></a></li><li><a href=\"/en-US/docs/Web/API/XRRigidTransform\"><code>XRRigidTransform</code></a></li><li><a href=\"/en-US/docs/Web/API/XRSession\"><code>XRSession</code></a></li><li><a href=\"/en-US/docs/Web/API/XRSessionEvent\"><code>XRSessionEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/XRSpace\"><code>XRSpace</code></a></li><li><a href=\"/en-US/docs/Web/API/XRSystem\"><code>XRSystem</code></a></li><li><a href=\"/en-US/docs/Web/API/XRViewerPose\"><code>XRViewerPose</code></a></li><li><a href=\"/en-US/docs/Web/API/XRViewport\"><code>XRViewport</code></a></li><li><a href=\"/en-US/docs/Web/API/XRWebGLBinding\"><code>XRWebGLBinding</code></a></li><li><a href=\"/en-US/docs/Web/API/XRWebGLDepthInformation\"><code>XRWebGLDepthInformation</code></a></li><li><a href=\"/en-US/docs/Web/API/XRWebGLLayer\"><code>XRWebGLLayer</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<div class=\"notecard experimental\" id=\"sect1\"><p><strong>Experimental:</strong> <strong>This is an <a href=\"/en-US/docs/MDN/Writing_guidelines/Experimental_deprecated_obsolete#experimental\">experimental technology</a></strong><br>Check the <a href=\"#browser_compatibility\">Browser compatibility table</a> carefully before using this in production.</p></div>\n<p>\n  The read-only <strong><code>transform</code></strong> property of the\n  <a href=\"/en-US/docs/Web/API/XRView\"><code>XRView</code></a> interface is an <a href=\"/en-US/docs/Web/API/XRRigidTransform\"><code>XRRigidTransform</code></a> object which\n  provides the position and orientation of the viewpoint relative to the\n  <a href=\"/en-US/docs/Web/API/XRReferenceSpace\"><code>XRReferenceSpace</code></a> specified when the\n  <a href=\"/en-US/docs/Web/API/XRFrame/getViewerPose\"><code>XRFrame.getViewerPose()</code></a> method was called to obtain the view object.\n</p>\n<p>\n  With the <code>transform</code>, you can then position the view as a camera within the\n  3D scene. If you instead need the more traditional view matrix, you can get using\n  <code>view.transform.inverse.matrix</code>; this gets the underlying\n  <a href=\"/en-US/docs/Web/API/XRRigidTransform/matrix\" title=\"matrix\"><code>matrix</code></a> of the transform's\n  <a href=\"/en-US/docs/Web/API/XRRigidTransform/inverse\" title=\"inverse\"><code>inverse</code></a>.\n</p>"}},{"type":"prose","value":{"id":"value","title":"Value","isH3":false,"content":"<p>\n  A <a href=\"/en-US/docs/Web/API/XRRigidTransform\"><code>XRRigidTransform</code></a> object specifying the position and orientation of the\n  viewpoint represented by the <code>XRView</code>.\n</p>"}},{"type":"prose","value":{"id":"examples","title":"Examples","isH3":false,"content":"<p>\n  For each view making up the presented scene, the view's <code>transform</code>\n  represents the position and orientation of the viewer or camera relative to the\n  reference space's origin. You can then use the inverse of this matrix to transform the\n  objects in your scene to adjust their placement and orientation to simulate the viewer's\n  movement through space.\n</p>\n<p>\n  In this example, we see an outline of a code fragment used while rendering an\n  <a href=\"/en-US/docs/Web/API/XRFrame\"><code>XRFrame</code></a>, which makes use of the view transform to place objects in the\n  world during rendering.\n</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> modelViewMatrix <span class=\"token operator\">=</span> mat4<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> normalMatrix <span class=\"token operator\">=</span> mat4<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> view <span class=\"token keyword\">of</span> pose<span class=\"token punctuation\">.</span>views<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> viewport <span class=\"token operator\">=</span> glLayer<span class=\"token punctuation\">.</span><span class=\"token function\">getViewport</span><span class=\"token punctuation\">(</span>view<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  gl<span class=\"token punctuation\">.</span><span class=\"token function\">viewport</span><span class=\"token punctuation\">(</span>viewport<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> viewport<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">,</span> viewport<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">,</span> viewport<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> obj <span class=\"token keyword\">of</span> world<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    mat4<span class=\"token punctuation\">.</span><span class=\"token function\">multiply</span><span class=\"token punctuation\">(</span>modelViewMatrix<span class=\"token punctuation\">,</span> view<span class=\"token punctuation\">.</span>transform<span class=\"token punctuation\">.</span>inverse<span class=\"token punctuation\">.</span>matrix<span class=\"token punctuation\">,</span> obj<span class=\"token punctuation\">.</span>matrix<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    mat4<span class=\"token punctuation\">.</span><span class=\"token function\">invert</span><span class=\"token punctuation\">(</span>normalMatrix<span class=\"token punctuation\">,</span> modelViewMatrix<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    mat4<span class=\"token punctuation\">.</span><span class=\"token function\">transpose</span><span class=\"token punctuation\">(</span>normalMatrix<span class=\"token punctuation\">,</span> normalMatrix<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    obj<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>modelViewMatrix<span class=\"token punctuation\">,</span> normalMatrix<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>\n  Two matrices are created outside the rendering loop; this avoids repeatedly allocating\n  and deallocating the matrices, and generally reduces overhead by reusing the same matrix\n  for each object rendered.\n</p>\n<p>\n  Then we iterate over each <a href=\"/en-US/docs/Web/API/XRView\"><code>XRView</code></a> found in the\n  <a href=\"/en-US/docs/Web/API/XRViewerPose\"><code>XRViewerPose</code></a>'s list of <a href=\"/en-US/docs/Web/API/XRViewerPose/views\" title=\"views\"><code>views</code></a>. There\n  will usually be two: one for the left eye and one for the right, but there may be only\n  one if in monoscopic mode. Currently, WebXR doesn't support more than two views per\n  pose, although room has been left to extend the specification to support that in the\n  future with some additions to the API.\n</p>\n<p>\n  For each view, we obtain its viewport and pass that to WebGL using\n  <a href=\"/en-US/docs/Web/API/WebGLRenderingContext/viewport\" title=\"gl.viewport()\"><code>gl.viewport()</code></a>. For the left eye, this\n  will be the left half of the canvas, while the right eye will use the right half.\n</p>\n<p>\n  Then we iterate over each object that makes up the scene. Each object's model view\n  matrix is computed by multiplying its own matrix which describes the object's own\n  position and orientation by the additional position and orientation adjustments needed\n  to match the camera's movement. To convert the \"camera focused\" transform matrix into an\n  \"object focused\" transform, we use the transform's inverse, thus taking the matrix\n  returned by <a href=\"/en-US/docs/Web/API/XRRigidTransform/matrix\" title=\"view.transform.inverse.matrix\"><code>view.transform.inverse.matrix</code></a>. The\n  resulting model view matrix will apply all the transforms needed to move and rotate the\n  object based on the relative positions of the object and the camera. This will simulate\n  the movement of the camera even though we're actually moving the object.\n</p>\n<p>\n  We then compute the normals for the model view matrix by inverting it, then transposing\n  it.\n</p>\n<p>\n  Finally, we call the object's <code>render()</code> routine, passing along the\n  <code>modelViewMatrix</code> and <code>normalMatrix</code> so the renderer can place and\n  light the object properly.\n</p>\n<div class=\"notecard note\" id=\"sect2\">\n  <p>\n    <strong>Note:</strong> This example is derived from a larger example…\n    <strong>&lt;&lt;&lt;--- finish and add link ---&gt;&gt;&gt;</strong>\n  </p>\n</div>"}},{"type":"specifications","value":{"title":"Specifications","id":"specifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://immersive-web.github.io/webxr/#dom-xrview-transform","title":"WebXR Device API"}],"query":"api.XRView.transform"}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"browser_compatibility","isH3":false,"query":"api.XRView.transform","dataURL":"/en-US/docs/Web/API/XRView/transform/bcd.json"}}],"toc":[{"text":"Value","id":"value"},{"text":"Examples","id":"examples"},{"text":"Specifications","id":"specifications"},{"text":"Browser compatibility","id":"browser_compatibility"}],"summary":"The read-only transform property of the\n  XRView interface is an XRRigidTransform object which\n  provides the position and orientation of the viewpoint relative to the\n  XRReferenceSpace specified when the\n  XRFrame.getViewerPose() method was called to obtain the view object.","popularity":0,"modified":"2022-09-09T05:23:40.000Z","source":{"folder":"en-us/web/api/xrview/transform","github_url":"https://github.com/mdn/content/blob/style/old/files/en-us/web/api/xrview/transform/index.md","last_commit_url":"https://github.com/mdn/content/commit/073f70e052ff92ab715df3c20678c11c9b51747f","filename":"index.md"},"parents":[{"uri":"/en-US/docs/Web","title":"Web technology for developers"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/XRView","title":"XRView"},{"uri":"/en-US/docs/Web/API/XRView/transform","title":"XRView.transform"}],"pageTitle":"XRView.transform - Web APIs | MDN","noIndexing":false}}