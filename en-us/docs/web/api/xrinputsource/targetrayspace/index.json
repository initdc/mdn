{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"XRInputSource.targetRaySpace","mdn_url":"/en-US/docs/Web/API/XRInputSource/targetRaySpace","locale":"en-US","native":"English (US)","sidebarHTML":"<ol><li><strong><a href=\"/en-US/docs/Web/API/WebXR_Device_API\">WebXR Device API</a></strong></li><li><strong><a href=\"/en-US/docs/Web/API/XRInputSource\"><code>XRInputSource</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Properties</summary><ol><li><a href=\"/en-US/docs/Web/API/XRInputSource/gamepad\"><code>gamepad</code></a></li><li><a href=\"/en-US/docs/Web/API/XRInputSource/gripSpace\"><code>gripSpace</code></a></li><li><a href=\"/en-US/docs/Web/API/XRInputSource/hand\"><code>hand</code></a></li><li><a href=\"/en-US/docs/Web/API/XRInputSource/handedness\"><code>handedness</code></a></li><li><a href=\"/en-US/docs/Web/API/XRInputSource/profiles\"><code>profiles</code></a></li><li><a href=\"/en-US/docs/Web/API/XRInputSource/targetRayMode\"><code>targetRayMode</code></a></li><li><em><code>targetRaySpace</code></em></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Related pages for WebXR Device API</summary><ol><li><a href=\"/en-US/docs/Web/API/Navigator/xr\"><code>Navigator.xr</code></a></li><li><a href=\"/en-US/docs/Web/API/WebGLRenderingContext/makeXRCompatible\"><code>WebGLRenderingContext.makeXRCompatible()</code></a></li><li><a href=\"/en-US/docs/Web/API/XRAnchor\"><code>XRAnchor</code></a></li><li><a href=\"/en-US/docs/Web/API/XRBoundedReferenceSpace\"><code>XRBoundedReferenceSpace</code></a></li><li><a href=\"/en-US/docs/Web/API/XRCPUDepthInformation\"><code>XRCPUDepthInformation</code></a></li><li><a href=\"/en-US/docs/Web/API/XRDepthInformation\"><code>XRDepthInformation</code></a></li><li><a href=\"/en-US/docs/Web/API/XRFrame\"><code>XRFrame</code></a></li><li><a href=\"/en-US/docs/Web/API/XRInputSourceArray\"><code>XRInputSourceArray</code></a></li><li><a href=\"/en-US/docs/Web/API/XRInputSourceEvent\"><code>XRInputSourceEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/XRInputSourcesChangeEvent\"><code>XRInputSourcesChangeEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/XRPose\"><code>XRPose</code></a></li><li><a href=\"/en-US/docs/Web/API/XRReferenceSpace\"><code>XRReferenceSpace</code></a></li><li><a href=\"/en-US/docs/Web/API/XRReferenceSpaceEvent\"><code>XRReferenceSpaceEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/XRRenderState\"><code>XRRenderState</code></a></li><li><a href=\"/en-US/docs/Web/API/XRRigidTransform\"><code>XRRigidTransform</code></a></li><li><a href=\"/en-US/docs/Web/API/XRSession\"><code>XRSession</code></a></li><li><a href=\"/en-US/docs/Web/API/XRSessionEvent\"><code>XRSessionEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/XRSpace\"><code>XRSpace</code></a></li><li><a href=\"/en-US/docs/Web/API/XRSystem\"><code>XRSystem</code></a></li><li><a href=\"/en-US/docs/Web/API/XRView\"><code>XRView</code></a></li><li><a href=\"/en-US/docs/Web/API/XRViewerPose\"><code>XRViewerPose</code></a></li><li><a href=\"/en-US/docs/Web/API/XRViewport\"><code>XRViewport</code></a></li><li><a href=\"/en-US/docs/Web/API/XRWebGLBinding\"><code>XRWebGLBinding</code></a></li><li><a href=\"/en-US/docs/Web/API/XRWebGLDepthInformation\"><code>XRWebGLDepthInformation</code></a></li><li><a href=\"/en-US/docs/Web/API/XRWebGLLayer\"><code>XRWebGLLayer</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>\n  The read-only <a href=\"/en-US/docs/Web/API/XRInputSource\"><code>XRInputSource</code></a> property\n  <strong><code>targetRaySpace</code></strong> returns an <a href=\"/en-US/docs/Web/API/XRSpace\"><code>XRSpace</code></a>\n  (typically an <a href=\"/en-US/docs/Web/API/XRReferenceSpace\"><code>XRReferenceSpace</code></a>) representing the position and\n  orientation of the target ray in the virtual space. Its native origin tracks\n  the position of the origin point of the target ray, and its orientation indicates the\n  orientation of the controller device itself. These values, interpreted in the context of\n  the input source's <a href=\"/en-US/docs/Web/API/XRInputSource/targetRayMode\" title=\"targetRayMode\"><code>targetRayMode</code></a>, can be\n  used both to fully interpret the device as an input source.\n</p>\n<p>\n  To obtain an <code>XRSpace</code> representing the input controller's position and\n  orientation in virtual space, use the <a href=\"/en-US/docs/Web/API/XRInputSource/gripSpace\" title=\"gripSpace\"><code>gripSpace</code></a> property.\n</p>"}},{"type":"prose","value":{"id":"value","title":"Value","isH3":false,"content":"<p>\n  An <a href=\"/en-US/docs/Web/API/XRSpace\"><code>XRSpace</code></a> object—typically an <a href=\"/en-US/docs/Web/API/XRReferenceSpace\"><code>XRReferenceSpace</code></a> or\n  <a href=\"/en-US/docs/Web/API/XRBoundedReferenceSpace\"><code>XRBoundedReferenceSpace</code></a>—which represents the position and orientation of\n  the input controller's target ray in virtual space.\n</p>\n<p>\n  The native origin of the returned <code>XRSpace</code> is located at the point from\n  which the target ray is emitted, and the orientation of the space indicates the\n  direction in which the target ray is pointing.\n</p>"}},{"type":"prose","value":{"id":"usage_notes","title":"Usage notes","isH3":false,"content":"<p>\n  All input sources—regardless of their <a href=\"/en-US/docs/Web/API/XRInputSource/targetRayMode\" title=\"targetRayMode\"><code>targetRayMode</code></a>—have a valid <code>targetRaySpace</code>. The exact meaning of this\n  space varies, however, depending on the mode:\n</p>\n<ul>\n  <li>\n    Every gaze input (<code>targetRayMode</code> value of <code>gaze</code>), shares the\n    same <a href=\"/en-US/docs/Web/API/XRSpace\"><code>XRSpace</code></a> object as their target ray space, since the gaze input\n    comes from the viewer's head. This shared space represents the same location as the\n    space returned by the <a href=\"/en-US/docs/Web/API/XRSession\"><code>XRSession</code></a> method\n    <a href=\"/en-US/docs/Web/API/XRSession/requestReferenceSpace\" title=\"requestReferenceSpace()\"><code>requestReferenceSpace()</code></a>, but is\n    maintained as a different object to allow for future enhancements to the API.\n  </li>\n  <li>\n    The target ray space reported by tracked pointer inputs (<code>targetRayMode</code>\n    of <code>tracked-pointer</code>) is actually based upon the true spatial position and\n    orientation of the input device.\n  </li>\n</ul>\n<p>\n  To determine the position and orientation of the target ray while rendering a frame,\n  pass it into the <a href=\"/en-US/docs/Web/API/XRFrame\"><code>XRFrame</code></a> method <a href=\"/en-US/docs/Web/API/XRFrame/getPose\" title=\"getPose()\"><code>getPose()</code></a> method, then use the returned <a href=\"/en-US/docs/Web/API/XRPose\"><code>XRPose</code></a> object's\n  <a href=\"/en-US/docs/Web/API/XRPose/transform\" title=\"transform\"><code>transform</code></a> to gather the spatial information you need.\n</p>"}},{"type":"prose","value":{"id":"examples","title":"Examples","isH3":false,"content":"<p>This fragment of code shows part of a function to be called once every frame. It looks for inputs which have a non-<code>null</code> <a href=\"/en-US/docs/Web/API/XRInputSource/targetRaySpace\" title=\"targetRaySpace\" aria-current=\"page\"><code>targetRaySpace</code></a>. Inputs which have a value for this property represent inputs that project a target ray outward from the user.</p>\n<p>For each such input, this example looks for inputs whose <a href=\"/en-US/docs/Web/API/XRInputSource/targetRayMode\" title=\"targetRayMode\"><code>targetRayMode</code></a> is <code>tracked-pointer</code>, indicating that the input is in fact intended to represent a targeting device rather than a gazing device, screen tap, or mouse click. For tracked pointers, a function <code>myRenderTargetRayAsBeam()</code> is called to render a beam from the input controller's virtual position outward in the direction it's pointing.</p>\n<p>The code should continue to perform tasks such as drawing controllers or any objects representative of the user's hands' positions in the virtual space, as well as any other input-related tasks.</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">function</span> <span class=\"token function\">updateInputSources</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">session<span class=\"token punctuation\">,</span> frame<span class=\"token punctuation\">,</span> refSpace</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> source <span class=\"token keyword\">of</span> session<span class=\"token punctuation\">.</span><span class=\"token function\">getInputSources</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> targetRayPose <span class=\"token operator\">=</span> frame<span class=\"token punctuation\">.</span><span class=\"token function\">getPose</span><span class=\"token punctuation\">(</span>inputSource<span class=\"token punctuation\">.</span>targetRaySpace<span class=\"token punctuation\">,</span> refSpace<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>targetRayPose<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>source<span class=\"token punctuation\">.</span>targetRayMode <span class=\"token operator\">===</span> <span class=\"token string\">\"tracked-pointer\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">myRenderTargetRayAsBeam</span><span class=\"token punctuation\">(</span>targetRayPose<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// …</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>"}},{"type":"specifications","value":{"title":"Specifications","id":"specifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://immersive-web.github.io/webxr/#dom-xrinputsource-targetrayspace","title":"WebXR Device API"}],"query":"api.XRInputSource.targetRaySpace"}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"browser_compatibility","isH3":false,"query":"api.XRInputSource.targetRaySpace","dataURL":"/en-US/docs/Web/API/XRInputSource/targetRaySpace/bcd.json"}},{"type":"prose","value":{"id":"see_also","title":"See also","isH3":false,"content":"<ul>\n  <li><a href=\"/en-US/docs/Web/API/WebXR_Device_API\">WebXR Device API</a></li>\n  <li><a href=\"/en-US/docs/Web/API/WebXR_Device_API/Inputs\">Inputs and input sources</a></li>\n  <li><a href=\"/en-US/docs/Web/WebXR%20Device%20API/Gamepads\" class=\"page-not-created\" title=\"This is a link to an unwritten page\">Using gamepads in WebXR applications</a></li>\n</ul>"}}],"toc":[{"text":"Value","id":"value"},{"text":"Usage notes","id":"usage_notes"},{"text":"Examples","id":"examples"},{"text":"Specifications","id":"specifications"},{"text":"Browser compatibility","id":"browser_compatibility"},{"text":"See also","id":"see_also"}],"summary":"The read-only XRInputSource property\n  targetRaySpace returns an XRSpace\n  (typically an XRReferenceSpace) representing the position and\n  orientation of the target ray in the virtual space. Its native origin tracks\n  the position of the origin point of the target ray, and its orientation indicates the\n  orientation of the controller device itself. These values, interpreted in the context of\n  the input source's targetRayMode, can be\n  used both to fully interpret the device as an input source.","popularity":0,"modified":"2022-09-09T05:23:40.000Z","source":{"folder":"en-us/web/api/xrinputsource/targetrayspace","github_url":"https://github.com/mdn/content/blob/style/old/files/en-us/web/api/xrinputsource/targetrayspace/index.md","last_commit_url":"https://github.com/mdn/content/commit/073f70e052ff92ab715df3c20678c11c9b51747f","filename":"index.md"},"parents":[{"uri":"/en-US/docs/Web","title":"Web technology for developers"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/XRInputSource","title":"XRInputSource"},{"uri":"/en-US/docs/Web/API/XRInputSource/targetRaySpace","title":"XRInputSource.targetRaySpace"}],"pageTitle":"XRInputSource.targetRaySpace - Web APIs | MDN","noIndexing":false}}