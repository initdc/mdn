{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"HTMLMediaElement.captureStream()","mdn_url":"/en-US/docs/Web/API/HTMLMediaElement/captureStream","locale":"en-US","native":"English (US)","sidebarHTML":"<ol><li><strong><a href=\"/en-US/docs/Web/API/HTMLMediaElement\"><code>HTMLMediaElement</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Properties</summary><ol><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/audioTracks\"><code>audioTracks</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/autoplay\"><code>autoplay</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/buffered\"><code>buffered</code></a></li><li><svg class=\"icon icon-nonstandard\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-nonstandard\"></use>\n</svg><svg class=\"icon icon-deprecated\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-deprecated\"></use>\n</svg><a href=\"/en-US/docs/Web/API/HTMLMediaElement/controller\"><code>controller</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/controls\"><code>controls</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/controlsList\"><code>controlsList</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/crossOrigin\"><code>crossOrigin</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/currentSrc\"><code>currentSrc</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/currentTime\"><code>currentTime</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/defaultMuted\"><code>defaultMuted</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/defaultPlaybackRate\"><code>defaultPlaybackRate</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/disableRemotePlayback\"><code>disableRemotePlayback</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/duration\"><code>duration</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/ended\"><code>ended</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/error\"><code>error</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/loop\"><code>loop</code></a></li><li><svg class=\"icon icon-nonstandard\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-nonstandard\"></use>\n</svg><svg class=\"icon icon-deprecated\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-deprecated\"></use>\n</svg><a href=\"/en-US/docs/Web/API/HTMLMediaElement/mediaGroup\"><code>mediaGroup</code></a></li><li><svg class=\"icon icon-nonstandard\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-nonstandard\"></use>\n</svg><a href=\"/en-US/docs/Web/API/HTMLMediaElement/msPlayToDisabled\"><code>msPlayToDisabled</code></a></li><li><svg class=\"icon icon-nonstandard\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-nonstandard\"></use>\n</svg><a href=\"/en-US/docs/Web/API/HTMLMediaElement/msPlayToPreferredSourceURI\"><code>msPlayToPreferredSourceUri</code></a></li><li><svg class=\"icon icon-nonstandard\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-nonstandard\"></use>\n</svg><a href=\"/en-US/docs/Web/API/HTMLMediaElement/msPlayToPrimary\"><code>msPlayToPrimary</code></a></li><li><svg class=\"icon icon-nonstandard\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-nonstandard\"></use>\n</svg><a href=\"/en-US/docs/Web/API/HTMLMediaElement/msPlayToSource\"><code>msPlayToSource</code></a></li><li><svg class=\"icon icon-nonstandard\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-nonstandard\"></use>\n</svg><a href=\"/en-US/docs/Web/API/HTMLMediaElement/msRealTime\"><code>msRealTime</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/muted\"><code>muted</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/networkState\"><code>networkState</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/paused\"><code>paused</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/playbackRate\"><code>playbackRate</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/preservesPitch\"><code>preservesPitch</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/readyState\"><code>readyState</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/seekable\"><code>seekable</code></a></li><li><svg class=\"icon icon-experimental\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-experimental\"></use>\n</svg><a href=\"/en-US/docs/Web/API/HTMLMediaElement/sinkId\"><code>sinkId</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/src\"><code>src</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/srcObject\"><code>srcObject</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/textTracks\"><code>textTracks</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/videoTracks\"><code>videoTracks</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/volume\"><code>volume</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Methods</summary><ol><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/canPlayType\"><code>canPlayType()</code></a></li><li><em><code>captureStream()</code></em></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/fastSeek\"><code>fastSeek()</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/load\"><code>load()</code></a></li><li><svg class=\"icon icon-nonstandard\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-nonstandard\"></use>\n</svg><a href=\"/en-US/docs/Web/API/HTMLMediaElement/msInsertAudioEffect\"><code>msInsertAudioEffect()</code></a></li><li><svg class=\"icon icon-nonstandard\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-nonstandard\"></use>\n</svg><a href=\"/en-US/docs/Web/API/HTMLMediaElement/msSetMediaProtectionManager\"><code>msSetMediaProtectionManager()</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/pause\"><code>pause()</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/play\"><code>play()</code></a></li><li><svg class=\"icon icon-deprecated\" tabindex=\"0\">\n    <use xlink:href=\"/assets/badges.svg#icon-deprecated\"></use>\n</svg><a href=\"/en-US/docs/Web/API/HTMLMediaElement/seekToNextFrame\"><code>seekToNextFrame()</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/setMediaKeys\"><code>setMediaKeys()</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/setSinkId\"><code>setSinkId()</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Events</summary><ol><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/abort_event\"><code>abort</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/canplay_event\"><code>canplay</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/canplaythrough_event\"><code>canplaythrough</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/durationchange_event\"><code>durationchange</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/emptied_event\"><code>emptied</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/ended_event\"><code>ended</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/error_event\"><code>error</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/loadeddata_event\"><code>loadeddata</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/loadedmetadata_event\"><code>loadedmetadata</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/loadstart_event\"><code>loadstart</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/pause_event\"><code>pause</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/play_event\"><code>play</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/playing_event\"><code>playing</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/progress_event\"><code>progress</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/ratechange_event\"><code>ratechange</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/seeked_event\"><code>seeked</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/seeking_event\"><code>seeking</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/stalled_event\"><code>stalled</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/suspend_event\"><code>suspend</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/timeupdate_event\"><code>timeupdate</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/volumechange_event\"><code>volumechange</code></a></li><li><a href=\"/en-US/docs/Web/API/HTMLMediaElement/waiting_event\"><code>waiting</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Inheritance:</summary><ol><li><a href=\"/en-US/docs/Web/API/HTMLElement\"><code>HTMLElement</code></a></li><li><a href=\"/en-US/docs/Web/API/Element\"><code>Element</code></a></li><li><a href=\"/en-US/docs/Web/API/Node\"><code>Node</code></a></li><li><a href=\"/en-US/docs/Web/API/EventTarget\"><code>EventTarget</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>\n  The <strong><code>captureStream()</code></strong> property of the\n  <a href=\"/en-US/docs/Web/API/HTMLMediaElement\"><code>HTMLMediaElement</code></a> interface returns a <a href=\"/en-US/docs/Web/API/MediaStream\"><code>MediaStream</code></a> object\n  which is streaming a real-time capture of the content being rendered in the media\n  element.\n</p>\n<p>This can be used, for example, as a source for a <a href=\"/en-US/docs/Web/API/WebRTC_API\">WebRTC</a> <a href=\"/en-US/docs/Web/API/RTCPeerConnection\"><code>RTCPeerConnection</code></a>.</p>"}},{"type":"prose","value":{"id":"syntax","title":"Syntax","isH3":false,"content":"<div class=\"code-example\"><pre class=\"brush: js-nolint notranslate\">captureStream()\n</pre></div>"}},{"type":"prose","value":{"id":"parameters","title":"Parameters","isH3":true,"content":"<p>None.</p>"}},{"type":"prose","value":{"id":"return_value","title":"Return value","isH3":true,"content":"<p>\n  A <a href=\"/en-US/docs/Web/API/MediaStream\"><code>MediaStream</code></a> object which can be used as a source for audio and/or\n  video data by other media processing code, or as a source for <a href=\"/en-US/docs/Glossary/WebRTC\">WebRTC</a>.\n</p>"}},{"type":"prose","value":{"id":"examples","title":"Examples","isH3":false,"content":"<p>\n  In this example, an event handler is established so that clicking a button starts\n  capturing the contents of a media element with the ID <code>\"playback\"</code> into a\n  <a href=\"/en-US/docs/Web/API/MediaStream\"><code>MediaStream</code></a>. The stream can then be used for other purposes—like a source\n  for streaming over WebRTC, to allow sharing prerecorded videos with another person\n  during a video call.\n</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.playAndRecord'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> playbackElement <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"playback\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> captureStream <span class=\"token operator\">=</span> playbackElement<span class=\"token punctuation\">.</span><span class=\"token function\">captureStream</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  playbackElement<span class=\"token punctuation\">.</span><span class=\"token function\">play</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>See <a href=\"/en-US/docs/Web/API/MediaStream_Recording_API/Recording_a_media_element\">Recording a media element</a> for a longer and more intricate example and explanation.</p>"}},{"type":"specifications","value":{"title":"Specifications","id":"specifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://w3c.github.io/mediacapture-fromelement/#dom-htmlmediaelement-capturestream","title":"Media Capture from DOM Elements"}],"query":"api.HTMLMediaElement.captureStream"}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"browser_compatibility","isH3":false,"query":"api.HTMLMediaElement.captureStream","dataURL":"/en-US/docs/Web/API/HTMLMediaElement/captureStream/bcd.json"}},{"type":"prose","value":{"id":"firefox-specific_notes","title":"Firefox-specific notes","isH3":true,"content":"<p>\n  Prior to Firefox 51, you couldn't use <code>captureStream()</code> on a media element\n  whose source is, itself, a <a href=\"/en-US/docs/Web/API/MediaStream\"><code>MediaStream</code></a> (like a <a href=\"/en-US/docs/Web/HTML/Element/video\"><code>&lt;video&gt;</code></a>\n  element which is presenting a stream being received over a\n  <a href=\"/en-US/docs/Web/API/RTCPeerConnection\"><code>RTCPeerConnection</code></a>). Beginning in Firefox 51, this works. This means you\n  can capture a stream from the video element and use <a href=\"/en-US/docs/Web/API/MediaRecorder\"><code>MediaRecorder</code></a> to\n  record it. See <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=1259788\" class=\"external\" rel=\" noopener\">bug&nbsp;1259788</a> for details.\n</p>\n<p>\n  However, <code>captureStream()</code> is still prefixed as\n  <code>mozCaptureStream()</code> on Firefox for good reason: there are some quirks in the\n  present implementation which are worth noting:\n</p>\n<ul>\n  <li>\n    The Firefox implementation currently only works as described in the specification\n    when the media element's source is, itself, a <a href=\"/en-US/docs/Web/API/MediaStream\"><code>MediaStream</code></a>.\n  </li>\n  <li>\n    If the media element's source isn't a <code>MediaStream</code>, the output from this\n    method isn't compatible with the spec, and if you change the source after starting\n    capture, the output capture stream can't accept the new source data due to that\n    incompatibility, so no <a href=\"/en-US/docs/Web/API/MediaStreamTrack\"><code>MediaStreamTrack</code></a>s from the new source\n    <code>MediaStream</code> are added to the captured stream, resulting in output that\n    doesn't capture the updated source.\n  </li>\n  <li>\n    Switching the source back to a <code>MediaStream</code> adds tracks back to the\n    stream and it works again as expected.\n  </li>\n  <li>\n    Calling <code>mozCaptureMediaStream()</code> on an element with a\n    <code>MediaStream</code> source returns a stream that only contains tracks while the\n    element is playing a <code>MediaStream</code>.\n  </li>\n  <li>\n    If you call <code>mozCaptureMediaStream()</code> on a media element with no source\n    media, its compatibility mode will be based on the first source that's added; for\n    example, if it's a <code>MediaStream</code>, then the capture stream will only work\n    with MediaStream sources from then on.\n  </li>\n  <li>\n    This special behavior will be removed once the non-<code>MediaStream</code> source\n    support is brought up to specification and the method is unprefixed. See\n    <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=1259788#c160\" class=\"external\" rel=\" noopener\">bug&nbsp;1259788, comment 160</a> for details.\n  </li>\n</ul>"}},{"type":"prose","value":{"id":"see_also","title":"See also","isH3":false,"content":"<ul>\n  <li><a href=\"/en-US/docs/Web/API/MediaStream_Recording_API/Recording_a_media_element\">Recording a media element</a></li>\n  <li><a href=\"/en-US/docs/Web/API/MediaStream_Recording_API\">MediaStream Recording API</a></li>\n  <li><a href=\"/en-US/docs/Web/API/HTMLCanvasElement/captureStream\"><code>HTMLCanvasElement.captureStream()</code></a></li>\n  <li><a href=\"/en-US/docs/Web/API/MediaStream\"><code>MediaStream</code></a></li>\n  <li><a href=\"/en-US/docs/Web/API/WebRTC_API\">WebRTC API</a></li>\n</ul>"}}],"toc":[{"text":"Syntax","id":"syntax"},{"text":"Examples","id":"examples"},{"text":"Specifications","id":"specifications"},{"text":"Browser compatibility","id":"browser_compatibility"},{"text":"See also","id":"see_also"}],"summary":"The captureStream() property of the\n  HTMLMediaElement interface returns a MediaStream object\n  which is streaming a real-time capture of the content being rendered in the media\n  element.","popularity":0.0013,"modified":"2022-09-13T05:48:35.000Z","other_translations":[{"title":"HTMLMediaElement.captureStream()","locale":"fr","native":"Français"},{"title":"HTMLMediaElement.captureStream()","locale":"ja","native":"日本語"}],"source":{"folder":"en-us/web/api/htmlmediaelement/capturestream","github_url":"https://github.com/mdn/content/blob/style/old/files/en-us/web/api/htmlmediaelement/capturestream/index.md","last_commit_url":"https://github.com/mdn/content/commit/8573240024adc1eef906b4b2df35567144fd733e","filename":"index.md"},"parents":[{"uri":"/en-US/docs/Web","title":"Web technology for developers"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/HTMLMediaElement","title":"HTMLMediaElement"},{"uri":"/en-US/docs/Web/API/HTMLMediaElement/captureStream","title":"HTMLMediaElement.captureStream()"}],"pageTitle":"HTMLMediaElement.captureStream() - Web APIs | MDN","noIndexing":false}}