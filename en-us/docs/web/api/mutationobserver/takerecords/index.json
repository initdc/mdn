{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"MutationObserver.takeRecords()","mdn_url":"/en-US/docs/Web/API/MutationObserver/takeRecords","locale":"en-US","native":"English (US)","sidebarHTML":"<ol><li><strong><a href=\"/en-US/docs/Web/API/MutationObserver\"><code>MutationObserver</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Constructor</summary><ol><li><a href=\"/en-US/docs/Web/API/MutationObserver/MutationObserver\"><code>MutationObserver()</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Methods</summary><ol><li><a href=\"/en-US/docs/Web/API/MutationObserver/disconnect\"><code>disconnect()</code></a></li><li><a href=\"/en-US/docs/Web/API/MutationObserver/observe\"><code>observe()</code></a></li><li><em><code>takeRecords()</code></em></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>\n  The <a href=\"/en-US/docs/Web/API/MutationObserver\"><code>MutationObserver</code></a> method\n  <strong><code>takeRecords()</code></strong> returns a list of all matching DOM changes\n  that have been detected but not yet processed by the observer's callback function,\n  leaving the mutation queue empty.\n</p>\n<p>\n  The most common use case for this is to\n  immediately fetch all pending mutation records immediately prior to disconnecting the\n  observer, so that any pending mutations can be processed when shutting down the\n  observer.\n</p>"}},{"type":"prose","value":{"id":"syntax","title":"Syntax","isH3":false,"content":"<div class=\"code-example\"><pre class=\"brush: js-nolint notranslate\">takeRecords()\n</pre></div>"}},{"type":"prose","value":{"id":"parameters","title":"Parameters","isH3":true,"content":"<p>None.</p>"}},{"type":"prose","value":{"id":"return_value","title":"Return value","isH3":true,"content":"<p>\n  An array of <a href=\"/en-US/docs/Web/API/MutationRecord\"><code>MutationRecord</code></a> objects, each describing one change applied to\n  the observed portion of the document's DOM tree.\n</p>\n<div class=\"notecard note\" id=\"sect1\">\n  <p>\n    <strong>Note:</strong> The queue of mutations which have occurred, but not been\n    delivered to the observer's callback is left empty after calling\n    <code>takeRecords()</code>.\n  </p>\n</div>"}},{"type":"prose","value":{"id":"examples","title":"Examples","isH3":false,"content":"<p>\n  In this example, we demonstrate how to handle any undelivered\n  <a href=\"/en-US/docs/Web/API/MutationRecord\"><code>MutationRecord</code></a>s by calling <code>takeRecords()</code> just before\n  disconnecting the observer.\n</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> targetNode <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#someElement\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> observerOptions <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">childList</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">attributes</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> observer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MutationObserver</span><span class=\"token punctuation\">(</span>callback<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nobserver<span class=\"token punctuation\">.</span><span class=\"token function\">observe</span><span class=\"token punctuation\">(</span>targetNode<span class=\"token punctuation\">,</span> observerOptions<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/* later, when it's time to stop observing… */</span>\n\n<span class=\"token comment\">/* handle any still-pending mutations */</span>\n\n<span class=\"token keyword\">let</span> mutations <span class=\"token operator\">=</span> observer<span class=\"token punctuation\">.</span><span class=\"token function\">takeRecords</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nobserver<span class=\"token punctuation\">.</span><span class=\"token function\">disconnect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>mutations<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&gt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span>mutations<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>\n  The code in lines 12–17 fetches any unprocessed mutation records, then invokes the\n  callback with the records so that they can be processed. This is done immediately prior\n  to calling <a href=\"/en-US/docs/Web/API/MutationObserver/disconnect\" title=\"disconnect()\"><code>disconnect()</code></a> to stop observing\n  the DOM.\n</p>"}},{"type":"specifications","value":{"title":"Specifications","id":"specifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://dom.spec.whatwg.org/#ref-for-dom-mutationobserver-takerecords①","title":"DOM Standard"}],"query":"api.MutationObserver.takeRecords"}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"browser_compatibility","isH3":false,"query":"api.MutationObserver.takeRecords","dataURL":"/en-US/docs/Web/API/MutationObserver/takeRecords/bcd.json"}}],"toc":[{"text":"Syntax","id":"syntax"},{"text":"Examples","id":"examples"},{"text":"Specifications","id":"specifications"},{"text":"Browser compatibility","id":"browser_compatibility"}],"summary":"The MutationObserver method\n  takeRecords() returns a list of all matching DOM changes\n  that have been detected but not yet processed by the observer's callback function,\n  leaving the mutation queue empty.","popularity":0.0006,"modified":"2022-09-24T22:10:10.000Z","other_translations":[{"title":"MutationObserver.takeRecords()","locale":"ja","native":"日本語"},{"title":"MutationObserver.takeRecords()","locale":"zh-CN","native":"中文 (简体)"}],"source":{"folder":"en-us/web/api/mutationobserver/takerecords","github_url":"https://github.com/mdn/content/blob/style/old/files/en-us/web/api/mutationobserver/takerecords/index.md","last_commit_url":"https://github.com/mdn/content/commit/403f32e7a61dc01648898c7693f210f25c4ccae4","filename":"index.md"},"parents":[{"uri":"/en-US/docs/Web","title":"Web technology for developers"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/MutationObserver","title":"MutationObserver"},{"uri":"/en-US/docs/Web/API/MutationObserver/takeRecords","title":"MutationObserver.takeRecords()"}],"pageTitle":"MutationObserver.takeRecords() - Web APIs | MDN","noIndexing":false}}