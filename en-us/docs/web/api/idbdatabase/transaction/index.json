{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"IDBDatabase.transaction()","mdn_url":"/en-US/docs/Web/API/IDBDatabase/transaction","locale":"en-US","native":"English (US)","sidebarHTML":"<ol><li><strong><a href=\"/en-US/docs/Web/API/IndexedDB_API\">IndexedDB API</a></strong></li><li><strong><a href=\"/en-US/docs/Web/API/IDBDatabase\"><code>IDBDatabase</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Properties</summary><ol><li><a href=\"/en-US/docs/Web/API/IDBDatabase/name\"><code>name</code></a></li><li><a href=\"/en-US/docs/Web/API/IDBDatabase/objectStoreNames\"><code>objectStoreNames</code></a></li><li><a href=\"/en-US/docs/Web/API/IDBDatabase/version\"><code>version</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Methods</summary><ol><li><a href=\"/en-US/docs/Web/API/IDBDatabase/close\"><code>close()</code></a></li><li><a href=\"/en-US/docs/Web/API/IDBDatabase/createObjectStore\"><code>createObjectStore()</code></a></li><li><a href=\"/en-US/docs/Web/API/IDBDatabase/deleteObjectStore\"><code>deleteObjectStore()</code></a></li><li><em><code>transaction()</code></em></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Events</summary><ol><li><a href=\"/en-US/docs/Web/API/IDBDatabase/close_event\"><code>close</code></a></li><li><a href=\"/en-US/docs/Web/API/IDBDatabase/versionchange_event\"><code>versionchange</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Inheritance:</summary><ol><li><a href=\"/en-US/docs/Web/API/EventTarget\"><code>EventTarget</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Related pages for IndexedDB</summary><ol><li><a href=\"/en-US/docs/Web/API/IDBCursor\"><code>IDBCursor</code></a></li><li><a href=\"/en-US/docs/Web/API/IDBCursorWithValue\"><code>IDBCursorWithValue</code></a></li><li><a href=\"/en-US/docs/Web/API/IDBFactory\"><code>IDBFactory</code></a></li><li><a href=\"/en-US/docs/Web/API/IDBIndex\"><code>IDBIndex</code></a></li><li><a href=\"/en-US/docs/Web/API/IDBKeyRange\"><code>IDBKeyRange</code></a></li><li><a href=\"/en-US/docs/Web/API/IDBObjectStore\"><code>IDBObjectStore</code></a></li><li><a href=\"/en-US/docs/Web/API/IDBOpenDBRequest\"><code>IDBOpenDBRequest</code></a></li><li><a href=\"/en-US/docs/Web/API/IDBRequest\"><code>IDBRequest</code></a></li><li><a href=\"/en-US/docs/Web/API/IDBTransaction\"><code>IDBTransaction</code></a></li><li><a href=\"/en-US/docs/Web/API/IDBVersionChangeEvent\"><code>IDBVersionChangeEvent</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>\n  The <strong><code>transaction</code></strong> method of the <a href=\"/en-US/docs/Web/API/IDBDatabase\"><code>IDBDatabase</code></a> interface immediately\n  returns a transaction object (<a href=\"/en-US/docs/Web/API/IDBTransaction\"><code>IDBTransaction</code></a>) containing the\n  <a href=\"/en-US/docs/Web/API/IDBTransaction/objectStore\"><code>IDBTransaction.objectStore</code></a> method, which you can use to access your\n  object store.\n</p><div class=\"notecard note\" id=\"sect1\">\n  <p><strong>Note:</strong> This feature is available in <a href=\"/en-US/docs/Web/API/Web_Workers_API\">Web Workers</a></p>\n</div>"}},{"type":"prose","value":{"id":"syntax","title":"Syntax","isH3":false,"content":"<div class=\"code-example\"><pre class=\"brush: js-nolint notranslate\">transaction(storeNames)\ntransaction(storeNames, mode)\ntransaction(storeNames, mode, options)\n</pre></div>"}},{"type":"prose","value":{"id":"parameters","title":"Parameters","isH3":true,"content":"<dl>\n  <dt id=\"storenames\"><code>storeNames</code></dt>\n  <dd>\n    <p>\n      The names of object stores that are in the scope of the new transaction, declared as\n      an array of strings. Specify only the object stores that you need to access.\n      If you need to access only one object store, you can specify its name as a string.\n      Therefore the following lines are equivalent:\n    </p>\n    <div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>db<span class=\"token punctuation\">.</span><span class=\"token function\">transaction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'my-store-name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ndb<span class=\"token punctuation\">.</span><span class=\"token function\">transaction</span><span class=\"token punctuation\">(</span><span class=\"token string\">'my-store-name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n    <p>\n      If you need to access all object stores in the database, you can use the property\n      <a href=\"/en-US/docs/Web/API/IDBDatabase/objectStoreNames\"><code>IDBDatabase.objectStoreNames</code></a>:\n    </p>\n    <div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> transaction <span class=\"token operator\">=</span> db<span class=\"token punctuation\">.</span><span class=\"token function\">transaction</span><span class=\"token punctuation\">(</span>db<span class=\"token punctuation\">.</span>objectStoreNames<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n    <p>Passing an empty array will throw an exception.</p>\n  </dd>\n  <dt id=\"mode\"><code>mode</code> <span class=\"badge inline optional\">Optional</span></dt>\n  <dd>\n    <p>\n      The types of access that can be performed in the transaction. Transactions are\n      opened in one of three modes: <code>readonly</code>, <code>readwrite</code> and\n      <code>readwriteflush</code> (non-standard, Firefox-only.) <code>versionchange</code>\n      mode can't be specified here. If you don't provide the parameter, the default access\n      mode is <code>readonly</code>. To avoid slowing things down, don't open a\n      <code>readwrite</code> transaction unless you actually need to write into the\n      database.\n    </p>\n    <p>\n      If you need to open the object store in <code>readwrite</code> mode to change data,\n      you would use the following:\n    </p>\n    <div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> transaction <span class=\"token operator\">=</span> db<span class=\"token punctuation\">.</span><span class=\"token function\">transaction</span><span class=\"token punctuation\">(</span><span class=\"token string\">'my-store-name'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"readwrite\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n    <p>\n      As of Firefox 40, IndexedDB transactions have relaxed durability guarantees to\n      increase performance (see <a href=\"https://bugzilla.mozilla.org/show_bug.cgi?id=1112702\" class=\"external\" rel=\" noopener\">bug&nbsp;1112702</a>), which is the same behavior as other\n      IndexedDB-supporting browsers. Previously in a <code>readwrite</code> transaction, a\n      <a href=\"/en-US/docs/Web/API/IDBTransaction/complete_event\" title=\"complete\"><code>complete</code></a> event was fired only when all data was guaranteed\n      to have been flushed to disk. In Firefox 40+ the <code>complete</code> event is\n      fired after the OS has been told to write the data but potentially before that data\n      has actually been flushed to disk. The <code>complete</code> event may thus be\n      delivered quicker than before, however, there exists a small chance that the entire\n      transaction will be lost if the OS crashes or there is a loss of system power before\n      the data is flushed to disk. Since such catastrophic events are rare most consumers\n      should not need to concern themselves further.\n    </p>\n    <div class=\"notecard note\" id=\"sect2\">\n      <p>\n        <strong>Note:</strong> In Firefox, if you wish to ensure durability for some\n        reason (e.g. you're storing critical data that cannot be recomputed later) you can\n        force a transaction to flush to disk before delivering the <code>complete</code>\n        event by creating a transaction using the experimental (non-standard)\n        <code>readwriteflush</code> mode (see <a href=\"/en-US/docs/Web/API/IDBDatabase/transaction\" aria-current=\"page\"><code>IDBDatabase.transaction</code></a>.)\n        This is currently experimental, and can only be used if the\n        <code>dom.indexedDB.experimental</code> pref is set to <code>true</code> in\n        <code>about:config</code>.\n      </p>\n    </div>\n  </dd>\n  <dt id=\"options\"><code>options</code> <span class=\"badge inline optional\">Optional</span></dt>\n  <dd>\n    <p>Dictionary of other options. Available options are:</p>\n    <dl>\n      <dt id=\"durability\"><code>durability</code></dt>\n      <dd>\n        <p>\n          <code>\"default\"</code>, <code>\"strict\"</code>, or\n          <code>\"relaxed\"</code>. The default is <code>\"default\"</code>. Using\n          <code>\"relaxed\"</code> provides better performance, but with fewer guarantees. Web\n          applications are encouraged to use <code>\"relaxed\"</code> for ephemeral data such\n          as caches or quickly changing records, and <code>\"strict\"</code> in cases where\n          reducing the risk of data loss outweighs the impact to performance and power.\n        </p>\n      </dd>\n    </dl>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"return_value","title":"Return value","isH3":true,"content":"<p>An <a href=\"/en-US/docs/Web/API/IDBTransaction\"><code>IDBTransaction</code></a> object.</p>"}},{"type":"prose","value":{"id":"exceptions","title":"Exceptions","isH3":true,"content":"<dl>\n  <dt id=\"invalidstateerror\"><code>InvalidStateError</code> <a href=\"/en-US/docs/Web/API/DOMException\"><code>DOMException</code></a></dt>\n  <dd>\n    <p>Thrown if the <a href=\"/en-US/docs/Web/API/IDBDatabase/close\" title=\"close()\"><code>close()</code></a> method has previously been called on this <a href=\"/en-US/docs/Web/API/IDBDatabase\"><code>IDBDatabase</code></a> instance.</p>\n  </dd>\n  <dt id=\"notfounderror\"><code>NotFoundError</code> <a href=\"/en-US/docs/Web/API/DOMException\"><code>DOMException</code></a></dt>\n  <dd>\n    <p>Thrown if an object store specified in the 'storeNames' parameter has been deleted or removed.</p>\n  </dd>\n  <dt id=\"typeerror\"><a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError\"><code>TypeError</code></a></dt>\n  <dd>\n    <p>Thrown if the value for the <code>mode</code> parameter is invalid.</p>\n  </dd>\n  <dt id=\"invalidaccesserror\"><code>InvalidAccessError</code> <a href=\"/en-US/docs/Web/API/DOMException\"><code>DOMException</code></a></dt>\n  <dd>\n    <p>Thrown if the function was called with an empty list of store names.</p>\n  </dd>\n</dl>"}},{"type":"prose","value":{"id":"examples","title":"Examples","isH3":false,"content":"<p>\n  In this example we open a database connection, then use transaction() to open a\n  transaction on the database. For a complete example, see our\n  <a href=\"https://github.com/mdn/dom-examples/tree/main/to-do-notifications\" class=\"external\" rel=\" noopener\">To-do Notifications</a> app (<a href=\"https://mdn.github.io/dom-examples/to-do-notifications/\" class=\"external\" rel=\" noopener\">view example live</a>).\n</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">let</span> db<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Let us open our database</span>\n<span class=\"token keyword\">const</span> DBOpenRequest <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>indexedDB<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"toDoList\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nDBOpenRequest<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onsuccess</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  note<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">+=</span> <span class=\"token string\">'&lt;li&gt;Database initialized.&lt;/li&gt;'</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// store the result of opening the database in the db variable.</span>\n  <span class=\"token comment\">// This is used a lot below</span>\n  db <span class=\"token operator\">=</span> DBOpenRequest<span class=\"token punctuation\">.</span>result<span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Run the displayData() function to populate the task list with</span>\n  <span class=\"token comment\">// all the to-do list data already in the IDB</span>\n  <span class=\"token function\">displayData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// open a read/write db transaction, ready for adding the data</span>\n<span class=\"token keyword\">const</span> transaction <span class=\"token operator\">=</span> db<span class=\"token punctuation\">.</span><span class=\"token function\">transaction</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"toDoList\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"readwrite\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// report on the success of opening the transaction</span>\ntransaction<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">oncomplete</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  note<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">+=</span> <span class=\"token string\">'&lt;li&gt;Transaction completed: database modification finished.&lt;/li&gt;'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\ntransaction<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onerror</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  note<span class=\"token punctuation\">.</span>innerHTML <span class=\"token operator\">+=</span> <span class=\"token string\">'&lt;li&gt;Transaction not opened due to error. Duplicate items not allowed.&lt;/li&gt;'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// you would then go on to do something to this database</span>\n<span class=\"token comment\">// via an object store</span>\n<span class=\"token keyword\">const</span> objectStore <span class=\"token operator\">=</span> transaction<span class=\"token punctuation\">.</span><span class=\"token function\">objectStore</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"toDoList\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// etc.</span>\n</code></pre></div>"}},{"type":"specifications","value":{"title":"Specifications","id":"specifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://w3c.github.io/IndexedDB/#ref-for-dom-idbdatabase-transaction③","title":"Indexed Database API 3.0"}],"query":"api.IDBDatabase.transaction"}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"browser_compatibility","isH3":false,"query":"api.IDBDatabase.transaction","dataURL":"/en-US/docs/Web/API/IDBDatabase/transaction/bcd.json"}},{"type":"prose","value":{"id":"see_also","title":"See also","isH3":false,"content":"<ul>\n  <li><a href=\"/en-US/docs/Web/API/IndexedDB_API/Using_IndexedDB\">Using IndexedDB</a></li>\n  <li>Starting transactions: <a href=\"/en-US/docs/Web/API/IDBDatabase\"><code>IDBDatabase</code></a></li>\n  <li>Using transactions: <a href=\"/en-US/docs/Web/API/IDBTransaction\"><code>IDBTransaction</code></a></li>\n  <li>Setting a range of keys: <a href=\"/en-US/docs/Web/API/IDBKeyRange\"><code>IDBKeyRange</code></a></li>\n  <li>Retrieving and making changes to your data: <a href=\"/en-US/docs/Web/API/IDBObjectStore\"><code>IDBObjectStore</code></a></li>\n  <li>Using cursors: <a href=\"/en-US/docs/Web/API/IDBCursor\"><code>IDBCursor</code></a></li>\n  <li>Reference example: <a href=\"https://github.com/mdn/dom-examples/tree/main/to-do-notifications\" class=\"external\" rel=\" noopener\">To-do Notifications</a> (<a href=\"https://mdn.github.io/dom-examples/to-do-notifications/\" class=\"external\" rel=\" noopener\">View the example live</a>).</li>\n</ul>"}}],"toc":[{"text":"Syntax","id":"syntax"},{"text":"Examples","id":"examples"},{"text":"Specifications","id":"specifications"},{"text":"Browser compatibility","id":"browser_compatibility"},{"text":"See also","id":"see_also"}],"summary":"The transaction method of the IDBDatabase interface immediately\n  returns a transaction object (IDBTransaction) containing the\n  IDBTransaction.objectStore method, which you can use to access your\n  object store.","popularity":0.0007,"modified":"2022-09-30T09:50:26.000Z","other_translations":[{"title":"IDBDatabase.transaction()","locale":"es","native":"Español"},{"title":"IDBDatabase.transaction()","locale":"fr","native":"Français"}],"source":{"folder":"en-us/web/api/idbdatabase/transaction","github_url":"https://github.com/mdn/content/blob/style/old/files/en-us/web/api/idbdatabase/transaction/index.md","last_commit_url":"https://github.com/mdn/content/commit/d42b609444efb915ab46117f59985d67dda21eb6","filename":"index.md"},"parents":[{"uri":"/en-US/docs/Web","title":"Web technology for developers"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/IDBDatabase","title":"IDBDatabase"},{"uri":"/en-US/docs/Web/API/IDBDatabase/transaction","title":"IDBDatabase.transaction()"}],"pageTitle":"IDBDatabase.transaction() - Web APIs | MDN","noIndexing":false}}