{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"RTCIceCandidate.usernameFragment","mdn_url":"/en-US/docs/Web/API/RTCIceCandidate/usernameFragment","locale":"en-US","native":"English (US)","sidebarHTML":"<ol><li><strong><a href=\"/en-US/docs/Web/API/WebRTC_API\">WebRTC API</a></strong></li><li><strong><a href=\"/en-US/docs/Web/API/RTCIceCandidate\"><code>RTCIceCandidate</code></a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Constructor</summary><ol><li><a href=\"/en-US/docs/Web/API/RTCIceCandidate/RTCIceCandidate\"><code>RTCIceCandidate()</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Properties</summary><ol><li><a href=\"/en-US/docs/Web/API/RTCIceCandidate/address\"><code>address</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCIceCandidate/candidate\"><code>candidate</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCIceCandidate/component\"><code>component</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCIceCandidate/foundation\"><code>foundation</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCIceCandidate/port\"><code>port</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCIceCandidate/priority\"><code>priority</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCIceCandidate/protocol\"><code>protocol</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCIceCandidate/relatedAddress\"><code>relatedAddress</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCIceCandidate/relatedPort\"><code>relatedPort</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCIceCandidate/sdpMid\"><code>sdpMid</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCIceCandidate/sdpMLineIndex\"><code>sdpMLineIndex</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCIceCandidate/tcpType\"><code>tcpType</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCIceCandidate/type\"><code>type</code></a></li><li><em><code>usernameFragment</code></em></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Methods</summary><ol><li><a href=\"/en-US/docs/Web/API/RTCIceCandidate/toJSON\"><code>toJSON()</code></a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Related pages for WebRTC</summary><ol><li><a href=\"/en-US/docs/Web/API/MediaDevices/getUserMedia\"><code>MediaDevices.getUserMedia()</code></a></li><li><a href=\"/en-US/docs/Web/API/Navigator/mediaDevices\"><code>Navigator.mediaDevices</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCCertificate\"><code>RTCCertificate</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCDTMFSender\"><code>RTCDTMFSender</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCDTMFToneChangeEvent\"><code>RTCDTMFToneChangeEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCDataChannel\"><code>RTCDataChannel</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCDataChannelEvent\"><code>RTCDataChannelEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCDtlsTransport\"><code>RTCDtlsTransport</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCErrorEvent\"><code>RTCErrorEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCIceTransport\"><code>RTCIceTransport</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCPeerConnection\"><code>RTCPeerConnection</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCPeerConnectionIceErrorEvent\"><code>RTCPeerConnectionIceErrorEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCPeerConnectionIceEvent\"><code>RTCPeerConnectionIceEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCRtpReceiver\"><code>RTCRtpReceiver</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCRtpSender\"><code>RTCRtpSender</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCRtpTransceiver\"><code>RTCRtpTransceiver</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCSctpTransport\"><code>RTCSctpTransport</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCSessionDescription\"><code>RTCSessionDescription</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCStatsReport\"><code>RTCStatsReport</code></a></li><li><a href=\"/en-US/docs/Web/API/RTCTrackEvent\"><code>RTCTrackEvent</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>\n  The read-only <strong><code>usernameFragment</code></strong> property on the <a href=\"/en-US/docs/Web/API/RTCIceCandidate\"><code>RTCIceCandidate</code></a> interface is a string indicating the\n  username fragment (\"ufrag\") that uniquely identifies a single ICE interaction session.\n</p>\n<p>\n  This value is specified using the <code>usernameFragment</code> property in the <code>candidateInfo</code> options object that is passed to the <a href=\"/en-US/docs/Web/API/RTCIceCandidate/RTCIceCandidate\" title=\"RTCIceCandidate()\"><code>RTCIceCandidate()</code></a> constructor.\n  If you call the constructor with an m-line string instead of the options object, the value of <code>usernameFragment</code> is extracted from the specified candidate m-line string.\n</p>\n<p>Note that 24 bits of the username fragment are required to be randomized by the browser. See <a href=\"#randomization\">Randomization</a> below for details.</p>"}},{"type":"prose","value":{"id":"value","title":"Value","isH3":false,"content":"<p>\n  A string containing the username fragment (usually referred to in\n  shorthand as \"ufrag\" or \"ice-ufrag\") that, along with the ICE password (\"ice-pwd\"),\n  uniquely identifies a single ongoing ICE interaction, including for any communication\n  with the <a href=\"/en-US/docs/Glossary/STUN\">STUN</a> server. The string may be up to 256 characters long, and\n  has no default value.\n</p>"}},{"type":"prose","value":{"id":"randomization","title":"Randomization","isH3":true,"content":"<p>\n  At least 24 bits of the text in the <code>ufrag</code> are required to be randomly\n  selected by the ICE layer at the beginning of the ICE session. The specifics for which\n  bits are random and what the remainder of the <code>ufrag</code> text are left up to the\n  browser implementation to decide. For example, a browser might choose to always use a\n  24-character <code>ufrag</code> in which bit 4 of each character is randomly selected\n  between 0 and 1. Another example: it might take a user-defined string and append three\n  8-bit random bytes to the end. Or perhaps every character is entirely random.\n</p>"}},{"type":"prose","value":{"id":"usage_notes","title":"Usage notes","isH3":false,"content":"<p>\n  ICE uses the <code>usernameFragment</code> and password to ensure message integrity.\n  This avoids crosstalk among multiple ongoing ICE sessions, but, more importantly, helps\n  secure ICE transactions (and all of WebRTC by extension) against attacks that might try\n  to inject themselves into an ICE exchange.\n</p>\n<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>Note:</strong> There is no API to obtain the ICE password, for what should be fairly obvious security reasons.</p>\n</div>\n<p>The <code>usernameFragment</code> and password both change every time an <a href=\"/en-US/docs/Web/API/WebRTC_API/Session_lifetime#ice_restart\">ICE restart</a> occurs.</p>"}},{"type":"prose","value":{"id":"examples","title":"Examples","isH3":false,"content":"<p>\n  Although the WebRTC infrastructure will filter out obsolete candidates for you after an\n  ICE restart, you can do it yourself if you're trying to absolutely minimize the number\n  of messages going back and forth.\n</p>\n<p>\n  To do so, you can compare the value of <code>usernameFragment</code> to the current\n  <code>usernameFragment</code> being used for the connection after receiving the\n  candidate from the signaling server and before calling\n  <a href=\"/en-US/docs/Web/API/RTCPeerConnection/addIceCandidate\" title=\"addIceCandidate()\"><code>addIceCandidate()</code></a> to add it to the\n  set of possible candidates.\n</p>\n<p>\n  When the web app receives a message from the signaling server that includes a candidate\n  to be added to the <a href=\"/en-US/docs/Web/API/RTCPeerConnection\"><code>RTCPeerConnection</code></a>, you can (and generally\n  <em>should</em>) call <code>addIceCandidate()</code>. There's not typically a need to\n  manually worry about filtering the candidates.\n</p>\n<p>\n  However, let's imagine that we do need to minimize traffic. The function below,\n  <code>ssNewCandidate()</code>, is called when a message, <code>signalMsg</code>, arrives\n  from the signaling server that contains an ICE candidate to be added to the\n  <code>RTCPeerConnection</code>. To avoid including candidates obsoleted by an ICE\n  restart, we can use code like this:\n</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">ssNewCandidate</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">signalMsg</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> candidate <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RTCIceCandidate</span><span class=\"token punctuation\">(</span>signalMsg<span class=\"token punctuation\">.</span>candidate<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">let</span> receivers <span class=\"token operator\">=</span> pc<span class=\"token punctuation\">.</span><span class=\"token function\">getReceivers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  receivers<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">receiver</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> parameters <span class=\"token operator\">=</span> receiver<span class=\"token punctuation\">.</span>transport<span class=\"token punctuation\">.</span><span class=\"token function\">getParameters</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>parameters<span class=\"token punctuation\">.</span>usernameFragment <span class=\"token operator\">===</span> candidate<span class=\"token punctuation\">.</span>usernameFragment<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  pc<span class=\"token punctuation\">.</span><span class=\"token function\">addIceCandidate</span><span class=\"token punctuation\">(</span>candidate<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span>reportError<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>\n  This walks through the list of the <a href=\"/en-US/docs/Web/API/RTCRtpReceiver\"><code>RTCRtpReceiver</code></a> objects being used to\n  receive ICE data, and looks to see if the <code>usernameFragment</code> indicated in the\n  candidate matches any of them. If it does, <code>ssNewCandidate()</code> aborts.\n  Otherwise, after checking every receiver, it adds the new candidate to the connection.\n</p>"}},{"type":"specifications","value":{"title":"Specifications","id":"specifications","isH3":false,"specifications":[{"bcdSpecificationURL":"https://w3c.github.io/webrtc-pc/#dom-rtcicecandidate-usernamefragment","title":"WebRTC 1.0: Real-Time Communication Between Browsers"}],"query":"api.RTCIceCandidate.usernameFragment"}},{"type":"browser_compatibility","value":{"title":"Browser compatibility","id":"browser_compatibility","isH3":false,"query":"api.RTCIceCandidate.usernameFragment","dataURL":"/en-US/docs/Web/API/RTCIceCandidate/usernameFragment/bcd.json"}}],"toc":[{"text":"Value","id":"value"},{"text":"Usage notes","id":"usage_notes"},{"text":"Examples","id":"examples"},{"text":"Specifications","id":"specifications"},{"text":"Browser compatibility","id":"browser_compatibility"}],"summary":"The read-only usernameFragment property on the RTCIceCandidate interface is a string indicating the\n  username fragment (\"ufrag\") that uniquely identifies a single ICE interaction session.","popularity":0.0002,"modified":"2022-09-09T05:18:40.000Z","source":{"folder":"en-us/web/api/rtcicecandidate/usernamefragment","github_url":"https://github.com/mdn/content/blob/style/old/files/en-us/web/api/rtcicecandidate/usernamefragment/index.md","last_commit_url":"https://github.com/mdn/content/commit/e0e09b1df51489867f2e74c18586d168ba5e00d1","filename":"index.md"},"parents":[{"uri":"/en-US/docs/Web","title":"Web technology for developers"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/RTCIceCandidate","title":"RTCIceCandidate"},{"uri":"/en-US/docs/Web/API/RTCIceCandidate/usernameFragment","title":"RTCIceCandidate.usernameFragment"}],"pageTitle":"RTCIceCandidate.usernameFragment - Web APIs | MDN","noIndexing":false}}