{"doc":{"isMarkdown":true,"isTranslated":false,"isActive":true,"flaws":{},"title":"Migrating from webkitAudioContext","mdn_url":"/en-US/docs/Web/API/Web_Audio_API/Migrating_from_webkitAudioContext","locale":"en-US","native":"English (US)","sidebarHTML":"<ol><li><strong><a href=\"/en-US/docs/Web/API/Web_Audio_API\">Web Audio API</a></strong></li><li class=\"toggle\"><details open=\"\"><summary>Guides</summary><ol><li><a href=\"/en-US/docs/Web/API/Web_Audio_API/Using_Web_Audio_API\">Using the Web Audio API</a></li><li><a href=\"/en-US/docs/Web/API/Web_Audio_API/Basic_concepts_behind_Web_Audio_API\">Basic concepts behind Web Audio API</a></li><li><a href=\"/en-US/docs/Web/API/Web_Audio_API/Best_practices\">Web Audio API best practices</a></li><li><a href=\"/en-US/docs/Web/API/Web_Audio_API/Advanced_techniques\">Advanced techniques: Creating and sequencing audio</a></li><li><a href=\"/en-US/docs/Web/API/Web_Audio_API/Using_AudioWorklet\">Background audio processing using AudioWorklet</a></li><li><a href=\"/en-US/docs/Web/API/Web_Audio_API/Controlling_multiple_parameters_with_ConstantSourceNode\">Controlling multiple parameters with ConstantSourceNode</a></li><li><a href=\"/en-US/docs/Web/API/Web_Audio_API/Migrating_from_webkitAudioContext\">Migrating from webkitAudioContext</a></li><li><a href=\"/en-US/docs/Web/API/Web_Audio_API/Simple_synth\">Example and tutorial: Simple synth keyboard</a></li><li><a href=\"/en-US/docs/Web/API/Web_Audio_API/Tools\">Tools for analyzing Web Audio usage</a></li><li><a href=\"/en-US/docs/Web/API/Web_Audio_API/Using_IIR_filters\">Using IIR filters</a></li><li><a href=\"/en-US/docs/Web/API/Web_Audio_API/Visualizations_with_Web_Audio_API\">Visualizations with Web Audio API</a></li><li><a href=\"/en-US/docs/Web/API/Web_Audio_API/Web_audio_spatialization_basics\">Web audio spatialization basics</a></li></ol></details></li><li class=\"toggle\"><details open=\"\"><summary>Interfaces</summary><ol><li><a href=\"/en-US/docs/Web/API/AnalyserNode\"><code>AnalyserNode</code></a></li><li><a href=\"/en-US/docs/Web/API/AudioBuffer\"><code>AudioBuffer</code></a></li><li><a href=\"/en-US/docs/Web/API/AudioBufferSourceNode\"><code>AudioBufferSourceNode</code></a></li><li><a href=\"/en-US/docs/Web/API/AudioContext\"><code>AudioContext</code></a></li><li><a href=\"/en-US/docs/Web/API/AudioDestinationNode\"><code>AudioDestinationNode</code></a></li><li><a href=\"/en-US/docs/Web/API/AudioListener\"><code>AudioListener</code></a></li><li><a href=\"/en-US/docs/Web/API/AudioNode\"><code>AudioNode</code></a></li><li><a href=\"/en-US/docs/Web/API/AudioParam\"><code>AudioParam</code></a></li><li><a href=\"/en-US/docs/Web/API/AudioProcessingEvent\"><code>AudioProcessingEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/AudioScheduledSourceNode\"><code>AudioScheduledSourceNode</code></a></li><li><a href=\"/en-US/docs/Web/API/AudioWorklet\"><code>AudioWorklet</code></a></li><li><a href=\"/en-US/docs/Web/API/AudioWorkletGlobalScope\"><code>AudioWorkletGlobalScope</code></a></li><li><a href=\"/en-US/docs/Web/API/AudioWorkletNode\"><code>AudioWorkletNode</code></a></li><li><a href=\"/en-US/docs/Web/API/AudioWorkletProcessor\"><code>AudioWorkletProcessor</code></a></li><li><a href=\"/en-US/docs/Web/API/BaseAudioContext\"><code>BaseAudioContext</code></a></li><li><a href=\"/en-US/docs/Web/API/BiquadFilterNode\"><code>BiquadFilterNode</code></a></li><li><a href=\"/en-US/docs/Web/API/ChannelMergerNode\"><code>ChannelMergerNode</code></a></li><li><a href=\"/en-US/docs/Web/API/ChannelSplitterNode\"><code>ChannelSplitterNode</code></a></li><li><a href=\"/en-US/docs/Web/API/ConstantSourceNode\"><code>ConstantSourceNode</code></a></li><li><a href=\"/en-US/docs/Web/API/ConvolverNode\"><code>ConvolverNode</code></a></li><li><a href=\"/en-US/docs/Web/API/DelayNode\"><code>DelayNode</code></a></li><li><a href=\"/en-US/docs/Web/API/DynamicsCompressorNode\"><code>DynamicsCompressorNode</code></a></li><li><a href=\"/en-US/docs/Web/API/GainNode\"><code>GainNode</code></a></li><li><a href=\"/en-US/docs/Web/API/IIRFilterNode\"><code>IIRFilterNode</code></a></li><li><a href=\"/en-US/docs/Web/API/MediaElementAudioSourceNode\"><code>MediaElementAudioSourceNode</code></a></li><li><a href=\"/en-US/docs/Web/API/MediaStreamAudioDestinationNode\"><code>MediaStreamAudioDestinationNode</code></a></li><li><a href=\"/en-US/docs/Web/API/MediaStreamAudioSourceNode\"><code>MediaStreamAudioSourceNode</code></a></li><li><a href=\"/en-US/docs/Web/API/OfflineAudioCompletionEvent\"><code>OfflineAudioCompletionEvent</code></a></li><li><a href=\"/en-US/docs/Web/API/OfflineAudioContext\"><code>OfflineAudioContext</code></a></li><li><a href=\"/en-US/docs/Web/API/OscillatorNode\"><code>OscillatorNode</code></a></li><li><a href=\"/en-US/docs/Web/API/PannerNode\"><code>PannerNode</code></a></li><li><a href=\"/en-US/docs/Web/API/PeriodicWave\"><code>PeriodicWave</code></a></li><li><a href=\"/en-US/docs/Web/API/WaveShaperNode\"><code>WaveShaperNode</code></a></li><li><a href=\"/en-US/docs/Web/API/StereoPannerNode\"><code>StereoPannerNode</code></a></li></ol></details></li></ol>","body":[{"type":"prose","value":{"id":null,"title":null,"isH3":false,"content":"<p>In this article, we cover the differences in Web Audio API since it was first implemented in WebKit and how to update your code to use the modern Web Audio API.</p>\n<p>The Web Audio standard was first implemented in <a href=\"https://webkit.org/\" class=\"external\" rel=\" noopener\">WebKit</a>, and the implementation was built in parallel with the work on the <a href=\"https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html\" class=\"external\" rel=\" noopener\">specification</a> of the API. As the specification evolved and changes were made to the spec, some of the old implementation pieces were not removed from the WebKit (and Blink) implementations due to backwards compatibility reasons.</p>\n<p>New engines implementing the Web Audio spec (such as Gecko) will only implement the official, final version of the specification, which means that code using <code>webkitAudioContext</code> or old naming conventions in the Web Audio specification may not immediately work out of the box in a compliant Web Audio implementation. This article attempts to summarize the areas where developers are likely to encounter these problems and provide examples on how to port such code to standards based <a href=\"/en-US/docs/Web/API/AudioContext\"><code>AudioContext</code></a>, which will work across different browser engines.</p>\n<div class=\"notecard note\" id=\"sect1\">\n  <p><strong>Note:</strong> There is a library called <a href=\"https://github.com/cwilso/webkitAudioContext-MonkeyPatch\" class=\"external\" rel=\" noopener\">webkitAudioContext monkeypatch</a>, which automatically fixes some of these changes to make most code targeting <code>webkitAudioContext</code> to work on the standards based <code>AudioContext</code> out of the box, but it currently doesn't handle all of the cases below. Please consult the <a href=\"https://github.com/cwilso/webkitAudioContext-MonkeyPatch/blob/gh-pages/README.md\" class=\"external\" rel=\" noopener\">README file</a> for that library to see a list of APIs that are automatically handled by it.</p>\n</div>"}},{"type":"prose","value":{"id":"changes_to_the_creator_methods","title":"Changes to the creator methods","isH3":false,"content":"<p>Three of the creator methods on <code>webkitAudioContext</code> have been renamed in <a href=\"/en-US/docs/Web/API/AudioContext\"><code>AudioContext</code></a>.</p>\n<ul>\n  <li><code>createGainNode()</code> has been renamed to <a class=\"page-not-created\" title=\"The documentation about this has not yet been written; please consider contributing!\"><code>createGain</code></a>.</li>\n  <li><code>createDelayNode()</code> has been renamed to <a class=\"page-not-created\" title=\"The documentation about this has not yet been written; please consider contributing!\"><code>createDelay</code></a>.</li>\n  <li><code>createJavaScriptNode()</code> has been renamed to <a class=\"page-not-created\" title=\"The documentation about this has not yet been written; please consider contributing!\"><code>createScriptProcessor</code></a>.</li>\n</ul>\n<p>These are simple renames that were made in order to improve the consistency of these method names on <a href=\"/en-US/docs/Web/API/AudioContext\"><code>AudioContext</code></a>. If your code uses either of these names, like in the example below :</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// Old method names</span>\n<span class=\"token keyword\">const</span> gain <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createGainNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> delay <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createDelayNode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> js <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createJavaScriptNode</span><span class=\"token punctuation\">(</span><span class=\"token number\">1024</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>you can rename the methods to look like this:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// New method names</span>\n<span class=\"token keyword\">const</span> gain <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> delay <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createDelay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> js <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createScriptProcessor</span><span class=\"token punctuation\">(</span><span class=\"token number\">1024</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>The semantics of these methods remain the same in the renamed versions.</p>"}},{"type":"prose","value":{"id":"changes_to_starting_and_stopping_nodes","title":"Changes to starting and stopping nodes","isH3":false,"content":"<p>In <code>webkitAudioContext</code>, there are two ways to start and stop <a href=\"/en-US/docs/Web/API/AudioBufferSourceNode\"><code>AudioBufferSourceNode</code></a> and <a href=\"/en-US/docs/Web/API/OscillatorNode\"><code>OscillatorNode</code></a>: the <code>noteOn()</code> and <code>noteOff()</code> methods, and the <code>start()</code> and <code>stop()</code> methods. (<a class=\"page-not-created\" title=\"The documentation about this has not yet been written; please consider contributing!\"><code>AudioBufferSourceNode </code></a>has yet another way of starting output: the <code>noteGrainOn()</code> method.) The <code>noteOn()</code>/<code>noteGrainOn()</code>/<code>noteOff()</code> methods were the original way to start/stop output in these nodes, and in the newer versions of the specification, the <code>noteOn()</code> and <code>noteGrainOn()</code> methods were consolidated into a single <code>start()</code> method, and the <code>noteOff()</code> method was renamed to the <code>stop()</code> method.</p>\n<p>In order to port your code, you can just rename the method that you're using. For example, if you have code like the below:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> osc <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createOscillator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nosc<span class=\"token punctuation\">.</span><span class=\"token function\">noteOn</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nosc<span class=\"token punctuation\">.</span><span class=\"token function\">noteOff</span><span class=\"token punctuation\">(</span><span class=\"token number\">1.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> src <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createBufferSource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsrc<span class=\"token punctuation\">.</span><span class=\"token function\">noteGrainOn</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.25</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsrc<span class=\"token punctuation\">.</span><span class=\"token function\">noteOff</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>you can change it like this in order to port it to the standard AudioContext API:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> osc <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createOscillator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nosc<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nosc<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token number\">1.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> src <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createBufferSource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsrc<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.25</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsrc<span class=\"token punctuation\">.</span><span class=\"token function\">stop</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"remove_synchronous_buffer_creation","title":"Remove synchronous buffer creation","isH3":false,"content":"<p>In the old WebKit implementation of Web Audio, there were two versions of <code>createBuffer()</code>, one which created an initially empty buffer, and one which took an existing <a href=\"/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer\"><code>ArrayBuffer</code></a> containing encoded audio, decoded it and returned the result in the form of an <a href=\"/en-US/docs/Web/API/AudioBuffer\"><code>AudioBuffer</code></a>. The latter version of <code>createBuffer()</code> was potentially expensive, because it had to decode the audio buffer synchronously, and with the buffer being arbitrarily large, it could take a lot of time for this method to complete its work, and no other part of your web page's code could execute in the mean time.</p>\n<p>Because of these problems, this version of the <code>createBuffer()</code> method has been removed, and you should use the asynchronous <code>decodeAudioData()</code> method instead.</p>\n<p>The example below shows old code which downloads an audio file over the network, and then decoded it using <code>createBuffer()</code>:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> xhr <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nxhr<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"GET\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"/path/to/audio.ogg\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nxhr<span class=\"token punctuation\">.</span>responseType <span class=\"token operator\">=</span> <span class=\"token string\">\"arraybuffer\"</span><span class=\"token punctuation\">;</span>\nxhr<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nxhr<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onload</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> decodedBuffer <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createBuffer</span><span class=\"token punctuation\">(</span>xhr<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>decodedBuffer<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Decoding was successful, do something useful with the audio buffer</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Decoding the audio buffer failed\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Converting this code to use <code>decodeAudioData()</code> is relatively simple, as can be seen below:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> xhr <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">XMLHttpRequest</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nxhr<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"GET\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"/path/to/audio.ogg\"</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nxhr<span class=\"token punctuation\">.</span>responseType <span class=\"token operator\">=</span> <span class=\"token string\">\"arraybuffer\"</span><span class=\"token punctuation\">;</span>\nxhr<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nxhr<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onload</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  context<span class=\"token punctuation\">.</span><span class=\"token function\">decodeAudioData</span><span class=\"token punctuation\">(</span>\n    xhr<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token parameter\">decodedBuffer</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// Decoding was successful, do something useful with the audio buffer</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Decoding the audio buffer failed\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Note that the <code>decodeAudioData()</code> method is asynchronous, which means that it will return immediately, and then when the decoding finishes, one of the success or failure callback functions will get called depending on whether the audio decoding was successful. This means that you may need to restructure your code to run the part which happened after the <code>createBuffer()</code> call in the success callback, as you can see in the example above.</p>"}},{"type":"prose","value":{"id":"renaming_of_audioparam.settargetvalueattime","title":"Renaming of AudioParam.setTargetValueAtTime","isH3":false,"content":"<p>The <code>setTargetValueAtTime()</code> method on the <a href=\"/en-US/docs/Web/API/AudioParam\"><code>AudioParam</code></a> interface has been renamed to <code>setTargetAtTime()</code>. This is also a simple rename to improve the understandability of the API, and the semantics of the method are the same. If your code is using <code>setTargetValueAtTime()</code>, you can rename it to use <code>setTargetAtTime()</code>. For example, if we have code that looks like this:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>  <span class=\"token keyword\">const</span> gainNode <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  gainNode<span class=\"token punctuation\">.</span>gain<span class=\"token punctuation\">.</span><span class=\"token function\">setTargetValueAtTime</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>you can rename the method, and be compliant with the standard, like so:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code>  <span class=\"token keyword\">const</span> gainNode <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  gainNode<span class=\"token punctuation\">.</span>gain<span class=\"token punctuation\">.</span><span class=\"token function\">setTargetAtTime</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"enumerated_values_that_changed","title":"Enumerated values that changed","isH3":false,"content":"<p>The original <code>webkitAudioContext</code> API used C-style number based enumerated values in the API. Those values have since been changed to use the Web IDL based enumerated values, which should be familiar because they are similar to things like the <a href=\"/en-US/docs/Web/API/HTMLInputElement\"><code>HTMLInputElement</code></a> property <a class=\"page-not-created\" title=\"The documentation about this has not yet been written; please consider contributing!\"><code>type</code></a>.</p>"}},{"type":"prose","value":{"id":"oscillatornode.type","title":"OscillatorNode.type","isH3":true,"content":"<p><a href=\"/en-US/docs/Web/API/OscillatorNode\"><code>OscillatorNode</code></a>'s type property has been changed to use Web IDL enums. Old code using <code>webkitAudioContext</code> can be ported to standards based <a href=\"/en-US/docs/Web/API/AudioContext\"><code>AudioContext</code></a> like below:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// Old webkitAudioContext code:</span>\n<span class=\"token keyword\">const</span> osc <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createOscillator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nosc<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> osc<span class=\"token punctuation\">.</span><span class=\"token constant\">SINE</span><span class=\"token punctuation\">;</span>     <span class=\"token comment\">// sine waveform</span>\nosc<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> osc<span class=\"token punctuation\">.</span><span class=\"token constant\">SQUARE</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">// square waveform</span>\nosc<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> osc<span class=\"token punctuation\">.</span><span class=\"token constant\">SAWTOOTH</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// sawtooth waveform</span>\nosc<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> osc<span class=\"token punctuation\">.</span><span class=\"token constant\">TRIANGLE</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// triangle waveform</span>\nosc<span class=\"token punctuation\">.</span><span class=\"token function\">setWaveTable</span><span class=\"token punctuation\">(</span>table<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> isCustom <span class=\"token operator\">=</span> osc<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> osc<span class=\"token punctuation\">.</span><span class=\"token constant\">CUSTOM</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// isCustom will be true</span>\n</code></pre></div>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// New standard AudioContext code:</span>\n<span class=\"token keyword\">const</span> osc <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createOscillator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nosc<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">\"sine\"</span><span class=\"token punctuation\">;</span>       <span class=\"token comment\">// sine waveform</span>\nosc<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">\"square\"</span><span class=\"token punctuation\">;</span>     <span class=\"token comment\">// square waveform</span>\nosc<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">\"sawtooth\"</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">// sawtooth waveform</span>\nosc<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">\"triangle\"</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">// triangle waveform</span>\nosc<span class=\"token punctuation\">.</span><span class=\"token function\">setPeriodicWave</span><span class=\"token punctuation\">(</span>table<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// Note: setWaveTable has been renamed to setPeriodicWave!</span>\n<span class=\"token keyword\">const</span> isCustom <span class=\"token operator\">=</span> osc<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token string\">\"custom\"</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// isCustom will be true</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"biquadfilternode.type","title":"BiquadFilterNode.type","isH3":true,"content":"<p><a href=\"/en-US/docs/Web/API/BiquadFilterNode\"><code>BiquadFilterNode</code></a>'s type property has been changed to use Web IDL enums. Old code using <code>webkitAudioContext</code> can be ported to standards based <a href=\"/en-US/docs/Web/API/AudioContext\"><code>AudioContext</code></a> like below:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// Old webkitAudioContext code:</span>\n<span class=\"token keyword\">const</span> filter <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createBiquadFilter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nfilter<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> filter<span class=\"token punctuation\">.</span><span class=\"token constant\">LOWPASS</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">// lowpass filter</span>\nfilter<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> filter<span class=\"token punctuation\">.</span><span class=\"token constant\">HIGHPASS</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// highpass filter</span>\nfilter<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> filter<span class=\"token punctuation\">.</span><span class=\"token constant\">BANDPASS</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// bandpass filter</span>\nfilter<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> filter<span class=\"token punctuation\">.</span><span class=\"token constant\">LOWSHELF</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// lowshelf filter</span>\nfilter<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> filter<span class=\"token punctuation\">.</span><span class=\"token constant\">HIGHSHELF</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// highshelf filter</span>\nfilter<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> filter<span class=\"token punctuation\">.</span><span class=\"token constant\">PEAKING</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">// peaking filter</span>\nfilter<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> filter<span class=\"token punctuation\">.</span><span class=\"token constant\">NOTCH</span><span class=\"token punctuation\">;</span>     <span class=\"token comment\">// notch filter</span>\nfilter<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> filter<span class=\"token punctuation\">.</span><span class=\"token constant\">ALLPASS</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">// allpass filter</span>\n</code></pre></div>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// New standard AudioContext code:</span>\n<span class=\"token keyword\">const</span> filter <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createBiquadFilter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nfilter<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">\"lowpass\"</span><span class=\"token punctuation\">;</span>        <span class=\"token comment\">// lowpass filter</span>\nfilter<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">\"highpass\"</span><span class=\"token punctuation\">;</span>       <span class=\"token comment\">// highpass filter</span>\nfilter<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">\"bandpass\"</span><span class=\"token punctuation\">;</span>       <span class=\"token comment\">// bandpass filter</span>\nfilter<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">\"lowshelf\"</span><span class=\"token punctuation\">;</span>       <span class=\"token comment\">// lowshelf filter</span>\nfilter<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">\"highshelf\"</span><span class=\"token punctuation\">;</span>      <span class=\"token comment\">// highshelf filter</span>\nfilter<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">\"peaking\"</span><span class=\"token punctuation\">;</span>        <span class=\"token comment\">// peaking filter</span>\nfilter<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">\"notch\"</span><span class=\"token punctuation\">;</span>          <span class=\"token comment\">// notch filter</span>\nfilter<span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">\"allpass\"</span><span class=\"token punctuation\">;</span>        <span class=\"token comment\">// allpass filter</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"pannernode.panningmodel","title":"PannerNode.panningModel","isH3":true,"content":"<p><a href=\"/en-US/docs/Web/API/PannerNode\"><code>PannerNode</code></a>'s panningModel property has been changed to use Web IDL enums. Old code using <code>webkitAudioContext</code> can be ported to standards based <a href=\"/en-US/docs/Web/API/AudioContext\"><code>AudioContext</code></a> like below:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// Old webkitAudioContext code:</span>\n<span class=\"token keyword\">const</span> panner <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createPanner</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\npanner<span class=\"token punctuation\">.</span>panningModel <span class=\"token operator\">=</span> panner<span class=\"token punctuation\">.</span><span class=\"token constant\">EQUALPOWER</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// equalpower panning</span>\npanner<span class=\"token punctuation\">.</span>panningModel <span class=\"token operator\">=</span> panner<span class=\"token punctuation\">.</span><span class=\"token constant\">HRTF</span><span class=\"token punctuation\">;</span>        <span class=\"token comment\">// HRTF panning</span>\n</code></pre></div>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// New standard AudioContext code:</span>\n<span class=\"token keyword\">const</span> panner <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createPanner</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\npanner<span class=\"token punctuation\">.</span>panningModel <span class=\"token operator\">=</span> <span class=\"token string\">\"equalpower\"</span><span class=\"token punctuation\">;</span>       <span class=\"token comment\">// equalpower panning</span>\npanner<span class=\"token punctuation\">.</span>panningModel <span class=\"token operator\">=</span> <span class=\"token string\">\"HRTF\"</span><span class=\"token punctuation\">;</span>             <span class=\"token comment\">// HRTF panning</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"pannernode.distancemodel","title":"PannerNode.distanceModel","isH3":true,"content":"<p><a href=\"/en-US/docs/Web/API/PannerNode\"><code>PannerNode</code></a>'s <code>distanceModel</code> property has been changed to use Web IDL enums. Old code using <code>webkitAudioContext</code> can be ported to standards based <a href=\"/en-US/docs/Web/API/AudioContext\"><code>AudioContext</code></a> like below:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// Old webkitAudioContext code:</span>\n<span class=\"token keyword\">const</span> panner <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createPanner</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\npanner<span class=\"token punctuation\">.</span>distanceModel <span class=\"token operator\">=</span> panner<span class=\"token punctuation\">.</span><span class=\"token constant\">LINEAR_DISTANCE</span><span class=\"token punctuation\">;</span>      <span class=\"token comment\">// linear distance model</span>\npanner<span class=\"token punctuation\">.</span>distanceModel <span class=\"token operator\">=</span> panner<span class=\"token punctuation\">.</span><span class=\"token constant\">INVERSE_DISTANCE</span><span class=\"token punctuation\">;</span>     <span class=\"token comment\">// inverse distance model</span>\npanner<span class=\"token punctuation\">.</span>distanceModel <span class=\"token operator\">=</span> panner<span class=\"token punctuation\">.</span><span class=\"token constant\">EXPONENTIAL_DISTANCE</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// exponential distance model</span>\n</code></pre></div>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// Mew standard AudioContext code:</span>\n<span class=\"token keyword\">const</span> panner <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createPanner</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\npanner<span class=\"token punctuation\">.</span>distanceModel <span class=\"token operator\">=</span> <span class=\"token string\">\"linear\"</span><span class=\"token punctuation\">;</span>                    <span class=\"token comment\">// linear distance model</span>\npanner<span class=\"token punctuation\">.</span>distanceModel <span class=\"token operator\">=</span> <span class=\"token string\">\"inverse\"</span><span class=\"token punctuation\">;</span>                   <span class=\"token comment\">// inverse distance model</span>\npanner<span class=\"token punctuation\">.</span>distanceModel <span class=\"token operator\">=</span> <span class=\"token string\">\"exponential\"</span><span class=\"token punctuation\">;</span>               <span class=\"token comment\">// exponential distance model</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"gain_control_moved_to_its_own_node_type","title":"Gain control moved to its own node type","isH3":false,"content":"<p>The Web Audio standard now controls all gain using the <a href=\"/en-US/docs/Web/API/GainNode\"><code>GainNode</code></a>. Instead of setting a <code>gain</code> property directly on an audio source, you connect the source to a gain node and then control the gain using that node's <code>gain</code> parameter.</p>"}},{"type":"prose","value":{"id":"audiobuffersourcenode","title":"AudioBufferSourceNode","isH3":true,"content":"<p>The <code>gain</code> attribute of <a href=\"/en-US/docs/Web/API/AudioBufferSourceNode\"><code>AudioBufferSourceNode</code></a> has been removed. The same functionality can be achieved by connecting the <a href=\"/en-US/docs/Web/API/AudioBufferSourceNode\"><code>AudioBufferSourceNode</code></a> to a gain node. See the following example:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// Old webkitAudioContext code:</span>\n<span class=\"token keyword\">const</span> src <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createBufferSource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsrc<span class=\"token punctuation\">.</span>buffer <span class=\"token operator\">=</span> someBuffer<span class=\"token punctuation\">;</span>\nsrc<span class=\"token punctuation\">.</span>gain<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">;</span>\nsrc<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">.</span>destination<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsrc<span class=\"token punctuation\">.</span><span class=\"token function\">noteOn</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// New standard AudioContext code:</span>\n<span class=\"token keyword\">const</span> src <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createBufferSource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsrc<span class=\"token punctuation\">.</span>buffer <span class=\"token operator\">=</span> someBuffer<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> gain <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsrc<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>gain<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ngain<span class=\"token punctuation\">.</span>gain<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">;</span>\ngain<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">.</span>destination<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsrc<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"audiobuffer","title":"AudioBuffer","isH3":true,"content":"<p>The <code>gain</code> attribute of <a href=\"/en-US/docs/Web/API/AudioBuffer\"><code>AudioBuffer</code></a> has been removed. The same functionality can be achieved by connecting the <a href=\"/en-US/docs/Web/API/AudioBufferSourceNode\"><code>AudioBufferSourceNode</code></a> that owns the buffer to a gain node. See the following example:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// Old webkitAudioContext code:</span>\n<span class=\"token keyword\">const</span> src <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createBufferSource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsrc<span class=\"token punctuation\">.</span>buffer <span class=\"token operator\">=</span> someBuffer<span class=\"token punctuation\">;</span>\nsrc<span class=\"token punctuation\">.</span>buffer<span class=\"token punctuation\">.</span>gain <span class=\"token operator\">=</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">;</span>\nsrc<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">.</span>destination<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsrc<span class=\"token punctuation\">.</span><span class=\"token function\">noteOn</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// New standard AudioContext code:</span>\n<span class=\"token keyword\">const</span> src <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createBufferSource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsrc<span class=\"token punctuation\">.</span>buffer <span class=\"token operator\">=</span> someBuffer<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> gain <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createGain</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsrc<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>gain<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ngain<span class=\"token punctuation\">.</span>gain<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token number\">0.5</span><span class=\"token punctuation\">;</span>\ngain<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">.</span>destination<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsrc<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"removal_of_audiobuffersourcenode.looping","title":"Removal of AudioBufferSourceNode.looping","isH3":false,"content":"<p>The <code>looping</code> attribute of <a href=\"/en-US/docs/Web/API/AudioBufferSourceNode\"><code>AudioBufferSourceNode</code></a> has been removed. This attribute was an alias of the <code>loop</code> attribute, so you can just use the <code>loop</code> attribute instead. Instead of having code like this:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> source <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createBufferSource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsource<span class=\"token punctuation\">.</span>looping <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>you can change it to respect the last version of the specification:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> source <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createBufferSource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsource<span class=\"token punctuation\">.</span>loop <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>Note, the <code>loopStart</code> and <code>loopEnd</code> attributes are not supported in <code>webkitAudioContext</code>.</p>"}},{"type":"prose","value":{"id":"changes_to_determining_playback_state","title":"Changes to determining playback state","isH3":false,"content":"<p>The <code>playbackState</code> attribute of <a href=\"/en-US/docs/Web/API/AudioBufferSourceNode\"><code>AudioBufferSourceNode</code></a> and <a href=\"/en-US/docs/Web/API/OscillatorNode\"><code>OscillatorNode</code></a> has been removed. Depending on why you used this attribute, you can use the following techniques to get the same information:</p>\n<ul>\n  <li>If you need to compare this attribute to <code>UNSCHEDULED_STATE</code>, you can basically remember whether you've called <code>start()</code> on the node or not.</li>\n  <li>If you need to compare this attribute to <code>SCHEDULED_STATE</code>, you can basically remember whether you've called <code>start()</code> on the node or not. You can compare the value of <a href=\"/en-US/docs/Web/API/BaseAudioContext/currentTime\"><code>AudioContext.currentTime</code></a> to the first argument passed to <code>start()</code> to know whether playback has started or not.</li>\n  <li>If you need to compare this attribute to <code>PLAYING_STATE</code>, you can compare the value of <a href=\"/en-US/docs/Web/API/BaseAudioContext/currentTime\"><code>AudioContext.currentTime</code></a> to the first argument passed to <code>start()</code> to know whether playback has started or not.</li>\n  <li>If you need to know when playback of the node is finished (which is the most significant use case of <code>playbackState</code>), there is a new ended event which you can use to know when playback is finished. Please see this code example:</li>\n</ul>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// Old webkitAudioContext code:</span>\n<span class=\"token keyword\">const</span> src <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createBufferSource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Some time later...</span>\n<span class=\"token keyword\">const</span> isFinished <span class=\"token operator\">=</span> src<span class=\"token punctuation\">.</span>playbackState <span class=\"token operator\">===</span> src<span class=\"token punctuation\">.</span><span class=\"token constant\">FINISHED_STATE</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// New AudioContext code:</span>\n<span class=\"token keyword\">let</span> isFinished <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> src <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createBufferSource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsrc<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onended</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n  isFinished <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>The exact same changes have been applied to both <a href=\"/en-US/docs/Web/API/AudioBufferSourceNode\"><code>AudioBufferSourceNode</code></a> and <a href=\"/en-US/docs/Web/API/OscillatorNode\"><code>OscillatorNode</code></a>, so you can apply the same techniques to both kinds of nodes.</p>"}},{"type":"prose","value":{"id":"removal_of_audiocontext.activesourcecount","title":"Removal of AudioContext.activeSourceCount","isH3":false,"content":"<p>The <code>activeSourceCount</code> attribute has been removed from <a href=\"/en-US/docs/Web/API/AudioContext\"><code>AudioContext</code></a>. If you need to count the number of playing source nodes, you can maintain the count by handling the ended event on the source nodes, as shown above.</p>\n<p>Code using the <code>activeSourceCount</code> attribute of the <a href=\"/en-US/docs/Web/API/AudioContext\"><code>AudioContext</code></a>, like this snippet:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token keyword\">const</span> src0 <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createBufferSource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> src1 <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createBufferSource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Set buffers and other parameters...</span>\nsrc0<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nsrc1<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Some time later...</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">.</span>activeSourceCount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<p>could be rewritten like that:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// Array to track the playing source nodes:</span>\n<span class=\"token keyword\">const</span> sources <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// When starting the source, put it at the end of the array,</span>\n<span class=\"token comment\">// and set a handler to make sure it gets removed when the</span>\n<span class=\"token comment\">// AudioBufferSourceNode reaches its end.</span>\n<span class=\"token comment\">// First argument is the AudioBufferSourceNode to start, other arguments are</span>\n<span class=\"token comment\">// the argument to the |start()| method of the AudioBufferSourceNode.</span>\n<span class=\"token keyword\">function</span> <span class=\"token function\">startSource</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">src<span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>startArgs</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  src<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onended</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=&gt;</span> <span class=\"token punctuation\">{</span>\n    sources<span class=\"token punctuation\">.</span><span class=\"token function\">splice</span><span class=\"token punctuation\">(</span>sources<span class=\"token punctuation\">.</span><span class=\"token function\">indexOf</span><span class=\"token punctuation\">(</span>src<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  sources<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>src<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  src<span class=\"token punctuation\">.</span><span class=\"token function\">start</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>src<span class=\"token punctuation\">,</span> startArgs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">activeSources</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> sources<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> src0 <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createBufferSource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> src1 <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createBufferSource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Set buffers and other parameters...</span>\n<span class=\"token function\">startSource</span><span class=\"token punctuation\">(</span>src0<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">startSource</span><span class=\"token punctuation\">(</span>src1<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Some time later, query the number of sources...</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">activeSources</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"renaming_of_wavetable","title":"Renaming of WaveTable","isH3":false,"content":"<p>The <a class=\"page-not-created\" title=\"The documentation about this has not yet been written; please consider contributing!\"><code>WaveTable</code></a> interface has been renamed to <a href=\"/en-US/docs/Web/API/PeriodicWave\"><code>PeriodicWave</code></a>. Here is how you can port old code using <code>WaveTable</code> to the standard AudioContext API:</p>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// Old webkitAudioContext code:</span>\n<span class=\"token keyword\">const</span> osc <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createOscillator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> table <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createWaveTable</span><span class=\"token punctuation\">(</span>realArray<span class=\"token punctuation\">,</span> imaginaryArray<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nosc<span class=\"token punctuation\">.</span><span class=\"token function\">setWaveTable</span><span class=\"token punctuation\">(</span>table<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<div class=\"code-example\"><pre class=\"brush: js notranslate\"><code><span class=\"token comment\">// New standard AudioContext code:</span>\n<span class=\"token keyword\">const</span> osc <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createOscillator</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> table <span class=\"token operator\">=</span> context<span class=\"token punctuation\">.</span><span class=\"token function\">createPeriodicWave</span><span class=\"token punctuation\">(</span>realArray<span class=\"token punctuation\">,</span> imaginaryArray<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nosc<span class=\"token punctuation\">.</span><span class=\"token function\">setPeriodicWave</span><span class=\"token punctuation\">(</span>table<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>"}},{"type":"prose","value":{"id":"removal_of_some_of_the_audioparam_read-only_attributes","title":"Removal of some of the AudioParam read-only attributes","isH3":false,"content":"<p>The following read-only attributes have been removed from AudioParam: <code>name</code>, <code>units</code>, <code>minValue</code>, and <code>maxValue</code>. These used to be informational attributes. Here is some information on how you can get these values if you need them:</p>\n<ul>\n  <li>The <code>name</code> attribute is a string representing the name of the <a href=\"/en-US/docs/Web/API/AudioParam\"><code>AudioParam</code></a> object. For example, the name of <a href=\"/en-US/docs/Web/API/GainNode/gain\"><code>GainNode.gain</code></a> is <code>\"gain\"</code>. You can track where the <a href=\"/en-US/docs/Web/API/AudioParam\"><code>AudioParam</code></a> object is coming from in your code if you need this information.</li>\n  <li>The <code>minValue</code> and <code>maxValue</code> attributes are read-only values representing the nominal range for the <a href=\"/en-US/docs/Web/API/AudioParam\"><code>AudioParam</code></a>. For example, for <a href=\"/en-US/docs/Web/API/GainNode\"><code>GainNode</code></a>, these values are 0 and 1, respectively. Note that these bounds are not enforced by the engine, and are merely used for informational purposes. As an example, it's perfectly valid to set a gain value to 2, or even -1. In order to find out these nominal values, you can consult the <a href=\"https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html\" class=\"external\" rel=\" noopener\">specification</a>.</li>\n  <li>The <code>units</code> attribute as implemented in <code>webkitAudioContext</code> implementations is unused, and always returns 0. There is no reason why you should need this attribute.</li>\n</ul>"}},{"type":"prose","value":{"id":"removal_of_mediaelementaudiosourcenode.mediaelement","title":"Removal of MediaElementAudioSourceNode.mediaElement","isH3":false,"content":"<p>The <code>mediaElement</code> attribute of <a href=\"/en-US/docs/Web/API/MediaElementAudioSourceNode\"><code>MediaElementAudioSourceNode</code></a> has been removed. You can keep a reference to the media element used to create this node if you need to access it later.</p>"}},{"type":"prose","value":{"id":"removal_of_mediastreamaudiosourcenode.mediastream","title":"Removal of MediaStreamAudioSourceNode.mediaStream","isH3":false,"content":"<p>The <code>mediaStream</code> attribute of <a href=\"/en-US/docs/Web/API/MediaStreamAudioSourceNode\"><code>MediaStreamAudioSourceNode</code></a> has been removed. You can keep a reference to the media stream used to create this node if you need to access it later.</p>"}}],"toc":[{"text":"Changes to the creator methods","id":"changes_to_the_creator_methods"},{"text":"Changes to starting and stopping nodes","id":"changes_to_starting_and_stopping_nodes"},{"text":"Remove synchronous buffer creation","id":"remove_synchronous_buffer_creation"},{"text":"Renaming of AudioParam.setTargetValueAtTime","id":"renaming_of_audioparam.settargetvalueattime"},{"text":"Enumerated values that changed","id":"enumerated_values_that_changed"},{"text":"Gain control moved to its own node type","id":"gain_control_moved_to_its_own_node_type"},{"text":"Removal of AudioBufferSourceNode.looping","id":"removal_of_audiobuffersourcenode.looping"},{"text":"Changes to determining playback state","id":"changes_to_determining_playback_state"},{"text":"Removal of AudioContext.activeSourceCount","id":"removal_of_audiocontext.activesourcecount"},{"text":"Renaming of WaveTable","id":"renaming_of_wavetable"},{"text":"Removal of some of the AudioParam read-only attributes","id":"removal_of_some_of_the_audioparam_read-only_attributes"},{"text":"Removal of MediaElementAudioSourceNode.mediaElement","id":"removal_of_mediaelementaudiosourcenode.mediaelement"},{"text":"Removal of MediaStreamAudioSourceNode.mediaStream","id":"removal_of_mediastreamaudiosourcenode.mediastream"}],"summary":"In this article, we cover the differences in Web Audio API since it was first implemented in WebKit and how to update your code to use the modern Web Audio API.","popularity":0.0003,"modified":"2022-09-11T19:35:30.000Z","other_translations":[{"title":"webkitAudioContext에서 이주하기","locale":"ko","native":"한국어"}],"source":{"folder":"en-us/web/api/web_audio_api/migrating_from_webkitaudiocontext","github_url":"https://github.com/mdn/content/blob/style/old/files/en-us/web/api/web_audio_api/migrating_from_webkitaudiocontext/index.md","last_commit_url":"https://github.com/mdn/content/commit/7455f0c585ea29fa85ea09e11716b70f76241f5b","filename":"index.md"},"parents":[{"uri":"/en-US/docs/Web","title":"Web technology for developers"},{"uri":"/en-US/docs/Web/API","title":"Web APIs"},{"uri":"/en-US/docs/Web/API/Web_Audio_API","title":"Web Audio API"},{"uri":"/en-US/docs/Web/API/Web_Audio_API/Migrating_from_webkitAudioContext","title":"Migrating from webkitAudioContext"}],"pageTitle":"Migrating from webkitAudioContext - Web APIs | MDN","noIndexing":false}}